var nM=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var Uwe=nM((tn,eM)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();/**
* @vue/shared v3.4.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function By(n,e){const t=new Set(n.split(","));return e?i=>t.has(i.toLowerCase()):i=>t.has(i)}const vi={},$d=[],Is=()=>{},sM=()=>!1,r_=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),Vy=n=>n.startsWith("onUpdate:"),Rn=Object.assign,Wy=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},oM=Object.prototype.hasOwnProperty,Vt=(n,e)=>oM.call(n,e),ft=Array.isArray,zd=n=>a_(n)==="[object Map]",JI=n=>a_(n)==="[object Set]",xt=n=>typeof n=="function",Ji=n=>typeof n=="string",qu=n=>typeof n=="symbol",xi=n=>n!==null&&typeof n=="object",eN=n=>(xi(n)||xt(n))&&xt(n.then)&&xt(n.catch),tN=Object.prototype.toString,a_=n=>tN.call(n),rM=n=>a_(n).slice(8,-1),iN=n=>a_(n)==="[object Object]",Hy=n=>Ji(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Kh=By(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),l_=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},aM=/-(\w)/g,pu=l_(n=>n.replace(aM,(e,t)=>t?t.toUpperCase():"")),lM=/\B([A-Z])/g,ju=l_(n=>n.replace(lM,"-$1").toLowerCase()),nN=l_(n=>n.charAt(0).toUpperCase()+n.slice(1)),I1=l_(n=>n?`on${nN(n)}`:""),wc=(n,e)=>!Object.is(n,e),N1=(n,e)=>{for(let t=0;t<n.length;t++)n[t](e)},Fm=(n,e,t)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value:t})},cM=n=>{const e=parseFloat(n);return isNaN(e)?n:e};let bx;const sN=()=>bx||(bx=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function $y(n){if(ft(n)){const e={};for(let t=0;t<n.length;t++){const i=n[t],s=Ji(i)?fM(i):$y(i);if(s)for(const o in s)e[o]=s[o]}return e}else if(Ji(n)||xi(n))return n}const dM=/;(?![^(]*\))/g,uM=/:([^]+)/,hM=/\/\*[^]*?\*\//g;function fM(n){const e={};return n.replace(hM,"").split(dM).forEach(t=>{if(t){const i=t.split(uM);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function yf(n){let e="";if(Ji(n))e=n;else if(ft(n))for(let t=0;t<n.length;t++){const i=yf(n[t]);i&&(e+=i+" ")}else if(xi(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const gM="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",pM=By(gM);function oN(n){return!!n||n===""}const ya=n=>Ji(n)?n:n==null?"":ft(n)||xi(n)&&(n.toString===tN||!xt(n.toString))?JSON.stringify(n,rN,2):String(n),rN=(n,e)=>e&&e.__v_isRef?rN(n,e.value):zd(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[i,s],o)=>(t[T1(i,o)+" =>"]=s,t),{})}:JI(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>T1(t))}:qu(e)?T1(e):xi(e)&&!ft(e)&&!iN(e)?String(e):e,T1=(n,e="")=>{var t;return qu(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.4.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let po;class mM{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=po,!e&&po&&(this.index=(po.scopes||(po.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=po;try{return po=this,e()}finally{po=t}}}on(){po=this}off(){po=this.parent}stop(e){if(this._active){let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function _M(n,e=po){e&&e.active&&e.effects.push(n)}function bM(){return po}let sc;class zy{constructor(e,t,i,s){this.fn=e,this.trigger=t,this.scheduler=i,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,_M(this,s)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Rc();for(let e=0;e<this._depsLength;e++){const t=this.deps[e];if(t.computed&&(vM(t.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),Pc()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=Za,t=sc;try{return Za=!0,sc=this,this._runnings++,vx(this),this.fn()}finally{wx(this),this._runnings--,sc=t,Za=e}}stop(){var e;this.active&&(vx(this),wx(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function vM(n){return n.value}function vx(n){n._trackId++,n._depsLength=0}function wx(n){if(n.deps.length>n._depsLength){for(let e=n._depsLength;e<n.deps.length;e++)aN(n.deps[e],n);n.deps.length=n._depsLength}}function aN(n,e){const t=n.get(e);t!==void 0&&e._trackId!==t&&(n.delete(e),n.size===0&&n.cleanup())}let Za=!0,gv=0;const lN=[];function Rc(){lN.push(Za),Za=!1}function Pc(){const n=lN.pop();Za=n===void 0?!0:n}function Uy(){gv++}function qy(){for(gv--;!gv&&pv.length;)pv.shift()()}function cN(n,e,t){if(e.get(n)!==n._trackId){e.set(n,n._trackId);const i=n.deps[n._depsLength];i!==e?(i&&aN(i,n),n.deps[n._depsLength++]=e):n._depsLength++}}const pv=[];function dN(n,e,t){Uy();for(const i of n.keys()){let s;i._dirtyLevel<e&&(s??(s=n.get(i)===i._trackId))&&(i._shouldSchedule||(i._shouldSchedule=i._dirtyLevel===0),i._dirtyLevel=e),i._shouldSchedule&&(s??(s=n.get(i)===i._trackId))&&(i.trigger(),(!i._runnings||i.allowRecurse)&&i._dirtyLevel!==2&&(i._shouldSchedule=!1,i.scheduler&&pv.push(i.scheduler)))}qy()}const uN=(n,e)=>{const t=new Map;return t.cleanup=n,t.computed=e,t},mv=new WeakMap,oc=Symbol(""),_v=Symbol("");function Cs(n,e,t){if(Za&&sc){let i=mv.get(n);i||mv.set(n,i=new Map);let s=i.get(t);s||i.set(t,s=uN(()=>i.delete(t))),cN(sc,s)}}function Yr(n,e,t,i,s,o){const r=mv.get(n);if(!r)return;let a=[];if(e==="clear")a=[...r.values()];else if(t==="length"&&ft(n)){const l=Number(i);r.forEach((c,d)=>{(d==="length"||!qu(d)&&d>=l)&&a.push(c)})}else switch(t!==void 0&&a.push(r.get(t)),e){case"add":ft(n)?Hy(t)&&a.push(r.get("length")):(a.push(r.get(oc)),zd(n)&&a.push(r.get(_v)));break;case"delete":ft(n)||(a.push(r.get(oc)),zd(n)&&a.push(r.get(_v)));break;case"set":zd(n)&&a.push(r.get(oc));break}Uy();for(const l of a)l&&dN(l,4);qy()}const wM=By("__proto__,__v_isRef,__isVue"),hN=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(qu)),Cx=CM();function CM(){const n={};return["includes","indexOf","lastIndexOf"].forEach(e=>{n[e]=function(...t){const i=Yt(this);for(let o=0,r=this.length;o<r;o++)Cs(i,"get",o+"");const s=i[e](...t);return s===-1||s===!1?i[e](...t.map(Yt)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{n[e]=function(...t){Rc(),Uy();const i=Yt(this)[e].apply(this,t);return qy(),Pc(),i}}),n}function yM(n){const e=Yt(this);return Cs(e,"has",n),e.hasOwnProperty(n)}class fN{constructor(e=!1,t=!1){this._isReadonly=e,this._shallow=t}get(e,t,i){const s=this._isReadonly,o=this._shallow;if(t==="__v_isReactive")return!s;if(t==="__v_isReadonly")return s;if(t==="__v_isShallow")return o;if(t==="__v_raw")return i===(s?o?PM:_N:o?mN:pN).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const r=ft(e);if(!s){if(r&&Vt(Cx,t))return Reflect.get(Cx,t,i);if(t==="hasOwnProperty")return yM}const a=Reflect.get(e,t,i);return(qu(t)?hN.has(t):wM(t))||(s||Cs(e,"get",t),o)?a:Fs(a)?r&&Hy(t)?a:a.value:xi(a)?s?bN(a):Gy(a):a}}class gN extends fN{constructor(e=!1){super(!1,e)}set(e,t,i,s){let o=e[t];if(!this._shallow){const l=Sf(o);if(!bv(i)&&!Sf(i)&&(o=Yt(o),i=Yt(i)),!ft(e)&&Fs(o)&&!Fs(i))return l?!1:(o.value=i,!0)}const r=ft(e)&&Hy(t)?Number(t)<e.length:Vt(e,t),a=Reflect.set(e,t,i,s);return e===Yt(s)&&(r?wc(i,o)&&Yr(e,"set",t,i):Yr(e,"add",t,i)),a}deleteProperty(e,t){const i=Vt(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&i&&Yr(e,"delete",t,void 0),s}has(e,t){const i=Reflect.has(e,t);return(!qu(t)||!hN.has(t))&&Cs(e,"has",t),i}ownKeys(e){return Cs(e,"iterate",ft(e)?"length":oc),Reflect.ownKeys(e)}}class SM extends fN{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const LM=new gN,xM=new SM,DM=new gN(!0),jy=n=>n,c_=n=>Reflect.getPrototypeOf(n);function sp(n,e,t=!1,i=!1){n=n.__v_raw;const s=Yt(n),o=Yt(e);t||(wc(e,o)&&Cs(s,"get",e),Cs(s,"get",o));const{has:r}=c_(s),a=i?jy:t?Xy:Yy;if(r.call(s,e))return a(n.get(e));if(r.call(s,o))return a(n.get(o));n!==s&&n.get(e)}function op(n,e=!1){const t=this.__v_raw,i=Yt(t),s=Yt(n);return e||(wc(n,s)&&Cs(i,"has",n),Cs(i,"has",s)),n===s?t.has(n):t.has(n)||t.has(s)}function rp(n,e=!1){return n=n.__v_raw,!e&&Cs(Yt(n),"iterate",oc),Reflect.get(n,"size",n)}function yx(n){n=Yt(n);const e=Yt(this);return c_(e).has.call(e,n)||(e.add(n),Yr(e,"add",n,n)),this}function Sx(n,e){e=Yt(e);const t=Yt(this),{has:i,get:s}=c_(t);let o=i.call(t,n);o||(n=Yt(n),o=i.call(t,n));const r=s.call(t,n);return t.set(n,e),o?wc(e,r)&&Yr(t,"set",n,e):Yr(t,"add",n,e),this}function Lx(n){const e=Yt(this),{has:t,get:i}=c_(e);let s=t.call(e,n);s||(n=Yt(n),s=t.call(e,n)),i&&i.call(e,n);const o=e.delete(n);return s&&Yr(e,"delete",n,void 0),o}function xx(){const n=Yt(this),e=n.size!==0,t=n.clear();return e&&Yr(n,"clear",void 0,void 0),t}function ap(n,e){return function(i,s){const o=this,r=o.__v_raw,a=Yt(r),l=e?jy:n?Xy:Yy;return!n&&Cs(a,"iterate",oc),r.forEach((c,d)=>i.call(s,l(c),l(d),o))}}function lp(n,e,t){return function(...i){const s=this.__v_raw,o=Yt(s),r=zd(o),a=n==="entries"||n===Symbol.iterator&&r,l=n==="keys"&&r,c=s[n](...i),d=t?jy:e?Xy:Yy;return!e&&Cs(o,"iterate",l?_v:oc),{next(){const{value:u,done:h}=c.next();return h?{value:u,done:h}:{value:a?[d(u[0]),d(u[1])]:d(u),done:h}},[Symbol.iterator](){return this}}}}function la(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function kM(){const n={get(o){return sp(this,o)},get size(){return rp(this)},has:op,add:yx,set:Sx,delete:Lx,clear:xx,forEach:ap(!1,!1)},e={get(o){return sp(this,o,!1,!0)},get size(){return rp(this)},has:op,add:yx,set:Sx,delete:Lx,clear:xx,forEach:ap(!1,!0)},t={get(o){return sp(this,o,!0)},get size(){return rp(this,!0)},has(o){return op.call(this,o,!0)},add:la("add"),set:la("set"),delete:la("delete"),clear:la("clear"),forEach:ap(!0,!1)},i={get(o){return sp(this,o,!0,!0)},get size(){return rp(this,!0)},has(o){return op.call(this,o,!0)},add:la("add"),set:la("set"),delete:la("delete"),clear:la("clear"),forEach:ap(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=lp(o,!1,!1),t[o]=lp(o,!0,!1),e[o]=lp(o,!1,!0),i[o]=lp(o,!0,!0)}),[n,t,e,i]}const[EM,IM,NM,TM]=kM();function Ky(n,e){const t=e?n?TM:NM:n?IM:EM;return(i,s,o)=>s==="__v_isReactive"?!n:s==="__v_isReadonly"?n:s==="__v_raw"?i:Reflect.get(Vt(t,s)&&s in i?t:i,s,o)}const AM={get:Ky(!1,!1)},MM={get:Ky(!1,!0)},RM={get:Ky(!0,!1)},pN=new WeakMap,mN=new WeakMap,_N=new WeakMap,PM=new WeakMap;function OM(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function FM(n){return n.__v_skip||!Object.isExtensible(n)?0:OM(rM(n))}function Gy(n){return Sf(n)?n:Zy(n,!1,LM,AM,pN)}function BM(n){return Zy(n,!1,DM,MM,mN)}function bN(n){return Zy(n,!0,xM,RM,_N)}function Zy(n,e,t,i,s){if(!xi(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const o=s.get(n);if(o)return o;const r=FM(n);if(r===0)return n;const a=new Proxy(n,r===2?i:t);return s.set(n,a),a}function Ud(n){return Sf(n)?Ud(n.__v_raw):!!(n&&n.__v_isReactive)}function Sf(n){return!!(n&&n.__v_isReadonly)}function bv(n){return!!(n&&n.__v_isShallow)}function vN(n){return Ud(n)||Sf(n)}function Yt(n){const e=n&&n.__v_raw;return e?Yt(e):n}function wN(n){return Object.isExtensible(n)&&Fm(n,"__v_skip",!0),n}const Yy=n=>xi(n)?Gy(n):n,Xy=n=>xi(n)?bN(n):n;class CN{constructor(e,t,i,s){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new zy(()=>e(this._value),()=>A1(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=i}get value(){const e=Yt(this);return(!e._cacheable||e.effect.dirty)&&wc(e._value,e._value=e.effect.run())&&A1(e,4),WM(e),e.effect._dirtyLevel>=2&&A1(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function VM(n,e,t=!1){let i,s;const o=xt(n);return o?(i=n,s=Is):(i=n.get,s=n.set),new CN(i,s,o||!s,t)}function WM(n){var e;Za&&sc&&(n=Yt(n),cN(sc,(e=n.dep)!=null?e:n.dep=uN(()=>n.dep=void 0,n instanceof CN?n:void 0)))}function A1(n,e=4,t){n=Yt(n);const i=n.dep;i&&dN(i,e)}function Fs(n){return!!(n&&n.__v_isRef===!0)}function HM(n){return Fs(n)?n.value:n}const $M={get:(n,e,t)=>HM(Reflect.get(n,e,t)),set:(n,e,t,i)=>{const s=n[e];return Fs(s)&&!Fs(t)?(s.value=t,!0):Reflect.set(n,e,t,i)}};function yN(n){return Ud(n)?n:new Proxy(n,$M)}/**
* @vue/runtime-core v3.4.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ya(n,e,t,i){let s;try{s=i?n(...i):n()}catch(o){d_(o,e,t)}return s}function ko(n,e,t,i){if(xt(n)){const o=Ya(n,e,t,i);return o&&eN(o)&&o.catch(r=>{d_(r,e,t)}),o}const s=[];for(let o=0;o<n.length;o++)s.push(ko(n[o],e,t,i));return s}function d_(n,e,t,i=!0){const s=e?e.vnode:null;if(e){let o=e.parent;const r=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${t}`;for(;o;){const c=o.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](n,r,a)===!1)return}o=o.parent}const l=e.appContext.config.errorHandler;if(l){Ya(l,null,10,[n,r,a]);return}}zM(n,t,s,i)}function zM(n,e,t,i=!0){console.error(n)}let Lf=!1,vv=!1;const Nn=[];let Go=0;const qd=[];let Sa=null,$l=0;const SN=Promise.resolve();let Qy=null;function UM(n){const e=Qy||SN;return n?e.then(this?n.bind(this):n):e}function qM(n){let e=Go+1,t=Nn.length;for(;e<t;){const i=e+t>>>1,s=Nn[i],o=xf(s);o<n||o===n&&s.pre?e=i+1:t=i}return e}function Jy(n){(!Nn.length||!Nn.includes(n,Lf&&n.allowRecurse?Go+1:Go))&&(n.id==null?Nn.push(n):Nn.splice(qM(n.id),0,n),LN())}function LN(){!Lf&&!vv&&(vv=!0,Qy=SN.then(DN))}function jM(n){const e=Nn.indexOf(n);e>Go&&Nn.splice(e,1)}function KM(n){ft(n)?qd.push(...n):(!Sa||!Sa.includes(n,n.allowRecurse?$l+1:$l))&&qd.push(n),LN()}function Dx(n,e,t=Lf?Go+1:0){for(;t<Nn.length;t++){const i=Nn[t];if(i&&i.pre){if(n&&i.id!==n.uid)continue;Nn.splice(t,1),t--,i()}}}function xN(n){if(qd.length){const e=[...new Set(qd)].sort((t,i)=>xf(t)-xf(i));if(qd.length=0,Sa){Sa.push(...e);return}for(Sa=e,$l=0;$l<Sa.length;$l++)Sa[$l]();Sa=null,$l=0}}const xf=n=>n.id==null?1/0:n.id,GM=(n,e)=>{const t=xf(n)-xf(e);if(t===0){if(n.pre&&!e.pre)return-1;if(e.pre&&!n.pre)return 1}return t};function DN(n){vv=!1,Lf=!0,Nn.sort(GM);const e=Is;try{for(Go=0;Go<Nn.length;Go++){const t=Nn[Go];t&&t.active!==!1&&Ya(t,null,14)}}finally{Go=0,Nn.length=0,xN(),Lf=!1,Qy=null,(Nn.length||qd.length)&&DN()}}function ZM(n,e,...t){if(n.isUnmounted)return;const i=n.vnode.props||vi;let s=t;const o=e.startsWith("update:"),r=o&&e.slice(7);if(r&&r in i){const d=`${r==="modelValue"?"model":r}Modifiers`,{number:u,trim:h}=i[d]||vi;h&&(s=t.map(f=>Ji(f)?f.trim():f)),u&&(s=t.map(cM))}let a,l=i[a=I1(e)]||i[a=I1(pu(e))];!l&&o&&(l=i[a=I1(ju(e))]),l&&ko(l,n,6,s);const c=i[a+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,ko(c,n,6,s)}}function kN(n,e,t=!1){const i=e.emitsCache,s=i.get(n);if(s!==void 0)return s;const o=n.emits;let r={},a=!1;if(!xt(n)){const l=c=>{const d=kN(c,e,!0);d&&(a=!0,Rn(r,d))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!o&&!a?(xi(n)&&i.set(n,null),null):(ft(o)?o.forEach(l=>r[l]=null):Rn(r,o),xi(n)&&i.set(n,r),r)}function u_(n,e){return!n||!r_(e)?!1:(e=e.slice(2).replace(/Once$/,""),Vt(n,e[0].toLowerCase()+e.slice(1))||Vt(n,ju(e))||Vt(n,e))}let nr=null,h_=null;function Bm(n){const e=nr;return nr=n,h_=n&&n.type.__scopeId||null,e}function eS(n){h_=n}function tS(){h_=null}function YM(n,e=nr,t){if(!e||n._n)return n;const i=(...s)=>{i._d&&Ox(-1);const o=Bm(e);let r;try{r=n(...s)}finally{Bm(o),i._d&&Ox(1)}return r};return i._n=!0,i._c=!0,i._d=!0,i}function M1(n){const{type:e,vnode:t,proxy:i,withProxy:s,props:o,propsOptions:[r],slots:a,attrs:l,emit:c,render:d,renderCache:u,data:h,setupState:f,ctx:g,inheritAttrs:p}=n;let _,v;const b=Bm(n);try{if(t.shapeFlag&4){const C=s||i,S=C;_=qo(d.call(S,C,u,o,f,h,g)),v=l}else{const C=e;_=qo(C.length>1?C(o,{attrs:l,slots:a,emit:c}):C(o,null)),v=e.props?l:XM(l)}}catch(C){Yh.length=0,d_(C,n,1),_=W(Df)}let w=_;if(v&&p!==!1){const C=Object.keys(v),{shapeFlag:S}=w;C.length&&S&7&&(r&&C.some(Vy)&&(v=QM(v,r)),w=mu(w,v))}return t.dirs&&(w=mu(w),w.dirs=w.dirs?w.dirs.concat(t.dirs):t.dirs),t.transition&&(w.transition=t.transition),_=w,Bm(b),_}const XM=n=>{let e;for(const t in n)(t==="class"||t==="style"||r_(t))&&((e||(e={}))[t]=n[t]);return e},QM=(n,e)=>{const t={};for(const i in n)(!Vy(i)||!(i.slice(9)in e))&&(t[i]=n[i]);return t};function JM(n,e,t){const{props:i,children:s,component:o}=n,{props:r,children:a,patchFlag:l}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return i?kx(i,r,c):!!r;if(l&8){const d=e.dynamicProps;for(let u=0;u<d.length;u++){const h=d[u];if(r[h]!==i[h]&&!u_(c,h))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:i===r?!1:i?r?kx(i,r,c):!0:!!r;return!1}function kx(n,e,t){const i=Object.keys(e);if(i.length!==Object.keys(n).length)return!0;for(let s=0;s<i.length;s++){const o=i[s];if(e[o]!==n[o]&&!u_(t,o))return!0}return!1}function eR({vnode:n,parent:e},t){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===n&&(i.el=n.el),i===n)(n=e.vnode).el=t,e=e.parent;else break}}const tR=Symbol.for("v-ndc"),iR=n=>n.__isSuspense;function nR(n,e){e&&e.pendingBranch?ft(n)?e.effects.push(...n):e.effects.push(n):KM(n)}const sR=Symbol.for("v-scx"),oR=()=>am(sR),cp={};function R1(n,e,t){return EN(n,e,t)}function EN(n,e,{immediate:t,deep:i,flush:s,once:o,onTrack:r,onTrigger:a}=vi){if(e&&o){const k=e;e=(...L)=>{k(...L),S()}}const l=jn,c=k=>i===!0?k:_d(k,i===!1?1:void 0);let d,u=!1,h=!1;if(Fs(n)?(d=()=>n.value,u=bv(n)):Ud(n)?(d=()=>c(n),u=!0):ft(n)?(h=!0,u=n.some(k=>Ud(k)||bv(k)),d=()=>n.map(k=>{if(Fs(k))return k.value;if(Ud(k))return c(k);if(xt(k))return Ya(k,l,2)})):xt(n)?e?d=()=>Ya(n,l,2):d=()=>(f&&f(),ko(n,l,3,[g])):d=Is,e&&i){const k=d;d=()=>_d(k())}let f,g=k=>{f=w.onStop=()=>{Ya(k,l,4),f=w.onStop=void 0}},p;if(m_)if(g=Is,e?t&&ko(e,l,3,[d(),h?[]:void 0,g]):d(),s==="sync"){const k=oR();p=k.__watcherHandles||(k.__watcherHandles=[])}else return Is;let _=h?new Array(n.length).fill(cp):cp;const v=()=>{if(!(!w.active||!w.dirty))if(e){const k=w.run();(i||u||(h?k.some((L,x)=>wc(L,_[x])):wc(k,_)))&&(f&&f(),ko(e,l,3,[k,_===cp?void 0:h&&_[0]===cp?[]:_,g]),_=k)}else w.run()};v.allowRecurse=!!e;let b;s==="sync"?b=v:s==="post"?b=()=>as(v,l&&l.suspense):(v.pre=!0,l&&(v.id=l.uid),b=()=>Jy(v));const w=new zy(d,Is,b),C=bM(),S=()=>{w.stop(),C&&Wy(C.effects,w)};return e?t?v():_=w.run():s==="post"?as(w.run.bind(w),l&&l.suspense):w.run(),p&&p.push(S),S}function rR(n,e,t){const i=this.proxy,s=Ji(n)?n.includes(".")?IN(i,n):()=>i[n]:n.bind(i,i);let o;xt(e)?o=e:(o=e.handler,t=e);const r=Cg(this),a=EN(s,o.bind(i),t);return r(),a}function IN(n,e){const t=e.split(".");return()=>{let i=n;for(let s=0;s<t.length&&i;s++)i=i[t[s]];return i}}function _d(n,e,t=0,i){if(!xi(n)||n.__v_skip)return n;if(e&&e>0){if(t>=e)return n;t++}if(i=i||new Set,i.has(n))return n;if(i.add(n),Fs(n))_d(n.value,e,t,i);else if(ft(n))for(let s=0;s<n.length;s++)_d(n[s],e,t,i);else if(JI(n)||zd(n))n.forEach(s=>{_d(s,e,t,i)});else if(iN(n))for(const s in n)_d(n[s],e,t,i);return n}function Tl(n,e,t,i){const s=n.dirs,o=e&&e.dirs;for(let r=0;r<s.length;r++){const a=s[r];o&&(a.oldValue=o[r].value);let l=a.dir[i];l&&(Rc(),ko(l,t,8,[n.el,a,n,e]),Pc())}}const om=n=>!!n.type.__asyncLoader,NN=n=>n.type.__isKeepAlive;function aR(n,e){TN(n,"a",e)}function lR(n,e){TN(n,"da",e)}function TN(n,e,t=jn){const i=n.__wdc||(n.__wdc=()=>{let s=t;for(;s;){if(s.isDeactivated)return;s=s.parent}return n()});if(f_(e,i,t),t){let s=t.parent;for(;s&&s.parent;)NN(s.parent.vnode)&&cR(i,e,t,s),s=s.parent}}function cR(n,e,t,i){const s=f_(e,n,i,!0);AN(()=>{Wy(i[e],s)},t)}function f_(n,e,t=jn,i=!1){if(t){const s=t[n]||(t[n]=[]),o=e.__weh||(e.__weh=(...r)=>{if(t.isUnmounted)return;Rc();const a=Cg(t),l=ko(e,t,n,r);return a(),Pc(),l});return i?s.unshift(o):s.push(o),o}}const na=n=>(e,t=jn)=>(!m_||n==="sp")&&f_(n,(...i)=>e(...i),t),dR=na("bm"),uR=na("m"),hR=na("bu"),fR=na("u"),gR=na("bum"),AN=na("um"),pR=na("sp"),mR=na("rtg"),_R=na("rtc");function bR(n,e=jn){f_("ec",n,e)}function rm(n,e,t,i){let s;const o=t&&t[i];if(ft(n)||Ji(n)){s=new Array(n.length);for(let r=0,a=n.length;r<a;r++)s[r]=e(n[r],r,void 0,o&&o[r])}else if(typeof n=="number"){s=new Array(n);for(let r=0;r<n;r++)s[r]=e(r+1,r,void 0,o&&o[r])}else if(xi(n))if(n[Symbol.iterator])s=Array.from(n,(r,a)=>e(r,a,void 0,o&&o[a]));else{const r=Object.keys(n);s=new Array(r.length);for(let a=0,l=r.length;a<l;a++){const c=r[a];s[a]=e(n[c],c,a,o&&o[a])}}else s=[];return t&&(t[i]=s),s}const wv=n=>n?zN(n)?oS(n)||n.proxy:wv(n.parent):null,Gh=Rn(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>wv(n.parent),$root:n=>wv(n.root),$emit:n=>n.emit,$options:n=>iS(n),$forceUpdate:n=>n.f||(n.f=()=>{n.effect.dirty=!0,Jy(n.update)}),$nextTick:n=>n.n||(n.n=UM.bind(n.proxy)),$watch:n=>rR.bind(n)}),P1=(n,e)=>n!==vi&&!n.__isScriptSetup&&Vt(n,e),vR={get({_:n},e){const{ctx:t,setupState:i,data:s,props:o,accessCache:r,type:a,appContext:l}=n;let c;if(e[0]!=="$"){const f=r[e];if(f!==void 0)switch(f){case 1:return i[e];case 2:return s[e];case 4:return t[e];case 3:return o[e]}else{if(P1(i,e))return r[e]=1,i[e];if(s!==vi&&Vt(s,e))return r[e]=2,s[e];if((c=n.propsOptions[0])&&Vt(c,e))return r[e]=3,o[e];if(t!==vi&&Vt(t,e))return r[e]=4,t[e];Cv&&(r[e]=0)}}const d=Gh[e];let u,h;if(d)return e==="$attrs"&&Cs(n,"get",e),d(n);if((u=a.__cssModules)&&(u=u[e]))return u;if(t!==vi&&Vt(t,e))return r[e]=4,t[e];if(h=l.config.globalProperties,Vt(h,e))return h[e]},set({_:n},e,t){const{data:i,setupState:s,ctx:o}=n;return P1(s,e)?(s[e]=t,!0):i!==vi&&Vt(i,e)?(i[e]=t,!0):Vt(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(o[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:i,appContext:s,propsOptions:o}},r){let a;return!!t[r]||n!==vi&&Vt(n,r)||P1(e,r)||(a=o[0])&&Vt(a,r)||Vt(i,r)||Vt(Gh,r)||Vt(s.config.globalProperties,r)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:Vt(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function Ex(n){return ft(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let Cv=!0;function wR(n){const e=iS(n),t=n.proxy,i=n.ctx;Cv=!1,e.beforeCreate&&Ix(e.beforeCreate,n,"bc");const{data:s,computed:o,methods:r,watch:a,provide:l,inject:c,created:d,beforeMount:u,mounted:h,beforeUpdate:f,updated:g,activated:p,deactivated:_,beforeDestroy:v,beforeUnmount:b,destroyed:w,unmounted:C,render:S,renderTracked:k,renderTriggered:L,errorCaptured:x,serverPrefetch:I,expose:A,inheritAttrs:T,components:O,directives:R,filters:X}=e;if(c&&CR(c,i,null),r)for(const ue in r){const me=r[ue];xt(me)&&(i[ue]=me.bind(t))}if(s){const ue=s.call(t,t);xi(ue)&&(n.data=Gy(ue))}if(Cv=!0,o)for(const ue in o){const me=o[ue],de=xt(me)?me.bind(t,t):xt(me.get)?me.get.bind(t,t):Is,Ae=!xt(me)&&xt(me.set)?me.set.bind(t):Is,ye=QR({get:de,set:Ae});Object.defineProperty(i,ue,{enumerable:!0,configurable:!0,get:()=>ye.value,set:be=>ye.value=be})}if(a)for(const ue in a)MN(a[ue],i,t,ue);if(l){const ue=xt(l)?l.call(t):l;Reflect.ownKeys(ue).forEach(me=>{kR(me,ue[me])})}d&&Ix(d,n,"c");function ae(ue,me){ft(me)?me.forEach(de=>ue(de.bind(t))):me&&ue(me.bind(t))}if(ae(dR,u),ae(uR,h),ae(hR,f),ae(fR,g),ae(aR,p),ae(lR,_),ae(bR,x),ae(_R,k),ae(mR,L),ae(gR,b),ae(AN,C),ae(pR,I),ft(A))if(A.length){const ue=n.exposed||(n.exposed={});A.forEach(me=>{Object.defineProperty(ue,me,{get:()=>t[me],set:de=>t[me]=de})})}else n.exposed||(n.exposed={});S&&n.render===Is&&(n.render=S),T!=null&&(n.inheritAttrs=T),O&&(n.components=O),R&&(n.directives=R)}function CR(n,e,t=Is){ft(n)&&(n=yv(n));for(const i in n){const s=n[i];let o;xi(s)?"default"in s?o=am(s.from||i,s.default,!0):o=am(s.from||i):o=am(s),Fs(o)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:r=>o.value=r}):e[i]=o}}function Ix(n,e,t){ko(ft(n)?n.map(i=>i.bind(e.proxy)):n.bind(e.proxy),e,t)}function MN(n,e,t,i){const s=i.includes(".")?IN(t,i):()=>t[i];if(Ji(n)){const o=e[n];xt(o)&&R1(s,o)}else if(xt(n))R1(s,n.bind(t));else if(xi(n))if(ft(n))n.forEach(o=>MN(o,e,t,i));else{const o=xt(n.handler)?n.handler.bind(t):e[n.handler];xt(o)&&R1(s,o,n)}}function iS(n){const e=n.type,{mixins:t,extends:i}=e,{mixins:s,optionsCache:o,config:{optionMergeStrategies:r}}=n.appContext,a=o.get(e);let l;return a?l=a:!s.length&&!t&&!i?l=e:(l={},s.length&&s.forEach(c=>Vm(l,c,r,!0)),Vm(l,e,r)),xi(e)&&o.set(e,l),l}function Vm(n,e,t,i=!1){const{mixins:s,extends:o}=e;o&&Vm(n,o,t,!0),s&&s.forEach(r=>Vm(n,r,t,!0));for(const r in e)if(!(i&&r==="expose")){const a=yR[r]||t&&t[r];n[r]=a?a(n[r],e[r]):e[r]}return n}const yR={data:Nx,props:Tx,emits:Tx,methods:Nh,computed:Nh,beforeCreate:Wn,created:Wn,beforeMount:Wn,mounted:Wn,beforeUpdate:Wn,updated:Wn,beforeDestroy:Wn,beforeUnmount:Wn,destroyed:Wn,unmounted:Wn,activated:Wn,deactivated:Wn,errorCaptured:Wn,serverPrefetch:Wn,components:Nh,directives:Nh,watch:LR,provide:Nx,inject:SR};function Nx(n,e){return e?n?function(){return Rn(xt(n)?n.call(this,this):n,xt(e)?e.call(this,this):e)}:e:n}function SR(n,e){return Nh(yv(n),yv(e))}function yv(n){if(ft(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function Wn(n,e){return n?[...new Set([].concat(n,e))]:e}function Nh(n,e){return n?Rn(Object.create(null),n,e):e}function Tx(n,e){return n?ft(n)&&ft(e)?[...new Set([...n,...e])]:Rn(Object.create(null),Ex(n),Ex(e??{})):e}function LR(n,e){if(!n)return e;if(!e)return n;const t=Rn(Object.create(null),n);for(const i in e)t[i]=Wn(n[i],e[i]);return t}function RN(){return{app:null,config:{isNativeTag:sM,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let xR=0;function DR(n,e){return function(i,s=null){xt(i)||(i=Rn({},i)),s!=null&&!xi(s)&&(s=null);const o=RN(),r=new WeakSet;let a=!1;const l=o.app={_uid:xR++,_component:i,_props:s,_container:null,_context:o,_instance:null,version:JR,get config(){return o.config},set config(c){},use(c,...d){return r.has(c)||(c&&xt(c.install)?(r.add(c),c.install(l,...d)):xt(c)&&(r.add(c),c(l,...d))),l},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),l},component(c,d){return d?(o.components[c]=d,l):o.components[c]},directive(c,d){return d?(o.directives[c]=d,l):o.directives[c]},mount(c,d,u){if(!a){const h=W(i,s);return h.appContext=o,u===!0?u="svg":u===!1&&(u=void 0),d&&e?e(h,c):n(h,c,u),a=!0,l._container=c,c.__vue_app__=l,oS(h.component)||h.component.proxy}},unmount(){a&&(n(null,l._container),delete l._container.__vue_app__)},provide(c,d){return o.provides[c]=d,l},runWithContext(c){const d=Zh;Zh=l;try{return c()}finally{Zh=d}}};return l}}let Zh=null;function kR(n,e){if(jn){let t=jn.provides;const i=jn.parent&&jn.parent.provides;i===t&&(t=jn.provides=Object.create(i)),t[n]=e}}function am(n,e,t=!1){const i=jn||nr;if(i||Zh){const s=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:Zh._context.provides;if(s&&n in s)return s[n];if(arguments.length>1)return t&&xt(e)?e.call(i&&i.proxy):e}}function ER(n,e,t,i=!1){const s={},o={};Fm(o,p_,1),n.propsDefaults=Object.create(null),PN(n,e,s,o);for(const r in n.propsOptions[0])r in s||(s[r]=void 0);t?n.props=i?s:BM(s):n.type.props?n.props=s:n.props=o,n.attrs=o}function IR(n,e,t,i){const{props:s,attrs:o,vnode:{patchFlag:r}}=n,a=Yt(s),[l]=n.propsOptions;let c=!1;if((i||r>0)&&!(r&16)){if(r&8){const d=n.vnode.dynamicProps;for(let u=0;u<d.length;u++){let h=d[u];if(u_(n.emitsOptions,h))continue;const f=e[h];if(l)if(Vt(o,h))f!==o[h]&&(o[h]=f,c=!0);else{const g=pu(h);s[g]=Sv(l,a,g,f,n,!1)}else f!==o[h]&&(o[h]=f,c=!0)}}}else{PN(n,e,s,o)&&(c=!0);let d;for(const u in a)(!e||!Vt(e,u)&&((d=ju(u))===u||!Vt(e,d)))&&(l?t&&(t[u]!==void 0||t[d]!==void 0)&&(s[u]=Sv(l,a,u,void 0,n,!0)):delete s[u]);if(o!==a)for(const u in o)(!e||!Vt(e,u))&&(delete o[u],c=!0)}c&&Yr(n,"set","$attrs")}function PN(n,e,t,i){const[s,o]=n.propsOptions;let r=!1,a;if(e)for(let l in e){if(Kh(l))continue;const c=e[l];let d;s&&Vt(s,d=pu(l))?!o||!o.includes(d)?t[d]=c:(a||(a={}))[d]=c:u_(n.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,r=!0)}if(o){const l=Yt(t),c=a||vi;for(let d=0;d<o.length;d++){const u=o[d];t[u]=Sv(s,l,u,c[u],n,!Vt(c,u))}}return r}function Sv(n,e,t,i,s,o){const r=n[t];if(r!=null){const a=Vt(r,"default");if(a&&i===void 0){const l=r.default;if(r.type!==Function&&!r.skipFactory&&xt(l)){const{propsDefaults:c}=s;if(t in c)i=c[t];else{const d=Cg(s);i=c[t]=l.call(null,e),d()}}else i=l}r[0]&&(o&&!a?i=!1:r[1]&&(i===""||i===ju(t))&&(i=!0))}return i}function ON(n,e,t=!1){const i=e.propsCache,s=i.get(n);if(s)return s;const o=n.props,r={},a=[];let l=!1;if(!xt(n)){const d=u=>{l=!0;const[h,f]=ON(u,e,!0);Rn(r,h),f&&a.push(...f)};!t&&e.mixins.length&&e.mixins.forEach(d),n.extends&&d(n.extends),n.mixins&&n.mixins.forEach(d)}if(!o&&!l)return xi(n)&&i.set(n,$d),$d;if(ft(o))for(let d=0;d<o.length;d++){const u=pu(o[d]);Ax(u)&&(r[u]=vi)}else if(o)for(const d in o){const u=pu(d);if(Ax(u)){const h=o[d],f=r[u]=ft(h)||xt(h)?{type:h}:Rn({},h);if(f){const g=Px(Boolean,f.type),p=Px(String,f.type);f[0]=g>-1,f[1]=p<0||g<p,(g>-1||Vt(f,"default"))&&a.push(u)}}}const c=[r,a];return xi(n)&&i.set(n,c),c}function Ax(n){return n[0]!=="$"&&!Kh(n)}function Mx(n){const e=n&&n.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:n===null?"null":""}function Rx(n,e){return Mx(n)===Mx(e)}function Px(n,e){return ft(e)?e.findIndex(t=>Rx(t,n)):xt(e)&&Rx(e,n)?0:-1}const FN=n=>n[0]==="_"||n==="$stable",nS=n=>ft(n)?n.map(qo):[qo(n)],NR=(n,e,t)=>{if(e._n)return e;const i=YM((...s)=>nS(e(...s)),t);return i._c=!1,i},BN=(n,e,t)=>{const i=n._ctx;for(const s in n){if(FN(s))continue;const o=n[s];if(xt(o))e[s]=NR(s,o,i);else if(o!=null){const r=nS(o);e[s]=()=>r}}},VN=(n,e)=>{const t=nS(e);n.slots.default=()=>t},TR=(n,e)=>{if(n.vnode.shapeFlag&32){const t=e._;t?(n.slots=Yt(e),Fm(e,"_",t)):BN(e,n.slots={})}else n.slots={},e&&VN(n,e);Fm(n.slots,p_,1)},AR=(n,e,t)=>{const{vnode:i,slots:s}=n;let o=!0,r=vi;if(i.shapeFlag&32){const a=e._;a?t&&a===1?o=!1:(Rn(s,e),!t&&a===1&&delete s._):(o=!e.$stable,BN(e,s)),r=e}else e&&(VN(n,e),r={default:1});if(o)for(const a in s)!FN(a)&&r[a]==null&&delete s[a]};function Lv(n,e,t,i,s=!1){if(ft(n)){n.forEach((h,f)=>Lv(h,e&&(ft(e)?e[f]:e),t,i,s));return}if(om(i)&&!s)return;const o=i.shapeFlag&4?oS(i.component)||i.component.proxy:i.el,r=s?null:o,{i:a,r:l}=n,c=e&&e.r,d=a.refs===vi?a.refs={}:a.refs,u=a.setupState;if(c!=null&&c!==l&&(Ji(c)?(d[c]=null,Vt(u,c)&&(u[c]=null)):Fs(c)&&(c.value=null)),xt(l))Ya(l,a,12,[r,d]);else{const h=Ji(l),f=Fs(l);if(h||f){const g=()=>{if(n.f){const p=h?Vt(u,l)?u[l]:d[l]:l.value;s?ft(p)&&Wy(p,o):ft(p)?p.includes(o)||p.push(o):h?(d[l]=[o],Vt(u,l)&&(u[l]=d[l])):(l.value=[o],n.k&&(d[n.k]=l.value))}else h?(d[l]=r,Vt(u,l)&&(u[l]=r)):f&&(l.value=r,n.k&&(d[n.k]=r))};r?(g.id=-1,as(g,t)):g()}}}const as=nR;function MR(n){return RR(n)}function RR(n,e){const t=sN();t.__VUE__=!0;const{insert:i,remove:s,patchProp:o,createElement:r,createText:a,createComment:l,setText:c,setElementText:d,parentNode:u,nextSibling:h,setScopeId:f=Is,insertStaticContent:g}=n,p=(U,G,re,ce=null,fe=null,xe=null,Te=void 0,z=null,H=!!G.dynamicChildren)=>{if(U===G)return;U&&!lh(U,G)&&(ce=fn(U),be(U,fe,xe,!0),U=null),G.patchFlag===-2&&(H=!1,G.dynamicChildren=null);const{type:B,ref:E,shapeFlag:N}=G;switch(B){case g_:_(U,G,re,ce);break;case Df:v(U,G,re,ce);break;case lm:U==null&&b(G,re,ce,Te);break;case Un:O(U,G,re,ce,fe,xe,Te,z,H);break;default:N&1?S(U,G,re,ce,fe,xe,Te,z,H):N&6?R(U,G,re,ce,fe,xe,Te,z,H):(N&64||N&128)&&B.process(U,G,re,ce,fe,xe,Te,z,H,qt)}E!=null&&fe&&Lv(E,U&&U.ref,xe,G||U,!G)},_=(U,G,re,ce)=>{if(U==null)i(G.el=a(G.children),re,ce);else{const fe=G.el=U.el;G.children!==U.children&&c(fe,G.children)}},v=(U,G,re,ce)=>{U==null?i(G.el=l(G.children||""),re,ce):G.el=U.el},b=(U,G,re,ce)=>{[U.el,U.anchor]=g(U.children,G,re,ce,U.el,U.anchor)},w=({el:U,anchor:G},re,ce)=>{let fe;for(;U&&U!==G;)fe=h(U),i(U,re,ce),U=fe;i(G,re,ce)},C=({el:U,anchor:G})=>{let re;for(;U&&U!==G;)re=h(U),s(U),U=re;s(G)},S=(U,G,re,ce,fe,xe,Te,z,H)=>{G.type==="svg"?Te="svg":G.type==="math"&&(Te="mathml"),U==null?k(G,re,ce,fe,xe,Te,z,H):I(U,G,fe,xe,Te,z,H)},k=(U,G,re,ce,fe,xe,Te,z)=>{let H,B;const{props:E,shapeFlag:N,transition:V,dirs:P}=U;if(H=U.el=r(U.type,xe,E&&E.is,E),N&8?d(H,U.children):N&16&&x(U.children,H,null,ce,fe,O1(U,xe),Te,z),P&&Tl(U,null,ce,"created"),L(H,U,U.scopeId,Te,ce),E){for(const ne in E)ne!=="value"&&!Kh(ne)&&o(H,ne,null,E[ne],xe,U.children,ce,fe,Mt);"value"in E&&o(H,"value",null,E.value,xe),(B=E.onVnodeBeforeMount)&&Bo(B,ce,U)}P&&Tl(U,null,ce,"beforeMount");const Z=PR(fe,V);Z&&V.beforeEnter(H),i(H,G,re),((B=E&&E.onVnodeMounted)||Z||P)&&as(()=>{B&&Bo(B,ce,U),Z&&V.enter(H),P&&Tl(U,null,ce,"mounted")},fe)},L=(U,G,re,ce,fe)=>{if(re&&f(U,re),ce)for(let xe=0;xe<ce.length;xe++)f(U,ce[xe]);if(fe){let xe=fe.subTree;if(G===xe){const Te=fe.vnode;L(U,Te,Te.scopeId,Te.slotScopeIds,fe.parent)}}},x=(U,G,re,ce,fe,xe,Te,z,H=0)=>{for(let B=H;B<U.length;B++){const E=U[B]=z?La(U[B]):qo(U[B]);p(null,E,G,re,ce,fe,xe,Te,z)}},I=(U,G,re,ce,fe,xe,Te)=>{const z=G.el=U.el;let{patchFlag:H,dynamicChildren:B,dirs:E}=G;H|=U.patchFlag&16;const N=U.props||vi,V=G.props||vi;let P;if(re&&Al(re,!1),(P=V.onVnodeBeforeUpdate)&&Bo(P,re,G,U),E&&Tl(G,U,re,"beforeUpdate"),re&&Al(re,!0),B?A(U.dynamicChildren,B,z,re,ce,O1(G,fe),xe):Te||me(U,G,z,null,re,ce,O1(G,fe),xe,!1),H>0){if(H&16)T(z,G,N,V,re,ce,fe);else if(H&2&&N.class!==V.class&&o(z,"class",null,V.class,fe),H&4&&o(z,"style",N.style,V.style,fe),H&8){const Z=G.dynamicProps;for(let ne=0;ne<Z.length;ne++){const ge=Z[ne],Ce=N[ge],Me=V[ge];(Me!==Ce||ge==="value")&&o(z,ge,Ce,Me,fe,U.children,re,ce,Mt)}}H&1&&U.children!==G.children&&d(z,G.children)}else!Te&&B==null&&T(z,G,N,V,re,ce,fe);((P=V.onVnodeUpdated)||E)&&as(()=>{P&&Bo(P,re,G,U),E&&Tl(G,U,re,"updated")},ce)},A=(U,G,re,ce,fe,xe,Te)=>{for(let z=0;z<G.length;z++){const H=U[z],B=G[z],E=H.el&&(H.type===Un||!lh(H,B)||H.shapeFlag&70)?u(H.el):re;p(H,B,E,null,ce,fe,xe,Te,!0)}},T=(U,G,re,ce,fe,xe,Te)=>{if(re!==ce){if(re!==vi)for(const z in re)!Kh(z)&&!(z in ce)&&o(U,z,re[z],null,Te,G.children,fe,xe,Mt);for(const z in ce){if(Kh(z))continue;const H=ce[z],B=re[z];H!==B&&z!=="value"&&o(U,z,B,H,Te,G.children,fe,xe,Mt)}"value"in ce&&o(U,"value",re.value,ce.value,Te)}},O=(U,G,re,ce,fe,xe,Te,z,H)=>{const B=G.el=U?U.el:a(""),E=G.anchor=U?U.anchor:a("");let{patchFlag:N,dynamicChildren:V,slotScopeIds:P}=G;P&&(z=z?z.concat(P):P),U==null?(i(B,re,ce),i(E,re,ce),x(G.children||[],re,E,fe,xe,Te,z,H)):N>0&&N&64&&V&&U.dynamicChildren?(A(U.dynamicChildren,V,re,fe,xe,Te,z),(G.key!=null||fe&&G===fe.subTree)&&WN(U,G,!0)):me(U,G,re,E,fe,xe,Te,z,H)},R=(U,G,re,ce,fe,xe,Te,z,H)=>{G.slotScopeIds=z,U==null?G.shapeFlag&512?fe.ctx.activate(G,re,ce,Te,H):X(G,re,ce,fe,xe,Te,H):ie(U,G,H)},X=(U,G,re,ce,fe,xe,Te)=>{const z=U.component=jR(U,ce,fe);if(NN(U)&&(z.ctx.renderer=qt),KR(z),z.asyncDep){if(fe&&fe.registerDep(z,ae),!U.el){const H=z.subTree=W(Df);v(null,H,G,re)}}else ae(z,U,G,re,fe,xe,Te)},ie=(U,G,re)=>{const ce=G.component=U.component;if(JM(U,G,re))if(ce.asyncDep&&!ce.asyncResolved){ue(ce,G,re);return}else ce.next=G,jM(ce.update),ce.effect.dirty=!0,ce.update();else G.el=U.el,ce.vnode=G},ae=(U,G,re,ce,fe,xe,Te)=>{const z=()=>{if(U.isMounted){let{next:E,bu:N,u:V,parent:P,vnode:Z}=U;{const Oe=HN(U);if(Oe){E&&(E.el=Z.el,ue(U,E,Te)),Oe.asyncDep.then(()=>{U.isUnmounted||z()});return}}let ne=E,ge;Al(U,!1),E?(E.el=Z.el,ue(U,E,Te)):E=Z,N&&N1(N),(ge=E.props&&E.props.onVnodeBeforeUpdate)&&Bo(ge,P,E,Z),Al(U,!0);const Ce=M1(U),Me=U.subTree;U.subTree=Ce,p(Me,Ce,u(Me.el),fn(Me),U,fe,xe),E.el=Ce.el,ne===null&&eR(U,Ce.el),V&&as(V,fe),(ge=E.props&&E.props.onVnodeUpdated)&&as(()=>Bo(ge,P,E,Z),fe)}else{let E;const{el:N,props:V}=G,{bm:P,m:Z,parent:ne}=U,ge=om(G);if(Al(U,!1),P&&N1(P),!ge&&(E=V&&V.onVnodeBeforeMount)&&Bo(E,ne,G),Al(U,!0),N&&On){const Ce=()=>{U.subTree=M1(U),On(N,U.subTree,U,fe,null)};ge?G.type.__asyncLoader().then(()=>!U.isUnmounted&&Ce()):Ce()}else{const Ce=U.subTree=M1(U);p(null,Ce,re,ce,U,fe,xe),G.el=Ce.el}if(Z&&as(Z,fe),!ge&&(E=V&&V.onVnodeMounted)){const Ce=G;as(()=>Bo(E,ne,Ce),fe)}(G.shapeFlag&256||ne&&om(ne.vnode)&&ne.vnode.shapeFlag&256)&&U.a&&as(U.a,fe),U.isMounted=!0,G=re=ce=null}},H=U.effect=new zy(z,Is,()=>Jy(B),U.scope),B=U.update=()=>{H.dirty&&H.run()};B.id=U.uid,Al(U,!0),B()},ue=(U,G,re)=>{G.component=U;const ce=U.vnode.props;U.vnode=G,U.next=null,IR(U,G.props,ce,re),AR(U,G.children,re),Rc(),Dx(U),Pc()},me=(U,G,re,ce,fe,xe,Te,z,H=!1)=>{const B=U&&U.children,E=U?U.shapeFlag:0,N=G.children,{patchFlag:V,shapeFlag:P}=G;if(V>0){if(V&128){Ae(B,N,re,ce,fe,xe,Te,z,H);return}else if(V&256){de(B,N,re,ce,fe,xe,Te,z,H);return}}P&8?(E&16&&Mt(B,fe,xe),N!==B&&d(re,N)):E&16?P&16?Ae(B,N,re,ce,fe,xe,Te,z,H):Mt(B,fe,xe,!0):(E&8&&d(re,""),P&16&&x(N,re,ce,fe,xe,Te,z,H))},de=(U,G,re,ce,fe,xe,Te,z,H)=>{U=U||$d,G=G||$d;const B=U.length,E=G.length,N=Math.min(B,E);let V;for(V=0;V<N;V++){const P=G[V]=H?La(G[V]):qo(G[V]);p(U[V],P,re,null,fe,xe,Te,z,H)}B>E?Mt(U,fe,xe,!0,!1,N):x(G,re,ce,fe,xe,Te,z,H,N)},Ae=(U,G,re,ce,fe,xe,Te,z,H)=>{let B=0;const E=G.length;let N=U.length-1,V=E-1;for(;B<=N&&B<=V;){const P=U[B],Z=G[B]=H?La(G[B]):qo(G[B]);if(lh(P,Z))p(P,Z,re,null,fe,xe,Te,z,H);else break;B++}for(;B<=N&&B<=V;){const P=U[N],Z=G[V]=H?La(G[V]):qo(G[V]);if(lh(P,Z))p(P,Z,re,null,fe,xe,Te,z,H);else break;N--,V--}if(B>N){if(B<=V){const P=V+1,Z=P<E?G[P].el:ce;for(;B<=V;)p(null,G[B]=H?La(G[B]):qo(G[B]),re,Z,fe,xe,Te,z,H),B++}}else if(B>V)for(;B<=N;)be(U[B],fe,xe,!0),B++;else{const P=B,Z=B,ne=new Map;for(B=Z;B<=V;B++){const pt=G[B]=H?La(G[B]):qo(G[B]);pt.key!=null&&ne.set(pt.key,B)}let ge,Ce=0;const Me=V-Z+1;let Oe=!1,Dt=0;const ht=new Array(Me);for(B=0;B<Me;B++)ht[B]=0;for(B=P;B<=N;B++){const pt=U[B];if(Ce>=Me){be(pt,fe,xe,!0);continue}let Lt;if(pt.key!=null)Lt=ne.get(pt.key);else for(ge=Z;ge<=V;ge++)if(ht[ge-Z]===0&&lh(pt,G[ge])){Lt=ge;break}Lt===void 0?be(pt,fe,xe,!0):(ht[Lt-Z]=B+1,Lt>=Dt?Dt=Lt:Oe=!0,p(pt,G[Lt],re,null,fe,xe,Te,z,H),Ce++)}const Re=Oe?OR(ht):$d;for(ge=Re.length-1,B=Me-1;B>=0;B--){const pt=Z+B,Lt=G[pt],Fn=pt+1<E?G[pt+1].el:ce;ht[B]===0?p(null,Lt,re,Fn,fe,xe,Te,z,H):Oe&&(ge<0||B!==Re[ge]?ye(Lt,re,Fn,2):ge--)}}},ye=(U,G,re,ce,fe=null)=>{const{el:xe,type:Te,transition:z,children:H,shapeFlag:B}=U;if(B&6){ye(U.component.subTree,G,re,ce);return}if(B&128){U.suspense.move(G,re,ce);return}if(B&64){Te.move(U,G,re,qt);return}if(Te===Un){i(xe,G,re);for(let N=0;N<H.length;N++)ye(H[N],G,re,ce);i(U.anchor,G,re);return}if(Te===lm){w(U,G,re);return}if(ce!==2&&B&1&&z)if(ce===0)z.beforeEnter(xe),i(xe,G,re),as(()=>z.enter(xe),fe);else{const{leave:N,delayLeave:V,afterLeave:P}=z,Z=()=>i(xe,G,re),ne=()=>{N(xe,()=>{Z(),P&&P()})};V?V(xe,Z,ne):ne()}else i(xe,G,re)},be=(U,G,re,ce=!1,fe=!1)=>{const{type:xe,props:Te,ref:z,children:H,dynamicChildren:B,shapeFlag:E,patchFlag:N,dirs:V}=U;if(z!=null&&Lv(z,null,re,U,!0),E&256){G.ctx.deactivate(U);return}const P=E&1&&V,Z=!om(U);let ne;if(Z&&(ne=Te&&Te.onVnodeBeforeUnmount)&&Bo(ne,G,U),E&6)Ri(U.component,re,ce);else{if(E&128){U.suspense.unmount(re,ce);return}P&&Tl(U,null,G,"beforeUnmount"),E&64?U.type.remove(U,G,re,fe,qt,ce):B&&(xe!==Un||N>0&&N&64)?Mt(B,G,re,!1,!0):(xe===Un&&N&384||!fe&&E&16)&&Mt(H,G,re),ce&&le(U)}(Z&&(ne=Te&&Te.onVnodeUnmounted)||P)&&as(()=>{ne&&Bo(ne,G,U),P&&Tl(U,null,G,"unmounted")},re)},le=U=>{const{type:G,el:re,anchor:ce,transition:fe}=U;if(G===Un){Bt(re,ce);return}if(G===lm){C(U);return}const xe=()=>{s(re),fe&&!fe.persisted&&fe.afterLeave&&fe.afterLeave()};if(U.shapeFlag&1&&fe&&!fe.persisted){const{leave:Te,delayLeave:z}=fe,H=()=>Te(re,xe);z?z(U.el,xe,H):H()}else xe()},Bt=(U,G)=>{let re;for(;U!==G;)re=h(U),s(U),U=re;s(G)},Ri=(U,G,re)=>{const{bum:ce,scope:fe,update:xe,subTree:Te,um:z}=U;ce&&N1(ce),fe.stop(),xe&&(xe.active=!1,be(Te,U,G,re)),z&&as(z,G),as(()=>{U.isUnmounted=!0},G),G&&G.pendingBranch&&!G.isUnmounted&&U.asyncDep&&!U.asyncResolved&&U.suspenseId===G.pendingId&&(G.deps--,G.deps===0&&G.resolve())},Mt=(U,G,re,ce=!1,fe=!1,xe=0)=>{for(let Te=xe;Te<U.length;Te++)be(U[Te],G,re,ce,fe)},fn=U=>U.shapeFlag&6?fn(U.component.subTree):U.shapeFlag&128?U.suspense.next():h(U.anchor||U.el);let ut=!1;const _i=(U,G,re)=>{U==null?G._vnode&&be(G._vnode,null,null,!0):p(G._vnode||null,U,G,null,null,null,re),ut||(ut=!0,Dx(),xN(),ut=!1),G._vnode=U},qt={p,um:be,m:ye,r:le,mt:X,mc:x,pc:me,pbc:A,n:fn,o:n};let Ve,On;return e&&([Ve,On]=e(qt)),{render:_i,hydrate:Ve,createApp:DR(_i,Ve)}}function O1({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function Al({effect:n,update:e},t){n.allowRecurse=e.allowRecurse=t}function PR(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function WN(n,e,t=!1){const i=n.children,s=e.children;if(ft(i)&&ft(s))for(let o=0;o<i.length;o++){const r=i[o];let a=s[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[o]=La(s[o]),a.el=r.el),t||WN(r,a)),a.type===g_&&(a.el=r.el)}}function OR(n){const e=n.slice(),t=[0];let i,s,o,r,a;const l=n.length;for(i=0;i<l;i++){const c=n[i];if(c!==0){if(s=t[t.length-1],n[s]<c){e[i]=s,t.push(i);continue}for(o=0,r=t.length-1;o<r;)a=o+r>>1,n[t[a]]<c?o=a+1:r=a;c<n[t[o]]&&(o>0&&(e[i]=t[o-1]),t[o]=i)}}for(o=t.length,r=t[o-1];o-- >0;)t[o]=r,r=e[r];return t}function HN(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:HN(e)}const FR=n=>n.__isTeleport,Un=Symbol.for("v-fgt"),g_=Symbol.for("v-txt"),Df=Symbol.for("v-cmt"),lm=Symbol.for("v-stc"),Yh=[];let yo=null;function j(n=!1){Yh.push(yo=n?null:[])}function BR(){Yh.pop(),yo=Yh[Yh.length-1]||null}let kf=1;function Ox(n){kf+=n}function VR(n){return n.dynamicChildren=kf>0?yo||$d:null,BR(),kf>0&&yo&&yo.push(n),n}function K(n,e,t,i,s,o){return VR(D(n,e,t,i,s,o,!0))}function WR(n){return n?n.__v_isVNode===!0:!1}function lh(n,e){return n.type===e.type&&n.key===e.key}const p_="__vInternal",$N=({key:n})=>n??null,cm=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?Ji(n)||Fs(n)||xt(n)?{i:nr,r:n,k:e,f:!!t}:n:null);function D(n,e=null,t=null,i=0,s=null,o=n===Un?0:1,r=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&$N(e),ref:e&&cm(e),scopeId:h_,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:nr};return a?(sS(l,t),o&128&&n.normalize(l)):t&&(l.shapeFlag|=Ji(t)?8:16),kf>0&&!r&&yo&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&yo.push(l),l}const W=HR;function HR(n,e=null,t=null,i=0,s=null,o=!1){if((!n||n===tR)&&(n=Df),WR(n)){const a=mu(n,e,!0);return t&&sS(a,t),kf>0&&!o&&yo&&(a.shapeFlag&6?yo[yo.indexOf(n)]=a:yo.push(a)),a.patchFlag|=-2,a}if(XR(n)&&(n=n.__vccOpts),e){e=$R(e);let{class:a,style:l}=e;a&&!Ji(a)&&(e.class=yf(a)),xi(l)&&(vN(l)&&!ft(l)&&(l=Rn({},l)),e.style=$y(l))}const r=Ji(n)?1:iR(n)?128:FR(n)?64:xi(n)?4:xt(n)?2:0;return D(n,e,t,i,s,r,o,!0)}function $R(n){return n?vN(n)||p_ in n?Rn({},n):n:null}function mu(n,e,t=!1){const{props:i,ref:s,patchFlag:o,children:r}=n,a=e?zR(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:a,key:a&&$N(a),ref:e&&e.ref?t&&s?ft(s)?s.concat(cm(e)):[s,cm(e)]:cm(e):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:r,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Un?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&mu(n.ssContent),ssFallback:n.ssFallback&&mu(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce}}function Ht(n=" ",e=0){return W(g_,null,n,e)}function he(n,e){const t=W(lm,null,n);return t.staticCount=e,t}function qo(n){return n==null||typeof n=="boolean"?W(Df):ft(n)?W(Un,null,n.slice()):typeof n=="object"?La(n):W(g_,null,String(n))}function La(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:mu(n)}function sS(n,e){let t=0;const{shapeFlag:i}=n;if(e==null)e=null;else if(ft(e))t=16;else if(typeof e=="object")if(i&65){const s=e.default;s&&(s._c&&(s._d=!1),sS(n,s()),s._c&&(s._d=!0));return}else{t=32;const s=e._;!s&&!(p_ in e)?e._ctx=nr:s===3&&nr&&(nr.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else xt(e)?(e={default:e,_ctx:nr},t=32):(e=String(e),i&64?(t=16,e=[Ht(e)]):t=8);n.children=e,n.shapeFlag|=t}function zR(...n){const e={};for(let t=0;t<n.length;t++){const i=n[t];for(const s in i)if(s==="class")e.class!==i.class&&(e.class=yf([e.class,i.class]));else if(s==="style")e.style=$y([e.style,i.style]);else if(r_(s)){const o=e[s],r=i[s];r&&o!==r&&!(ft(o)&&o.includes(r))&&(e[s]=o?[].concat(o,r):r)}else s!==""&&(e[s]=i[s])}return e}function Bo(n,e,t,i=null){ko(n,e,7,[t,i])}const UR=RN();let qR=0;function jR(n,e,t){const i=n.type,s=(e?e.appContext:n.appContext)||UR,o={uid:qR++,vnode:n,type:i,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new mM(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ON(i,s),emitsOptions:kN(i,s),emit:null,emitted:null,propsDefaults:vi,inheritAttrs:i.inheritAttrs,ctx:vi,data:vi,props:vi,attrs:vi,slots:vi,refs:vi,setupState:vi,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=ZM.bind(null,o),n.ce&&n.ce(o),o}let jn=null,Wm,xv;{const n=sN(),e=(t,i)=>{let s;return(s=n[t])||(s=n[t]=[]),s.push(i),o=>{s.length>1?s.forEach(r=>r(o)):s[0](o)}};Wm=e("__VUE_INSTANCE_SETTERS__",t=>jn=t),xv=e("__VUE_SSR_SETTERS__",t=>m_=t)}const Cg=n=>{const e=jn;return Wm(n),n.scope.on(),()=>{n.scope.off(),Wm(e)}},Fx=()=>{jn&&jn.scope.off(),Wm(null)};function zN(n){return n.vnode.shapeFlag&4}let m_=!1;function KR(n,e=!1){e&&xv(e);const{props:t,children:i}=n.vnode,s=zN(n);ER(n,t,s,e),TR(n,i);const o=s?GR(n,e):void 0;return e&&xv(!1),o}function GR(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=wN(new Proxy(n.ctx,vR));const{setup:i}=t;if(i){const s=n.setupContext=i.length>1?YR(n):null,o=Cg(n);Rc();const r=Ya(i,n,0,[n.props,s]);if(Pc(),o(),eN(r)){if(r.then(Fx,Fx),e)return r.then(a=>{Bx(n,a,e)}).catch(a=>{d_(a,n,0)});n.asyncDep=r}else Bx(n,r,e)}else UN(n,e)}function Bx(n,e,t){xt(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:xi(e)&&(n.setupState=yN(e)),UN(n,t)}let Vx;function UN(n,e,t){const i=n.type;if(!n.render){if(!e&&Vx&&!i.render){const s=i.template||iS(n).template;if(s){const{isCustomElement:o,compilerOptions:r}=n.appContext.config,{delimiters:a,compilerOptions:l}=i,c=Rn(Rn({isCustomElement:o,delimiters:a},r),l);i.render=Vx(s,c)}}n.render=i.render||Is}{const s=Cg(n);Rc();try{wR(n)}finally{Pc(),s()}}}function ZR(n){return n.attrsProxy||(n.attrsProxy=new Proxy(n.attrs,{get(e,t){return Cs(n,"get","$attrs"),e[t]}}))}function YR(n){const e=t=>{n.exposed=t||{}};return{get attrs(){return ZR(n)},slots:n.slots,emit:n.emit,expose:e}}function oS(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(yN(wN(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in Gh)return Gh[t](n)},has(e,t){return t in e||t in Gh}}))}function XR(n){return xt(n)&&"__vccOpts"in n}const QR=(n,e)=>VM(n,e,m_),JR="3.4.18";/**
* @vue/runtime-dom v3.4.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const e8="http://www.w3.org/2000/svg",t8="http://www.w3.org/1998/Math/MathML",xa=typeof document<"u"?document:null,Wx=xa&&xa.createElement("template"),i8={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,i)=>{const s=e==="svg"?xa.createElementNS(e8,n):e==="mathml"?xa.createElementNS(t8,n):xa.createElement(n,t?{is:t}:void 0);return n==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:n=>xa.createTextNode(n),createComment:n=>xa.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>xa.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,i,s,o){const r=t?t.previousSibling:e.lastChild;if(s&&(s===o||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),t),!(s===o||!(s=s.nextSibling)););else{Wx.innerHTML=i==="svg"?`<svg>${n}</svg>`:i==="mathml"?`<math>${n}</math>`:n;const a=Wx.content;if(i==="svg"||i==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[r?r.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},n8=Symbol("_vtc");function s8(n,e,t){const i=n[n8];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const Hx=Symbol("_vod"),o8=Symbol(""),r8=/(^|;)\s*display\s*:/;function a8(n,e,t){const i=n.style,s=Ji(t),o=i.display;let r=!1;if(t&&!s){if(e&&!Ji(e))for(const a in e)t[a]==null&&Dv(i,a,"");for(const a in t)a==="display"&&(r=!0),Dv(i,a,t[a])}else if(s){if(e!==t){const a=i[o8];a&&(t+=";"+a),i.cssText=t,r=r8.test(t)}}else e&&n.removeAttribute("style");Hx in n&&(n[Hx]=r?i.display:"",i.display=o)}const $x=/\s*!important$/;function Dv(n,e,t){if(ft(t))t.forEach(i=>Dv(n,e,i));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const i=l8(n,e);$x.test(t)?n.setProperty(ju(i),t.replace($x,""),"important"):n[i]=t}}const zx=["Webkit","Moz","ms"],F1={};function l8(n,e){const t=F1[e];if(t)return t;let i=pu(e);if(i!=="filter"&&i in n)return F1[e]=i;i=nN(i);for(let s=0;s<zx.length;s++){const o=zx[s]+i;if(o in n)return F1[e]=o}return e}const Ux="http://www.w3.org/1999/xlink";function c8(n,e,t,i,s){if(i&&e.startsWith("xlink:"))t==null?n.removeAttributeNS(Ux,e.slice(6,e.length)):n.setAttributeNS(Ux,e,t);else{const o=pM(e);t==null||o&&!oN(t)?n.removeAttribute(e):n.setAttribute(e,o?"":t)}}function d8(n,e,t,i,s,o,r){if(e==="innerHTML"||e==="textContent"){i&&r(i,s,o),n[e]=t??"";return}const a=n.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){n._value=t;const c=a==="OPTION"?n.getAttribute("value"):n.value,d=t??"";c!==d&&(n.value=d),t==null&&n.removeAttribute(e);return}let l=!1;if(t===""||t==null){const c=typeof n[e];c==="boolean"?t=oN(t):t==null&&c==="string"?(t="",l=!0):c==="number"&&(t=0,l=!0)}try{n[e]=t}catch{}l&&n.removeAttribute(e)}function u8(n,e,t,i){n.addEventListener(e,t,i)}function h8(n,e,t,i){n.removeEventListener(e,t,i)}const qx=Symbol("_vei");function f8(n,e,t,i,s=null){const o=n[qx]||(n[qx]={}),r=o[e];if(i&&r)r.value=i;else{const[a,l]=g8(e);if(i){const c=o[e]=_8(i,s);u8(n,a,c,l)}else r&&(h8(n,a,r,l),o[e]=void 0)}}const jx=/(?:Once|Passive|Capture)$/;function g8(n){let e;if(jx.test(n)){e={};let i;for(;i=n.match(jx);)n=n.slice(0,n.length-i[0].length),e[i[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):ju(n.slice(2)),e]}let B1=0;const p8=Promise.resolve(),m8=()=>B1||(p8.then(()=>B1=0),B1=Date.now());function _8(n,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;ko(b8(i,t.value),e,5,[i])};return t.value=n,t.attached=m8(),t}function b8(n,e){if(ft(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(i=>s=>!s._stopped&&i&&i(s))}else return e}const Kx=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,v8=(n,e,t,i,s,o,r,a,l)=>{const c=s==="svg";e==="class"?s8(n,i,c):e==="style"?a8(n,t,i):r_(e)?Vy(e)||f8(n,e,t,i,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):w8(n,e,i,c))?d8(n,e,i,o,r,a,l):(e==="true-value"?n._trueValue=i:e==="false-value"&&(n._falseValue=i),c8(n,e,i,c))};function w8(n,e,t,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in n&&Kx(e)&&xt(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=n.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Kx(e)&&Ji(t)?!1:e in n}const C8=Rn({patchProp:v8},i8);let Gx;function y8(){return Gx||(Gx=MR(C8))}const S8=(...n)=>{const e=y8().createApp(...n),{mount:t}=e;return e.mount=i=>{const s=x8(i);if(!s)return;const o=e._component;!xt(o)&&!o.render&&!o.template&&(o.template=s.innerHTML),s.innerHTML="";const r=t(s,!1,L8(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),r},e};function L8(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function x8(n){return Ji(n)?document.querySelector(n):n}const qN="/javascript/assets/js_logo-9a935d73.svg",se=(n,e)=>{const t=n.__vccOpts||n;for(const[i,s]of e)t[i]=s;return t},D8={},k8={class:"slide show"},E8=he('<div class="heading">Présentation sur Javascript</div><div class="content grid center"><h3 class="title">Algorithme Javascript <br></h3><p class="sub-title">Concepts de base et avancés</p><p>Mon portefeuille</p><p><a href="https://kilian-schropp.surge.sh/">https://kilian-schropp.surge.sh/</a></p></div>',2),I8=[E8];function N8(n,e){return j(),K("div",k8,I8)}const T8=se(D8,[["render",N8]]),A8="/javascript/assets/html-5-logo-64cd3d75.svg",M8={},R8={class:"slide"},P8=he('<img src="'+A8+'" class="html-css-logo"><div class="heading">HTML, CSS et JS</div><div class="content grid center"><h3 class="title">HTML</h3><p class="sub-title">La structure de la page</p><p>Définition du contenu</p></div>',3),O8=[P8];function F8(n,e){return j(),K("div",R8,O8)}const B8=se(M8,[["render",F8]]),V8="/javascript/assets/css-3-logo-931411de.svg",W8={},H8={class:"slide"},$8=he('<img src="'+V8+'" class="html-css-logo"><div class="heading">HTML, CSS et JS</div><div class="content grid center"><h3 class="title">CSS</h3><p class="sub-title">Spécifie le design</p><ul><li>L&#39;organisation de la structure (layout)</li><li>Le style des éléments (couleurs, décorations, tailles...)</li></ul></div>',3),z8=[$8];function U8(n,e){return j(),K("div",H8,z8)}const q8=se(W8,[["render",U8]]),j8={},K8={class:"slide"},G8=he('<img src="'+qN+'" class="html-css-logo"><div class="heading">HTML, CSS et JS</div><div class="content grid center"><h3 class="title">JS (Javascript)</h3><p class="sub-title">La logique dans la page</p><ul><li>Algorithme côté client</li><li>Interaction avec l’utilisateur (boutons, formulaires)</li><li>Interaction avec le navigateur</li></ul></div>',3),Z8=[G8];function Y8(n,e){return j(),K("div",K8,Z8)}const X8=se(j8,[["render",Y8]]),Q8="/javascript/assets/history-767f0bfa.svg",J8="/javascript/assets/oracle-logo-ccf88218.svg",e9={},t9={class:"slide"},i9=he('<img src="'+Q8+'" class="html-css-logo" style="left:75%;top:37%;"><img src="'+J8+'" class="html-css-logo" style="left:3%;top:75%;"><div class="heading">Historique</div><div class="content grid center"><h3 class="title">Langage de script créé en 1995 (Netscape)</h3><p class="sub-title"> Marque déposé de Sun Microsystems, Oracle maintenant </p></div>',4),n9=[i9];function s9(n,e){return j(),K("div",t9,n9)}const o9=se(e9,[["render",s9]]),r9="/javascript/assets/java-logo-ec64ddee.svg",a9="/javascript/assets/python-logo-386cb6b8.svg",l9={},c9={class:"slide"},d9=he('<img src="'+r9+'" class="html-css-logo" style="left:75%;top:45%;"><img src="'+a9+'" class="html-css-logo" style="left:2%;top:45%;"><div class="heading">Historique</div><div class="content grid center"><h3 class="title">Inspiré par Java et Python</h3><ul><li>Style Java</li><li>Facilité d&#39;écriture de code du python</li></ul></div>',4),u9=[d9];function h9(n,e){return j(),K("div",c9,u9)}const f9=se(l9,[["render",h9]]),g9={},p9={class:"slide"},m9=he('<div class="heading">Historique</div><div class="content grid center"><h3 class="title">Exécution côté client</h3><div class="content"><p class="sub-title">Ajoute du dynamisme dans les pages</p><ul><li>Interactions utilisateurs, animations</li><li>Aide à la navigation</li><li>Traitement côté client</li><li>Requêtes asynchrones</li></ul></div></div>',2),_9=[m9];function b9(n,e){return j(),K("div",p9,_9)}const v9=se(g9,[["render",b9]]),w9="/javascript/assets/popularity-86aa71ef.svg",C9={},y9={class:"slide"},S9=he('<div class="heading">Historique</div><div class="content grid center"><h3 class="title">Utilisation</h3><p class="sub-title"><img src="'+w9+'" style="width:49%;"></p></div>',2),L9=[S9];function x9(n,e){return j(),K("div",y9,L9)}const D9=se(C9,[["render",x9]]),k9="/javascript/assets/cpu-archi-2b63f6dc.svg",E9="/javascript/assets/cpu-8d1fa5ad.svg",I9={},N9={class:"slide"},T9=D("div",{class:"heading"},"Organisation des systèmes informatiques - CPU",-1),A9=D("div",{class:"content"},[D("p",null,[D("b",null,"Central Processing Unit (CPU) est le cerveau de l'ordinateur")]),D("img",{src:k9,style:{width:"55%"}}),D("img",{src:E9,class:"html-css-logo",style:{left:"70%",top:"45%"}})],-1),M9=[T9,A9];function R9(n,e){return j(),K("div",N9,M9)}const P9=se(I9,[["render",R9]]),O9={name:"LightSwitch",data:function(){return{isActive:!1}},methods:{myFilter:function(){console.log("do something"),this.isActive=!this.isActive}}},F9={id:"light",class:"container center"},B9={class:"rec1 center"},V9={class:"rec2 center"};function W9(n,e,t,i,s,o){return j(),K("div",{class:yf(["encapsulation",{white:n.isActive}])},[D("div",F9,[D("div",B9,[D("div",V9,[D("button",{class:yf(["switch",{active:n.isActive}]),onClick:e[0]||(e[0]=r=>o.myFilter())},null,2)])])])],2)}const jN=se(O9,[["render",W9],["__scopeId","data-v-d445c8f2"]]),H9={class:"slide"},$9=D("div",{class:"heading"},"Introduction à l'informatique - Bits",-1),z9={class:"content"},U9=D("p",null," L'unité de base de la mémoire est appelée bit. Il peut être soit 0 soit 1 ",-1),q9={__name:"SlidePresentation10",setup(n){return(e,t)=>(j(),K("div",H9,[$9,D("div",z9,[U9,W(jN)])]))}},j9="/javascript/assets/binary-a2af44b2.svg",K9="/javascript/assets/alternative-29ae9504.svg",G9={},Z9={class:"slide"},Y9=he('<div class="heading">Introduction à l&#39;informatique - Bits</div><div class="content"><p>Pourquoi binaire, pourquoi pas Quaternaire?</p><br><div class="flex-container"><div><img src="'+j9+'" style="width:100%;"></div><div><img src="'+K9+'" style="width:100%;"></div></div></div>',2),X9=[Y9];function Q9(n,e){return j(),K("div",Z9,X9)}const J9=se(G9,[["render",Q9]]),KN="/javascript/assets/houseAdresse-d7eb7a31.svg",GN="/javascript/assets/adresse-2a705eca.svg",eP={},tP={class:"slide"},iP=he('<div class="heading"> Introduction à l&#39;informatique - Rappel du système décimal </div><div class="content"><div class="flex-container"><div><img src="'+KN+'" style="width:90%;"></div><div><img src="'+GN+'" style="width:75%;"></div></div></div>',2),nP=[iP];function sP(n,e){return j(),K("div",tP,nP)}const oP=se(eP,[["render",sP]]),rP={},aP={class:"slide"},lP=D("div",{class:"heading"},"Introduction à l'informatique - Byte",-1),cP=D("div",{class:"content"},[D("iframe",{id:"byte",src:"byte.html",width:"60%",height:"100%",frameborder:"0"})],-1),dP=[lP,cP];function uP(n,e){return j(),K("div",aP,dP)}const hP=se(rP,[["render",uP]]),fP="/javascript/assets/lightswitches-c115c765.svg",gP={},pP={class:"slide"},mP=D("div",{class:"heading"},"Introduction à l'informatique - Mémoire",-1),_P=D("div",{class:"content"},[D("p",null," Toutes les données d'un ordinateur sont stockées dans des séquences de 0 et de 1. "),D("br"),D("img",{src:fP,style:{width:"70%"}})],-1),bP=[mP,_P];function vP(n,e){return j(),K("div",pP,bP)}const wP=se(gP,[["render",vP]]),CP={},yP={class:"slide"},SP=he('<div class="heading"> Introduction à l&#39;informatique - Adresse de la mémoire </div><div class="content"><div class="flex-container"><div><img src="'+KN+'" style="width:90%;"></div><div><img src="'+GN+'" style="width:75%;"></div></div></div>',2),LP=[SP];function xP(n,e){return j(),K("div",yP,LP)}const DP=se(CP,[["render",xP]]),ZN="/javascript/assets/pizza-6ac2c9cb.svg",kP={},EP={class:"slide"},IP=he('<div class="heading">Algorithme - Pizza exemple</div><div class="content"><ol><li>Préchauffer le four à 500 degrés et y mettre la pierre.</li><li>Sortez la pâte de blé entier de TJ&#39;s.</li><li>Farinez-la et roulez-la</li><li> Puis brosser avec de l&#39;huile d&#39;olive et une solide poussière de farine de maïs. </li><li>Retirez la pierre</li><li>Retournez la croûte sur elle</li><li>Faire cuire pendant environ cinq minutes</li><li>Retirez-le</li><li>Percez les bulles</li><li>Mettez plus d&#39;huile d&#39;olive sur le dessus.</li><li> Puis les garnitures: Huile d&#39;olive, tapenade d&#39;olives, ail frais, champignons, oignons, basilic frais, de la mozzarella en tranches et une pile d&#39;anchois. </li><li>Faites cuire pendant encore 10-15 minutes</li><li>Retirez-le avec votre palette à pizza et prenez-le en photo</li><li> Offrez une tranche à votre invité, en priant pour qu&#39;il ait déjà mangé. </li><li> Consommez-le avec une bonne bouteille de vin rouge bon marché tout en gérant vos nombreuses émotions. </li></ol><img src="'+ZN+'" class="html-css-logo" style="left:80%;top:15%;width:10%;"></div>',2),NP=[IP];function TP(n,e){return j(),K("div",EP,NP)}const AP=se(kP,[["render",TP]]),MP={},RP={class:"slide"},PP=D("div",{class:"heading"},"Algorithme - The martingale strategy/Algorithme",-1),OP=D("div",{class:"content"},[D("ol",null,[D("li",null,"Commence avec 1€ de mise"),D("li",null,"Place ta mise sur le noir ou le rouge"),D("li",null,"Laissez tourner la roue"),D("li",null," Si vous perdez, doublez la dernière mise et retournez à l'étape 2 "),D("li",null," Si vous gagnez, prenez votre dernière mise et l'argent gagné, recommencez au début de 1€ et retournez à l'étape 2 ")]),D("iframe",{id:"roulette",src:"roulette.html",width:"100%",height:"80%",frameborder:"0"})],-1),FP=[PP,OP];function BP(n,e){return j(),K("div",RP,FP)}const VP=se(MP,[["render",BP]]),WP="/javascript/assets/case-sensetiv-6e20f303.svg",HP={},$P={class:"slide"},zP=D("div",{class:"heading"},"Case Sensitivity",-1),UP=D("div",{class:"content"},[D("p",null,[D("b",null,"JavaScript"),Ht(" est un langage sensible à la casse. Cela signifie que les mots-clés du langage, les variables, noms de fonctions et autres identifiants doivent toujours être tapés avec une "),D("b",null,"majuscule cohérente"),Ht(". lettres. ")]),D("img",{src:WP,style:{width:"60%","padding-left":"10%"}})],-1),qP=[zP,UP];function jP(n,e){return j(),K("div",$P,qP)}const KP=se(HP,[["render",jP]]),GP={},ZP={class:"slide"},YP=he(`<div class="heading">Comments</div><div class="content"><p> Les commentaires donnent des informations aux personnes qui lisent votre code. JavaScript prend en charge deux styles de commentaires. Tout texte entre un <b>//</b> et la fin d&#39;une ligne est traité comme un commentaire et est ignoré par JavaScript. Tout texte entre les caractères <b>/*</b> et <b>*/</b> est également traité comme un commentaire. </p><p class="sub-title">Exemple:</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                <span style="color:#008000;">// This is a single-line comment.</span>
                <span style="color:#008000;">/* This is also a comment */</span> 
                <span style="color:#008000;">// and here is another comment.</span>
                <span style="color:#008000;">/*</span>
                <span style="color:#008000;">* This is yet another comment.</span>
                <span style="color:#008000;">* It has multiple lines.</span>
                <span style="color:#008000;">*/</span>
                </pre></div></div>`,2),XP=[YP];function QP(n,e){return j(),K("div",ZP,XP)}const JP=se(GP,[["render",QP]]),eO={},tO={class:"slide"},iO=he(`<div class="heading">Literals</div><div class="content"><p> Un littéral est une valeur de données qui apparaît directement dans un programme. </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  12 <span style="color:#008000;">// Le nombre douze</span>
                  1.2 <span style="color:#008000;">// Le nombre un virgule deux</span>
                  <span style="color:#a31515;">&quot;hello world&quot;</span> <span style="color:#008000;">// Une chaîne de caractères</span>
                  <span style="color:#a31515;">&#39;Hi&#39;</span> <span style="color:#008000;">// Une autre chaîne de caractères</span>
                  <span style="color:#0000ff;">true</span> <span style="color:#008000;">// Une valeur booléenne</span>
                  <span style="color:#0000ff;">false</span> <span style="color:#008000;">// L&#39;autre valeur booléenne</span>
                  <span style="color:#0000ff;">null</span> <span style="color:#008000;">// Absence d&#39;objet</span>
                </pre></div><br><p> Les détails complets sur les types de données apparaissent plus loin dans la présentation </p></div>`,2),nO=[iO];function sO(n,e){return j(),K("div",tO,nO)}const oO=se(eO,[["render",sO]]),rO="/javascript/assets/variable-b0bbe534.svg",aO={},lO={class:"slide"},cO=D("div",{class:"heading"},"Variables",-1),dO=D("div",{class:"content"},[D("p",null," Une variable est simplement une zone de stockage. Vous placez des éléments dans vos zones de stockage (variables) afin de pouvoir les utiliser et les manipuler dans vos programmes. "),D("img",{src:rO,style:{width:"82%","padding-left":"15%"}})],-1),uO=[cO,dO];function hO(n,e){return j(),K("div",lO,uO)}const fO=se(aO,[["render",hO]]),gO="/javascript/assets/boxInRam-422a7f9f.svg",pO={},mO={class:"slide"},_O=D("div",{class:"heading"},"Variables",-1),bO=D("div",{class:"content"},[D("p",null,` Une variable est le nom d'une cellule de mémoire. Elle est dite "variable" car la valeur contenue dans la cellule peut changer. Chaque cellule de mémoire a une adresse. `),D("img",{src:gO,style:{width:"90%","padding-left":"15%"}})],-1),vO=[_O,bO];function wO(n,e){return j(),K("div",mO,vO)}const CO=se(pO,[["render",wO]]),yO={},SO={class:"slide"},LO=he(`<div class="heading">Declaration</div><div class="content"><p> Avant d&#39;utiliser une variable dans un programme JavaScript, vous devez la déclarer. Les variables sont déclarées avec le mot-clé <b>var</b></p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#0000ff;">var</span> i;
                  <span style="color:#0000ff;">var</span> sum;
                </pre></div><p> Vous pouvez également déclarer plusieurs variables avec le même mot-clé <b>var</b></p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#0000ff;">var</span> i, sum;
                </pre></div><p> Et vous pouvez combiner la déclaration de variable avec l&#39;initialisation de variable. Les détails complets sur les types de données apparaissent plus loin dans la présentation </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#0000ff;">var</span> message = <span style="color:#a31515;">&quot;hello&quot;</span>;
                  <span style="color:#0000ff;">var</span> i = 0, j = 0, k = 0;
                </pre></div></div>`,2),xO=[LO];function DO(n,e){return j(),K("div",SO,xO)}const kO=se(yO,[["render",DO]]),EO={},IO={class:"slide"},NO=he(`<div class="heading">Declaration - let</div><div class="content"><p> La manière la plus simple d&#39;utiliser <b>let</b> est un simple remplacement à la place de <b>var</b></p><p> Les variables définies avec let ne peuvent pas être redéclarées. Vous ne pouvez pas redéclarer accidentellement une variable. Avec let, vous ne pouvez pas faire ceci </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#0000ff;">let</span> x = <span style="color:#a31515;">&quot;John Doe&quot;</span> ;
                  <span style="color:#0000ff;">let</span> x = 0 ; <span style="color:#008000;">// Erreur de syntaxe : &#39;x&#39; a déjà été déclaré.</span></pre></div><p>Avec var, vous pouvez :</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#0000ff;">var</span> x = <span style="color:#a31515;">&quot;John Doe&quot;</span>;
                  <span style="color:#0000ff;">var</span> x = 0;</pre></div></div>`,2),TO=[NO];function AO(n,e){return j(),K("div",IO,TO)}const MO=se(EO,[["render",AO]]),RO="/javascript/assets/corsshair-caeb7f47.svg",PO="/javascript/assets/warning-bff3a446.svg",OO={},FO={class:"slide"},BO=he(`<div class="heading">Declaration - Block scope and let</div><div class="content"><p> Cette scope restreint l&#39;accès à la variable déclarée à l&#39;intérieur d&#39;un bloc spécifique par les personnes extérieures à ce bloc. Le mot-clé <b>let</b> facilite la mise en place d&#39;une scope de bloc pour les variables </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                {
                    <span style="color:#0000ff;">let</span> x = 2 ;
                }
                <span style="color:#008000;">// x ne peut PAS être utilisé ici</span>
                {
                    <span style="color:#0000ff;">var</span> x = 2 ;
                }
                <span style="color:#008000;">// x PEUT être utilisé ici</span></pre></div><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#0000ff;">let</span> x = 10 ;
                  <span style="color:#008000;">// Ici, x est 10</span>
                  {
                      <span style="color:#0000ff;">let</span> x = 2 ;
                      <span style="color:#008000;">// Ici, x est 2</span>
                  }
                  <span style="color:#008000;">// Ici, x est égal à 10 </span></pre></div><img src="`+RO+'" class="html-css-logo" style="left:40%;top:40%;height:40%;width:40%;"><img src="'+PO+'" class="html-css-logo" style="left:70%;top:63%;height:32%;"></div>',2),VO=[BO];function WO(n,e){return j(),K("div",FO,VO)}const HO=se(OO,[["render",WO]]),$O="/javascript/assets/constant-82b46595.svg",zO={},UO={class:"slide"},qO=he(`<div class="heading">Declaration - const</div><div class="content"><p> Les constantes sont comme les variables, sauf que les affectations à ces dernières sont ignorées (la tentative de modifier une constante ne provoque pas d&#39;erreur) et les tentatives de les redéclarer provoquent des erreurs </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#0000ff;">const</span> pi = 3.14 ; <span style="color:#008000;">// Définit une constante et lui donne une valeur.</span>
                  pi = 4 ; <span style="color:#008000;">// Toute affectation future à cette constante est ignorée en silence.</span>
                  <span style="color:#0000ff;">const</span> pi = 4 ; <span style="color:#008000;">// C&#39;est une erreur de redéclarer une constante.</span>
                  <span style="color:#0000ff;">var</span> pi = 4 ; <span style="color:#008000;">// C&#39;est également une erreur.</span></pre></div><p>Le mot-clé const se comporte fondamentalement comme le mot-clé var</p><img src="`+$O+'" class="html-css-logo" style="left:32%;top:60%;height:40%;width:40%;"></div>',2),jO=[qO];function KO(n,e){return j(),K("div",UO,jO)}const GO=se(zO,[["render",KO]]),ZO={},YO={class:"slide"},XO=he(`<div class="heading">Statements</div><div class="content"><p> Les instructions (statements) sont des phrases ou des commandes JavaScript. Tout comme les phrases françaises sont terminées et séparées les unes des autres par des points, les instructions JavaScript sont terminées par des points-virgules. Les instructions sont exécutées pour que quelque chose se produise </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#0000ff;">var</span> hello = <span style="color:#a31515;">&quot;Hello, world&quot;</span>;
                  myfunc(42, <span style="color:#a31515;">&quot;O&#39;Reilly&quot;</span>);
                  <span style="color:#0000ff;">var</span> a = 1;
                  <span style="color:#0000ff;">var</span> name = <span style="color:#a31515;">&quot;Elphaba&quot;</span>;
                  <span style="color:#0000ff;">var</span> b = a / 25.0;
                  <span style="color:#0000ff;">if</span> (a == b) { console.log(a); }
                </pre></div><br><p> Une instruction composée qui utilise des accolades pour marquer un bloc de code, tel qu&#39;un test conditionnel ou une boucle, n&#39;a pas besoin de point-virgule après l&#39;accolade fermante. </p></div>`,2),QO=[XO];function JO(n,e){return j(),K("div",YO,QO)}const e7=se(ZO,[["render",JO]]),t7={},i7={class:"slide"},n7=he(`<div class="heading">Data Types - Integers</div><div class="content"><p> Dans un programme JavaScript, un nombre entier en base 10 est écrit sous la forme d&#39;une séquence de chiffres. Par exemple </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#0000ff;">var</span> zero = 0;
                  <span style="color:#0000ff;">var</span> three = 3;
                  <span style="color:#0000ff;">var</span> zehnmillionen = 10000000;
                </pre></div><p> Outre les littéraux entiers en base 10, JavaScript reconnaît les valeurs hexadécimales (base 16). Un littéral hexadécimal commence par &quot;0x&quot; ou &quot;0X&quot;, suivi d&#39;une chaîne de chiffres hexadécimaux. </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#0000ff;">var</span> number1 = 0xff; <span style="color:#008000;">// 15*16 + 15 = 255 (base 10)</span>
                   <span style="color:#0000ff;">var</span> number2 = 0xCAFE911; <span style="color:#008000;">//212855057</span>
                </pre></div><p> Les nombres entiers octaux existent également en JavaScript (exemple : 0377). Certaines implémentations JavaScript prennent en charge les littéraux octaux, d&#39;autres non. Vous ne devez donc jamais l&#39;utiliser. </p></div>`,2),s7=[n7];function o7(n,e){return j(),K("div",i7,s7)}const r7=se(t7,[["render",o7]]),a7="/javascript/assets/swapping-21251ca9.svg",l7={},c7={class:"slide"},d7=he('<div class="heading">Data Types - Integers</div><div class="content"><p> Exercice : Ecrivez un programme en JavaScript pour échanger deux nombres </p><img src="'+a7+`" style="width:75%;padding-left:15%;"><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008000;">//Example:</span>
                  <span style="color:#0000ff;">var</span> a = 39, b = 25 
                  <span style="color:#008000;">//après échange</span>
                  <span style="color:#008000;">//a = 25, b = 39 </span>
                  console.log(a);
                  console.log(b);
                </pre></div></div>`,2),u7=[d7];function h7(n,e){return j(),K("div",c7,u7)}const f7=se(l7,[["render",h7]]);function Ss(n,e=0){return n[n.length-(1+e)]}function g7(n){if(n.length===0)throw new Error("Invalid tail call");return[n.slice(0,n.length-1),n[n.length-1]]}function An(n,e,t=(i,s)=>i===s){if(n===e)return!0;if(!n||!e||n.length!==e.length)return!1;for(let i=0,s=n.length;i<s;i++)if(!t(n[i],e[i]))return!1;return!0}function p7(n,e){const t=n.length-1;e<t&&(n[e]=n[t]),n.pop()}function m7(n,e,t){return _7(n.length,i=>t(n[i],e))}function _7(n,e){let t=0,i=n-1;for(;t<=i;){const s=(t+i)/2|0,o=e(s);if(o<0)t=s+1;else if(o>0)i=s-1;else return s}return-(t+1)}function b7(n){return n.filter(e=>!!e)}function v7(n){return!Array.isArray(n)||n.length===0}function __(n){return Array.isArray(n)&&n.length>0}function Cc(n,e=t=>t){const t=new Set;return n.filter(i=>{const s=e(i);return t.has(s)?!1:(t.add(s),!0)})}function w7(n,e){const t=kv(n,e);if(t!==-1)return n[t]}function kv(n,e){for(let t=n.length-1;t>=0;t--){const i=n[t];if(e(i))return t}return-1}function YN(n,e){return n.length>0?n[0]:e}function gn(n,e){let t=typeof e=="number"?n:0;typeof e=="number"?t=n:(t=0,e=n);const i=[];if(t<=e)for(let s=t;s<e;s++)i.push(s);else for(let s=t;s>e;s--)i.push(s);return i}function b_(n,e,t){const i=n.slice(0,e),s=n.slice(e);return i.concat(t,s)}function V1(n,e){const t=n.indexOf(e);t>-1&&(n.splice(t,1),n.unshift(e))}function dp(n,e){const t=n.indexOf(e);t>-1&&(n.splice(t,1),n.push(e))}function Zx(n,e){for(const t of e)n.push(t)}function C7(n,e,t){const i=XN(n,e),s=n.length,o=t.length;n.length=s+o;for(let r=s-1;r>=i;r--)n[r+o]=n[r];for(let r=0;r<o;r++)n[r+i]=t[r]}function Yx(n,e,t,i){const s=XN(n,e),o=n.splice(s,t);return C7(n,s,i),o}function XN(n,e){return e<0?Math.max(e+n.length,0):Math.min(e,n.length)}var yc;(function(n){function e(o){return o<0}n.isLessThan=e;function t(o){return o<=0}n.isLessThanOrEqual=t;function i(o){return o>0}n.isGreaterThan=i;function s(o){return o===0}n.isNeitherLessOrGreaterThan=s,n.greaterThan=1,n.lessThan=-1,n.neitherLessOrGreaterThan=0})(yc||(yc={}));function Eo(n,e){return(t,i)=>e(n(t),n(i))}function y7(...n){return(e,t)=>{for(const i of n){const s=i(e,t);if(!yc.isNeitherLessOrGreaterThan(s))return s}return yc.neitherLessOrGreaterThan}}const Oa=(n,e)=>n-e,S7=(n,e)=>Oa(n?1:0,e?1:0);function QN(n){return(e,t)=>-n(e,t)}function L7(n,e){if(n.length===0)return;let t=n[0];for(let i=1;i<n.length;i++){const s=n[i];e(s,t)>0&&(t=s)}return t}function x7(n,e){if(n.length===0)return;let t=n[0];for(let i=1;i<n.length;i++){const s=n[i];e(s,t)>=0&&(t=s)}return t}function D7(n,e){return L7(n,(t,i)=>-e(t,i))}function k7(n,e){if(n.length===0)return-1;let t=0;for(let i=1;i<n.length;i++){const s=n[i];e(s,n[t])>0&&(t=i)}return t}class ea{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const i=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,i}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const i=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,i}peek(){if(this.length!==0)return this.items[this.firstIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){const t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}}class ar{constructor(e){this.iterate=e}toArray(){const e=[];return this.iterate(t=>(e.push(t),!0)),e}filter(e){return new ar(t=>this.iterate(i=>e(i)?t(i):!0))}map(e){return new ar(t=>this.iterate(i=>t(e(i))))}findLast(e){let t;return this.iterate(i=>(e(i)&&(t=i),!0)),t}findLastMaxBy(e){let t,i=!0;return this.iterate(s=>((i||yc.isGreaterThan(e(s,t)))&&(i=!1,t=s),!0)),t}}ar.empty=new ar(n=>{});function Qn(n){return typeof n=="string"}function Gn(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&!(n instanceof RegExp)&&!(n instanceof Date)}function E7(n){const e=Object.getPrototypeOf(Uint8Array);return typeof n=="object"&&n instanceof e}function Ku(n){return typeof n=="number"&&!isNaN(n)}function Xx(n){return!!n&&typeof n[Symbol.iterator]=="function"}function JN(n){return n===!0||n===!1}function Io(n){return typeof n>"u"}function Hm(n){return!hs(n)}function hs(n){return Io(n)||n===null}function rc(n,e){if(!n)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function I7(n){if(hs(n))throw new Error("Assertion Failed: argument is undefined or null");return n}function $m(n){return typeof n=="function"}function N7(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)T7(n[i],e[i])}function T7(n,e){if(Qn(e)){if(typeof n!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if($m(e)){try{if(n instanceof e)return}catch{}if(!hs(n)&&n.constructor===e||e.length===1&&e.call(void 0,n)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function Da(n){if(!n||typeof n!="object"||n instanceof RegExp)return n;const e=Array.isArray(n)?[]:{};return Object.entries(n).forEach(([t,i])=>{e[t]=i&&typeof i=="object"?Da(i):i}),e}function A7(n){if(!n||typeof n!="object")return n;const e=[n];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const i in t)if(eT.call(t,i)){const s=t[i];typeof s=="object"&&!Object.isFrozen(s)&&!E7(s)&&e.push(s)}}return n}const eT=Object.prototype.hasOwnProperty;function tT(n,e){return Ev(n,e,new Set)}function Ev(n,e,t){if(hs(n))return n;const i=e(n);if(typeof i<"u")return i;if(Array.isArray(n)){const s=[];for(const o of n)s.push(Ev(o,e,t));return s}if(Gn(n)){if(t.has(n))throw new Error("Cannot clone recursive data-structure");t.add(n);const s={};for(const o in n)eT.call(n,o)&&(s[o]=Ev(n[o],e,t));return t.delete(n),s}return n}function iT(n,e,t=!0){return Gn(n)?(Gn(e)&&Object.keys(e).forEach(i=>{i in n?t&&(Gn(n[i])&&Gn(e[i])?iT(n[i],e[i],t):n[i]=e[i]):n[i]=e[i]}),n):e}function bs(n,e){if(n===e)return!0;if(n==null||e===null||e===void 0||typeof n!=typeof e||typeof n!="object"||Array.isArray(n)!==Array.isArray(e))return!1;let t,i;if(Array.isArray(n)){if(n.length!==e.length)return!1;for(t=0;t<n.length;t++)if(!bs(n[t],e[t]))return!1}else{const s=[];for(i in n)s.push(i);s.sort();const o=[];for(i in e)o.push(i);if(o.sort(),!bs(s,o))return!1;for(t=0;t<s.length;t++)if(!bs(n[s[t]],e[s[t]]))return!1}return!0}function M7(n){let e=[];for(;Object.prototype!==n;)e=e.concat(Object.getOwnPropertyNames(n)),n=Object.getPrototypeOf(n);return e}function rS(n){const e=[];for(const t of M7(n))typeof n[t]=="function"&&e.push(t);return e}function R7(n,e){const t=s=>function(){const o=Array.prototype.slice.call(arguments,0);return e(s,o)},i={};for(const s of n)i[s]=t(s);return i}globalThis&&globalThis.__awaiter;let P7=typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function O7(n,e){let t;return e.length===0?t=n:t=n.replace(/\{(\d+)\}/g,(i,s)=>{const o=s[0],r=e[o];let a=i;return typeof r=="string"?a=r:(typeof r=="number"||typeof r=="boolean"||r===void 0||r===null)&&(a=String(r)),a}),P7&&(t="［"+t.replace(/[aouei]/g,"$&$&")+"］"),t}function m(n,e,...t){return O7(e,t)}var W1;const bd="en";let zm=!1,Um=!1,dm=!1,nT=!1,aS=!1,lS=!1,sT=!1,up,H1=bd,Qx=bd,F7,ho;const to=typeof self=="object"?self:typeof global=="object"?global:{};let mn;typeof to.vscode<"u"&&typeof to.vscode.process<"u"?mn=to.vscode.process:typeof process<"u"&&(mn=process);const B7=typeof((W1=mn==null?void 0:mn.versions)===null||W1===void 0?void 0:W1.electron)=="string",V7=B7&&(mn==null?void 0:mn.type)==="renderer";if(typeof navigator=="object"&&!V7)ho=navigator.userAgent,zm=ho.indexOf("Windows")>=0,Um=ho.indexOf("Macintosh")>=0,lS=(ho.indexOf("Macintosh")>=0||ho.indexOf("iPad")>=0||ho.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,dm=ho.indexOf("Linux")>=0,sT=(ho==null?void 0:ho.indexOf("Mobi"))>=0,aS=!0,m({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"),up=bd,H1=up,Qx=navigator.language;else if(typeof mn=="object"){zm=mn.platform==="win32",Um=mn.platform==="darwin",dm=mn.platform==="linux",dm&&mn.env.SNAP&&mn.env.SNAP_REVISION,mn.env.CI||mn.env.BUILD_ARTIFACTSTAGINGDIRECTORY,up=bd,H1=bd;const n=mn.env.VSCODE_NLS_CONFIG;if(n)try{const e=JSON.parse(n),t=e.availableLanguages["*"];up=e.locale,Qx=e.osLocale,H1=t||bd,F7=e._translationsConfigFile}catch{}nT=!0}else console.error("Unable to resolve platform.");const is=zm,gt=Um,Cn=dm,Xh=nT,Gu=aS,W7=aS&&typeof to.importScripts=="function",ll=lS,H7=sT,dr=ho,$7=typeof to.postMessage=="function"&&!to.importScripts,oT=(()=>{if($7){const n=[];to.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let i=0,s=n.length;i<s;i++){const o=n[i];if(o.id===t.data.vscodeScheduleAsyncWork){n.splice(i,1),o.callback();return}}});let e=0;return t=>{const i=++e;n.push({id:i,callback:t}),to.postMessage({vscodeScheduleAsyncWork:i},"*")}}return n=>setTimeout(n)})(),Xs=Um||lS?2:zm?1:3;let Jx=!0,eD=!1;function z7(){if(!eD){eD=!0;const n=new Uint8Array(2);n[0]=1,n[1]=2,Jx=new Uint16Array(n.buffer)[0]===512+1}return Jx}const rT=!!(dr&&dr.indexOf("Chrome")>=0),U7=!!(dr&&dr.indexOf("Firefox")>=0),q7=!!(!rT&&dr&&dr.indexOf("Safari")>=0),j7=!!(dr&&dr.indexOf("Edg/")>=0);dr&&dr.indexOf("Android")>=0;const Xi={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}};var lt;(function(n){function e(v){return v&&typeof v=="object"&&typeof v[Symbol.iterator]=="function"}n.is=e;const t=Object.freeze([]);function i(){return t}n.empty=i;function*s(v){yield v}n.single=s;function o(v){return e(v)?v:s(v)}n.wrap=o;function r(v){return v||t}n.from=r;function a(v){return!v||v[Symbol.iterator]().next().done===!0}n.isEmpty=a;function l(v){return v[Symbol.iterator]().next().value}n.first=l;function c(v,b){for(const w of v)if(b(w))return!0;return!1}n.some=c;function d(v,b){for(const w of v)if(b(w))return w}n.find=d;function*u(v,b){for(const w of v)b(w)&&(yield w)}n.filter=u;function*h(v,b){let w=0;for(const C of v)yield b(C,w++)}n.map=h;function*f(...v){for(const b of v)for(const w of b)yield w}n.concat=f;function g(v,b,w){let C=w;for(const S of v)C=b(C,S);return C}n.reduce=g;function*p(v,b,w=v.length){for(b<0&&(b+=v.length),w<0?w+=v.length:w>v.length&&(w=v.length);b<w;b++)yield v[b]}n.slice=p;function _(v,b=Number.POSITIVE_INFINITY){const w=[];if(b===0)return[w,v];const C=v[Symbol.iterator]();for(let S=0;S<b;S++){const k=C.next();if(k.done)return[w,n.empty()];w.push(k.value)}return[w,{[Symbol.iterator](){return C}}]}n.consume=_})(lt||(lt={}));let di=class Iv{constructor(e){this.element=e,this.next=Iv.Undefined,this.prev=Iv.Undefined}};di.Undefined=new di(void 0);class Zn{constructor(){this._first=di.Undefined,this._last=di.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===di.Undefined}clear(){let e=this._first;for(;e!==di.Undefined;){const t=e.next;e.prev=di.Undefined,e.next=di.Undefined,e=t}this._first=di.Undefined,this._last=di.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const i=new di(e);if(this._first===di.Undefined)this._first=i,this._last=i;else if(t){const o=this._last;this._last=i,i.prev=o,o.next=i}else{const o=this._first;this._first=i,i.next=o,o.prev=i}this._size+=1;let s=!1;return()=>{s||(s=!0,this._remove(i))}}shift(){if(this._first!==di.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==di.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==di.Undefined&&e.next!==di.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===di.Undefined&&e.next===di.Undefined?(this._first=di.Undefined,this._last=di.Undefined):e.next===di.Undefined?(this._last=this._last.prev,this._last.next=di.Undefined):e.prev===di.Undefined&&(this._first=this._first.next,this._first.prev=di.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==di.Undefined;)yield e.element,e=e.next}}const aT="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function K7(n=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of aT)n.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}const cS=K7();function lT(n){let e=cS;if(n&&n instanceof RegExp)if(n.global)e=n;else{let t="g";n.ignoreCase&&(t+="i"),n.multiline&&(t+="m"),n.unicode&&(t+="u"),e=new RegExp(n.source,t)}return e.lastIndex=0,e}const cT=new Zn;cT.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function Ef(n,e,t,i,s){if(s||(s=lt.first(cT)),t.length>s.maxLen){let c=n-s.maxLen/2;return c<0?c=0:i+=c,t=t.substring(c,n+s.maxLen/2),Ef(n,e,t,i,s)}const o=Date.now(),r=n-1-i;let a=-1,l=null;for(let c=1;!(Date.now()-o>=s.timeBudget);c++){const d=r-s.windowSize*c;e.lastIndex=Math.max(0,d);const u=G7(e,t,r,a);if(!u&&l||(l=u,d<=0))break;a=d}if(l){const c={word:l[0],startColumn:i+1+l.index,endColumn:i+1+l.index+l[0].length};return e.lastIndex=0,c}return null}function G7(n,e,t,i){let s;for(;s=n.exec(e);){const o=s.index||0;if(o<=t&&n.lastIndex>=t)return s;if(i>0&&o>i)return null}return null}const pa=8;class dT{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class uT{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class Ut{constructor(e,t,i,s){this.id=e,this.name=t,this.defaultValue=i,this.schema=s}applyUpdate(e,t){return v_(e,t)}compute(e,t,i){return i}}class Qh{constructor(e,t){this.newValue=e,this.didChange=t}}function v_(n,e){if(typeof n!="object"||typeof e!="object"||!n||!e)return new Qh(e,n!==e);if(Array.isArray(n)||Array.isArray(e)){const i=Array.isArray(n)&&Array.isArray(e)&&An(n,e);return new Qh(e,!i)}let t=!1;for(const i in e)if(e.hasOwnProperty(i)){const s=v_(n[i],e[i]);s.didChange&&(n[i]=s.newValue,t=!0)}return new Qh(n,t)}class yg{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return v_(e,t)}validate(e){return this.defaultValue}}class Zu{constructor(e,t,i,s){this.id=e,this.name=t,this.defaultValue=i,this.schema=s}applyUpdate(e,t){return v_(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,i){return i}}function ve(n,e){return typeof n>"u"?e:n==="false"?!1:!!n}class Ye extends Zu{constructor(e,t,i,s=void 0){typeof s<"u"&&(s.type="boolean",s.default=i),super(e,t,i,s)}validate(e){return ve(e,this.defaultValue)}}function Nr(n,e,t,i){if(typeof n>"u")return e;let s=parseInt(n,10);return isNaN(s)?e:(s=Math.max(t,s),s=Math.min(i,s),s|0)}class kt extends Zu{static clampedInt(e,t,i,s){return Nr(e,t,i,s)}constructor(e,t,i,s,o,r=void 0){typeof r<"u"&&(r.type="integer",r.default=i,r.minimum=s,r.maximum=o),super(e,t,i,r),this.minimum=s,this.maximum=o}validate(e){return kt.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}function hT(n,e,t,i){if(typeof n>"u")return e;const s=Qs.float(n,e);return Qs.clamp(s,t,i)}class Qs extends Zu{static clamp(e,t,i){return e<t?t:e>i?i:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const i=parseFloat(e);return isNaN(i)?t:i}constructor(e,t,i,s,o){typeof o<"u"&&(o.type="number",o.default=i),super(e,t,i,o),this.validationFn=s}validate(e){return this.validationFn(Qs.float(e,this.defaultValue))}}class zn extends Zu{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,i,s=void 0){typeof s<"u"&&(s.type="string",s.default=i),super(e,t,i,s)}validate(e){return zn.string(e,this.defaultValue)}}function Gt(n,e,t,i){return typeof n!="string"?e:i&&n in i?i[n]:t.indexOf(n)===-1?e:n}class Qt extends Zu{constructor(e,t,i,s,o=void 0){typeof o<"u"&&(o.type="string",o.enum=s,o.default=i),super(e,t,i,o),this._allowedValues=s}validate(e){return Gt(e,this.defaultValue,this._allowedValues)}}class hp extends Ut{constructor(e,t,i,s,o,r,a=void 0){typeof a<"u"&&(a.type="string",a.enum=o,a.default=s),super(e,t,i,a),this._allowedValues=o,this._convert=r}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}function Z7(n){switch(n){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class Y7 extends Ut{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[m("accessibilitySupport.auto","Use platform APIs to detect when a Screen Reader is attached"),m("accessibilitySupport.on","Optimize for usage with a Screen Reader"),m("accessibilitySupport.off","Assume a screen reader is not attached")],default:"auto",tags:["accessibility"],description:m("accessibilitySupport","Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,i){return i===0?e.accessibilitySupport:i}}class X7 extends Ut{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(22,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:m("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:m("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:ve(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:ve(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function Q7(n){switch(n){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var Vi;(function(n){n[n.Line=1]="Line",n[n.Block=2]="Block",n[n.Underline=3]="Underline",n[n.LineThin=4]="LineThin",n[n.BlockOutline=5]="BlockOutline",n[n.UnderlineThin=6]="UnderlineThin"})(Vi||(Vi={}));function J7(n){switch(n){case"line":return Vi.Line;case"block":return Vi.Block;case"underline":return Vi.Underline;case"line-thin":return Vi.LineThin;case"block-outline":return Vi.BlockOutline;case"underline-thin":return Vi.UnderlineThin}}class eF extends yg{constructor(){super(139)}compute(e,t,i){const s=["monaco-editor"];return t.get(38)&&s.push(t.get(38)),e.extraEditorClassName&&s.push(e.extraEditorClassName),t.get(72)==="default"?s.push("mouse-default"):t.get(72)==="copy"&&s.push("mouse-copy"),t.get(109)&&s.push("showUnused"),t.get(137)&&s.push("showDeprecated"),s.join(" ")}}class tF extends Ye{constructor(){super(36,"emptySelectionClipboard",!0,{description:m("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,i){return i&&e.emptySelectionClipboard}}class iF extends Ut{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(40,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:m("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[m("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),m("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),m("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:m("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[m("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),m("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),m("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:m("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:m("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:gt},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:m("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:m("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:ve(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":Gt(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":Gt(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:ve(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:ve(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:ve(t.loop,this.defaultValue.loop)}}}class Kn extends Ut{constructor(){super(50,"fontLigatures",Kn.OFF,{anyOf:[{type:"boolean",description:m("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:m("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:m("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?Kn.OFF:e==="true"?Kn.ON:e:e?Kn.ON:Kn.OFF}}Kn.OFF='"liga" off, "calt" off';Kn.ON='"liga" on, "calt" on';class Co extends Ut{constructor(){super(53,"fontVariations",Co.OFF,{anyOf:[{type:"boolean",description:m("fontVariations","Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:m("fontVariationSettings","Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:m("fontVariationsGeneral","Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?Co.OFF:e==="true"?Co.TRANSLATE:e:e?Co.TRANSLATE:Co.OFF}compute(e,t,i){return e.fontInfo.fontVariationSettings}}Co.OFF="normal";Co.TRANSLATE="translate";class nF extends yg{constructor(){super(49)}compute(e,t,i){return e.fontInfo}}class sF extends Zu{constructor(){super(51,"fontSize",Rs.fontSize,{type:"number",minimum:6,maximum:100,default:Rs.fontSize,description:m("fontSize","Controls the font size in pixels.")})}validate(e){const t=Qs.float(e,this.defaultValue);return t===0?Rs.fontSize:Qs.clamp(t,6,100)}compute(e,t,i){return e.fontInfo.fontSize}}class Zo extends Ut{constructor(){super(52,"fontWeight",Rs.fontWeight,{anyOf:[{type:"number",minimum:Zo.MINIMUM_VALUE,maximum:Zo.MAXIMUM_VALUE,errorMessage:m("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:Zo.SUGGESTION_VALUES}],default:Rs.fontWeight,description:m("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(kt.clampedInt(e,Rs.fontWeight,Zo.MINIMUM_VALUE,Zo.MAXIMUM_VALUE))}}Zo.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"];Zo.MINIMUM_VALUE=1;Zo.MAXIMUM_VALUE=1e3;class oF extends Ut{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[m("editor.gotoLocation.multiple.peek","Show Peek view of the results (default)"),m("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a Peek view"),m("editor.gotoLocation.multiple.goto","Go to the primary result and enable Peek-less navigation to others")]},i=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(57,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:m("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":Object.assign({description:m("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleTypeDefinitions":Object.assign({description:m("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleDeclarations":Object.assign({description:m("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleImplementations":Object.assign({description:m("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleReferences":Object.assign({description:m("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist.")},t),"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:i,description:m("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:i,description:m("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:i,description:m("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:i,description:m("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:i,description:m("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){var t,i,s,o,r;if(!e||typeof e!="object")return this.defaultValue;const a=e;return{multiple:Gt(a.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:(t=a.multipleDefinitions)!==null&&t!==void 0?t:Gt(a.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:(i=a.multipleTypeDefinitions)!==null&&i!==void 0?i:Gt(a.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:(s=a.multipleDeclarations)!==null&&s!==void 0?s:Gt(a.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:(o=a.multipleImplementations)!==null&&o!==void 0?o:Gt(a.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:(r=a.multipleReferences)!==null&&r!==void 0?r:Gt(a.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:zn.string(a.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:zn.string(a.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:zn.string(a.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:zn.string(a.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:zn.string(a.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}}class rF extends Ut{constructor(){const e={enabled:!0,delay:300,sticky:!0,above:!0};super(59,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:m("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:m("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:m("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.above":{type:"boolean",default:e.above,description:m("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:ve(t.enabled,this.defaultValue.enabled),delay:kt.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:ve(t.sticky,this.defaultValue.sticky),above:ve(t.above,this.defaultValue.above)}}}class jd extends yg{constructor(){super(142)}compute(e,t,i){return jd.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio,glyphMarginDecorationLaneCount:e.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,i=Math.floor(e.paddingTop/e.lineHeight);let s=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(s=Math.max(s,t-1));const o=(i+e.viewLineCount+s)/(e.pixelRatio*e.height),r=Math.floor(e.viewLineCount/o);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:i,extraLinesBeyondLastLine:s,desiredRatio:o,minimapLineCount:r}}static _computeMinimapLayout(e,t){const i=e.outerWidth,s=e.outerHeight,o=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(o*s),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:s};const r=t.stableMinimapLayoutInput,a=r&&e.outerHeight===r.outerHeight&&e.lineHeight===r.lineHeight&&e.typicalHalfwidthCharacterWidth===r.typicalHalfwidthCharacterWidth&&e.pixelRatio===r.pixelRatio&&e.scrollBeyondLastLine===r.scrollBeyondLastLine&&e.paddingTop===r.paddingTop&&e.paddingBottom===r.paddingBottom&&e.minimap.enabled===r.minimap.enabled&&e.minimap.side===r.minimap.side&&e.minimap.size===r.minimap.size&&e.minimap.showSlider===r.minimap.showSlider&&e.minimap.renderCharacters===r.minimap.renderCharacters&&e.minimap.maxColumn===r.minimap.maxColumn&&e.minimap.scale===r.minimap.scale&&e.verticalScrollbarWidth===r.verticalScrollbarWidth&&e.isViewportWrapping===r.isViewportWrapping,l=e.lineHeight,c=e.typicalHalfwidthCharacterWidth,d=e.scrollBeyondLastLine,u=e.minimap.renderCharacters;let h=o>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const f=e.minimap.maxColumn,g=e.minimap.size,p=e.minimap.side,_=e.verticalScrollbarWidth,v=e.viewLineCount,b=e.remainingWidth,w=e.isViewportWrapping,C=u?2:3;let S=Math.floor(o*s);const k=S/o;let L=!1,x=!1,I=C*h,A=h/o,T=1;if(g==="fill"||g==="fit"){const{typicalViewportLineCount:me,extraLinesBeforeFirstLine:de,extraLinesBeyondLastLine:Ae,desiredRatio:ye,minimapLineCount:be}=jd.computeContainedMinimapLineCount({viewLineCount:v,scrollBeyondLastLine:d,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:s,lineHeight:l,pixelRatio:o});if(v/be>1)L=!0,x=!0,h=1,I=1,A=h/o;else{let Bt=!1,Ri=h+1;if(g==="fit"){const Mt=Math.ceil((de+v+Ae)*I);w&&a&&b<=t.stableFitRemainingWidth?(Bt=!0,Ri=t.stableFitMaxMinimapScale):Bt=Mt>S}if(g==="fill"||Bt){L=!0;const Mt=h;I=Math.min(l*o,Math.max(1,Math.floor(1/ye))),w&&a&&b<=t.stableFitRemainingWidth&&(Ri=t.stableFitMaxMinimapScale),h=Math.min(Ri,Math.max(1,Math.floor(I/C))),h>Mt&&(T=Math.min(2,h/Mt)),A=h/o/T,S=Math.ceil(Math.max(me,de+v+Ae)*I),w?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=b,t.stableFitMaxMinimapScale=h):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const O=Math.floor(f*A),R=Math.min(O,Math.max(0,Math.floor((b-_-2)*A/(c+A)))+pa);let X=Math.floor(o*R);const ie=X/o;X=Math.floor(X*T);const ae=u?1:2,ue=p==="left"?0:i-R-_;return{renderMinimap:ae,minimapLeft:ue,minimapWidth:R,minimapHeightIsEditorHeight:L,minimapIsSampling:x,minimapScale:h,minimapLineHeight:I,minimapCanvasInnerWidth:X,minimapCanvasInnerHeight:S,minimapCanvasOuterWidth:ie,minimapCanvasOuterHeight:k}}static computeLayout(e,t){const i=t.outerWidth|0,s=t.outerHeight|0,o=t.lineHeight|0,r=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,c=t.pixelRatio,d=t.viewLineCount,u=e.get(134),h=u==="inherit"?e.get(133):u,f=h==="inherit"?e.get(129):h,g=e.get(132),p=t.isDominatedByLongLines,_=e.get(56),v=e.get(66).renderType!==0,b=e.get(67),w=e.get(103),C=e.get(82),S=e.get(71),k=e.get(101),L=k.verticalScrollbarSize,x=k.verticalHasArrows,I=k.arrowSize,A=k.horizontalScrollbarSize,T=e.get(42),O=e.get(108)!=="never";let R=e.get(64);T&&O&&(R+=16);let X=0;if(v){const ut=Math.max(r,b);X=Math.round(ut*l)}let ie=0;_&&(ie=o*t.glyphMarginDecorationLaneCount);let ae=0,ue=ae+ie,me=ue+X,de=me+R;const Ae=i-ie-X-R;let ye=!1,be=!1,le=-1;h==="inherit"&&p?(ye=!0,be=!0):f==="on"||f==="bounded"?be=!0:f==="wordWrapColumn"&&(le=g);const Bt=jd._computeMinimapLayout({outerWidth:i,outerHeight:s,lineHeight:o,typicalHalfwidthCharacterWidth:a,pixelRatio:c,scrollBeyondLastLine:w,paddingTop:C.top,paddingBottom:C.bottom,minimap:S,verticalScrollbarWidth:L,viewLineCount:d,remainingWidth:Ae,isViewportWrapping:be},t.memory||new uT);Bt.renderMinimap!==0&&Bt.minimapLeft===0&&(ae+=Bt.minimapWidth,ue+=Bt.minimapWidth,me+=Bt.minimapWidth,de+=Bt.minimapWidth);const Ri=Ae-Bt.minimapWidth,Mt=Math.max(1,Math.floor((Ri-L-2)/a)),fn=x?I:0;return be&&(le=Math.max(1,Mt),f==="bounded"&&(le=Math.min(le,g))),{width:i,height:s,glyphMarginLeft:ae,glyphMarginWidth:ie,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount,lineNumbersLeft:ue,lineNumbersWidth:X,decorationsLeft:me,decorationsWidth:R,contentLeft:de,contentWidth:Ri,minimap:Bt,viewportColumn:Mt,isWordWrapMinified:ye,isViewportWrapping:be,wrappingColumn:le,verticalScrollbarWidth:L,horizontalScrollbarHeight:A,overviewRuler:{top:fn,width:L,height:s-2*fn,right:0}}}}class aF extends Ut{constructor(){super(136,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[m("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),m("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:m("wrappingStrategy","Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(e){return Gt(e,"simple",["simple","advanced"])}compute(e,t,i){return t.get(2)===2?"advanced":i}}class lF extends Ut{constructor(){const e={enabled:!0};super(63,"lightbulb",e,{"editor.lightbulb.enabled":{type:"boolean",default:e.enabled,description:m("codeActions","Enables the Code Action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:ve(e.enabled,this.defaultValue.enabled)}}}class cF extends Ut{constructor(){const e={enabled:!1,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(113,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:m("editor.stickyScroll.enabled","Shows the nested current scopes during the scroll at the top of the editor.")},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:10,description:m("editor.stickyScroll.maxLineCount","Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:m("editor.stickyScroll.defaultModel","Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:m("editor.stickyScroll.scrollWithEditor","Enable scrolling of the sticky scroll widget with the editor's horizontal scrollbar.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:ve(t.enabled,this.defaultValue.enabled),maxLineCount:kt.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,10),defaultModel:Gt(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:ve(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}}class dF extends Ut{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(138,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:m("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[m("editor.inlayHints.on","Inlay hints are enabled"),m("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding {0}",gt?"Ctrl+Option":"Ctrl+Alt"),m("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding {0}",gt?"Ctrl+Option":"Ctrl+Alt"),m("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:m("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:m("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:m("inlayHints.padding","Enables the padding around the inlay hints in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:Gt(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:kt.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:zn.string(t.fontFamily,this.defaultValue.fontFamily),padding:ve(t.padding,this.defaultValue.padding)}}}class uF extends Ut{constructor(){super(64,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):kt.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,i){return i<0?kt.clampedInt(-i*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):i}}class hF extends Qs{constructor(){super(65,"lineHeight",Rs.lineHeight,e=>Qs.clamp(e,0,150),{markdownDescription:m("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,i){return e.fontInfo.lineHeight}}class fF extends Ut{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1};super(71,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:m("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:m("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[m("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),m("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),m("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:m("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:m("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:m("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:m("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:m("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:m("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:ve(t.enabled,this.defaultValue.enabled),autohide:ve(t.autohide,this.defaultValue.autohide),size:Gt(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:Gt(t.side,this.defaultValue.side,["right","left"]),showSlider:Gt(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:ve(t.renderCharacters,this.defaultValue.renderCharacters),scale:kt.clampedInt(t.scale,1,1,3),maxColumn:kt.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4)}}}function gF(n){return n==="ctrlCmd"?gt?"metaKey":"ctrlKey":"altKey"}class pF extends Ut{constructor(){super(82,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:m("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:m("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:kt.clampedInt(t.top,0,0,1e3),bottom:kt.clampedInt(t.bottom,0,0,1e3)}}}class mF extends Ut{constructor(){const e={enabled:!0,cycle:!0};super(84,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:m("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:m("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:ve(t.enabled,this.defaultValue.enabled),cycle:ve(t.cycle,this.defaultValue.cycle)}}}class _F extends yg{constructor(){super(140)}compute(e,t,i){return e.pixelRatio}}class bF extends Ut{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[m("on","Quick suggestions show inside the suggest widget"),m("inline","Quick suggestions show as ghost text"),m("off","Quick suggestions are disabled")]}];super(87,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:m("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:m("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:m("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:m("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the '{0}'-setting which controls if suggestions are triggered by special characters.","#editor.suggestOnTriggerCharacters#")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:i,strings:s}=e,o=["on","inline","off"];let r,a,l;return typeof t=="boolean"?r=t?"on":"off":r=Gt(t,this.defaultValue.other,o),typeof i=="boolean"?a=i?"on":"off":a=Gt(i,this.defaultValue.comments,o),typeof s=="boolean"?l=s?"on":"off":l=Gt(s,this.defaultValue.strings,o),{other:r,comments:a,strings:l}}}class vF extends Ut{constructor(){super(66,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[m("lineNumbers.off","Line numbers are not rendered."),m("lineNumbers.on","Line numbers are rendered as absolute number."),m("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),m("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:m("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,i=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,i=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:i}}}function qm(n){const e=n.get(96);return e==="editable"?n.get(89):e!=="on"}class wF extends Ut{constructor(){const e=[],t={type:"number",description:m("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(100,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:m("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:m("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="number")t.push({column:kt.clampedInt(i,0,0,1e4),color:null});else if(i&&typeof i=="object"){const s=i;t.push({column:kt.clampedInt(s.column,0,0,1e4),color:s.color})}return t.sort((i,s)=>i.column-s.column),t}return this.defaultValue}}class CF extends Ut{constructor(){super(90,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}}function tD(n,e){if(typeof n!="string")return e;switch(n){case"hidden":return 2;case"visible":return 3;default:return 1}}let yF=class extends Ut{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1};super(101,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[m("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),m("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),m("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:m("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[m("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),m("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),m("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:m("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:m("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:m("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:m("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,i=kt.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),s=kt.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:kt.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:tD(t.vertical,this.defaultValue.vertical),horizontal:tD(t.horizontal,this.defaultValue.horizontal),useShadows:ve(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:ve(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:ve(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:ve(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:ve(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:i,horizontalSliderSize:kt.clampedInt(t.horizontalSliderSize,i,0,1e3),verticalScrollbarSize:s,verticalSliderSize:kt.clampedInt(t.verticalSliderSize,s,0,1e3),scrollByPage:ve(t.scrollByPage,this.defaultValue.scrollByPage)}}};const lo="inUntrustedWorkspace",Ml={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"};class SF extends Ut{constructor(){const e={nonBasicASCII:lo,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:lo,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(123,"unicodeHighlight",e,{[Ml.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,lo],default:e.nonBasicASCII,description:m("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[Ml.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:m("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[Ml.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:m("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[Ml.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,lo],default:e.includeComments,description:m("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to Unicode highlighting.")},[Ml.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,lo],default:e.includeStrings,description:m("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to Unicode highlighting.")},[Ml.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:m("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[Ml.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:m("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let i=!1;t.allowedCharacters&&e&&(bs(e.allowedCharacters,t.allowedCharacters)||(e=Object.assign(Object.assign({},e),{allowedCharacters:t.allowedCharacters}),i=!0)),t.allowedLocales&&e&&(bs(e.allowedLocales,t.allowedLocales)||(e=Object.assign(Object.assign({},e),{allowedLocales:t.allowedLocales}),i=!0));const s=super.applyUpdate(e,t);return i?new Qh(s.newValue,!0):s}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:Kd(t.nonBasicASCII,lo,[!0,!1,lo]),invisibleCharacters:ve(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:ve(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:Kd(t.includeComments,lo,[!0,!1,lo]),includeStrings:Kd(t.includeStrings,lo,[!0,!1,lo]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if(typeof e!="object"||!e)return t;const i={};for(const[s,o]of Object.entries(e))o===!0&&(i[s]=!0);return i}}class LF extends Ut{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1};super(61,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:m("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover"],enumDescriptions:[m("inlineSuggest.showToolbar.always","Show the inline suggestion toolbar whenever an inline suggestion is shown."),m("inlineSuggest.showToolbar.onHover","Show the inline suggestion toolbar when hovering over an inline suggestion.")],description:m("inlineSuggest.showToolbar","Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:m("inlineSuggest.suppressSuggestions","Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:ve(t.enabled,this.defaultValue.enabled),mode:Gt(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:Gt(t.showToolbar,this.defaultValue.showToolbar,["always","onHover"]),suppressSuggestions:ve(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:ve(t.keepOnBlur,this.defaultValue.keepOnBlur)}}}class xF extends Ut{constructor(){const e={enabled:Xi.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:Xi.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(14,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:m("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:m("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:ve(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:ve(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}class DF extends Ut{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(15,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[m("editor.guides.bracketPairs.true","Enables bracket pair guides."),m("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),m("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:m("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[m("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),m("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),m("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:m("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:m("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:m("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[m("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),m("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),m("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:m("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:Kd(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:Kd(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:ve(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:ve(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:Kd(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}function Kd(n,e,t){const i=t.indexOf(n);return i===-1?e:t[i]}class kF extends Ut{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(116,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[m("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),m("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:m("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:m("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:m("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:m("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[m("suggest.insertMode.always","Always select a suggestion when automatically triggering IntelliSense."),m("suggest.insertMode.never","Never select a suggestion when automatically triggering IntelliSense."),m("suggest.insertMode.whenTriggerCharacter","Select a suggestion only when triggering IntelliSense from a trigger character."),m("suggest.insertMode.whenQuickSuggestion","Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:m("suggest.selectionMode","Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions (`#editor.quickSuggestions#` and `#editor.suggestOnTriggerCharacters#`) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:m("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:m("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:m("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:m("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:m("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:m("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:m("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.matchOnWordStartOnly","When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:Gt(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:ve(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:ve(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:ve(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:ve(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:Gt(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:ve(t.showIcons,this.defaultValue.showIcons),showStatusBar:ve(t.showStatusBar,this.defaultValue.showStatusBar),preview:ve(t.preview,this.defaultValue.preview),previewMode:Gt(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:ve(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:ve(t.showMethods,this.defaultValue.showMethods),showFunctions:ve(t.showFunctions,this.defaultValue.showFunctions),showConstructors:ve(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:ve(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:ve(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:ve(t.showFields,this.defaultValue.showFields),showVariables:ve(t.showVariables,this.defaultValue.showVariables),showClasses:ve(t.showClasses,this.defaultValue.showClasses),showStructs:ve(t.showStructs,this.defaultValue.showStructs),showInterfaces:ve(t.showInterfaces,this.defaultValue.showInterfaces),showModules:ve(t.showModules,this.defaultValue.showModules),showProperties:ve(t.showProperties,this.defaultValue.showProperties),showEvents:ve(t.showEvents,this.defaultValue.showEvents),showOperators:ve(t.showOperators,this.defaultValue.showOperators),showUnits:ve(t.showUnits,this.defaultValue.showUnits),showValues:ve(t.showValues,this.defaultValue.showValues),showConstants:ve(t.showConstants,this.defaultValue.showConstants),showEnums:ve(t.showEnums,this.defaultValue.showEnums),showEnumMembers:ve(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:ve(t.showKeywords,this.defaultValue.showKeywords),showWords:ve(t.showWords,this.defaultValue.showWords),showColors:ve(t.showColors,this.defaultValue.showColors),showFiles:ve(t.showFiles,this.defaultValue.showFiles),showReferences:ve(t.showReferences,this.defaultValue.showReferences),showFolders:ve(t.showFolders,this.defaultValue.showFolders),showTypeParameters:ve(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:ve(t.showSnippets,this.defaultValue.showSnippets),showUsers:ve(t.showUsers,this.defaultValue.showUsers),showIssues:ve(t.showIssues,this.defaultValue.showIssues)}}}class EF extends Ut{constructor(){super(111,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:m("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:m("selectSubwords","Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:ve(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:ve(e.selectSubwords,this.defaultValue.selectSubwords)}}}class IF extends Ut{constructor(){super(135,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[m("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),m("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),m("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),m("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:m("wrappingIndent","Controls the indentation of wrapped lines."),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,i){return t.get(2)===2?0:i}}class NF extends yg{constructor(){super(143)}compute(e,t,i){const s=t.get(142);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:s.isWordWrapMinified,isViewportWrapping:s.isViewportWrapping,wrappingColumn:s.wrappingColumn}}}class TF extends Ut{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(35,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:m("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down `shift` (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:m("dropIntoEditor.showDropSelector","Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[m("dropIntoEditor.showDropSelector.afterDrop","Show the drop selector widget after a file is dropped into the editor."),m("dropIntoEditor.showDropSelector.never","Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:ve(t.enabled,this.defaultValue.enabled),showDropSelector:Gt(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}}class AF extends Ut{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(83,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:m("pasteAs.enabled","Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:m("pasteAs.showPasteSelector","Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[m("pasteAs.showPasteSelector.afterPaste","Show the paste selector widget after content is pasted into the editor."),m("pasteAs.showPasteSelector.never","Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:ve(t.enabled,this.defaultValue.enabled),showPasteSelector:Gt(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}}const MF="Consolas, 'Courier New', monospace",RF="Menlo, Monaco, 'Courier New', monospace",PF="'Droid Sans Mono', 'monospace', monospace",Rs={fontFamily:gt?RF:Cn?PF:MF,fontWeight:"normal",fontSize:gt?12:14,lineHeight:0,letterSpacing:0},vd=[];function te(n){return vd[n.id]=n,n}const bl={acceptSuggestionOnCommitCharacter:te(new Ye(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:m("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:te(new Qt(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",m("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:m("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:te(new Y7),accessibilityPageSize:te(new kt(3,"accessibilityPageSize",10,1,1073741824,{description:m("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:te(new zn(4,"ariaLabel",m("editorViewAccessibleLabel","Editor content"))),ariaRequired:te(new Ye(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:te(new Ye(7,"screenReaderAnnounceInlineSuggestion",!0,{description:m("screenReaderAnnounceInlineSuggestion","Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:te(new Qt(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",m("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),m("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:m("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingDelete:te(new Qt(8,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",m("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:m("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:te(new Qt(9,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",m("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:m("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:te(new Qt(10,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",m("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),m("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:m("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:te(new hp(11,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],Z7,{enumDescriptions:[m("editor.autoIndent.none","The editor will not insert indentation automatically."),m("editor.autoIndent.keep","The editor will keep the current line's indentation."),m("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),m("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),m("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:m("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:te(new Ye(12,"automaticLayout",!1)),autoSurround:te(new Qt(13,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[m("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),m("editor.autoSurround.quotes","Surround with quotes but not brackets."),m("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:m("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:te(new xF),bracketPairGuides:te(new DF),stickyTabStops:te(new Ye(114,"stickyTabStops",!1,{description:m("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:te(new Ye(16,"codeLens",!0,{description:m("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:te(new zn(17,"codeLensFontFamily","",{description:m("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:te(new kt(18,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:m("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:te(new Ye(19,"colorDecorators",!0,{description:m("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:te(new Qt(145,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[m("editor.colorDecoratorActivatedOn.clickAndHover","Make the color picker appear both on click and hover of the color decorator"),m("editor.colorDecoratorActivatedOn.hover","Make the color picker appear on hover of the color decorator"),m("editor.colorDecoratorActivatedOn.click","Make the color picker appear on click of the color decorator")],description:m("colorDecoratorActivatedOn","Controls the condition to make a color picker appear from a color decorator")})),colorDecoratorsLimit:te(new kt(20,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:m("colorDecoratorsLimit","Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:te(new Ye(21,"columnSelection",!1,{description:m("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:te(new X7),contextmenu:te(new Ye(23,"contextmenu",!0)),copyWithSyntaxHighlighting:te(new Ye(24,"copyWithSyntaxHighlighting",!0,{description:m("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:te(new hp(25,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],Q7,{description:m("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:te(new Qt(26,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[m("cursorSmoothCaretAnimation.off","Smooth caret animation is disabled."),m("cursorSmoothCaretAnimation.explicit","Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),m("cursorSmoothCaretAnimation.on","Smooth caret animation is always enabled.")],description:m("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:te(new hp(27,"cursorStyle",Vi.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],J7,{description:m("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:te(new kt(28,"cursorSurroundingLines",0,0,1073741824,{description:m("cursorSurroundingLines","Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:te(new Qt(29,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[m("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),m("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],description:m("cursorSurroundingLinesStyle","Controls when `cursorSurroundingLines` should be enforced.")})),cursorWidth:te(new kt(30,"cursorWidth",0,0,1073741824,{markdownDescription:m("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:te(new Ye(31,"disableLayerHinting",!1)),disableMonospaceOptimizations:te(new Ye(32,"disableMonospaceOptimizations",!1)),domReadOnly:te(new Ye(33,"domReadOnly",!1)),dragAndDrop:te(new Ye(34,"dragAndDrop",!0,{description:m("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:te(new tF),dropIntoEditor:te(new TF),stickyScroll:te(new cF),experimentalWhitespaceRendering:te(new Qt(37,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[m("experimentalWhitespaceRendering.svg","Use a new rendering method with svgs."),m("experimentalWhitespaceRendering.font","Use a new rendering method with font characters."),m("experimentalWhitespaceRendering.off","Use the stable rendering method.")],description:m("experimentalWhitespaceRendering","Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:te(new zn(38,"extraEditorClassName","")),fastScrollSensitivity:te(new Qs(39,"fastScrollSensitivity",5,n=>n<=0?5:n,{markdownDescription:m("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:te(new iF),fixedOverflowWidgets:te(new Ye(41,"fixedOverflowWidgets",!1)),folding:te(new Ye(42,"folding",!0,{description:m("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:te(new Qt(43,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[m("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),m("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:m("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:te(new Ye(44,"foldingHighlight",!0,{description:m("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:te(new Ye(45,"foldingImportsByDefault",!1,{description:m("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:te(new kt(46,"foldingMaximumRegions",5e3,10,65e3,{description:m("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:te(new Ye(47,"unfoldOnClickAfterEndOfLine",!1,{description:m("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:te(new zn(48,"fontFamily",Rs.fontFamily,{description:m("fontFamily","Controls the font family.")})),fontInfo:te(new nF),fontLigatures2:te(new Kn),fontSize:te(new sF),fontWeight:te(new Zo),fontVariations:te(new Co),formatOnPaste:te(new Ye(54,"formatOnPaste",!1,{description:m("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:te(new Ye(55,"formatOnType",!1,{description:m("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:te(new Ye(56,"glyphMargin",!0,{description:m("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:te(new oF),hideCursorInOverviewRuler:te(new Ye(58,"hideCursorInOverviewRuler",!1,{description:m("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:te(new rF),inDiffEditor:te(new Ye(60,"inDiffEditor",!1)),letterSpacing:te(new Qs(62,"letterSpacing",Rs.letterSpacing,n=>Qs.clamp(n,-5,20),{description:m("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:te(new lF),lineDecorationsWidth:te(new uF),lineHeight:te(new hF),lineNumbers:te(new vF),lineNumbersMinChars:te(new kt(67,"lineNumbersMinChars",5,1,300)),linkedEditing:te(new Ye(68,"linkedEditing",!1,{description:m("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:te(new Ye(69,"links",!0,{description:m("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:te(new Qt(70,"matchBrackets","always",["always","near","never"],{description:m("matchBrackets","Highlight matching brackets.")})),minimap:te(new fF),mouseStyle:te(new Qt(72,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:te(new Qs(73,"mouseWheelScrollSensitivity",1,n=>n===0?1:n,{markdownDescription:m("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:te(new Ye(74,"mouseWheelZoom",!1,{markdownDescription:m("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:te(new Ye(75,"multiCursorMergeOverlapping",!0,{description:m("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:te(new hp(76,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],gF,{markdownEnumDescriptions:[m("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),m("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:m({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:te(new Qt(77,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[m("multiCursorPaste.spread","Each cursor pastes a single line of the text."),m("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:m("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:te(new kt(78,"multiCursorLimit",1e4,1,1e5,{markdownDescription:m("multiCursorLimit","Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:te(new Ye(79,"occurrencesHighlight",!0,{description:m("occurrencesHighlight","Controls whether the editor should highlight semantic symbol occurrences.")})),overviewRulerBorder:te(new Ye(80,"overviewRulerBorder",!0,{description:m("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:te(new kt(81,"overviewRulerLanes",3,0,3)),padding:te(new pF),pasteAs:te(new AF),parameterHints:te(new mF),peekWidgetDefaultFocus:te(new Qt(85,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[m("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),m("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:m("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),definitionLinkOpensInPeek:te(new Ye(86,"definitionLinkOpensInPeek",!1,{description:m("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:te(new bF),quickSuggestionsDelay:te(new kt(88,"quickSuggestionsDelay",10,0,1073741824,{description:m("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:te(new Ye(89,"readOnly",!1)),readOnlyMessage:te(new CF),renameOnType:te(new Ye(91,"renameOnType",!1,{description:m("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:m("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:te(new Ye(92,"renderControlCharacters",!0,{description:m("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:te(new Qt(93,"renderFinalNewline",Cn?"dimmed":"on",["off","on","dimmed"],{description:m("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:te(new Qt(94,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",m("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:m("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:te(new Ye(95,"renderLineHighlightOnlyWhenFocus",!1,{description:m("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:te(new Qt(96,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:te(new Qt(97,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",m("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),m("renderWhitespace.selection","Render whitespace characters only on selected text."),m("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:m("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:te(new kt(98,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:te(new Ye(99,"roundedSelection",!0,{description:m("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:te(new wF),scrollbar:te(new yF),scrollBeyondLastColumn:te(new kt(102,"scrollBeyondLastColumn",4,0,1073741824,{description:m("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:te(new Ye(103,"scrollBeyondLastLine",!0,{description:m("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:te(new Ye(104,"scrollPredominantAxis",!0,{description:m("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:te(new Ye(105,"selectionClipboard",!0,{description:m("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:Cn})),selectionHighlight:te(new Ye(106,"selectionHighlight",!0,{description:m("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:te(new Ye(107,"selectOnLineNumbers",!0)),showFoldingControls:te(new Qt(108,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[m("showFoldingControls.always","Always show the folding controls."),m("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),m("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:m("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:te(new Ye(109,"showUnused",!0,{description:m("showUnused","Controls fading out of unused code.")})),showDeprecated:te(new Ye(137,"showDeprecated",!0,{description:m("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:te(new dF),snippetSuggestions:te(new Qt(110,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[m("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),m("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),m("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),m("snippetSuggestions.none","Do not show snippet suggestions.")],description:m("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:te(new EF),smoothScrolling:te(new Ye(112,"smoothScrolling",!1,{description:m("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:te(new kt(115,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:te(new kF),inlineSuggest:te(new LF),inlineCompletionsAccessibilityVerbose:te(new Ye(146,"inlineCompletionsAccessibilityVerbose",!1,{description:m("inlineCompletionsAccessibilityVerbose","Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:te(new kt(117,"suggestFontSize",0,0,1e3,{markdownDescription:m("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:te(new kt(118,"suggestLineHeight",0,0,1e3,{markdownDescription:m("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:te(new Ye(119,"suggestOnTriggerCharacters",!0,{description:m("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:te(new Qt(120,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[m("suggestSelection.first","Always select the first suggestion."),m("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),m("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:m("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:te(new Qt(121,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[m("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),m("tabCompletion.off","Disable tab completions."),m("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:m("tabCompletion","Enables tab completions.")})),tabIndex:te(new kt(122,"tabIndex",0,-1,1073741824)),unicodeHighlight:te(new SF),unusualLineTerminators:te(new Qt(124,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[m("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),m("unusualLineTerminators.off","Unusual line terminators are ignored."),m("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:m("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:te(new Ye(125,"useShadowDOM",!0)),useTabStops:te(new Ye(126,"useTabStops",!0,{description:m("useTabStops","Inserting and deleting whitespace follows tab stops.")})),wordBreak:te(new Qt(127,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[m("wordBreak.normal","Use the default line break rule."),m("wordBreak.keepAll","Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:m("wordBreak","Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSeparators:te(new zn(128,"wordSeparators",aT,{description:m("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:te(new Qt(129,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[m("wordWrap.off","Lines will never wrap."),m("wordWrap.on","Lines will wrap at the viewport width."),m({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),m({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:m({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:te(new zn(130,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;¢°′″‰℃、。｡､￠，．：；？！％・･ゝゞヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻ｧｨｩｪｫｬｭｮｯｰ”〉》」』】〕）］｝｣")),wordWrapBreakBeforeCharacters:te(new zn(131,"wordWrapBreakBeforeCharacters","([{‘“〈《「『【〔（［｛｢£¥＄￡￥+＋")),wordWrapColumn:te(new kt(132,"wordWrapColumn",80,1,1073741824,{markdownDescription:m({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:te(new Qt(133,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:te(new Qt(134,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:te(new eF),defaultColorDecorators:te(new Ye(144,"defaultColorDecorators",!1,{markdownDescription:m("defaultColorDecorators","Controls whether inline color decorations should be shown using the default document color provider")})),pixelRatio:te(new _F),tabFocusMode:te(new Ye(141,"tabFocusMode",!1,{markdownDescription:m("tabFocusMode","Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:te(new jd),wrappingInfo:te(new NF),wrappingIndent:te(new IF),wrappingStrategy:te(new aF)};class OF{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?_u.isErrorNoTelemetry(e)?new _u(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const fT=new OF;function $t(n){Sg(n)||fT.onUnexpectedError(n)}function w_(n){Sg(n)||fT.onUnexpectedExternalError(n)}function iD(n){if(n instanceof Error){const{name:e,message:t}=n,i=n.stacktrace||n.stack;return{$isError:!0,name:e,message:t,stack:i,noTelemetry:_u.isErrorNoTelemetry(n)}}return n}const jm="Canceled";function Sg(n){return n instanceof Lg?!0:n instanceof Error&&n.name===jm&&n.message===jm}class Lg extends Error{constructor(){super(jm),this.name=this.message}}function FF(){const n=new Error(jm);return n.name=n.message,n}function C_(n){return n?new Error(`Illegal argument: ${n}`):new Error("Illegal argument")}function dS(n){return n?new Error(`Illegal state: ${n}`):new Error("Illegal state")}class BF extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}class _u extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof _u)return e;const t=new _u;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}}class Ai extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,Ai.prototype)}}function Sc(n){const e=this;let t=!1,i;return function(){return t||(t=!0,i=n.apply(e,arguments)),i}}function VF(n){return typeof n.dispose=="function"&&n.dispose.length===0}function ci(n){if(lt.is(n)){const e=[];for(const t of n)if(t)try{t.dispose()}catch(i){e.push(i)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(n)?[]:n}else if(n)return n.dispose(),n}function lr(...n){return st(()=>ci(n))}function st(n){return{dispose:Sc(()=>{n()})}}class Fe{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{ci(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?Fe.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}}Fe.DISABLE_DISPOSED_WARNING=!1;class oe{constructor(){this._store=new Fe,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}oe.None=Object.freeze({dispose(){}});class bu{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)===null||t===void 0||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)===null||e===void 0||e.dispose(),this._value=void 0}}class WF{constructor(e){this.object=e}dispose(){}}class uS{constructor(){this._store=new Map,this._isDisposed=!1}dispose(){this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{ci(this._store.values())}finally{this._store.clear()}}get(e){return this._store.get(e)}set(e,t,i=!1){var s;this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),i||(s=this._store.get(e))===null||s===void 0||s.dispose(),this._store.set(e,t)}deleteAndDispose(e){var t;(t=this._store.get(e))===null||t===void 0||t.dispose(),this._store.delete(e)}[Symbol.iterator](){return this._store[Symbol.iterator]()}}const HF=globalThis.performance&&typeof globalThis.performance.now=="function";class Oc{static create(e){return new Oc(e)}constructor(e){this._now=HF&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}}var ke;(function(n){n.None=()=>oe.None;function e(A,T){return d(A,()=>{},0,void 0,!0,void 0,T)}n.defer=e;function t(A){return(T,O=null,R)=>{let X=!1,ie;return ie=A(ae=>{if(!X)return ie?ie.dispose():X=!0,T.call(O,ae)},null,R),X&&ie.dispose(),ie}}n.once=t;function i(A,T,O){return c((R,X=null,ie)=>A(ae=>R.call(X,T(ae)),null,ie),O)}n.map=i;function s(A,T,O){return c((R,X=null,ie)=>A(ae=>{T(ae),R.call(X,ae)},null,ie),O)}n.forEach=s;function o(A,T,O){return c((R,X=null,ie)=>A(ae=>T(ae)&&R.call(X,ae),null,ie),O)}n.filter=o;function r(A){return A}n.signal=r;function a(...A){return(T,O=null,R)=>lr(...A.map(X=>X(ie=>T.call(O,ie),null,R)))}n.any=a;function l(A,T,O,R){let X=O;return i(A,ie=>(X=T(X,ie),X),R)}n.reduce=l;function c(A,T){let O;const R={onWillAddFirstListener(){O=A(X.fire,X)},onDidRemoveLastListener(){O==null||O.dispose()}},X=new q(R);return T==null||T.add(X),X.event}function d(A,T,O=100,R=!1,X=!1,ie,ae){let ue,me,de,Ae=0,ye;const be={leakWarningThreshold:ie,onWillAddFirstListener(){ue=A(Bt=>{Ae++,me=T(me,Bt),R&&!de&&(le.fire(me),me=void 0),ye=()=>{const Ri=me;me=void 0,de=void 0,(!R||Ae>1)&&le.fire(Ri),Ae=0},typeof O=="number"?(clearTimeout(de),de=setTimeout(ye,O)):de===void 0&&(de=0,queueMicrotask(ye))})},onWillRemoveListener(){X&&Ae>0&&(ye==null||ye())},onDidRemoveLastListener(){ye=void 0,ue.dispose()}},le=new q(be);return ae==null||ae.add(le),le.event}n.debounce=d;function u(A,T=0,O){return n.debounce(A,(R,X)=>R?(R.push(X),R):[X],T,void 0,!0,void 0,O)}n.accumulate=u;function h(A,T=(R,X)=>R===X,O){let R=!0,X;return o(A,ie=>{const ae=R||!T(ie,X);return R=!1,X=ie,ae},O)}n.latch=h;function f(A,T,O){return[n.filter(A,T,O),n.filter(A,R=>!T(R),O)]}n.split=f;function g(A,T=!1,O=[]){let R=O.slice(),X=A(ue=>{R?R.push(ue):ae.fire(ue)});const ie=()=>{R==null||R.forEach(ue=>ae.fire(ue)),R=null},ae=new q({onWillAddFirstListener(){X||(X=A(ue=>ae.fire(ue)))},onDidAddFirstListener(){R&&(T?setTimeout(ie):ie())},onDidRemoveLastListener(){X&&X.dispose(),X=null}});return ae.event}n.buffer=g;class p{constructor(T){this.event=T,this.disposables=new Fe}map(T){return new p(i(this.event,T,this.disposables))}forEach(T){return new p(s(this.event,T,this.disposables))}filter(T){return new p(o(this.event,T,this.disposables))}reduce(T,O){return new p(l(this.event,T,O,this.disposables))}latch(){return new p(h(this.event,void 0,this.disposables))}debounce(T,O=100,R=!1,X=!1,ie){return new p(d(this.event,T,O,R,X,ie,this.disposables))}on(T,O,R){return this.event(T,O,R)}once(T,O,R){return t(this.event)(T,O,R)}dispose(){this.disposables.dispose()}}function _(A){return new p(A)}n.chain=_;function v(A,T,O=R=>R){const R=(...ue)=>ae.fire(O(...ue)),X=()=>A.on(T,R),ie=()=>A.removeListener(T,R),ae=new q({onWillAddFirstListener:X,onDidRemoveLastListener:ie});return ae.event}n.fromNodeEventEmitter=v;function b(A,T,O=R=>R){const R=(...ue)=>ae.fire(O(...ue)),X=()=>A.addEventListener(T,R),ie=()=>A.removeEventListener(T,R),ae=new q({onWillAddFirstListener:X,onDidRemoveLastListener:ie});return ae.event}n.fromDOMEventEmitter=b;function w(A){return new Promise(T=>t(A)(T))}n.toPromise=w;function C(A){const T=new q;return A.then(O=>{T.fire(O)},()=>{T.fire(void 0)}).finally(()=>{T.dispose()}),T.event}n.fromPromise=C;function S(A,T){return T(void 0),A(O=>T(O))}n.runAndSubscribe=S;function k(A,T){let O=null;function R(ie){O==null||O.dispose(),O=new Fe,T(ie,O)}R(void 0);const X=A(ie=>R(ie));return st(()=>{X.dispose(),O==null||O.dispose()})}n.runAndSubscribeWithStore=k;class L{constructor(T,O){this._observable=T,this._counter=0,this._hasChanged=!1;const R={onWillAddFirstListener:()=>{T.addObserver(this)},onDidRemoveLastListener:()=>{T.removeObserver(this)}};this.emitter=new q(R),O&&O.add(this.emitter)}beginUpdate(T){this._counter++}handlePossibleChange(T){}handleChange(T,O){this._hasChanged=!0}endUpdate(T){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function x(A,T){return new L(A,T).emitter.event}n.fromObservable=x;function I(A){return T=>{let O=0,R=!1;const X={beginUpdate(){O++},endUpdate(){O--,O===0&&(A.reportChanges(),R&&(R=!1,T()))},handlePossibleChange(){},handleChange(){R=!0}};return A.addObserver(X),A.reportChanges(),{dispose(){A.removeObserver(X)}}}}n.fromObservableLight=I})(ke||(ke={}));class vu{constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${e}_${vu._idPool++}`,vu.all.add(this)}start(e){this._stopWatch=new Oc,this.listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}}vu.all=new Set;vu._idPool=0;let $F=-1;class zF{constructor(e,t=Math.random().toString(18).slice(2,5)){this.threshold=e,this.name=t,this._warnCountdown=0}dispose(){var e;(e=this._stacks)===null||e===void 0||e.clear()}check(e,t){const i=this.threshold;if(i<=0||t<i)return;this._stacks||(this._stacks=new Map);const s=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,s+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=i*.5;let o,r=0;for(const[a,l]of this._stacks)(!o||r<l)&&(o=a,r=l);console.warn(`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${r}):`),console.warn(o)}return()=>{const o=this._stacks.get(e.value)||0;this._stacks.set(e.value,o-1)}}}class hS{static create(){var e;return new hS((e=new Error().stack)!==null&&e!==void 0?e:"")}constructor(e){this.value=e}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}class $1{constructor(e){this.value=e}}const UF=2;class q{constructor(e){var t,i,s,o,r;this._size=0,this._options=e,this._leakageMon=!((t=this._options)===null||t===void 0)&&t.leakWarningThreshold?new zF((s=(i=this._options)===null||i===void 0?void 0:i.leakWarningThreshold)!==null&&s!==void 0?s:$F):void 0,this._perfMon=!((o=this._options)===null||o===void 0)&&o._profName?new vu(this._options._profName):void 0,this._deliveryQueue=(r=this._options)===null||r===void 0?void 0:r.deliveryQueue}dispose(){var e,t,i,s;this._disposed||(this._disposed=!0,((e=this._deliveryQueue)===null||e===void 0?void 0:e.current)===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),(i=(t=this._options)===null||t===void 0?void 0:t.onDidRemoveLastListener)===null||i===void 0||i.call(t),(s=this._leakageMon)===null||s===void 0||s.dispose())}get event(){var e;return(e=this._event)!==null&&e!==void 0||(this._event=(t,i,s)=>{var o,r,a,l,c;if(this._leakageMon&&this._size>this._leakageMon.threshold*3)return console.warn(`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far`),oe.None;if(this._disposed)return oe.None;i&&(t=t.bind(i));const d=new $1(t);let u;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(d.stack=hS.create(),u=this._leakageMon.check(d.stack,this._size+1)),this._listeners?this._listeners instanceof $1?((c=this._deliveryQueue)!==null&&c!==void 0||(this._deliveryQueue=new gT),this._listeners=[this._listeners,d]):this._listeners.push(d):((r=(o=this._options)===null||o===void 0?void 0:o.onWillAddFirstListener)===null||r===void 0||r.call(o,this),this._listeners=d,(l=(a=this._options)===null||a===void 0?void 0:a.onDidAddFirstListener)===null||l===void 0||l.call(a,this)),this._size++;const h=st(()=>{u==null||u(),this._removeListener(d)});return s instanceof Fe?s.add(h):Array.isArray(s)&&s.push(h),h}),this._event}_removeListener(e){var t,i,s,o;if((i=(t=this._options)===null||t===void 0?void 0:t.onWillRemoveListener)===null||i===void 0||i.call(t,this),!this._listeners)return;if(this._size===1){this._listeners=void 0,(o=(s=this._options)===null||s===void 0?void 0:s.onDidRemoveLastListener)===null||o===void 0||o.call(s,this),this._size=0;return}const r=this._listeners,a=r.indexOf(e);if(a===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,r[a]=void 0;const l=this._deliveryQueue.current===this;if(this._size*UF<=r.length){let c=0;for(let d=0;d<r.length;d++)r[d]?r[c++]=r[d]:l&&(this._deliveryQueue.end--,c<this._deliveryQueue.i&&this._deliveryQueue.i--);r.length=c}}_deliver(e,t){var i;if(!e)return;const s=((i=this._options)===null||i===void 0?void 0:i.onListenerError)||$t;if(!s){e.value(t);return}try{e.value(t)}catch(o){s(o)}}_deliverQueue(e){const t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){var t,i,s,o;if(!((t=this._deliveryQueue)===null||t===void 0)&&t.current&&(this._deliverQueue(this._deliveryQueue),(i=this._perfMon)===null||i===void 0||i.stop()),(s=this._perfMon)===null||s===void 0||s.start(this._size),this._listeners)if(this._listeners instanceof $1)this._deliver(this._listeners,e);else{const r=this._deliveryQueue;r.enqueue(this,e,this._listeners.length),this._deliverQueue(r)}(o=this._perfMon)===null||o===void 0||o.stop()}hasListeners(){return this._size>0}}const qF=()=>new gT;class gT{constructor(){this.i=-1,this.end=0}enqueue(e,t,i){this.i=0,this.end=i,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}}class If extends q{constructor(e){super(e),this._isPaused=0,this._eventQueue=new Zn,this._mergeFn=e==null?void 0:e.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._size&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}class pT extends If{constructor(e){var t;super(e),this._delay=(t=e.delay)!==null&&t!==void 0?t:100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}class jF extends q{constructor(e){super(e),this._queuedEvents=[],this._mergeFn=e==null?void 0:e.merge}fire(e){this.hasListeners()&&(this._queuedEvents.push(e),this._queuedEvents.length===1&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(t=>super.fire(t)),this._queuedEvents=[]}))}}class fS{constructor(){this.buffers=[]}wrapEvent(e){return(t,i,s)=>e(o=>{const r=this.buffers[this.buffers.length-1];r?r.push(()=>t.call(i,o)):t.call(i,o)},void 0,s)}bufferEvents(e){const t=[];this.buffers.push(t);const i=e();return this.buffers.pop(),t.forEach(s=>s()),i}}class nD{constructor(){this.listening=!1,this.inputEvent=ke.None,this.inputEventListener=oe.None,this.emitter=new q({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}const mT=Object.freeze(function(n,e){const t=setTimeout(n.bind(e),0);return{dispose(){clearTimeout(t)}}});var Bs;(function(n){function e(t){return t===n.None||t===n.Cancelled||t instanceof um?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}n.isCancellationToken=e,n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ke.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:mT})})(Bs||(Bs={}));class um{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?mT:(this._emitter||(this._emitter=new q),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class vl{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new um),this._token}cancel(){this._token?this._token instanceof um&&this._token.cancel():this._token=Bs.Cancelled}dispose(e=!1){var t;e&&this.cancel(),(t=this._parentListener)===null||t===void 0||t.dispose(),this._token?this._token instanceof um&&this._token.dispose():this._token=Bs.None}}class gS{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const hm=new gS,Nv=new gS,Tv=new gS,_T=new Array(230),KF=Object.create(null),GF=Object.create(null),pS=[];for(let n=0;n<=193;n++)pS[n]=-1;(function(){const n="",e=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",n,n],[1,1,"Hyper",0,n,0,n,n,n],[1,2,"Super",0,n,0,n,n,n],[1,3,"Fn",0,n,0,n,n,n],[1,4,"FnLock",0,n,0,n,n,n],[1,5,"Suspend",0,n,0,n,n,n],[1,6,"Resume",0,n,0,n,n,n],[1,7,"Turbo",0,n,0,n,n,n],[1,8,"Sleep",0,n,0,"VK_SLEEP",n,n],[1,9,"WakeUp",0,n,0,n,n,n],[0,10,"KeyA",31,"A",65,"VK_A",n,n],[0,11,"KeyB",32,"B",66,"VK_B",n,n],[0,12,"KeyC",33,"C",67,"VK_C",n,n],[0,13,"KeyD",34,"D",68,"VK_D",n,n],[0,14,"KeyE",35,"E",69,"VK_E",n,n],[0,15,"KeyF",36,"F",70,"VK_F",n,n],[0,16,"KeyG",37,"G",71,"VK_G",n,n],[0,17,"KeyH",38,"H",72,"VK_H",n,n],[0,18,"KeyI",39,"I",73,"VK_I",n,n],[0,19,"KeyJ",40,"J",74,"VK_J",n,n],[0,20,"KeyK",41,"K",75,"VK_K",n,n],[0,21,"KeyL",42,"L",76,"VK_L",n,n],[0,22,"KeyM",43,"M",77,"VK_M",n,n],[0,23,"KeyN",44,"N",78,"VK_N",n,n],[0,24,"KeyO",45,"O",79,"VK_O",n,n],[0,25,"KeyP",46,"P",80,"VK_P",n,n],[0,26,"KeyQ",47,"Q",81,"VK_Q",n,n],[0,27,"KeyR",48,"R",82,"VK_R",n,n],[0,28,"KeyS",49,"S",83,"VK_S",n,n],[0,29,"KeyT",50,"T",84,"VK_T",n,n],[0,30,"KeyU",51,"U",85,"VK_U",n,n],[0,31,"KeyV",52,"V",86,"VK_V",n,n],[0,32,"KeyW",53,"W",87,"VK_W",n,n],[0,33,"KeyX",54,"X",88,"VK_X",n,n],[0,34,"KeyY",55,"Y",89,"VK_Y",n,n],[0,35,"KeyZ",56,"Z",90,"VK_Z",n,n],[0,36,"Digit1",22,"1",49,"VK_1",n,n],[0,37,"Digit2",23,"2",50,"VK_2",n,n],[0,38,"Digit3",24,"3",51,"VK_3",n,n],[0,39,"Digit4",25,"4",52,"VK_4",n,n],[0,40,"Digit5",26,"5",53,"VK_5",n,n],[0,41,"Digit6",27,"6",54,"VK_6",n,n],[0,42,"Digit7",28,"7",55,"VK_7",n,n],[0,43,"Digit8",29,"8",56,"VK_8",n,n],[0,44,"Digit9",30,"9",57,"VK_9",n,n],[0,45,"Digit0",21,"0",48,"VK_0",n,n],[1,46,"Enter",3,"Enter",13,"VK_RETURN",n,n],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",n,n],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",n,n],[1,49,"Tab",2,"Tab",9,"VK_TAB",n,n],[1,50,"Space",10,"Space",32,"VK_SPACE",n,n],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,n,0,n,n,n],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",n,n],[1,64,"F1",59,"F1",112,"VK_F1",n,n],[1,65,"F2",60,"F2",113,"VK_F2",n,n],[1,66,"F3",61,"F3",114,"VK_F3",n,n],[1,67,"F4",62,"F4",115,"VK_F4",n,n],[1,68,"F5",63,"F5",116,"VK_F5",n,n],[1,69,"F6",64,"F6",117,"VK_F6",n,n],[1,70,"F7",65,"F7",118,"VK_F7",n,n],[1,71,"F8",66,"F8",119,"VK_F8",n,n],[1,72,"F9",67,"F9",120,"VK_F9",n,n],[1,73,"F10",68,"F10",121,"VK_F10",n,n],[1,74,"F11",69,"F11",122,"VK_F11",n,n],[1,75,"F12",70,"F12",123,"VK_F12",n,n],[1,76,"PrintScreen",0,n,0,n,n,n],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",n,n],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",n,n],[1,79,"Insert",19,"Insert",45,"VK_INSERT",n,n],[1,80,"Home",14,"Home",36,"VK_HOME",n,n],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",n,n],[1,82,"Delete",20,"Delete",46,"VK_DELETE",n,n],[1,83,"End",13,"End",35,"VK_END",n,n],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",n,n],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",n],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",n],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",n],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",n],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",n,n],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",n,n],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",n,n],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",n,n],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",n,n],[1,94,"NumpadEnter",3,n,0,n,n,n],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",n,n],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",n,n],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",n,n],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",n,n],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",n,n],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",n,n],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",n,n],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",n,n],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",n,n],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",n,n],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",n,n],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",n,n],[1,107,"ContextMenu",58,"ContextMenu",93,n,n,n],[1,108,"Power",0,n,0,n,n,n],[1,109,"NumpadEqual",0,n,0,n,n,n],[1,110,"F13",71,"F13",124,"VK_F13",n,n],[1,111,"F14",72,"F14",125,"VK_F14",n,n],[1,112,"F15",73,"F15",126,"VK_F15",n,n],[1,113,"F16",74,"F16",127,"VK_F16",n,n],[1,114,"F17",75,"F17",128,"VK_F17",n,n],[1,115,"F18",76,"F18",129,"VK_F18",n,n],[1,116,"F19",77,"F19",130,"VK_F19",n,n],[1,117,"F20",78,"F20",131,"VK_F20",n,n],[1,118,"F21",79,"F21",132,"VK_F21",n,n],[1,119,"F22",80,"F22",133,"VK_F22",n,n],[1,120,"F23",81,"F23",134,"VK_F23",n,n],[1,121,"F24",82,"F24",135,"VK_F24",n,n],[1,122,"Open",0,n,0,n,n,n],[1,123,"Help",0,n,0,n,n,n],[1,124,"Select",0,n,0,n,n,n],[1,125,"Again",0,n,0,n,n,n],[1,126,"Undo",0,n,0,n,n,n],[1,127,"Cut",0,n,0,n,n,n],[1,128,"Copy",0,n,0,n,n,n],[1,129,"Paste",0,n,0,n,n,n],[1,130,"Find",0,n,0,n,n,n],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",n,n],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",n,n],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",n,n],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",n,n],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",n,n],[1,136,"KanaMode",0,n,0,n,n,n],[0,137,"IntlYen",0,n,0,n,n,n],[1,138,"Convert",0,n,0,n,n,n],[1,139,"NonConvert",0,n,0,n,n,n],[1,140,"Lang1",0,n,0,n,n,n],[1,141,"Lang2",0,n,0,n,n,n],[1,142,"Lang3",0,n,0,n,n,n],[1,143,"Lang4",0,n,0,n,n,n],[1,144,"Lang5",0,n,0,n,n,n],[1,145,"Abort",0,n,0,n,n,n],[1,146,"Props",0,n,0,n,n,n],[1,147,"NumpadParenLeft",0,n,0,n,n,n],[1,148,"NumpadParenRight",0,n,0,n,n,n],[1,149,"NumpadBackspace",0,n,0,n,n,n],[1,150,"NumpadMemoryStore",0,n,0,n,n,n],[1,151,"NumpadMemoryRecall",0,n,0,n,n,n],[1,152,"NumpadMemoryClear",0,n,0,n,n,n],[1,153,"NumpadMemoryAdd",0,n,0,n,n,n],[1,154,"NumpadMemorySubtract",0,n,0,n,n,n],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",n,n],[1,156,"NumpadClearEntry",0,n,0,n,n,n],[1,0,n,5,"Ctrl",17,"VK_CONTROL",n,n],[1,0,n,4,"Shift",16,"VK_SHIFT",n,n],[1,0,n,6,"Alt",18,"VK_MENU",n,n],[1,0,n,57,"Meta",91,"VK_COMMAND",n,n],[1,157,"ControlLeft",5,n,0,"VK_LCONTROL",n,n],[1,158,"ShiftLeft",4,n,0,"VK_LSHIFT",n,n],[1,159,"AltLeft",6,n,0,"VK_LMENU",n,n],[1,160,"MetaLeft",57,n,0,"VK_LWIN",n,n],[1,161,"ControlRight",5,n,0,"VK_RCONTROL",n,n],[1,162,"ShiftRight",4,n,0,"VK_RSHIFT",n,n],[1,163,"AltRight",6,n,0,"VK_RMENU",n,n],[1,164,"MetaRight",57,n,0,"VK_RWIN",n,n],[1,165,"BrightnessUp",0,n,0,n,n,n],[1,166,"BrightnessDown",0,n,0,n,n,n],[1,167,"MediaPlay",0,n,0,n,n,n],[1,168,"MediaRecord",0,n,0,n,n,n],[1,169,"MediaFastForward",0,n,0,n,n,n],[1,170,"MediaRewind",0,n,0,n,n,n],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",n,n],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",n,n],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",n,n],[1,174,"Eject",0,n,0,n,n,n],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",n,n],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",n,n],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",n,n],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",n,n],[1,179,"LaunchApp1",0,n,0,"VK_MEDIA_LAUNCH_APP1",n,n],[1,180,"SelectTask",0,n,0,n,n,n],[1,181,"LaunchScreenSaver",0,n,0,n,n,n],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",n,n],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",n,n],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",n,n],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",n,n],[1,186,"BrowserStop",0,n,0,"VK_BROWSER_STOP",n,n],[1,187,"BrowserRefresh",0,n,0,"VK_BROWSER_REFRESH",n,n],[1,188,"BrowserFavorites",0,n,0,"VK_BROWSER_FAVORITES",n,n],[1,189,"ZoomToggle",0,n,0,n,n,n],[1,190,"MailReply",0,n,0,n,n,n],[1,191,"MailForward",0,n,0,n,n,n],[1,192,"MailSend",0,n,0,n,n,n],[1,0,n,114,"KeyInComposition",229,n,n,n],[1,0,n,116,"ABNT_C2",194,"VK_ABNT_C2",n,n],[1,0,n,96,"OEM_8",223,"VK_OEM_8",n,n],[1,0,n,0,n,0,"VK_KANA",n,n],[1,0,n,0,n,0,"VK_HANGUL",n,n],[1,0,n,0,n,0,"VK_JUNJA",n,n],[1,0,n,0,n,0,"VK_FINAL",n,n],[1,0,n,0,n,0,"VK_HANJA",n,n],[1,0,n,0,n,0,"VK_KANJI",n,n],[1,0,n,0,n,0,"VK_CONVERT",n,n],[1,0,n,0,n,0,"VK_NONCONVERT",n,n],[1,0,n,0,n,0,"VK_ACCEPT",n,n],[1,0,n,0,n,0,"VK_MODECHANGE",n,n],[1,0,n,0,n,0,"VK_SELECT",n,n],[1,0,n,0,n,0,"VK_PRINT",n,n],[1,0,n,0,n,0,"VK_EXECUTE",n,n],[1,0,n,0,n,0,"VK_SNAPSHOT",n,n],[1,0,n,0,n,0,"VK_HELP",n,n],[1,0,n,0,n,0,"VK_APPS",n,n],[1,0,n,0,n,0,"VK_PROCESSKEY",n,n],[1,0,n,0,n,0,"VK_PACKET",n,n],[1,0,n,0,n,0,"VK_DBE_SBCSCHAR",n,n],[1,0,n,0,n,0,"VK_DBE_DBCSCHAR",n,n],[1,0,n,0,n,0,"VK_ATTN",n,n],[1,0,n,0,n,0,"VK_CRSEL",n,n],[1,0,n,0,n,0,"VK_EXSEL",n,n],[1,0,n,0,n,0,"VK_EREOF",n,n],[1,0,n,0,n,0,"VK_PLAY",n,n],[1,0,n,0,n,0,"VK_ZOOM",n,n],[1,0,n,0,n,0,"VK_NONAME",n,n],[1,0,n,0,n,0,"VK_PA1",n,n],[1,0,n,0,n,0,"VK_OEM_CLEAR",n,n]],t=[],i=[];for(const s of e){const[o,r,a,l,c,d,u,h,f]=s;if(i[r]||(i[r]=!0,KF[a]=r,GF[a.toLowerCase()]=r,o&&(pS[r]=l)),!t[l]){if(t[l]=!0,!c)throw new Error(`String representation missing for key code ${l} around scan code ${a}`);hm.define(l,c),Nv.define(l,h||c),Tv.define(l,f||h||c)}d&&(_T[d]=l)}})();var Pr;(function(n){function e(a){return hm.keyCodeToStr(a)}n.toString=e;function t(a){return hm.strToKeyCode(a)}n.fromString=t;function i(a){return Nv.keyCodeToStr(a)}n.toUserSettingsUS=i;function s(a){return Tv.keyCodeToStr(a)}n.toUserSettingsGeneral=s;function o(a){return Nv.strToKeyCode(a)||Tv.strToKeyCode(a)}n.fromUserSettings=o;function r(a){if(a>=98&&a<=113)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return hm.keyCodeToStr(a)}n.toElectronAccelerator=r})(Pr||(Pr={}));function ZF(n,e){const t=(e&65535)<<16>>>0;return(n|t)>>>0}let Gd;if(typeof to.vscode<"u"&&typeof to.vscode.process<"u"){const n=to.vscode.process;Gd={get platform(){return n.platform},get arch(){return n.arch},get env(){return n.env},cwd(){return n.cwd()}}}else typeof process<"u"?Gd={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:Gd={get platform(){return is?"win32":gt?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const Km=Gd.cwd,YF=Gd.env,XF=Gd.platform,QF=65,JF=97,e6=90,t6=122,Xa=46,ln=47,rs=92,ca=58,i6=63;class bT extends Error{constructor(e,t,i){let s;typeof t=="string"&&t.indexOf("not ")===0?(s="must not be",t=t.replace(/^not /,"")):s="must be";const o=e.indexOf(".")!==-1?"property":"argument";let r=`The "${e}" ${o} ${s} of type ${t}`;r+=`. Received type ${typeof i}`,super(r),this.code="ERR_INVALID_ARG_TYPE"}}function n6(n,e){if(n===null||typeof n!="object")throw new bT(e,"Object",n)}function Ei(n,e){if(typeof n!="string")throw new bT(e,"string",n)}const wl=XF==="win32";function wt(n){return n===ln||n===rs}function Av(n){return n===ln}function da(n){return n>=QF&&n<=e6||n>=JF&&n<=t6}function Gm(n,e,t,i){let s="",o=0,r=-1,a=0,l=0;for(let c=0;c<=n.length;++c){if(c<n.length)l=n.charCodeAt(c);else{if(i(l))break;l=ln}if(i(l)){if(!(r===c-1||a===1))if(a===2){if(s.length<2||o!==2||s.charCodeAt(s.length-1)!==Xa||s.charCodeAt(s.length-2)!==Xa){if(s.length>2){const d=s.lastIndexOf(t);d===-1?(s="",o=0):(s=s.slice(0,d),o=s.length-1-s.lastIndexOf(t)),r=c,a=0;continue}else if(s.length!==0){s="",o=0,r=c,a=0;continue}}e&&(s+=s.length>0?`${t}..`:"..",o=2)}else s.length>0?s+=`${t}${n.slice(r+1,c)}`:s=n.slice(r+1,c),o=c-r-1;r=c,a=0}else l===Xa&&a!==-1?++a:a=-1}return s}function vT(n,e){n6(e,"pathObject");const t=e.dir||e.root,i=e.base||`${e.name||""}${e.ext||""}`;return t?t===e.root?`${t}${i}`:`${t}${n}${i}`:i}const Yn={resolve(...n){let e="",t="",i=!1;for(let s=n.length-1;s>=-1;s--){let o;if(s>=0){if(o=n[s],Ei(o,"path"),o.length===0)continue}else e.length===0?o=Km():(o=YF[`=${e}`]||Km(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===rs)&&(o=`${e}\\`));const r=o.length;let a=0,l="",c=!1;const d=o.charCodeAt(0);if(r===1)wt(d)&&(a=1,c=!0);else if(wt(d))if(c=!0,wt(o.charCodeAt(1))){let u=2,h=u;for(;u<r&&!wt(o.charCodeAt(u));)u++;if(u<r&&u!==h){const f=o.slice(h,u);for(h=u;u<r&&wt(o.charCodeAt(u));)u++;if(u<r&&u!==h){for(h=u;u<r&&!wt(o.charCodeAt(u));)u++;(u===r||u!==h)&&(l=`\\\\${f}\\${o.slice(h,u)}`,a=u)}}}else a=1;else da(d)&&o.charCodeAt(1)===ca&&(l=o.slice(0,2),a=2,r>2&&wt(o.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(i){if(e.length>0)break}else if(t=`${o.slice(a)}\\${t}`,i=c,c&&e.length>0)break}return t=Gm(t,!i,"\\",wt),i?`${e}\\${t}`:`${e}${t}`||"."},normalize(n){Ei(n,"path");const e=n.length;if(e===0)return".";let t=0,i,s=!1;const o=n.charCodeAt(0);if(e===1)return Av(o)?"\\":n;if(wt(o))if(s=!0,wt(n.charCodeAt(1))){let a=2,l=a;for(;a<e&&!wt(n.charCodeAt(a));)a++;if(a<e&&a!==l){const c=n.slice(l,a);for(l=a;a<e&&wt(n.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!wt(n.charCodeAt(a));)a++;if(a===e)return`\\\\${c}\\${n.slice(l)}\\`;a!==l&&(i=`\\\\${c}\\${n.slice(l,a)}`,t=a)}}}else t=1;else da(o)&&n.charCodeAt(1)===ca&&(i=n.slice(0,2),t=2,e>2&&wt(n.charCodeAt(2))&&(s=!0,t=3));let r=t<e?Gm(n.slice(t),!s,"\\",wt):"";return r.length===0&&!s&&(r="."),r.length>0&&wt(n.charCodeAt(e-1))&&(r+="\\"),i===void 0?s?`\\${r}`:r:s?`${i}\\${r}`:`${i}${r}`},isAbsolute(n){Ei(n,"path");const e=n.length;if(e===0)return!1;const t=n.charCodeAt(0);return wt(t)||e>2&&da(t)&&n.charCodeAt(1)===ca&&wt(n.charCodeAt(2))},join(...n){if(n.length===0)return".";let e,t;for(let o=0;o<n.length;++o){const r=n[o];Ei(r,"path"),r.length>0&&(e===void 0?e=t=r:e+=`\\${r}`)}if(e===void 0)return".";let i=!0,s=0;if(typeof t=="string"&&wt(t.charCodeAt(0))){++s;const o=t.length;o>1&&wt(t.charCodeAt(1))&&(++s,o>2&&(wt(t.charCodeAt(2))?++s:i=!1))}if(i){for(;s<e.length&&wt(e.charCodeAt(s));)s++;s>=2&&(e=`\\${e.slice(s)}`)}return Yn.normalize(e)},relative(n,e){if(Ei(n,"from"),Ei(e,"to"),n===e)return"";const t=Yn.resolve(n),i=Yn.resolve(e);if(t===i||(n=t.toLowerCase(),e=i.toLowerCase(),n===e))return"";let s=0;for(;s<n.length&&n.charCodeAt(s)===rs;)s++;let o=n.length;for(;o-1>s&&n.charCodeAt(o-1)===rs;)o--;const r=o-s;let a=0;for(;a<e.length&&e.charCodeAt(a)===rs;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===rs;)l--;const c=l-a,d=r<c?r:c;let u=-1,h=0;for(;h<d;h++){const g=n.charCodeAt(s+h);if(g!==e.charCodeAt(a+h))break;g===rs&&(u=h)}if(h!==d){if(u===-1)return i}else{if(c>d){if(e.charCodeAt(a+h)===rs)return i.slice(a+h+1);if(h===2)return i.slice(a+h)}r>d&&(n.charCodeAt(s+h)===rs?u=h:h===2&&(u=3)),u===-1&&(u=0)}let f="";for(h=s+u+1;h<=o;++h)(h===o||n.charCodeAt(h)===rs)&&(f+=f.length===0?"..":"\\..");return a+=u,f.length>0?`${f}${i.slice(a,l)}`:(i.charCodeAt(a)===rs&&++a,i.slice(a,l))},toNamespacedPath(n){if(typeof n!="string"||n.length===0)return n;const e=Yn.resolve(n);if(e.length<=2)return n;if(e.charCodeAt(0)===rs){if(e.charCodeAt(1)===rs){const t=e.charCodeAt(2);if(t!==i6&&t!==Xa)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(da(e.charCodeAt(0))&&e.charCodeAt(1)===ca&&e.charCodeAt(2)===rs)return`\\\\?\\${e}`;return n},dirname(n){Ei(n,"path");const e=n.length;if(e===0)return".";let t=-1,i=0;const s=n.charCodeAt(0);if(e===1)return wt(s)?n:".";if(wt(s)){if(t=i=1,wt(n.charCodeAt(1))){let a=2,l=a;for(;a<e&&!wt(n.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&wt(n.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!wt(n.charCodeAt(a));)a++;if(a===e)return n;a!==l&&(t=i=a+1)}}}}else da(s)&&n.charCodeAt(1)===ca&&(t=e>2&&wt(n.charCodeAt(2))?3:2,i=t);let o=-1,r=!0;for(let a=e-1;a>=i;--a)if(wt(n.charCodeAt(a))){if(!r){o=a;break}}else r=!1;if(o===-1){if(t===-1)return".";o=t}return n.slice(0,o)},basename(n,e){e!==void 0&&Ei(e,"ext"),Ei(n,"path");let t=0,i=-1,s=!0,o;if(n.length>=2&&da(n.charCodeAt(0))&&n.charCodeAt(1)===ca&&(t=2),e!==void 0&&e.length>0&&e.length<=n.length){if(e===n)return"";let r=e.length-1,a=-1;for(o=n.length-1;o>=t;--o){const l=n.charCodeAt(o);if(wt(l)){if(!s){t=o+1;break}}else a===-1&&(s=!1,a=o+1),r>=0&&(l===e.charCodeAt(r)?--r===-1&&(i=o):(r=-1,i=a))}return t===i?i=a:i===-1&&(i=n.length),n.slice(t,i)}for(o=n.length-1;o>=t;--o)if(wt(n.charCodeAt(o))){if(!s){t=o+1;break}}else i===-1&&(s=!1,i=o+1);return i===-1?"":n.slice(t,i)},extname(n){Ei(n,"path");let e=0,t=-1,i=0,s=-1,o=!0,r=0;n.length>=2&&n.charCodeAt(1)===ca&&da(n.charCodeAt(0))&&(e=i=2);for(let a=n.length-1;a>=e;--a){const l=n.charCodeAt(a);if(wt(l)){if(!o){i=a+1;break}continue}s===-1&&(o=!1,s=a+1),l===Xa?t===-1?t=a:r!==1&&(r=1):t!==-1&&(r=-1)}return t===-1||s===-1||r===0||r===1&&t===s-1&&t===i+1?"":n.slice(t,s)},format:vT.bind(null,"\\"),parse(n){Ei(n,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;const t=n.length;let i=0,s=n.charCodeAt(0);if(t===1)return wt(s)?(e.root=e.dir=n,e):(e.base=e.name=n,e);if(wt(s)){if(i=1,wt(n.charCodeAt(1))){let u=2,h=u;for(;u<t&&!wt(n.charCodeAt(u));)u++;if(u<t&&u!==h){for(h=u;u<t&&wt(n.charCodeAt(u));)u++;if(u<t&&u!==h){for(h=u;u<t&&!wt(n.charCodeAt(u));)u++;u===t?i=u:u!==h&&(i=u+1)}}}}else if(da(s)&&n.charCodeAt(1)===ca){if(t<=2)return e.root=e.dir=n,e;if(i=2,wt(n.charCodeAt(2))){if(t===3)return e.root=e.dir=n,e;i=3}}i>0&&(e.root=n.slice(0,i));let o=-1,r=i,a=-1,l=!0,c=n.length-1,d=0;for(;c>=i;--c){if(s=n.charCodeAt(c),wt(s)){if(!l){r=c+1;break}continue}a===-1&&(l=!1,a=c+1),s===Xa?o===-1?o=c:d!==1&&(d=1):o!==-1&&(d=-1)}return a!==-1&&(o===-1||d===0||d===1&&o===a-1&&o===r+1?e.base=e.name=n.slice(r,a):(e.name=n.slice(r,o),e.base=n.slice(r,a),e.ext=n.slice(o,a))),r>0&&r!==i?e.dir=n.slice(0,r-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},s6=(()=>{if(wl){const n=/\\/g;return()=>{const e=Km().replace(n,"/");return e.slice(e.indexOf("/"))}}return()=>Km()})(),fi={resolve(...n){let e="",t=!1;for(let i=n.length-1;i>=-1&&!t;i--){const s=i>=0?n[i]:s6();Ei(s,"path"),s.length!==0&&(e=`${s}/${e}`,t=s.charCodeAt(0)===ln)}return e=Gm(e,!t,"/",Av),t?`/${e}`:e.length>0?e:"."},normalize(n){if(Ei(n,"path"),n.length===0)return".";const e=n.charCodeAt(0)===ln,t=n.charCodeAt(n.length-1)===ln;return n=Gm(n,!e,"/",Av),n.length===0?e?"/":t?"./":".":(t&&(n+="/"),e?`/${n}`:n)},isAbsolute(n){return Ei(n,"path"),n.length>0&&n.charCodeAt(0)===ln},join(...n){if(n.length===0)return".";let e;for(let t=0;t<n.length;++t){const i=n[t];Ei(i,"path"),i.length>0&&(e===void 0?e=i:e+=`/${i}`)}return e===void 0?".":fi.normalize(e)},relative(n,e){if(Ei(n,"from"),Ei(e,"to"),n===e||(n=fi.resolve(n),e=fi.resolve(e),n===e))return"";const t=1,i=n.length,s=i-t,o=1,r=e.length-o,a=s<r?s:r;let l=-1,c=0;for(;c<a;c++){const u=n.charCodeAt(t+c);if(u!==e.charCodeAt(o+c))break;u===ln&&(l=c)}if(c===a)if(r>a){if(e.charCodeAt(o+c)===ln)return e.slice(o+c+1);if(c===0)return e.slice(o+c)}else s>a&&(n.charCodeAt(t+c)===ln?l=c:c===0&&(l=0));let d="";for(c=t+l+1;c<=i;++c)(c===i||n.charCodeAt(c)===ln)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(o+l)}`},toNamespacedPath(n){return n},dirname(n){if(Ei(n,"path"),n.length===0)return".";const e=n.charCodeAt(0)===ln;let t=-1,i=!0;for(let s=n.length-1;s>=1;--s)if(n.charCodeAt(s)===ln){if(!i){t=s;break}}else i=!1;return t===-1?e?"/":".":e&&t===1?"//":n.slice(0,t)},basename(n,e){e!==void 0&&Ei(e,"ext"),Ei(n,"path");let t=0,i=-1,s=!0,o;if(e!==void 0&&e.length>0&&e.length<=n.length){if(e===n)return"";let r=e.length-1,a=-1;for(o=n.length-1;o>=0;--o){const l=n.charCodeAt(o);if(l===ln){if(!s){t=o+1;break}}else a===-1&&(s=!1,a=o+1),r>=0&&(l===e.charCodeAt(r)?--r===-1&&(i=o):(r=-1,i=a))}return t===i?i=a:i===-1&&(i=n.length),n.slice(t,i)}for(o=n.length-1;o>=0;--o)if(n.charCodeAt(o)===ln){if(!s){t=o+1;break}}else i===-1&&(s=!1,i=o+1);return i===-1?"":n.slice(t,i)},extname(n){Ei(n,"path");let e=-1,t=0,i=-1,s=!0,o=0;for(let r=n.length-1;r>=0;--r){const a=n.charCodeAt(r);if(a===ln){if(!s){t=r+1;break}continue}i===-1&&(s=!1,i=r+1),a===Xa?e===-1?e=r:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||i===-1||o===0||o===1&&e===i-1&&e===t+1?"":n.slice(e,i)},format:vT.bind(null,"/"),parse(n){Ei(n,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;const t=n.charCodeAt(0)===ln;let i;t?(e.root="/",i=1):i=0;let s=-1,o=0,r=-1,a=!0,l=n.length-1,c=0;for(;l>=i;--l){const d=n.charCodeAt(l);if(d===ln){if(!a){o=l+1;break}continue}r===-1&&(a=!1,r=l+1),d===Xa?s===-1?s=l:c!==1&&(c=1):s!==-1&&(c=-1)}if(r!==-1){const d=o===0&&t?1:o;s===-1||c===0||c===1&&s===r-1&&s===o+1?e.base=e.name=n.slice(d,r):(e.name=n.slice(d,s),e.base=n.slice(d,r),e.ext=n.slice(s,r))}return o>0?e.dir=n.slice(0,o-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};fi.win32=Yn.win32=Yn;fi.posix=Yn.posix=fi;const wT=wl?Yn.normalize:fi.normalize,o6=wl?Yn.resolve:fi.resolve,r6=wl?Yn.relative:fi.relative,a6=wl?Yn.dirname:fi.dirname,CT=wl?Yn.basename:fi.basename,l6=wl?Yn.extname:fi.extname,Qa=wl?Yn.sep:fi.sep,c6=/^\w[\w\d+.-]*$/,d6=/^\//,u6=/^\/\//;function h6(n,e){if(!n.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${n.authority}", path: "${n.path}", query: "${n.query}", fragment: "${n.fragment}"}`);if(n.scheme&&!c6.test(n.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(n.path){if(n.authority){if(!d6.test(n.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(u6.test(n.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function f6(n,e){return!n&&!e?"file":n}function g6(n,e){switch(n){case"https":case"http":case"file":e?e[0]!==vo&&(e=vo+e):e=vo;break}return e}const ii="",vo="/",p6=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class nt{static isUri(e){return e instanceof nt?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,t,i,s,o,r=!1){typeof e=="object"?(this.scheme=e.scheme||ii,this.authority=e.authority||ii,this.path=e.path||ii,this.query=e.query||ii,this.fragment=e.fragment||ii):(this.scheme=f6(e,r),this.authority=t||ii,this.path=g6(this.scheme,i||ii),this.query=s||ii,this.fragment=o||ii,h6(this,r))}get fsPath(){return Zm(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:i,path:s,query:o,fragment:r}=e;return t===void 0?t=this.scheme:t===null&&(t=ii),i===void 0?i=this.authority:i===null&&(i=ii),s===void 0?s=this.path:s===null&&(s=ii),o===void 0?o=this.query:o===null&&(o=ii),r===void 0?r=this.fragment:r===null&&(r=ii),t===this.scheme&&i===this.authority&&s===this.path&&o===this.query&&r===this.fragment?this:new ed(t,i,s,o,r)}static parse(e,t=!1){const i=p6.exec(e);return i?new ed(i[2]||ii,fp(i[4]||ii),fp(i[5]||ii),fp(i[7]||ii),fp(i[9]||ii),t):new ed(ii,ii,ii,ii,ii)}static file(e){let t=ii;if(is&&(e=e.replace(/\\/g,vo)),e[0]===vo&&e[1]===vo){const i=e.indexOf(vo,2);i===-1?(t=e.substring(2),e=vo):(t=e.substring(2,i),e=e.substring(i)||vo)}return new ed("file",t,e,ii,ii)}static from(e,t){return new ed(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let i;return is&&e.scheme==="file"?i=nt.file(Yn.join(Zm(e,!0),...t)).path:i=fi.join(e.path,...t),e.with({path:i})}toString(e=!1){return Mv(this,e)}toJSON(){return this}static revive(e){var t,i;if(e){if(e instanceof nt)return e;{const s=new ed(e);return s._formatted=(t=e.external)!==null&&t!==void 0?t:null,s._fsPath=e._sep===yT&&(i=e.fsPath)!==null&&i!==void 0?i:null,s}}else return e}}const yT=is?1:void 0;class ed extends nt{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=Zm(this,!1)),this._fsPath}toString(e=!1){return e?Mv(this,!0):(this._formatted||(this._formatted=Mv(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=yT),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}const ST={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function sD(n,e,t){let i,s=-1;for(let o=0;o<n.length;o++){const r=n.charCodeAt(o);if(r>=97&&r<=122||r>=65&&r<=90||r>=48&&r<=57||r===45||r===46||r===95||r===126||e&&r===47||t&&r===91||t&&r===93||t&&r===58)s!==-1&&(i+=encodeURIComponent(n.substring(s,o)),s=-1),i!==void 0&&(i+=n.charAt(o));else{i===void 0&&(i=n.substr(0,o));const a=ST[r];a!==void 0?(s!==-1&&(i+=encodeURIComponent(n.substring(s,o)),s=-1),i+=a):s===-1&&(s=o)}}return s!==-1&&(i+=encodeURIComponent(n.substring(s))),i!==void 0?i:n}function m6(n){let e;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i===35||i===63?(e===void 0&&(e=n.substr(0,t)),e+=ST[i]):e!==void 0&&(e+=n[t])}return e!==void 0?e:n}function Zm(n,e){let t;return n.authority&&n.path.length>1&&n.scheme==="file"?t=`//${n.authority}${n.path}`:n.path.charCodeAt(0)===47&&(n.path.charCodeAt(1)>=65&&n.path.charCodeAt(1)<=90||n.path.charCodeAt(1)>=97&&n.path.charCodeAt(1)<=122)&&n.path.charCodeAt(2)===58?e?t=n.path.substr(1):t=n.path[1].toLowerCase()+n.path.substr(2):t=n.path,is&&(t=t.replace(/\//g,"\\")),t}function Mv(n,e){const t=e?m6:sD;let i="",{scheme:s,authority:o,path:r,query:a,fragment:l}=n;if(s&&(i+=s,i+=":"),(o||s==="file")&&(i+=vo,i+=vo),o){let c=o.indexOf("@");if(c!==-1){const d=o.substr(0,c);o=o.substr(c+1),c=d.lastIndexOf(":"),c===-1?i+=t(d,!1,!1):(i+=t(d.substr(0,c),!1,!1),i+=":",i+=t(d.substr(c+1),!1,!0)),i+="@"}o=o.toLowerCase(),c=o.lastIndexOf(":"),c===-1?i+=t(o,!1,!0):(i+=t(o.substr(0,c),!1,!0),i+=o.substr(c))}if(r){if(r.length>=3&&r.charCodeAt(0)===47&&r.charCodeAt(2)===58){const c=r.charCodeAt(1);c>=65&&c<=90&&(r=`/${String.fromCharCode(c+32)}:${r.substr(3)}`)}else if(r.length>=2&&r.charCodeAt(1)===58){const c=r.charCodeAt(0);c>=65&&c<=90&&(r=`${String.fromCharCode(c+32)}:${r.substr(2)}`)}i+=t(r,!0,!1)}return a&&(i+="?",i+=t(a,!1,!1)),l&&(i+="#",i+=e?l:sD(l,!1,!1)),i}function LT(n){try{return decodeURIComponent(n)}catch{return n.length>3?n.substr(0,3)+LT(n.substr(3)):n}}const oD=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function fp(n){return n.match(oD)?n.replace(oD,e=>LT(e)):n}class Y{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new Y(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return Y.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return Y.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return Y.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){const i=e.lineNumber|0,s=t.lineNumber|0;if(i===s){const o=e.column|0,r=t.column|0;return o-r}return i-s}clone(){return new Y(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new Y(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}}let $=class Pi{constructor(e,t,i,s){e>i||e===i&&t>s?(this.startLineNumber=i,this.startColumn=s,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=s)}isEmpty(){return Pi.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return Pi.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return Pi.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return Pi.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return Pi.plusRange(this,e)}static plusRange(e,t){let i,s,o,r;return t.startLineNumber<e.startLineNumber?(i=t.startLineNumber,s=t.startColumn):t.startLineNumber===e.startLineNumber?(i=t.startLineNumber,s=Math.min(t.startColumn,e.startColumn)):(i=e.startLineNumber,s=e.startColumn),t.endLineNumber>e.endLineNumber?(o=t.endLineNumber,r=t.endColumn):t.endLineNumber===e.endLineNumber?(o=t.endLineNumber,r=Math.max(t.endColumn,e.endColumn)):(o=e.endLineNumber,r=e.endColumn),new Pi(i,s,o,r)}intersectRanges(e){return Pi.intersectRanges(this,e)}static intersectRanges(e,t){let i=e.startLineNumber,s=e.startColumn,o=e.endLineNumber,r=e.endColumn;const a=t.startLineNumber,l=t.startColumn,c=t.endLineNumber,d=t.endColumn;return i<a?(i=a,s=l):i===a&&(s=Math.max(s,l)),o>c?(o=c,r=d):o===c&&(r=Math.min(r,d)),i>o||i===o&&s>r?null:new Pi(i,s,o,r)}equalsRange(e){return Pi.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t?!0:!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return Pi.getEndPosition(this)}static getEndPosition(e){return new Y(e.endLineNumber,e.endColumn)}getStartPosition(){return Pi.getStartPosition(this)}static getStartPosition(e){return new Y(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new Pi(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new Pi(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return Pi.collapseToStart(this)}static collapseToStart(e){return new Pi(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return Pi.collapseToEnd(this)}static collapseToEnd(e){return new Pi(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new Pi(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e,t=e){return new Pi(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new Pi(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const o=e.startLineNumber|0,r=t.startLineNumber|0;if(o===r){const a=e.startColumn|0,l=t.startColumn|0;if(a===l){const c=e.endLineNumber|0,d=t.endLineNumber|0;if(c===d){const u=e.endColumn|0,h=t.endColumn|0;return u-h}return c-d}return a-l}return o-r}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};class at extends ${constructor(e,t,i,s){super(e,t,i,s),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=i,this.positionColumn=s}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return at.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new at(this.startLineNumber,this.startColumn,e,t):new at(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new Y(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new Y(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new at(e,t,this.endLineNumber,this.endColumn):new at(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new at(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new at(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new at(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new at(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let i=0,s=e.length;i<s;i++)if(!this.selectionsEqual(e[i],t[i]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,i,s,o){return o===0?new at(e,t,i,s):new at(i,s,e,t)}}const Rv=Object.create(null);function y(n,e){if(Qn(e)){const t=Rv[e];if(t===void 0)throw new Error(`${n} references an unknown codicon: ${e}`);e=t}return Rv[n]=e,{id:n}}function xT(){return Rv}const we={add:y("add",6e4),plus:y("plus",6e4),gistNew:y("gist-new",6e4),repoCreate:y("repo-create",6e4),lightbulb:y("lightbulb",60001),lightBulb:y("light-bulb",60001),repo:y("repo",60002),repoDelete:y("repo-delete",60002),gistFork:y("gist-fork",60003),repoForked:y("repo-forked",60003),gitPullRequest:y("git-pull-request",60004),gitPullRequestAbandoned:y("git-pull-request-abandoned",60004),recordKeys:y("record-keys",60005),keyboard:y("keyboard",60005),tag:y("tag",60006),tagAdd:y("tag-add",60006),tagRemove:y("tag-remove",60006),gitPullRequestLabel:y("git-pull-request-label",60006),person:y("person",60007),personFollow:y("person-follow",60007),personOutline:y("person-outline",60007),personFilled:y("person-filled",60007),gitBranch:y("git-branch",60008),gitBranchCreate:y("git-branch-create",60008),gitBranchDelete:y("git-branch-delete",60008),sourceControl:y("source-control",60008),mirror:y("mirror",60009),mirrorPublic:y("mirror-public",60009),star:y("star",60010),starAdd:y("star-add",60010),starDelete:y("star-delete",60010),starEmpty:y("star-empty",60010),comment:y("comment",60011),commentAdd:y("comment-add",60011),alert:y("alert",60012),warning:y("warning",60012),search:y("search",60013),searchSave:y("search-save",60013),logOut:y("log-out",60014),signOut:y("sign-out",60014),logIn:y("log-in",60015),signIn:y("sign-in",60015),eye:y("eye",60016),eyeUnwatch:y("eye-unwatch",60016),eyeWatch:y("eye-watch",60016),circleFilled:y("circle-filled",60017),primitiveDot:y("primitive-dot",60017),closeDirty:y("close-dirty",60017),debugBreakpoint:y("debug-breakpoint",60017),debugBreakpointDisabled:y("debug-breakpoint-disabled",60017),debugHint:y("debug-hint",60017),primitiveSquare:y("primitive-square",60018),edit:y("edit",60019),pencil:y("pencil",60019),info:y("info",60020),issueOpened:y("issue-opened",60020),gistPrivate:y("gist-private",60021),gitForkPrivate:y("git-fork-private",60021),lock:y("lock",60021),mirrorPrivate:y("mirror-private",60021),close:y("close",60022),removeClose:y("remove-close",60022),x:y("x",60022),repoSync:y("repo-sync",60023),sync:y("sync",60023),clone:y("clone",60024),desktopDownload:y("desktop-download",60024),beaker:y("beaker",60025),microscope:y("microscope",60025),vm:y("vm",60026),deviceDesktop:y("device-desktop",60026),file:y("file",60027),fileText:y("file-text",60027),more:y("more",60028),ellipsis:y("ellipsis",60028),kebabHorizontal:y("kebab-horizontal",60028),mailReply:y("mail-reply",60029),reply:y("reply",60029),organization:y("organization",60030),organizationFilled:y("organization-filled",60030),organizationOutline:y("organization-outline",60030),newFile:y("new-file",60031),fileAdd:y("file-add",60031),newFolder:y("new-folder",60032),fileDirectoryCreate:y("file-directory-create",60032),trash:y("trash",60033),trashcan:y("trashcan",60033),history:y("history",60034),clock:y("clock",60034),folder:y("folder",60035),fileDirectory:y("file-directory",60035),symbolFolder:y("symbol-folder",60035),logoGithub:y("logo-github",60036),markGithub:y("mark-github",60036),github:y("github",60036),terminal:y("terminal",60037),console:y("console",60037),repl:y("repl",60037),zap:y("zap",60038),symbolEvent:y("symbol-event",60038),error:y("error",60039),stop:y("stop",60039),variable:y("variable",60040),symbolVariable:y("symbol-variable",60040),array:y("array",60042),symbolArray:y("symbol-array",60042),symbolModule:y("symbol-module",60043),symbolPackage:y("symbol-package",60043),symbolNamespace:y("symbol-namespace",60043),symbolObject:y("symbol-object",60043),symbolMethod:y("symbol-method",60044),symbolFunction:y("symbol-function",60044),symbolConstructor:y("symbol-constructor",60044),symbolBoolean:y("symbol-boolean",60047),symbolNull:y("symbol-null",60047),symbolNumeric:y("symbol-numeric",60048),symbolNumber:y("symbol-number",60048),symbolStructure:y("symbol-structure",60049),symbolStruct:y("symbol-struct",60049),symbolParameter:y("symbol-parameter",60050),symbolTypeParameter:y("symbol-type-parameter",60050),symbolKey:y("symbol-key",60051),symbolText:y("symbol-text",60051),symbolReference:y("symbol-reference",60052),goToFile:y("go-to-file",60052),symbolEnum:y("symbol-enum",60053),symbolValue:y("symbol-value",60053),symbolRuler:y("symbol-ruler",60054),symbolUnit:y("symbol-unit",60054),activateBreakpoints:y("activate-breakpoints",60055),archive:y("archive",60056),arrowBoth:y("arrow-both",60057),arrowDown:y("arrow-down",60058),arrowLeft:y("arrow-left",60059),arrowRight:y("arrow-right",60060),arrowSmallDown:y("arrow-small-down",60061),arrowSmallLeft:y("arrow-small-left",60062),arrowSmallRight:y("arrow-small-right",60063),arrowSmallUp:y("arrow-small-up",60064),arrowUp:y("arrow-up",60065),bell:y("bell",60066),bold:y("bold",60067),book:y("book",60068),bookmark:y("bookmark",60069),debugBreakpointConditionalUnverified:y("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:y("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:y("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:y("debug-breakpoint-data-unverified",60072),debugBreakpointData:y("debug-breakpoint-data",60073),debugBreakpointDataDisabled:y("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:y("debug-breakpoint-log-unverified",60074),debugBreakpointLog:y("debug-breakpoint-log",60075),debugBreakpointLogDisabled:y("debug-breakpoint-log-disabled",60075),briefcase:y("briefcase",60076),broadcast:y("broadcast",60077),browser:y("browser",60078),bug:y("bug",60079),calendar:y("calendar",60080),caseSensitive:y("case-sensitive",60081),check:y("check",60082),checklist:y("checklist",60083),chevronDown:y("chevron-down",60084),dropDownButton:y("drop-down-button",60084),chevronLeft:y("chevron-left",60085),chevronRight:y("chevron-right",60086),chevronUp:y("chevron-up",60087),chromeClose:y("chrome-close",60088),chromeMaximize:y("chrome-maximize",60089),chromeMinimize:y("chrome-minimize",60090),chromeRestore:y("chrome-restore",60091),circle:y("circle",60092),circleOutline:y("circle-outline",60092),debugBreakpointUnverified:y("debug-breakpoint-unverified",60092),circleSlash:y("circle-slash",60093),circuitBoard:y("circuit-board",60094),clearAll:y("clear-all",60095),clippy:y("clippy",60096),closeAll:y("close-all",60097),cloudDownload:y("cloud-download",60098),cloudUpload:y("cloud-upload",60099),code:y("code",60100),collapseAll:y("collapse-all",60101),colorMode:y("color-mode",60102),commentDiscussion:y("comment-discussion",60103),compareChanges:y("compare-changes",60157),creditCard:y("credit-card",60105),dash:y("dash",60108),dashboard:y("dashboard",60109),database:y("database",60110),debugContinue:y("debug-continue",60111),debugDisconnect:y("debug-disconnect",60112),debugPause:y("debug-pause",60113),debugRestart:y("debug-restart",60114),debugStart:y("debug-start",60115),debugStepInto:y("debug-step-into",60116),debugStepOut:y("debug-step-out",60117),debugStepOver:y("debug-step-over",60118),debugStop:y("debug-stop",60119),debug:y("debug",60120),deviceCameraVideo:y("device-camera-video",60121),deviceCamera:y("device-camera",60122),deviceMobile:y("device-mobile",60123),diffAdded:y("diff-added",60124),diffIgnored:y("diff-ignored",60125),diffModified:y("diff-modified",60126),diffRemoved:y("diff-removed",60127),diffRenamed:y("diff-renamed",60128),diff:y("diff",60129),discard:y("discard",60130),editorLayout:y("editor-layout",60131),emptyWindow:y("empty-window",60132),exclude:y("exclude",60133),extensions:y("extensions",60134),eyeClosed:y("eye-closed",60135),fileBinary:y("file-binary",60136),fileCode:y("file-code",60137),fileMedia:y("file-media",60138),filePdf:y("file-pdf",60139),fileSubmodule:y("file-submodule",60140),fileSymlinkDirectory:y("file-symlink-directory",60141),fileSymlinkFile:y("file-symlink-file",60142),fileZip:y("file-zip",60143),files:y("files",60144),filter:y("filter",60145),flame:y("flame",60146),foldDown:y("fold-down",60147),foldUp:y("fold-up",60148),fold:y("fold",60149),folderActive:y("folder-active",60150),folderOpened:y("folder-opened",60151),gear:y("gear",60152),gift:y("gift",60153),gistSecret:y("gist-secret",60154),gist:y("gist",60155),gitCommit:y("git-commit",60156),gitCompare:y("git-compare",60157),gitMerge:y("git-merge",60158),githubAction:y("github-action",60159),githubAlt:y("github-alt",60160),globe:y("globe",60161),grabber:y("grabber",60162),graph:y("graph",60163),gripper:y("gripper",60164),heart:y("heart",60165),home:y("home",60166),horizontalRule:y("horizontal-rule",60167),hubot:y("hubot",60168),inbox:y("inbox",60169),issueClosed:y("issue-closed",60324),issueReopened:y("issue-reopened",60171),issues:y("issues",60172),italic:y("italic",60173),jersey:y("jersey",60174),json:y("json",60175),bracket:y("bracket",60175),kebabVertical:y("kebab-vertical",60176),key:y("key",60177),law:y("law",60178),lightbulbAutofix:y("lightbulb-autofix",60179),linkExternal:y("link-external",60180),link:y("link",60181),listOrdered:y("list-ordered",60182),listUnordered:y("list-unordered",60183),liveShare:y("live-share",60184),loading:y("loading",60185),location:y("location",60186),mailRead:y("mail-read",60187),mail:y("mail",60188),markdown:y("markdown",60189),megaphone:y("megaphone",60190),mention:y("mention",60191),milestone:y("milestone",60192),gitPullRequestMilestone:y("git-pull-request-milestone",60192),mortarBoard:y("mortar-board",60193),move:y("move",60194),multipleWindows:y("multiple-windows",60195),mute:y("mute",60196),noNewline:y("no-newline",60197),note:y("note",60198),octoface:y("octoface",60199),openPreview:y("open-preview",60200),package_:y("package",60201),paintcan:y("paintcan",60202),pin:y("pin",60203),play:y("play",60204),run:y("run",60204),plug:y("plug",60205),preserveCase:y("preserve-case",60206),preview:y("preview",60207),project:y("project",60208),pulse:y("pulse",60209),question:y("question",60210),quote:y("quote",60211),radioTower:y("radio-tower",60212),reactions:y("reactions",60213),references:y("references",60214),refresh:y("refresh",60215),regex:y("regex",60216),remoteExplorer:y("remote-explorer",60217),remote:y("remote",60218),remove:y("remove",60219),replaceAll:y("replace-all",60220),replace:y("replace",60221),repoClone:y("repo-clone",60222),repoForcePush:y("repo-force-push",60223),repoPull:y("repo-pull",60224),repoPush:y("repo-push",60225),report:y("report",60226),requestChanges:y("request-changes",60227),rocket:y("rocket",60228),rootFolderOpened:y("root-folder-opened",60229),rootFolder:y("root-folder",60230),rss:y("rss",60231),ruby:y("ruby",60232),saveAll:y("save-all",60233),saveAs:y("save-as",60234),save:y("save",60235),screenFull:y("screen-full",60236),screenNormal:y("screen-normal",60237),searchStop:y("search-stop",60238),server:y("server",60240),settingsGear:y("settings-gear",60241),settings:y("settings",60242),shield:y("shield",60243),smiley:y("smiley",60244),sortPrecedence:y("sort-precedence",60245),splitHorizontal:y("split-horizontal",60246),splitVertical:y("split-vertical",60247),squirrel:y("squirrel",60248),starFull:y("star-full",60249),starHalf:y("star-half",60250),symbolClass:y("symbol-class",60251),symbolColor:y("symbol-color",60252),symbolCustomColor:y("symbol-customcolor",60252),symbolConstant:y("symbol-constant",60253),symbolEnumMember:y("symbol-enum-member",60254),symbolField:y("symbol-field",60255),symbolFile:y("symbol-file",60256),symbolInterface:y("symbol-interface",60257),symbolKeyword:y("symbol-keyword",60258),symbolMisc:y("symbol-misc",60259),symbolOperator:y("symbol-operator",60260),symbolProperty:y("symbol-property",60261),wrench:y("wrench",60261),wrenchSubaction:y("wrench-subaction",60261),symbolSnippet:y("symbol-snippet",60262),tasklist:y("tasklist",60263),telescope:y("telescope",60264),textSize:y("text-size",60265),threeBars:y("three-bars",60266),thumbsdown:y("thumbsdown",60267),thumbsup:y("thumbsup",60268),tools:y("tools",60269),triangleDown:y("triangle-down",60270),triangleLeft:y("triangle-left",60271),triangleRight:y("triangle-right",60272),triangleUp:y("triangle-up",60273),twitter:y("twitter",60274),unfold:y("unfold",60275),unlock:y("unlock",60276),unmute:y("unmute",60277),unverified:y("unverified",60278),verified:y("verified",60279),versions:y("versions",60280),vmActive:y("vm-active",60281),vmOutline:y("vm-outline",60282),vmRunning:y("vm-running",60283),watch:y("watch",60284),whitespace:y("whitespace",60285),wholeWord:y("whole-word",60286),window:y("window",60287),wordWrap:y("word-wrap",60288),zoomIn:y("zoom-in",60289),zoomOut:y("zoom-out",60290),listFilter:y("list-filter",60291),listFlat:y("list-flat",60292),listSelection:y("list-selection",60293),selection:y("selection",60293),listTree:y("list-tree",60294),debugBreakpointFunctionUnverified:y("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:y("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:y("debug-breakpoint-function-disabled",60296),debugStackframeActive:y("debug-stackframe-active",60297),circleSmallFilled:y("circle-small-filled",60298),debugStackframeDot:y("debug-stackframe-dot",60298),debugStackframe:y("debug-stackframe",60299),debugStackframeFocused:y("debug-stackframe-focused",60299),debugBreakpointUnsupported:y("debug-breakpoint-unsupported",60300),symbolString:y("symbol-string",60301),debugReverseContinue:y("debug-reverse-continue",60302),debugStepBack:y("debug-step-back",60303),debugRestartFrame:y("debug-restart-frame",60304),callIncoming:y("call-incoming",60306),callOutgoing:y("call-outgoing",60307),menu:y("menu",60308),expandAll:y("expand-all",60309),feedback:y("feedback",60310),gitPullRequestReviewer:y("git-pull-request-reviewer",60310),groupByRefType:y("group-by-ref-type",60311),ungroupByRefType:y("ungroup-by-ref-type",60312),account:y("account",60313),gitPullRequestAssignee:y("git-pull-request-assignee",60313),bellDot:y("bell-dot",60314),debugConsole:y("debug-console",60315),library:y("library",60316),output:y("output",60317),runAll:y("run-all",60318),syncIgnored:y("sync-ignored",60319),pinned:y("pinned",60320),githubInverted:y("github-inverted",60321),debugAlt:y("debug-alt",60305),serverProcess:y("server-process",60322),serverEnvironment:y("server-environment",60323),pass:y("pass",60324),stopCircle:y("stop-circle",60325),playCircle:y("play-circle",60326),record:y("record",60327),debugAltSmall:y("debug-alt-small",60328),vmConnect:y("vm-connect",60329),cloud:y("cloud",60330),merge:y("merge",60331),exportIcon:y("export",60332),graphLeft:y("graph-left",60333),magnet:y("magnet",60334),notebook:y("notebook",60335),redo:y("redo",60336),checkAll:y("check-all",60337),pinnedDirty:y("pinned-dirty",60338),passFilled:y("pass-filled",60339),circleLargeFilled:y("circle-large-filled",60340),circleLarge:y("circle-large",60341),circleLargeOutline:y("circle-large-outline",60341),combine:y("combine",60342),gather:y("gather",60342),table:y("table",60343),variableGroup:y("variable-group",60344),typeHierarchy:y("type-hierarchy",60345),typeHierarchySub:y("type-hierarchy-sub",60346),typeHierarchySuper:y("type-hierarchy-super",60347),gitPullRequestCreate:y("git-pull-request-create",60348),runAbove:y("run-above",60349),runBelow:y("run-below",60350),notebookTemplate:y("notebook-template",60351),debugRerun:y("debug-rerun",60352),workspaceTrusted:y("workspace-trusted",60353),workspaceUntrusted:y("workspace-untrusted",60354),workspaceUnspecified:y("workspace-unspecified",60355),terminalCmd:y("terminal-cmd",60356),terminalDebian:y("terminal-debian",60357),terminalLinux:y("terminal-linux",60358),terminalPowershell:y("terminal-powershell",60359),terminalTmux:y("terminal-tmux",60360),terminalUbuntu:y("terminal-ubuntu",60361),terminalBash:y("terminal-bash",60362),arrowSwap:y("arrow-swap",60363),copy:y("copy",60364),personAdd:y("person-add",60365),filterFilled:y("filter-filled",60366),wand:y("wand",60367),debugLineByLine:y("debug-line-by-line",60368),inspect:y("inspect",60369),layers:y("layers",60370),layersDot:y("layers-dot",60371),layersActive:y("layers-active",60372),compass:y("compass",60373),compassDot:y("compass-dot",60374),compassActive:y("compass-active",60375),azure:y("azure",60376),issueDraft:y("issue-draft",60377),gitPullRequestClosed:y("git-pull-request-closed",60378),gitPullRequestDraft:y("git-pull-request-draft",60379),debugAll:y("debug-all",60380),debugCoverage:y("debug-coverage",60381),runErrors:y("run-errors",60382),folderLibrary:y("folder-library",60383),debugContinueSmall:y("debug-continue-small",60384),beakerStop:y("beaker-stop",60385),graphLine:y("graph-line",60386),graphScatter:y("graph-scatter",60387),pieChart:y("pie-chart",60388),bracketDot:y("bracket-dot",60389),bracketError:y("bracket-error",60390),lockSmall:y("lock-small",60391),azureDevops:y("azure-devops",60392),verifiedFilled:y("verified-filled",60393),newLine:y("newline",60394),layout:y("layout",60395),layoutActivitybarLeft:y("layout-activitybar-left",60396),layoutActivitybarRight:y("layout-activitybar-right",60397),layoutPanelLeft:y("layout-panel-left",60398),layoutPanelCenter:y("layout-panel-center",60399),layoutPanelJustify:y("layout-panel-justify",60400),layoutPanelRight:y("layout-panel-right",60401),layoutPanel:y("layout-panel",60402),layoutSidebarLeft:y("layout-sidebar-left",60403),layoutSidebarRight:y("layout-sidebar-right",60404),layoutStatusbar:y("layout-statusbar",60405),layoutMenubar:y("layout-menubar",60406),layoutCentered:y("layout-centered",60407),layoutSidebarRightOff:y("layout-sidebar-right-off",60416),layoutPanelOff:y("layout-panel-off",60417),layoutSidebarLeftOff:y("layout-sidebar-left-off",60418),target:y("target",60408),indent:y("indent",60409),recordSmall:y("record-small",60410),errorSmall:y("error-small",60411),arrowCircleDown:y("arrow-circle-down",60412),arrowCircleLeft:y("arrow-circle-left",60413),arrowCircleRight:y("arrow-circle-right",60414),arrowCircleUp:y("arrow-circle-up",60415),heartFilled:y("heart-filled",60420),map:y("map",60421),mapFilled:y("map-filled",60422),circleSmall:y("circle-small",60423),bellSlash:y("bell-slash",60424),bellSlashDot:y("bell-slash-dot",60425),commentUnresolved:y("comment-unresolved",60426),gitPullRequestGoToChanges:y("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:y("git-pull-request-new-changes",60428),searchFuzzy:y("search-fuzzy",60429),commentDraft:y("comment-draft",60430),send:y("send",60431),sparkle:y("sparkle",60432),insert:y("insert",60433),mic:y("mic",60434),dialogError:y("dialog-error","error"),dialogWarning:y("dialog-warning","warning"),dialogInfo:y("dialog-info","info"),dialogClose:y("dialog-close","close"),treeItemExpanded:y("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:y("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:y("tree-filter-on-type-off","list-selection"),treeFilterClear:y("tree-filter-clear","close"),treeItemLoading:y("tree-item-loading","loading"),menuSelection:y("menu-selection","check"),menuSubmenu:y("menu-submenu","chevron-right"),menuBarMore:y("menubar-more","more"),scrollbarButtonLeft:y("scrollbar-button-left","triangle-left"),scrollbarButtonRight:y("scrollbar-button-right","triangle-right"),scrollbarButtonUp:y("scrollbar-button-up","triangle-up"),scrollbarButtonDown:y("scrollbar-button-down","triangle-down"),toolBarMore:y("toolbar-more","more"),quickInputBack:y("quick-input-back","arrow-left")};var Pv=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};let _6=class{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new q,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),st(()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))})}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){var i;(i=this._factories.get(e))===null||i===void 0||i.dispose();const s=new b6(this,e,t);return this._factories.set(e,s),st(()=>{const o=this._factories.get(e);!o||o!==s||(this._factories.delete(e),o.dispose())})}getOrCreate(e){return Pv(this,void 0,void 0,function*(){const t=this.get(e);if(t)return t;const i=this._factories.get(e);return!i||i.isResolved?null:(yield i.resolve(),this.get(e))})}isResolved(e){if(this.get(e))return!0;const i=this._factories.get(e);return!!(!i||i.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}};class b6 extends oe{get isResolved(){return this._isResolved}constructor(e,t,i){super(),this._registry=e,this._languageId=t,this._factory=i,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}resolve(){return Pv(this,void 0,void 0,function*(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise})}_create(){return Pv(this,void 0,void 0,function*(){const e=yield this._factory.tokenizationSupport;this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))})}}let Nf=class{constructor(e,t,i){this.offset=e,this.type=t,this.language=i,this._tokenBrand=void 0}toString(){return"("+this.offset+", "+this.type+")"}};class mS{constructor(e,t){this.tokens=e,this.endState=t,this._tokenizationResultBrand=void 0}}class y_{constructor(e,t){this.tokens=e,this.endState=t,this._encodedTokenizationResultBrand=void 0}}var rD;(function(n){const e=new Map;e.set(0,we.symbolMethod),e.set(1,we.symbolFunction),e.set(2,we.symbolConstructor),e.set(3,we.symbolField),e.set(4,we.symbolVariable),e.set(5,we.symbolClass),e.set(6,we.symbolStruct),e.set(7,we.symbolInterface),e.set(8,we.symbolModule),e.set(9,we.symbolProperty),e.set(10,we.symbolEvent),e.set(11,we.symbolOperator),e.set(12,we.symbolUnit),e.set(13,we.symbolValue),e.set(15,we.symbolEnum),e.set(14,we.symbolConstant),e.set(15,we.symbolEnum),e.set(16,we.symbolEnumMember),e.set(17,we.symbolKeyword),e.set(27,we.symbolSnippet),e.set(18,we.symbolText),e.set(19,we.symbolColor),e.set(20,we.symbolFile),e.set(21,we.symbolReference),e.set(22,we.symbolCustomColor),e.set(23,we.symbolFolder),e.set(24,we.symbolTypeParameter),e.set(25,we.account),e.set(26,we.issues);function t(o){let r=e.get(o);return r||(console.info("No codicon found for CompletionItemKind "+o),r=we.symbolProperty),r}n.toIcon=t;const i=new Map;i.set("method",0),i.set("function",1),i.set("constructor",2),i.set("field",3),i.set("variable",4),i.set("class",5),i.set("struct",6),i.set("interface",7),i.set("module",8),i.set("property",9),i.set("event",10),i.set("operator",11),i.set("unit",12),i.set("value",13),i.set("constant",14),i.set("enum",15),i.set("enum-member",16),i.set("enumMember",16),i.set("keyword",17),i.set("snippet",27),i.set("text",18),i.set("color",19),i.set("file",20),i.set("reference",21),i.set("customcolor",22),i.set("folder",23),i.set("type-parameter",24),i.set("typeParameter",24),i.set("account",25),i.set("issue",26);function s(o,r){let a=i.get(o);return typeof a>"u"&&!r&&(a=9),a}n.fromString=s})(rD||(rD={}));var aD;(function(n){n[n.Automatic=0]="Automatic",n[n.Explicit=1]="Explicit"})(aD||(aD={}));class v6{constructor(e,t,i,s){this.range=e,this.text=t,this.completionKind=i,this.isSnippetText=s}equals(e){return $.lift(this.range).equalsRange(e.range)&&this.text===e.text&&this.completionKind===e.completionKind&&this.isSnippetText===e.isSnippetText}}var lD;(function(n){n[n.Invoke=1]="Invoke",n[n.TriggerCharacter=2]="TriggerCharacter",n[n.ContentChange=3]="ContentChange"})(lD||(lD={}));var cD;(function(n){n[n.Text=0]="Text",n[n.Read=1]="Read",n[n.Write=2]="Write"})(cD||(cD={}));m("Array","array"),m("Boolean","boolean"),m("Class","class"),m("Constant","constant"),m("Constructor","constructor"),m("Enum","enumeration"),m("EnumMember","enumeration member"),m("Event","event"),m("Field","field"),m("File","file"),m("Function","function"),m("Interface","interface"),m("Key","key"),m("Method","method"),m("Module","module"),m("Namespace","namespace"),m("Null","null"),m("Number","number"),m("Object","object"),m("Operator","operator"),m("Package","package"),m("Property","property"),m("String","string"),m("Struct","struct"),m("TypeParameter","type parameter"),m("Variable","variable");var Ov;(function(n){const e=new Map;e.set(0,we.symbolFile),e.set(1,we.symbolModule),e.set(2,we.symbolNamespace),e.set(3,we.symbolPackage),e.set(4,we.symbolClass),e.set(5,we.symbolMethod),e.set(6,we.symbolProperty),e.set(7,we.symbolField),e.set(8,we.symbolConstructor),e.set(9,we.symbolEnum),e.set(10,we.symbolInterface),e.set(11,we.symbolFunction),e.set(12,we.symbolVariable),e.set(13,we.symbolConstant),e.set(14,we.symbolString),e.set(15,we.symbolNumber),e.set(16,we.symbolBoolean),e.set(17,we.symbolArray),e.set(18,we.symbolObject),e.set(19,we.symbolKey),e.set(20,we.symbolNull),e.set(21,we.symbolEnumMember),e.set(22,we.symbolStruct),e.set(23,we.symbolEvent),e.set(24,we.symbolOperator),e.set(25,we.symbolTypeParameter);function t(i){let s=e.get(i);return s||(console.info("No codicon found for SymbolKind "+i),s=we.symbolProperty),s}n.toIcon=t})(Ov||(Ov={}));class Js{static fromValue(e){switch(e){case"comment":return Js.Comment;case"imports":return Js.Imports;case"region":return Js.Region}return new Js(e)}constructor(e){this.value=e}}Js.Comment=new Js("comment");Js.Imports=new Js("imports");Js.Region=new Js("region");var dD;(function(n){function e(t){return!t||typeof t!="object"?!1:typeof t.id=="string"&&typeof t.title=="string"}n.is=e})(dD||(dD={}));var uD;(function(n){n[n.Type=1]="Type",n[n.Parameter=2]="Parameter"})(uD||(uD={}));class w6{constructor(e){this.createSupport=e,this._tokenizationSupport=null}dispose(){this._tokenizationSupport&&this._tokenizationSupport.then(e=>{e&&e.dispose()})}get tokenizationSupport(){return this._tokenizationSupport||(this._tokenizationSupport=this.createSupport()),this._tokenizationSupport}}const hi=new _6;var Fv;(function(n){n[n.Unknown=0]="Unknown",n[n.Disabled=1]="Disabled",n[n.Enabled=2]="Enabled"})(Fv||(Fv={}));var Bv;(function(n){n[n.Invoke=1]="Invoke",n[n.Auto=2]="Auto"})(Bv||(Bv={}));var Vv;(function(n){n[n.None=0]="None",n[n.KeepWhitespace=1]="KeepWhitespace",n[n.InsertAsSnippet=4]="InsertAsSnippet"})(Vv||(Vv={}));var Wv;(function(n){n[n.Method=0]="Method",n[n.Function=1]="Function",n[n.Constructor=2]="Constructor",n[n.Field=3]="Field",n[n.Variable=4]="Variable",n[n.Class=5]="Class",n[n.Struct=6]="Struct",n[n.Interface=7]="Interface",n[n.Module=8]="Module",n[n.Property=9]="Property",n[n.Event=10]="Event",n[n.Operator=11]="Operator",n[n.Unit=12]="Unit",n[n.Value=13]="Value",n[n.Constant=14]="Constant",n[n.Enum=15]="Enum",n[n.EnumMember=16]="EnumMember",n[n.Keyword=17]="Keyword",n[n.Text=18]="Text",n[n.Color=19]="Color",n[n.File=20]="File",n[n.Reference=21]="Reference",n[n.Customcolor=22]="Customcolor",n[n.Folder=23]="Folder",n[n.TypeParameter=24]="TypeParameter",n[n.User=25]="User",n[n.Issue=26]="Issue",n[n.Snippet=27]="Snippet"})(Wv||(Wv={}));var Hv;(function(n){n[n.Deprecated=1]="Deprecated"})(Hv||(Hv={}));var $v;(function(n){n[n.Invoke=0]="Invoke",n[n.TriggerCharacter=1]="TriggerCharacter",n[n.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})($v||($v={}));var zv;(function(n){n[n.EXACT=0]="EXACT",n[n.ABOVE=1]="ABOVE",n[n.BELOW=2]="BELOW"})(zv||(zv={}));var Uv;(function(n){n[n.NotSet=0]="NotSet",n[n.ContentFlush=1]="ContentFlush",n[n.RecoverFromMarkers=2]="RecoverFromMarkers",n[n.Explicit=3]="Explicit",n[n.Paste=4]="Paste",n[n.Undo=5]="Undo",n[n.Redo=6]="Redo"})(Uv||(Uv={}));var qv;(function(n){n[n.LF=1]="LF",n[n.CRLF=2]="CRLF"})(qv||(qv={}));var jv;(function(n){n[n.Text=0]="Text",n[n.Read=1]="Read",n[n.Write=2]="Write"})(jv||(jv={}));var Kv;(function(n){n[n.None=0]="None",n[n.Keep=1]="Keep",n[n.Brackets=2]="Brackets",n[n.Advanced=3]="Advanced",n[n.Full=4]="Full"})(Kv||(Kv={}));var Gv;(function(n){n[n.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",n[n.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",n[n.accessibilitySupport=2]="accessibilitySupport",n[n.accessibilityPageSize=3]="accessibilityPageSize",n[n.ariaLabel=4]="ariaLabel",n[n.ariaRequired=5]="ariaRequired",n[n.autoClosingBrackets=6]="autoClosingBrackets",n[n.screenReaderAnnounceInlineSuggestion=7]="screenReaderAnnounceInlineSuggestion",n[n.autoClosingDelete=8]="autoClosingDelete",n[n.autoClosingOvertype=9]="autoClosingOvertype",n[n.autoClosingQuotes=10]="autoClosingQuotes",n[n.autoIndent=11]="autoIndent",n[n.automaticLayout=12]="automaticLayout",n[n.autoSurround=13]="autoSurround",n[n.bracketPairColorization=14]="bracketPairColorization",n[n.guides=15]="guides",n[n.codeLens=16]="codeLens",n[n.codeLensFontFamily=17]="codeLensFontFamily",n[n.codeLensFontSize=18]="codeLensFontSize",n[n.colorDecorators=19]="colorDecorators",n[n.colorDecoratorsLimit=20]="colorDecoratorsLimit",n[n.columnSelection=21]="columnSelection",n[n.comments=22]="comments",n[n.contextmenu=23]="contextmenu",n[n.copyWithSyntaxHighlighting=24]="copyWithSyntaxHighlighting",n[n.cursorBlinking=25]="cursorBlinking",n[n.cursorSmoothCaretAnimation=26]="cursorSmoothCaretAnimation",n[n.cursorStyle=27]="cursorStyle",n[n.cursorSurroundingLines=28]="cursorSurroundingLines",n[n.cursorSurroundingLinesStyle=29]="cursorSurroundingLinesStyle",n[n.cursorWidth=30]="cursorWidth",n[n.disableLayerHinting=31]="disableLayerHinting",n[n.disableMonospaceOptimizations=32]="disableMonospaceOptimizations",n[n.domReadOnly=33]="domReadOnly",n[n.dragAndDrop=34]="dragAndDrop",n[n.dropIntoEditor=35]="dropIntoEditor",n[n.emptySelectionClipboard=36]="emptySelectionClipboard",n[n.experimentalWhitespaceRendering=37]="experimentalWhitespaceRendering",n[n.extraEditorClassName=38]="extraEditorClassName",n[n.fastScrollSensitivity=39]="fastScrollSensitivity",n[n.find=40]="find",n[n.fixedOverflowWidgets=41]="fixedOverflowWidgets",n[n.folding=42]="folding",n[n.foldingStrategy=43]="foldingStrategy",n[n.foldingHighlight=44]="foldingHighlight",n[n.foldingImportsByDefault=45]="foldingImportsByDefault",n[n.foldingMaximumRegions=46]="foldingMaximumRegions",n[n.unfoldOnClickAfterEndOfLine=47]="unfoldOnClickAfterEndOfLine",n[n.fontFamily=48]="fontFamily",n[n.fontInfo=49]="fontInfo",n[n.fontLigatures=50]="fontLigatures",n[n.fontSize=51]="fontSize",n[n.fontWeight=52]="fontWeight",n[n.fontVariations=53]="fontVariations",n[n.formatOnPaste=54]="formatOnPaste",n[n.formatOnType=55]="formatOnType",n[n.glyphMargin=56]="glyphMargin",n[n.gotoLocation=57]="gotoLocation",n[n.hideCursorInOverviewRuler=58]="hideCursorInOverviewRuler",n[n.hover=59]="hover",n[n.inDiffEditor=60]="inDiffEditor",n[n.inlineSuggest=61]="inlineSuggest",n[n.letterSpacing=62]="letterSpacing",n[n.lightbulb=63]="lightbulb",n[n.lineDecorationsWidth=64]="lineDecorationsWidth",n[n.lineHeight=65]="lineHeight",n[n.lineNumbers=66]="lineNumbers",n[n.lineNumbersMinChars=67]="lineNumbersMinChars",n[n.linkedEditing=68]="linkedEditing",n[n.links=69]="links",n[n.matchBrackets=70]="matchBrackets",n[n.minimap=71]="minimap",n[n.mouseStyle=72]="mouseStyle",n[n.mouseWheelScrollSensitivity=73]="mouseWheelScrollSensitivity",n[n.mouseWheelZoom=74]="mouseWheelZoom",n[n.multiCursorMergeOverlapping=75]="multiCursorMergeOverlapping",n[n.multiCursorModifier=76]="multiCursorModifier",n[n.multiCursorPaste=77]="multiCursorPaste",n[n.multiCursorLimit=78]="multiCursorLimit",n[n.occurrencesHighlight=79]="occurrencesHighlight",n[n.overviewRulerBorder=80]="overviewRulerBorder",n[n.overviewRulerLanes=81]="overviewRulerLanes",n[n.padding=82]="padding",n[n.pasteAs=83]="pasteAs",n[n.parameterHints=84]="parameterHints",n[n.peekWidgetDefaultFocus=85]="peekWidgetDefaultFocus",n[n.definitionLinkOpensInPeek=86]="definitionLinkOpensInPeek",n[n.quickSuggestions=87]="quickSuggestions",n[n.quickSuggestionsDelay=88]="quickSuggestionsDelay",n[n.readOnly=89]="readOnly",n[n.readOnlyMessage=90]="readOnlyMessage",n[n.renameOnType=91]="renameOnType",n[n.renderControlCharacters=92]="renderControlCharacters",n[n.renderFinalNewline=93]="renderFinalNewline",n[n.renderLineHighlight=94]="renderLineHighlight",n[n.renderLineHighlightOnlyWhenFocus=95]="renderLineHighlightOnlyWhenFocus",n[n.renderValidationDecorations=96]="renderValidationDecorations",n[n.renderWhitespace=97]="renderWhitespace",n[n.revealHorizontalRightPadding=98]="revealHorizontalRightPadding",n[n.roundedSelection=99]="roundedSelection",n[n.rulers=100]="rulers",n[n.scrollbar=101]="scrollbar",n[n.scrollBeyondLastColumn=102]="scrollBeyondLastColumn",n[n.scrollBeyondLastLine=103]="scrollBeyondLastLine",n[n.scrollPredominantAxis=104]="scrollPredominantAxis",n[n.selectionClipboard=105]="selectionClipboard",n[n.selectionHighlight=106]="selectionHighlight",n[n.selectOnLineNumbers=107]="selectOnLineNumbers",n[n.showFoldingControls=108]="showFoldingControls",n[n.showUnused=109]="showUnused",n[n.snippetSuggestions=110]="snippetSuggestions",n[n.smartSelect=111]="smartSelect",n[n.smoothScrolling=112]="smoothScrolling",n[n.stickyScroll=113]="stickyScroll",n[n.stickyTabStops=114]="stickyTabStops",n[n.stopRenderingLineAfter=115]="stopRenderingLineAfter",n[n.suggest=116]="suggest",n[n.suggestFontSize=117]="suggestFontSize",n[n.suggestLineHeight=118]="suggestLineHeight",n[n.suggestOnTriggerCharacters=119]="suggestOnTriggerCharacters",n[n.suggestSelection=120]="suggestSelection",n[n.tabCompletion=121]="tabCompletion",n[n.tabIndex=122]="tabIndex",n[n.unicodeHighlighting=123]="unicodeHighlighting",n[n.unusualLineTerminators=124]="unusualLineTerminators",n[n.useShadowDOM=125]="useShadowDOM",n[n.useTabStops=126]="useTabStops",n[n.wordBreak=127]="wordBreak",n[n.wordSeparators=128]="wordSeparators",n[n.wordWrap=129]="wordWrap",n[n.wordWrapBreakAfterCharacters=130]="wordWrapBreakAfterCharacters",n[n.wordWrapBreakBeforeCharacters=131]="wordWrapBreakBeforeCharacters",n[n.wordWrapColumn=132]="wordWrapColumn",n[n.wordWrapOverride1=133]="wordWrapOverride1",n[n.wordWrapOverride2=134]="wordWrapOverride2",n[n.wrappingIndent=135]="wrappingIndent",n[n.wrappingStrategy=136]="wrappingStrategy",n[n.showDeprecated=137]="showDeprecated",n[n.inlayHints=138]="inlayHints",n[n.editorClassName=139]="editorClassName",n[n.pixelRatio=140]="pixelRatio",n[n.tabFocusMode=141]="tabFocusMode",n[n.layoutInfo=142]="layoutInfo",n[n.wrappingInfo=143]="wrappingInfo",n[n.defaultColorDecorators=144]="defaultColorDecorators",n[n.colorDecoratorsActivatedOn=145]="colorDecoratorsActivatedOn",n[n.inlineCompletionsAccessibilityVerbose=146]="inlineCompletionsAccessibilityVerbose"})(Gv||(Gv={}));var Zv;(function(n){n[n.TextDefined=0]="TextDefined",n[n.LF=1]="LF",n[n.CRLF=2]="CRLF"})(Zv||(Zv={}));var Yv;(function(n){n[n.LF=0]="LF",n[n.CRLF=1]="CRLF"})(Yv||(Yv={}));var Xv;(function(n){n[n.Left=1]="Left",n[n.Right=2]="Right"})(Xv||(Xv={}));var Qv;(function(n){n[n.None=0]="None",n[n.Indent=1]="Indent",n[n.IndentOutdent=2]="IndentOutdent",n[n.Outdent=3]="Outdent"})(Qv||(Qv={}));var Jv;(function(n){n[n.Both=0]="Both",n[n.Right=1]="Right",n[n.Left=2]="Left",n[n.None=3]="None"})(Jv||(Jv={}));var ew;(function(n){n[n.Type=1]="Type",n[n.Parameter=2]="Parameter"})(ew||(ew={}));var tw;(function(n){n[n.Automatic=0]="Automatic",n[n.Explicit=1]="Explicit"})(tw||(tw={}));var iw;(function(n){n[n.DependsOnKbLayout=-1]="DependsOnKbLayout",n[n.Unknown=0]="Unknown",n[n.Backspace=1]="Backspace",n[n.Tab=2]="Tab",n[n.Enter=3]="Enter",n[n.Shift=4]="Shift",n[n.Ctrl=5]="Ctrl",n[n.Alt=6]="Alt",n[n.PauseBreak=7]="PauseBreak",n[n.CapsLock=8]="CapsLock",n[n.Escape=9]="Escape",n[n.Space=10]="Space",n[n.PageUp=11]="PageUp",n[n.PageDown=12]="PageDown",n[n.End=13]="End",n[n.Home=14]="Home",n[n.LeftArrow=15]="LeftArrow",n[n.UpArrow=16]="UpArrow",n[n.RightArrow=17]="RightArrow",n[n.DownArrow=18]="DownArrow",n[n.Insert=19]="Insert",n[n.Delete=20]="Delete",n[n.Digit0=21]="Digit0",n[n.Digit1=22]="Digit1",n[n.Digit2=23]="Digit2",n[n.Digit3=24]="Digit3",n[n.Digit4=25]="Digit4",n[n.Digit5=26]="Digit5",n[n.Digit6=27]="Digit6",n[n.Digit7=28]="Digit7",n[n.Digit8=29]="Digit8",n[n.Digit9=30]="Digit9",n[n.KeyA=31]="KeyA",n[n.KeyB=32]="KeyB",n[n.KeyC=33]="KeyC",n[n.KeyD=34]="KeyD",n[n.KeyE=35]="KeyE",n[n.KeyF=36]="KeyF",n[n.KeyG=37]="KeyG",n[n.KeyH=38]="KeyH",n[n.KeyI=39]="KeyI",n[n.KeyJ=40]="KeyJ",n[n.KeyK=41]="KeyK",n[n.KeyL=42]="KeyL",n[n.KeyM=43]="KeyM",n[n.KeyN=44]="KeyN",n[n.KeyO=45]="KeyO",n[n.KeyP=46]="KeyP",n[n.KeyQ=47]="KeyQ",n[n.KeyR=48]="KeyR",n[n.KeyS=49]="KeyS",n[n.KeyT=50]="KeyT",n[n.KeyU=51]="KeyU",n[n.KeyV=52]="KeyV",n[n.KeyW=53]="KeyW",n[n.KeyX=54]="KeyX",n[n.KeyY=55]="KeyY",n[n.KeyZ=56]="KeyZ",n[n.Meta=57]="Meta",n[n.ContextMenu=58]="ContextMenu",n[n.F1=59]="F1",n[n.F2=60]="F2",n[n.F3=61]="F3",n[n.F4=62]="F4",n[n.F5=63]="F5",n[n.F6=64]="F6",n[n.F7=65]="F7",n[n.F8=66]="F8",n[n.F9=67]="F9",n[n.F10=68]="F10",n[n.F11=69]="F11",n[n.F12=70]="F12",n[n.F13=71]="F13",n[n.F14=72]="F14",n[n.F15=73]="F15",n[n.F16=74]="F16",n[n.F17=75]="F17",n[n.F18=76]="F18",n[n.F19=77]="F19",n[n.F20=78]="F20",n[n.F21=79]="F21",n[n.F22=80]="F22",n[n.F23=81]="F23",n[n.F24=82]="F24",n[n.NumLock=83]="NumLock",n[n.ScrollLock=84]="ScrollLock",n[n.Semicolon=85]="Semicolon",n[n.Equal=86]="Equal",n[n.Comma=87]="Comma",n[n.Minus=88]="Minus",n[n.Period=89]="Period",n[n.Slash=90]="Slash",n[n.Backquote=91]="Backquote",n[n.BracketLeft=92]="BracketLeft",n[n.Backslash=93]="Backslash",n[n.BracketRight=94]="BracketRight",n[n.Quote=95]="Quote",n[n.OEM_8=96]="OEM_8",n[n.IntlBackslash=97]="IntlBackslash",n[n.Numpad0=98]="Numpad0",n[n.Numpad1=99]="Numpad1",n[n.Numpad2=100]="Numpad2",n[n.Numpad3=101]="Numpad3",n[n.Numpad4=102]="Numpad4",n[n.Numpad5=103]="Numpad5",n[n.Numpad6=104]="Numpad6",n[n.Numpad7=105]="Numpad7",n[n.Numpad8=106]="Numpad8",n[n.Numpad9=107]="Numpad9",n[n.NumpadMultiply=108]="NumpadMultiply",n[n.NumpadAdd=109]="NumpadAdd",n[n.NUMPAD_SEPARATOR=110]="NUMPAD_SEPARATOR",n[n.NumpadSubtract=111]="NumpadSubtract",n[n.NumpadDecimal=112]="NumpadDecimal",n[n.NumpadDivide=113]="NumpadDivide",n[n.KEY_IN_COMPOSITION=114]="KEY_IN_COMPOSITION",n[n.ABNT_C1=115]="ABNT_C1",n[n.ABNT_C2=116]="ABNT_C2",n[n.AudioVolumeMute=117]="AudioVolumeMute",n[n.AudioVolumeUp=118]="AudioVolumeUp",n[n.AudioVolumeDown=119]="AudioVolumeDown",n[n.BrowserSearch=120]="BrowserSearch",n[n.BrowserHome=121]="BrowserHome",n[n.BrowserBack=122]="BrowserBack",n[n.BrowserForward=123]="BrowserForward",n[n.MediaTrackNext=124]="MediaTrackNext",n[n.MediaTrackPrevious=125]="MediaTrackPrevious",n[n.MediaStop=126]="MediaStop",n[n.MediaPlayPause=127]="MediaPlayPause",n[n.LaunchMediaPlayer=128]="LaunchMediaPlayer",n[n.LaunchMail=129]="LaunchMail",n[n.LaunchApp2=130]="LaunchApp2",n[n.Clear=131]="Clear",n[n.MAX_VALUE=132]="MAX_VALUE"})(iw||(iw={}));var nw;(function(n){n[n.Hint=1]="Hint",n[n.Info=2]="Info",n[n.Warning=4]="Warning",n[n.Error=8]="Error"})(nw||(nw={}));var sw;(function(n){n[n.Unnecessary=1]="Unnecessary",n[n.Deprecated=2]="Deprecated"})(sw||(sw={}));var ow;(function(n){n[n.Inline=1]="Inline",n[n.Gutter=2]="Gutter"})(ow||(ow={}));var rw;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.TEXTAREA=1]="TEXTAREA",n[n.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",n[n.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",n[n.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",n[n.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",n[n.CONTENT_TEXT=6]="CONTENT_TEXT",n[n.CONTENT_EMPTY=7]="CONTENT_EMPTY",n[n.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",n[n.CONTENT_WIDGET=9]="CONTENT_WIDGET",n[n.OVERVIEW_RULER=10]="OVERVIEW_RULER",n[n.SCROLLBAR=11]="SCROLLBAR",n[n.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",n[n.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(rw||(rw={}));var aw;(function(n){n[n.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",n[n.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",n[n.TOP_CENTER=2]="TOP_CENTER"})(aw||(aw={}));var lw;(function(n){n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=4]="Right",n[n.Full=7]="Full"})(lw||(lw={}));var cw;(function(n){n[n.Left=0]="Left",n[n.Right=1]="Right",n[n.None=2]="None",n[n.LeftOfInjectedText=3]="LeftOfInjectedText",n[n.RightOfInjectedText=4]="RightOfInjectedText"})(cw||(cw={}));var dw;(function(n){n[n.Off=0]="Off",n[n.On=1]="On",n[n.Relative=2]="Relative",n[n.Interval=3]="Interval",n[n.Custom=4]="Custom"})(dw||(dw={}));var uw;(function(n){n[n.None=0]="None",n[n.Text=1]="Text",n[n.Blocks=2]="Blocks"})(uw||(uw={}));var hw;(function(n){n[n.Smooth=0]="Smooth",n[n.Immediate=1]="Immediate"})(hw||(hw={}));var fw;(function(n){n[n.Auto=1]="Auto",n[n.Hidden=2]="Hidden",n[n.Visible=3]="Visible"})(fw||(fw={}));var gw;(function(n){n[n.LTR=0]="LTR",n[n.RTL=1]="RTL"})(gw||(gw={}));var pw;(function(n){n[n.Invoke=1]="Invoke",n[n.TriggerCharacter=2]="TriggerCharacter",n[n.ContentChange=3]="ContentChange"})(pw||(pw={}));var mw;(function(n){n[n.File=0]="File",n[n.Module=1]="Module",n[n.Namespace=2]="Namespace",n[n.Package=3]="Package",n[n.Class=4]="Class",n[n.Method=5]="Method",n[n.Property=6]="Property",n[n.Field=7]="Field",n[n.Constructor=8]="Constructor",n[n.Enum=9]="Enum",n[n.Interface=10]="Interface",n[n.Function=11]="Function",n[n.Variable=12]="Variable",n[n.Constant=13]="Constant",n[n.String=14]="String",n[n.Number=15]="Number",n[n.Boolean=16]="Boolean",n[n.Array=17]="Array",n[n.Object=18]="Object",n[n.Key=19]="Key",n[n.Null=20]="Null",n[n.EnumMember=21]="EnumMember",n[n.Struct=22]="Struct",n[n.Event=23]="Event",n[n.Operator=24]="Operator",n[n.TypeParameter=25]="TypeParameter"})(mw||(mw={}));var _w;(function(n){n[n.Deprecated=1]="Deprecated"})(_w||(_w={}));var bw;(function(n){n[n.Hidden=0]="Hidden",n[n.Blink=1]="Blink",n[n.Smooth=2]="Smooth",n[n.Phase=3]="Phase",n[n.Expand=4]="Expand",n[n.Solid=5]="Solid"})(bw||(bw={}));var vw;(function(n){n[n.Line=1]="Line",n[n.Block=2]="Block",n[n.Underline=3]="Underline",n[n.LineThin=4]="LineThin",n[n.BlockOutline=5]="BlockOutline",n[n.UnderlineThin=6]="UnderlineThin"})(vw||(vw={}));var ww;(function(n){n[n.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",n[n.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",n[n.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",n[n.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(ww||(ww={}));var Cw;(function(n){n[n.None=0]="None",n[n.Same=1]="Same",n[n.Indent=2]="Indent",n[n.DeepIndent=3]="DeepIndent"})(Cw||(Cw={}));class xg{static chord(e,t){return ZF(e,t)}}xg.CtrlCmd=2048;xg.Shift=1024;xg.Alt=512;xg.WinCtrl=256;function DT(){return{editor:void 0,languages:void 0,CancellationTokenSource:vl,Emitter:q,KeyCode:iw,KeyMod:xg,Position:Y,Range:$,Selection:at,SelectionDirection:gw,MarkerSeverity:nw,MarkerTag:sw,Uri:nt,Token:Nf}}class C6{constructor(e){this.fn=e,this.lastCache=void 0,this.lastArgKey=void 0}get(e){const t=JSON.stringify(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this.fn(e)),this.lastCache}}class hD{get cachedValues(){return this._map}constructor(e){this.fn=e,this._map=new Map}get(e){if(this._map.has(e))return this._map.get(e);const t=this.fn(e);return this._map.set(e,t),t}}class Dg{constructor(e){this.executor=e,this._didRun=!1}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}var wu;function y6(n){return!n||typeof n!="string"?!0:n.trim().length===0}const S6=/{(\d+)}/g;function yw(n,...e){return e.length===0?n:n.replace(S6,function(t,i){const s=parseInt(i,10);return isNaN(s)||s<0||s>=e.length?t:e[s]})}function Sw(n){return n.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function ta(n){return n.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function S_(n,e){if(!n||!e)return n;const t=e.length;if(t===0||n.length===0)return n;let i=0;for(;n.indexOf(e,i)===i;)i=i+t;return n.substring(i)}function L6(n,e){if(!n||!e)return n;const t=e.length,i=n.length;if(t===0||i===0)return n;let s=i,o=-1;for(;o=n.lastIndexOf(e,s-1),!(o===-1||o+t!==s);){if(o===0)return"";s=o}return n.substring(0,s)}function x6(n){return n.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function kT(n,e,t={}){if(!n)throw new Error("Cannot create regex from empty string");e||(n=ta(n)),t.wholeWord&&(/\B/.test(n.charAt(0))||(n="\\b"+n),/\B/.test(n.charAt(n.length-1))||(n=n+"\\b"));let i="";return t.global&&(i+="g"),t.matchCase||(i+="i"),t.multiline&&(i+="m"),t.unicode&&(i+="u"),new RegExp(n,i)}function D6(n){return n.source==="^"||n.source==="^$"||n.source==="$"||n.source==="^\\s*$"?!1:!!(n.exec("")&&n.lastIndex===0)}function kg(n){return n.split(/\r\n|\r|\n/)}function Jn(n){for(let e=0,t=n.length;e<t;e++){const i=n.charCodeAt(e);if(i!==32&&i!==9)return e}return-1}function $n(n,e=0,t=n.length){for(let i=e;i<t;i++){const s=n.charCodeAt(i);if(s!==32&&s!==9)return n.substring(e,i)}return n.substring(e,t)}function Fc(n,e=n.length-1){for(let t=e;t>=0;t--){const i=n.charCodeAt(t);if(i!==32&&i!==9)return t}return-1}function Lw(n,e){return n<e?-1:n>e?1:0}function _S(n,e,t=0,i=n.length,s=0,o=e.length){for(;t<i&&s<o;t++,s++){const l=n.charCodeAt(t),c=e.charCodeAt(s);if(l<c)return-1;if(l>c)return 1}const r=i-t,a=o-s;return r<a?-1:r>a?1:0}function fD(n,e){return Eg(n,e,0,n.length,0,e.length)}function Eg(n,e,t=0,i=n.length,s=0,o=e.length){for(;t<i&&s<o;t++,s++){let l=n.charCodeAt(t),c=e.charCodeAt(s);if(l===c)continue;if(l>=128||c>=128)return _S(n.toLowerCase(),e.toLowerCase(),t,i,s,o);wd(l)&&(l-=32),wd(c)&&(c-=32);const d=l-c;if(d!==0)return d}const r=i-t,a=o-s;return r<a?-1:r>a?1:0}function gp(n){return n>=48&&n<=57}function wd(n){return n>=97&&n<=122}function ka(n){return n>=65&&n<=90}function Cd(n,e){return n.length===e.length&&Eg(n,e)===0}function bS(n,e){const t=e.length;return e.length>n.length?!1:Eg(n,e,0,t)===0}function xw(n,e){const t=Math.min(n.length,e.length);let i;for(i=0;i<t;i++)if(n.charCodeAt(i)!==e.charCodeAt(i))return i;return t}function Dw(n,e){const t=Math.min(n.length,e.length);let i;const s=n.length-1,o=e.length-1;for(i=0;i<t;i++)if(n.charCodeAt(s-i)!==e.charCodeAt(o-i))return i;return t}function Ni(n){return 55296<=n&&n<=56319}function Cu(n){return 56320<=n&&n<=57343}function vS(n,e){return(n-55296<<10)+(e-56320)+65536}function Ym(n,e,t){const i=n.charCodeAt(t);if(Ni(i)&&t+1<e){const s=n.charCodeAt(t+1);if(Cu(s))return vS(i,s)}return i}function k6(n,e){const t=n.charCodeAt(e-1);if(Cu(t)&&e>1){const i=n.charCodeAt(e-2);if(Ni(i))return vS(i,t)}return t}class wS{get offset(){return this._offset}constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){const e=k6(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){const e=Ym(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}}class Xm{get offset(){return this._iterator.offset}constructor(e,t=0){this._iterator=new wS(e,t)}nextGraphemeLength(){const e=Fa.getInstance(),t=this._iterator,i=t.offset;let s=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const o=t.offset,r=e.getGraphemeBreakType(t.nextCodePoint());if(gD(s,r)){t.setOffset(o);break}s=r}return t.offset-i}prevGraphemeLength(){const e=Fa.getInstance(),t=this._iterator,i=t.offset;let s=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const o=t.offset,r=e.getGraphemeBreakType(t.prevCodePoint());if(gD(r,s)){t.setOffset(o);break}s=r}return i-t.offset}eol(){return this._iterator.eol()}}function CS(n,e){return new Xm(n,e).nextGraphemeLength()}function ET(n,e){return new Xm(n,e).prevGraphemeLength()}function E6(n,e){e>0&&Cu(n.charCodeAt(e))&&e--;const t=e+CS(n,e);return[t-ET(n,t),t]}let z1;function I6(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function Tf(n){return z1||(z1=I6()),z1.test(n)}const N6=/^[\t\n\r\x20-\x7E]*$/;function yS(n){return N6.test(n)}const IT=/[\u2028\u2029]/;function NT(n){return IT.test(n)}function cl(n){return n>=11904&&n<=55215||n>=63744&&n<=64255||n>=65281&&n<=65374}function SS(n){return n>=127462&&n<=127487||n===8986||n===8987||n===9200||n===9203||n>=9728&&n<=10175||n===11088||n===11093||n>=127744&&n<=128591||n>=128640&&n<=128764||n>=128992&&n<=129008||n>=129280&&n<=129535||n>=129648&&n<=129782}const T6=String.fromCharCode(65279);function LS(n){return!!(n&&n.length>0&&n.charCodeAt(0)===65279)}function TT(n){return n=n%(2*26),n<26?String.fromCharCode(97+n):String.fromCharCode(65+n-26)}function gD(n,e){return n===0?e!==5&&e!==7:n===2&&e===3?!1:n===4||n===2||n===3||e===4||e===2||e===3?!0:!(n===8&&(e===8||e===9||e===11||e===12)||(n===11||n===9)&&(e===9||e===10)||(n===12||n===10)&&e===10||e===5||e===13||e===7||n===1||n===13&&e===14||n===6&&e===6)}class Fa{static getInstance(){return Fa._INSTANCE||(Fa._INSTANCE=new Fa),Fa._INSTANCE}constructor(){this._data=A6()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,i=t.length/3;let s=1;for(;s<=i;)if(e<t[3*s])s=2*s;else if(e>t[3*s+1])s=2*s+1;else return t[3*s+2];return 0}}Fa._INSTANCE=null;function A6(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function M6(n,e){if(n===0)return 0;const t=R6(n,e);if(t!==void 0)return t;const i=new wS(e,n);return i.prevCodePoint(),i.offset}function R6(n,e){const t=new wS(e,n);let i=t.prevCodePoint();for(;P6(i)||i===65039||i===8419;){if(t.offset===0)return;i=t.prevCodePoint()}if(!SS(i))return;let s=t.offset;return s>0&&t.prevCodePoint()===8205&&(s=t.offset),s}function P6(n){return 127995<=n&&n<=127999}class Lc{static getInstance(e){return wu.cache.get(Array.from(e))}static getLocales(){return wu._locales.value}constructor(e){this.confusableDictionary=e}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}}wu=Lc;Lc.ambiguousCharacterData=new Dg(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'));Lc.cache=new C6(n=>{function e(c){const d=new Map;for(let u=0;u<c.length;u+=2)d.set(c[u],c[u+1]);return d}function t(c,d){const u=new Map(c);for(const[h,f]of d)u.set(h,f);return u}function i(c,d){if(!c)return d;const u=new Map;for(const[h,f]of c)d.has(h)&&u.set(h,f);return u}const s=wu.ambiguousCharacterData.value;let o=n.filter(c=>!c.startsWith("_")&&c in s);o.length===0&&(o=["_default"]);let r;for(const c of o){const d=e(s[c]);r=i(r,d)}const a=e(s._common),l=t(a,r);return new wu(l)});Lc._locales=new Dg(()=>Object.keys(wu.ambiguousCharacterData.value).filter(n=>!n.startsWith("_")));class Ja{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(Ja.getRawData())),this._data}static isInvisibleCharacter(e){return Ja.getData().has(e)}static get codePoints(){return Ja.getData()}}Ja._data=void 0;class kw{constructor(){this._zoomFactor=1}getZoomFactor(){return this._zoomFactor}}kw.INSTANCE=new kw;class O6 extends oe{constructor(){super(),this._onDidChange=this._register(new q),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(!0),this._mediaQueryList=null,this._handleChange(!1)}_handleChange(e){var t;(t=this._mediaQueryList)===null||t===void 0||t.removeEventListener("change",this._listener),this._mediaQueryList=window.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),e&&this._onDidChange.fire()}}class F6 extends oe{get value(){return this._value}constructor(){super(),this._onDidChange=this._register(new q),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio();const e=this._register(new O6);this._register(e.onDidChange(()=>{this._value=this._getPixelRatio(),this._onDidChange.fire(this._value)}))}_getPixelRatio(){const e=document.createElement("canvas").getContext("2d"),t=window.devicePixelRatio||1,i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/i}}class B6{constructor(){this._pixelRatioMonitor=null}_getOrCreatePixelRatioMonitor(){return this._pixelRatioMonitor||(this._pixelRatioMonitor=new F6),this._pixelRatioMonitor}get value(){return this._getOrCreatePixelRatioMonitor().value}get onDidChange(){return this._getOrCreatePixelRatioMonitor().onDidChange}}function AT(n,e){typeof n=="string"&&(n=window.matchMedia(n)),n.addEventListener("change",e)}const Qm=new B6;function V6(){return kw.INSTANCE.getZoomFactor()}const Yu=navigator.userAgent,io=Yu.indexOf("Firefox")>=0,ac=Yu.indexOf("AppleWebKit")>=0,xS=Yu.indexOf("Chrome")>=0,ia=!xS&&Yu.indexOf("Safari")>=0,MT=!xS&&!ia&&ac;Yu.indexOf("Electron/")>=0;const pD=Yu.indexOf("Android")>=0;let fm=!1;if(window.matchMedia){const n=window.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),e=window.matchMedia("(display-mode: fullscreen)");fm=n.matches,AT(n,({matches:t})=>{fm&&e.matches||(fm=t)})}function W6(){return fm}class RT{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingLeft="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){const t=co(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){const t=co(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){const t=co(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){const t=co(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){const t=co(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){const t=co(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){const t=co(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingLeft(e){const t=co(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){const t=co(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){const t=co(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){const t=co(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function co(n){return typeof n=="number"?`${n}px`:n}function tt(n){return new RT(n)}function $i(n,e){n instanceof RT?(n.setFontFamily(e.getMassagedFontFamily()),n.setFontWeight(e.fontWeight),n.setFontSize(e.fontSize),n.setFontFeatureSettings(e.fontFeatureSettings),n.setFontVariationSettings(e.fontVariationSettings),n.setLineHeight(e.lineHeight),n.setLetterSpacing(e.letterSpacing)):(n.style.fontFamily=e.getMassagedFontFamily(),n.style.fontWeight=e.fontWeight,n.style.fontSize=e.fontSize+"px",n.style.fontFeatureSettings=e.fontFeatureSettings,n.style.fontVariationSettings=e.fontVariationSettings,n.style.lineHeight=e.lineHeight+"px",n.style.letterSpacing=e.letterSpacing+"px")}class H6{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class DS{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(){this._createDomElements(),document.body.appendChild(this._container),this._readFromDomElements(),document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){const e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";const t=document.createElement("div");$i(t,this._bareFontInfo),e.appendChild(t);const i=document.createElement("div");$i(i,this._bareFontInfo),i.style.fontWeight="bold",e.appendChild(i);const s=document.createElement("div");$i(s,this._bareFontInfo),s.style.fontStyle="italic",e.appendChild(s);const o=[];for(const r of this._requests){let a;r.type===0&&(a=t),r.type===2&&(a=i),r.type===1&&(a=s),a.appendChild(document.createElement("br"));const l=document.createElement("span");DS._render(l,r),a.appendChild(l),o.push(l)}this._container=e,this._testElements=o}static _render(e,t){if(t.chr===" "){let i=" ";for(let s=0;s<8;s++)i+=i;e.innerText=i}else{let i=t.chr;for(let s=0;s<8;s++)i+=i;e.textContent=i}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const i=this._requests[e],s=this._testElements[e];i.fulfill(s.offsetWidth/256)}}}function $6(n,e){new DS(n,e).read()}const Na=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new q,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(n){n=Math.min(Math.max(-5,n),20),this._zoomLevel!==n&&(this._zoomLevel=n,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},z6=gt?1.5:1.35,U1=8;class lc{static createFromValidatedSettings(e,t,i){const s=e.get(48),o=e.get(52),r=e.get(51),a=e.get(50),l=e.get(53),c=e.get(65),d=e.get(62);return lc._create(s,o,r,a,l,c,d,t,i)}static _create(e,t,i,s,o,r,a,l,c){r===0?r=z6*i:r<U1&&(r=r*i),r=Math.round(r),r<U1&&(r=U1);const d=1+(c?0:Na.getZoomLevel()*.1);return i*=d,r*=d,o===Co.TRANSLATE&&(t==="normal"||t==="bold"?o=Co.OFF:(o=`'wght' ${parseInt(t,10)}`,t="normal")),new lc({pixelRatio:l,fontFamily:e,fontWeight:t,fontSize:i,fontFeatureSettings:s,fontVariationSettings:o,lineHeight:r,letterSpacing:a})}constructor(e){this._bareFontInfoBrand=void 0,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.fontVariationSettings=e.fontVariationSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){const e=Rs.fontFamily,t=lc._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}const U6=2;class Ew extends lc{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=U6,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.fontVariationSettings===e.fontVariationSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}class q6 extends oe{constructor(){super(),this._onDidChange=this._register(new q),this.onDidChange=this._onDidChange.event,this._cache=new mD,this._evictUntrustedReadingsTimeout=-1}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(window.clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache=new mD,this._onDidChange.fire()}_writeToCache(e,t){this._cache.put(e,t),!t.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=window.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings()},5e3))}_evictUntrustedReadings(){const e=this._cache.getValues();let t=!1;for(const i of e)i.isTrusted||(t=!0,this._cache.remove(i));t&&this._onDidChange.fire()}readFontInfo(e){if(!this._cache.has(e)){let t=this._actualReadFontInfo(e);(t.typicalHalfwidthCharacterWidth<=2||t.typicalFullwidthCharacterWidth<=2||t.spaceWidth<=2||t.maxDigitWidth<=2)&&(t=new Ew({pixelRatio:Qm.value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,fontVariationSettings:t.fontVariationSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:t.isMonospace,typicalHalfwidthCharacterWidth:Math.max(t.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(t.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:t.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(t.spaceWidth,5),middotWidth:Math.max(t.middotWidth,5),wsmiddotWidth:Math.max(t.wsmiddotWidth,5),maxDigitWidth:Math.max(t.maxDigitWidth,5)},!1)),this._writeToCache(e,t)}return this._cache.get(e)}_createRequest(e,t,i,s){const o=new H6(e,t);return i.push(o),s==null||s.push(o),o}_actualReadFontInfo(e){const t=[],i=[],s=this._createRequest("n",0,t,i),o=this._createRequest("ｍ",0,t,null),r=this._createRequest(" ",0,t,i),a=this._createRequest("0",0,t,i),l=this._createRequest("1",0,t,i),c=this._createRequest("2",0,t,i),d=this._createRequest("3",0,t,i),u=this._createRequest("4",0,t,i),h=this._createRequest("5",0,t,i),f=this._createRequest("6",0,t,i),g=this._createRequest("7",0,t,i),p=this._createRequest("8",0,t,i),_=this._createRequest("9",0,t,i),v=this._createRequest("→",0,t,i),b=this._createRequest("￫",0,t,null),w=this._createRequest("·",0,t,i),C=this._createRequest(String.fromCharCode(11825),0,t,null),S="|/-_ilm%";for(let A=0,T=S.length;A<T;A++)this._createRequest(S.charAt(A),0,t,i),this._createRequest(S.charAt(A),1,t,i),this._createRequest(S.charAt(A),2,t,i);$6(e,t);const k=Math.max(a.width,l.width,c.width,d.width,u.width,h.width,f.width,g.width,p.width,_.width);let L=e.fontFeatureSettings===Kn.OFF;const x=i[0].width;for(let A=1,T=i.length;L&&A<T;A++){const O=x-i[A].width;if(O<-.001||O>.001){L=!1;break}}let I=!0;return L&&b.width!==x&&(I=!1),b.width>v.width&&(I=!1),new Ew({pixelRatio:Qm.value,fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontSize:e.fontSize,fontFeatureSettings:e.fontFeatureSettings,fontVariationSettings:e.fontVariationSettings,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,isMonospace:L,typicalHalfwidthCharacterWidth:s.width,typicalFullwidthCharacterWidth:o.width,canUseHalfwidthRightwardsArrow:I,spaceWidth:r.width,middotWidth:w.width,wsmiddotWidth:C.width,maxDigitWidth:k},!0)}}class mD{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const i=e.getId();this._keys[i]=e,this._values[i]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}const Iw=new q6;var So;(function(n){n.serviceIds=new Map,n.DI_TARGET="$di$target",n.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[n.DI_DEPENDENCIES]||[]}n.getServiceDependencies=e})(So||(So={}));const ai=ct("instantiationService");function j6(n,e,t){e[So.DI_TARGET]===e?e[So.DI_DEPENDENCIES].push({id:n,index:t}):(e[So.DI_DEPENDENCIES]=[{id:n,index:t}],e[So.DI_TARGET]=e)}function ct(n){if(So.serviceIds.has(n))return So.serviceIds.get(n);const e=function(t,i,s){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");j6(e,t,s)};return e.toString=()=>n,So.serviceIds.set(n,e),e}const oi=ct("codeEditorService");function Jh(n,e){if(!n)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}function kS(n,e="Unreachable"){throw new Error(e)}function Af(n){if(!n()){debugger;n(),$t(new Ai("Assertion Failed"))}}function PT(n,e){let t=0;for(;t<n.length-1;){const i=n[t],s=n[t+1];if(!e(i,s))return!1;t++}return!0}const Xu=ct("audioCue");class $e{static register(e){return new $e(e.fileName)}constructor(e){this.fileName=e}}$e.error=$e.register({fileName:"error.mp3"});$e.warning=$e.register({fileName:"warning.mp3"});$e.foldedArea=$e.register({fileName:"foldedAreas.mp3"});$e.break=$e.register({fileName:"break.mp3"});$e.quickFixes=$e.register({fileName:"quickFixes.mp3"});$e.taskCompleted=$e.register({fileName:"taskCompleted.mp3"});$e.taskFailed=$e.register({fileName:"taskFailed.mp3"});$e.terminalBell=$e.register({fileName:"terminalBell.mp3"});$e.diffLineInserted=$e.register({fileName:"diffLineInserted.mp3"});$e.diffLineDeleted=$e.register({fileName:"diffLineDeleted.mp3"});$e.diffLineModified=$e.register({fileName:"diffLineModified.mp3"});$e.chatRequestSent=$e.register({fileName:"chatRequestSent.mp3"});$e.chatResponsePending=$e.register({fileName:"chatResponsePending.mp3"});$e.chatResponseReceived1=$e.register({fileName:"chatResponseReceived1.mp3"});$e.chatResponseReceived2=$e.register({fileName:"chatResponseReceived2.mp3"});$e.chatResponseReceived3=$e.register({fileName:"chatResponseReceived3.mp3"});$e.chatResponseReceived4=$e.register({fileName:"chatResponseReceived4.mp3"});class K6{constructor(e){this.randomOneOf=e}}class Ke{static register(e){const t=new K6("randomOneOf"in e.sound?e.sound.randomOneOf:[e.sound]),i=new Ke(t,e.name,e.settingsKey);return Ke._audioCues.add(i),i}constructor(e,t,i){this.sound=e,this.name=t,this.settingsKey=i}}Ke._audioCues=new Set;Ke.error=Ke.register({name:m("audioCues.lineHasError.name","Error on Line"),sound:$e.error,settingsKey:"audioCues.lineHasError"});Ke.warning=Ke.register({name:m("audioCues.lineHasWarning.name","Warning on Line"),sound:$e.warning,settingsKey:"audioCues.lineHasWarning"});Ke.foldedArea=Ke.register({name:m("audioCues.lineHasFoldedArea.name","Folded Area on Line"),sound:$e.foldedArea,settingsKey:"audioCues.lineHasFoldedArea"});Ke.break=Ke.register({name:m("audioCues.lineHasBreakpoint.name","Breakpoint on Line"),sound:$e.break,settingsKey:"audioCues.lineHasBreakpoint"});Ke.inlineSuggestion=Ke.register({name:m("audioCues.lineHasInlineSuggestion.name","Inline Suggestion on Line"),sound:$e.quickFixes,settingsKey:"audioCues.lineHasInlineSuggestion"});Ke.terminalQuickFix=Ke.register({name:m("audioCues.terminalQuickFix.name","Terminal Quick Fix"),sound:$e.quickFixes,settingsKey:"audioCues.terminalQuickFix"});Ke.onDebugBreak=Ke.register({name:m("audioCues.onDebugBreak.name","Debugger Stopped on Breakpoint"),sound:$e.break,settingsKey:"audioCues.onDebugBreak"});Ke.noInlayHints=Ke.register({name:m("audioCues.noInlayHints","No Inlay Hints on Line"),sound:$e.error,settingsKey:"audioCues.noInlayHints"});Ke.taskCompleted=Ke.register({name:m("audioCues.taskCompleted","Task Completed"),sound:$e.taskCompleted,settingsKey:"audioCues.taskCompleted"});Ke.taskFailed=Ke.register({name:m("audioCues.taskFailed","Task Failed"),sound:$e.taskFailed,settingsKey:"audioCues.taskFailed"});Ke.terminalCommandFailed=Ke.register({name:m("audioCues.terminalCommandFailed","Terminal Command Failed"),sound:$e.error,settingsKey:"audioCues.terminalCommandFailed"});Ke.terminalBell=Ke.register({name:m("audioCues.terminalBell","Terminal Bell"),sound:$e.terminalBell,settingsKey:"audioCues.terminalBell"});Ke.notebookCellCompleted=Ke.register({name:m("audioCues.notebookCellCompleted","Notebook Cell Completed"),sound:$e.taskCompleted,settingsKey:"audioCues.notebookCellCompleted"});Ke.notebookCellFailed=Ke.register({name:m("audioCues.notebookCellFailed","Notebook Cell Failed"),sound:$e.taskFailed,settingsKey:"audioCues.notebookCellFailed"});Ke.diffLineInserted=Ke.register({name:m("audioCues.diffLineInserted","Diff Line Inserted"),sound:$e.diffLineInserted,settingsKey:"audioCues.diffLineInserted"});Ke.diffLineDeleted=Ke.register({name:m("audioCues.diffLineDeleted","Diff Line Deleted"),sound:$e.diffLineDeleted,settingsKey:"audioCues.diffLineDeleted"});Ke.diffLineModified=Ke.register({name:m("audioCues.diffLineModified","Diff Line Modified"),sound:$e.diffLineModified,settingsKey:"audioCues.diffLineModified"});Ke.chatRequestSent=Ke.register({name:m("audioCues.chatRequestSent","Chat Request Sent"),sound:$e.chatRequestSent,settingsKey:"audioCues.chatRequestSent"});Ke.chatResponseReceived=Ke.register({name:m("audioCues.chatResponseReceived","Chat Response Received"),settingsKey:"audioCues.chatResponseReceived",sound:{randomOneOf:[$e.chatResponseReceived1,$e.chatResponseReceived2,$e.chatResponseReceived3,$e.chatResponseReceived4]}});Ke.chatResponsePending=Ke.register({name:m("audioCues.chatResponsePending","Chat Response Pending"),sound:$e.chatResponsePending,settingsKey:"audioCues.chatResponsePending"});function q1(...n){switch(n.length){case 1:return m("contextkey.scanner.hint.didYouMean1","Did you mean {0}?",n[0]);case 2:return m("contextkey.scanner.hint.didYouMean2","Did you mean {0} or {1}?",n[0],n[1]);case 3:return m("contextkey.scanner.hint.didYouMean3","Did you mean {0}, {1} or {2}?",n[0],n[1],n[2]);default:return}}const G6=m("contextkey.scanner.hint.didYouForgetToOpenOrCloseQuote","Did you forget to open or close the quote?"),Z6=m("contextkey.scanner.hint.didYouForgetToEscapeSlash","Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'.");class Yo{constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(e){switch(e.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return e.isTripleEq?"===":"==";case 4:return e.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return e.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return e.lexeme;case 18:return e.lexeme;case 19:return e.lexeme;case 20:return"EOF";default:throw dS(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){const t=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:t})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){const t=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:t})}else this._match(126)?this._addToken(9):this._error(q1("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(q1("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(q1("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(e){return this._isAtEnd()||this._input.charCodeAt(this._current)!==e?!1:(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){const t=this._start,i=this._input.substring(this._start,this._current),s={type:19,offset:this._start,lexeme:i};this._errors.push({offset:t,lexeme:i,additionalInfo:e}),this._tokens.push(s)}_string(){this.stringRe.lastIndex=this._start;const e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;const t=this._input.substring(this._start,this._current),i=Yo._keywords.get(t);i?this._addToken(i):this._tokens.push({type:17,lexeme:t,offset:this._start})}}_quotedString(){for(;this._peek()!==39&&!this._isAtEnd();)this._advance();if(this._isAtEnd()){this._error(G6);return}this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1})}_regex(){let e=this._current,t=!1,i=!1;for(;;){if(e>=this._input.length){this._current=e,this._error(Z6);return}const o=this._input.charCodeAt(e);if(t)t=!1;else if(o===47&&!i){e++;break}else o===91?i=!0:o===92?t=!0:o===93&&(i=!1);e++}for(;e<this._input.length&&Yo._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;const s=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:s,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}}Yo._regexFlags=new Set(["i","g","s","m","y","u"].map(n=>n.charCodeAt(0)));Yo._keywords=new Map([["not",14],["in",13],["false",12],["true",11]]);const en=new Map;en.set("false",!1);en.set("true",!0);en.set("isMac",gt);en.set("isLinux",Cn);en.set("isWindows",is);en.set("isWeb",Gu);en.set("isMacNative",gt&&!Gu);en.set("isEdge",j7);en.set("isFirefox",U7);en.set("isChrome",rT);en.set("isSafari",q7);const Y6=Object.prototype.hasOwnProperty,X6={regexParsingWithErrorRecovery:!0},Q6=m("contextkey.parser.error.emptyString","Empty context key expression"),J6=m("contextkey.parser.error.emptyString.hint","Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),eB=m("contextkey.parser.error.noInAfterNot","'in' after 'not'."),_D=m("contextkey.parser.error.closingParenthesis","closing parenthesis ')'"),tB=m("contextkey.parser.error.unexpectedToken","Unexpected token"),iB=m("contextkey.parser.error.unexpectedToken.hint","Did you forget to put && or || before the token?"),nB=m("contextkey.parser.error.unexpectedEOF","Unexpected end of expression"),sB=m("contextkey.parser.error.unexpectedEOF.hint","Did you forget to put a context key?");let OT=class Th{constructor(e=X6){this._config=e,this._scanner=new Yo,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}parse(e){if(e===""){this._parsingErrors.push({message:Q6,offset:0,lexeme:"",additionalInfo:J6});return}this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{const t=this._expr();if(!this._isAtEnd()){const i=this._peek(),s=i.type===17?iB:void 0;throw this._parsingErrors.push({message:tB,offset:i.offset,lexeme:Yo.getLexeme(i),additionalInfo:s}),Th._parseError}return t}catch(t){if(t!==Th._parseError)throw t;return}}_expr(){return this._or()}_or(){const e=[this._and()];for(;this._matchOne(16);){const t=this._and();e.push(t)}return e.length===1?e[0]:Ct.or(...e)}_and(){const e=[this._term()];for(;this._matchOne(15);){const t=this._term();e.push(t)}return e.length===1?e[0]:Ct.and(...e)}_term(){if(this._matchOne(2)){const e=this._peek();switch(e.type){case 11:return this._advance(),yn.INSTANCE;case 12:return this._advance(),Pn.INSTANCE;case 0:{this._advance();const t=this._expr();return this._consume(1,_D),t==null?void 0:t.negate()}case 17:return this._advance(),Vc.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){const e=this._peek();switch(e.type){case 11:return this._advance(),Ct.true();case 12:return this._advance(),Ct.false();case 0:{this._advance();const t=this._expr();return this._consume(1,_D),t}case 17:{const t=e.lexeme;if(this._advance(),this._matchOne(9)){const s=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),s.type!==10)throw this._errExpectedButGot("REGEX",s);const o=s.lexeme,r=o.lastIndexOf("/"),a=r===o.length-1?void 0:this._removeFlagsGY(o.substring(r+1));let l;try{l=new RegExp(o.substring(1,r),a)}catch{throw this._errExpectedButGot("REGEX",s)}return Mf.create(t,l)}switch(s.type){case 10:case 19:{const o=[s.lexeme];this._advance();let r=this._peek(),a=0;for(let h=0;h<s.lexeme.length;h++)s.lexeme.charCodeAt(h)===40?a++:s.lexeme.charCodeAt(h)===41&&a--;for(;!this._isAtEnd()&&r.type!==15&&r.type!==16;){switch(r.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let h=0;h<r.lexeme.length;h++)r.lexeme.charCodeAt(h)===40?a++:s.lexeme.charCodeAt(h)===41&&a--}if(a<0)break;o.push(Yo.getLexeme(r)),this._advance(),r=this._peek()}const l=o.join(""),c=l.lastIndexOf("/"),d=c===l.length-1?void 0:this._removeFlagsGY(l.substring(c+1));let u;try{u=new RegExp(l.substring(1,c),d)}catch{throw this._errExpectedButGot("REGEX",s)}return Ct.regex(t,u)}case 18:{const o=s.lexeme;this._advance();let r=null;if(!y6(o)){const a=o.indexOf("/"),l=o.lastIndexOf("/");if(a!==l&&a>=0){const c=o.slice(a+1,l),d=o[l+1]==="i"?"i":"";try{r=new RegExp(c,d)}catch{throw this._errExpectedButGot("REGEX",s)}}}if(r===null)throw this._errExpectedButGot("REGEX",s);return Mf.create(t,r)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,eB);const s=this._value();return Ct.notIn(t,s)}switch(this._peek().type){case 3:{this._advance();const s=this._value();if(this._previous().type===18)return Ct.equals(t,s);switch(s){case"true":return Ct.has(t);case"false":return Ct.not(t);default:return Ct.equals(t,s)}}case 4:{this._advance();const s=this._value();if(this._previous().type===18)return Ct.notEquals(t,s);switch(s){case"true":return Ct.not(t);case"false":return Ct.has(t);default:return Ct.notEquals(t,s)}}case 5:return this._advance(),N_.create(t,this._value());case 6:return this._advance(),T_.create(t,this._value());case 7:return this._advance(),E_.create(t,this._value());case 8:return this._advance(),I_.create(t,this._value());case 13:return this._advance(),Ct.in(t,this._value());default:return Ct.has(t)}}case 20:throw this._parsingErrors.push({message:nB,offset:e.offset,lexeme:"",additionalInfo:sB}),Th._parseError;default:throw this._errExpectedButGot(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this._peek())}}_value(){const e=this._peek();switch(e.type){case 17:case 18:return this._advance(),e.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return this._check(e)?(this._advance(),!0):!1}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(e,t,i){const s=m("contextkey.parser.error.expectedButGot",`Expected: {0}
Received: '{1}'.`,e,Yo.getLexeme(t)),o=t.offset,r=Yo.getLexeme(t);return this._parsingErrors.push({message:s,offset:o,lexeme:r,additionalInfo:i}),Th._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===20}};OT._parseError=new Error;class Ct{static false(){return yn.INSTANCE}static true(){return Pn.INSTANCE}static has(e){return Bc.create(e)}static equals(e,t){return Ig.create(e,t)}static notEquals(e,t){return D_.create(e,t)}static regex(e,t){return Mf.create(e,t)}static in(e,t){return L_.create(e,t)}static notIn(e,t){return x_.create(e,t)}static not(e){return Vc.create(e)}static and(...e){return Ql.create(e,null,!0)}static or(...e){return Or.create(e,null,!0)}static deserialize(e){return e==null?void 0:this._parser.parse(e)}}Ct._parser=new OT({regexParsingWithErrorRecovery:!1});function oB(n,e){const t=n?n.substituteConstants():void 0,i=e?e.substituteConstants():void 0;return!t&&!i?!0:!t||!i?!1:t.equals(i)}function ef(n,e){return n.cmp(e)}class yn{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return Pn.INSTANCE}}yn.INSTANCE=new yn;class Pn{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return yn.INSTANCE}}Pn.INSTANCE=new Pn;class Bc{static create(e,t=null){const i=en.get(e);return typeof i=="boolean"?i?Pn.INSTANCE:yn.INSTANCE:new Bc(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=2}cmp(e){return e.type!==this.type?this.type-e.type:BT(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=en.get(this.key);return typeof e=="boolean"?e?Pn.INSTANCE:yn.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=Vc.create(this.key,this)),this.negated}}class Ig{static create(e,t,i=null){if(typeof t=="boolean")return t?Bc.create(e,i):Vc.create(e,i);const s=en.get(e);return typeof s=="boolean"?t===(s?"true":"false")?Pn.INSTANCE:yn.INSTANCE:new Ig(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=4}cmp(e){return e.type!==this.type?this.type-e.type:Wc(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=en.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Pn.INSTANCE:yn.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=D_.create(this.key,this.value,this)),this.negated}}class L_{static create(e,t){return new L_(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}cmp(e){return e.type!==this.type?this.type-e.type:Wc(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),i=e.getValue(this.key);return Array.isArray(t)?t.includes(i):typeof i=="string"&&typeof t=="object"&&t!==null?Y6.call(t,i):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=x_.create(this.key,this.valueKey)),this.negated}}class x_{static create(e,t){return new x_(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=11,this._negated=L_.create(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}negate(){return this._negated}}class D_{static create(e,t,i=null){if(typeof t=="boolean")return t?Vc.create(e,i):Bc.create(e,i);const s=en.get(e);return typeof s=="boolean"?t===(s?"true":"false")?yn.INSTANCE:Pn.INSTANCE:new D_(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=5}cmp(e){return e.type!==this.type?this.type-e.type:Wc(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=en.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?yn.INSTANCE:Pn.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Ig.create(this.key,this.value,this)),this.negated}}class Vc{static create(e,t=null){const i=en.get(e);return typeof i=="boolean"?i?yn.INSTANCE:Pn.INSTANCE:new Vc(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=3}cmp(e){return e.type!==this.type?this.type-e.type:BT(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=en.get(this.key);return typeof e=="boolean"?e?yn.INSTANCE:Pn.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Bc.create(this.key,this)),this.negated}}function k_(n,e){if(typeof n=="string"){const t=parseFloat(n);isNaN(t)||(n=t)}return typeof n=="string"||typeof n=="number"?e(n):yn.INSTANCE}class E_{static create(e,t,i=null){return k_(t,s=>new E_(e,s,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=12}cmp(e){return e.type!==this.type?this.type-e.type:Wc(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=T_.create(this.key,this.value,this)),this.negated}}class I_{static create(e,t,i=null){return k_(t,s=>new I_(e,s,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=13}cmp(e){return e.type!==this.type?this.type-e.type:Wc(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=N_.create(this.key,this.value,this)),this.negated}}class N_{static create(e,t,i=null){return k_(t,s=>new N_(e,s,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=14}cmp(e){return e.type!==this.type?this.type-e.type:Wc(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=I_.create(this.key,this.value,this)),this.negated}}class T_{static create(e,t,i=null){return k_(t,s=>new T_(e,s,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=15}cmp(e){return e.type!==this.type?this.type-e.type:Wc(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=E_.create(this.key,this.value,this)),this.negated}}class Mf{static create(e,t){return new Mf(e,t)}constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return t<i?-1:t>i?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return this.key===e.key&&t===i}return!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ES.create(this)),this.negated}}class ES{static create(e){return new ES(e)}constructor(e){this._actual=e,this.type=8}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}negate(){return this._actual}}function FT(n){let e=null;for(let t=0,i=n.length;t<i;t++){const s=n[t].substituteConstants();if(n[t]!==s&&e===null){e=[];for(let o=0;o<t;o++)e[o]=n[o]}e!==null&&(e[t]=s)}return e===null?n:e}class Ql{static create(e,t,i){return Ql._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=6}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const s=ef(this.expr[t],e.expr[t]);if(s!==0)return s}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=FT(this.expr);return e===this.expr?this:Ql.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t,i){const s=[];let o=!1;for(const r of e)if(r){if(r.type===1){o=!0;continue}if(r.type===0)return yn.INSTANCE;if(r.type===6){s.push(...r.expr);continue}s.push(r)}if(s.length===0&&o)return Pn.INSTANCE;if(s.length!==0){if(s.length===1)return s[0];s.sort(ef);for(let r=1;r<s.length;r++)s[r-1].equals(s[r])&&(s.splice(r,1),r--);if(s.length===1)return s[0];for(;s.length>1;){const r=s[s.length-1];if(r.type!==9)break;s.pop();const a=s.pop(),l=s.length===0,c=Or.create(r.expr.map(d=>Ql.create([d,a],null,i)),null,l);c&&(s.push(c),s.sort(ef))}if(s.length===1)return s[0];if(i){for(let r=0;r<s.length;r++)for(let a=r+1;a<s.length;a++)if(s[r].negate().equals(s[a]))return yn.INSTANCE;if(s.length===1)return s[0]}return new Ql(s,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());this.negated=Or.create(e,this,!0)}return this.negated}}class Or{static create(e,t,i){return Or._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=9}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const s=ef(this.expr[t],e.expr[t]);if(s!==0)return s}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=FT(this.expr);return e===this.expr?this:Or.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,i){let s=[],o=!1;if(e){for(let r=0,a=e.length;r<a;r++){const l=e[r];if(l){if(l.type===0){o=!0;continue}if(l.type===1)return Pn.INSTANCE;if(l.type===9){s=s.concat(l.expr);continue}s.push(l)}}if(s.length===0&&o)return yn.INSTANCE;s.sort(ef)}if(s.length!==0){if(s.length===1)return s[0];for(let r=1;r<s.length;r++)s[r-1].equals(s[r])&&(s.splice(r,1),r--);if(s.length===1)return s[0];if(i){for(let r=0;r<s.length;r++)for(let a=r+1;a<s.length;a++)if(s[r].negate().equals(s[a]))return Pn.INSTANCE;if(s.length===1)return s[0]}return new Or(s,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),i=e.shift(),s=[];for(const o of vD(t))for(const r of vD(i))s.push(Ql.create([o,r],null,!1));e.unshift(Or.create(s,null,!1))}this.negated=Or.create(e,this,!0)}return this.negated}}class Ie extends Bc{static all(){return Ie._info.values()}constructor(e,t,i){super(e,null),this._defaultValue=t,typeof i=="object"?Ie._info.push(Object.assign(Object.assign({},i),{key:e})):i!==!0&&Ie._info.push({key:e,description:i,type:t!=null?typeof t:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return Ig.create(this.key,e)}}Ie._info=[];const Et=ct("contextKeyService");function BT(n,e){return n<e?-1:n>e?1:0}function Wc(n,e,t,i){return n<t?-1:n>t?1:e<i?-1:e>i?1:0}function Nw(n,e){if(n.type===0||e.type===1)return!0;if(n.type===9)return e.type===9?bD(n.expr,e.expr):!1;if(e.type===9){for(const t of e.expr)if(Nw(n,t))return!0;return!1}if(n.type===6){if(e.type===6)return bD(e.expr,n.expr);for(const t of n.expr)if(Nw(t,e))return!0;return!1}return n.equals(e)}function bD(n,e){let t=0,i=0;for(;t<n.length&&i<e.length;){const s=n[t].cmp(e[i]);if(s<0)return!1;s===0&&t++,i++}return t===n.length}function vD(n){return n.type===9?n.expr:[n]}const Hc=ct("accessibilityService"),rB=new Ie("accessibilityModeEnabled",!1);var aB=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},j1=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};const lB={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0,findResultLoop:!0};let Jm=class extends oe{constructor(e,t={},i,s,o){super(),this._audioCueService=i,this._codeEditorService=s,this._accessibilityService=o,this._onDidUpdate=this._register(new q),this._editor=e,this._options=iT(t,lB,!1),this.disposed=!1,this.nextIdx=-1,this.ranges=[],this.ignoreSelectionChange=!1,this.revealFirst=!!this._options.alwaysRevealFirst,this._register(this._editor.onDidUpdateDiff(()=>this._onDiffUpdated())),this._options.followsCaret&&this._register(this._editor.getModifiedEditor().onDidChangeCursorPosition(r=>{this.ignoreSelectionChange||(this._updateAccessibilityState(r.position.lineNumber),this.nextIdx=-1)})),this._init()}_init(){this._editor.getLineChanges()}_onDiffUpdated(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&this._editor.getLineChanges()!==null&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))}_compute(e){this.ranges=[],e&&e.forEach(t=>{!this._options.ignoreCharChanges&&t.charChanges?t.charChanges.forEach(i=>{this.ranges.push({rhs:!0,range:new $(i.modifiedStartLineNumber,i.modifiedStartColumn,i.modifiedEndLineNumber,i.modifiedEndColumn)})}):t.modifiedEndLineNumber===0?this.ranges.push({rhs:!0,range:new $(t.modifiedStartLineNumber,1,t.modifiedStartLineNumber+1,1)}):this.ranges.push({rhs:!0,range:new $(t.modifiedStartLineNumber,1,t.modifiedEndLineNumber+1,1)})}),this.ranges.sort((t,i)=>$.compareRangesUsingStarts(t.range,i.range)),this._onDidUpdate.fire(this)}_initIdx(e){let t=!1;const i=this._editor.getPosition();if(!i){this.nextIdx=0;return}for(let s=0,o=this.ranges.length;s<o&&!t;s++){const r=this.ranges[s].range;i.isBeforeOrEqual(r.getStartPosition())&&(this.nextIdx=s+(e?0:-1),t=!0)}t||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}_move(e,t){if(Jh(!this.disposed,"Illegal State - diff navigator has been disposed"),!this.canNavigate())return;this.nextIdx===-1?this._initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));const i=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{const s=i.range.getStartPosition();this._editor.setPosition(s),this._editor.revealRangeInCenter(i.range,t),this._updateAccessibilityState(s.lineNumber,!0)}finally{this.ignoreSelectionChange=!1}}_updateAccessibilityState(e,t){var i;const s=(i=this._editor.getModel())===null||i===void 0?void 0:i.modified;if(!s)return;const o=s.getLineDecorations(e).find(a=>a.options.className==="line-insert");if(o)this._audioCueService.playAudioCue(Ke.diffLineModified,{allowManyInParallel:!0});else if(t)this._audioCueService.playAudioCue(Ke.diffLineDeleted,{allowManyInParallel:!0});else return;const r=this._codeEditorService.getActiveCodeEditor();t&&r&&o&&this._accessibilityService.isScreenReaderOptimized()&&(r.setSelection({startLineNumber:e,startColumn:0,endLineNumber:e,endColumn:Number.MAX_VALUE}),r.writeScreenReaderContent("diff-navigation"))}canNavigate(){return this.ranges&&this.ranges.length>0}next(e=0){this.canNavigateNext()&&this._move(!0,e)}previous(e=0){this.canNavigatePrevious()&&this._move(!1,e)}canNavigateNext(){return this.canNavigateLoop()||this.nextIdx<this.ranges.length-1}canNavigatePrevious(){return this.canNavigateLoop()||this.nextIdx!==0}canNavigateLoop(){return!!this._options.findResultLoop}dispose(){super.dispose(),this.ranges=[],this.disposed=!0}};Jm=aB([j1(2,Xu),j1(3,oi),j1(4,Hc)],Jm);const A_={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};var e0;(function(n){n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=4]="Right",n[n.Full=7]="Full"})(e0||(e0={}));var Zd;(function(n){n[n.Left=1]="Left",n[n.Right=2]="Right"})(Zd||(Zd={}));var cc;(function(n){n[n.Inline=1]="Inline",n[n.Gutter=2]="Gutter"})(cc||(cc={}));var yu;(function(n){n[n.Both=0]="Both",n[n.Right=1]="Right",n[n.Left=2]="Left",n[n.None=3]="None"})(yu||(yu={}));class gm{get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),e.indentSize==="tabSize"?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,e.indentSize|0),this._indentSizeIsTabSize=!1),this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this._indentSizeIsTabSize===e._indentSizeIsTabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&bs(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class Rf{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}function cB(n){return n&&typeof n.read=="function"}class K1{constructor(e,t,i,s,o,r){this.identifier=e,this.range=t,this.text=i,this.forceMoveMarkers=s,this.isAutoWhitespaceEdit=o,this._isTracked=r}}class dB{constructor(e,t,i){this.regex=e,this.wordSeparators=t,this.simpleSearch=i}}class uB{constructor(e,t,i){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=i}}function hB(n){return!n.isTooLargeForSyncing()&&!n.isForSimpleWidget}var _n;(function(n){n[n.None=0]="None",n[n.Indent=1]="Indent",n[n.IndentOutdent=2]="IndentOutdent",n[n.Outdent=3]="Outdent"})(_n||(_n={}));class G1{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,i=e.notIn.length;t<i;t++)switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;const i=e.findTokenIndexAtOffset(t-2),s=e.getStandardTokenType(i);return this.isOK(s)}_findNeutralCharacterInRange(e,t){for(let i=e;i<=t;i++){const s=String.fromCharCode(i);if(!this.open.includes(s)&&!this.close.includes(s))return s}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}class fB{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)ch(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),ch(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),ch(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),ch(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&ch(this.autoClosingPairsCloseSingleChar,t.close,t)}}function ch(n,e,t){n.has(e)?n.get(e).push(t):n.set(e,[t])}function M_(n,e){const t=n.getCount(),i=n.findTokenIndexAtOffset(e),s=n.getLanguageId(i);let o=i;for(;o+1<t&&n.getLanguageId(o+1)===s;)o++;let r=i;for(;r>0&&n.getLanguageId(r-1)===s;)r--;return new gB(n,s,r,o+1,n.getStartOffset(r),n.getEndOffset(o))}class gB{constructor(e,t,i,s,o,r){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=i,this._lastTokenIndex=s,this.firstCharOffset=o,this._lastCharOffset=r}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}}function Wo(n){return(n&3)!==0}class Su{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new G1(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new G1({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new G1({open:t.open,close:t.close||""}))}this._autoCloseBeforeForQuotes=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:Su.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:Su.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(e){return e?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}}Su.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=`;:.,=}])> 
	`;Su.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS=`'"\`;:.,=}])> 
	`;const wD=typeof Buffer<"u";let Z1;class IS{static wrap(e){return wD&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new IS(e)}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}toString(){return wD?this.buffer.toString():(Z1||(Z1=new TextDecoder),Z1.decode(this.buffer))}}function pB(n,e){return n[e+0]<<0>>>0|n[e+1]<<8>>>0}function mB(n,e,t){n[t+0]=e&255,e=e>>>8,n[t+1]=e&255}function _o(n,e){return n[e]*Math.pow(2,24)+n[e+1]*Math.pow(2,16)+n[e+2]*Math.pow(2,8)+n[e+3]}function bo(n,e,t){n[t+3]=e,e=e>>>8,n[t+2]=e,e=e>>>8,n[t+1]=e,e=e>>>8,n[t]=e}function CD(n,e){return n[e]}function yD(n,e,t){n[t]=e}let Y1;function VT(){return Y1||(Y1=new TextDecoder("UTF-16LE")),Y1}let X1;function _B(){return X1||(X1=new TextDecoder("UTF-16BE")),X1}let Q1;function WT(){return Q1||(Q1=z7()?VT():_B()),Q1}function bB(n,e,t){const i=new Uint16Array(n.buffer,e,t);return t>0&&(i[0]===65279||i[0]===65534)?vB(n,e,t):VT().decode(i)}function vB(n,e,t){const i=[];let s=0;for(let o=0;o<t;o++){const r=pB(n,e);e+=2,i[s++]=String.fromCharCode(r)}return i.join("")}class Ng{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return WT().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}appendCharCode(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||Ni(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIICharCode(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let i=0;i<t;i++)this._buffer[this._bufferLength++]=e.charCodeAt(i)}}class t0{constructor(e,t,i,s,o,r){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=i,this.close=s,this.forwardRegex=o,this.reversedRegex=r,this._openSet=t0._toSet(this.open),this._closeSet=t0._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const i of e)t.add(i);return t}}function wB(n){const e=n.length;n=n.map(r=>[r[0].toLowerCase(),r[1].toLowerCase()]);const t=[];for(let r=0;r<e;r++)t[r]=r;const i=(r,a)=>{const[l,c]=r,[d,u]=a;return l===d||l===u||c===d||c===u},s=(r,a)=>{const l=Math.min(r,a),c=Math.max(r,a);for(let d=0;d<e;d++)t[d]===c&&(t[d]=l)};for(let r=0;r<e;r++){const a=n[r];for(let l=r+1;l<e;l++){const c=n[l];i(a,c)&&s(t[r],t[l])}}const o=[];for(let r=0;r<e;r++){const a=[],l=[];for(let c=0;c<e;c++)if(t[c]===r){const[d,u]=n[c];a.push(d),l.push(u)}a.length>0&&o.push({open:a,close:l})}return o}class CB{constructor(e,t){this._richEditBracketsBrand=void 0;const i=wB(t);this.brackets=i.map((s,o)=>new t0(e,o,s.open,s.close,yB(s.open,s.close,i,o),SB(s.open,s.close,i,o))),this.forwardRegex=LB(this.brackets),this.reversedRegex=xB(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const s of this.brackets){for(const o of s.open)this.textIsBracket[o]=s,this.textIsOpenBracket[o]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,o.length);for(const o of s.close)this.textIsBracket[o]=s,this.textIsOpenBracket[o]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,o.length)}}}function HT(n,e,t,i){for(let s=0,o=e.length;s<o;s++){if(s===t)continue;const r=e[s];for(const a of r.open)a.indexOf(n)>=0&&i.push(a);for(const a of r.close)a.indexOf(n)>=0&&i.push(a)}}function $T(n,e){return n.length-e.length}function R_(n){if(n.length<=1)return n;const e=[],t=new Set;for(const i of n)t.has(i)||(e.push(i),t.add(i));return e}function yB(n,e,t,i){let s=[];s=s.concat(n),s=s.concat(e);for(let o=0,r=s.length;o<r;o++)HT(s[o],t,i,s);return s=R_(s),s.sort($T),s.reverse(),P_(s)}function SB(n,e,t,i){let s=[];s=s.concat(n),s=s.concat(e);for(let o=0,r=s.length;o<r;o++)HT(s[o],t,i,s);return s=R_(s),s.sort($T),s.reverse(),P_(s.map(NS))}function LB(n){let e=[];for(const t of n){for(const i of t.open)e.push(i);for(const i of t.close)e.push(i)}return e=R_(e),P_(e)}function xB(n){let e=[];for(const t of n){for(const i of t.open)e.push(i);for(const i of t.close)e.push(i)}return e=R_(e),P_(e.map(NS))}function DB(n){const e=/^[\w ]+$/.test(n);return n=ta(n),e?`\\b${n}\\b`:n}function P_(n){const e=`(${n.map(DB).join(")|(")})`;return kT(e,!0)}const NS=function(){function n(i){const s=new Uint16Array(i.length);let o=0;for(let r=i.length-1;r>=0;r--)s[o++]=i.charCodeAt(r);return WT().decode(s)}let e=null,t=null;return function(s){return e!==s&&(e=s,t=n(e)),t}}();class Gs{static _findPrevBracketInText(e,t,i,s){const o=i.match(e);if(!o)return null;const r=i.length-(o.index||0),a=o[0].length,l=s+r;return new $(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,i,s,o){const a=NS(i).substring(i.length-o,i.length-s);return this._findPrevBracketInText(e,t,a,s)}static findNextBracketInText(e,t,i,s){const o=i.match(e);if(!o)return null;const r=o.index||0,a=o[0].length;if(a===0)return null;const l=s+r;return new $(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,i,s,o){const r=i.substring(s,o);return this.findNextBracketInText(e,t,r,s)}}class kB{constructor(e){this._richEditBrackets=e}getElectricCharacters(){const e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const i of t.close){const s=i.charAt(i.length-1);e.push(s)}return Cc(e)}onElectricCharacter(e,t,i){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const s=t.findTokenIndexAtOffset(i-1);if(Wo(t.getStandardTokenType(s)))return null;const o=this._richEditBrackets.reversedRegex,r=t.getLineContent().substring(0,i-1)+e,a=Gs.findPrevBracketInRange(o,1,r,0,r.length);if(!a)return null;const l=r.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;const d=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(d)?{matchOpenBracket:l}:null}}function pp(n){return n.global&&(n.lastIndex=0),!0}class EB{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&pp(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&pp(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&pp(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&pp(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}class yd{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const i=yd._createOpenBracketRegExp(t[0]),s=yd._createCloseBracketRegExp(t[1]);i&&s&&this._brackets.push({open:t[0],openRegExp:i,close:t[1],closeRegExp:s})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,i,s){if(e>=3)for(let o=0,r=this._regExpRules.length;o<r;o++){const a=this._regExpRules[o];if([{reg:a.beforeText,text:i},{reg:a.afterText,text:s},{reg:a.previousLineText,text:t}].every(c=>c.reg?(c.reg.lastIndex=0,c.reg.test(c.text)):!0))return a.action}if(e>=2&&i.length>0&&s.length>0)for(let o=0,r=this._brackets.length;o<r;o++){const a=this._brackets[o];if(a.openRegExp.test(i)&&a.closeRegExp.test(s))return{indentAction:_n.IndentOutdent}}if(e>=2&&i.length>0){for(let o=0,r=this._brackets.length;o<r;o++)if(this._brackets[o].openRegExp.test(i))return{indentAction:_n.Indent}}return null}static _createOpenBracketRegExp(e){let t=ta(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",yd._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=ta(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,yd._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return $t(t),null}}}const mi=ct("configurationService");function Tw(n,e){const t=Object.create(null);for(const i in n)zT(t,i,n[i],e);return t}function zT(n,e,t,i){const s=e.split("."),o=s.pop();let r=n;for(let a=0;a<s.length;a++){const l=s[a];let c=r[l];switch(typeof c){case"undefined":c=r[l]=Object.create(null);break;case"object":break;default:i(`Ignoring ${e} as ${s.slice(0,a+1).join(".")} is ${JSON.stringify(c)}`);return}r=c}if(typeof r=="object"&&r!==null)try{r[o]=t}catch{i(`Ignoring ${e} as ${s.join(".")} is ${JSON.stringify(r)}`)}else i(`Ignoring ${e} as ${s.join(".")} is ${JSON.stringify(r)}`)}function IB(n,e){const t=e.split(".");UT(n,t)}function UT(n,e){const t=e.shift();if(e.length===0){delete n[t];return}if(Object.keys(n).indexOf(t)!==-1){const i=n[t];typeof i=="object"&&!Array.isArray(i)&&(UT(i,e),Object.keys(i).length===0&&delete n[t])}}function SD(n,e,t){function i(r,a){let l=r;for(const c of a){if(typeof l!="object"||l===null)return;l=l[c]}return l}const s=e.split("."),o=i(n,s);return typeof o>"u"?t:o}function NB(n){return n.replace(/[\[\]]/g,"")}const Mi=ct("languageService");class jo{constructor(e,t=[],i=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}}const qT=[];function vt(n,e,t){e instanceof jo||(e=new jo(e,[],!!t)),qT.push([n,e])}function LD(){return qT}class TB{constructor(){this.data=new Map}add(e,t){Jh(Qn(e)),Jh(Gn(t)),Jh(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}const zi=new TB,Fr=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),O_={JSONContribution:"base.contributions.json"};function AB(n){return n.length>0&&n.charAt(n.length-1)==="#"?n.substring(0,n.length-1):n}class MB{constructor(){this._onDidChangeSchema=new q,this.schemasById={}}registerSchema(e,t){this.schemasById[AB(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}const RB=new MB;zi.add(O_.JSONContribution,RB);const $c={Configuration:"base.contributions.configuration"},dh="vscode://schemas/settings/resourceLanguage",xD=zi.as(O_.JSONContribution);class PB{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new q,this._onDidUpdateConfiguration=new q,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:m("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},xD.registerSchema(dh,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const i=new Set;this.doRegisterConfigurations(e,t,i),xD.registerSchema(dh,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:i})}registerDefaultConfigurations(e){const t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){var i;const s=[];for(const{overrides:o,source:r}of e)for(const a in o)if(t.add(a),dl.test(a)){const l=this.configurationDefaultsOverrides.get(a),c=(i=l==null?void 0:l.valuesSources)!==null&&i!==void 0?i:new Map;if(r)for(const f of Object.keys(o[a]))c.set(f,r);const d=Object.assign(Object.assign({},(l==null?void 0:l.value)||{}),o[a]);this.configurationDefaultsOverrides.set(a,{source:r,value:d,valuesSources:c});const u=NB(a),h={type:"object",default:d,description:m("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",u),$ref:dh,defaultDefaultValue:d,source:Qn(r)?void 0:r,defaultValueSource:r};s.push(...i0(a)),this.configurationProperties[a]=h,this.defaultLanguageConfigurationOverridesNode.properties[a]=h}else{this.configurationDefaultsOverrides.set(a,{value:o[a],source:r});const l=this.configurationProperties[a];l&&(this.updatePropertyDefaultValue(a,l),this.updateSchema(a,l))}this.doRegisterOverrideIdentifiers(s)}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,i){e.forEach(s=>{this.validateAndRegisterProperties(s,t,s.extensionInfo,s.restrictedProperties,void 0,i),this.configurationContributors.push(s),this.registerJSONConfiguration(s)})}validateAndRegisterProperties(e,t=!0,i,s,o=3,r){var a;o=hs(e.scope)?o:e.scope;const l=e.properties;if(l)for(const d in l){const u=l[d];if(t&&BB(d,u)){delete l[d];continue}if(u.source=i,u.defaultDefaultValue=l[d].default,this.updatePropertyDefaultValue(d,u),dl.test(d)?u.scope=void 0:(u.scope=hs(u.scope)?o:u.scope,u.restricted=hs(u.restricted)?!!(s!=null&&s.includes(d)):u.restricted),l[d].hasOwnProperty("included")&&!l[d].included){this.excludedConfigurationProperties[d]=l[d],delete l[d];continue}else this.configurationProperties[d]=l[d],!((a=l[d].policy)===null||a===void 0)&&a.name&&this.policyConfigurations.set(l[d].policy.name,d);!l[d].deprecationMessage&&l[d].markdownDeprecationMessage&&(l[d].deprecationMessage=l[d].markdownDeprecationMessage),r.add(d)}const c=e.allOf;if(c)for(const d of c)this.validateAndRegisterProperties(d,t,i,s,o,r)}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}registerJSONConfiguration(e){const t=i=>{const s=i.properties;if(s)for(const r in s)this.updateSchema(r,s[r]);const o=i.allOf;o==null||o.forEach(t)};t(e)}updateSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,i={type:"object",description:m("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:m("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:dh};this.updatePropertyDefaultValue(t,i)}}registerOverridePropertyPatternKey(){m("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),m("overrideSettings.errorMessage","This setting does not support per-language configuration."),this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){const i=this.configurationDefaultsOverrides.get(e);let s=i==null?void 0:i.value,o=i==null?void 0:i.source;Io(s)&&(s=t.defaultDefaultValue,o=void 0),Io(s)&&(s=FB(t.type)),t.default=s,t.defaultValueSource=o}}const jT="\\[([^\\]]+)\\]",DD=new RegExp(jT,"g"),OB=`^(${jT})+$`,dl=new RegExp(OB);function i0(n){const e=[];if(dl.test(n)){let t=DD.exec(n);for(;t!=null&&t.length;){const i=t[1].trim();i&&e.push(i),t=DD.exec(n)}}return Cc(e)}function FB(n){switch(Array.isArray(n)?n[0]:n){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const pm=new PB;zi.add($c.Configuration,pm);function BB(n,e){var t,i,s,o;return n.trim()?dl.test(n)?m("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",n):pm.getConfigurationProperties()[n]!==void 0?m("config.property.duplicate","Cannot register '{0}'. This property is already registered.",n):!((t=e.policy)===null||t===void 0)&&t.name&&pm.getPolicyConfigurations().get((i=e.policy)===null||i===void 0?void 0:i.name)!==void 0?m("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",n,(s=e.policy)===null||s===void 0?void 0:s.name,pm.getPolicyConfigurations().get((o=e.policy)===null||o===void 0?void 0:o.name)):null:m("config.property.empty","Cannot register an empty property")}const VB={ModesRegistry:"editor.modesRegistry"};class WB{constructor(){this._onDidChangeLanguages=new q,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,i=this._languages.length;t<i;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return this._languages}}const Lu=new WB;zi.add(VB.ModesRegistry,Lu);const No="plaintext",HB=".txt";Lu.registerLanguage({id:No,extensions:[HB],aliases:[m("plainText.alias","Plain Text"),"text"],mimetypes:[Fr.text]});zi.as($c.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);class $B{constructor(e,t){this.languageId=e;const i=t.brackets?kD(t.brackets):[],s=new hD(a=>{const l=new Set;return{info:new zB(this,a,l),closing:l}}),o=new hD(a=>{const l=new Set,c=new Set;return{info:new UB(this,a,l,c),opening:l,openingColorized:c}});for(const[a,l]of i){const c=s.get(a),d=o.get(l);c.closing.add(d.info),d.opening.add(c.info)}const r=t.colorizedBracketPairs?kD(t.colorizedBracketPairs):i.filter(a=>!(a[0]==="<"&&a[1]===">"));for(const[a,l]of r){const c=s.get(a),d=o.get(l);c.closing.add(d.info),d.openingColorized.add(c.info),d.opening.add(c.info)}this._openingBrackets=new Map([...s.cachedValues].map(([a,l])=>[a,l.info])),this._closingBrackets=new Map([...o.cachedValues].map(([a,l])=>[a,l.info]))}get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}}function kD(n){return n.filter(([e,t])=>e!==""&&t!=="")}class KT{constructor(e,t){this.config=e,this.bracketText=t}get languageId(){return this.config.languageId}}class zB extends KT{constructor(e,t,i){super(e,t),this.openedBrackets=i,this.isOpeningBracket=!0}}class UB extends KT{constructor(e,t,i,s){super(e,t),this.openingBrackets=i,this.openingColorizedBrackets=s,this.isOpeningBracket=!1}closes(e){return e.config!==this.config?!1:this.openingBrackets.has(e)}closesColorized(e){return e.config!==this.config?!1:this.openingColorizedBrackets.has(e)}getOpeningBrackets(){return[...this.openingBrackets]}}var qB=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},ED=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};class J1{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}}const mr=ct("languageConfigurationService");let Aw=class extends oe{constructor(e,t){super(),this.configurationService=e,this.languageService=t,this._registry=this._register(new ZB),this.onDidChangeEmitter=this._register(new q),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const i=new Set(Object.values(Mw));this._register(this.configurationService.onDidChangeConfiguration(s=>{const o=s.change.keys.some(a=>i.has(a)),r=s.change.overrides.filter(([a,l])=>l.some(c=>i.has(c))).map(([a])=>a);if(o)this.configurations.clear(),this.onDidChangeEmitter.fire(new J1(void 0));else for(const a of r)this.languageService.isRegisteredLanguageId(a)&&(this.configurations.delete(a),this.onDidChangeEmitter.fire(new J1(a)))})),this._register(this._registry.onDidChange(s=>{this.configurations.delete(s.languageId),this.onDidChangeEmitter.fire(new J1(s.languageId))}))}register(e,t,i){return this._registry.register(e,t,i)}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=jB(e,this._registry,this.configurationService,this.languageService),this.configurations.set(e,t)),t}};Aw=qB([ED(0,mi),ED(1,Mi)],Aw);function jB(n,e,t,i){let s=e.getLanguageConfiguration(n);if(!s){if(!i.isRegisteredLanguageId(n))return new Xd(n,{});s=new Xd(n,{})}const o=KB(s.languageId,t),r=ZT([s.underlyingConfig,o]);return new Xd(s.languageId,r)}const Mw={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function KB(n,e){const t=e.getValue(Mw.brackets,{overrideIdentifier:n}),i=e.getValue(Mw.colorizedBracketPairs,{overrideIdentifier:n});return{brackets:ID(t),colorizedBracketPairs:ID(i)}}function ID(n){if(Array.isArray(n))return n.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}function GT(n,e,t){const i=n.getLineContent(e);let s=$n(i);return s.length>t-1&&(s=s.substring(0,t-1)),s}function Yd(n,e,t){n.tokenization.forceTokenization(e);const i=n.tokenization.getLineTokens(e),s=typeof t>"u"?n.getLineMaxColumn(e)-1:t-1;return M_(i,s)}class GB{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const i=new ND(e,t,++this._order);return this._entries.push(i),this._resolved=null,st(()=>{for(let s=0;s<this._entries.length;s++)if(this._entries[s]===i){this._entries.splice(s,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new Xd(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(ND.cmp),ZT(this._entries.map(e=>e.configuration)))}}function ZT(n){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const t of n)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}class ND{constructor(e,t,i){this.configuration=e,this.priority=t,this.order=i}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class TD{constructor(e){this.languageId=e}}class ZB extends oe{constructor(){super(),this._entries=new Map,this._onDidChange=this._register(new q),this.onDidChange=this._onDidChange.event,this._register(this.register(No,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t,i=0){let s=this._entries.get(e);s||(s=new GB(e),this._entries.set(e,s));const o=s.register(t,i);return this._onDidChange.fire(new TD(e)),st(()=>{o.dispose(),this._onDidChange.fire(new TD(e))})}getLanguageConfiguration(e){const t=this._entries.get(e);return(t==null?void 0:t.getResolvedConfiguration())||null}}class Xd{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new yd(this.underlyingConfig):null,this.comments=Xd._handleComments(this.underlyingConfig),this.characterPair=new Su(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||cS,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new EB(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new $B(e,this.underlyingConfig)}getWordDefinition(){return lT(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new CB(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new kB(this.brackets)),this._electricCharacter}onEnter(e,t,i,s){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,i,s):null}getAutoClosingPairs(){return new fB(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(e){return this.characterPair.getAutoCloseBeforeSet(e)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){const t=e.comments;if(!t)return null;const i={};if(t.lineComment&&(i.lineCommentToken=t.lineComment),t.blockComment){const[s,o]=t.blockComment;i.blockCommentStartToken=s,i.blockCommentEndToken=o}return i}}vt(mr,Aw,1);const n0=new class{clone(){return this}equals(n){return this===n}};function YT(n,e){return new mS([new Nf(0,"",n)],e)}function XT(n,e){const t=new Uint32Array(2);return t[0]=0,t[1]=(n<<0|0|0|32768|2<<24)>>>0,new y_(t,e===null?n0:e)}const ys=ct("modelService"),QT=Symbol("MicrotaskDelay");var Zs=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})},mp=globalThis&&globalThis.__asyncValues||function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(r){return new Promise(function(a,l){r=n[o](r),s(a,l,r.done,r.value)})}}function s(o,r,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},r)}};function Rw(n){return!!n&&typeof n.then=="function"}function JT(n){const e=new vl,t=n(e.token),i=new Promise((s,o)=>{const r=e.token.onCancellationRequested(()=>{r.dispose(),e.dispose(),o(new Lg)});Promise.resolve(t).then(a=>{r.dispose(),e.dispose(),s(a)},a=>{r.dispose(),e.dispose(),o(a)})});return new class{cancel(){e.cancel()}then(s,o){return i.then(s,o)}catch(s){return this.then(void 0,s)}finally(s){return i.finally(s)}}}class YB{constructor(){this.isDisposed=!1,this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.isDisposed)throw new Error("Throttler is disposed");if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=()=>{if(this.queuedPromise=null,this.isDisposed)return;const i=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,i};this.queuedPromise=new Promise(i=>{this.activePromise.then(t,t).then(i)})}return new Promise((t,i)=>{this.queuedPromise.then(t,i)})}return this.activePromise=e(),new Promise((t,i)=>{this.activePromise.then(s=>{this.activePromise=null,t(s)},s=>{this.activePromise=null,i(s)})})}dispose(){this.isDisposed=!0}}const XB=(n,e)=>{let t=!0;const i=setTimeout(()=>{t=!1,e()},n);return{isTriggered:()=>t,dispose:()=>{clearTimeout(i),t=!1}}},QB=n=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,n())}),{isTriggered:()=>e,dispose:()=>{e=!1}}};class F_{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((s,o)=>{this.doResolve=s,this.doReject=o}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const s=this.task;return this.task=null,s()}}));const i=()=>{var s;this.deferred=null,(s=this.doResolve)===null||s===void 0||s.call(this,null)};return this.deferred=t===QT?QB(i):XB(t,i),this.completionPromise}isTriggered(){var e;return!!(!((e=this.deferred)===null||e===void 0)&&e.isTriggered())}cancel(){var e;this.cancelTimeout(),this.completionPromise&&((e=this.doReject)===null||e===void 0||e.call(this,new Lg),this.completionPromise=null)}cancelTimeout(){var e;(e=this.deferred)===null||e===void 0||e.dispose(),this.deferred=null}dispose(){this.cancel()}}class e4{constructor(e){this.delayer=new F_(e),this.throttler=new YB}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}}function Pf(n,e){return e?new Promise((t,i)=>{const s=setTimeout(()=>{o.dispose(),t()},n),o=e.onCancellationRequested(()=>{clearTimeout(s),o.dispose(),i(new Lg)})}):JT(t=>Pf(n,t))}function Pw(n,e=0){const t=setTimeout(n,e);return st(()=>clearTimeout(t))}class zc{constructor(e,t){this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}class Tg{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval(()=>{e()},t)}}class Sn{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){var e;(e=this.runner)===null||e===void 0||e.call(this)}}let Ba;(function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?Ba=n=>{oT(()=>{if(e)return;const t=Date.now()+15;n(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,t-Date.now())}}))});let e=!1;return{dispose(){e||(e=!0)}}}:Ba=(n,e)=>{const t=requestIdleCallback(n,typeof e=="number"?{timeout:e}:void 0);let i=!1;return{dispose(){i||(i=!0,cancelIdleCallback(t))}}}})();class JB{constructor(e){this._didRun=!1,this._executor=()=>{try{this._value=e()}catch(t){this._error=t}finally{this._didRun=!0}},this._handle=Ba(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class t4{get isRejected(){var e;return((e=this.outcome)===null||e===void 0?void 0:e.outcome)===1}get isSettled(){return!!this.outcome}constructor(){this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()})}cancel(){return this.error(new Lg)}}var Ow;(function(n){function e(i){return Zs(this,void 0,void 0,function*(){let s;const o=yield Promise.all(i.map(r=>r.then(a=>a,a=>{s||(s=a)})));if(typeof s<"u")throw s;return o})}n.settled=e;function t(i){return new Promise((s,o)=>Zs(this,void 0,void 0,function*(){try{yield i(s,o)}catch(r){o(r)}}))}n.withAsyncBody=t})(Ow||(Ow={}));class ls{static fromArray(e){return new ls(t=>{t.emitMany(e)})}static fromPromise(e){return new ls(t=>Zs(this,void 0,void 0,function*(){t.emitMany(yield e)}))}static fromPromises(e){return new ls(t=>Zs(this,void 0,void 0,function*(){yield Promise.all(e.map(i=>Zs(this,void 0,void 0,function*(){return t.emitOne(yield i)})))}))}static merge(e){return new ls(t=>Zs(this,void 0,void 0,function*(){yield Promise.all(e.map(i=>{var s,o,r;return Zs(this,void 0,void 0,function*(){var a,l,c,d;try{for(s=!0,o=mp(i);r=yield o.next(),a=r.done,!a;s=!0){d=r.value,s=!1;const u=d;t.emitOne(u)}}catch(u){l={error:u}}finally{try{!s&&!a&&(c=o.return)&&(yield c.call(o))}finally{if(l)throw l.error}}})}))}))}constructor(e){this._state=0,this._results=[],this._error=null,this._onStateChanged=new q,queueMicrotask(()=>Zs(this,void 0,void 0,function*(){const t={emitOne:i=>this.emitOne(i),emitMany:i=>this.emitMany(i),reject:i=>this.reject(i)};try{yield Promise.resolve(e(t)),this.resolve()}catch(i){this.reject(i)}finally{t.emitOne=void 0,t.emitMany=void 0,t.reject=void 0}}))}[Symbol.asyncIterator](){let e=0;return{next:()=>Zs(this,void 0,void 0,function*(){do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};yield ke.toPromise(this._onStateChanged.event)}while(!0)})}}static map(e,t){return new ls(i=>Zs(this,void 0,void 0,function*(){var s,o,r,a;try{for(var l=!0,c=mp(e),d;d=yield c.next(),s=d.done,!s;l=!0){a=d.value,l=!1;const u=a;i.emitOne(t(u))}}catch(u){o={error:u}}finally{try{!l&&!s&&(r=c.return)&&(yield r.call(c))}finally{if(o)throw o.error}}}))}map(e){return ls.map(this,e)}static filter(e,t){return new ls(i=>Zs(this,void 0,void 0,function*(){var s,o,r,a;try{for(var l=!0,c=mp(e),d;d=yield c.next(),s=d.done,!s;l=!0){a=d.value,l=!1;const u=a;t(u)&&i.emitOne(u)}}catch(u){o={error:u}}finally{try{!l&&!s&&(r=c.return)&&(yield r.call(c))}finally{if(o)throw o.error}}}))}filter(e){return ls.filter(this,e)}static coalesce(e){return ls.filter(e,t=>!!t)}coalesce(){return ls.coalesce(this)}static toPromise(e){var t,i,s,o,r,a,l;return Zs(this,void 0,void 0,function*(){const c=[];try{for(t=!0,i=mp(e);s=yield i.next(),o=s.done,!o;t=!0){l=s.value,t=!1;const d=l;c.push(d)}}catch(d){r={error:d}}finally{try{!t&&!o&&(a=i.return)&&(yield a.call(i))}finally{if(r)throw r.error}}return c})}toPromise(){return ls.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}}ls.EMPTY=ls.fromArray([]);const eV="$initialize";let AD=!1;function Fw(n){Gu&&(AD||(AD=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(n.message))}class tV{constructor(e,t,i,s){this.vsWorker=e,this.req=t,this.method=i,this.args=s,this.type=0}}class MD{constructor(e,t,i,s){this.vsWorker=e,this.seq=t,this.res=i,this.err=s,this.type=1}}class iV{constructor(e,t,i,s){this.vsWorker=e,this.req=t,this.eventName=i,this.arg=s,this.type=2}}class nV{constructor(e,t,i){this.vsWorker=e,this.req=t,this.event=i,this.type=3}}class sV{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}class oV{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t){const i=String(++this._lastSentReq);return new Promise((s,o)=>{this._pendingReplies[i]={resolve:s,reject:o},this._send(new tV(this._workerId,i,e,t))})}listen(e,t){let i=null;const s=new q({onWillAddFirstListener:()=>{i=String(++this._lastSentReq),this._pendingEmitters.set(i,s),this._send(new iV(this._workerId,i,e,t))},onDidRemoveLastListener:()=>{this._pendingEmitters.delete(i),this._send(new sV(this._workerId,i)),i=null}});return s.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}const t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let i=e.err;e.err.$isError&&(i=new Error,i.name=e.err.name,i.message=e.err.message,i.stack=e.err.stack),t.reject(i);return}t.resolve(e.res)}_handleRequestMessage(e){const t=e.req;this._handler.handleMessage(e.method,e.args).then(s=>{this._send(new MD(this._workerId,t,s,void 0))},s=>{s.detail instanceof Error&&(s.detail=iD(s.detail)),this._send(new MD(this._workerId,t,void 0,iD(s)))})}_handleSubscribeEventMessage(e){const t=e.req,i=this._handler.handleEvent(e.eventName,e.arg)(s=>{this._send(new nV(this._workerId,t,s))});this._pendingEvents.set(t,i)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){const t=[];if(e.type===0)for(let i=0;i<e.args.length;i++)e.args[i]instanceof ArrayBuffer&&t.push(e.args[i]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}class rV extends oe{constructor(e,t,i){super();let s=null;this._worker=this._register(e.create("vs/base/common/worker/simpleWorker",d=>{this._protocol.handleMessage(d)},d=>{s==null||s(d)})),this._protocol=new oV({sendMessage:(d,u)=>{this._worker.postMessage(d,u)},handleMessage:(d,u)=>{if(typeof i[d]!="function")return Promise.reject(new Error("Missing method "+d+" on main thread host."));try{return Promise.resolve(i[d].apply(i,u))}catch(h){return Promise.reject(h)}},handleEvent:(d,u)=>{if(n4(d)){const h=i[d].call(i,u);if(typeof h!="function")throw new Error(`Missing dynamic event ${d} on main thread host.`);return h}if(i4(d)){const h=i[d];if(typeof h!="function")throw new Error(`Missing event ${d} on main thread host.`);return h}throw new Error(`Malformed event name ${d}`)}}),this._protocol.setWorkerId(this._worker.getId());let o=null;const r=globalThis.require;typeof r<"u"&&typeof r.getConfig=="function"?o=r.getConfig():typeof globalThis.requirejs<"u"&&(o=globalThis.requirejs.s.contexts._.config);const a=rS(i);this._onModuleLoaded=this._protocol.sendMessage(eV,[this._worker.getId(),JSON.parse(JSON.stringify(o)),t,a]);const l=(d,u)=>this._request(d,u),c=(d,u)=>this._protocol.listen(d,u);this._lazyProxy=new Promise((d,u)=>{s=u,this._onModuleLoaded.then(h=>{d(aV(h,l,c))},h=>{u(h),this._onError("Worker failed to load "+t,h)})})}getProxyObject(){return this._lazyProxy}_request(e,t){return new Promise((i,s)=>{this._onModuleLoaded.then(()=>{this._protocol.sendMessage(e,t).then(i,s)},s)})}_onError(e,t){console.error(e),console.info(t)}}function i4(n){return n[0]==="o"&&n[1]==="n"&&ka(n.charCodeAt(2))}function n4(n){return/^onDynamic/.test(n)&&ka(n.charCodeAt(9))}function aV(n,e,t){const i=r=>function(){const a=Array.prototype.slice.call(arguments,0);return e(r,a)},s=r=>function(a){return t(r,a)},o={};for(const r of n){if(n4(r)){o[r]=s(r);continue}if(i4(r)){o[r]=t(r,void 0);continue}o[r]=i(r)}return o}function Qu(n,e){var t;const i=globalThis.MonacoEnvironment;if(i!=null&&i.createTrustedTypesPolicy)try{return i.createTrustedTypesPolicy(n,e)}catch(s){$t(s);return}try{return(t=window.trustedTypes)===null||t===void 0?void 0:t.createPolicy(n,e)}catch(s){$t(s);return}}const RD=Qu("defaultWorkerFactory",{createScriptURL:n=>n});function lV(n){const e=globalThis.MonacoEnvironment;if(e){if(typeof e.getWorker=="function")return e.getWorker("workerMain.js",n);if(typeof e.getWorkerUrl=="function"){const t=e.getWorkerUrl("workerMain.js",n);return new Worker(RD?RD.createScriptURL(t):t,{name:n})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function cV(n){return typeof n.then=="function"}class dV{constructor(e,t,i,s,o){this.id=t,this.label=i;const r=lV(i);cV(r)?this.worker=r:this.worker=Promise.resolve(r),this.postMessage(e,[]),this.worker.then(a=>{a.onmessage=function(l){s(l.data)},a.onmessageerror=o,typeof a.addEventListener=="function"&&a.addEventListener("error",o)})}getId(){return this.id}postMessage(e,t){var i;(i=this.worker)===null||i===void 0||i.then(s=>{try{s.postMessage(e,t)}catch(o){$t(o),$t(new Error(`FAILED to post message to '${this.label}'-worker`,{cause:o}))}})}dispose(){var e;(e=this.worker)===null||e===void 0||e.then(t=>t.terminate()),this.worker=null}}class B_{constructor(e){this._label=e,this._webWorkerFailedBeforeError=!1}create(e,t,i){const s=++B_.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new dV(e,s,this._label||"anonymous"+s,t,o=>{Fw(o),this._webWorkerFailedBeforeError=o,i(o)})}}B_.LAST_WORKER_ID=0;class ma{constructor(e,t,i,s){this.originalStart=e,this.originalLength=t,this.modifiedStart=i,this.modifiedLength=s}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}function TS(n,e){switch(typeof n){case"object":return n===null?zr(349,e):Array.isArray(n)?hV(n,e):fV(n,e);case"string":return AS(n,e);case"boolean":return uV(n,e);case"number":return zr(n,e);case"undefined":return zr(937,e);default:return zr(617,e)}}function zr(n,e){return(e<<5)-e+n|0}function uV(n,e){return zr(n?433:863,e)}function AS(n,e){e=zr(149417,e);for(let t=0,i=n.length;t<i;t++)e=zr(n.charCodeAt(t),e);return e}function hV(n,e){return e=zr(104579,e),n.reduce((t,i)=>TS(i,t),e)}function fV(n,e){return e=zr(181387,e),Object.keys(n).sort().reduce((t,i)=>(t=AS(i,t),TS(n[i],t)),e)}function eb(n,e,t=32){const i=t-e,s=~((1<<i)-1);return(n<<e|(s&n)>>>i)>>>0}function PD(n,e=0,t=n.byteLength,i=0){for(let s=0;s<t;s++)n[e+s]=i}function gV(n,e,t="0"){for(;n.length<e;)n=t+n;return n}function uh(n,e=32){return n instanceof ArrayBuffer?Array.from(new Uint8Array(n)).map(t=>t.toString(16).padStart(2,"0")).join(""):gV((n>>>0).toString(16),e/4)}class V_{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const i=this._buff;let s=this._buffLen,o=this._leftoverHighSurrogate,r,a;for(o!==0?(r=o,a=-1,o=0):(r=e.charCodeAt(0),a=0);;){let l=r;if(Ni(r))if(a+1<t){const c=e.charCodeAt(a+1);Cu(c)?(a++,l=vS(r,c)):l=65533}else{o=r;break}else Cu(r)&&(l=65533);if(s=this._push(i,s,l),a++,a<t)r=e.charCodeAt(a);else break}this._buffLen=s,this._leftoverHighSurrogate=o}_push(e,t,i){return i<128?e[t++]=i:i<2048?(e[t++]=192|(i&1984)>>>6,e[t++]=128|(i&63)>>>0):i<65536?(e[t++]=224|(i&61440)>>>12,e[t++]=128|(i&4032)>>>6,e[t++]=128|(i&63)>>>0):(e[t++]=240|(i&1835008)>>>18,e[t++]=128|(i&258048)>>>12,e[t++]=128|(i&4032)>>>6,e[t++]=128|(i&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64+0],e[1]=e[64+1],e[2]=e[64+2]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),uh(this._h0)+uh(this._h1)+uh(this._h2)+uh(this._h3)+uh(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,PD(this._buff,this._buffLen),this._buffLen>56&&(this._step(),PD(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=V_._bigBlock32,t=this._buffDV;for(let u=0;u<64;u+=4)e.setUint32(u,t.getUint32(u,!1),!1);for(let u=64;u<320;u+=4)e.setUint32(u,eb(e.getUint32(u-12,!1)^e.getUint32(u-32,!1)^e.getUint32(u-56,!1)^e.getUint32(u-64,!1),1),!1);let i=this._h0,s=this._h1,o=this._h2,r=this._h3,a=this._h4,l,c,d;for(let u=0;u<80;u++)u<20?(l=s&o|~s&r,c=1518500249):u<40?(l=s^o^r,c=1859775393):u<60?(l=s&o|s&r|o&r,c=2400959708):(l=s^o^r,c=3395469782),d=eb(i,5)+l+a+c+e.getUint32(u*4,!1)&4294967295,a=r,r=o,o=eb(s,30),s=i,i=d;this._h0=this._h0+i&4294967295,this._h1=this._h1+s&4294967295,this._h2=this._h2+o&4294967295,this._h3=this._h3+r&4294967295,this._h4=this._h4+a&4294967295}}V_._bigBlock32=new DataView(new ArrayBuffer(320));class OD{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let i=0,s=e.length;i<s;i++)t[i]=e.charCodeAt(i);return t}}function pV(n,e,t){return new Br(new OD(n),new OD(e)).ComputeDiff(t).changes}class td{static Assert(e,t){if(!e)throw new Error(t)}}class id{static Copy(e,t,i,s,o){for(let r=0;r<o;r++)i[s+r]=e[t+r]}static Copy2(e,t,i,s,o){for(let r=0;r<o;r++)i[s+r]=e[t+r]}}class FD{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new ma(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class Br{constructor(e,t,i=null){this.ContinueProcessingPredicate=i,this._originalSequence=e,this._modifiedSequence=t;const[s,o,r]=Br._getElements(e),[a,l,c]=Br._getElements(t);this._hasStrings=r&&c,this._originalStringElements=s,this._originalElementsOrHash=o,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(Br._isStringArray(t)){const i=new Int32Array(t.length);for(let s=0,o=t.length;s<o;s++)i[s]=AS(t[s],0);return[t,i,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const i=Br._getStrictElement(this._originalSequence,e),s=Br._getStrictElement(this._modifiedSequence,t);return i===s}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,i,s,o){const r=[!1];let a=this.ComputeDiffRecursive(e,t,i,s,r);return o&&(a=this.PrettifyChanges(a)),{quitEarly:r[0],changes:a}}ComputeDiffRecursive(e,t,i,s,o){for(o[0]=!1;e<=t&&i<=s&&this.ElementsAreEqual(e,i);)e++,i++;for(;t>=e&&s>=i&&this.ElementsAreEqual(t,s);)t--,s--;if(e>t||i>s){let u;return i<=s?(td.Assert(e===t+1,"originalStart should only be one more than originalEnd"),u=[new ma(e,0,i,s-i+1)]):e<=t?(td.Assert(i===s+1,"modifiedStart should only be one more than modifiedEnd"),u=[new ma(e,t-e+1,i,0)]):(td.Assert(e===t+1,"originalStart should only be one more than originalEnd"),td.Assert(i===s+1,"modifiedStart should only be one more than modifiedEnd"),u=[]),u}const r=[0],a=[0],l=this.ComputeRecursionPoint(e,t,i,s,r,a,o),c=r[0],d=a[0];if(l!==null)return l;if(!o[0]){const u=this.ComputeDiffRecursive(e,c,i,d,o);let h=[];return o[0]?h=[new ma(c+1,t-(c+1)+1,d+1,s-(d+1)+1)]:h=this.ComputeDiffRecursive(c+1,t,d+1,s,o),this.ConcatenateChanges(u,h)}return[new ma(e,t-e+1,i,s-i+1)]}WALKTRACE(e,t,i,s,o,r,a,l,c,d,u,h,f,g,p,_,v,b){let w=null,C=null,S=new FD,k=t,L=i,x=f[0]-_[0]-s,I=-1073741824,A=this.m_forwardHistory.length-1;do{const T=x+e;T===k||T<L&&c[T-1]<c[T+1]?(u=c[T+1],g=u-x-s,u<I&&S.MarkNextChange(),I=u,S.AddModifiedElement(u+1,g),x=T+1-e):(u=c[T-1]+1,g=u-x-s,u<I&&S.MarkNextChange(),I=u-1,S.AddOriginalElement(u,g+1),x=T-1-e),A>=0&&(c=this.m_forwardHistory[A],e=c[0],k=1,L=c.length-1)}while(--A>=-1);if(w=S.getReverseChanges(),b[0]){let T=f[0]+1,O=_[0]+1;if(w!==null&&w.length>0){const R=w[w.length-1];T=Math.max(T,R.getOriginalEnd()),O=Math.max(O,R.getModifiedEnd())}C=[new ma(T,h-T+1,O,p-O+1)]}else{S=new FD,k=r,L=a,x=f[0]-_[0]-l,I=1073741824,A=v?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const T=x+o;T===k||T<L&&d[T-1]>=d[T+1]?(u=d[T+1]-1,g=u-x-l,u>I&&S.MarkNextChange(),I=u+1,S.AddOriginalElement(u+1,g+1),x=T+1-o):(u=d[T-1],g=u-x-l,u>I&&S.MarkNextChange(),I=u,S.AddModifiedElement(u+1,g+1),x=T-1-o),A>=0&&(d=this.m_reverseHistory[A],o=d[0],k=1,L=d.length-1)}while(--A>=-1);C=S.getChanges()}return this.ConcatenateChanges(w,C)}ComputeRecursionPoint(e,t,i,s,o,r,a){let l=0,c=0,d=0,u=0,h=0,f=0;e--,i--,o[0]=0,r[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const g=t-e+(s-i),p=g+1,_=new Int32Array(p),v=new Int32Array(p),b=s-i,w=t-e,C=e-i,S=t-s,L=(w-b)%2===0;_[b]=e,v[w]=t,a[0]=!1;for(let x=1;x<=g/2+1;x++){let I=0,A=0;d=this.ClipDiagonalBound(b-x,x,b,p),u=this.ClipDiagonalBound(b+x,x,b,p);for(let O=d;O<=u;O+=2){O===d||O<u&&_[O-1]<_[O+1]?l=_[O+1]:l=_[O-1]+1,c=l-(O-b)-C;const R=l;for(;l<t&&c<s&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(_[O]=l,l+c>I+A&&(I=l,A=c),!L&&Math.abs(O-w)<=x-1&&l>=v[O])return o[0]=l,r[0]=c,R<=v[O]&&1447>0&&x<=1447+1?this.WALKTRACE(b,d,u,C,w,h,f,S,_,v,l,t,o,c,s,r,L,a):null}const T=(I-e+(A-i)-x)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(I,T))return a[0]=!0,o[0]=I,r[0]=A,T>0&&1447>0&&x<=1447+1?this.WALKTRACE(b,d,u,C,w,h,f,S,_,v,l,t,o,c,s,r,L,a):(e++,i++,[new ma(e,t-e+1,i,s-i+1)]);h=this.ClipDiagonalBound(w-x,x,w,p),f=this.ClipDiagonalBound(w+x,x,w,p);for(let O=h;O<=f;O+=2){O===h||O<f&&v[O-1]>=v[O+1]?l=v[O+1]-1:l=v[O-1],c=l-(O-w)-S;const R=l;for(;l>e&&c>i&&this.ElementsAreEqual(l,c);)l--,c--;if(v[O]=l,L&&Math.abs(O-b)<=x&&l<=_[O])return o[0]=l,r[0]=c,R>=_[O]&&1447>0&&x<=1447+1?this.WALKTRACE(b,d,u,C,w,h,f,S,_,v,l,t,o,c,s,r,L,a):null}if(x<=1447){let O=new Int32Array(u-d+2);O[0]=b-d+1,id.Copy2(_,d,O,1,u-d+1),this.m_forwardHistory.push(O),O=new Int32Array(f-h+2),O[0]=w-h+1,id.Copy2(v,h,O,1,f-h+1),this.m_reverseHistory.push(O)}}return this.WALKTRACE(b,d,u,C,w,h,f,S,_,v,l,t,o,c,s,r,L,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const i=e[t],s=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,o=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,r=i.originalLength>0,a=i.modifiedLength>0;for(;i.originalStart+i.originalLength<s&&i.modifiedStart+i.modifiedLength<o&&(!r||this.OriginalElementsAreEqual(i.originalStart,i.originalStart+i.originalLength))&&(!a||this.ModifiedElementsAreEqual(i.modifiedStart,i.modifiedStart+i.modifiedLength));){const c=this.ElementsAreStrictEqual(i.originalStart,i.modifiedStart);if(this.ElementsAreStrictEqual(i.originalStart+i.originalLength,i.modifiedStart+i.modifiedLength)&&!c)break;i.originalStart++,i.modifiedStart++}const l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const i=e[t];let s=0,o=0;if(t>0){const u=e[t-1];s=u.originalStart+u.originalLength,o=u.modifiedStart+u.modifiedLength}const r=i.originalLength>0,a=i.modifiedLength>0;let l=0,c=this._boundaryScore(i.originalStart,i.originalLength,i.modifiedStart,i.modifiedLength);for(let u=1;;u++){const h=i.originalStart-u,f=i.modifiedStart-u;if(h<s||f<o||r&&!this.OriginalElementsAreEqual(h,h+i.originalLength)||a&&!this.ModifiedElementsAreEqual(f,f+i.modifiedLength))break;const p=(h===s&&f===o?5:0)+this._boundaryScore(h,i.originalLength,f,i.modifiedLength);p>c&&(c=p,l=u)}i.originalStart-=l,i.modifiedStart-=l;const d=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],d)){e[t-1]=d[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,i=e.length;t<i;t++){const s=e[t-1],o=e[t],r=o.originalStart-s.originalStart-s.originalLength,a=s.originalStart,l=o.originalStart+o.originalLength,c=l-a,d=s.modifiedStart,u=o.modifiedStart+o.modifiedLength,h=u-d;if(r<5&&c<20&&h<20){const f=this._findBetterContiguousSequence(a,c,d,h,r);if(f){const[g,p]=f;(g!==s.originalStart+s.originalLength||p!==s.modifiedStart+s.modifiedLength)&&(s.originalLength=g-s.originalStart,s.modifiedLength=p-s.modifiedStart,o.originalStart=g+r,o.modifiedStart=p+r,o.originalLength=l-o.originalStart,o.modifiedLength=u-o.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,i,s,o){if(t<o||s<o)return null;const r=e+t-o+1,a=i+s-o+1;let l=0,c=0,d=0;for(let u=e;u<r;u++)for(let h=i;h<a;h++){const f=this._contiguousSequenceScore(u,h,o);f>0&&f>l&&(l=f,c=u,d=h)}return l>0?[c,d]:null}_contiguousSequenceScore(e,t,i){let s=0;for(let o=0;o<i;o++){if(!this.ElementsAreEqual(e+o,t+o))return 0;s+=this._originalStringElements[e+o].length}return s}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._OriginalIsBoundary(i-1)||this._OriginalIsBoundary(i))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._ModifiedIsBoundary(i-1)||this._ModifiedIsBoundary(i))return!0}return!1}_boundaryScore(e,t,i,s){const o=this._OriginalRegionIsBoundary(e,t)?1:0,r=this._ModifiedRegionIsBoundary(i,s)?1:0;return o+r}ConcatenateChanges(e,t){const i=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],i)){const s=new Array(e.length+t.length-1);return id.Copy(e,0,s,0,e.length-1),s[e.length-1]=i[0],id.Copy(t,1,s,e.length,t.length-1),s}else{const s=new Array(e.length+t.length);return id.Copy(e,0,s,0,e.length),id.Copy(t,0,s,e.length,t.length),s}}ChangesOverlap(e,t,i){if(td.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),td.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const s=e.originalStart;let o=e.originalLength;const r=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(o=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),i[0]=new ma(s,o,r,a),!0}else return i[0]=null,!1}ClipDiagonalBound(e,t,i,s){if(e>=0&&e<s)return e;const o=i,r=s-i-1,a=t%2===0;if(e<0){const l=o%2===0;return a===l?0:1}else{const l=r%2===0;return a===l?s-1:s-2}}}function s0(n){return n<0?0:n>255?255:n|0}function nd(n){return n<0?0:n>4294967295?4294967295:n|0}class mV{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=nd(e);const i=this.values,s=this.prefixSum,o=t.length;return o===0?!1:(this.values=new Uint32Array(i.length+o),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e),e+o),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(s.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=nd(e),t=nd(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=nd(e),t=nd(t);const i=this.values,s=this.prefixSum;if(e>=i.length)return!1;const o=i.length-e;return t>=o&&(t=o),t===0?!1:(this.values=new Uint32Array(i.length-t),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(s.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=nd(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let i=t;i<=e;i++)this.prefixSum[i]=this.prefixSum[i-1]+this.values[i];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,i=this.values.length-1,s=0,o=0,r=0;for(;t<=i;)if(s=t+(i-t)/2|0,o=this.prefixSum[s],r=o-this.values[s],e<r)i=s-1;else if(e>=o)t=s+1;else break;return new s4(s,e-r)}}class _V{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const t=this._indexBySum[e],i=t>0?this._prefixSum[t-1]:0;return new s4(t,e-i)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=b_(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){const i=this._values[e],s=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=s+i;for(let o=0;o<i;o++)this._indexBySum[s+o]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}}class s4{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class bV{constructor(e,t,i,s){this._uri=e,this._lines=t,this._eol=i,this._versionId=s,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const i of t)this._acceptDeleteRange(i.range),this._acceptInsertText(new Y(i.range.startLineNumber,i.range.startColumn),i.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,i=new Uint32Array(t);for(let s=0;s<t;s++)i[s]=this._lines[s].length+e;this._lineStarts=new mV(i)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;const i=kg(t);if(i.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}i[i.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]);const s=new Uint32Array(i.length-1);for(let o=1;o<i.length;o++)this._lines.splice(e.lineNumber+o-1,0,i[o]),s[o-1]=i[o].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,s)}}class Ag{constructor(e){const t=s0(e);this._defaultValue=t,this._asciiMap=Ag._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){const t=new Uint8Array(256);return t.fill(e),t}set(e,t){const i=s0(t);e>=0&&e<256?this._asciiMap[e]=i:this._map.set(e,i)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}}class vV{constructor(e,t,i){const s=new Uint8Array(e*t);for(let o=0,r=e*t;o<r;o++)s[o]=i;this._data=s,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,i){this._data[e*this.cols+t]=i}}class wV{constructor(e){let t=0,i=0;for(let o=0,r=e.length;o<r;o++){const[a,l,c]=e[o];l>t&&(t=l),a>i&&(i=a),c>i&&(i=c)}t++,i++;const s=new vV(i,t,0);for(let o=0,r=e.length;o<r;o++){const[a,l,c]=e[o];s.set(a,l,c)}this._states=s,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let tb=null;function CV(){return tb===null&&(tb=new wV([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),tb}let hh=null;function yV(){if(hh===null){hh=new Ag(0);const n=` 	<>'"、。｡､，．：；‘〈「『〔（［｛｢｣｝］）〕』」〉’｀～…`;for(let t=0;t<n.length;t++)hh.set(n.charCodeAt(t),1);const e=".,;:";for(let t=0;t<e.length;t++)hh.set(e.charCodeAt(t),2)}return hh}class o0{static _createLink(e,t,i,s,o){let r=o-1;do{const a=t.charCodeAt(r);if(e.get(a)!==2)break;r--}while(r>s);if(s>0){const a=t.charCodeAt(s-1),l=t.charCodeAt(r);(a===40&&l===41||a===91&&l===93||a===123&&l===125)&&r--}return{range:{startLineNumber:i,startColumn:s+1,endLineNumber:i,endColumn:r+2},url:t.substring(s,r+1)}}static computeLinks(e,t=CV()){const i=yV(),s=[];for(let o=1,r=e.getLineCount();o<=r;o++){const a=e.getLineContent(o),l=a.length;let c=0,d=0,u=0,h=1,f=!1,g=!1,p=!1,_=!1;for(;c<l;){let v=!1;const b=a.charCodeAt(c);if(h===13){let w;switch(b){case 40:f=!0,w=0;break;case 41:w=f?0:1;break;case 91:p=!0,g=!0,w=0;break;case 93:p=!1,w=g?0:1;break;case 123:_=!0,w=0;break;case 125:w=_?0:1;break;case 39:case 34:case 96:u===b?w=1:u===39||u===34||u===96?w=0:w=1;break;case 42:w=u===42?1:0;break;case 124:w=u===124?1:0;break;case 32:w=p?0:1;break;default:w=i.get(b)}w===1&&(s.push(o0._createLink(i,a,o,d,c)),v=!0)}else if(h===12){let w;b===91?(g=!0,w=0):w=i.get(b),w===1?v=!0:h=13}else h=t.nextState(h,b),h===0&&(v=!0);v&&(h=1,f=!1,g=!1,_=!1,d=c+1,u=b),c++}h===13&&s.push(o0._createLink(i,a,o,d,l))}return s}}function SV(n){return!n||typeof n.getLineCount!="function"||typeof n.getLineContent!="function"?[]:o0.computeLinks(n)}class Bw{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,i,s,o){if(e&&t){const r=this.doNavigateValueSet(t,o);if(r)return{range:e,value:r}}if(i&&s){const r=this.doNavigateValueSet(s,o);if(r)return{range:i,value:r}}return null}doNavigateValueSet(e,t){const i=this.numberReplace(e,t);return i!==null?i:this.textReplace(e,t)}numberReplace(e,t){const i=Math.pow(10,e.length-(e.lastIndexOf(".")+1));let s=Number(e);const o=parseFloat(e);return!isNaN(s)&&!isNaN(o)&&s===o?s===0&&!t?null:(s=Math.floor(s*i),s+=t?i:-i,String(s/i)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,i){let s=null;for(let o=0,r=e.length;s===null&&o<r;o++)s=this.valueSetReplace(e[o],t,i);return s}valueSetReplace(e,t,i){let s=e.indexOf(t);return s>=0?(s+=i?1:-1,s<0?s=e.length-1:s%=e.length,e[s]):null}}Bw.INSTANCE=new Bw;class LV extends Ag{constructor(e){super(0);for(let t=0,i=e.length;t<i;t++)this.set(e.charCodeAt(t),2);this.set(32,1),this.set(9,1)}}function xV(n){const e={};return t=>(e.hasOwnProperty(t)||(e[t]=n(t)),e[t])}const xu=xV(n=>new LV(n)),DV=999;class sd{constructor(e,t,i,s){this.searchString=e,this.isRegex=t,this.matchCase=i,this.wordSeparators=s}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=kV(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=kT(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let i=!this.isRegex&&!e;return i&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(i=this.matchCase),new dB(t,this.wordSeparators?xu(this.wordSeparators):null,i?this.searchString:null)}}function kV(n){if(!n||n.length===0)return!1;for(let e=0,t=n.length;e<t;e++){const i=n.charCodeAt(e);if(i===10)return!0;if(i===92){if(e++,e>=t)break;const s=n.charCodeAt(e);if(s===110||s===114||s===87)return!0}}return!1}function zl(n,e,t){if(!t)return new Rf(n,null);const i=[];for(let s=0,o=e.length;s<o;s++)i[s]=e[s];return new Rf(n,i)}class BD{constructor(e){const t=[];let i=0;for(let s=0,o=e.length;s<o;s++)e.charCodeAt(s)===10&&(t[i++]=s);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let i=0,s=t.length-1;if(s===-1||e<=t[0])return 0;for(;i<s;){const o=i+((s-i)/2>>0);t[o]>=e?s=o-1:t[o+1]>=e?(i=o,s=o):i=o+1}return i+1}}class _p{static findMatches(e,t,i,s,o){const r=t.parseSearchRequest();return r?r.regex.multiline?this._doFindMatchesMultiline(e,i,new Sd(r.wordSeparators,r.regex),s,o):this._doFindMatchesLineByLine(e,i,r,s,o):[]}static _getMultilineMatchRange(e,t,i,s,o,r){let a,l=0;s?(l=s.findLineFeedCountBeforeOffset(o),a=t+o+l):a=t+o;let c;if(s){const f=s.findLineFeedCountBeforeOffset(o+r.length)-l;c=a+r.length+f}else c=a+r.length;const d=e.getPositionAt(a),u=e.getPositionAt(c);return new $(d.lineNumber,d.column,u.lineNumber,u.column)}static _doFindMatchesMultiline(e,t,i,s,o){const r=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new BD(a):null,c=[];let d=0,u;for(i.reset(0);u=i.next(a);)if(c[d++]=zl(this._getMultilineMatchRange(e,r,a,l,u.index,u[0]),u,s),d>=o)return c;return c}static _doFindMatchesLineByLine(e,t,i,s,o){const r=[];let a=0;if(t.startLineNumber===t.endLineNumber){const c=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(i,c,t.startLineNumber,t.startColumn-1,a,r,s,o),r}const l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(i,l,t.startLineNumber,t.startColumn-1,a,r,s,o);for(let c=t.startLineNumber+1;c<t.endLineNumber&&a<o;c++)a=this._findMatchesInLine(i,e.getLineContent(c),c,0,a,r,s,o);if(a<o){const c=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(i,c,t.endLineNumber,0,a,r,s,o)}return r}static _findMatchesInLine(e,t,i,s,o,r,a,l){const c=e.wordSeparators;if(!a&&e.simpleSearch){const h=e.simpleSearch,f=h.length,g=t.length;let p=-f;for(;(p=t.indexOf(h,p+f))!==-1;)if((!c||MS(c,t,g,p,f))&&(r[o++]=new Rf(new $(i,p+1+s,i,p+1+f+s),null),o>=l))return o;return o}const d=new Sd(e.wordSeparators,e.regex);let u;d.reset(0);do if(u=d.next(t),u&&(r[o++]=zl(new $(i,u.index+1+s,i,u.index+1+u[0].length+s),u,a),o>=l))return o;while(u);return o}static findNextMatch(e,t,i,s){const o=t.parseSearchRequest();if(!o)return null;const r=new Sd(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindNextMatchMultiline(e,i,r,s):this._doFindNextMatchLineByLine(e,i,r,s)}static _doFindNextMatchMultiline(e,t,i,s){const o=new Y(t.lineNumber,1),r=e.getOffsetAt(o),a=e.getLineCount(),l=e.getValueInRange(new $(o.lineNumber,o.column,a,e.getLineMaxColumn(a)),1),c=e.getEOL()===`\r
`?new BD(l):null;i.reset(t.column-1);const d=i.next(l);return d?zl(this._getMultilineMatchRange(e,r,l,c,d.index,d[0]),d,s):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new Y(1,1),i,s):null}static _doFindNextMatchLineByLine(e,t,i,s){const o=e.getLineCount(),r=t.lineNumber,a=e.getLineContent(r),l=this._findFirstMatchInLine(i,a,r,t.column,s);if(l)return l;for(let c=1;c<=o;c++){const d=(r+c-1)%o,u=e.getLineContent(d+1),h=this._findFirstMatchInLine(i,u,d+1,1,s);if(h)return h}return null}static _findFirstMatchInLine(e,t,i,s,o){e.reset(s-1);const r=e.next(t);return r?zl(new $(i,r.index+1,i,r.index+1+r[0].length),r,o):null}static findPreviousMatch(e,t,i,s){const o=t.parseSearchRequest();if(!o)return null;const r=new Sd(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindPreviousMatchMultiline(e,i,r,s):this._doFindPreviousMatchLineByLine(e,i,r,s)}static _doFindPreviousMatchMultiline(e,t,i,s){const o=this._doFindMatchesMultiline(e,new $(1,1,t.lineNumber,t.column),i,s,10*DV);if(o.length>0)return o[o.length-1];const r=e.getLineCount();return t.lineNumber!==r||t.column!==e.getLineMaxColumn(r)?this._doFindPreviousMatchMultiline(e,new Y(r,e.getLineMaxColumn(r)),i,s):null}static _doFindPreviousMatchLineByLine(e,t,i,s){const o=e.getLineCount(),r=t.lineNumber,a=e.getLineContent(r).substring(0,t.column-1),l=this._findLastMatchInLine(i,a,r,s);if(l)return l;for(let c=1;c<=o;c++){const d=(o+r-c-1)%o,u=e.getLineContent(d+1),h=this._findLastMatchInLine(i,u,d+1,s);if(h)return h}return null}static _findLastMatchInLine(e,t,i,s){let o=null,r;for(e.reset(0);r=e.next(t);)o=zl(new $(i,r.index+1,i,r.index+1+r[0].length),r,s);return o}}function EV(n,e,t,i,s){if(i===0)return!0;const o=e.charCodeAt(i-1);if(n.get(o)!==0||o===13||o===10)return!0;if(s>0){const r=e.charCodeAt(i);if(n.get(r)!==0)return!0}return!1}function IV(n,e,t,i,s){if(i+s===t)return!0;const o=e.charCodeAt(i+s);if(n.get(o)!==0||o===13||o===10)return!0;if(s>0){const r=e.charCodeAt(i+s-1);if(n.get(r)!==0)return!0}return!1}function MS(n,e,t,i,s){return EV(n,e,t,i,s)&&IV(n,e,t,i,s)}class Sd{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let i;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(i=this._searchRegex.exec(e),!i))return null;const s=i.index,o=i[0].length;if(s===this._prevMatchStartIndex&&o===this._prevMatchLength){if(o===0){Ym(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=s,this._prevMatchLength=o,!this._wordSeparators||MS(this._wordSeparators,e,t,s,o))return i}while(i);return null}}class NV{static computeUnicodeHighlights(e,t,i){const s=i?i.startLineNumber:1,o=i?i.endLineNumber:e.getLineCount(),r=new VD(t),a=r.getCandidateCodePoints();let l;a==="allNonBasicAscii"?l=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):l=new RegExp(`${TV(Array.from(a))}`,"g");const c=new Sd(null,l),d=[];let u=!1,h,f=0,g=0,p=0;e:for(let _=s,v=o;_<=v;_++){const b=e.getLineContent(_),w=b.length;c.reset(0);do if(h=c.next(b),h){let C=h.index,S=h.index+h[0].length;if(C>0){const I=b.charCodeAt(C-1);Ni(I)&&C--}if(S+1<w){const I=b.charCodeAt(S-1);Ni(I)&&S++}const k=b.substring(C,S);let L=Ef(C+1,cS,b,0);L&&L.endColumn<=C+1&&(L=null);const x=r.shouldHighlightNonBasicASCII(k,L?L.word:null);if(x!==0){x===3?f++:x===2?g++:x===1?p++:kS();const I=1e3;if(d.length>=I){u=!0;break e}d.push(new $(_,C+1,_,S+1))}}while(h)}return{ranges:d,hasMore:u,ambiguousCharacterCount:f,invisibleCharacterCount:g,nonBasicAsciiCharacterCount:p}}static computeUnicodeHighlightReason(e,t){const i=new VD(t);switch(i.shouldHighlightNonBasicASCII(e,null)){case 0:return null;case 2:return{kind:1};case 3:{const o=e.codePointAt(0),r=i.ambiguousCharacters.getPrimaryConfusable(o),a=Lc.getLocales().filter(l=>!Lc.getInstance(new Set([...t.allowedLocales,l])).isAmbiguous(o));return{kind:0,confusableWith:String.fromCodePoint(r),notAmbiguousInLocales:a}}case 1:return{kind:2}}}}function TV(n,e){return`[${ta(n.map(i=>String.fromCodePoint(i)).join(""))}]`}class VD{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=Lc.getInstance(new Set(e.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const t of Ja.codePoints)WD(String.fromCodePoint(t))||e.add(t);if(this.options.ambiguousCharacters)for(const t of this.ambiguousCharacters.getConfusableCodePoints())e.add(t);for(const t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e,t){const i=e.codePointAt(0);if(this.allowedCodePoints.has(i))return 0;if(this.options.nonBasicASCII)return 1;let s=!1,o=!1;if(t)for(const r of t){const a=r.codePointAt(0),l=yS(r);s=s||l,!l&&!this.ambiguousCharacters.isAmbiguous(a)&&!Ja.isInvisibleCharacter(a)&&(o=!0)}return!s&&o?0:this.options.invisibleCharacters&&!WD(e)&&Ja.isInvisibleCharacter(i)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(i)?3:0}}function WD(n){return n===" "||n===`
`||n==="	"}class et{static addRange(e,t){let i=0;for(;i<t.length&&t[i].endExclusive<e.start;)i++;let s=i;for(;s<t.length&&t[s].start<=e.endExclusive;)s++;if(i===s)t.splice(i,0,e);else{const o=Math.min(e.start,t[i].start),r=Math.max(e.endExclusive,t[s-1].endExclusive);t.splice(i,s-i,new et(o,r))}}static tryCreate(e,t){if(!(e>t))return new et(e,t)}static ofLength(e){return new et(0,e)}constructor(e,t){if(this.start=e,this.endExclusive=t,e>t)throw new Ai(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new et(this.start+e,this.endExclusive+e)}deltaStart(e){return new et(this.start+e,this.endExclusive)}deltaEnd(e){return new et(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new et(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){const t=Math.max(this.start,e.start),i=Math.min(this.endExclusive,e.endExclusive);if(t<=i)return new et(t,i)}slice(e){return e.slice(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new Ai(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new Ai(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}}class RS{constructor(){this._sortedRanges=[]}addRange(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<e.start;)t++;let i=t;for(;i<this._sortedRanges.length&&this._sortedRanges[i].start<=e.endExclusive;)i++;if(t===i)this._sortedRanges.splice(t,0,e);else{const s=Math.min(e.start,this._sortedRanges[t].start),o=Math.max(e.endExclusive,this._sortedRanges[i-1].endExclusive);this._sortedRanges.splice(t,i-t,new et(s,o))}}toString(){return this._sortedRanges.map(e=>e.toString()).join(", ")}intersectsStrict(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<=e.start;)t++;return t<this._sortedRanges.length&&this._sortedRanges[t].start<e.endExclusive}intersectWithRange(e){const t=new RS;for(const i of this._sortedRanges){const s=i.intersect(e);s&&t.addRange(s)}return t}intersectWithRangeLength(e){return this.intersectWithRange(e).length}get length(){return this._sortedRanges.reduce((e,t)=>e+t.length,0)}}let it=class xs{static fromRange(e){return new xs(e.startLineNumber,e.endLineNumber)}static subtract(e,t){return t?e.startLineNumber<t.startLineNumber&&t.endLineNumberExclusive<e.endLineNumberExclusive?[new xs(e.startLineNumber,t.startLineNumber),new xs(t.endLineNumberExclusive,e.endLineNumberExclusive)]:t.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=t.endLineNumberExclusive?[]:t.endLineNumberExclusive<e.endLineNumberExclusive?[new xs(Math.max(t.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new xs(e.startLineNumber,Math.min(t.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let t=e[0];for(let i=1;i<e.length;i++)t=this.join(t,e[i]);return t}static join(e,t){if(e.length===0)return t;if(t.length===0)return e;const i=[];let s=0,o=0,r=null;for(;s<e.length||o<t.length;){let a=null;if(s<e.length&&o<t.length){const l=e[s],c=t[o];l.startLineNumber<c.startLineNumber?(a=l,s++):(a=c,o++)}else s<e.length?(a=e[s],s++):(a=t[o],o++);r===null?r=a:r.endLineNumberExclusive>=a.startLineNumber?r=new xs(r.startLineNumber,Math.max(r.endLineNumberExclusive,a.endLineNumberExclusive)):(i.push(r),r=a)}return r!==null&&i.push(r),i}static ofLength(e,t){return new xs(e,e+t)}static deserialize(e){return new xs(e[0],e[1])}constructor(e,t){if(e>t)throw new Ai(`startLineNumber ${e} cannot be after endLineNumberExclusive ${t}`);this.startLineNumber=e,this.endLineNumberExclusive=t}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new xs(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new xs(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new xs(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){const t=Math.max(this.startLineNumber,e.startLineNumber),i=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(t<=i)return new xs(t,i)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new $(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new $(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){const t=[];for(let i=this.startLineNumber;i<this.endLineNumberExclusive;i++)t.push(e(i));return t}forEach(e){for(let t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new et(this.startLineNumber-1,this.endLineNumberExclusive-1)}};class mm{constructor(e,t,i){this.changes=e,this.moves=t,this.hitTimeout=i}}class vs{static inverse(e,t,i){const s=[];let o=1,r=1;for(const l of e){const c=new vs(new it(o,l.originalRange.startLineNumber),new it(r,l.modifiedRange.startLineNumber),void 0);c.modifiedRange.isEmpty||s.push(c),o=l.originalRange.endLineNumberExclusive,r=l.modifiedRange.endLineNumberExclusive}const a=new vs(new it(o,t+1),new it(r,i+1),void 0);return a.modifiedRange.isEmpty||s.push(a),s}constructor(e,t,i){this.originalRange=e,this.modifiedRange=t,this.innerChanges=i}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}get changedLineCount(){return Math.max(this.originalRange.length,this.modifiedRange.length)}flip(){var e;return new vs(this.modifiedRange,this.originalRange,(e=this.innerChanges)===null||e===void 0?void 0:e.map(t=>t.flip()))}}class ul{constructor(e,t){this.originalRange=e,this.modifiedRange=t}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new ul(this.modifiedRange,this.originalRange)}}class hl{constructor(e,t){this.original=e,this.modified=t}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new hl(this.modified,this.original)}join(e){return new hl(this.original.join(e.original),this.modified.join(e.modified))}}class Mg{constructor(e,t){this.lineRangeMapping=e,this.changes=t}flip(){return new Mg(this.lineRangeMapping.flip(),this.changes.map(e=>e.flip()))}}const AV=3;class MV{computeDiff(e,t,i){var s;const r=new OV(e,t,{maxComputationTime:i.maxComputationTimeMs,shouldIgnoreTrimWhitespace:i.ignoreTrimWhitespace,shouldComputeCharChanges:!0,shouldMakePrettyDiff:!0,shouldPostProcessCharChanges:!0}).computeDiff(),a=[];let l=null;for(const c of r.changes){let d;c.originalEndLineNumber===0?d=new it(c.originalStartLineNumber+1,c.originalStartLineNumber+1):d=new it(c.originalStartLineNumber,c.originalEndLineNumber+1);let u;c.modifiedEndLineNumber===0?u=new it(c.modifiedStartLineNumber+1,c.modifiedStartLineNumber+1):u=new it(c.modifiedStartLineNumber,c.modifiedEndLineNumber+1);let h=new vs(d,u,(s=c.charChanges)===null||s===void 0?void 0:s.map(f=>new ul(new $(f.originalStartLineNumber,f.originalStartColumn,f.originalEndLineNumber,f.originalEndColumn),new $(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn))));l&&(l.modifiedRange.endLineNumberExclusive===h.modifiedRange.startLineNumber||l.originalRange.endLineNumberExclusive===h.originalRange.startLineNumber)&&(h=new vs(l.originalRange.join(h.originalRange),l.modifiedRange.join(h.modifiedRange),l.innerChanges&&h.innerChanges?l.innerChanges.concat(h.innerChanges):void 0),a.pop()),a.push(h),l=h}return Af(()=>PT(a,(c,d)=>d.originalRange.startLineNumber-c.originalRange.endLineNumberExclusive===d.modifiedRange.startLineNumber-c.modifiedRange.endLineNumberExclusive&&c.originalRange.endLineNumberExclusive<d.originalRange.startLineNumber&&c.modifiedRange.endLineNumberExclusive<d.modifiedRange.startLineNumber)),new mm(a,[],r.quitEarly)}}function o4(n,e,t,i){return new Br(n,e,t).ComputeDiff(i)}let HD=class{constructor(e){const t=[],i=[];for(let s=0,o=e.length;s<o;s++)t[s]=Vw(e[s],1),i[s]=Ww(e[s],1);this.lines=e,this._startColumns=t,this._endColumns=i}getElements(){const e=[];for(let t=0,i=this.lines.length;t<i;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,i){const s=[],o=[],r=[];let a=0;for(let l=t;l<=i;l++){const c=this.lines[l],d=e?this._startColumns[l]:1,u=e?this._endColumns[l]:c.length+1;for(let h=d;h<u;h++)s[a]=c.charCodeAt(h-1),o[a]=l+1,r[a]=h,a++;!e&&l<i&&(s[a]=10,o[a]=l+1,r[a]=c.length+1,a++)}return new RV(s,o,r)}};class RV{constructor(e,t,i){this._charCodes=e,this._lineNumbers=t,this._columns=i}toString(){return"["+this._charCodes.map((e,t)=>(e===10?"\\n":String.fromCharCode(e))+`-(${this._lineNumbers[t]},${this._columns[t]})`).join(", ")+"]"}_assertIndex(e,t){if(e<0||e>=t.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(e){return e>0&&e===this._lineNumbers.length?this.getEndLineNumber(e-1):(this._assertIndex(e,this._lineNumbers),this._lineNumbers[e])}getEndLineNumber(e){return e===-1?this.getStartLineNumber(e+1):(this._assertIndex(e,this._lineNumbers),this._charCodes[e]===10?this._lineNumbers[e]+1:this._lineNumbers[e])}getStartColumn(e){return e>0&&e===this._columns.length?this.getEndColumn(e-1):(this._assertIndex(e,this._columns),this._columns[e])}getEndColumn(e){return e===-1?this.getStartColumn(e+1):(this._assertIndex(e,this._columns),this._charCodes[e]===10?1:this._columns[e]+1)}}class Qd{constructor(e,t,i,s,o,r,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=i,this.originalEndColumn=s,this.modifiedStartLineNumber=o,this.modifiedStartColumn=r,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,i){const s=t.getStartLineNumber(e.originalStart),o=t.getStartColumn(e.originalStart),r=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1),l=i.getStartLineNumber(e.modifiedStart),c=i.getStartColumn(e.modifiedStart),d=i.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),u=i.getEndColumn(e.modifiedStart+e.modifiedLength-1);return new Qd(s,o,r,a,l,c,d,u)}}function PV(n){if(n.length<=1)return n;const e=[n[0]];let t=e[0];for(let i=1,s=n.length;i<s;i++){const o=n[i],r=o.originalStart-(t.originalStart+t.originalLength),a=o.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(r,a)<AV?(t.originalLength=o.originalStart+o.originalLength-t.originalStart,t.modifiedLength=o.modifiedStart+o.modifiedLength-t.modifiedStart):(e.push(o),t=o)}return e}class tf{constructor(e,t,i,s,o){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=i,this.modifiedEndLineNumber=s,this.charChanges=o}static createFromDiffResult(e,t,i,s,o,r,a){let l,c,d,u,h;if(t.originalLength===0?(l=i.getStartLineNumber(t.originalStart)-1,c=0):(l=i.getStartLineNumber(t.originalStart),c=i.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(d=s.getStartLineNumber(t.modifiedStart)-1,u=0):(d=s.getStartLineNumber(t.modifiedStart),u=s.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),r&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&o()){const f=i.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),g=s.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);if(f.getElements().length>0&&g.getElements().length>0){let p=o4(f,g,o,!0).changes;a&&(p=PV(p)),h=[];for(let _=0,v=p.length;_<v;_++)h.push(Qd.createFromDiffChange(p[_],f,g))}}return new tf(l,c,d,u,h)}}class OV{constructor(e,t,i){this.shouldComputeCharChanges=i.shouldComputeCharChanges,this.shouldPostProcessCharChanges=i.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=i.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=i.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new HD(e),this.modified=new HD(t),this.continueLineDiff=$D(i.maxComputationTime),this.continueCharDiff=$D(i.maxComputationTime===0?0:Math.min(i.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:void 0}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:void 0}]};const e=o4(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,i=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let l=0,c=t.length;l<c;l++)a.push(tf.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:i,changes:a}}const s=[];let o=0,r=0;for(let a=-1,l=t.length;a<l;a++){const c=a+1<l?t[a+1]:null,d=c?c.originalStart:this.originalLines.length,u=c?c.modifiedStart:this.modifiedLines.length;for(;o<d&&r<u;){const h=this.originalLines[o],f=this.modifiedLines[r];if(h!==f){{let g=Vw(h,1),p=Vw(f,1);for(;g>1&&p>1;){const _=h.charCodeAt(g-2),v=f.charCodeAt(p-2);if(_!==v)break;g--,p--}(g>1||p>1)&&this._pushTrimWhitespaceCharChange(s,o+1,1,g,r+1,1,p)}{let g=Ww(h,1),p=Ww(f,1);const _=h.length+1,v=f.length+1;for(;g<_&&p<v;){const b=h.charCodeAt(g-1),w=h.charCodeAt(p-1);if(b!==w)break;g++,p++}(g<_||p<v)&&this._pushTrimWhitespaceCharChange(s,o+1,g,_,r+1,p,v)}}o++,r++}c&&(s.push(tf.createFromDiffResult(this.shouldIgnoreTrimWhitespace,c,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),o+=c.originalLength,r+=c.modifiedLength)}return{quitEarly:i,changes:s}}_pushTrimWhitespaceCharChange(e,t,i,s,o,r,a){if(this._mergeTrimWhitespaceCharChange(e,t,i,s,o,r,a))return;let l;this.shouldComputeCharChanges&&(l=[new Qd(t,i,t,s,o,r,o,a)]),e.push(new tf(t,t,o,o,l))}_mergeTrimWhitespaceCharChange(e,t,i,s,o,r,a){const l=e.length;if(l===0)return!1;const c=e[l-1];return c.originalEndLineNumber===0||c.modifiedEndLineNumber===0?!1:c.originalEndLineNumber===t&&c.modifiedEndLineNumber===o?(this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new Qd(t,i,t,s,o,r,o,a)),!0):c.originalEndLineNumber+1===t&&c.modifiedEndLineNumber+1===o?(c.originalEndLineNumber=t,c.modifiedEndLineNumber=o,this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new Qd(t,i,t,s,o,r,o,a)),!0):!1}}function Vw(n,e){const t=Jn(n);return t===-1?e:t+1}function Ww(n,e){const t=Fc(n);return t===-1?e:t+2}function $D(n){if(n===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<n}class r4{constructor(){this.map=new Map}add(e,t){let i=this.map.get(e);i||(i=new Set,this.map.set(e,i)),i.add(t)}delete(e,t){const i=this.map.get(e);i&&(i.delete(t),i.size===0&&this.map.delete(e))}forEach(e,t){const i=this.map.get(e);i&&i.forEach(t)}get(e){const t=this.map.get(e);return t||new Set}}class Xr{static trivial(e,t){return new Xr([new es(new et(0,e.length),new et(0,t.length))],!1)}static trivialTimedOut(e,t){return new Xr([new es(new et(0,e.length),new et(0,t.length))],!0)}constructor(e,t){this.diffs=e,this.hitTimeout=t}}class es{constructor(e,t){this.seq1Range=e,this.seq2Range=t}reverse(){return new es(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(e){return new es(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}delta(e){return e===0?this:new es(this.seq1Range.delta(e),this.seq2Range.delta(e))}}class Of{isValid(){return!0}}Of.instance=new Of;class FV{constructor(e){if(this.timeout=e,this.startTime=Date.now(),this.valid=!0,e<=0)throw new Ai("timeout must be positive")}isValid(){if(!(Date.now()-this.startTime<this.timeout)&&this.valid){this.valid=!1;debugger}return this.valid}}class ib{constructor(e,t){this.width=e,this.height=t,this.array=[],this.array=new Array(e*t)}get(e,t){return this.array[e+t*this.width]}set(e,t,i){this.array[e+t*this.width]=i}}class BV{compute(e,t,i=Of.instance,s){if(e.length===0||t.length===0)return Xr.trivial(e,t);const o=new ib(e.length,t.length),r=new ib(e.length,t.length),a=new ib(e.length,t.length);for(let g=0;g<e.length;g++)for(let p=0;p<t.length;p++){if(!i.isValid())return Xr.trivialTimedOut(e,t);const _=g===0?0:o.get(g-1,p),v=p===0?0:o.get(g,p-1);let b;e.getElement(g)===t.getElement(p)?(g===0||p===0?b=0:b=o.get(g-1,p-1),g>0&&p>0&&r.get(g-1,p-1)===3&&(b+=a.get(g-1,p-1)),b+=s?s(g,p):1):b=-1;const w=Math.max(_,v,b);if(w===b){const C=g>0&&p>0?a.get(g-1,p-1):0;a.set(g,p,C+1),r.set(g,p,3)}else w===_?(a.set(g,p,0),r.set(g,p,1)):w===v&&(a.set(g,p,0),r.set(g,p,2));o.set(g,p,w)}const l=[];let c=e.length,d=t.length;function u(g,p){(g+1!==c||p+1!==d)&&l.push(new es(new et(g+1,c),new et(p+1,d))),c=g,d=p}let h=e.length-1,f=t.length-1;for(;h>=0&&f>=0;)r.get(h,f)===3?(u(h,f),h--,f--):r.get(h,f)===1?h--:f--;return u(-1,-1),l.reverse(),new Xr(l,!1)}}function zD(n,e,t){let i=t;return i=$V(n,e,i),i=zV(n,e,i),i}function VV(n,e,t){const i=[];for(const s of t){const o=i[i.length-1];if(!o){i.push(s);continue}s.seq1Range.start-o.seq1Range.endExclusive<=2||s.seq2Range.start-o.seq2Range.endExclusive<=2?i[i.length-1]=new es(o.seq1Range.join(s.seq1Range),o.seq2Range.join(s.seq2Range)):i.push(s)}return i}function WV(n,e,t){let i=t;if(i.length===0)return i;let s=0,o;do{o=!1;const a=[i[0]];for(let l=1;l<i.length;l++){let u=function(f,g){const p=new et(d.seq1Range.endExclusive,c.seq1Range.start);return n.getText(p).replace(/\s/g,"").length<=4&&(f.seq1Range.length+f.seq2Range.length>5||g.seq1Range.length+g.seq2Range.length>5)};var r=u;const c=i[l],d=a[a.length-1];u(d,c)?(o=!0,a[a.length-1]=a[a.length-1].join(c)):a.push(c)}i=a}while(s++<10&&o);return i}function HV(n,e,t){let i=t;if(i.length===0)return i;let s=0,o;do{o=!1;const a=[i[0]];for(let l=1;l<i.length;l++){let u=function(f,g){const p=new et(d.seq1Range.endExclusive,c.seq1Range.start);if(n.countLinesIn(p)>5||p.length>500)return!1;const v=n.getText(p).trim();if(v.length>20||v.split(/\r\n|\r|\n/).length>1)return!1;const b=n.countLinesIn(f.seq1Range),w=f.seq1Range.length,C=e.countLinesIn(f.seq2Range),S=f.seq2Range.length,k=n.countLinesIn(g.seq1Range),L=g.seq1Range.length,x=e.countLinesIn(g.seq2Range),I=g.seq2Range.length,A=2*40+50;function T(O){return Math.min(O,A)}return Math.pow(Math.pow(T(b*40+w),1.5)+Math.pow(T(C*40+S),1.5),1.5)+Math.pow(Math.pow(T(k*40+L),1.5)+Math.pow(T(x*40+I),1.5),1.5)>Math.pow(Math.pow(A,1.5),1.5)*1.3};var r=u;const c=i[l],d=a[a.length-1];u(d,c)?(o=!0,a[a.length-1]=a[a.length-1].join(c)):a.push(c)}i=a}while(s++<10&&o);for(let a=0;a<i.length;a++){const l=i[a];let c=l.seq1Range,d=l.seq2Range;const u=n.extendToFullLines(l.seq1Range),h=n.getText(new et(u.start,l.seq1Range.start));h.length>0&&h.trim().length<=3&&l.seq1Range.length+l.seq2Range.length>100&&(c=l.seq1Range.deltaStart(-h.length),d=l.seq2Range.deltaStart(-h.length));const f=n.getText(new et(l.seq1Range.endExclusive,u.endExclusive));f.length>0&&f.trim().length<=3&&l.seq1Range.length+l.seq2Range.length>150&&(c=c.deltaEnd(f.length),d=d.deltaEnd(f.length)),i[a]=new es(c,d)}return i}function $V(n,e,t){if(t.length===0)return t;const i=[];i.push(t[0]);for(let o=1;o<t.length;o++){const r=i[i.length-1];let a=t[o];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=a.seq1Range.start-r.seq1Range.endExclusive;let c;for(c=1;c<=l&&!(n.getElement(a.seq1Range.start-c)!==n.getElement(a.seq1Range.endExclusive-c)||e.getElement(a.seq2Range.start-c)!==e.getElement(a.seq2Range.endExclusive-c));c++);if(c--,c===l){i[i.length-1]=new es(new et(r.seq1Range.start,a.seq1Range.endExclusive-l),new et(r.seq2Range.start,a.seq2Range.endExclusive-l));continue}a=a.delta(-c)}i.push(a)}const s=[];for(let o=0;o<i.length-1;o++){const r=i[o+1];let a=i[o];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=r.seq1Range.start-a.seq1Range.endExclusive;let c;for(c=0;c<l&&!(n.getElement(a.seq1Range.start+c)!==n.getElement(a.seq1Range.endExclusive+c)||e.getElement(a.seq2Range.start+c)!==e.getElement(a.seq2Range.endExclusive+c));c++);if(c===l){i[o+1]=new es(new et(a.seq1Range.start+l,r.seq1Range.endExclusive),new et(a.seq2Range.start+l,r.seq2Range.endExclusive));continue}c>0&&(a=a.delta(c))}s.push(a)}return i.length>0&&s.push(i[i.length-1]),s}function zV(n,e,t){if(!n.getBoundaryScore||!e.getBoundaryScore)return t;for(let i=0;i<t.length;i++){const s=i>0?t[i-1]:void 0,o=t[i],r=i+1<t.length?t[i+1]:void 0,a=new et(s?s.seq1Range.start+1:0,r?r.seq1Range.endExclusive-1:n.length),l=new et(s?s.seq2Range.start+1:0,r?r.seq2Range.endExclusive-1:e.length);o.seq1Range.isEmpty?t[i]=UD(o,n,e,a,l):o.seq2Range.isEmpty&&(t[i]=UD(o.reverse(),e,n,l,a).reverse())}return t}function UD(n,e,t,i,s){let r=1;for(;n.seq1Range.start-r>=i.start&&n.seq2Range.start-r>=s.start&&t.isStronglyEqual(n.seq2Range.start-r,n.seq2Range.endExclusive-r)&&r<100;)r++;r--;let a=0;for(;n.seq1Range.start+a<i.endExclusive&&n.seq2Range.endExclusive+a<s.endExclusive&&t.isStronglyEqual(n.seq2Range.start+a,n.seq2Range.endExclusive+a)&&a<100;)a++;if(r===0&&a===0)return n;let l=0,c=-1;for(let d=-r;d<=a;d++){const u=n.seq2Range.start+d,h=n.seq2Range.endExclusive+d,f=n.seq1Range.start+d,g=e.getBoundaryScore(f)+t.getBoundaryScore(u)+t.getBoundaryScore(h);g>c&&(c=g,l=d)}return n.delta(l)}class UV{compute(e,t,i=Of.instance){if(e.length===0||t.length===0)return Xr.trivial(e,t);function s(f,g){for(;f<e.length&&g<t.length&&e.getElement(f)===t.getElement(g);)f++,g++;return f}let o=0;const r=new qV;r.set(0,s(0,0));const a=new jV;a.set(0,r.get(0)===0?null:new qD(null,0,0,r.get(0)));let l=0;e:for(;;){if(o++,!i.isValid())return Xr.trivialTimedOut(e,t);const f=-Math.min(o,t.length+o%2),g=Math.min(o,e.length+o%2);for(l=f;l<=g;l+=2){const p=l===g?-1:r.get(l+1),_=l===f?-1:r.get(l-1)+1,v=Math.min(Math.max(p,_),e.length),b=v-l;if(v>e.length||b>t.length)continue;const w=s(v,b);r.set(l,w);const C=v===p?a.get(l+1):a.get(l-1);if(a.set(l,w!==v?new qD(C,v,b,w-v):C),r.get(l)===e.length&&r.get(l)-l===t.length)break e}}let c=a.get(l);const d=[];let u=e.length,h=t.length;for(;;){const f=c?c.x+c.length:0,g=c?c.y+c.length:0;if((f!==u||g!==h)&&d.push(new es(new et(f,u),new et(g,h))),!c)break;u=c.x,h=c.y,c=c.prev}return d.reverse(),new Xr(d,!1)}}class qD{constructor(e,t,i,s){this.prev=e,this.x=t,this.y=i,this.length=s}}class qV{constructor(){this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){if(e<0){if(e=-e-1,e>=this.negativeArr.length){const i=this.negativeArr;this.negativeArr=new Int32Array(i.length*2),this.negativeArr.set(i)}this.negativeArr[e]=t}else{if(e>=this.positiveArr.length){const i=this.positiveArr;this.positiveArr=new Int32Array(i.length*2),this.positiveArr.set(i)}this.positiveArr[e]=t}}}class jV{constructor(){this.positiveArr=[],this.negativeArr=[]}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){e<0?(e=-e-1,this.negativeArr[e]=t):this.positiveArr[e]=t}}class a4{constructor(){this.dynamicProgrammingDiffing=new BV,this.myersDiffingAlgorithm=new UV}computeDiff(e,t,i){if(e.length<=1&&An(e,t,(S,k)=>S===k))return new mm([],[],!1);if(e.length===1&&e[0].length===0||t.length===1&&t[0].length===0)return new mm([new vs(new it(1,e.length+1),new it(1,t.length+1),[new ul(new $(1,1,e.length,e[0].length+1),new $(1,1,t.length,t[0].length+1))])],[],!1);const s=i.maxComputationTimeMs===0?Of.instance:new FV(i.maxComputationTimeMs),o=!i.ignoreTrimWhitespace,r=new Map;function a(S){let k=r.get(S);return k===void 0&&(k=r.size,r.set(S,k)),k}const l=e.map(S=>a(S.trim())),c=t.map(S=>a(S.trim())),d=new ZD(l,e),u=new ZD(c,t),h=(()=>d.length+u.length<1700?this.dynamicProgrammingDiffing.compute(d,u,s,(S,k)=>e[S]===t[k]?t[k].length===0?.1:1+Math.log(1+t[k].length):.99):this.myersDiffingAlgorithm.compute(d,u))();let f=h.diffs,g=h.hitTimeout;f=zD(d,u,f),f=WV(d,u,f);const p=[],_=S=>{if(o)for(let k=0;k<S;k++){const L=v+k,x=b+k;if(e[L]!==t[x]){const I=this.refineDiff(e,t,new es(new et(L,L+1),new et(x,x+1)),s,o);for(const A of I.mappings)p.push(A);I.hitTimeout&&(g=!0)}}};let v=0,b=0;for(const S of f){Af(()=>S.seq1Range.start-v===S.seq2Range.start-b);const k=S.seq1Range.start-v;_(k),v=S.seq1Range.endExclusive,b=S.seq2Range.endExclusive;const L=this.refineDiff(e,t,S,s,o);L.hitTimeout&&(g=!0);for(const x of L.mappings)p.push(x)}_(e.length-v);const w=GD(p,e,t);let C=[];return i.computeMoves&&(C=this.computeMoves(w,e,t,l,c,s,o)),Af(()=>{function S(L,x){if(L.lineNumber<1||L.lineNumber>x.length)return!1;const I=x[L.lineNumber-1];return!(L.column<1||L.column>I.length+1)}function k(L,x){return!(L.startLineNumber<1||L.startLineNumber>x.length+1||L.endLineNumberExclusive<1||L.endLineNumberExclusive>x.length+1)}for(const L of w){if(!L.innerChanges)return!1;for(const x of L.innerChanges)if(!(S(x.modifiedRange.getStartPosition(),t)&&S(x.modifiedRange.getEndPosition(),t)&&S(x.originalRange.getStartPosition(),e)&&S(x.originalRange.getEndPosition(),e)))return!1;if(!k(L.modifiedRange,t)||!k(L.originalRange,e))return!1}return!0}),new mm(w,C,g)}computeMoves(e,t,i,s,o,r,a){const l=[],c=e.filter(w=>w.modifiedRange.isEmpty&&w.originalRange.length>=3).map(w=>new t2(w.originalRange,t,w)),d=new Set(e.filter(w=>w.originalRange.isEmpty&&w.modifiedRange.length>=3).map(w=>new t2(w.modifiedRange,i,w))),u=new Set;for(const w of c){let C=-1,S;for(const k of d){const L=w.computeSimilarity(k);L>C&&(C=L,S=k)}if(C>.9&&S&&(d.delete(S),l.push(new hl(w.range,S.range)),u.add(w.source),u.add(S.source)),!r.isValid())return[]}const h=new r4;for(const w of e)if(!u.has(w))for(let C=w.originalRange.startLineNumber;C<w.originalRange.endLineNumberExclusive-2;C++){const S=`${s[C-1]}:${s[C+1-1]}:${s[C+2-1]}`;h.add(S,{range:new it(C,C+3)})}const f=[];e.sort(Eo(w=>w.modifiedRange.startLineNumber,Oa));for(const w of e){if(u.has(w))continue;let C=[];for(let S=w.modifiedRange.startLineNumber;S<w.modifiedRange.endLineNumberExclusive-2;S++){const k=`${o[S-1]}:${o[S+1-1]}:${o[S+2-1]}`,L=new it(S,S+3),x=[];h.forEach(k,({range:I})=>{for(const T of C)if(T.originalLineRange.endLineNumberExclusive+1===I.endLineNumberExclusive&&T.modifiedLineRange.endLineNumberExclusive+1===L.endLineNumberExclusive){T.originalLineRange=new it(T.originalLineRange.startLineNumber,I.endLineNumberExclusive),T.modifiedLineRange=new it(T.modifiedLineRange.startLineNumber,L.endLineNumberExclusive),x.push(T);return}const A={modifiedLineRange:L,originalLineRange:I};f.push(A),x.push(A)}),C=x}if(!r.isValid())return[]}f.sort(QN(Eo(w=>w.modifiedLineRange.length,Oa)));const g=new jD,p=new jD;for(const w of f){const C=w.modifiedLineRange.startLineNumber-w.originalLineRange.startLineNumber,S=g.subtractFrom(w.modifiedLineRange),k=p.subtractFrom(w.originalLineRange).map(x=>x.delta(C)),L=KV(S,k);for(const x of L){if(x.length<3)continue;const I=x,A=x.delta(-C);l.push(new hl(A,I)),g.addRange(I),p.addRange(A)}}if(l.sort(Eo(w=>w.original.startLineNumber,Oa)),l.length===0)return[];let _=[l[0]];for(let w=1;w<l.length;w++){const C=_[_.length-1],S=l[w],k=S.original.startLineNumber-C.original.endLineNumberExclusive,L=S.modified.startLineNumber-C.modified.endLineNumberExclusive;if(k>=0&&L>=0&&k+L<=2){_[_.length-1]=C.join(S);continue}S.original.toOffsetRange().slice(t).map(A=>A.trim()).join(`
`).length<=10||_.push(S)}const v=PS.createOfSorted(e,w=>w.originalRange.endLineNumberExclusive,Oa);return _=_.filter(w=>{const C=v.findLastItemBeforeOrEqual(w.original.startLineNumber)||new vs(new it(1,1),new it(1,1),[]),S=w.modified.startLineNumber-C.modifiedRange.endLineNumberExclusive,k=w.original.startLineNumber-C.originalRange.endLineNumberExclusive;return S!==k}),_.map(w=>{const C=this.refineDiff(t,i,new es(w.original.toOffsetRange(),w.modified.toOffsetRange()),r,a),S=GD(C.mappings,t,i,!0);return new Mg(w,S)})}refineDiff(e,t,i,s,o){const r=new XD(e,i.seq1Range,o),a=new XD(t,i.seq2Range,o),l=r.length+a.length<500?this.dynamicProgrammingDiffing.compute(r,a,s):this.myersDiffingAlgorithm.compute(r,a,s);let c=l.diffs;return c=zD(r,a,c),c=GV(r,a,c),c=VV(r,a,c),c=HV(r,a,c),{mappings:c.map(u=>new ul(r.translateRange(u.seq1Range),a.translateRange(u.seq2Range))),hitTimeout:l.hitTimeout}}}class PS{static createOfSorted(e,t,i){return new PS(e,t,i)}constructor(e,t,i){this._items=e,this._itemToDomain=t,this._domainComparator=i,this._currentIdx=0,this._lastValue=void 0,this._hasLastValue=!1}findLastItemBeforeOrEqual(e){if(this._hasLastValue&&yc.isLessThan(this._domainComparator(e,this._lastValue)))throw new Ai;for(this._lastValue=e,this._hasLastValue=!0;this._currentIdx<this._items.length&&yc.isLessThanOrEqual(this._domainComparator(this._itemToDomain(this._items[this._currentIdx]),e));)this._currentIdx++;return this._currentIdx===0?void 0:this._items[this._currentIdx-1]}}function KV(n,e){const t=[];let i=0,s=0;for(;i<n.length&&s<e.length;){const o=n[i],r=e[s],a=o.intersect(r);a&&!a.isEmpty&&t.push(a),o.endLineNumberExclusive<r.endLineNumberExclusive?i++:s++}return t}class jD{constructor(){this._normalizedRanges=[]}addRange(e){const t=KD(this._normalizedRanges.findIndex(s=>s.endLineNumberExclusive>=e.startLineNumber),this._normalizedRanges.length),i=kv(this._normalizedRanges,s=>s.startLineNumber<=e.endLineNumberExclusive)+1;if(t===i)this._normalizedRanges.splice(t,0,e);else if(t===i-1){const s=this._normalizedRanges[t];this._normalizedRanges[t]=s.join(e)}else{const s=this._normalizedRanges[t].join(this._normalizedRanges[i-1]).join(e);this._normalizedRanges.splice(t,i-t,s)}}subtractFrom(e){const t=KD(this._normalizedRanges.findIndex(r=>r.endLineNumberExclusive>=e.startLineNumber),this._normalizedRanges.length),i=kv(this._normalizedRanges,r=>r.startLineNumber<=e.endLineNumberExclusive)+1;if(t===i)return[e];const s=[];let o=e.startLineNumber;for(let r=t;r<i;r++){const a=this._normalizedRanges[r];a.startLineNumber>o&&s.push(new it(o,a.startLineNumber)),o=a.endLineNumberExclusive}return o<e.endLineNumberExclusive&&s.push(new it(o,e.endLineNumberExclusive)),s}}function KD(n,e){return n===-1?e:n}function GV(n,e,t){const i=[];let s;function o(){if(!s)return;const l=s.s1Range.length-s.deleted;s.s2Range.length-s.added,Math.max(s.deleted,s.added)+(s.count-1)>l&&i.push(new es(s.s1Range,s.s2Range)),s=void 0}for(const l of t){let c=function(g,p){var _,v,b,w;if(!s||!s.s1Range.containsRange(g)||!s.s2Range.containsRange(p))if(s&&!(s.s1Range.endExclusive<g.start&&s.s2Range.endExclusive<p.start)){const k=et.tryCreate(s.s1Range.endExclusive,g.start),L=et.tryCreate(s.s2Range.endExclusive,p.start);s.deleted+=(_=k==null?void 0:k.length)!==null&&_!==void 0?_:0,s.added+=(v=L==null?void 0:L.length)!==null&&v!==void 0?v:0,s.s1Range=s.s1Range.join(g),s.s2Range=s.s2Range.join(p)}else o(),s={added:0,deleted:0,count:0,s1Range:g,s2Range:p};const C=g.intersect(l.seq1Range),S=p.intersect(l.seq2Range);s.count++,s.deleted+=(b=C==null?void 0:C.length)!==null&&b!==void 0?b:0,s.added+=(w=S==null?void 0:S.length)!==null&&w!==void 0?w:0};var a=c;const d=n.findWordContaining(l.seq1Range.start-1),u=e.findWordContaining(l.seq2Range.start-1),h=n.findWordContaining(l.seq1Range.endExclusive),f=e.findWordContaining(l.seq2Range.endExclusive);d&&h&&u&&f&&d.equals(h)&&u.equals(f)?c(d,u):(d&&u&&c(d,u),h&&f&&c(h,f))}return o(),ZV(t,i)}function ZV(n,e){const t=[];for(;n.length>0||e.length>0;){const i=n[0],s=e[0];let o;i&&(!s||i.seq1Range.start<s.seq1Range.start)?o=n.shift():o=e.shift(),t.length>0&&t[t.length-1].seq1Range.endExclusive>=o.seq1Range.start?t[t.length-1]=t[t.length-1].join(o):t.push(o)}return t}function GD(n,e,t,i=!1){const s=[];for(const o of XV(n.map(r=>YV(r,e,t)),(r,a)=>r.originalRange.overlapOrTouch(a.originalRange)||r.modifiedRange.overlapOrTouch(a.modifiedRange))){const r=o[0],a=o[o.length-1];s.push(new vs(r.originalRange.join(a.originalRange),r.modifiedRange.join(a.modifiedRange),o.map(l=>l.innerChanges[0])))}return Af(()=>!i&&s.length>0&&s[0].originalRange.startLineNumber!==s[0].modifiedRange.startLineNumber?!1:PT(s,(o,r)=>r.originalRange.startLineNumber-o.originalRange.endLineNumberExclusive===r.modifiedRange.startLineNumber-o.modifiedRange.endLineNumberExclusive&&o.originalRange.endLineNumberExclusive<r.originalRange.startLineNumber&&o.modifiedRange.endLineNumberExclusive<r.modifiedRange.startLineNumber)),s}function YV(n,e,t){let i=0,s=0;n.modifiedRange.endColumn===1&&n.originalRange.endColumn===1&&n.originalRange.startLineNumber+i<=n.originalRange.endLineNumber&&n.modifiedRange.startLineNumber+i<=n.modifiedRange.endLineNumber&&(s=-1),n.modifiedRange.startColumn-1>=t[n.modifiedRange.startLineNumber-1].length&&n.originalRange.startColumn-1>=e[n.originalRange.startLineNumber-1].length&&n.originalRange.startLineNumber<=n.originalRange.endLineNumber+s&&n.modifiedRange.startLineNumber<=n.modifiedRange.endLineNumber+s&&(i=1);const o=new it(n.originalRange.startLineNumber+i,n.originalRange.endLineNumber+1+s),r=new it(n.modifiedRange.startLineNumber+i,n.modifiedRange.endLineNumber+1+s);return new vs(o,r,[n])}function*XV(n,e){let t,i;for(const s of n)i!==void 0&&e(i,s)?t.push(s):(t&&(yield t),t=[s]),i=s;t&&(yield t)}class ZD{constructor(e,t){this.trimmedHash=e,this.lines=t}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){const t=e===0?0:YD(this.lines[e-1]),i=e===this.lines.length?0:YD(this.lines[e]);return 1e3-(t+i)}getText(e){return this.lines.slice(e.start,e.endExclusive).join(`
`)}isStronglyEqual(e,t){return this.lines[e]===this.lines[t]}}function YD(n){let e=0;for(;e<n.length&&(n.charCodeAt(e)===32||n.charCodeAt(e)===9);)e++;return e}class XD{constructor(e,t,i){this.lines=e,this.considerWhitespaceChanges=i,this.elements=[],this.firstCharOffsetByLineMinusOne=[],this.additionalOffsetByLine=[];let s=!1;t.start>0&&t.endExclusive>=e.length&&(t=new et(t.start-1,t.endExclusive),s=!0),this.lineRange=t;for(let o=this.lineRange.start;o<this.lineRange.endExclusive;o++){let r=e[o],a=0;if(s)a=r.length,r="",s=!1;else if(!i){const l=r.trimStart();a=r.length-l.length,r=l.trimEnd()}this.additionalOffsetByLine.push(a);for(let l=0;l<r.length;l++)this.elements.push(r.charCodeAt(l));o<e.length-1&&(this.elements.push(`
`.charCodeAt(0)),this.firstCharOffsetByLineMinusOne[o-this.lineRange.start]=this.elements.length)}this.additionalOffsetByLine.push(0)}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new et(0,this.length))}getText(e){return this.elements.slice(e.start,e.endExclusive).map(t=>String.fromCharCode(t)).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){const t=JD(e>0?this.elements[e-1]:-1),i=JD(e<this.elements.length?this.elements[e]:-1);if(t===6&&i===7)return 0;let s=0;return t!==i&&(s+=10,i===1&&(s+=1)),s+=QD(t),s+=QD(i),s}translateOffset(e){if(this.lineRange.isEmpty)return new Y(this.lineRange.start+1,1);let t=0,i=this.firstCharOffsetByLineMinusOne.length;for(;t<i;){const o=Math.floor((t+i)/2);this.firstCharOffsetByLineMinusOne[o]>e?i=o:t=o+1}const s=t===0?0:this.firstCharOffsetByLineMinusOne[t-1];return new Y(this.lineRange.start+t+1,e-s+1+this.additionalOffsetByLine[t])}translateRange(e){return $.fromPositions(this.translateOffset(e.start),this.translateOffset(e.endExclusive))}findWordContaining(e){if(e<0||e>=this.elements.length||!nb(this.elements[e]))return;let t=e;for(;t>0&&nb(this.elements[t-1]);)t--;let i=e;for(;i<this.elements.length&&nb(this.elements[i]);)i++;return new et(t,i)}countLinesIn(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}isStronglyEqual(e,t){return this.elements[e]===this.elements[t]}extendToFullLines(e){var t,i;const s=(t=JV(this.firstCharOffsetByLineMinusOne,r=>r<=e.start))!==null&&t!==void 0?t:0,o=(i=tW(this.firstCharOffsetByLineMinusOne,r=>e.endExclusive<=r))!==null&&i!==void 0?i:this.elements.length;return new et(s,o)}}function QV(n,e){let t=0,i=n.length;for(;t<i;){const s=Math.floor((t+i)/2);e(n[s])?t=s+1:i=s}return t-1}function JV(n,e){const t=QV(n,e);return t===-1?void 0:n[t]}function eW(n,e){let t=0,i=n.length;for(;t<i;){const s=Math.floor((t+i)/2);e(n[s])?i=s:t=s+1}return t}function tW(n,e){const t=eW(n,e);return t===n.length?void 0:n[t]}function nb(n){return n>=97&&n<=122||n>=65&&n<=90||n>=48&&n<=57}const iW={0:0,1:0,2:0,3:10,4:2,5:3,6:10,7:10};function QD(n){return iW[n]}function JD(n){return n===10?7:n===13?6:nW(n)?5:n>=97&&n<=122?0:n>=65&&n<=90?1:n>=48&&n<=57?2:n===-1?3:4}function nW(n){return n===32||n===9}const sb=new Map;function e2(n){let e=sb.get(n);return e===void 0&&(e=sb.size,sb.set(n,e)),e}class t2{constructor(e,t,i){this.range=e,this.lines=t,this.source=i,this.histogram=[];let s=0;for(let o=e.startLineNumber-1;o<e.endLineNumberExclusive-1;o++){const r=t[o];for(let l=0;l<r.length;l++){s++;const c=r[l],d=e2(c);this.histogram[d]=(this.histogram[d]||0)+1}s++;const a=e2(`
`);this.histogram[a]=(this.histogram[a]||0)+1}this.totalCount=s}computeSimilarity(e){var t,i;let s=0;const o=Math.max(this.histogram.length,e.histogram.length);for(let r=0;r<o;r++)s+=Math.abs(((t=this.histogram[r])!==null&&t!==void 0?t:0)-((i=e.histogram[r])!==null&&i!==void 0?i:0));return 1-s/(this.totalCount+e.totalCount)}}const i2={getLegacy:()=>new MV,getAdvanced:()=>new a4};function el(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}class rt{constructor(e,t,i,s=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,i))|0,this.a=el(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class Ys{constructor(e,t,i,s){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=el(Math.max(Math.min(1,t),0),3),this.l=el(Math.max(Math.min(1,i),0),3),this.a=el(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,s=e.b/255,o=e.a,r=Math.max(t,i,s),a=Math.min(t,i,s);let l=0,c=0;const d=(a+r)/2,u=r-a;if(u>0){switch(c=Math.min(d<=.5?u/(2*d):u/(2-2*d),1),r){case t:l=(i-s)/u+(i<s?6:0);break;case i:l=(s-t)/u+2;break;case s:l=(t-i)/u+4;break}l*=60,l=Math.round(l)}return new Ys(l,c,d,o)}static _hue2rgb(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}static toRGBA(e){const t=e.h/360,{s:i,l:s,a:o}=e;let r,a,l;if(i===0)r=a=l=s;else{const c=s<.5?s*(1+i):s+i-s*i,d=2*s-c;r=Ys._hue2rgb(d,c,t+1/3),a=Ys._hue2rgb(d,c,t),l=Ys._hue2rgb(d,c,t-1/3)}return new rt(Math.round(r*255),Math.round(a*255),Math.round(l*255),o)}}class Ld{constructor(e,t,i,s){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=el(Math.max(Math.min(1,t),0),3),this.v=el(Math.max(Math.min(1,i),0),3),this.a=el(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,s=e.b/255,o=Math.max(t,i,s),r=Math.min(t,i,s),a=o-r,l=o===0?0:a/o;let c;return a===0?c=0:o===t?c=((i-s)/a%6+6)%6:o===i?c=(s-t)/a+2:c=(t-i)/a+4,new Ld(Math.round(c*60),l,o,e.a)}static toRGBA(e){const{h:t,s:i,v:s,a:o}=e,r=s*i,a=r*(1-Math.abs(t/60%2-1)),l=s-r;let[c,d,u]=[0,0,0];return t<60?(c=r,d=a):t<120?(c=a,d=r):t<180?(d=r,u=a):t<240?(d=a,u=r):t<300?(c=a,u=r):t<=360&&(c=r,u=a),c=Math.round((c+l)*255),d=Math.round((d+l)*255),u=Math.round((u+l)*255),new rt(c,d,u,o)}}class J{static fromHex(e){return J.Format.CSS.parseHex(e)||J.red}static equals(e,t){return!e&&!t?!0:!e||!t?!1:e.equals(t)}get hsla(){return this._hsla?this._hsla:Ys.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:Ld.fromRGBA(this.rgba)}constructor(e){if(e)if(e instanceof rt)this.rgba=e;else if(e instanceof Ys)this._hsla=e,this.rgba=Ys.toRGBA(e);else if(e instanceof Ld)this._hsva=e,this.rgba=Ld.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}equals(e){return!!e&&rt.equals(this.rgba,e.rgba)&&Ys.equals(this.hsla,e.hsla)&&Ld.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=J._relativeLuminanceForComponent(this.rgba.r),t=J._relativeLuminanceForComponent(this.rgba.g),i=J._relativeLuminanceForComponent(this.rgba.b),s=.2126*e+.7152*t+.0722*i;return el(s,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t>i}isDarkerThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t<i}lighten(e){return new J(new Ys(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new J(new Ys(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:i,b:s,a:o}=this.rgba;return new J(new rt(t,i,s,o*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new J(new rt(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}makeOpaque(e){if(this.isOpaque()||e.rgba.a!==1)return this;const{r:t,g:i,b:s,a:o}=this.rgba;return new J(new rt(e.rgba.r-o*(e.rgba.r-t),e.rgba.g-o*(e.rgba.g-i),e.rgba.b-o*(e.rgba.b-s),1))}toString(){return this._toString||(this._toString=J.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,i){if(e.isLighterThan(t))return e;i=i||.5;const s=e.getRelativeLuminance(),o=t.getRelativeLuminance();return i=i*(o-s)/o,e.lighten(i)}static getDarkerColor(e,t,i){if(e.isDarkerThan(t))return e;i=i||.5;const s=e.getRelativeLuminance(),o=t.getRelativeLuminance();return i=i*(s-o)/s,e.darken(i)}}J.white=new J(new rt(255,255,255,1));J.black=new J(new rt(0,0,0,1));J.red=new J(new rt(255,0,0,1));J.blue=new J(new rt(0,0,255,1));J.green=new J(new rt(0,255,0,1));J.cyan=new J(new rt(0,255,255,1));J.lightgrey=new J(new rt(211,211,211,1));J.transparent=new J(new rt(0,0,0,0));(function(n){(function(e){(function(t){function i(f){return f.rgba.a===1?`rgb(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b})`:n.Format.CSS.formatRGBA(f)}t.formatRGB=i;function s(f){return`rgba(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b}, ${+f.rgba.a.toFixed(2)})`}t.formatRGBA=s;function o(f){return f.hsla.a===1?`hsl(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%)`:n.Format.CSS.formatHSLA(f)}t.formatHSL=o;function r(f){return`hsla(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%, ${f.hsla.a.toFixed(2)})`}t.formatHSLA=r;function a(f){const g=f.toString(16);return g.length!==2?"0"+g:g}function l(f){return`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}`}t.formatHex=l;function c(f,g=!1){return g&&f.rgba.a===1?n.Format.CSS.formatHex(f):`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}${a(Math.round(f.rgba.a*255))}`}t.formatHexA=c;function d(f){return f.isOpaque()?n.Format.CSS.formatHex(f):n.Format.CSS.formatRGBA(f)}t.format=d;function u(f){const g=f.length;if(g===0||f.charCodeAt(0)!==35)return null;if(g===7){const p=16*h(f.charCodeAt(1))+h(f.charCodeAt(2)),_=16*h(f.charCodeAt(3))+h(f.charCodeAt(4)),v=16*h(f.charCodeAt(5))+h(f.charCodeAt(6));return new n(new rt(p,_,v,1))}if(g===9){const p=16*h(f.charCodeAt(1))+h(f.charCodeAt(2)),_=16*h(f.charCodeAt(3))+h(f.charCodeAt(4)),v=16*h(f.charCodeAt(5))+h(f.charCodeAt(6)),b=16*h(f.charCodeAt(7))+h(f.charCodeAt(8));return new n(new rt(p,_,v,b/255))}if(g===4){const p=h(f.charCodeAt(1)),_=h(f.charCodeAt(2)),v=h(f.charCodeAt(3));return new n(new rt(16*p+p,16*_+_,16*v+v))}if(g===5){const p=h(f.charCodeAt(1)),_=h(f.charCodeAt(2)),v=h(f.charCodeAt(3)),b=h(f.charCodeAt(4));return new n(new rt(16*p+p,16*_+_,16*v+v,(16*b+b)/255))}return null}t.parseHex=u;function h(f){switch(f){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(e.CSS||(e.CSS={}))})(n.Format||(n.Format={}))})(J||(J={}));function l4(n){const e=[];for(const t of n){const i=Number(t);(i||i===0&&t.replace(/\s/g,"")!=="")&&e.push(i)}return e}function OS(n,e,t,i){return{red:n/255,blue:t/255,green:e/255,alpha:i}}function fh(n,e){const t=e.index,i=e[0].length;if(!t)return;const s=n.positionAt(t);return{startLineNumber:s.lineNumber,startColumn:s.column,endLineNumber:s.lineNumber,endColumn:s.column+i}}function sW(n,e){if(!n)return;const t=J.Format.CSS.parseHex(e);if(t)return{range:n,color:OS(t.rgba.r,t.rgba.g,t.rgba.b,t.rgba.a)}}function n2(n,e,t){if(!n||e.length!==1)return;const s=e[0].values(),o=l4(s);return{range:n,color:OS(o[0],o[1],o[2],t?o[3]:1)}}function s2(n,e,t){if(!n||e.length!==1)return;const s=e[0].values(),o=l4(s),r=new J(new Ys(o[0],o[1]/100,o[2]/100,t?o[3]:1));return{range:n,color:OS(r.rgba.r,r.rgba.g,r.rgba.b,r.rgba.a)}}function gh(n,e){return typeof n=="string"?[...n.matchAll(e)]:n.findMatches(e)}function oW(n){const e=[],i=gh(n,/\b(rgb|rgba|hsl|hsla)(\([0-9\s,.\%]*\))|(#)([A-Fa-f0-9]{3})\b|(#)([A-Fa-f0-9]{4})\b|(#)([A-Fa-f0-9]{6})\b|(#)([A-Fa-f0-9]{8})\b/gm);if(i.length>0)for(const s of i){const o=s.filter(c=>c!==void 0),r=o[1],a=o[2];if(!a)continue;let l;if(r==="rgb"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*\)$/gm;l=n2(fh(n,s),gh(a,c),!1)}else if(r==="rgba"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=n2(fh(n,s),gh(a,c),!0)}else if(r==="hsl"){const c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*\)$/gm;l=s2(fh(n,s),gh(a,c),!1)}else if(r==="hsla"){const c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=s2(fh(n,s),gh(a,c),!0)}else r==="#"&&(l=sW(fh(n,s),r+a));l&&e.push(l)}return e}function rW(n){return!n||typeof n.getValue!="function"||typeof n.positionAt!="function"?[]:oW(n)}var ua=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class aW extends bV{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}findMatches(e){const t=[];for(let i=0;i<this._lines.length;i++){const s=this._lines[i],o=this.offsetAt(new Y(i+1,1)),r=s.matchAll(e);for(const a of r)(a.index||a.index===0)&&(a.index=a.index+o),t.push(a)}return t}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){const i=Ef(e.column,lT(t),this._lines[e.lineNumber-1],0);return i?new $(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn):null}words(e){const t=this._lines,i=this._wordenize.bind(this);let s=0,o="",r=0,a=[];return{*[Symbol.iterator](){for(;;)if(r<a.length){const l=o.substring(a[r].start,a[r].end);r+=1,yield l}else if(s<t.length)o=t[s],a=i(o,e),r=0,s+=1;else break}}}getLineWords(e,t){const i=this._lines[e-1],s=this._wordenize(i,t),o=[];for(const r of s)o.push({word:i.substring(r.start,r.end),startColumn:r.start+1,endColumn:r.end+1});return o}_wordenize(e,t){const i=[];let s;for(t.lastIndex=0;(s=t.exec(e))&&s[0].length!==0;)i.push({start:s.index,end:s.index+s[0].length});return i}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);const t=this._eol,i=e.startLineNumber-1,s=e.endLineNumber-1,o=[];o.push(this._lines[i].substring(e.startColumn-1));for(let r=i+1;r<s;r++)o.push(this._lines[r]);return o.push(this._lines[s].substring(0,e.endColumn-1)),o.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();const t=this._lineStarts.getIndexOf(e),i=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,i)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),i=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||i.lineNumber!==e.endLineNumber||i.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:i.lineNumber,endColumn:i.column}:e}_validatePosition(e){if(!Y.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:i}=e,s=!1;if(t<1)t=1,i=1,s=!0;else if(t>this._lines.length)t=this._lines.length,i=this._lines[t-1].length+1,s=!0;else{const o=this._lines[t-1].length+1;i<1?(i=1,s=!0):i>o&&(i=o,s=!0)}return s?{lineNumber:t,column:i}:e}}class tl{constructor(e,t){this._host=e,this._models=Object.create(null),this._foreignModuleFactory=t,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(e){return this._models[e]}_getModels(){const e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}acceptNewModel(e){this._models[e.url]=new aW(nt.parse(e.url),e.lines,e.EOL,e.versionId)}acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}acceptRemovedModel(e){this._models[e]&&delete this._models[e]}computeUnicodeHighlights(e,t,i){return ua(this,void 0,void 0,function*(){const s=this._getModel(e);return s?NV.computeUnicodeHighlights(s,t,i):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}})}computeDiff(e,t,i,s){return ua(this,void 0,void 0,function*(){const o=this._getModel(e),r=this._getModel(t);return!o||!r?null:tl.computeDiff(o,r,i,s)})}static computeDiff(e,t,i,s){const o=s==="advanced"?i2.getAdvanced():i2.getLegacy(),r=e.getLinesContent(),a=t.getLinesContent(),l=o.computeDiff(r,a,i),c=l.changes.length>0?!1:this._modelsAreIdentical(e,t);function d(u){return u.map(h=>{var f;return[h.originalRange.startLineNumber,h.originalRange.endLineNumberExclusive,h.modifiedRange.startLineNumber,h.modifiedRange.endLineNumberExclusive,(f=h.innerChanges)===null||f===void 0?void 0:f.map(g=>[g.originalRange.startLineNumber,g.originalRange.startColumn,g.originalRange.endLineNumber,g.originalRange.endColumn,g.modifiedRange.startLineNumber,g.modifiedRange.startColumn,g.modifiedRange.endLineNumber,g.modifiedRange.endColumn])]})}return{identical:c,quitEarly:l.hitTimeout,changes:d(l.changes),moves:l.moves.map(u=>[u.lineRangeMapping.original.startLineNumber,u.lineRangeMapping.original.endLineNumberExclusive,u.lineRangeMapping.modified.startLineNumber,u.lineRangeMapping.modified.endLineNumberExclusive,d(u.changes)])}}static _modelsAreIdentical(e,t){const i=e.getLineCount(),s=t.getLineCount();if(i!==s)return!1;for(let o=1;o<=i;o++){const r=e.getLineContent(o),a=t.getLineContent(o);if(r!==a)return!1}return!0}computeMoreMinimalEdits(e,t,i){return ua(this,void 0,void 0,function*(){const s=this._getModel(e);if(!s)return t;const o=[];let r;t=t.slice(0).sort((a,l)=>{if(a.range&&l.range)return $.compareRangesUsingStarts(a.range,l.range);const c=a.range?0:1,d=l.range?0:1;return c-d});for(let{range:a,text:l,eol:c}of t){if(typeof c=="number"&&(r=c),$.isEmpty(a)&&!l)continue;const d=s.getValueInRange(a);if(l=l.replace(/\r\n|\n|\r/g,s.eol),d===l)continue;if(Math.max(l.length,d.length)>tl._diffLimit){o.push({range:a,text:l});continue}const u=pV(d,l,i),h=s.offsetAt($.lift(a).getStartPosition());for(const f of u){const g=s.positionAt(h+f.originalStart),p=s.positionAt(h+f.originalStart+f.originalLength),_={text:l.substr(f.modifiedStart,f.modifiedLength),range:{startLineNumber:g.lineNumber,startColumn:g.column,endLineNumber:p.lineNumber,endColumn:p.column}};s.getValueInRange(_.range)!==_.text&&o.push(_)}}return typeof r=="number"&&o.push({eol:r,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),o})}computeLinks(e){return ua(this,void 0,void 0,function*(){const t=this._getModel(e);return t?SV(t):null})}computeDefaultDocumentColors(e){return ua(this,void 0,void 0,function*(){const t=this._getModel(e);return t?rW(t):null})}textualSuggest(e,t,i,s){return ua(this,void 0,void 0,function*(){const o=new Oc,r=new RegExp(i,s),a=new Set;e:for(const l of e){const c=this._getModel(l);if(c){for(const d of c.words(r))if(!(d===t||!isNaN(Number(d)))&&(a.add(d),a.size>tl._suggestionsLimit))break e}}return{words:Array.from(a),duration:o.elapsed()}})}computeWordRanges(e,t,i,s){return ua(this,void 0,void 0,function*(){const o=this._getModel(e);if(!o)return Object.create(null);const r=new RegExp(i,s),a=Object.create(null);for(let l=t.startLineNumber;l<t.endLineNumber;l++){const c=o.getLineWords(l,r);for(const d of c){if(!isNaN(Number(d.word)))continue;let u=a[d.word];u||(u=[],a[d.word]=u),u.push({startLineNumber:l,startColumn:d.startColumn,endLineNumber:l,endColumn:d.endColumn})}}return a})}navigateValueSet(e,t,i,s,o){return ua(this,void 0,void 0,function*(){const r=this._getModel(e);if(!r)return null;const a=new RegExp(s,o);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});const l=r.getValueInRange(t),c=r.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!c)return null;const d=r.getValueInRange(c);return Bw.INSTANCE.navigateValueSet(t,l,c,d,i)})}loadForeignModule(e,t,i){const r={host:R7(i,(a,l)=>this._host.fhr(a,l)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(r,t),Promise.resolve(rS(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))}fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(i){return Promise.reject(i)}}}tl._diffLimit=1e5;tl._suggestionsLimit=1e4;typeof importScripts=="function"&&(globalThis.monaco=DT());const c4=ct("textResourceConfigurationService"),d4=ct("textResourcePropertiesService"),Cl=ct("logService");var Ki;(function(n){n[n.Off=0]="Off",n[n.Trace=1]="Trace",n[n.Debug=2]="Debug",n[n.Info=3]="Info",n[n.Warning=4]="Warning",n[n.Error=5]="Error"})(Ki||(Ki={}));const u4=Ki.Info;class h4 extends oe{constructor(){super(...arguments),this.level=u4,this._onDidChangeLogLevel=this._register(new q),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(e){return this.level!==Ki.Off&&this.level<=e}}class lW extends h4{constructor(e=u4,t=!0){super(),this.useColors=t,this.setLevel(e)}trace(e,...t){this.checkLogLevel(Ki.Trace)&&(this.useColors?console.log("%cTRACE","color: #888",e,...t):console.log(e,...t))}debug(e,...t){this.checkLogLevel(Ki.Debug)&&(this.useColors?console.log("%cDEBUG","background: #eee; color: #888",e,...t):console.log(e,...t))}info(e,...t){this.checkLogLevel(Ki.Info)&&(this.useColors?console.log("%c INFO","color: #33f",e,...t):console.log(e,...t))}warn(e,...t){this.checkLogLevel(Ki.Warning)&&(this.useColors?console.log("%c WARN","color: #993",e,...t):console.log(e,...t))}error(e,...t){this.checkLogLevel(Ki.Error)&&(this.useColors?console.log("%c  ERR","color: #f33",e,...t):console.error(e,...t))}dispose(){}}class cW extends h4{constructor(e){super(),this.loggers=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.loggers)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const i of this.loggers)i.trace(e,...t)}debug(e,...t){for(const i of this.loggers)i.debug(e,...t)}info(e,...t){for(const i of this.loggers)i.info(e,...t)}warn(e,...t){for(const i of this.loggers)i.warn(e,...t)}error(e,...t){for(const i of this.loggers)i.error(e,...t)}dispose(){for(const e of this.loggers)e.dispose()}}function dW(n){switch(n){case Ki.Trace:return"trace";case Ki.Debug:return"debug";case Ki.Info:return"info";case Ki.Warning:return"warn";case Ki.Error:return"error";case Ki.Off:return"off"}}new Ie("logLevel",dW(Ki.Info));const At=ct("ILanguageFeaturesService");var uW=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},ph=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},r0=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const o2=60*1e3,r2=5*60*1e3;function Ul(n,e){const t=n.getModel(e);return!(!t||t.isTooLargeForSyncing())}let Hw=class extends oe{constructor(e,t,i,s,o){super(),this._modelService=e,this._workerManager=this._register(new fW(this._modelService,s)),this._logService=i,this._register(o.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:(r,a)=>Ul(this._modelService,r.uri)?this._workerManager.withWorker().then(l=>l.computeLinks(r.uri)).then(l=>l&&{links:l}):Promise.resolve({links:[]})})),this._register(o.completionProvider.register("*",new hW(this._workerManager,t,this._modelService,s)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return Ul(this._modelService,e)}computedUnicodeHighlights(e,t,i){return this._workerManager.withWorker().then(s=>s.computedUnicodeHighlights(e,t,i))}computeDiff(e,t,i,s){return r0(this,void 0,void 0,function*(){const o=yield this._workerManager.withWorker().then(l=>l.computeDiff(e,t,i,s));if(!o)return null;return{identical:o.identical,quitEarly:o.quitEarly,changes:a(o.changes),moves:o.moves.map(l=>new Mg(new hl(new it(l[0],l[1]),new it(l[2],l[3])),a(l[4])))};function a(l){return l.map(c=>{var d;return new vs(new it(c[0],c[1]),new it(c[2],c[3]),(d=c[4])===null||d===void 0?void 0:d.map(u=>new ul(new $(u[0],u[1],u[2],u[3]),new $(u[4],u[5],u[6],u[7]))))})}})}computeMoreMinimalEdits(e,t,i=!1){if(__(t)){if(!Ul(this._modelService,e))return Promise.resolve(t);const s=Oc.create(),o=this._workerManager.withWorker().then(r=>r.computeMoreMinimalEdits(e,t,i));return o.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),s.elapsed())),Promise.race([o,Pf(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return Ul(this._modelService,e)}navigateValueSet(e,t,i){return this._workerManager.withWorker().then(s=>s.navigateValueSet(e,t,i))}canComputeWordRanges(e){return Ul(this._modelService,e)}computeWordRanges(e,t){return this._workerManager.withWorker().then(i=>i.computeWordRanges(e,t))}};Hw=uW([ph(0,ys),ph(1,c4),ph(2,Cl),ph(3,mr),ph(4,At)],Hw);class hW{constructor(e,t,i,s){this.languageConfigurationService=s,this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=i}provideCompletionItems(e,t){return r0(this,void 0,void 0,function*(){const i=this._configurationService.getValue(e.uri,t,"editor");if(!i.wordBasedSuggestions)return;const s=[];if(i.wordBasedSuggestionsMode==="currentDocument")Ul(this._modelService,e.uri)&&s.push(e.uri);else for(const u of this._modelService.getModels())Ul(this._modelService,u.uri)&&(u===e?s.unshift(u.uri):(i.wordBasedSuggestionsMode==="allDocuments"||u.getLanguageId()===e.getLanguageId())&&s.push(u.uri));if(s.length===0)return;const o=this.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),r=e.getWordAtPosition(t),a=r?new $(t.lineNumber,r.startColumn,t.lineNumber,r.endColumn):$.fromPositions(t),l=a.setEndPosition(t.lineNumber,t.column),d=yield(yield this._workerManager.withWorker()).textualSuggest(s,r==null?void 0:r.word,o);if(d)return{duration:d.duration,suggestions:d.words.map(u=>({kind:18,label:u,insertText:u,range:{insert:l,replace:a}}))}})}}class fW extends oe{constructor(e,t){super(),this.languageConfigurationService=t,this._modelService=e,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new Tg).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(r2/2)),this._register(this._modelService.onModelRemoved(s=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>r2&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new f4(this._modelService,!1,"editorWorkerService",this.languageConfigurationService)),Promise.resolve(this._editorWorkerClient)}}class gW extends oe{constructor(e,t,i){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!i){const s=new Tg;s.cancelAndSet(()=>this._checkStopModelSync(),Math.round(o2/2)),this._register(s)}}dispose(){for(const e in this._syncedModels)ci(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t){for(const i of e){const s=i.toString();this._syncedModels[s]||this._beginModelSync(i,t),this._syncedModels[s]&&(this._syncedModelsLastUsedTime[s]=new Date().getTime())}}_checkStopModelSync(){const e=new Date().getTime(),t=[];for(const i in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[i]>o2&&t.push(i);for(const i of t)this._stopModelSync(i)}_beginModelSync(e,t){const i=this._modelService.getModel(e);if(!i||!t&&i.isTooLargeForSyncing())return;const s=e.toString();this._proxy.acceptNewModel({url:i.uri.toString(),lines:i.getLinesContent(),EOL:i.getEOL(),versionId:i.getVersionId()});const o=new Fe;o.add(i.onDidChangeContent(r=>{this._proxy.acceptModelChanged(s.toString(),r)})),o.add(i.onWillDispose(()=>{this._stopModelSync(s)})),o.add(st(()=>{this._proxy.acceptRemovedModel(s)})),this._syncedModels[s]=o}_stopModelSync(e){const t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],ci(t)}}class a2{constructor(e){this._instance=e,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}}class ob{constructor(e){this._workerClient=e}fhr(e,t){return this._workerClient.fhr(e,t)}}class f4 extends oe{constructor(e,t,i,s){super(),this.languageConfigurationService=s,this._disposed=!1,this._modelService=e,this._keepIdleModels=t,this._workerFactory=new B_(i),this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new rV(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new ob(this)))}catch(e){Fw(e),this._worker=new a2(new tl(new ob(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,e=>(Fw(e),this._worker=new a2(new tl(new ob(this),null)),this._getOrCreateWorker().getProxyObject()))}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new gW(e,this._modelService,this._keepIdleModels))),this._modelManager}_withSyncedResources(e,t=!1){return r0(this,void 0,void 0,function*(){return this._disposed?Promise.reject(FF()):this._getProxy().then(i=>(this._getOrCreateModelManager(i).ensureSyncedResources(e,t),i))})}computedUnicodeHighlights(e,t,i){return this._withSyncedResources([e]).then(s=>s.computeUnicodeHighlights(e.toString(),t,i))}computeDiff(e,t,i,s){return this._withSyncedResources([e,t],!0).then(o=>o.computeDiff(e.toString(),t.toString(),i,s))}computeMoreMinimalEdits(e,t,i){return this._withSyncedResources([e]).then(s=>s.computeMoreMinimalEdits(e.toString(),t,i))}computeLinks(e){return this._withSyncedResources([e]).then(t=>t.computeLinks(e.toString()))}computeDefaultDocumentColors(e){return this._withSyncedResources([e]).then(t=>t.computeDefaultDocumentColors(e.toString()))}textualSuggest(e,t,i){return r0(this,void 0,void 0,function*(){const s=yield this._withSyncedResources(e),o=i.source,r=i.flags;return s.textualSuggest(e.map(a=>a.toString()),t,o,r)})}computeWordRanges(e,t){return this._withSyncedResources([e]).then(i=>{const s=this._modelService.getModel(e);if(!s)return Promise.resolve(null);const o=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId()).getWordDefinition(),r=o.source,a=o.flags;return i.computeWordRanges(e.toString(),t,r,a)})}navigateValueSet(e,t,i){return this._withSyncedResources([e]).then(s=>{const o=this._modelService.getModel(e);if(!o)return null;const r=this.languageConfigurationService.getLanguageConfiguration(o.getLanguageId()).getWordDefinition(),a=r.source,l=r.flags;return s.navigateValueSet(e.toString(),t,i,a,l)})}dispose(){super.dispose(),this._disposed=!0}}function pW(n,e,t){return new mW(n,e,t)}class mW extends f4{constructor(e,t,i){super(e,i.keepIdleModels||!1,i.label,t),this._foreignModuleId=i.moduleId,this._foreignModuleCreateData=i.createData||null,this._foreignModuleHost=i.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(i){return Promise.reject(i)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{const t=this._foreignModuleHost?rS(this._foreignModuleHost):[];return e.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(i=>{this._foreignModuleCreateData=null;const s=(a,l)=>e.fmr(a,l),o=(a,l)=>function(){const c=Array.prototype.slice.call(arguments,0);return l(a,c)},r={};for(const a of i)r[a]=o(a,s);return r})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this._withSyncedResources(e).then(t=>this.getProxy())}}class qn{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static getClassNameFromMetadata(e){let i="mtk"+this.getForeground(e);const s=this.getFontStyle(e);return s&1&&(i+=" mtki"),s&2&&(i+=" mtkb"),s&4&&(i+=" mtku"),s&8&&(i+=" mtks"),i}static getInlineStyleFromMetadata(e,t){const i=this.getForeground(e),s=this.getFontStyle(e);let o=`color: ${t[i]};`;s&1&&(o+="font-style: italic;"),s&2&&(o+="font-weight: bold;");let r="";return s&4&&(r+=" underline"),s&8&&(r+=" line-through"),r&&(o+=`text-decoration:${r};`),o}static getPresentationFromMetadata(e){const t=this.getForeground(e),i=this.getFontStyle(e);return{foreground:t,italic:!!(i&1),bold:!!(i&2),underline:!!(i&4),strikethrough:!!(i&8)}}}class Hi{static createEmpty(e,t){const i=Hi.defaultTokenMetadata,s=new Uint32Array(2);return s[0]=e.length,s[1]=i,new Hi(s,e,t)}constructor(e,t,i){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this._languageIdCodec=i}equals(e){return e instanceof Hi?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,i){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const s=t<<1,o=s+(i<<1);for(let r=s;r<o;r++)if(this._tokens[r]!==e._tokens[r])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],i=qn.getLanguageId(t);return this._languageIdCodec.decodeLanguageId(i)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return qn.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return qn.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return qn.getClassNameFromMetadata(t)}getInlineStyle(e,t){const i=this._tokens[(e<<1)+1];return qn.getInlineStyleFromMetadata(i,t)}getPresentation(e){const t=this._tokens[(e<<1)+1];return qn.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return Hi.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,i){return new FS(this,e,t,i)}static convertToEndOffset(e,t){const s=(e.length>>>1)-1;for(let o=0;o<s;o++)e[o<<1]=e[o+1<<1];e[s<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let i=0,s=(e.length>>>1)-1;for(;i<s;){const o=i+Math.floor((s-i)/2),r=e[o<<1];if(r===t)return o+1;r<t?i=o+1:r>t&&(s=o)}return i}withInserted(e){if(e.length===0)return this;let t=0,i=0,s="";const o=new Array;let r=0;for(;;){const a=t<this._tokensCount?this._tokens[t<<1]:-1,l=i<e.length?e[i]:null;if(a!==-1&&(l===null||a<=l.offset)){s+=this._text.substring(r,a);const c=this._tokens[(t<<1)+1];o.push(s.length,c),t++,r=a}else if(l){if(l.offset>r){s+=this._text.substring(r,l.offset);const c=this._tokens[(t<<1)+1];o.push(s.length,c),r=l.offset}s+=l.text,o.push(s.length,l.tokenMetadata),i++}else break}return new Hi(new Uint32Array(o),s,this._languageIdCodec)}}Hi.defaultTokenMetadata=(32768|2<<24)>>>0;class FS{constructor(e,t,i,s){this._source=e,this._startOffset=t,this._endOffset=i,this._deltaOffset=s,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this._tokensCount=0;for(let o=this._firstTokenIndex,r=e.getCount();o<r&&!(e.getStartOffset(o)>=i);o++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof FS?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}}class ps{constructor(e,t,i,s){this.startColumn=e,this.endColumn=t,this.className=i,this.type=s,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const i=e.length,s=t.length;if(i!==s)return!1;for(let o=0;o<i;o++)if(!ps._equals(e[o],t[o]))return!1;return!0}static extractWrapped(e,t,i){if(e.length===0)return e;const s=t+1,o=i+1,r=i-t,a=[];let l=0;for(const c of e)c.endColumn<=s||c.startColumn>=o||(a[l++]=new ps(Math.max(1,c.startColumn-s+1),Math.min(r+1,c.endColumn-s+1),c.className,c.type));return a}static filter(e,t,i,s){if(e.length===0)return[];const o=[];let r=0;for(let a=0,l=e.length;a<l;a++){const c=e[a],d=c.range;if(d.endLineNumber<t||d.startLineNumber>t||d.isEmpty()&&(c.type===0||c.type===3))continue;const u=d.startLineNumber===t?d.startColumn:i,h=d.endLineNumber===t?d.endColumn:s;o[r++]=new ps(u,h,c.inlineClassName,c.type)}return o}static _typeCompare(e,t){const i=[2,0,1,3];return i[e]-i[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const i=ps._typeCompare(e.type,t.type);return i!==0?i:e.className!==t.className?e.className<t.className?-1:1:0}}class l2{constructor(e,t,i,s){this.startOffset=e,this.endOffset=t,this.className=i,this.metadata=s}}class a0{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let i=0,s=e.length;i<s;i++)t|=e[i];return t}consumeLowerThan(e,t,i){for(;this.count>0&&this.stopOffsets[0]<e;){let s=0;for(;s+1<this.count&&this.stopOffsets[s]===this.stopOffsets[s+1];)s++;i.push(new l2(t,this.stopOffsets[s],this.classNames.join(" "),a0._metadata(this.metadata))),t=this.stopOffsets[s]+1,this.stopOffsets.splice(0,s+1),this.classNames.splice(0,s+1),this.metadata.splice(0,s+1),this.count-=s+1}return this.count>0&&t<e&&(i.push(new l2(t,e-1,this.classNames.join(" "),a0._metadata(this.metadata))),t=e),t}insert(e,t,i){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(i);else for(let s=0;s<this.count;s++)if(this.stopOffsets[s]>=e){this.stopOffsets.splice(s,0,e),this.classNames.splice(s,0,t),this.metadata.splice(s,0,i);break}this.count++}}class _W{static normalize(e,t){if(t.length===0)return[];const i=[],s=new a0;let o=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];let c=l.startColumn,d=l.endColumn;const u=l.className,h=l.type===1?2:l.type===2?4:0;if(c>1){const p=e.charCodeAt(c-2);Ni(p)&&c--}if(d>1){const p=e.charCodeAt(d-2);Ni(p)&&d--}const f=c-1,g=d-2;o=s.consumeLowerThan(f,o,i),s.count===0&&(o=f),s.insert(g,u,h)}return s.consumeLowerThan(1073741824,o,i),i}}class Ti{constructor(e,t,i,s){this.endIndex=e,this.type=t,this.metadata=i,this.containsRTL=s,this._linePartBrand=void 0}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}class g4{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class yl{constructor(e,t,i,s,o,r,a,l,c,d,u,h,f,g,p,_,v,b,w){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.continuesWithWrappedLine=s,this.isBasicASCII=o,this.containsRTL=r,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=c.sort(ps.compare),this.tabSize=d,this.startVisibleColumn=u,this.spaceWidth=h,this.stopRenderingLineAfter=p,this.renderWhitespace=_==="all"?4:_==="boundary"?1:_==="selection"?2:_==="trailing"?3:0,this.renderControlCharacters=v,this.fontLigatures=b,this.selectionsOnLine=w&&w.sort((k,L)=>k.startOffset<L.startOffset?-1:1);const C=Math.abs(g-h),S=Math.abs(f-h);C<S?(this.renderSpaceWidth=g,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=f,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&ps.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class p4{constructor(e,t){this.partIndex=e,this.charIndex=t}}class Ko{static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}setColumnInfo(e,t,i,s){const o=(t<<16|i<<0)>>>0;this._data[e-1]=o,this._horizontalOffset[e-1]=s}getHorizontalOffset(e){return this._horizontalOffset.length===0?0:this._horizontalOffset[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),i=Ko.getPartIndex(t),s=Ko.getCharIndex(t);return new p4(i,s)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,i){if(this.length===0)return 0;const s=(e<<16|i<<0)>>>0;let o=0,r=this.length-1;for(;o+1<r;){const p=o+r>>>1,_=this._data[p];if(_===s)return p;_>s?r=p:o=p}if(o===r)return o;const a=this._data[o],l=this._data[r];if(a===s)return o;if(l===s)return r;const c=Ko.getPartIndex(a),d=Ko.getCharIndex(a),u=Ko.getPartIndex(l);let h;c!==u?h=t:h=Ko.getCharIndex(l);const f=i-d,g=h-i;return f<=g?o:r}}class $w{constructor(e,t,i){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=i}}function W_(n,e){if(n.lineContent.length===0){if(n.lineDecorations.length>0){e.appendString("<span>");let t=0,i=0,s=0;for(const r of n.lineDecorations)(r.type===1||r.type===2)&&(e.appendString('<span class="'),e.appendString(r.className),e.appendString('"></span>'),r.type===1&&(s|=1,t++),r.type===2&&(s|=2,i++));e.appendString("</span>");const o=new Ko(1,t+i);return o.setColumnInfo(1,t,0,0),new $w(o,!1,s)}return e.appendString("<span><span></span></span>"),new $w(new Ko(0,0),!1,0)}return DW(wW(n),e)}class bW{constructor(e,t,i,s){this.characterMapping=e,this.html=t,this.containsRTL=i,this.containsForeignElements=s}}function Rg(n){const e=new Ng(1e4),t=W_(n,e);return new bW(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}class vW{constructor(e,t,i,s,o,r,a,l,c,d,u,h,f,g,p,_){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.len=s,this.isOverflowing=o,this.overflowingCharCount=r,this.parts=a,this.containsForeignElements=l,this.fauxIndentLength=c,this.tabSize=d,this.startVisibleColumn=u,this.containsRTL=h,this.spaceWidth=f,this.renderSpaceCharCode=g,this.renderWhitespace=p,this.renderControlCharacters=_}}function wW(n){const e=n.lineContent;let t,i,s;n.stopRenderingLineAfter!==-1&&n.stopRenderingLineAfter<e.length?(t=!0,i=e.length-n.stopRenderingLineAfter,s=n.stopRenderingLineAfter):(t=!1,i=0,s=e.length);let o=CW(e,n.containsRTL,n.lineTokens,n.fauxIndentLength,s);n.renderControlCharacters&&!n.isBasicASCII&&(o=SW(e,o)),(n.renderWhitespace===4||n.renderWhitespace===1||n.renderWhitespace===2&&n.selectionsOnLine||n.renderWhitespace===3&&!n.continuesWithWrappedLine)&&(o=LW(n,e,s,o));let r=0;if(n.lineDecorations.length>0){for(let a=0,l=n.lineDecorations.length;a<l;a++){const c=n.lineDecorations[a];c.type===3||c.type===1?r|=1:c.type===2&&(r|=2)}o=xW(e,s,o,n.lineDecorations)}return n.containsRTL||(o=yW(e,o,!n.isBasicASCII||n.fontLigatures)),new vW(n.useMonospaceOptimizations,n.canUseHalfwidthRightwardsArrow,e,s,t,i,o,r,n.fauxIndentLength,n.tabSize,n.startVisibleColumn,n.containsRTL,n.spaceWidth,n.renderSpaceCharCode,n.renderWhitespace,n.renderControlCharacters)}function CW(n,e,t,i,s){const o=[];let r=0;i>0&&(o[r++]=new Ti(i,"",0,!1));let a=i;for(let l=0,c=t.getCount();l<c;l++){const d=t.getEndOffset(l);if(d<=i)continue;const u=t.getClassName(l);if(d>=s){const f=e?Tf(n.substring(a,s)):!1;o[r++]=new Ti(s,u,0,f);break}const h=e?Tf(n.substring(a,d)):!1;o[r++]=new Ti(d,u,0,h),a=d}return o}function yW(n,e,t){let i=0;const s=[];let o=0;if(t)for(let r=0,a=e.length;r<a;r++){const l=e[r],c=l.endIndex;if(i+50<c){const d=l.type,u=l.metadata,h=l.containsRTL;let f=-1,g=i;for(let p=i;p<c;p++)n.charCodeAt(p)===32&&(f=p),f!==-1&&p-g>=50&&(s[o++]=new Ti(f+1,d,u,h),g=f+1,f=-1);g!==c&&(s[o++]=new Ti(c,d,u,h))}else s[o++]=l;i=c}else for(let r=0,a=e.length;r<a;r++){const l=e[r],c=l.endIndex,d=c-i;if(d>50){const u=l.type,h=l.metadata,f=l.containsRTL,g=Math.ceil(d/50);for(let p=1;p<g;p++){const _=i+p*50;s[o++]=new Ti(_,u,h,f)}s[o++]=new Ti(c,u,h,f)}else s[o++]=l;i=c}return s}function m4(n){return n<32?n!==9:n===127||n>=8234&&n<=8238||n>=8294&&n<=8297||n>=8206&&n<=8207||n===1564}function SW(n,e){const t=[];let i=new Ti(0,"",0,!1),s=0;for(const o of e){const r=o.endIndex;for(;s<r;s++){const a=n.charCodeAt(s);m4(a)&&(s>i.endIndex&&(i=new Ti(s,o.type,o.metadata,o.containsRTL),t.push(i)),i=new Ti(s+1,"mtkcontrol",o.metadata,!1),t.push(i))}s>i.endIndex&&(i=new Ti(r,o.type,o.metadata,o.containsRTL),t.push(i))}return t}function LW(n,e,t,i){const s=n.continuesWithWrappedLine,o=n.fauxIndentLength,r=n.tabSize,a=n.startVisibleColumn,l=n.useMonospaceOptimizations,c=n.selectionsOnLine,d=n.renderWhitespace===1,u=n.renderWhitespace===3,h=n.renderSpaceWidth!==n.spaceWidth,f=[];let g=0,p=0,_=i[p].type,v=i[p].containsRTL,b=i[p].endIndex;const w=i.length;let C=!1,S=Jn(e),k;S===-1?(C=!0,S=t,k=t):k=Fc(e);let L=!1,x=0,I=c&&c[x],A=a%r;for(let O=o;O<t;O++){const R=e.charCodeAt(O);I&&O>=I.endOffset&&(x++,I=c&&c[x]);let X;if(O<S||O>k)X=!0;else if(R===9)X=!0;else if(R===32)if(d)if(L)X=!0;else{const ie=O+1<t?e.charCodeAt(O+1):0;X=ie===32||ie===9}else X=!0;else X=!1;if(X&&c&&(X=!!I&&I.startOffset<=O&&I.endOffset>O),X&&u&&(X=C||O>k),X&&v&&O>=S&&O<=k&&(X=!1),L){if(!X||!l&&A>=r){if(h){const ie=g>0?f[g-1].endIndex:o;for(let ae=ie+1;ae<=O;ae++)f[g++]=new Ti(ae,"mtkw",1,!1)}else f[g++]=new Ti(O,"mtkw",1,!1);A=A%r}}else(O===b||X&&O>o)&&(f[g++]=new Ti(O,_,0,v),A=A%r);for(R===9?A=r:cl(R)?A+=2:A++,L=X;O===b&&(p++,p<w);)_=i[p].type,v=i[p].containsRTL,b=i[p].endIndex}let T=!1;if(L)if(s&&d){const O=t>0?e.charCodeAt(t-1):0,R=t>1?e.charCodeAt(t-2):0;O===32&&R!==32&&R!==9||(T=!0)}else T=!0;if(T)if(h){const O=g>0?f[g-1].endIndex:o;for(let R=O+1;R<=t;R++)f[g++]=new Ti(R,"mtkw",1,!1)}else f[g++]=new Ti(t,"mtkw",1,!1);else f[g++]=new Ti(t,_,0,v);return f}function xW(n,e,t,i){i.sort(ps.compare);const s=_W.normalize(n,i),o=s.length;let r=0;const a=[];let l=0,c=0;for(let u=0,h=t.length;u<h;u++){const f=t[u],g=f.endIndex,p=f.type,_=f.metadata,v=f.containsRTL;for(;r<o&&s[r].startOffset<g;){const b=s[r];if(b.startOffset>c&&(c=b.startOffset,a[l++]=new Ti(c,p,_,v)),b.endOffset+1<=g)c=b.endOffset+1,a[l++]=new Ti(c,p+" "+b.className,_|b.metadata,v),r++;else{c=g,a[l++]=new Ti(c,p+" "+b.className,_|b.metadata,v);break}}g>c&&(c=g,a[l++]=new Ti(c,p,_,v))}const d=t[t.length-1].endIndex;if(r<o&&s[r].startOffset===d)for(;r<o&&s[r].startOffset===d;){const u=s[r];a[l++]=new Ti(c,u.className,u.metadata,!1),r++}return a}function DW(n,e){const t=n.fontIsMonospace,i=n.canUseHalfwidthRightwardsArrow,s=n.containsForeignElements,o=n.lineContent,r=n.len,a=n.isOverflowing,l=n.overflowingCharCount,c=n.parts,d=n.fauxIndentLength,u=n.tabSize,h=n.startVisibleColumn,f=n.containsRTL,g=n.spaceWidth,p=n.renderSpaceCharCode,_=n.renderWhitespace,v=n.renderControlCharacters,b=new Ko(r+1,c.length);let w=!1,C=0,S=h,k=0,L=0,x=0;f?e.appendString('<span dir="ltr">'):e.appendString("<span>");for(let I=0,A=c.length;I<A;I++){const T=c[I],O=T.endIndex,R=T.type,X=T.containsRTL,ie=_!==0&&T.isWhitespace(),ae=ie&&!t&&(R==="mtkw"||!s),ue=C===O&&T.isPseudoAfter();if(k=0,e.appendString("<span "),X&&e.appendString('style="unicode-bidi:isolate" '),e.appendString('class="'),e.appendString(ae?"mtkz":R),e.appendASCIICharCode(34),ie){let me=0;{let de=C,Ae=S;for(;de<O;de++){const be=(o.charCodeAt(de)===9?u-Ae%u:1)|0;me+=be,de>=d&&(Ae+=be)}}for(ae&&(e.appendString(' style="width:'),e.appendString(String(g*me)),e.appendString('px"')),e.appendASCIICharCode(62);C<O;C++){b.setColumnInfo(C+1,I-x,k,L),x=0;const de=o.charCodeAt(C);let Ae,ye;if(de===9){Ae=u-S%u|0,ye=Ae,!i||ye>1?e.appendCharCode(8594):e.appendCharCode(65515);for(let be=2;be<=ye;be++)e.appendCharCode(160)}else Ae=2,ye=1,e.appendCharCode(p),e.appendCharCode(8204);k+=Ae,L+=ye,C>=d&&(S+=ye)}}else for(e.appendASCIICharCode(62);C<O;C++){b.setColumnInfo(C+1,I-x,k,L),x=0;const me=o.charCodeAt(C);let de=1,Ae=1;switch(me){case 9:de=u-S%u,Ae=de;for(let ye=1;ye<=de;ye++)e.appendCharCode(160);break;case 32:e.appendCharCode(160);break;case 60:e.appendString("&lt;");break;case 62:e.appendString("&gt;");break;case 38:e.appendString("&amp;");break;case 0:v?e.appendCharCode(9216):e.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.appendCharCode(65533);break;default:cl(me)&&Ae++,v&&me<32?e.appendCharCode(9216+me):v&&me===127?e.appendCharCode(9249):v&&m4(me)?(e.appendString("[U+"),e.appendString(kW(me)),e.appendString("]"),de=8,Ae=de):e.appendCharCode(me)}k+=de,L+=Ae,C>=d&&(S+=Ae)}ue?x++:x=0,C>=r&&!w&&T.isPseudoAfter()&&(w=!0,b.setColumnInfo(C+1,I,k,L)),e.appendString("</span>")}return w||b.setColumnInfo(r+1,c.length-1,k,L),a&&(e.appendString('<span class="mtkoverflow">'),e.appendString(m("showMore","Show more ({0})",EW(l))),e.appendString("</span>")),e.appendString("</span>"),new $w(b,f,s)}function kW(n){return n.toString(16).toUpperCase().padStart(4,"0")}function EW(n){return n<1024?m("overflow.chars","{0} chars",n):n<1024*1024?`${(n/1024).toFixed(1)} KB`:`${(n/1024/1024).toFixed(1)} MB`}class c2{constructor(e,t,i,s){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=i|0,this.height=s|0}}class IW{constructor(e,t){this.tabSize=e,this.data=t}}class BS{constructor(e,t,i,s,o,r,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=i,this.maxColumn=s,this.startVisibleColumn=o,this.tokens=r,this.inlineDecorations=a}}class hn{constructor(e,t,i,s,o,r,a,l,c,d){this.minColumn=e,this.maxColumn=t,this.content=i,this.continuesWithWrappedLine=s,this.isBasicASCII=hn.isBasicASCII(i,r),this.containsRTL=hn.containsRTL(i,this.isBasicASCII,o),this.tokens=a,this.inlineDecorations=l,this.tabSize=c,this.startVisibleColumn=d}static isBasicASCII(e,t){return t?yS(e):!0}static containsRTL(e,t,i){return!t&&i?Tf(e):!1}}class Jd{constructor(e,t,i){this.range=e,this.inlineClassName=t,this.type=i}}class NW{constructor(e,t,i,s){this.startOffset=e,this.endOffset=t,this.inlineClassName=i,this.inlineClassNameAffectsLetterSpacing=s}toInlineDecoration(e){return new Jd(new $(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class _4{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}class b4{constructor(e,t,i){this.color=e,this.zIndex=t,this.data=i}static cmp(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}}function TW(n){return Array.isArray(n)}function AW(n){return!TW(n)}function v4(n){return typeof n=="string"}function d2(n){return!v4(n)}function fd(n){return!n}function il(n,e){return n.ignoreCase&&e?e.toLowerCase():e}function u2(n){return n.replace(/[&<>'"_]/g,"-")}function MW(n,e){console.log(`${n.languageId}: ${e}`)}function Pt(n,e){return new Error(`${n.languageId}: ${e}`)}function Ta(n,e,t,i,s){const o=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let r=null;return e.replace(o,function(a,l,c,d,u,h,f,g,p){return fd(c)?fd(d)?!fd(u)&&u<i.length?il(n,i[u]):!fd(f)&&n&&typeof n[f]=="string"?n[f]:(r===null&&(r=s.split("."),r.unshift(s)),!fd(h)&&h<r.length?il(n,r[h]):""):il(n,t):"$"})}function bp(n,e){let t=e;for(;t&&t.length>0;){const i=n.tokenizer[t];if(i)return i;const s=t.lastIndexOf(".");s<0?t=null:t=t.substr(0,s)}return null}function RW(n,e){let t=e;for(;t&&t.length>0;){if(n.stateNames[t])return!0;const s=t.lastIndexOf(".");s<0?t=null:t=t.substr(0,s)}return!1}var PW=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},OW=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},zw;const w4=5;class Ff{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new eu(e,t);let i=eu.getStackElementId(e);i.length>0&&(i+="|"),i+=t;let s=this._entries[i];return s||(s=new eu(e,t),this._entries[i]=s,s)}}Ff._INSTANCE=new Ff(w4);class eu{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return eu._equals(this,e)}push(e){return Ff.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return Ff.create(this.parent,e)}}class xd{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new xd(this.languageId,this.state)}}class Aa{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(t!==null)return new nf(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new nf(e,t);const i=eu.getStackElementId(e);let s=this._entries[i];return s||(s=new nf(e,null),this._entries[i]=s,s)}}Aa._INSTANCE=new Aa(w4);class nf{constructor(e,t){this.stack=e,this.embeddedLanguageData=t}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:Aa.create(this.stack,this.embeddedLanguageData)}equals(e){return!(e instanceof nf)||!this.stack.equals(e.stack)?!1:this.embeddedLanguageData===null&&e.embeddedLanguageData===null?!0:this.embeddedLanguageData===null||e.embeddedLanguageData===null?!1:this.embeddedLanguageData.equals(e.embeddedLanguageData)}}class FW{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(e){this._languageId=e}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new Nf(e,t,this._languageId)))}nestedLanguageTokenize(e,t,i,s){const o=i.languageId,r=i.state,a=hi.get(o);if(!a)return this.enterLanguage(o),this.emit(s,""),r;const l=a.tokenize(e,t,r);if(s!==0)for(const c of l.tokens)this._tokens.push(new Nf(c.offset+s,c.type,c.language));else this._tokens=this._tokens.concat(l.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,l.endState}finalize(e){return new mS(this._tokens,e)}}class l0{constructor(e,t){this._languageService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(e){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(e)}emit(e,t){const i=this._theme.match(this._currentLanguageId,t)|1024;this._lastTokenMetadata!==i&&(this._lastTokenMetadata=i,this._tokens.push(e),this._tokens.push(i))}static _merge(e,t,i){const s=e!==null?e.length:0,o=t.length,r=i!==null?i.length:0;if(s===0&&o===0&&r===0)return new Uint32Array(0);if(s===0&&o===0)return i;if(o===0&&r===0)return e;const a=new Uint32Array(s+o+r);e!==null&&a.set(e);for(let l=0;l<o;l++)a[s+l]=t[l];return i!==null&&a.set(i,s+o),a}nestedLanguageTokenize(e,t,i,s){const o=i.languageId,r=i.state,a=hi.get(o);if(!a)return this.enterLanguage(o),this.emit(s,""),r;const l=a.tokenizeEncoded(e,t,r);if(s!==0)for(let c=0,d=l.tokens.length;c<d;c+=2)l.tokens[c]+=s;return this._prependTokens=l0._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}finalize(e){return new y_(l0._merge(this._prependTokens,this._tokens,null),e)}}let Bf=zw=class{constructor(e,t,i,s,o){this._configurationService=o,this._languageService=e,this._standaloneThemeService=t,this._languageId=i,this._lexer=s,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let r=!1;this._tokenizationRegistryListener=hi.onDidChange(a=>{if(r)return;let l=!1;for(let c=0,d=a.changedLanguages.length;c<d;c++){const u=a.changedLanguages[c];if(this._embeddedLanguages[u]){l=!0;break}}l&&(r=!0,hi.handleChange([this._languageId]),r=!1)}),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._configurationService.onDidChangeConfiguration(a=>{a.affectsConfiguration("editor.maxTokenizationLineLength")&&(this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}))})}dispose(){this._tokenizationRegistryListener.dispose()}getLoadStatus(){const e=[];for(const t in this._embeddedLanguages){const i=hi.get(t);if(i){if(i instanceof zw){const s=i.getLoadStatus();s.loaded===!1&&e.push(s.promise)}continue}hi.isResolved(t)||e.push(hi.getOrCreate(t))}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){const e=Ff.create(null,this._lexer.start);return Aa.create(e,null)}tokenize(e,t,i){if(e.length>=this._maxTokenizationLineLength)return YT(this._languageId,i);const s=new FW,o=this._tokenize(e,t,i,s);return s.finalize(o)}tokenizeEncoded(e,t,i){if(e.length>=this._maxTokenizationLineLength)return XT(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),i);const s=new l0(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),o=this._tokenize(e,t,i,s);return s.finalize(o)}_tokenize(e,t,i,s){return i.embeddedLanguageData?this._nestedTokenize(e,t,i,0,s):this._myTokenize(e,t,i,0,s)}_findLeavingNestedLanguageOffset(e,t){let i=this._lexer.tokenizer[t.stack.state];if(!i&&(i=bp(this._lexer,t.stack.state),!i))throw Pt(this._lexer,"tokenizer state is not defined: "+t.stack.state);let s=-1,o=!1;for(const r of i){if(!d2(r.action)||r.action.nextEmbedded!=="@pop")continue;o=!0;let a=r.regex;const l=r.regex.source;if(l.substr(0,4)==="^(?:"&&l.substr(l.length-1,1)===")"){const d=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(l.substr(4,l.length-5),d)}const c=e.search(a);c===-1||c!==0&&r.matchOnlyAtLineStart||(s===-1||c<s)&&(s=c)}if(!o)throw Pt(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return s}_nestedTokenize(e,t,i,s,o){const r=this._findLeavingNestedLanguageOffset(e,i);if(r===-1){const c=o.nestedLanguageTokenize(e,t,i.embeddedLanguageData,s);return Aa.create(i.stack,new xd(i.embeddedLanguageData.languageId,c))}const a=e.substring(0,r);a.length>0&&o.nestedLanguageTokenize(a,!1,i.embeddedLanguageData,s);const l=e.substring(r);return this._myTokenize(l,t,i,s+r,o)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,i,s,o){o.enterLanguage(this._languageId);const r=e.length,a=t&&this._lexer.includeLF?e+`
`:e,l=a.length;let c=i.embeddedLanguageData,d=i.stack,u=0,h=null,f=!0;for(;f||u<l;){const g=u,p=d.depth,_=h?h.groups.length:0,v=d.state;let b=null,w=null,C=null,S=null,k=null;if(h){b=h.matches;const I=h.groups.shift();w=I.matched,C=I.action,S=h.rule,h.groups.length===0&&(h=null)}else{if(!f&&u>=l)break;f=!1;let I=this._lexer.tokenizer[v];if(!I&&(I=bp(this._lexer,v),!I))throw Pt(this._lexer,"tokenizer state is not defined: "+v);const A=a.substr(u);for(const T of I)if((u===0||!T.matchOnlyAtLineStart)&&(b=A.match(T.regex),b)){w=b[0],C=T.action;break}}if(b||(b=[""],w=""),C||(u<l&&(b=[a.charAt(u)],w=b[0]),C=this._lexer.defaultToken),w===null)break;for(u+=w.length;AW(C)&&d2(C)&&C.test;)C=C.test(w,b,v,u===l);let L=null;if(typeof C=="string"||Array.isArray(C))L=C;else if(C.group)L=C.group;else if(C.token!==null&&C.token!==void 0){if(C.tokenSubst?L=Ta(this._lexer,C.token,w,b,v):L=C.token,C.nextEmbedded)if(C.nextEmbedded==="@pop"){if(!c)throw Pt(this._lexer,"cannot pop embedded language if not inside one");c=null}else{if(c)throw Pt(this._lexer,"cannot enter embedded language from within an embedded language");k=Ta(this._lexer,C.nextEmbedded,w,b,v)}if(C.goBack&&(u=Math.max(0,u-C.goBack)),C.switchTo&&typeof C.switchTo=="string"){let I=Ta(this._lexer,C.switchTo,w,b,v);if(I[0]==="@"&&(I=I.substr(1)),bp(this._lexer,I))d=d.switchTo(I);else throw Pt(this._lexer,"trying to switch to a state '"+I+"' that is undefined in rule: "+this._safeRuleName(S))}else{if(C.transform&&typeof C.transform=="function")throw Pt(this._lexer,"action.transform not supported");if(C.next)if(C.next==="@push"){if(d.depth>=this._lexer.maxStack)throw Pt(this._lexer,"maximum tokenizer stack size reached: ["+d.state+","+d.parent.state+",...]");d=d.push(v)}else if(C.next==="@pop"){if(d.depth<=1)throw Pt(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(S));d=d.pop()}else if(C.next==="@popall")d=d.popall();else{let I=Ta(this._lexer,C.next,w,b,v);if(I[0]==="@"&&(I=I.substr(1)),bp(this._lexer,I))d=d.push(I);else throw Pt(this._lexer,"trying to set a next state '"+I+"' that is undefined in rule: "+this._safeRuleName(S))}}C.log&&typeof C.log=="string"&&MW(this._lexer,this._lexer.languageId+": "+Ta(this._lexer,C.log,w,b,v))}if(L===null)throw Pt(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(S));const x=I=>{const A=this._languageService.getLanguageIdByLanguageName(I)||this._languageService.getLanguageIdByMimeType(I)||I,T=this._getNestedEmbeddedLanguageData(A);if(u<l){const O=e.substr(u);return this._nestedTokenize(O,t,Aa.create(d,T),s+u,o)}else return Aa.create(d,T)};if(Array.isArray(L)){if(h&&h.groups.length>0)throw Pt(this._lexer,"groups cannot be nested: "+this._safeRuleName(S));if(b.length!==L.length+1)throw Pt(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(S));let I=0;for(let A=1;A<b.length;A++)I+=b[A].length;if(I!==w.length)throw Pt(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(S));h={rule:S,matches:b,groups:[]};for(let A=0;A<L.length;A++)h.groups[A]={action:L[A],matched:b[A+1]};u-=w.length;continue}else{if(L==="@rematch"&&(u-=w.length,w="",b=null,L="",k!==null))return x(k);if(w.length===0){if(l===0||p!==d.depth||v!==d.state||(h?h.groups.length:0)!==_)continue;throw Pt(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(S))}let I=null;if(v4(L)&&L.indexOf("@brackets")===0){const A=L.substr(9),T=BW(this._lexer,w);if(!T)throw Pt(this._lexer,"@brackets token returned but no bracket defined as: "+w);I=u2(T.token+A)}else{const A=L===""?"":L+this._lexer.tokenPostfix;I=u2(A)}g<r&&o.emit(g+s,I)}if(k!==null)return x(k)}return Aa.create(d,c)}_getNestedEmbeddedLanguageData(e){if(!this._languageService.isRegisteredLanguageId(e))return new xd(e,n0);e!==this._languageId&&(this._languageService.requestBasicLanguageFeatures(e),hi.getOrCreate(e),this._embeddedLanguages[e]=!0);const t=hi.get(e);return t?new xd(e,t.getInitialState()):new xd(e,n0)}};Bf=zw=PW([OW(4,mi)],Bf);function BW(n,e){if(!e)return null;e=il(n,e);const t=n.brackets;for(const i of t){if(i.open===e)return{token:i.token,bracketType:1};if(i.close===e)return{token:i.token,bracketType:-1}}return null}var VW=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const rb=Qu("standaloneColorizer",{createHTML:n=>n});class VS{static colorizeElement(e,t,i,s){s=s||{};const o=s.theme||"vs",r=s.mimeType||i.getAttribute("lang")||i.getAttribute("data-lang");if(!r)return console.error("Mode not detected"),Promise.resolve();const a=t.getLanguageIdByMimeType(r)||r;e.setTheme(o);const l=i.firstChild?i.firstChild.nodeValue:"";i.className+=" "+o;const c=d=>{var u;const h=(u=rb==null?void 0:rb.createHTML(d))!==null&&u!==void 0?u:d;i.innerHTML=h};return this.colorize(t,l||"",a,s).then(c,d=>console.error(d))}static colorize(e,t,i,s){return VW(this,void 0,void 0,function*(){const o=e.languageIdCodec;let r=4;s&&typeof s.tabSize=="number"&&(r=s.tabSize),LS(t)&&(t=t.substr(1));const a=kg(t);if(!e.isRegisteredLanguageId(i))return h2(a,r,o);const l=yield hi.getOrCreate(i);return l?WW(a,r,l,o):h2(a,r,o)})}static colorizeLine(e,t,i,s,o=4){const r=hn.isBasicASCII(e,t),a=hn.containsRTL(e,r,i);return Rg(new yl(!1,!0,e,!1,r,a,0,s,[],o,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,i=4){const s=e.getLineContent(t);e.tokenization.forceTokenization(t);const r=e.tokenization.getLineTokens(t).inflate();return this.colorizeLine(s,e.mightContainNonBasicASCII(),e.mightContainRTL(),r,i)}}function WW(n,e,t,i){return new Promise((s,o)=>{const r=()=>{const a=HW(n,e,t,i);if(t instanceof Bf){const l=t.getLoadStatus();if(l.loaded===!1){l.promise.then(r,o);return}}s(a)};r()})}function h2(n,e,t){let i=[];const o=new Uint32Array(2);o[0]=0,o[1]=33587200;for(let r=0,a=n.length;r<a;r++){const l=n[r];o[0]=l.length;const c=new Hi(o,l,t),d=hn.isBasicASCII(l,!0),u=hn.containsRTL(l,d,!0),h=Rg(new yl(!1,!0,l,!1,d,u,0,c,[],e,0,0,0,0,-1,"none",!1,!1,null));i=i.concat(h.html),i.push("<br/>")}return i.join("")}function HW(n,e,t,i){let s=[],o=t.getInitialState();for(let r=0,a=n.length;r<a;r++){const l=n[r],c=t.tokenizeEncoded(l,!0,o);Hi.convertToEndOffset(c.tokens,l.length);const d=new Hi(c.tokens,l,i),u=hn.isBasicASCII(l,!0),h=hn.containsRTL(l,u,!0),f=Rg(new yl(!1,!0,l,!1,u,h,0,d.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));s=s.concat(f.html),s.push("<br/>"),o=c.endState}return s.join("")}const C4={clipboard:{writeText:Xh||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:Xh||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:(()=>Xh||W6()?0:navigator.keyboard||ia?1:2)(),touch:"ontouchstart"in window||navigator.maxTouchPoints>0,pointerEvents:window.PointerEvent&&("ontouchstart"in window||window.navigator.maxTouchPoints>0||navigator.maxTouchPoints>0)};function Uw(n,e){if(typeof n=="number"){if(n===0)return null;const t=(n&65535)>>>0,i=(n&4294901760)>>>16;return i!==0?new ab([vp(t,e),vp(i,e)]):new ab([vp(t,e)])}else{const t=[];for(let i=0;i<n.length;i++)t.push(vp(n[i],e));return new ab(t)}}function vp(n,e){const t=!!(n&2048),i=!!(n&256),s=e===2?i:t,o=!!(n&1024),r=!!(n&512),a=e===2?t:i,l=n&255;return new xc(s,o,r,a,l)}class xc{constructor(e,t,i,s,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=s,this.keyCode=o}equals(e){return e instanceof xc&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class ab{constructor(e){if(e.length===0)throw C_("chords");this.chords=e}}class $W{constructor(e,t,i,s,o,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=s,this.keyLabel=o,this.keyAriaLabel=r}}class zW{}function UW(n){if(n.charCode){const t=String.fromCharCode(n.charCode).toUpperCase();return Pr.fromString(t)}const e=n.keyCode;if(e===3)return 7;if(io)switch(e){case 59:return 85;case 60:if(Cn)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(gt)return 57;break}else if(ac){if(gt&&e===93)return 57;if(!gt&&e===92)return 57}return _T[e]||0}const qW=gt?256:2048,jW=512,KW=1024,GW=gt?2048:256;class Wt{constructor(e){this._standardKeyboardEventBrand=!0;const t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=t.getModifierState("AltGraph"),this.keyCode=UW(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=qW),this.altKey&&(t|=jW),this.shiftKey&&(t|=KW),this.metaKey&&(t|=GW),t|=e,t}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new xc(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}let f2=!1,mh=null;function ZW(n){if(!n.parent||n.parent===n)return null;try{const e=n.location,t=n.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return f2=!0,null}catch{return f2=!0,null}return n.parent}class YW{static getSameOriginWindowChain(){if(!mh){mh=[];let e=window,t;do t=ZW(e),t?mh.push({window:e,iframeElement:e.frameElement||null}):mh.push({window:e,iframeElement:null}),e=t;while(e)}return mh.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let i=0,s=0;const o=this.getSameOriginWindowChain();for(const r of o){if(i+=r.window.scrollY,s+=r.window.scrollX,r.window===t||!r.iframeElement)break;const a=r.iframeElement.getBoundingClientRect();i+=a.top,s+=a.left}return{top:i,left:s}}}class Lo{constructor(e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,e.type==="dblclick"&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX=="number"?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);const t=YW.getPositionOfChildWindowRelativeToAncestorWindow(window,e.view);this.posx-=t.left,this.posy-=t.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class Dc{constructor(e,t=0,i=0){if(this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=i,this.deltaX=t,e){const s=e,o=e;if(typeof s.wheelDeltaY<"u")this.deltaY=s.wheelDeltaY/120;else if(typeof o.VERTICAL_AXIS<"u"&&o.axis===o.VERTICAL_AXIS)this.deltaY=-o.detail/3;else if(e.type==="wheel"){const r=e;r.deltaMode===r.DOM_DELTA_LINE?io&&!gt?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof s.wheelDeltaX<"u")ia&&is?this.deltaX=-(s.wheelDeltaX/120):this.deltaX=s.wheelDeltaX/120;else if(typeof o.HORIZONTAL_AXIS<"u"&&o.axis===o.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const r=e;r.deltaMode===r.DOM_DELTA_LINE?io&&!gt?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(this.deltaY=e.wheelDelta/120)}}preventDefault(){var e;(e=this.browserEvent)===null||e===void 0||e.preventDefault()}stopPropagation(){var e;(e=this.browserEvent)===null||e===void 0||e.stopPropagation()}}/*! @license DOMPurify 3.0.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.5/LICENSE */const{entries:y4,setPrototypeOf:g2,isFrozen:XW,getPrototypeOf:QW,getOwnPropertyDescriptor:JW}=Object;let{freeze:ns,seal:Ao,create:eH}=Object,{apply:qw,construct:jw}=typeof Reflect<"u"&&Reflect;qw||(qw=function(e,t,i){return e.apply(t,i)});ns||(ns=function(e){return e});Ao||(Ao=function(e){return e});jw||(jw=function(e,t){return new e(...t)});const tH=no(Array.prototype.forEach),p2=no(Array.prototype.pop),_h=no(Array.prototype.push),_m=no(String.prototype.toLowerCase),lb=no(String.prototype.toString),iH=no(String.prototype.match),uo=no(String.prototype.replace),nH=no(String.prototype.indexOf),sH=no(String.prototype.trim),Ls=no(RegExp.prototype.test),bh=oH(TypeError);function no(n){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return qw(n,e,i)}}function oH(n){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return jw(n,t)}}function yt(n,e,t){var i;t=(i=t)!==null&&i!==void 0?i:_m,g2&&g2(n,null);let s=e.length;for(;s--;){let o=e[s];if(typeof o=="string"){const r=t(o);r!==o&&(XW(e)||(e[s]=r),o=r)}n[o]=!0}return n}function od(n){const e=eH(null);for(const[t,i]of y4(n))e[t]=i;return e}function wp(n,e){for(;n!==null;){const i=JW(n,e);if(i){if(i.get)return no(i.get);if(typeof i.value=="function")return no(i.value)}n=QW(n)}function t(i){return console.warn("fallback value for",i),null}return t}const m2=ns(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),cb=ns(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),db=ns(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),rH=ns(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ub=ns(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),aH=ns(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),_2=ns(["#text"]),b2=ns(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),hb=ns(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),v2=ns(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Cp=ns(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),lH=Ao(/\{\{[\w\W]*|[\w\W]*\}\}/gm),cH=Ao(/<%[\w\W]*|[\w\W]*%>/gm),dH=Ao(/\${[\w\W]*}/gm),uH=Ao(/^data-[\-\w.\u00B7-\uFFFF]/),hH=Ao(/^aria-[\-\w]+$/),S4=Ao(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),fH=Ao(/^(?:\w+script|data):/i),gH=Ao(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),L4=Ao(/^html$/i);var w2=Object.freeze({__proto__:null,MUSTACHE_EXPR:lH,ERB_EXPR:cH,TMPLIT_EXPR:dH,DATA_ATTR:uH,ARIA_ATTR:hH,IS_ALLOWED_URI:S4,IS_SCRIPT_OR_DATA:fH,ATTR_WHITESPACE:gH,DOCTYPE_NAME:L4});const pH=()=>typeof window>"u"?null:window,mH=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const s="data-tt-policy-suffix";t&&t.hasAttribute(s)&&(i=t.getAttribute(s));const o="dompurify"+(i?"#"+i:"");try{return e.createPolicy(o,{createHTML(r){return r},createScriptURL(r){return r}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function x4(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:pH();const e=Ue=>x4(Ue);if(e.version="3.0.5",e.removed=[],!n||!n.document||n.document.nodeType!==9)return e.isSupported=!1,e;const t=n.document,i=t.currentScript;let{document:s}=n;const{DocumentFragment:o,HTMLTemplateElement:r,Node:a,Element:l,NodeFilter:c,NamedNodeMap:d=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:u,DOMParser:h,trustedTypes:f}=n,g=l.prototype,p=wp(g,"cloneNode"),_=wp(g,"nextSibling"),v=wp(g,"childNodes"),b=wp(g,"parentNode");if(typeof r=="function"){const Ue=s.createElement("template");Ue.content&&Ue.content.ownerDocument&&(s=Ue.content.ownerDocument)}let w,C="";const{implementation:S,createNodeIterator:k,createDocumentFragment:L,getElementsByTagName:x}=s,{importNode:I}=t;let A={};e.isSupported=typeof y4=="function"&&typeof b=="function"&&S&&S.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:T,ERB_EXPR:O,TMPLIT_EXPR:R,DATA_ATTR:X,ARIA_ATTR:ie,IS_SCRIPT_OR_DATA:ae,ATTR_WHITESPACE:ue}=w2;let{IS_ALLOWED_URI:me}=w2,de=null;const Ae=yt({},[...m2,...cb,...db,...ub,..._2]);let ye=null;const be=yt({},[...b2,...hb,...v2,...Cp]);let le=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Bt=null,Ri=null,Mt=!0,fn=!0,ut=!1,_i=!0,qt=!1,Ve=!1,On=!1,U=!1,G=!1,re=!1,ce=!1,fe=!0,xe=!1;const Te="user-content-";let z=!0,H=!1,B={},E=null;const N=yt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let V=null;const P=yt({},["audio","video","img","source","image","track"]);let Z=null;const ne=yt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ge="http://www.w3.org/1998/Math/MathML",Ce="http://www.w3.org/2000/svg",Me="http://www.w3.org/1999/xhtml";let Oe=Me,Dt=!1,ht=null;const Re=yt({},[ge,Ce,Me],lb);let pt;const Lt=["application/xhtml+xml","text/html"],Fn="text/html";let mt,bi=null;const Dl=s.createElement("form"),kl=function(Q){return Q instanceof RegExp||Q instanceof Function},ao=function(Q){if(!(bi&&bi===Q)){if((!Q||typeof Q!="object")&&(Q={}),Q=od(Q),pt=Lt.indexOf(Q.PARSER_MEDIA_TYPE)===-1?pt=Fn:pt=Q.PARSER_MEDIA_TYPE,mt=pt==="application/xhtml+xml"?lb:_m,de="ALLOWED_TAGS"in Q?yt({},Q.ALLOWED_TAGS,mt):Ae,ye="ALLOWED_ATTR"in Q?yt({},Q.ALLOWED_ATTR,mt):be,ht="ALLOWED_NAMESPACES"in Q?yt({},Q.ALLOWED_NAMESPACES,lb):Re,Z="ADD_URI_SAFE_ATTR"in Q?yt(od(ne),Q.ADD_URI_SAFE_ATTR,mt):ne,V="ADD_DATA_URI_TAGS"in Q?yt(od(P),Q.ADD_DATA_URI_TAGS,mt):P,E="FORBID_CONTENTS"in Q?yt({},Q.FORBID_CONTENTS,mt):N,Bt="FORBID_TAGS"in Q?yt({},Q.FORBID_TAGS,mt):{},Ri="FORBID_ATTR"in Q?yt({},Q.FORBID_ATTR,mt):{},B="USE_PROFILES"in Q?Q.USE_PROFILES:!1,Mt=Q.ALLOW_ARIA_ATTR!==!1,fn=Q.ALLOW_DATA_ATTR!==!1,ut=Q.ALLOW_UNKNOWN_PROTOCOLS||!1,_i=Q.ALLOW_SELF_CLOSE_IN_ATTR!==!1,qt=Q.SAFE_FOR_TEMPLATES||!1,Ve=Q.WHOLE_DOCUMENT||!1,G=Q.RETURN_DOM||!1,re=Q.RETURN_DOM_FRAGMENT||!1,ce=Q.RETURN_TRUSTED_TYPE||!1,U=Q.FORCE_BODY||!1,fe=Q.SANITIZE_DOM!==!1,xe=Q.SANITIZE_NAMED_PROPS||!1,z=Q.KEEP_CONTENT!==!1,H=Q.IN_PLACE||!1,me=Q.ALLOWED_URI_REGEXP||S4,Oe=Q.NAMESPACE||Me,le=Q.CUSTOM_ELEMENT_HANDLING||{},Q.CUSTOM_ELEMENT_HANDLING&&kl(Q.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(le.tagNameCheck=Q.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Q.CUSTOM_ELEMENT_HANDLING&&kl(Q.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(le.attributeNameCheck=Q.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Q.CUSTOM_ELEMENT_HANDLING&&typeof Q.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(le.allowCustomizedBuiltInElements=Q.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),qt&&(fn=!1),re&&(G=!0),B&&(de=yt({},[..._2]),ye=[],B.html===!0&&(yt(de,m2),yt(ye,b2)),B.svg===!0&&(yt(de,cb),yt(ye,hb),yt(ye,Cp)),B.svgFilters===!0&&(yt(de,db),yt(ye,hb),yt(ye,Cp)),B.mathMl===!0&&(yt(de,ub),yt(ye,v2),yt(ye,Cp))),Q.ADD_TAGS&&(de===Ae&&(de=od(de)),yt(de,Q.ADD_TAGS,mt)),Q.ADD_ATTR&&(ye===be&&(ye=od(ye)),yt(ye,Q.ADD_ATTR,mt)),Q.ADD_URI_SAFE_ATTR&&yt(Z,Q.ADD_URI_SAFE_ATTR,mt),Q.FORBID_CONTENTS&&(E===N&&(E=od(E)),yt(E,Q.FORBID_CONTENTS,mt)),z&&(de["#text"]=!0),Ve&&yt(de,["html","head","body"]),de.table&&(yt(de,["tbody"]),delete Bt.tbody),Q.TRUSTED_TYPES_POLICY){if(typeof Q.TRUSTED_TYPES_POLICY.createHTML!="function")throw bh('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Q.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw bh('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=Q.TRUSTED_TYPES_POLICY,C=w.createHTML("")}else w===void 0&&(w=mH(f,i)),w!==null&&typeof C=="string"&&(C=w.createHTML(""));ns&&ns(Q),bi=Q}},aa=yt({},["mi","mo","mn","ms","mtext"]),El=yt({},["foreignobject","desc","title","annotation-xml"]),Il=yt({},["title","style","font","a","script"]),Jc=yt({},cb);yt(Jc,db),yt(Jc,rH);const Nl=yt({},ub);yt(Nl,aH);const k1=function(Q){let Le=b(Q);(!Le||!Le.tagName)&&(Le={namespaceURI:Oe,tagName:"template"});const Pe=_m(Q.tagName),Xt=_m(Le.tagName);return ht[Q.namespaceURI]?Q.namespaceURI===Ce?Le.namespaceURI===Me?Pe==="svg":Le.namespaceURI===ge?Pe==="svg"&&(Xt==="annotation-xml"||aa[Xt]):!!Jc[Pe]:Q.namespaceURI===ge?Le.namespaceURI===Me?Pe==="math":Le.namespaceURI===Ce?Pe==="math"&&El[Xt]:!!Nl[Pe]:Q.namespaceURI===Me?Le.namespaceURI===Ce&&!El[Xt]||Le.namespaceURI===ge&&!aa[Xt]?!1:!Nl[Pe]&&(Il[Pe]||!Jc[Pe]):!!(pt==="application/xhtml+xml"&&ht[Q.namespaceURI]):!1},Oo=function(Q){_h(e.removed,{element:Q});try{Q.parentNode.removeChild(Q)}catch{Q.remove()}},rh=function(Q,Le){try{_h(e.removed,{attribute:Le.getAttributeNode(Q),from:Le})}catch{_h(e.removed,{attribute:null,from:Le})}if(Le.removeAttribute(Q),Q==="is"&&!ye[Q])if(G||re)try{Oo(Le)}catch{}else try{Le.setAttribute(Q,"")}catch{}},ah=function(Q){let Le,Pe;if(U)Q="<remove></remove>"+Q;else{const Ks=iH(Q,/^[\r\n\t ]+/);Pe=Ks&&Ks[0]}pt==="application/xhtml+xml"&&Oe===Me&&(Q='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Q+"</body></html>");const Xt=w?w.createHTML(Q):Q;if(Oe===Me)try{Le=new h().parseFromString(Xt,pt)}catch{}if(!Le||!Le.documentElement){Le=S.createDocument(Oe,"template",null);try{Le.documentElement.innerHTML=Dt?C:Xt}catch{}}const sn=Le.body||Le.documentElement;return Q&&Pe&&sn.insertBefore(s.createTextNode(Pe),sn.childNodes[0]||null),Oe===Me?x.call(Le,Ve?"html":"body")[0]:Ve?Le.documentElement:sn},ip=function(Q){return k.call(Q.ownerDocument||Q,Q,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},tM=function(Q){return Q instanceof u&&(typeof Q.nodeName!="string"||typeof Q.textContent!="string"||typeof Q.removeChild!="function"||!(Q.attributes instanceof d)||typeof Q.removeAttribute!="function"||typeof Q.setAttribute!="function"||typeof Q.namespaceURI!="string"||typeof Q.insertBefore!="function"||typeof Q.hasChildNodes!="function")},np=function(Q){return typeof a=="object"?Q instanceof a:Q&&typeof Q=="object"&&typeof Q.nodeType=="number"&&typeof Q.nodeName=="string"},wr=function(Q,Le,Pe){A[Q]&&tH(A[Q],Xt=>{Xt.call(e,Le,Pe,bi)})},fx=function(Q){let Le;if(wr("beforeSanitizeElements",Q,null),tM(Q))return Oo(Q),!0;const Pe=mt(Q.nodeName);if(wr("uponSanitizeElement",Q,{tagName:Pe,allowedTags:de}),Q.hasChildNodes()&&!np(Q.firstElementChild)&&(!np(Q.content)||!np(Q.content.firstElementChild))&&Ls(/<[/\w]/g,Q.innerHTML)&&Ls(/<[/\w]/g,Q.textContent))return Oo(Q),!0;if(!de[Pe]||Bt[Pe]){if(!Bt[Pe]&&px(Pe)&&(le.tagNameCheck instanceof RegExp&&Ls(le.tagNameCheck,Pe)||le.tagNameCheck instanceof Function&&le.tagNameCheck(Pe)))return!1;if(z&&!E[Pe]){const Xt=b(Q)||Q.parentNode,sn=v(Q)||Q.childNodes;if(sn&&Xt){const Ks=sn.length;for(let yi=Ks-1;yi>=0;--yi)Xt.insertBefore(p(sn[yi],!0),_(Q))}}return Oo(Q),!0}return Q instanceof l&&!k1(Q)||(Pe==="noscript"||Pe==="noembed"||Pe==="noframes")&&Ls(/<\/no(script|embed|frames)/i,Q.innerHTML)?(Oo(Q),!0):(qt&&Q.nodeType===3&&(Le=Q.textContent,Le=uo(Le,T," "),Le=uo(Le,O," "),Le=uo(Le,R," "),Q.textContent!==Le&&(_h(e.removed,{element:Q.cloneNode()}),Q.textContent=Le)),wr("afterSanitizeElements",Q,null),!1)},gx=function(Q,Le,Pe){if(fe&&(Le==="id"||Le==="name")&&(Pe in s||Pe in Dl))return!1;if(!(fn&&!Ri[Le]&&Ls(X,Le))){if(!(Mt&&Ls(ie,Le))){if(!ye[Le]||Ri[Le]){if(!(px(Q)&&(le.tagNameCheck instanceof RegExp&&Ls(le.tagNameCheck,Q)||le.tagNameCheck instanceof Function&&le.tagNameCheck(Q))&&(le.attributeNameCheck instanceof RegExp&&Ls(le.attributeNameCheck,Le)||le.attributeNameCheck instanceof Function&&le.attributeNameCheck(Le))||Le==="is"&&le.allowCustomizedBuiltInElements&&(le.tagNameCheck instanceof RegExp&&Ls(le.tagNameCheck,Pe)||le.tagNameCheck instanceof Function&&le.tagNameCheck(Pe))))return!1}else if(!Z[Le]){if(!Ls(me,uo(Pe,ue,""))){if(!((Le==="src"||Le==="xlink:href"||Le==="href")&&Q!=="script"&&nH(Pe,"data:")===0&&V[Q])){if(!(ut&&!Ls(ae,uo(Pe,ue,"")))){if(Pe)return!1}}}}}}return!0},px=function(Q){return Q.indexOf("-")>0},mx=function(Q){let Le,Pe,Xt,sn;wr("beforeSanitizeAttributes",Q,null);const{attributes:Ks}=Q;if(!Ks)return;const yi={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ye};for(sn=Ks.length;sn--;){Le=Ks[sn];const{name:Fo,namespaceURI:E1}=Le;if(Pe=Fo==="value"?Le.value:sH(Le.value),Xt=mt(Fo),yi.attrName=Xt,yi.attrValue=Pe,yi.keepAttr=!0,yi.forceKeepAttr=void 0,wr("uponSanitizeAttribute",Q,yi),Pe=yi.attrValue,yi.forceKeepAttr||(rh(Fo,Q),!yi.keepAttr))continue;if(!_i&&Ls(/\/>/i,Pe)){rh(Fo,Q);continue}qt&&(Pe=uo(Pe,T," "),Pe=uo(Pe,O," "),Pe=uo(Pe,R," "));const _x=mt(Q.nodeName);if(gx(_x,Xt,Pe)){if(xe&&(Xt==="id"||Xt==="name")&&(rh(Fo,Q),Pe=Te+Pe),w&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!E1)switch(f.getAttributeType(_x,Xt)){case"TrustedHTML":{Pe=w.createHTML(Pe);break}case"TrustedScriptURL":{Pe=w.createScriptURL(Pe);break}}try{E1?Q.setAttributeNS(E1,Fo,Pe):Q.setAttribute(Fo,Pe),p2(e.removed)}catch{}}}wr("afterSanitizeAttributes",Q,null)},iM=function Ue(Q){let Le;const Pe=ip(Q);for(wr("beforeSanitizeShadowDOM",Q,null);Le=Pe.nextNode();)wr("uponSanitizeShadowNode",Le,null),!fx(Le)&&(Le.content instanceof o&&Ue(Le.content),mx(Le));wr("afterSanitizeShadowDOM",Q,null)};return e.sanitize=function(Ue){let Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Le,Pe,Xt,sn;if(Dt=!Ue,Dt&&(Ue="<!-->"),typeof Ue!="string"&&!np(Ue))if(typeof Ue.toString=="function"){if(Ue=Ue.toString(),typeof Ue!="string")throw bh("dirty is not a string, aborting")}else throw bh("toString is not a function");if(!e.isSupported)return Ue;if(On||ao(Q),e.removed=[],typeof Ue=="string"&&(H=!1),H){if(Ue.nodeName){const Fo=mt(Ue.nodeName);if(!de[Fo]||Bt[Fo])throw bh("root node is forbidden and cannot be sanitized in-place")}}else if(Ue instanceof a)Le=ah("<!---->"),Pe=Le.ownerDocument.importNode(Ue,!0),Pe.nodeType===1&&Pe.nodeName==="BODY"||Pe.nodeName==="HTML"?Le=Pe:Le.appendChild(Pe);else{if(!G&&!qt&&!Ve&&Ue.indexOf("<")===-1)return w&&ce?w.createHTML(Ue):Ue;if(Le=ah(Ue),!Le)return G?null:ce?C:""}Le&&U&&Oo(Le.firstChild);const Ks=ip(H?Ue:Le);for(;Xt=Ks.nextNode();)fx(Xt)||(Xt.content instanceof o&&iM(Xt.content),mx(Xt));if(H)return Ue;if(G){if(re)for(sn=L.call(Le.ownerDocument);Le.firstChild;)sn.appendChild(Le.firstChild);else sn=Le;return(ye.shadowroot||ye.shadowrootmode)&&(sn=I.call(t,sn,!0)),sn}let yi=Ve?Le.outerHTML:Le.innerHTML;return Ve&&de["!doctype"]&&Le.ownerDocument&&Le.ownerDocument.doctype&&Le.ownerDocument.doctype.name&&Ls(L4,Le.ownerDocument.doctype.name)&&(yi="<!DOCTYPE "+Le.ownerDocument.doctype.name+`>
`+yi),qt&&(yi=uo(yi,T," "),yi=uo(yi,O," "),yi=uo(yi,R," ")),w&&ce?w.createHTML(yi):yi},e.setConfig=function(Ue){ao(Ue),On=!0},e.clearConfig=function(){bi=null,On=!1},e.isValidAttribute=function(Ue,Q,Le){bi||ao({});const Pe=mt(Ue),Xt=mt(Q);return gx(Pe,Xt,Le)},e.addHook=function(Ue,Q){typeof Q=="function"&&(A[Ue]=A[Ue]||[],_h(A[Ue],Q))},e.removeHook=function(Ue){if(A[Ue])return p2(A[Ue])},e.removeHooks=function(Ue){A[Ue]&&(A[Ue]=[])},e.removeAllHooks=function(){A={}},e}var _r=x4();_r.version;_r.isSupported;const D4=_r.sanitize;_r.setConfig;_r.clearConfig;_r.isValidAttribute;const k4=_r.addHook,E4=_r.removeHook;_r.removeHooks;_r.removeAllHooks;var Je;(function(n){n.inMemory="inmemory",n.vscode="vscode",n.internal="private",n.walkThrough="walkThrough",n.walkThroughSnippet="walkThroughSnippet",n.http="http",n.https="https",n.file="file",n.mailto="mailto",n.untitled="untitled",n.data="data",n.command="command",n.vscodeRemote="vscode-remote",n.vscodeRemoteResource="vscode-remote-resource",n.vscodeManagedRemoteResource="vscode-managed-remote-resource",n.vscodeUserData="vscode-userdata",n.vscodeCustomEditor="vscode-custom-editor",n.vscodeNotebookCell="vscode-notebook-cell",n.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",n.vscodeNotebookCellOutput="vscode-notebook-cell-output",n.vscodeInteractiveInput="vscode-interactive-input",n.vscodeSettings="vscode-settings",n.vscodeWorkspaceTrust="vscode-workspace-trust",n.vscodeTerminal="vscode-terminal",n.vscodeChatSesssion="vscode-chat-editor",n.webviewPanel="webview-panel",n.vscodeWebview="vscode-webview",n.extension="extension",n.vscodeFileResource="vscode-file",n.tmp="tmp",n.vsls="vsls",n.vscodeSourceControl="vscode-scm"})(Je||(Je={}));const _H="tkn";class bH{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._remoteResourcesPath=`/${Je.vscodeRemoteResource}`}setPreferredWebSchema(e){this._preferredWebSchema=e}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return $t(a),e}const t=e.authority;let i=this._hosts[t];i&&i.indexOf(":")!==-1&&i.indexOf("[")===-1&&(i=`[${i}]`);const s=this._ports[t],o=this._connectionTokens[t];let r=`path=${encodeURIComponent(e.path)}`;return typeof o=="string"&&(r+=`&${_H}=${encodeURIComponent(o)}`),nt.from({scheme:Gu?this._preferredWebSchema:Je.vscodeRemoteResource,authority:`${i}:${s}`,path:this._remoteResourcesPath,query:r})}}const I4=new bH;class Vf{uriToBrowserUri(e){return e.scheme===Je.vscodeRemote?I4.rewrite(e):e.scheme===Je.file&&(Xh||W7&&to.origin===`${Je.vscodeFileResource}://${Vf.FALLBACK_AUTHORITY}`)?e.with({scheme:Je.vscodeFileResource,authority:e.authority||Vf.FALLBACK_AUTHORITY,query:null,fragment:null}):e}}Vf.FALLBACK_AUTHORITY="vscode-app";const N4=new Vf;var C2;(function(n){const e=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);n.CoopAndCoep=Object.freeze(e.get("3"));const t="vscode-coi";function i(o){let r;typeof o=="string"?r=new URL(o).searchParams:o instanceof URL?r=o.searchParams:nt.isUri(o)&&(r=new URL(o.toString(!0)).searchParams);const a=r==null?void 0:r.get(t);if(a)return e.get(a)}n.getHeadersFromQuery=i;function s(o,r,a){if(!globalThis.crossOriginIsolated)return;const l=r&&a?"3":a?"2":"1";o instanceof URLSearchParams?o.set(t,l):o[t]=l}n.addSearchParam=s})(C2||(C2={}));function Vs(n){for(;n.firstChild;)n.firstChild.remove()}function T4(n){var e;return(e=n==null?void 0:n.isConnected)!==null&&e!==void 0?e:!1}class vH{constructor(e,t,i,s){this._node=e,this._type=t,this._handler=i,this._options=s||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function ee(n,e,t,i){return new vH(n,e,t,i)}function wH(n){return function(e){return n(new Lo(e))}}function CH(n){return function(e){return n(new Wt(e))}}const Ci=function(e,t,i,s){let o=i;return t==="click"||t==="mousedown"?o=wH(i):(t==="keydown"||t==="keypress"||t==="keyup")&&(o=CH(i)),ee(e,t,o,s)};let A4,Ws;class fb{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){$t(e)}}static sort(e,t){return t.priority-e.priority}}(function(){let n=[],e=null,t=!1,i=!1;const s=()=>{for(t=!1,e=n,n=[],i=!0;e.length>0;)e.sort(fb.sort),e.shift().execute();i=!1};Ws=(o,r=0)=>{const a=new fb(o,r);return n.push(a),t||(t=!0,requestAnimationFrame(s)),a},A4=(o,r)=>{if(i){const a=new fb(o,r);return e.push(a),a}else return Ws(o,r)}})();function WS(n){return document.defaultView.getComputedStyle(n,null)}function M4(n){if(n!==document.body)return new Ds(n.clientWidth,n.clientHeight);if(ll&&window.visualViewport)return new Ds(window.visualViewport.width,window.visualViewport.height);if(window.innerWidth&&window.innerHeight)return new Ds(window.innerWidth,window.innerHeight);if(document.body&&document.body.clientWidth&&document.body.clientHeight)return new Ds(document.body.clientWidth,document.body.clientHeight);if(document.documentElement&&document.documentElement.clientWidth&&document.documentElement.clientHeight)return new Ds(document.documentElement.clientWidth,document.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}class ti{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,i){const s=WS(e),o=s?s.getPropertyValue(t):"0";return ti.convertToPixels(e,o)}static getBorderLeftWidth(e){return ti.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return ti.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return ti.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return ti.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return ti.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return ti.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return ti.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return ti.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return ti.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return ti.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return ti.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return ti.getDimension(e,"margin-bottom","marginBottom")}}class Ds{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new Ds(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof Ds?e:new Ds(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}}Ds.None=new Ds(0,0);function yH(n){let e=n.offsetParent,t=n.offsetTop,i=n.offsetLeft;for(;(n=n.parentNode)!==null&&n!==document.body&&n!==document.documentElement;){t-=n.scrollTop;const s=P4(n)?null:WS(n);s&&(i-=s.direction!=="rtl"?n.scrollLeft:-n.scrollLeft),n===e&&(i+=ti.getBorderLeftWidth(n),t+=ti.getBorderTopWidth(n),t+=n.offsetTop,i+=n.offsetLeft,e=n.offsetParent)}return{left:i,top:t}}function ms(n){const e=n.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY,width:e.width,height:e.height}}function SH(n){let e=n,t=1;do{const i=WS(e).zoom;i!=null&&i!=="1"&&(t*=i),e=e.parentElement}while(e!==null&&e!==document.documentElement);return t}function HS(n){const e=ti.getMarginLeft(n)+ti.getMarginRight(n);return n.offsetWidth+e}function gb(n){const e=ti.getBorderLeftWidth(n)+ti.getBorderRightWidth(n),t=ti.getPaddingLeft(n)+ti.getPaddingRight(n);return n.offsetWidth-e-t}function LH(n){const e=ti.getBorderTopWidth(n)+ti.getBorderBottomWidth(n),t=ti.getPaddingTop(n)+ti.getPaddingBottom(n);return n.offsetHeight-e-t}function Kw(n){const e=ti.getMarginTop(n)+ti.getMarginBottom(n);return n.offsetHeight+e}function un(n,e){for(;n;){if(n===e)return!0;n=n.parentNode}return!1}function R4(n,e,t){for(;n&&n.nodeType===n.ELEMENT_NODE;){if(n.classList.contains(e))return n;if(t){if(typeof t=="string"){if(n.classList.contains(t))return null}else if(n===t)return null}n=n.parentNode}return null}function pb(n,e,t){return!!R4(n,e,t)}function P4(n){return n&&!!n.host&&!!n.mode}function Gw(n){return!!Du(n)}function Du(n){for(;n.parentNode;){if(n===document.body)return null;n=n.parentNode}return P4(n)?n:null}function nl(){let n=document.activeElement;for(;n!=null&&n.shadowRoot;)n=n.shadowRoot.activeElement;return n}function so(n=document.getElementsByTagName("head")[0],e){const t=document.createElement("style");return t.type="text/css",t.media="screen",e==null||e(t),n.appendChild(t),t}let mb=null;function xH(){return mb||(mb=so()),mb}function y2(n,e,t=xH()){!t||!e||t.sheet.insertRule(n+"{"+e+"}",0)}function O4(n){return typeof HTMLElement=="object"?n instanceof HTMLElement:n&&typeof n=="object"&&n.nodeType===1&&typeof n.nodeName=="string"}const _e={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:ac?"webkitAnimationStart":"animationstart",ANIMATION_END:ac?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:ac?"webkitAnimationIteration":"animationiteration"};function DH(n){const e=n;return!!(e&&typeof e.preventDefault=="function"&&typeof e.stopPropagation=="function")}const qe={stop:(n,e)=>(n.preventDefault(),e&&n.stopPropagation(),n)};function kH(n){const e=[];for(let t=0;n&&n.nodeType===n.ELEMENT_NODE;t++)e[t]=n.scrollTop,n=n.parentNode;return e}function EH(n,e){for(let t=0;n&&n.nodeType===n.ELEMENT_NODE;t++)n.scrollTop!==e[t]&&(n.scrollTop=e[t]),n=n.parentNode}class c0 extends oe{static hasFocusWithin(e){const t=Du(e),i=t?t.activeElement:document.activeElement;return un(i,e)}constructor(e){super(),this._onDidFocus=this._register(new q),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new q),this.onDidBlur=this._onDidBlur.event;let t=c0.hasFocusWithin(e),i=!1;const s=()=>{i=!1,t||(t=!0,this._onDidFocus.fire())},o=()=>{t&&(i=!0,window.setTimeout(()=>{i&&(i=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{c0.hasFocusWithin(e)!==t&&(t?o():s())},this._register(ee(e,_e.FOCUS,s,!0)),this._register(ee(e,_e.BLUR,o,!0)),this._register(ee(e,_e.FOCUS_IN,()=>this._refreshStateHandler())),this._register(ee(e,_e.FOCUS_OUT,()=>this._refreshStateHandler()))}}function H_(n){return new c0(n)}function De(n,...e){if(n.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function F4(n,e){return n.insertBefore(e,n.firstChild),e}function Mn(n,...e){n.innerText="",De(n,...e)}const IH=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var Wf;(function(n){n.HTML="http://www.w3.org/1999/xhtml",n.SVG="http://www.w3.org/2000/svg"})(Wf||(Wf={}));function B4(n,e,t,...i){const s=IH.exec(e);if(!s)throw new Error("Bad use of emmet");const o=s[1]||"div";let r;return n!==Wf.HTML?r=document.createElementNS(n,o):r=document.createElement(o),s[3]&&(r.id=s[3]),s[4]&&(r.className=s[4].replace(/\./g," ").trim()),t&&Object.entries(t).forEach(([a,l])=>{typeof l>"u"||(/^on\w+$/.test(a)?r[a]=l:a==="selected"?l&&r.setAttribute(a,"true"):r.setAttribute(a,l))}),r.append(...i),r}function Be(n,e,...t){return B4(Wf.HTML,n,e,...t)}Be.SVG=function(n,e,...t){return B4(Wf.SVG,n,e,...t)};function V4(...n){for(const e of n)e.style.display="",e.removeAttribute("aria-hidden")}function S2(...n){for(const e of n)e.style.display="none",e.setAttribute("aria-hidden","true")}function L2(n){const e=window.devicePixelRatio*n;return Math.max(1,Math.floor(e))/window.devicePixelRatio}function W4(n){window.open(n,"_blank","noopener")}function NH(n){const e=()=>{n(),t=Ws(e)};let t=Ws(e);return st(()=>t.dispose())}I4.setPreferredWebSchema(/^https:/.test(window.location.href)?"https":"http");function fl(n){return n?`url('${N4.uriToBrowserUri(n).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function x2(n){return`'${n.replace(/'/g,"%27")}'`}function dc(n,e){if(n!==void 0){const t=n.match(/^\s*var\((.+)\)$/);if(t){const i=t[1].split(",",2);return i.length===2&&(e=dc(i[1].trim(),e)),`var(${i[0]}, ${e})`}return n}return e}function TH(n,e=!1){const t=document.createElement("a");return k4("afterSanitizeAttributes",i=>{for(const s of["href","src"])if(i.hasAttribute(s)){const o=i.getAttribute(s);if(s==="href"&&o.startsWith("#"))continue;if(t.href=o,!n.includes(t.protocol.replace(/:$/,""))){if(e&&s==="src"&&t.href.startsWith("data:"))continue;i.removeAttribute(s)}}}),st(()=>{E4("afterSanitizeAttributes")})}const AH=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]);class Va extends q{constructor(){super(),this._subscriptions=new Fe,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(ee(window,"keydown",e=>{if(e.defaultPrevented)return;const t=new Wt(e);if(!(t.keyCode===6&&e.repeat)){if(e.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(e.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(e.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(e.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(t.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=e,this.fire(this._keyStatus))}},!0)),this._subscriptions.add(ee(window,"keyup",e=>{e.defaultPrevented||(!e.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!e.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!e.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!e.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=e,this.fire(this._keyStatus)))},!0)),this._subscriptions.add(ee(document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(ee(document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(ee(document.body,"mousemove",e=>{e.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),this._subscriptions.add(ee(window,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return Va.instance||(Va.instance=new Va),Va.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}class MH extends oe{constructor(e,t){super(),this.element=e,this.callbacks=t,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){this._register(ee(this.element,_e.DRAG_ENTER,e=>{this.counter++,this.dragStartTime=e.timeStamp,this.callbacks.onDragEnter(e)})),this._register(ee(this.element,_e.DRAG_OVER,e=>{var t,i;e.preventDefault(),(i=(t=this.callbacks).onDragOver)===null||i===void 0||i.call(t,e,e.timeStamp-this.dragStartTime)})),this._register(ee(this.element,_e.DRAG_LEAVE,e=>{this.counter--,this.counter===0&&(this.dragStartTime=0,this.callbacks.onDragLeave(e))})),this._register(ee(this.element,_e.DRAG_END,e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDragEnd(e)})),this._register(ee(this.element,_e.DROP,e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDrop(e)}))}}const RH=/(?<tag>[\w\-]+)?(?:#(?<id>[\w\-]+))?(?<class>(?:\.(?:[\w\-]+))*)(?:@(?<name>(?:[\w\_])+))?/;function dn(n,...e){let t,i;Array.isArray(e[0])?(t={},i=e[0]):(t=e[0]||{},i=e[1]);const s=RH.exec(n);if(!s||!s.groups)throw new Error("Bad use of h");const o=s.groups.tag||"div",r=document.createElement(o);s.groups.id&&(r.id=s.groups.id);const a=[];if(s.groups.class)for(const c of s.groups.class.split("."))c!==""&&a.push(c);if(t.className!==void 0)for(const c of t.className.split("."))c!==""&&a.push(c);a.length>0&&(r.className=a.join(" "));const l={};if(s.groups.name&&(l[s.groups.name]=r),i)for(const c of i)c instanceof HTMLElement?r.appendChild(c):typeof c=="string"?r.append(c):"root"in c&&(Object.assign(l,c),r.appendChild(c.root));for(const[c,d]of Object.entries(t))if(c!=="className")if(c==="style")for(const[u,h]of Object.entries(d))r.style.setProperty(D2(u),typeof h=="number"?h+"px":""+h);else c==="tabIndex"?r.tabIndex=d:r.setAttribute(D2(c),d.toString());return l.root=r,l}function D2(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}const k2=2e4;let ql,bm,Zw,vm,Yw;function PH(n){ql=document.createElement("div"),ql.className="monaco-aria-container";const e=()=>{const i=document.createElement("div");return i.className="monaco-alert",i.setAttribute("role","alert"),i.setAttribute("aria-atomic","true"),ql.appendChild(i),i};bm=e(),Zw=e();const t=()=>{const i=document.createElement("div");return i.className="monaco-status",i.setAttribute("aria-live","polite"),i.setAttribute("aria-atomic","true"),ql.appendChild(i),i};vm=t(),Yw=t(),n.appendChild(ql)}function H4(n){ql&&(bm.textContent!==n?(Vs(Zw),d0(bm,n)):(Vs(bm),d0(Zw,n)))}function Xw(n){ql&&(vm.textContent!==n?(Vs(Yw),d0(vm,n)):(Vs(vm),d0(Yw,n)))}function d0(n,e){Vs(n),e.length>k2&&(e=e.substr(0,k2)),n.textContent=e,n.style.visibility="hidden",n.style.visibility="visible"}const $4=ct("markerDecorationsService"),$_=ct("textModelService");var ku=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class ws extends oe{constructor(e,t="",i="",s=!0,o){super(),this._onDidChange=this._register(new q),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=i,this._enabled=s,this._actionCallback=o}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}run(e,t){return ku(this,void 0,void 0,function*(){this._actionCallback&&(yield this._actionCallback(e))})}}class Eu extends oe{constructor(){super(...arguments),this._onWillRun=this._register(new q),this.onWillRun=this._onWillRun.event,this._onDidRun=this._register(new q),this.onDidRun=this._onDidRun.event}run(e,t){return ku(this,void 0,void 0,function*(){if(!e.enabled)return;this._onWillRun.fire({action:e});let i;try{yield this.runAction(e,t)}catch(s){i=s}this._onDidRun.fire({action:e,error:i})})}runAction(e,t){return ku(this,void 0,void 0,function*(){yield e.run(t)})}}class ts{constructor(){this.id=ts.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...e){let t=[];for(const i of e)i.length&&(t.length?t=[...t,new ts,...i]:t=i);return t}run(){return ku(this,void 0,void 0,function*(){})}}ts.ID="vs.actions.separator";class $S{get actions(){return this._actions}constructor(e,t,i,s){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=s,this._actions=i}run(){return ku(this,void 0,void 0,function*(){})}}class z_ extends ws{constructor(){super(z_.ID,m("submenu.empty","(empty)"),void 0,!1)}}z_.ID="vs.actions.empty";function E2(n){var e,t;return{id:n.id,label:n.label,class:void 0,enabled:(e=n.enabled)!==null&&e!==void 0?e:!0,checked:(t=n.checked)!==null&&t!==void 0?t:!1,run:()=>ku(this,void 0,void 0,function*(){return n.run()}),tooltip:n.label}}var Qw;(function(n){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}n.isThemeColor=e})(Qw||(Qw={}));var je;(function(n){n.iconNameSegment="[A-Za-z0-9]+",n.iconNameExpression="[A-Za-z0-9-]+",n.iconModifierExpression="~[A-Za-z]+",n.iconNameCharacter="[A-Za-z0-9~-]";const e=new RegExp(`^(${n.iconNameExpression})(${n.iconModifierExpression})?$`);function t(h){const f=e.exec(h.id);if(!f)return t(we.error);const[,g,p]=f,_=["codicon","codicon-"+g];return p&&_.push("codicon-modifier-"+p.substring(1)),_}n.asClassNameArray=t;function i(h){return t(h).join(" ")}n.asClassName=i;function s(h){return"."+t(h).join(".")}n.asCSSSelector=s;function o(h){return h&&typeof h=="object"&&typeof h.id=="string"&&(typeof h.color>"u"||Qw.isThemeColor(h.color))}n.isThemeIcon=o;const r=new RegExp(`^\\$\\((${n.iconNameExpression}(?:${n.iconModifierExpression})?)\\)$`);function a(h){const f=r.exec(h);if(!f)return;const[,g]=f;return{id:g}}n.fromString=a;function l(h){return{id:h}}n.fromId=l;function c(h,f){let g=h.id;const p=g.lastIndexOf("~");return p!==-1&&(g=g.substring(0,p)),f&&(g=`${g}~${f}`),{id:g}}n.modify=c;function d(h){const f=h.id.lastIndexOf("~");if(f!==-1)return h.id.substring(f+1)}n.getModifier=d;function u(h,f){var g,p;return h.id===f.id&&((g=h.color)===null||g===void 0?void 0:g.id)===((p=f.color)===null||p===void 0?void 0:p.id)}n.isEqual=u})(je||(je={}));const oo=ct("commandService"),nn=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new q,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(n,e){if(!n)throw new Error("invalid command");if(typeof n=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:n,handler:e})}if(n.description){const r=[];for(const l of n.description.args)r.push(l.constraint);const a=n.handler;n.handler=function(l,...c){return N7(c,r),a(l,...c)}}const{id:t}=n;let i=this._commands.get(t);i||(i=new Zn,this._commands.set(t,i));const s=i.unshift(n),o=st(()=>{s();const r=this._commands.get(t);r!=null&&r.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),o}registerCommandAlias(n,e){return nn.registerCommand(n,(t,...i)=>t.get(oo).executeCommand(e,...i))}getCommand(n){const e=this._commands.get(n);if(!(!e||e.isEmpty()))return lt.first(e)}getCommands(){const n=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&n.set(e,t)}return n}};nn.registerCommand("noop",()=>{});class zS{constructor(){this._coreKeybindings=new Zn,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(Xs===1){if(e&&e.win)return e.win}else if(Xs===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=zS.bindToCurrentPlatform(e),i=new Fe;if(t&&t.primary){const s=Uw(t.primary,Xs);s&&i.add(this._registerDefaultKeybinding(s,e.id,e.args,e.weight,0,e.when))}if(t&&Array.isArray(t.secondary))for(let s=0,o=t.secondary.length;s<o;s++){const r=t.secondary[s],a=Uw(r,Xs);a&&i.add(this._registerDefaultKeybinding(a,e.id,e.args,e.weight,-s-1,e.when))}return i}registerCommandAndKeybindingRule(e){return lr(this.registerKeybindingRule(e),nn.registerCommand(e))}_registerDefaultKeybinding(e,t,i,s,o,r){const a=this._coreKeybindings.push({keybinding:e,command:t,commandArgs:i,when:r,weight1:s,weight2:o,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,st(()=>{a(),this._cachedMergedKeybindings=null})}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(FH)),this._cachedMergedKeybindings.slice(0)}}const Iu=new zS,OH={EditorModes:"platform.keybindingsRegistry"};zi.add(OH.EditorModes,Iu);function FH(n,e){if(n.weight1!==e.weight1)return n.weight1-e.weight1;if(n.command&&e.command){if(n.command<e.command)return-1;if(n.command>e.command)return 1}return n.weight2-e.weight2}var BH=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},I2=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},VH=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t},wm;function Ah(n){return n.command!==void 0}function WH(n){return n.submenu!==void 0}class M{constructor(e){if(M._instances.has(e))throw new TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);M._instances.set(e,this),this.id=e}}M._instances=new Map;M.CommandPalette=new M("CommandPalette");M.DebugBreakpointsContext=new M("DebugBreakpointsContext");M.DebugCallStackContext=new M("DebugCallStackContext");M.DebugConsoleContext=new M("DebugConsoleContext");M.DebugVariablesContext=new M("DebugVariablesContext");M.DebugWatchContext=new M("DebugWatchContext");M.DebugToolBar=new M("DebugToolBar");M.DebugToolBarStop=new M("DebugToolBarStop");M.EditorContext=new M("EditorContext");M.SimpleEditorContext=new M("SimpleEditorContext");M.EditorContent=new M("EditorContent");M.EditorLineNumberContext=new M("EditorLineNumberContext");M.EditorContextCopy=new M("EditorContextCopy");M.EditorContextPeek=new M("EditorContextPeek");M.EditorContextShare=new M("EditorContextShare");M.EditorTitle=new M("EditorTitle");M.EditorTitleRun=new M("EditorTitleRun");M.EditorTitleContext=new M("EditorTitleContext");M.EditorTitleContextShare=new M("EditorTitleContextShare");M.EmptyEditorGroup=new M("EmptyEditorGroup");M.EmptyEditorGroupContext=new M("EmptyEditorGroupContext");M.EditorTabsBarContext=new M("EditorTabsBarContext");M.ExplorerContext=new M("ExplorerContext");M.ExplorerContextShare=new M("ExplorerContextShare");M.ExtensionContext=new M("ExtensionContext");M.GlobalActivity=new M("GlobalActivity");M.CommandCenter=new M("CommandCenter");M.LayoutControlMenuSubmenu=new M("LayoutControlMenuSubmenu");M.LayoutControlMenu=new M("LayoutControlMenu");M.MenubarMainMenu=new M("MenubarMainMenu");M.MenubarAppearanceMenu=new M("MenubarAppearanceMenu");M.MenubarDebugMenu=new M("MenubarDebugMenu");M.MenubarEditMenu=new M("MenubarEditMenu");M.MenubarCopy=new M("MenubarCopy");M.MenubarFileMenu=new M("MenubarFileMenu");M.MenubarGoMenu=new M("MenubarGoMenu");M.MenubarHelpMenu=new M("MenubarHelpMenu");M.MenubarLayoutMenu=new M("MenubarLayoutMenu");M.MenubarNewBreakpointMenu=new M("MenubarNewBreakpointMenu");M.PanelAlignmentMenu=new M("PanelAlignmentMenu");M.PanelPositionMenu=new M("PanelPositionMenu");M.MenubarPreferencesMenu=new M("MenubarPreferencesMenu");M.MenubarRecentMenu=new M("MenubarRecentMenu");M.MenubarSelectionMenu=new M("MenubarSelectionMenu");M.MenubarShare=new M("MenubarShare");M.MenubarSwitchEditorMenu=new M("MenubarSwitchEditorMenu");M.MenubarSwitchGroupMenu=new M("MenubarSwitchGroupMenu");M.MenubarTerminalMenu=new M("MenubarTerminalMenu");M.MenubarViewMenu=new M("MenubarViewMenu");M.MenubarHomeMenu=new M("MenubarHomeMenu");M.OpenEditorsContext=new M("OpenEditorsContext");M.OpenEditorsContextShare=new M("OpenEditorsContextShare");M.ProblemsPanelContext=new M("ProblemsPanelContext");M.SCMChangeContext=new M("SCMChangeContext");M.SCMResourceContext=new M("SCMResourceContext");M.SCMResourceContextShare=new M("SCMResourceContextShare");M.SCMResourceFolderContext=new M("SCMResourceFolderContext");M.SCMResourceGroupContext=new M("SCMResourceGroupContext");M.SCMSourceControl=new M("SCMSourceControl");M.SCMTitle=new M("SCMTitle");M.SearchContext=new M("SearchContext");M.SearchActionMenu=new M("SearchActionContext");M.StatusBarWindowIndicatorMenu=new M("StatusBarWindowIndicatorMenu");M.StatusBarRemoteIndicatorMenu=new M("StatusBarRemoteIndicatorMenu");M.StickyScrollContext=new M("StickyScrollContext");M.TestItem=new M("TestItem");M.TestItemGutter=new M("TestItemGutter");M.TestMessageContext=new M("TestMessageContext");M.TestMessageContent=new M("TestMessageContent");M.TestPeekElement=new M("TestPeekElement");M.TestPeekTitle=new M("TestPeekTitle");M.TouchBarContext=new M("TouchBarContext");M.TitleBarContext=new M("TitleBarContext");M.TitleBarTitleContext=new M("TitleBarTitleContext");M.TunnelContext=new M("TunnelContext");M.TunnelPrivacy=new M("TunnelPrivacy");M.TunnelProtocol=new M("TunnelProtocol");M.TunnelPortInline=new M("TunnelInline");M.TunnelTitle=new M("TunnelTitle");M.TunnelLocalAddressInline=new M("TunnelLocalAddressInline");M.TunnelOriginInline=new M("TunnelOriginInline");M.ViewItemContext=new M("ViewItemContext");M.ViewContainerTitle=new M("ViewContainerTitle");M.ViewContainerTitleContext=new M("ViewContainerTitleContext");M.ViewTitle=new M("ViewTitle");M.ViewTitleContext=new M("ViewTitleContext");M.CommentEditorActions=new M("CommentEditorActions");M.CommentThreadTitle=new M("CommentThreadTitle");M.CommentThreadActions=new M("CommentThreadActions");M.CommentThreadAdditionalActions=new M("CommentThreadAdditionalActions");M.CommentThreadTitleContext=new M("CommentThreadTitleContext");M.CommentThreadCommentContext=new M("CommentThreadCommentContext");M.CommentTitle=new M("CommentTitle");M.CommentActions=new M("CommentActions");M.InteractiveToolbar=new M("InteractiveToolbar");M.InteractiveCellTitle=new M("InteractiveCellTitle");M.InteractiveCellDelete=new M("InteractiveCellDelete");M.InteractiveCellExecute=new M("InteractiveCellExecute");M.InteractiveInputExecute=new M("InteractiveInputExecute");M.NotebookToolbar=new M("NotebookToolbar");M.NotebookStickyScrollContext=new M("NotebookStickyScrollContext");M.NotebookCellTitle=new M("NotebookCellTitle");M.NotebookCellDelete=new M("NotebookCellDelete");M.NotebookCellInsert=new M("NotebookCellInsert");M.NotebookCellBetween=new M("NotebookCellBetween");M.NotebookCellListTop=new M("NotebookCellTop");M.NotebookCellExecute=new M("NotebookCellExecute");M.NotebookCellExecutePrimary=new M("NotebookCellExecutePrimary");M.NotebookDiffCellInputTitle=new M("NotebookDiffCellInputTitle");M.NotebookDiffCellMetadataTitle=new M("NotebookDiffCellMetadataTitle");M.NotebookDiffCellOutputsTitle=new M("NotebookDiffCellOutputsTitle");M.NotebookOutputToolbar=new M("NotebookOutputToolbar");M.NotebookEditorLayoutConfigure=new M("NotebookEditorLayoutConfigure");M.NotebookKernelSource=new M("NotebookKernelSource");M.BulkEditTitle=new M("BulkEditTitle");M.BulkEditContext=new M("BulkEditContext");M.TimelineItemContext=new M("TimelineItemContext");M.TimelineTitle=new M("TimelineTitle");M.TimelineTitleContext=new M("TimelineTitleContext");M.TimelineFilterSubMenu=new M("TimelineFilterSubMenu");M.AccountsContext=new M("AccountsContext");M.PanelTitle=new M("PanelTitle");M.AuxiliaryBarTitle=new M("AuxiliaryBarTitle");M.TerminalInstanceContext=new M("TerminalInstanceContext");M.TerminalEditorInstanceContext=new M("TerminalEditorInstanceContext");M.TerminalNewDropdownContext=new M("TerminalNewDropdownContext");M.TerminalTabContext=new M("TerminalTabContext");M.TerminalTabEmptyAreaContext=new M("TerminalTabEmptyAreaContext");M.WebviewContext=new M("WebviewContext");M.InlineCompletionsActions=new M("InlineCompletionsActions");M.NewFile=new M("NewFile");M.MergeInput1Toolbar=new M("MergeToolbar1Toolbar");M.MergeInput2Toolbar=new M("MergeToolbar2Toolbar");M.MergeBaseToolbar=new M("MergeBaseToolbar");M.MergeInputResultToolbar=new M("MergeToolbarResultToolbar");M.InlineSuggestionToolbar=new M("InlineSuggestionToolbar");M.ChatContext=new M("ChatContext");M.ChatCodeBlock=new M("ChatCodeblock");M.ChatMessageTitle=new M("ChatMessageTitle");M.ChatExecute=new M("ChatExecute");M.ChatInputSide=new M("ChatInputSide");M.AccessibleView=new M("AccessibleView");const U_=ct("menuService");class Vr{static for(e){let t=this._all.get(e);return t||(t=new Vr(e),this._all.set(e,t)),t}static merge(e){const t=new Set;for(const i of e)i instanceof Vr&&t.add(i.id);return t}constructor(e){this.id=e,this.has=t=>t===e}}Vr._all=new Map;const xo=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new jF({merge:Vr.merge}),this.onDidChangeMenu=this._onDidChangeMenu.event}addCommand(n){return this._commands.set(n.id,n),this._onDidChangeMenu.fire(Vr.for(M.CommandPalette)),st(()=>{this._commands.delete(n.id)&&this._onDidChangeMenu.fire(Vr.for(M.CommandPalette))})}getCommand(n){return this._commands.get(n)}getCommands(){const n=new Map;return this._commands.forEach((e,t)=>n.set(t,e)),n}appendMenuItem(n,e){let t=this._menuItems.get(n);t||(t=new Zn,this._menuItems.set(n,t));const i=t.push(e);return this._onDidChangeMenu.fire(Vr.for(n)),st(()=>{i(),this._onDidChangeMenu.fire(Vr.for(n))})}appendMenuItems(n){const e=new Fe;for(const{id:t,item:i}of n)e.add(this.appendMenuItem(t,i));return e}getMenuItems(n){let e;return this._menuItems.has(n)?e=[...this._menuItems.get(n)]:e=[],n===M.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(n){const e=new Set;for(const t of n)Ah(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,i)=>{e.has(i)||n.push({command:t})})}};class HH extends $S{constructor(e,t,i){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,i,"submenu"),this.item=e,this.hideActions=t}}let Hf=wm=class{static label(e,t){return t!=null&&t.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value}constructor(e,t,i,s,o,r){var a,l;this.hideActions=s,this._commandService=r,this.id=e.id,this.label=wm.label(e,i),this.tooltip=(l=typeof e.tooltip=="string"?e.tooltip:(a=e.tooltip)===null||a===void 0?void 0:a.value)!==null&&l!==void 0?l:"",this.enabled=!e.precondition||o.contextMatchesRules(e.precondition),this.checked=void 0;let c;if(e.toggled){const d=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=o.contextMatchesRules(d.condition),this.checked&&d.tooltip&&(this.tooltip=typeof d.tooltip=="string"?d.tooltip:d.tooltip.value),this.checked&&je.isThemeIcon(d.icon)&&(c=d.icon),this.checked&&d.title&&(this.label=typeof d.title=="string"?d.title:d.title.value)}c||(c=je.isThemeIcon(e.icon)?e.icon:void 0),this.item=e,this.alt=t?new wm(t,void 0,i,s,o,r):void 0,this._options=i,this.class=c&&je.asClassName(c)}run(...e){var t,i;let s=[];return!((t=this._options)===null||t===void 0)&&t.arg&&(s=[...s,this._options.arg]),!((i=this._options)===null||i===void 0)&&i.shouldForwardArgs&&(s=[...s,...e]),this._commandService.executeCommand(this.id,...s)}};Hf=wm=BH([I2(4,Et),I2(5,oo)],Hf);class z4{constructor(e){this.desc=e}}function U4(n){const e=new Fe,t=new n,i=t.desc,{f1:s,menu:o,keybinding:r,description:a}=i,l=VH(i,["f1","menu","keybinding","description"]);if(e.add(nn.registerCommand({id:l.id,handler:(c,...d)=>t.run(c,...d),description:a})),Array.isArray(o))for(const c of o)e.add(xo.appendMenuItem(c.id,Object.assign({command:Object.assign(Object.assign({},l),{precondition:c.precondition===null?void 0:l.precondition})},c)));else o&&e.add(xo.appendMenuItem(o.id,Object.assign({command:Object.assign(Object.assign({},l),{precondition:o.precondition===null?void 0:l.precondition})},o)));if(s&&(e.add(xo.appendMenuItem(M.CommandPalette,{command:l,when:l.precondition})),e.add(xo.addCommand(l))),Array.isArray(r))for(const c of r)e.add(Iu.registerKeybindingRule(Object.assign(Object.assign({},c),{id:l.id,when:l.precondition?Ct.and(l.precondition,c.when):c.when})));else r&&e.add(Iu.registerKeybindingRule(Object.assign(Object.assign({},r),{id:l.id,when:l.precondition?Ct.and(l.precondition,r.when):r.when})));return e}const Pg=ct("telemetryService");class q_{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this._description=e.description}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let i=t.kbExpr;this.precondition&&(i?i=Ct.and(i,this.precondition):i=this.precondition);const s={id:this.id,weight:t.weight,args:t.args,when:i,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};Iu.registerKeybindingRule(s)}}nn.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),description:this._description})}_registerMenuItem(e){xo.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class US extends q_{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,i,s){return this._implementations.push({priority:e,name:t,implementation:i,when:s}),this._implementations.sort((o,r)=>r.priority-o.priority),{dispose:()=>{for(let o=0;o<this._implementations.length;o++)if(this._implementations[o].implementation===i){this._implementations.splice(o,1);return}}}}runCommand(e,t){const i=e.get(Cl),s=e.get(Et);i.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const o of this._implementations){if(o.when){const a=s.getContext(document.activeElement);if(!o.when.evaluate(a))continue}const r=o.implementation(e,t);if(r)return i.trace(`Command '${this.id}' was handled by '${o.name}'.`),typeof r=="boolean"?void 0:r}i.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class q4 extends q_{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class kc extends q_{static bindToContribution(e){return class extends kc{constructor(i){super(i),this._callback=i.handler}runEditorCommand(i,s,o){const r=e(s);r&&this._callback(r,o)}}}static runEditorCommand(e,t,i,s){const o=e.get(oi),r=o.getFocusedCodeEditor()||o.getActiveCodeEditor();if(r)return r.invokeWithinContext(a=>{if(a.get(Et).contextMatchesRules(i??void 0))return s(a,r,t)})}runCommand(e,t){return kc.runEditorCommand(e,t,this.precondition,(i,s,o)=>this.runEditorCommand(i,s,o))}}function He(n){return Xo.INSTANCE.registerEditorCommand(n),n}function j4(n,e,t){Xo.INSTANCE.registerEditorContribution(n,e,t)}var uc;(function(n){function e(r){return Xo.INSTANCE.getEditorCommand(r)}n.getEditorCommand=e;function t(){return Xo.INSTANCE.getEditorActions()}n.getEditorActions=t;function i(){return Xo.INSTANCE.getEditorContributions()}n.getEditorContributions=i;function s(r){return Xo.INSTANCE.getEditorContributions().filter(a=>r.indexOf(a.id)>=0)}n.getSomeEditorContributions=s;function o(){return Xo.INSTANCE.getDiffEditorContributions()}n.getDiffEditorContributions=o})(uc||(uc={}));const $H={EditorCommonContributions:"editor.contributions"};class Xo{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t,i){this.editorContributions.push({id:e,ctor:t,instantiation:i})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}}Xo.INSTANCE=new Xo;zi.add($H.EditorCommonContributions,Xo.INSTANCE);function Og(n){return n.register(),n}const K4=Og(new US({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:M.MenubarEditMenu,group:"1_do",title:m({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:M.CommandPalette,group:"",title:m("undo","Undo"),order:1}]}));Og(new q4(K4,{id:"default:undo",precondition:void 0}));const G4=Og(new US({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:M.MenubarEditMenu,group:"1_do",title:m({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:M.CommandPalette,group:"",title:m("redo","Redo"),order:1}]}));Og(new q4(G4,{id:"default:redo",precondition:void 0}));const zH=Og(new US({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:M.MenubarSelectionMenu,group:"1_basic",title:m({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:M.CommandPalette,group:"",title:m("selectAll","Select All"),order:1}]}));var UH=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},qH=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let $f=class{constructor(e,t){}dispose(){}};$f.ID="editor.contrib.markerDecorations";$f=UH([qH(1,$4)],$f);j4($f.ID,$f,0);class qS extends oe{constructor(e,t){super(),this._onDidChange=this._register(new q),this.onDidChange=this._onDidChange.event,this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){if(!this._resizeObserver&&this._referenceDomElement){let e=null;const t=()=>{e?this.observe({width:e.width,height:e.height}):this.observe()};let i=!1,s=!1;const o=()=>{if(i&&!s)try{i=!1,s=!0,t()}finally{requestAnimationFrame(()=>{s=!1,o()})}};this._resizeObserver=new ResizeObserver(r=>{e=r&&r[0]&&r[0].contentRect?r[0].contentRect:null,i=!0,o()}),this._resizeObserver.observe(this._referenceDomElement)}}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let i=0,s=0;t?(i=t.width,s=t.height):this._referenceDomElement&&(i=this._referenceDomElement.clientWidth,s=this._referenceDomElement.clientHeight),i=Math.max(5,i),s=Math.max(5,s),(this._width!==i||this._height!==s)&&(this._width=i,this._height=s,e&&this._onDidChange.fire())}}class sl{constructor(e,t){this.key=e,this.migrate=t}apply(e){const t=sl._read(e,this.key),i=o=>sl._read(e,o),s=(o,r)=>sl._write(e,o,r);this.migrate(t,i,s)}static _read(e,t){if(typeof e>"u")return;const i=t.indexOf(".");if(i>=0){const s=t.substring(0,i);return this._read(e[s],t.substring(i+1))}return e[t]}static _write(e,t,i){const s=t.indexOf(".");if(s>=0){const o=t.substring(0,s);e[o]=e[o]||{},this._write(e[o],t.substring(s+1),i);return}e[t]=i}}sl.items=[];function Sl(n,e){sl.items.push(new sl(n,e))}function Hs(n,e){Sl(n,(t,i,s)=>{if(typeof t<"u"){for(const[o,r]of e)if(t===o){s(n,r);return}}})}function jH(n){sl.items.forEach(e=>e.apply(n))}Hs("wordWrap",[[!0,"on"],[!1,"off"]]);Hs("lineNumbers",[[!0,"on"],[!1,"off"]]);Hs("cursorBlinking",[["visible","solid"]]);Hs("renderWhitespace",[[!0,"boundary"],[!1,"none"]]);Hs("renderLineHighlight",[[!0,"line"],[!1,"none"]]);Hs("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]);Hs("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]);Hs("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);Hs("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);Hs("autoIndent",[[!1,"advanced"],[!0,"full"]]);Hs("matchBrackets",[[!0,"always"],[!1,"never"]]);Hs("renderFinalNewline",[[!0,"on"],[!1,"off"]]);Hs("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]);Sl("autoClosingBrackets",(n,e,t)=>{n===!1&&(t("autoClosingBrackets","never"),typeof e("autoClosingQuotes")>"u"&&t("autoClosingQuotes","never"),typeof e("autoSurround")>"u"&&t("autoSurround","never"))});Sl("renderIndentGuides",(n,e,t)=>{typeof n<"u"&&(t("renderIndentGuides",void 0),typeof e("guides.indentation")>"u"&&t("guides.indentation",!!n))});Sl("highlightActiveIndentGuide",(n,e,t)=>{typeof n<"u"&&(t("highlightActiveIndentGuide",void 0),typeof e("guides.highlightActiveIndentation")>"u"&&t("guides.highlightActiveIndentation",!!n))});const KH={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};Sl("suggest.filteredTypes",(n,e,t)=>{if(n&&typeof n=="object"){for(const i of Object.entries(KH))n[i[0]]===!1&&typeof e(`suggest.${i[1]}`)>"u"&&t(`suggest.${i[1]}`,!1);t("suggest.filteredTypes",void 0)}});Sl("quickSuggestions",(n,e,t)=>{if(typeof n=="boolean"){const i=n?"on":"off";t("quickSuggestions",{comments:i,strings:i,other:i})}});Sl("experimental.stickyScroll.enabled",(n,e,t)=>{typeof n=="boolean"&&(t("experimental.stickyScroll.enabled",void 0),typeof e("stickyScroll.enabled")>"u"&&t("stickyScroll.enabled",n))});Sl("experimental.stickyScroll.maxLineCount",(n,e,t)=>{typeof n=="number"&&(t("experimental.stickyScroll.maxLineCount",void 0),typeof e("stickyScroll.maxLineCount")>"u"&&t("stickyScroll.maxLineCount",n))});class GH{constructor(){this._tabFocusTerminal=!1,this._tabFocusEditor=!1,this._onDidChangeTabFocus=new q,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(e){return e==="terminalFocus"?this._tabFocusTerminal:this._tabFocusEditor}setTabFocusMode(e,t){t==="terminalFocus"?this._tabFocusTerminal=e:this._tabFocusEditor=e,this._onDidChangeTabFocus.fire()}}const sf=new GH;var ZH=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},YH=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let Jw=class extends oe{constructor(e,t,i,s){super(),this._accessibilityService=s,this._onDidChange=this._register(new q),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new q),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._glyphMarginDecorationLaneCount=1,this._computeOptionsMemory=new uT,this.isSimpleWidget=e,this._containerObserver=this._register(new qS(i,t.dimension)),this._rawOptions=N2(t),this._validatedOptions=Ma.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(12)&&this._containerObserver.startObserving(),this._register(Na.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(sf.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(Iw.onDidChange(()=>this._recomputeOptions())),this._register(Qm.onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_recomputeOptions(){const e=this._computeOptions(),t=Ma.checkEquals(this.options,e);t!==null&&(this.options=e,this._onDidChangeFast.fire(t),this._onDidChange.fire(t))}_computeOptions(){const e=this._readEnvConfiguration(),t=lc.createFromValidatedSettings(this._validatedOptions,e.pixelRatio,this.isSimpleWidget),i=this._readFontInfo(t),s={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:i,extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:sf.getTabFocusMode("editorFocus"),accessibilitySupport:e.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return Ma.computeOptions(this._validatedOptions,s)}_readEnvConfiguration(){return{extraEditorClassName:QH(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:ac||io,pixelRatio:Qm.value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(e){return Iw.readFontInfo(e)}getRawOptions(){return this._rawOptions}updateOptions(e){const t=N2(e);Ma.applyUpdate(this._rawOptions,t)&&(this._validatedOptions=Ma.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(e){this._containerObserver.observe(e)}setIsDominatedByLongLines(e){this._isDominatedByLongLines!==e&&(this._isDominatedByLongLines=e,this._recomputeOptions())}setModelLineCount(e){const t=XH(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}setReservedHeight(e){this._reservedHeight!==e&&(this._reservedHeight=e,this._recomputeOptions())}setGlyphMarginDecorationLaneCount(e){this._glyphMarginDecorationLaneCount!==e&&(this._glyphMarginDecorationLaneCount=e,this._recomputeOptions())}};Jw=ZH([YH(3,Hc)],Jw);function XH(n){let e=0;for(;n;)n=Math.floor(n/10),e++;return e||1}function QH(){let n="";return!ia&&!MT&&(n+="no-user-select "),ia&&(n+="no-minimap-shadow ",n+="enable-user-select "),gt&&(n+="mac "),n}class JH{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class e${constructor(){this._values=[]}_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,t){this._values[e]=t}}class Ma{static validateOptions(e){const t=new JH;for(const i of vd){const s=i.name==="_never_"?void 0:e[i.name];t._write(i.id,i.validate(s))}return t}static computeOptions(e,t){const i=new e$;for(const s of vd)i._write(s.id,s.compute(t,i,e._read(s.id)));return i}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?An(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(!Ma._deepEquals(e[i],t[i]))return!1;return!0}static checkEquals(e,t){const i=[];let s=!1;for(const o of vd){const r=!Ma._deepEquals(e._read(o.id),t._read(o.id));i[o.id]=r,r&&(s=!0)}return s?new dT(i):null}static applyUpdate(e,t){let i=!1;for(const s of vd)if(t.hasOwnProperty(s.name)){const o=s.applyUpdate(e[s.name],t[s.name]);e[s.name]=o.newValue,i=i||o.didChange}return i}}function N2(n){const e=Da(n);return jH(e),e}function li(n,e,t){let i=null,s=null;if(typeof t.value=="function"?(i="value",s=t.value,s.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(i="get",s=t.get),!s)throw new Error("not supported");const o=`$memoize$${e}`;t[i]=function(...r){return this.hasOwnProperty(o)||Object.defineProperty(this,o,{configurable:!1,enumerable:!1,writable:!1,value:s.apply(this,r)}),this[o]}}var t$=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},It;(function(n){n.Tap="-monaco-gesturetap",n.Change="-monaco-gesturechange",n.Start="-monaco-gesturestart",n.End="-monaco-gesturesend",n.Contextmenu="-monaco-gesturecontextmenu"})(It||(It={}));class Ot extends oe{constructor(){super(),this.dispatched=!1,this.targets=new Zn,this.ignoreTargets=new Zn,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(ee(document,"touchstart",e=>this.onTouchStart(e),{passive:!1})),this._register(ee(document,"touchend",e=>this.onTouchEnd(e))),this._register(ee(document,"touchmove",e=>this.onTouchMove(e),{passive:!1}))}static addTarget(e){if(!Ot.isTouchDevice())return oe.None;Ot.INSTANCE||(Ot.INSTANCE=new Ot);const t=Ot.INSTANCE.targets.push(e);return st(t)}static ignoreTarget(e){if(!Ot.isTouchDevice())return oe.None;Ot.INSTANCE||(Ot.INSTANCE=new Ot);const t=Ot.INSTANCE.ignoreTargets.push(e);return st(t)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){const t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let i=0,s=e.targetTouches.length;i<s;i++){const o=e.targetTouches.item(i);this.activeTouches[o.identifier]={id:o.identifier,initialTarget:o.target,initialTimeStamp:t,initialPageX:o.pageX,initialPageY:o.pageY,rollingTimestamps:[t],rollingPageX:[o.pageX],rollingPageY:[o.pageY]};const r=this.newGestureEvent(It.Start,o.target);r.pageX=o.pageX,r.pageY=o.pageY,this.dispatchEvent(r)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e){const t=Date.now(),i=Object.keys(this.activeTouches).length;for(let s=0,o=e.changedTouches.length;s<o;s++){const r=e.changedTouches.item(s);if(!this.activeTouches.hasOwnProperty(String(r.identifier))){console.warn("move of an UNKNOWN touch",r);continue}const a=this.activeTouches[r.identifier],l=Date.now()-a.initialTimeStamp;if(l<Ot.HOLD_DELAY&&Math.abs(a.initialPageX-Ss(a.rollingPageX))<30&&Math.abs(a.initialPageY-Ss(a.rollingPageY))<30){const c=this.newGestureEvent(It.Tap,a.initialTarget);c.pageX=Ss(a.rollingPageX),c.pageY=Ss(a.rollingPageY),this.dispatchEvent(c)}else if(l>=Ot.HOLD_DELAY&&Math.abs(a.initialPageX-Ss(a.rollingPageX))<30&&Math.abs(a.initialPageY-Ss(a.rollingPageY))<30){const c=this.newGestureEvent(It.Contextmenu,a.initialTarget);c.pageX=Ss(a.rollingPageX),c.pageY=Ss(a.rollingPageY),this.dispatchEvent(c)}else if(i===1){const c=Ss(a.rollingPageX),d=Ss(a.rollingPageY),u=Ss(a.rollingTimestamps)-a.rollingTimestamps[0],h=c-a.rollingPageX[0],f=d-a.rollingPageY[0],g=[...this.targets].filter(p=>a.initialTarget instanceof Node&&p.contains(a.initialTarget));this.inertia(g,t,Math.abs(h)/u,h>0?1:-1,c,Math.abs(f)/u,f>0?1:-1,d)}this.dispatchEvent(this.newGestureEvent(It.End,a.initialTarget)),delete this.activeTouches[r.identifier]}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){const i=document.createEvent("CustomEvent");return i.initEvent(e,!1,!0),i.initialTarget=t,i.tapCount=0,i}dispatchEvent(e){if(e.type===It.Tap){const t=new Date().getTime();let i=0;t-this._lastSetTapCountTime>Ot.CLEAR_TAP_COUNT_TIME?i=1:i=2,this._lastSetTapCountTime=t,e.tapCount=i}else(e.type===It.Change||e.type===It.Contextmenu)&&(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(const t of this.ignoreTargets)if(t.contains(e.initialTarget))return;for(const t of this.targets)t.contains(e.initialTarget)&&(t.dispatchEvent(e),this.dispatched=!0)}}inertia(e,t,i,s,o,r,a,l){this.handle=Ws(()=>{const c=Date.now(),d=c-t;let u=0,h=0,f=!0;i+=Ot.SCROLL_FRICTION*d,r+=Ot.SCROLL_FRICTION*d,i>0&&(f=!1,u=s*i*d),r>0&&(f=!1,h=a*r*d);const g=this.newGestureEvent(It.Change);g.translationX=u,g.translationY=h,e.forEach(p=>p.dispatchEvent(g)),f||this.inertia(e,c,i,s,o+u,r,a,l+h)})}onTouchMove(e){const t=Date.now();for(let i=0,s=e.changedTouches.length;i<s;i++){const o=e.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(o.identifier))){console.warn("end of an UNKNOWN touch",o);continue}const r=this.activeTouches[o.identifier],a=this.newGestureEvent(It.Change,r.initialTarget);a.translationX=o.pageX-Ss(r.rollingPageX),a.translationY=o.pageY-Ss(r.rollingPageY),a.pageX=o.pageX,a.pageY=o.pageY,this.dispatchEvent(a),r.rollingPageX.length>3&&(r.rollingPageX.shift(),r.rollingPageY.shift(),r.rollingTimestamps.shift()),r.rollingPageX.push(o.pageX),r.rollingPageY.push(o.pageY),r.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}}Ot.SCROLL_FRICTION=-.005;Ot.HOLD_DELAY=700;Ot.CLEAR_TAP_COUNT_TIME=400;t$([li],Ot,"isTouchDevice",null);class j_{constructor(){this._hooks=new Fe,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;const i=this._onStopCallback;this._onStopCallback=null,e&&i&&i(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,i,s,o){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=s,this._onStopCallback=o;let r=e;try{e.setPointerCapture(t),this._hooks.add(st(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{r=window}this._hooks.add(ee(r,_e.POINTER_MOVE,a=>{if(a.buttons!==i){this.stopMonitoring(!0);return}a.preventDefault(),this._pointerMoveCallback(a)})),this._hooks.add(ee(r,_e.POINTER_UP,a=>this.stopMonitoring(!0)))}}function jS(n){return`--vscode-${n.replace(/\./g,"-")}`}function pe(n){return`var(${jS(n)})`}function i$(n,e){return`var(${jS(n)}, ${e})`}const Z4={ColorContribution:"base.contributions.colors"};class n${constructor(){this._onDidChangeSchema=new q,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,i,s=!1,o){const r={id:e,description:i,defaults:t,needsTransparency:s,deprecationMessage:o};this.colorsById[e]=r;const a={type:"string",description:i,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return o&&(a.deprecationMessage=o),this.colorSchema.properties[e]=a,this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(i),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){const i=this.colorsById[e];if(i&&i.defaults){const s=i.defaults[t.type];return fo(s,t)}}getColorSchema(){return this.colorSchema}toString(){const e=(t,i)=>{const s=t.indexOf(".")===-1?0:1,o=i.indexOf(".")===-1?0:1;return s!==o?s-o:t.localeCompare(i)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}const K_=new n$;zi.add(Z4.ColorContribution,K_);function F(n,e,t,i,s){return K_.registerColor(n,e,t,i,s)}const Ge=F("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},m("foreground","Overall foreground color. This color is only used if not overridden by a component."));F("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},m("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component."));F("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},m("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component."));F("descriptionForeground",{light:"#717171",dark:Ee(Ge,.7),hcDark:Ee(Ge,.7),hcLight:Ee(Ge,.7)},m("descriptionForeground","Foreground color for description text providing additional information, for example for a label."));const yp=F("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},m("iconForeground","The default color for icons in the workbench.")),Ns=F("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},m("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),dt=F("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},m("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),ri=F("contrastActiveBorder",{light:null,dark:null,hcDark:Ns,hcLight:Ns},m("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast."));F("selection.background",{light:null,dark:null,hcDark:null,hcLight:null},m("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor."));F("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:J.black,hcLight:"#292929"},m("textSeparatorForeground","Color for text separators."));const s$=F("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#3794FF",hcLight:"#0F4A85"},m("textLinkForeground","Foreground color for links in text."));F("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#3794FF",hcLight:"#0F4A85"},m("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover."));F("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#D7BA7D",hcLight:"#292929"},m("textPreformatForeground","Foreground color for preformatted text segments."));F("textBlockQuote.background",{light:"#7f7f7f1a",dark:"#7f7f7f1a",hcDark:null,hcLight:"#F2F2F2"},m("textBlockQuoteBackground","Background color for block quotes in text."));F("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:J.white,hcLight:"#292929"},m("textBlockQuoteBorder","Border color for block quotes in text."));F("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:J.black,hcLight:"#F2F2F2"},m("textCodeBlockBackground","Background color for code blocks in text."));const Wa=F("widget.shadow",{dark:Ee(J.black,.36),light:Ee(J.black,.16),hcDark:null,hcLight:null},m("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),o$=F("widget.border",{dark:null,light:null,hcDark:dt,hcLight:dt},m("widgetBorder","Border color of widgets such as find/replace inside the editor.")),r$=F("input.background",{dark:"#3C3C3C",light:J.white,hcDark:J.black,hcLight:J.white},m("inputBoxBackground","Input box background.")),a$=F("input.foreground",{dark:Ge,light:Ge,hcDark:Ge,hcLight:Ge},m("inputBoxForeground","Input box foreground.")),l$=F("input.border",{dark:null,light:null,hcDark:dt,hcLight:dt},m("inputBoxBorder","Input box border.")),c$=F("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:dt,hcLight:dt},m("inputBoxActiveOptionBorder","Border color of activated options in input fields."));F("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},m("inputOption.hoverBackground","Background color of activated options in input fields."));const d$=F("inputOption.activeBackground",{dark:Ee(Ns,.4),light:Ee(Ns,.2),hcDark:J.transparent,hcLight:J.transparent},m("inputOption.activeBackground","Background hover color of options in input fields.")),u$=F("inputOption.activeForeground",{dark:J.white,light:J.black,hcDark:Ge,hcLight:Ge},m("inputOption.activeForeground","Foreground color of activated options in input fields."));F("input.placeholderForeground",{light:Ee(Ge,.5),dark:Ee(Ge,.5),hcDark:Ee(Ge,.7),hcLight:Ee(Ge,.7)},m("inputPlaceholderForeground","Input box foreground color for placeholder text."));const h$=F("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:J.black,hcLight:J.white},m("inputValidationInfoBackground","Input validation background color for information severity.")),f$=F("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:Ge},m("inputValidationInfoForeground","Input validation foreground color for information severity.")),g$=F("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:dt,hcLight:dt},m("inputValidationInfoBorder","Input validation border color for information severity.")),p$=F("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:J.black,hcLight:J.white},m("inputValidationWarningBackground","Input validation background color for warning severity.")),m$=F("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:Ge},m("inputValidationWarningForeground","Input validation foreground color for warning severity.")),_$=F("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:dt,hcLight:dt},m("inputValidationWarningBorder","Input validation border color for warning severity.")),b$=F("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:J.black,hcLight:J.white},m("inputValidationErrorBackground","Input validation background color for error severity.")),v$=F("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:Ge},m("inputValidationErrorForeground","Input validation foreground color for error severity.")),w$=F("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:dt,hcLight:dt},m("inputValidationErrorBorder","Input validation border color for error severity.")),sr=F("dropdown.background",{dark:"#3C3C3C",light:J.white,hcDark:J.black,hcLight:J.white},m("dropdownBackground","Dropdown background.")),C$=F("dropdown.listBackground",{dark:null,light:null,hcDark:J.black,hcLight:J.white},m("dropdownListBackground","Dropdown list background.")),Ur=F("dropdown.foreground",{dark:"#F0F0F0",light:Ge,hcDark:J.white,hcLight:Ge},m("dropdownForeground","Dropdown foreground.")),Dd=F("dropdown.border",{dark:sr,light:"#CECECE",hcDark:dt,hcLight:dt},m("dropdownBorder","Dropdown border.")),Mh=F("button.foreground",{dark:J.white,light:J.white,hcDark:J.white,hcLight:J.white},m("buttonForeground","Button foreground color.")),y$=F("button.separator",{dark:Ee(Mh,.4),light:Ee(Mh,.4),hcDark:Ee(Mh,.4),hcLight:Ee(Mh,.4)},m("buttonSeparator","Button separator color.")),Rh=F("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},m("buttonBackground","Button background color.")),S$=F("button.hoverBackground",{dark:To(Rh,.2),light:Uc(Rh,.2),hcDark:Rh,hcLight:Rh},m("buttonHoverBackground","Button background color when hovering.")),L$=F("button.border",{dark:dt,light:dt,hcDark:dt,hcLight:dt},m("buttonBorder","Button border color.")),x$=F("button.secondaryForeground",{dark:J.white,light:J.white,hcDark:J.white,hcLight:Ge},m("buttonSecondaryForeground","Secondary button foreground color.")),eC=F("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:J.white},m("buttonSecondaryBackground","Secondary button background color.")),D$=F("button.secondaryHoverBackground",{dark:To(eC,.2),light:Uc(eC,.2),hcDark:null,hcLight:null},m("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),Cm=F("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:J.black,hcLight:"#0F4A85"},m("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),k$=F("badge.foreground",{dark:J.white,light:"#333",hcDark:J.white,hcLight:J.white},m("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),E$=F("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},m("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),Ph=F("scrollbarSlider.background",{dark:J.fromHex("#797979").transparent(.4),light:J.fromHex("#646464").transparent(.4),hcDark:Ee(dt,.6),hcLight:Ee(dt,.4)},m("scrollbarSliderBackground","Scrollbar slider background color.")),Oh=F("scrollbarSlider.hoverBackground",{dark:J.fromHex("#646464").transparent(.7),light:J.fromHex("#646464").transparent(.7),hcDark:Ee(dt,.8),hcLight:Ee(dt,.8)},m("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),Fh=F("scrollbarSlider.activeBackground",{dark:J.fromHex("#BFBFBF").transparent(.4),light:J.fromHex("#000000").transparent(.6),hcDark:dt,hcLight:dt},m("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),I$=F("progressBar.background",{dark:J.fromHex("#0E70C0"),light:J.fromHex("#0E70C0"),hcDark:dt,hcLight:dt},m("progressBarBackground","Background color of the progress bar that can show for long running operations."));F("editorError.background",{dark:null,light:null,hcDark:null,hcLight:null},m("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const qr=F("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},m("editorError.foreground","Foreground color of error squigglies in the editor."));F("editorError.border",{dark:null,light:null,hcDark:J.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},m("errorBorder","If set, color of double underlines for errors in the editor."));F("editorWarning.background",{dark:null,light:null,hcDark:null,hcLight:null},m("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const Ts=F("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},m("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),u0=F("editorWarning.border",{dark:null,light:null,hcDark:J.fromHex("#FFCC00").transparent(.8),hcLight:J.fromHex("#FFCC00").transparent(.8)},m("warningBorder","If set, color of double underlines for warnings in the editor."));F("editorInfo.background",{dark:null,light:null,hcDark:null,hcLight:null},m("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const Do=F("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},m("editorInfo.foreground","Foreground color of info squigglies in the editor.")),T2=F("editorInfo.border",{dark:null,light:null,hcDark:J.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},m("infoBorder","If set, color of double underlines for infos in the editor.")),N$=F("editorHint.foreground",{dark:J.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},m("editorHint.foreground","Foreground color of hint squigglies in the editor."));F("editorHint.border",{dark:null,light:null,hcDark:J.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},m("hintBorder","If set, color of double underlines for hints in the editor."));F("sash.hoverBorder",{dark:Ns,light:Ns,hcDark:Ns,hcLight:Ns},m("sashActiveBorder","Border color of active sashes."));const Qi=F("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:J.black,hcLight:J.white},m("editorBackground","Editor background color.")),G_=F("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:J.white,hcLight:Ge},m("editorForeground","Editor default foreground color."));F("editorStickyScroll.background",{light:Qi,dark:Qi,hcDark:Qi,hcLight:Qi},m("editorStickyScrollBackground","Sticky scroll background color for the editor"));F("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:J.fromHex("#0F4A85").transparent(.1)},m("editorStickyScrollHoverBackground","Sticky scroll on hover background color for the editor"));const Li=F("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:J.white},m("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),jr=F("editorWidget.foreground",{dark:Ge,light:Ge,hcDark:Ge,hcLight:Ge},m("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),Bh=F("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:dt,hcLight:dt},m("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget."));F("editorWidget.resizeBorder",{light:null,dark:null,hcDark:null,hcLight:null},m("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget."));const A2=F("quickInput.background",{dark:Li,light:Li,hcDark:Li,hcLight:Li},m("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),T$=F("quickInput.foreground",{dark:jr,light:jr,hcDark:jr,hcLight:jr},m("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),A$=F("quickInputTitle.background",{dark:new J(new rt(255,255,255,.105)),light:new J(new rt(0,0,0,.06)),hcDark:"#000000",hcLight:J.white},m("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),Y4=F("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:J.white,hcLight:"#0F4A85"},m("pickerGroupForeground","Quick picker color for grouping labels.")),M$=F("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:J.white,hcLight:"#0F4A85"},m("pickerGroupBorder","Quick picker color for grouping borders.")),R$=F("keybindingLabel.background",{dark:new J(new rt(128,128,128,.17)),light:new J(new rt(221,221,221,.4)),hcDark:J.transparent,hcLight:J.transparent},m("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),P$=F("keybindingLabel.foreground",{dark:J.fromHex("#CCCCCC"),light:J.fromHex("#555555"),hcDark:J.white,hcLight:Ge},m("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),O$=F("keybindingLabel.border",{dark:new J(new rt(51,51,51,.6)),light:new J(new rt(204,204,204,.4)),hcDark:new J(new rt(111,195,223)),hcLight:dt},m("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),F$=F("keybindingLabel.bottomBorder",{dark:new J(new rt(68,68,68,.6)),light:new J(new rt(187,187,187,.4)),hcDark:new J(new rt(111,195,223)),hcLight:Ge},m("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),kd=F("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},m("editorSelectionBackground","Color of the editor selection.")),B$=F("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:J.white},m("editorSelectionForeground","Color of the selected text for high contrast.")),X4=F("editor.inactiveSelectionBackground",{light:Ee(kd,.5),dark:Ee(kd,.5),hcDark:Ee(kd,.7),hcLight:Ee(kd,.5)},m("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),Q4=F("editor.selectionHighlightBackground",{light:$2(kd,Qi,.3,.6),dark:$2(kd,Qi,.3,.6),hcDark:null,hcLight:null},m("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0);F("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:ri,hcLight:ri},m("editorSelectionHighlightBorder","Border color for regions with the same content as the selection."));F("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},m("editorFindMatch","Color of the current search match."));const Ha=F("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},m("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0);F("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},m("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);F("editor.findMatchBorder",{light:null,dark:null,hcDark:ri,hcLight:ri},m("editorFindMatchBorder","Border color of the current search match."));const Ed=F("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:ri,hcLight:ri},m("findMatchHighlightBorder","Border color of the other search matches."));F("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:Ee(ri,.4),hcLight:Ee(ri,.4)},m("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);F("searchEditor.findMatchBackground",{light:Ee(Ha,.66),dark:Ee(Ha,.66),hcDark:Ha,hcLight:Ha},m("searchEditor.queryMatch","Color of the Search Editor query matches."));F("searchEditor.findMatchBorder",{light:Ee(Ed,.66),dark:Ee(Ed,.66),hcDark:Ed,hcLight:Ed},m("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."));F("search.resultsInfoForeground",{light:Ge,dark:Ee(Ge,.65),hcDark:Ge,hcLight:Ge},m("search.resultsInfoForeground","Color of the text in the search viewlet's completion message."));F("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},m("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0);const M2=F("editorHoverWidget.background",{light:Li,dark:Li,hcDark:Li,hcLight:Li},m("hoverBackground","Background color of the editor hover."));F("editorHoverWidget.foreground",{light:jr,dark:jr,hcDark:jr,hcLight:jr},m("hoverForeground","Foreground color of the editor hover."));F("editorHoverWidget.border",{light:Bh,dark:Bh,hcDark:Bh,hcLight:Bh},m("hoverBorder","Border color of the editor hover."));F("editorHoverWidget.statusBarBackground",{dark:To(M2,.2),light:Uc(M2,.05),hcDark:Li,hcLight:Li},m("statusBarBackground","Background color of the editor hover status bar."));F("editorLink.activeForeground",{dark:"#4E94CE",light:J.blue,hcDark:J.cyan,hcLight:"#292929"},m("activeLinkForeground","Color of active links."));const $a=F("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:J.white,hcLight:J.black},m("editorInlayHintForeground","Foreground color of inline hints")),za=F("editorInlayHint.background",{dark:Ee(Cm,.1),light:Ee(Cm,.1),hcDark:Ee(J.white,.1),hcLight:Ee(Cm,.1)},m("editorInlayHintBackground","Background color of inline hints"));F("editorInlayHint.typeForeground",{dark:$a,light:$a,hcDark:$a,hcLight:$a},m("editorInlayHintForegroundTypes","Foreground color of inline hints for types"));F("editorInlayHint.typeBackground",{dark:za,light:za,hcDark:za,hcLight:za},m("editorInlayHintBackgroundTypes","Background color of inline hints for types"));F("editorInlayHint.parameterForeground",{dark:$a,light:$a,hcDark:$a,hcLight:$a},m("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters"));F("editorInlayHint.parameterBackground",{dark:za,light:za,hcDark:za,hcLight:za},m("editorInlayHintBackgroundParameter","Background color of inline hints for parameters"));F("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},m("editorLightBulbForeground","The color used for the lightbulb actions icon."));F("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},m("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon."));const h0=new J(new rt(155,185,85,.2)),f0=new J(new rt(255,0,0,.2)),J4=F("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},m("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),e3=F("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},m("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);F("diffEditor.insertedLineBackground",{dark:h0,light:h0,hcDark:null,hcLight:null},m("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0);F("diffEditor.removedLineBackground",{dark:f0,light:f0,hcDark:null,hcLight:null},m("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);F("diffEditorGutter.insertedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},m("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted."));F("diffEditorGutter.removedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},m("diffEditorRemovedLineGutter","Background color for the margin where lines got removed."));const t3=F("diffEditorOverview.insertedForeground",{dark:null,light:null,hcDark:null,hcLight:null},m("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),i3=F("diffEditorOverview.removedForeground",{dark:null,light:null,hcDark:null,hcLight:null},m("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content."));F("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},m("diffEditorInsertedOutline","Outline color for the text that got inserted."));F("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},m("diffEditorRemovedOutline","Outline color for text that got removed."));F("diffEditor.border",{dark:null,light:null,hcDark:dt,hcLight:dt},m("diffEditorBorder","Border color between the two text editors."));const V$=F("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},m("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views."));F("diffEditor.unchangedRegionBackground",{dark:"#3e3e3e",light:"#e4e4e4",hcDark:null,hcLight:null},m("diffEditor.unchangedRegionBackground","The background color of unchanged blocks in the diff editor."));F("diffEditor.unchangedRegionForeground",{dark:"#a3a2a2",light:"#4d4c4c",hcDark:null,hcLight:null},m("diffEditor.unchangedRegionForeground","The foreground color of unchanged blocks in the diff editor."));F("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},m("diffEditor.unchangedCodeBackground","The background color of unchanged code in the diff editor."));const W$=F("list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},m("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),H$=F("list.focusForeground",{dark:null,light:null,hcDark:null,hcLight:null},m("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),$$=F("list.focusOutline",{dark:Ns,light:Ns,hcDark:ri,hcLight:ri},m("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),z$=F("list.focusAndSelectionOutline",{dark:null,light:null,hcDark:null,hcLight:null},m("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),Kr=F("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:J.fromHex("#0F4A85").transparent(.1)},m("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),or=F("list.activeSelectionForeground",{dark:J.white,light:J.white,hcDark:null,hcLight:null},m("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Vh=F("list.activeSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},m("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),U$=F("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:J.fromHex("#0F4A85").transparent(.1)},m("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),q$=F("list.inactiveSelectionForeground",{dark:null,light:null,hcDark:null,hcLight:null},m("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),j$=F("list.inactiveSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},m("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),K$=F("list.inactiveFocusBackground",{dark:null,light:null,hcDark:null,hcLight:null},m("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),G$=F("list.inactiveFocusOutline",{dark:null,light:null,hcDark:null,hcLight:null},m("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),n3=F("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:J.white.transparent(.1),hcLight:J.fromHex("#0F4A85").transparent(.1)},m("listHoverBackground","List/Tree background when hovering over items using the mouse.")),s3=F("list.hoverForeground",{dark:null,light:null,hcDark:null,hcLight:null},m("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),Z$=F("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},m("listDropBackground","List/Tree drag and drop background when moving items around using the mouse.")),Sp=F("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:Ns,hcLight:Ns},m("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree."));F("list.focusHighlightForeground",{dark:Sp,light:Lz(Kr,Sp,"#BBE7FF"),hcDark:Sp,hcLight:Sp},m("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));F("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},m("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer."));F("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},m("listErrorForeground","Foreground color of list items containing errors."));F("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},m("listWarningForeground","Foreground color of list items containing warnings."));const Y$=F("listFilterWidget.background",{light:Uc(Li,0),dark:To(Li,0),hcDark:Li,hcLight:Li},m("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),X$=F("listFilterWidget.outline",{dark:J.transparent,light:J.transparent,hcDark:"#f38518",hcLight:"#007ACC"},m("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),Q$=F("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:dt,hcLight:dt},m("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),J$=F("listFilterWidget.shadow",{dark:Wa,light:Wa,hcDark:Wa,hcLight:Wa},m("listFilterWidgetShadow","Shadow color of the type filter widget in lists and trees."));F("list.filterMatchBackground",{dark:Ha,light:Ha,hcDark:null,hcLight:null},m("listFilterMatchHighlight","Background color of the filtered match."));F("list.filterMatchBorder",{dark:Ed,light:Ed,hcDark:dt,hcLight:ri},m("listFilterMatchHighlightBorder","Border color of the filtered match."));const Wh=F("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},m("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),ez=F("tree.inactiveIndentGuidesStroke",{dark:Ee(Wh,.4),light:Ee(Wh,.4),hcDark:Ee(Wh,.4),hcLight:Ee(Wh,.4)},m("treeInactiveIndentGuidesStroke","Tree stroke color for the indentation guides that are not active.")),tz=F("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},m("tableColumnsBorder","Table border color between columns.")),iz=F("tree.tableOddRowsBackground",{dark:Ee(Ge,.04),light:Ee(Ge,.04),hcDark:null,hcLight:null},m("tableOddRowsBackgroundColor","Background color for odd table rows."));F("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},m("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized. "));const nz=F("checkbox.background",{dark:sr,light:sr,hcDark:sr,hcLight:sr},m("checkbox.background","Background color of checkbox widget."));F("checkbox.selectBackground",{dark:Li,light:Li,hcDark:Li,hcLight:Li},m("checkbox.select.background","Background color of checkbox widget when the element it's in is selected."));const sz=F("checkbox.foreground",{dark:Ur,light:Ur,hcDark:Ur,hcLight:Ur},m("checkbox.foreground","Foreground color of checkbox widget.")),oz=F("checkbox.border",{dark:Dd,light:Dd,hcDark:Dd,hcLight:Dd},m("checkbox.border","Border color of checkbox widget."));F("checkbox.selectBorder",{dark:yp,light:yp,hcDark:yp,hcLight:yp},m("checkbox.select.border","Border color of checkbox widget when the element it's in is selected."));const R2=F("quickInput.list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},"",void 0,m("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),tC=F("quickInputList.focusForeground",{dark:or,light:or,hcDark:or,hcLight:or},m("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),o3=F("quickInputList.focusIconForeground",{dark:Vh,light:Vh,hcDark:Vh,hcLight:Vh},m("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),iC=F("quickInputList.focusBackground",{dark:H2(R2,Kr),light:H2(R2,Kr),hcDark:null,hcLight:null},m("quickInput.listFocusBackground","Quick picker background color for the focused item.")),rz=F("menu.border",{dark:null,light:null,hcDark:dt,hcLight:dt},m("menuBorder","Border color of menus.")),az=F("menu.foreground",{dark:Ur,light:Ur,hcDark:Ur,hcLight:Ur},m("menuForeground","Foreground color of menu items.")),lz=F("menu.background",{dark:sr,light:sr,hcDark:sr,hcLight:sr},m("menuBackground","Background color of menu items.")),cz=F("menu.selectionForeground",{dark:or,light:or,hcDark:or,hcLight:or},m("menuSelectionForeground","Foreground color of the selected menu item in menus.")),dz=F("menu.selectionBackground",{dark:Kr,light:Kr,hcDark:Kr,hcLight:Kr},m("menuSelectionBackground","Background color of the selected menu item in menus.")),uz=F("menu.selectionBorder",{dark:null,light:null,hcDark:ri,hcLight:ri},m("menuSelectionBorder","Border color of the selected menu item in menus.")),hz=F("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:dt,hcLight:dt},m("menuSeparatorBackground","Color of a separator menu item in menus.")),P2=F("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},m("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse"));F("toolbar.hoverOutline",{dark:null,light:null,hcDark:ri,hcLight:ri},m("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse"));F("toolbar.activeBackground",{dark:To(P2,.1),light:Uc(P2,.1),hcDark:null,hcLight:null},m("toolbarActiveBackground","Toolbar background when holding the mouse over actions"));F("editor.snippetTabstopHighlightBackground",{dark:new J(new rt(124,124,124,.3)),light:new J(new rt(10,50,100,.2)),hcDark:new J(new rt(124,124,124,.3)),hcLight:new J(new rt(10,50,100,.2))},m("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop."));F("editor.snippetTabstopHighlightBorder",{dark:null,light:null,hcDark:null,hcLight:null},m("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop."));F("editor.snippetFinalTabstopHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},m("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet."));F("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new J(new rt(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},m("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet."));const fz=F("breadcrumb.foreground",{light:Ee(Ge,.8),dark:Ee(Ge,.8),hcDark:Ee(Ge,.8),hcLight:Ee(Ge,.8)},m("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),gz=F("breadcrumb.background",{light:Qi,dark:Qi,hcDark:Qi,hcLight:Qi},m("breadcrumbsBackground","Background color of breadcrumb items.")),O2=F("breadcrumb.focusForeground",{light:Uc(Ge,.2),dark:To(Ge,.1),hcDark:To(Ge,.1),hcLight:To(Ge,.1)},m("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),pz=F("breadcrumb.activeSelectionForeground",{light:Uc(Ge,.2),dark:To(Ge,.1),hcDark:To(Ge,.1),hcLight:To(Ge,.1)},m("breadcrumbsSelectedForeground","Color of selected breadcrumb items."));F("breadcrumbPicker.background",{light:Li,dark:Li,hcDark:Li,hcLight:Li},m("breadcrumbsSelectedBackground","Background color of breadcrumb item picker."));const r3=.5,F2=J.fromHex("#40C8AE").transparent(r3),B2=J.fromHex("#40A6FF").transparent(r3),V2=J.fromHex("#606060").transparent(.4),eo=.4,Nu=1,Id=F("merge.currentHeaderBackground",{dark:F2,light:F2,hcDark:null,hcLight:null},m("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);F("merge.currentContentBackground",{dark:Ee(Id,eo),light:Ee(Id,eo),hcDark:Ee(Id,eo),hcLight:Ee(Id,eo)},m("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const Nd=F("merge.incomingHeaderBackground",{dark:B2,light:B2,hcDark:null,hcLight:null},m("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);F("merge.incomingContentBackground",{dark:Ee(Nd,eo),light:Ee(Nd,eo),hcDark:Ee(Nd,eo),hcLight:Ee(Nd,eo)},m("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const Td=F("merge.commonHeaderBackground",{dark:V2,light:V2,hcDark:null,hcLight:null},m("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);F("merge.commonContentBackground",{dark:Ee(Td,eo),light:Ee(Td,eo),hcDark:Ee(Td,eo),hcLight:Ee(Td,eo)},m("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const Tu=F("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},m("mergeBorder","Border color on headers and the splitter in inline merge-conflicts."));F("editorOverviewRuler.currentContentForeground",{dark:Ee(Id,Nu),light:Ee(Id,Nu),hcDark:Tu,hcLight:Tu},m("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts."));F("editorOverviewRuler.incomingContentForeground",{dark:Ee(Nd,Nu),light:Ee(Nd,Nu),hcDark:Tu,hcLight:Tu},m("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts."));F("editorOverviewRuler.commonContentForeground",{dark:Ee(Td,Nu),light:Ee(Td,Nu),hcDark:Tu,hcLight:Tu},m("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts."));F("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:""},m("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0);F("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},m("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0);const Lp=F("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},m("minimapFindMatchHighlight","Minimap marker color for find matches."),!0);F("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},m("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0);const W2=F("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},m("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),mz=F("minimap.errorHighlight",{dark:new J(new rt(255,18,18,.7)),light:new J(new rt(255,18,18,.7)),hcDark:new J(new rt(255,50,50,1)),hcLight:"#B5200D"},m("minimapError","Minimap marker color for errors.")),_z=F("minimap.warningHighlight",{dark:Ts,light:Ts,hcDark:u0,hcLight:u0},m("overviewRuleWarning","Minimap marker color for warnings.")),bz=F("minimap.background",{dark:null,light:null,hcDark:null,hcLight:null},m("minimapBackground","Minimap background color.")),vz=F("minimap.foregroundOpacity",{dark:J.fromHex("#000f"),light:J.fromHex("#000f"),hcDark:J.fromHex("#000f"),hcLight:J.fromHex("#000f")},m("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.'));F("minimapSlider.background",{light:Ee(Ph,.5),dark:Ee(Ph,.5),hcDark:Ee(Ph,.5),hcLight:Ee(Ph,.5)},m("minimapSliderBackground","Minimap slider background color."));F("minimapSlider.hoverBackground",{light:Ee(Oh,.5),dark:Ee(Oh,.5),hcDark:Ee(Oh,.5),hcLight:Ee(Oh,.5)},m("minimapSliderHoverBackground","Minimap slider background color when hovering."));F("minimapSlider.activeBackground",{light:Ee(Fh,.5),dark:Ee(Fh,.5),hcDark:Ee(Fh,.5),hcLight:Ee(Fh,.5)},m("minimapSliderActiveBackground","Minimap slider background color when clicked on."));const wz=F("problemsErrorIcon.foreground",{dark:qr,light:qr,hcDark:qr,hcLight:qr},m("problemsErrorIconForeground","The color used for the problems error icon.")),Cz=F("problemsWarningIcon.foreground",{dark:Ts,light:Ts,hcDark:Ts,hcLight:Ts},m("problemsWarningIconForeground","The color used for the problems warning icon.")),yz=F("problemsInfoIcon.foreground",{dark:Do,light:Do,hcDark:Do,hcLight:Do},m("problemsInfoIconForeground","The color used for the problems info icon."));F("charts.foreground",{dark:Ge,light:Ge,hcDark:Ge,hcLight:Ge},m("chartsForeground","The foreground color used in charts."));F("charts.lines",{dark:Ee(Ge,.5),light:Ee(Ge,.5),hcDark:Ee(Ge,.5),hcLight:Ee(Ge,.5)},m("chartsLines","The color used for horizontal lines in charts."));F("charts.red",{dark:qr,light:qr,hcDark:qr,hcLight:qr},m("chartsRed","The red color used in chart visualizations."));F("charts.blue",{dark:Do,light:Do,hcDark:Do,hcLight:Do},m("chartsBlue","The blue color used in chart visualizations."));F("charts.yellow",{dark:Ts,light:Ts,hcDark:Ts,hcLight:Ts},m("chartsYellow","The yellow color used in chart visualizations."));F("charts.orange",{dark:Lp,light:Lp,hcDark:Lp,hcLight:Lp},m("chartsOrange","The orange color used in chart visualizations."));F("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},m("chartsGreen","The green color used in chart visualizations."));F("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},m("chartsPurple","The purple color used in chart visualizations."));function Sz(n,e){var t,i,s,o;switch(n.op){case 0:return(t=fo(n.value,e))===null||t===void 0?void 0:t.darken(n.factor);case 1:return(i=fo(n.value,e))===null||i===void 0?void 0:i.lighten(n.factor);case 2:return(s=fo(n.value,e))===null||s===void 0?void 0:s.transparent(n.factor);case 3:{const r=fo(n.background,e);return r?(o=fo(n.value,e))===null||o===void 0?void 0:o.makeOpaque(r):fo(n.value,e)}case 4:for(const r of n.values){const a=fo(r,e);if(a)return a}return;case 6:return fo(e.defines(n.if)?n.then:n.else,e);case 5:{const r=fo(n.value,e);if(!r)return;const a=fo(n.background,e);return a?r.isDarkerThan(a)?J.getLighterColor(r,a,n.factor).transparent(n.transparency):J.getDarkerColor(r,a,n.factor).transparent(n.transparency):r.transparent(n.factor*n.transparency)}default:throw kS()}}function Uc(n,e){return{op:0,value:n,factor:e}}function To(n,e){return{op:1,value:n,factor:e}}function Ee(n,e){return{op:2,value:n,factor:e}}function H2(...n){return{op:4,values:n}}function Lz(n,e,t){return{op:6,if:n,then:e,else:t}}function $2(n,e,t,i){return{op:5,value:n,background:e,factor:t,transparency:i}}function fo(n,e){if(n!==null){if(typeof n=="string")return n[0]==="#"?J.fromHex(n):e.getColor(n);if(n instanceof J)return n;if(typeof n=="object")return Sz(n,e)}}const a3="vscode://schemas/workbench-colors",l3=zi.as(O_.JSONContribution);l3.registerSchema(a3,K_.getColorSchema());const z2=new Sn(()=>l3.notifySchemaChanged(a3),200);K_.onDidChangeSchema(()=>{z2.isScheduled()||z2.schedule()});class Z_{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(){return new c3(this.x-window.scrollX,this.y-window.scrollY)}}class c3{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(){return new Z_(this.clientX+window.scrollX,this.clientY+window.scrollY)}}class xz{constructor(e,t,i,s){this.x=e,this.y=t,this.width=i,this.height=s,this._editorPagePositionBrand=void 0}}class Dz{constructor(e,t){this.x=e,this.y=t,this._positionRelativeToEditorBrand=void 0}}function KS(n){const e=ms(n);return new xz(e.left,e.top,e.width,e.height)}function GS(n,e,t){const i=e.width/n.offsetWidth,s=e.height/n.offsetHeight,o=(t.x-e.x)/i,r=(t.y-e.y)/s;return new Dz(o,r)}class gl extends Lo{constructor(e,t,i){super(e),this._editorMouseEventBrand=void 0,this.isFromPointerCapture=t,this.pos=new Z_(this.posx,this.posy),this.editorPos=KS(i),this.relativePos=GS(i,this.editorPos,this.pos)}}class kz{constructor(e){this._editorViewDomNode=e}_create(e){return new gl(e,!1,this._editorViewDomNode)}onContextMenu(e,t){return ee(e,"contextmenu",i=>{t(this._create(i))})}onMouseUp(e,t){return ee(e,"mouseup",i=>{t(this._create(i))})}onMouseDown(e,t){return ee(e,_e.MOUSE_DOWN,i=>{t(this._create(i))})}onPointerDown(e,t){return ee(e,_e.POINTER_DOWN,i=>{t(this._create(i),i.pointerId)})}onMouseLeave(e,t){return ee(e,_e.MOUSE_LEAVE,i=>{t(this._create(i))})}onMouseMove(e,t){return ee(e,"mousemove",i=>t(this._create(i)))}}class Ez{constructor(e){this._editorViewDomNode=e}_create(e){return new gl(e,!1,this._editorViewDomNode)}onPointerUp(e,t){return ee(e,"pointerup",i=>{t(this._create(i))})}onPointerDown(e,t){return ee(e,_e.POINTER_DOWN,i=>{t(this._create(i),i.pointerId)})}onPointerLeave(e,t){return ee(e,_e.POINTER_LEAVE,i=>{t(this._create(i))})}onPointerMove(e,t){return ee(e,"pointermove",i=>t(this._create(i)))}}class Iz extends oe{constructor(e){super(),this._editorViewDomNode=e,this._globalPointerMoveMonitor=this._register(new j_),this._keydownListener=null}startMonitoring(e,t,i,s,o){this._keydownListener=Ci(document,"keydown",r=>{r.toKeyCodeChord().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,r.browserEvent)},!0),this._globalPointerMoveMonitor.startMonitoring(e,t,i,r=>{s(new gl(r,!0,this._editorViewDomNode))},r=>{this._keydownListener.dispose(),o(r)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}class Fg extends oe{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let i=0,s=e.length;i<s;i++){const o=e[i];switch(o.type){case 0:this.onCompositionStart(o)&&(t=!0);break;case 1:this.onCompositionEnd(o)&&(t=!0);break;case 2:this.onConfigurationChanged(o)&&(t=!0);break;case 3:this.onCursorStateChanged(o)&&(t=!0);break;case 4:this.onDecorationsChanged(o)&&(t=!0);break;case 5:this.onFlushed(o)&&(t=!0);break;case 6:this.onFocusChanged(o)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(o)&&(t=!0);break;case 8:this.onLineMappingChanged(o)&&(t=!0);break;case 9:this.onLinesChanged(o)&&(t=!0);break;case 10:this.onLinesDeleted(o)&&(t=!0);break;case 11:this.onLinesInserted(o)&&(t=!0);break;case 12:this.onRevealRangeRequest(o)&&(t=!0);break;case 13:this.onScrollChanged(o)&&(t=!0);break;case 15:this.onTokensChanged(o)&&(t=!0);break;case 14:this.onThemeChanged(o)&&(t=!0);break;case 16:this.onTokensColorsChanged(o)&&(t=!0);break;case 17:this.onZonesChanged(o)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(o)}}t&&(this._shouldRender=!0)}}class ss extends Fg{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class ur{static write(e,t){e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){const i=[];let s=0;for(;e&&e!==document.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(i[s++]=this.read(e)),e=e.parentElement;const o=new Uint8Array(s);for(let r=0;r<s;r++)o[r]=i[s-r-1];return o}}class Nz{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const i=this._viewLayout.getCurrentViewport();this.scrollTop=i.top,this.scrollLeft=i.left,this.viewportWidth=i.width,this.viewportHeight=i.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e,t){return this._viewLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t){return this._viewLayout.getVerticalOffsetAfterLineNumber(e,t)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class Tz extends Nz{constructor(e,t,i){super(e,t),this._renderingContextBrand=void 0,this._viewLines=i}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class Az{constructor(e,t,i,s){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=i,this.continuesOnNextLine=s}}class Y_{static from(e){const t=new Array(e.length);for(let i=0,s=e.length;i<s;i++){const o=e[i];t[i]=new Y_(o.left,o.width)}return t}constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}toString(){return`[${this.left},${this.width}]`}}class hc{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}class Mz{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}class U2{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}class ym{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,i,s,o){const r=this._createRange();try{return r.setStart(e,t),r.setEnd(i,s),r.getClientRects()}catch{return null}finally{this._detachRange(r,o)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(hc.compare);const t=[];let i=0,s=e[0];for(let o=1,r=e.length;o<r;o++){const a=e[o];s.left+s.width+.9>=a.left?s.width=Math.max(s.width,a.left+a.width-s.left):(t[i++]=s,s=a)}return t[i++]=s,t}static _createHorizontalRangesFromClientRects(e,t,i){if(!e||e.length===0)return null;const s=[];for(let o=0,r=e.length;o<r;o++){const a=e[o];s[o]=new hc(Math.max(0,(a.left-t)/i),a.width/i)}return this._mergeAdjacentRanges(s)}static readHorizontalRanges(e,t,i,s,o,r){const l=e.children.length-1;if(0>l)return null;if(t=Math.min(l,Math.max(0,t)),s=Math.min(l,Math.max(0,s)),t===s&&i===o&&i===0&&!e.children[t].firstChild){const h=e.children[t].getClientRects();return r.markDidDomLayout(),this._createHorizontalRangesFromClientRects(h,r.clientRectDeltaLeft,r.clientRectScale)}t!==s&&s>0&&o===0&&(s--,o=1073741824);let c=e.children[t].firstChild,d=e.children[s].firstChild;if((!c||!d)&&(!c&&i===0&&t>0&&(c=e.children[t-1].firstChild,i=1073741824),!d&&o===0&&s>0&&(d=e.children[s-1].firstChild,o=1073741824)),!c||!d)return null;i=Math.min(c.textContent.length,Math.max(0,i)),o=Math.min(d.textContent.length,Math.max(0,o));const u=this._readClientRects(c,i,d,o,r.endNode);return r.markDidDomLayout(),this._createHorizontalRangesFromClientRects(u,r.clientRectDeltaLeft,r.clientRectScale)}}var As;(function(n){n.DARK="dark",n.LIGHT="light",n.HIGH_CONTRAST_DARK="hcDark",n.HIGH_CONTRAST_LIGHT="hcLight"})(As||(As={}));function tu(n){return n===As.HIGH_CONTRAST_DARK||n===As.HIGH_CONTRAST_LIGHT}function X_(n){return n===As.DARK||n===As.HIGH_CONTRAST_DARK}const Rz=function(){return Xh?!0:!(Cn||io||ia)}();let iu=!0;class q2{constructor(e,t){this.themeType=t;const i=e.options,s=i.get(49);i.get(37)==="off"?this.renderWhitespace=i.get(97):this.renderWhitespace="none",this.renderControlCharacters=i.get(92),this.spaceWidth=s.spaceWidth,this.middotWidth=s.middotWidth,this.wsmiddotWidth=s.wsmiddotWidth,this.useMonospaceOptimizations=s.isMonospace&&!i.get(32),this.canUseHalfwidthRightwardsArrow=s.canUseHalfwidthRightwardsArrow,this.lineHeight=i.get(65),this.stopRenderingLineAfter=i.get(115),this.fontLigatures=i.get(50)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}class Qo{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=tt(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return tu(this._options.themeType)||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,i,s){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const o=i.getViewLineRenderingData(e),r=this._options,a=ps.filter(o.inlineDecorations,e,o.minColumn,o.maxColumn);let l=null;if(tu(r.themeType)||this._options.renderWhitespace==="selection"){const h=i.selections;for(const f of h){if(f.endLineNumber<e||f.startLineNumber>e)continue;const g=f.startLineNumber===e?f.startColumn:o.minColumn,p=f.endLineNumber===e?f.endColumn:o.maxColumn;g<p&&(tu(r.themeType)&&a.push(new ps(g,p,"inline-selected-text",0)),this._options.renderWhitespace==="selection"&&(l||(l=[]),l.push(new g4(g-1,p-1))))}}const c=new yl(r.useMonospaceOptimizations,r.canUseHalfwidthRightwardsArrow,o.content,o.continuesWithWrappedLine,o.isBasicASCII,o.containsRTL,o.minColumn-1,o.tokens,a,o.tabSize,o.startVisibleColumn,r.spaceWidth,r.middotWidth,r.wsmiddotWidth,r.stopRenderingLineAfter,r.renderWhitespace,r.renderControlCharacters,r.fontLigatures!==Kn.OFF,l);if(this._renderedViewLine&&this._renderedViewLine.input.equals(c))return!1;s.appendString('<div style="top:'),s.appendString(String(t)),s.appendString("px;height:"),s.appendString(String(this._options.lineHeight)),s.appendString('px;" class="'),s.appendString(Qo.CLASS_NAME),s.appendString('">');const d=W_(c,s);s.appendString("</div>");let u=null;return iu&&Rz&&o.isBasicASCII&&r.useMonospaceOptimizations&&d.containsForeignElements===0&&(u=new xp(this._renderedViewLine?this._renderedViewLine.domNode:null,c,d.characterMapping)),u||(u=u3(this._renderedViewLine?this._renderedViewLine.domNode:null,c,d.characterMapping,d.containsRTL,d.containsForeignElements)),this._renderedViewLine=u,!0}layoutLine(e,t){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))}getWidth(e){return this._renderedViewLine?this._renderedViewLine.getWidth(e):0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof xp:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof xp?this._renderedViewLine.monospaceAssumptionsAreValid():iu}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof xp&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,i,s){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),i=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,i));const o=this._renderedViewLine.input.stopRenderingLineAfter;if(o!==-1&&t>o+1&&i>o+1)return new U2(!0,[new hc(this.getWidth(s),0)]);o!==-1&&t>o+1&&(t=o+1),o!==-1&&i>o+1&&(i=o+1);const r=this._renderedViewLine.getVisibleRangesForRange(e,t,i,s);return r&&r.length>0?new U2(!1,r):null}getColumnOfNodeOffset(e,t){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t):1}}Qo.CLASS_NAME="view-line";class xp{constructor(e,t,i){this._cachedWidth=-1,this.domNode=e,this.input=t;const s=Math.floor(t.lineContent.length/300);if(s>0){this._keyColumnPixelOffsetCache=new Float32Array(s);for(let o=0;o<s;o++)this._keyColumnPixelOffsetCache[o]=-1}else this._keyColumnPixelOffsetCache=null;this._characterMapping=i,this._charWidth=t.spaceWidth}getWidth(e){if(!this.domNode||this.input.lineContent.length<300){const t=this._characterMapping.getHorizontalOffset(this._characterMapping.length);return Math.round(this._charWidth*t)}return this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e==null||e.markDidDomLayout()),this._cachedWidth}getWidthIsFast(){return this.input.lineContent.length<300||this._cachedWidth!==-1}monospaceAssumptionsAreValid(){if(!this.domNode)return iu;if(this.input.lineContent.length<300){const e=this.getWidth(null),t=this.domNode.domNode.firstChild.offsetWidth;Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),iu=!1)}return iu}toSlowRenderedLine(){return u3(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,i,s){const o=this._getColumnPixelOffset(e,t,s),r=this._getColumnPixelOffset(e,i,s);return[new hc(o,r-o)]}_getColumnPixelOffset(e,t,i){if(t<=300){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const s=Math.floor((t-1)/300)-1,o=(s+1)*300+1;let r=-1;if(this._keyColumnPixelOffsetCache&&(r=this._keyColumnPixelOffsetCache[s],r===-1&&(r=this._actualReadPixelOffset(e,o,i),this._keyColumnPixelOffsetCache[s]=r)),r===-1){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const a=this._characterMapping.getHorizontalOffset(o),l=this._characterMapping.getHorizontalOffset(t);return r+this._charWidth*(l-a)}_getReadingTarget(e){return e.domNode.firstChild}_actualReadPixelOffset(e,t,i){if(!this.domNode)return-1;const s=this._characterMapping.getDomPosition(t),o=ym.readHorizontalRanges(this._getReadingTarget(this.domNode),s.partIndex,s.charIndex,s.partIndex,s.charIndex,i);return!o||o.length===0?-1:o[0].left}getColumnOfNodeOffset(e,t){return h3(this._characterMapping,e,t)}}class d3{constructor(e,t,i,s,o){if(this.domNode=e,this.input=t,this._characterMapping=i,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=o,this._cachedWidth=-1,this._pixelOffsetCache=null,!s||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let r=0,a=this._characterMapping.length;r<=a;r++)this._pixelOffsetCache[r]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(e){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e==null||e.markDidDomLayout()),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,i,s){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const o=this._readPixelOffset(this.domNode,e,t,s);if(o===-1)return null;const r=this._readPixelOffset(this.domNode,e,i,s);return r===-1?null:[new hc(o,r-o)]}return this._readVisibleRangesForRange(this.domNode,e,t,i,s)}_readVisibleRangesForRange(e,t,i,s,o){if(i===s){const r=this._readPixelOffset(e,t,i,o);return r===-1?null:[new hc(r,0)]}else return this._readRawVisibleRangesForRange(e,i,s,o)}_readPixelOffset(e,t,i,s){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth(s);const o=this._getReadingTarget(e);return o.firstChild?(s.markDidDomLayout(),o.firstChild.offsetWidth):0}if(this._pixelOffsetCache!==null){const o=this._pixelOffsetCache[i];if(o!==-1)return o;const r=this._actualReadPixelOffset(e,t,i,s);return this._pixelOffsetCache[i]=r,r}return this._actualReadPixelOffset(e,t,i,s)}_actualReadPixelOffset(e,t,i,s){if(this._characterMapping.length===0){const l=ym.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,s);return!l||l.length===0?-1:l[0].left}if(i===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth(s);const o=this._characterMapping.getDomPosition(i),r=ym.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,o.partIndex,o.charIndex,s);if(!r||r.length===0)return-1;const a=r[0].left;if(this.input.isBasicASCII){const l=this._characterMapping.getHorizontalOffset(i),c=Math.round(this.input.spaceWidth*l);if(Math.abs(c-a)<=1)return c}return a}_readRawVisibleRangesForRange(e,t,i,s){if(t===1&&i===this._characterMapping.length)return[new hc(0,this.getWidth(s))];const o=this._characterMapping.getDomPosition(t),r=this._characterMapping.getDomPosition(i);return ym.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,r.partIndex,r.charIndex,s)}getColumnOfNodeOffset(e,t){return h3(this._characterMapping,e,t)}}class Pz extends d3{_readVisibleRangesForRange(e,t,i,s,o){const r=super._readVisibleRangesForRange(e,t,i,s,o);if(!r||r.length===0||i===s||i===1&&s===this._characterMapping.length)return r;if(!this.input.containsRTL){const a=this._readPixelOffset(e,t,s,o);if(a!==-1){const l=r[r.length-1];l.left<a&&(l.width=a-l.left)}}return r}}const u3=function(){return ac?Oz:Fz}();function Oz(n,e,t,i,s){return new Pz(n,e,t,i,s)}function Fz(n,e,t,i,s){return new d3(n,e,t,i,s)}function h3(n,e,t){const i=e.textContent.length;let s=-1;for(;e;)e=e.previousSibling,s++;return n.getColumn(new p4(s,t),i)}class Si{static _nextVisibleColumn(e,t,i){return e===9?Si.nextRenderTabStop(t,i):cl(e)||SS(e)?t+2:t+1}static visibleColumnFromColumn(e,t,i){const s=Math.min(t-1,e.length),o=e.substring(0,s),r=new Xm(o);let a=0;for(;!r.eol();){const l=Ym(o,s,r.offset);r.nextGraphemeLength(),a=this._nextVisibleColumn(l,a,i)}return a}static columnFromVisibleColumn(e,t,i){if(t<=0)return 1;const s=e.length,o=new Xm(e);let r=0,a=1;for(;!o.eol();){const l=Ym(e,s,o.offset);o.nextGraphemeLength();const c=this._nextVisibleColumn(l,r,i),d=o.offset+1;if(c>=t){const u=t-r;return c-t<u?d:a}r=c,a=d}return s+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}class zf{static whitespaceVisibleColumn(e,t,i){const s=e.length;let o=0,r=-1,a=-1;for(let l=0;l<s;l++){if(l===t)return[r,a,o];switch(o%i===0&&(r=l,a=o),e.charCodeAt(l)){case 32:o+=1;break;case 9:o=Si.nextRenderTabStop(o,i);break;default:return[-1,-1,-1]}}return t===s?[r,a,o]:[-1,-1,-1]}static atomicPosition(e,t,i,s){const o=e.length,[r,a,l]=zf.whitespaceVisibleColumn(e,t,i);if(l===-1)return-1;let c;switch(s){case 0:c=!0;break;case 1:c=!1;break;case 2:if(l%i===0)return t;c=l%i<=i/2;break}if(c){if(r===-1)return-1;let h=a;for(let f=r;f<o;++f){if(h===a+i)return r;switch(e.charCodeAt(f)){case 32:h+=1;break;case 9:h=Si.nextRenderTabStop(h,i);break;default:return-1}}return h===a+i?r:-1}const d=Si.nextRenderTabStop(l,i);let u=l;for(let h=t;h<o;h++){if(u===d)return h;switch(e.charCodeAt(h)){case 32:u+=1;break;case 9:u=Si.nextRenderTabStop(u,i);break;default:return-1}}return u===d?o:-1}}class _a{constructor(e=null){this.hitTarget=e,this.type=0}}class f3{constructor(e,t,i){this.position=e,this.spanNode=t,this.injectedText=i,this.type=1}}var jl;(function(n){function e(t,i,s){const o=t.getPositionFromDOMInfo(i,s);return o?new f3(o,i,null):new _a(i)}n.createFromDOMInfo=e})(jl||(jl={}));class Bz{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class cn{static _deduceRage(e,t=null){return!t&&e?new $(e.lineNumber,e.column,e.lineNumber,e.column):t??null}static createUnknown(e,t,i){return{type:0,element:e,mouseColumn:t,position:i,range:this._deduceRage(i)}}static createTextarea(e,t){return{type:1,element:e,mouseColumn:t,position:null,range:null}}static createMargin(e,t,i,s,o,r){return{type:e,element:t,mouseColumn:i,position:s,range:o,detail:r}}static createViewZone(e,t,i,s,o){return{type:e,element:t,mouseColumn:i,position:s,range:this._deduceRage(s),detail:o}}static createContentText(e,t,i,s,o){return{type:6,element:e,mouseColumn:t,position:i,range:this._deduceRage(i,s),detail:o}}static createContentEmpty(e,t,i,s){return{type:7,element:e,mouseColumn:t,position:i,range:this._deduceRage(i),detail:s}}static createContentWidget(e,t,i){return{type:9,element:e,mouseColumn:t,position:null,range:null,detail:i}}static createScrollbar(e,t,i){return{type:11,element:e,mouseColumn:t,position:i,range:this._deduceRage(i)}}static createOverlayWidget(e,t,i){return{type:12,element:e,mouseColumn:t,position:null,range:null,detail:i}}static createOutsideEditor(e,t,i,s){return{type:13,element:null,mouseColumn:e,position:t,range:this._deduceRage(t),outsidePosition:i,outsideDistance:s}}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}}class os{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===6}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===7}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===7}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===5}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===8}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowGuard(e){return e.length>=1&&e[0]===3}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}}class Au{constructor(e,t,i){this.viewModel=e.viewModel;const s=e.configuration.options;this.layoutInfo=s.get(142),this.viewDomNode=t.viewDomNode,this.lineHeight=s.get(65),this.stickyTabStops=s.get(114),this.typicalHalfwidthCharacterWidth=s.get(49).typicalHalfwidthCharacterWidth,this.lastRenderData=i,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return Au.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const i=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(i){const s=i.verticalOffset+i.height/2,o=e.viewModel.getLineCount();let r=null,a,l=null;return i.afterLineNumber!==o&&(l=new Y(i.afterLineNumber+1,1)),i.afterLineNumber>0&&(r=new Y(i.afterLineNumber,e.viewModel.getLineMaxColumn(i.afterLineNumber))),l===null?a=r:r===null?a=l:t<s?a=r:a=l,{viewZoneId:i.id,afterLineNumber:i.afterLineNumber,positionBefore:r,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const s=this._context.viewModel.getLineCount(),o=this._context.viewModel.getLineMaxColumn(s);return{range:new $(s,o,s,o),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),i=this._context.viewModel.getLineMaxColumn(t);return{range:new $(t,1,t,i),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return Au._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,i){for(;e&&e!==document.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===i)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class Vz{constructor(e,t,i,s){this.editorPos=t,this.pos=i,this.relativePos=s,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+this.relativePos.x-e.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<e.layoutInfo.contentLeft&&this.relativePos.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,qi._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class ZS extends Vz{constructor(e,t,i,s,o){super(e,t,i,s),this._ctx=e,o?(this.target=o,this.targetPath=ur.collect(o,e.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array(0))}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}_getMouseColumn(e=null){return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?Si.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(e=null){return cn.createUnknown(this.target,this._getMouseColumn(e),e)}fulfillTextarea(){return cn.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(e,t,i,s){return cn.createMargin(e,this.target,this._getMouseColumn(t),t,i,s)}fulfillViewZone(e,t,i){return cn.createViewZone(e,this.target,this._getMouseColumn(t),t,i)}fulfillContentText(e,t,i){return cn.createContentText(this.target,this._getMouseColumn(e),e,t,i)}fulfillContentEmpty(e,t){return cn.createContentEmpty(this.target,this._getMouseColumn(e),e,t)}fulfillContentWidget(e){return cn.createContentWidget(this.target,this._getMouseColumn(),e)}fulfillScrollbar(e){return cn.createScrollbar(this.target,this._getMouseColumn(e),e)}fulfillOverlayWidget(e){return cn.createOverlayWidget(this.target,this._getMouseColumn(),e)}withTarget(e){return new ZS(this._ctx,this.editorPos,this.pos,this.relativePos,e)}}const j2={isAfterLines:!0};function _b(n){return{isAfterLines:!1,horizontalDistanceToText:n}}class qi{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,i=ur.collect(t,this._viewHelper.viewDomNode);return!!(os.isChildOfContentWidgets(i)||os.isChildOfOverflowingContentWidgets(i)||os.isChildOfOverlayWidgets(i))}createMouseTarget(e,t,i,s,o){const r=new Au(this._context,this._viewHelper,e),a=new ZS(r,t,i,s,o);try{const l=qi._createMouseTarget(r,a,!1);if(l.type===6&&r.stickyTabStops&&l.position!==null){const c=qi._snapToSoftTabBoundary(l.position,r.viewModel),d=$.fromPositions(c,c).plusRange(l.range);return a.fulfillContentText(c,d,l.detail)}return l}catch{return a.fulfillUnknown()}}static _createMouseTarget(e,t,i){if(t.target===null){if(i)return t.fulfillUnknown();const r=qi._doHitTest(e,t);return r.type===1?qi.createMouseTargetFromHitTestPosition(e,t,r.spanNode,r.position,r.injectedText):this._createMouseTarget(e,t.withTarget(r.hitTarget),!0)}const s=t;let o=null;return!os.isChildOfOverflowGuard(t.targetPath)&&!os.isChildOfOverflowingContentWidgets(t.targetPath)&&(o=o||t.fulfillUnknown()),o=o||qi._hitTestContentWidget(e,s),o=o||qi._hitTestOverlayWidget(e,s),o=o||qi._hitTestMinimap(e,s),o=o||qi._hitTestScrollbarSlider(e,s),o=o||qi._hitTestViewZone(e,s),o=o||qi._hitTestMargin(e,s),o=o||qi._hitTestViewCursor(e,s),o=o||qi._hitTestTextArea(e,s),o=o||qi._hitTestViewLines(e,s,i),o=o||qi._hitTestScrollbar(e,s),o||t.fulfillUnknown()}static _hitTestContentWidget(e,t){if(os.isChildOfContentWidgets(t.targetPath)||os.isChildOfOverflowingContentWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfillContentWidget(i):t.fulfillUnknown()}return null}static _hitTestOverlayWidget(e,t){if(os.isChildOfOverlayWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfillOverlayWidget(i):t.fulfillUnknown()}return null}static _hitTestViewCursor(e,t){if(t.target){const i=e.lastRenderData.lastViewCursorsRenderData;for(const s of i)if(t.target===s.domNode)return t.fulfillContentText(s.position,null,{mightBeForeignElement:!1,injectedText:null})}if(t.isInContentArea){const i=e.lastRenderData.lastViewCursorsRenderData,s=t.mouseContentHorizontalOffset,o=t.mouseVerticalOffset;for(const r of i){if(s<r.contentLeft||s>r.contentLeft+r.width)continue;const a=e.getVerticalOffsetForLineNumber(r.position.lineNumber);if(a<=o&&o<=a+r.height)return t.fulfillContentText(r.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(e,t){const i=e.getZoneAtCoord(t.mouseVerticalOffset);if(i){const s=t.isInContentArea?8:5;return t.fulfillViewZone(s,i.position,i)}return null}static _hitTestTextArea(e,t){return os.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):t.fulfillTextarea():null}static _hitTestMargin(e,t){if(t.isInMarginArea){const i=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),s=i.range.getStartPosition();let o=Math.abs(t.relativePos.x);const r={isAfterLines:i.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:o};return o-=e.layoutInfo.glyphMarginLeft,o<=e.layoutInfo.glyphMarginWidth?t.fulfillMargin(2,s,i.range,r):(o-=e.layoutInfo.glyphMarginWidth,o<=e.layoutInfo.lineNumbersWidth?t.fulfillMargin(3,s,i.range,r):(o-=e.layoutInfo.lineNumbersWidth,t.fulfillMargin(4,s,i.range,r)))}return null}static _hitTestViewLines(e,t,i){if(!os.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfillContentEmpty(new Y(1,1),j2);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const o=e.viewModel.getLineCount(),r=e.viewModel.getLineMaxColumn(o);return t.fulfillContentEmpty(new Y(o,r),j2)}if(i){if(os.isStrictChildOfViewLines(t.targetPath)){const o=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.viewModel.getLineLength(o)===0){const a=e.getLineWidth(o),l=_b(t.mouseContentHorizontalOffset-a);return t.fulfillContentEmpty(new Y(o,1),l)}const r=e.getLineWidth(o);if(t.mouseContentHorizontalOffset>=r){const a=_b(t.mouseContentHorizontalOffset-r),l=new Y(o,e.viewModel.getLineMaxColumn(o));return t.fulfillContentEmpty(l,a)}}return t.fulfillUnknown()}const s=qi._doHitTest(e,t);return s.type===1?qi.createMouseTargetFromHitTestPosition(e,t,s.spanNode,s.position,s.injectedText):this._createMouseTarget(e,t.withTarget(s.hitTarget),!0)}static _hitTestMinimap(e,t){if(os.isChildOfMinimap(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new Y(i,s))}return null}static _hitTestScrollbarSlider(e,t){if(os.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const i=t.target.className;if(i&&/\b(slider|scrollbar)\b/.test(i)){const s=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),o=e.viewModel.getLineMaxColumn(s);return t.fulfillScrollbar(new Y(s,o))}}return null}static _hitTestScrollbar(e,t){if(os.isChildOfScrollableElement(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new Y(i,s))}return null}getMouseColumn(e){const t=this._context.configuration.options,i=t.get(142),s=this._context.viewLayout.getCurrentScrollLeft()+e.x-i.contentLeft;return qi._getMouseColumn(s,t.get(49).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,i,s,o){const r=s.lineNumber,a=s.column,l=e.getLineWidth(r);if(t.mouseContentHorizontalOffset>l){const v=_b(t.mouseContentHorizontalOffset-l);return t.fulfillContentEmpty(s,v)}const c=e.visibleRangeForPosition(r,a);if(!c)return t.fulfillUnknown(s);const d=c.left;if(Math.abs(t.mouseContentHorizontalOffset-d)<1)return t.fulfillContentText(s,null,{mightBeForeignElement:!!o,injectedText:o});const u=[];if(u.push({offset:c.left,column:a}),a>1){const v=e.visibleRangeForPosition(r,a-1);v&&u.push({offset:v.left,column:a-1})}const h=e.viewModel.getLineMaxColumn(r);if(a<h){const v=e.visibleRangeForPosition(r,a+1);v&&u.push({offset:v.left,column:a+1})}u.sort((v,b)=>v.offset-b.offset);const f=t.pos.toClientCoordinates(),g=i.getBoundingClientRect(),p=g.left<=f.clientX&&f.clientX<=g.right;let _=null;for(let v=1;v<u.length;v++){const b=u[v-1],w=u[v];if(b.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=w.offset){_=new $(r,b.column,r,w.column);const C=Math.abs(b.offset-t.mouseContentHorizontalOffset),S=Math.abs(w.offset-t.mouseContentHorizontalOffset);s=C<S?new Y(r,b.column):new Y(r,w.column);break}}return t.fulfillContentText(s,_,{mightBeForeignElement:!p||!!o,injectedText:o})}static _doHitTestWithCaretRangeFromPoint(e,t){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.getVerticalOffsetForLineNumber(i),o=s+e.lineHeight;if(!(i===e.viewModel.getLineCount()&&t.mouseVerticalOffset>o)){const a=Math.floor((s+o)/2);let l=t.pos.y+(a-t.mouseVerticalOffset);l<=t.editorPos.y&&(l=t.editorPos.y+1),l>=t.editorPos.y+t.editorPos.height&&(l=t.editorPos.y+t.editorPos.height-1);const c=new Z_(t.pos.x,l),d=this._actualDoHitTestWithCaretRangeFromPoint(e,c.toClientCoordinates());if(d.type===1)return d}return this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates())}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const i=Du(e.viewDomNode);let s;if(i?typeof i.caretRangeFromPoint>"u"?s=Wz(i,t.clientX,t.clientY):s=i.caretRangeFromPoint(t.clientX,t.clientY):s=document.caretRangeFromPoint(t.clientX,t.clientY),!s||!s.startContainer)return new _a;const o=s.startContainer;if(o.nodeType===o.TEXT_NODE){const r=o.parentNode,a=r?r.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===Qo.CLASS_NAME?jl.createFromDOMInfo(e,r,s.startOffset):new _a(o.parentNode)}else if(o.nodeType===o.ELEMENT_NODE){const r=o.parentNode,a=r?r.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===Qo.CLASS_NAME?jl.createFromDOMInfo(e,o,o.textContent.length):new _a(o)}return new _a}static _doHitTestWithCaretPositionFromPoint(e,t){const i=document.caretPositionFromPoint(t.clientX,t.clientY);if(i.offsetNode.nodeType===i.offsetNode.TEXT_NODE){const s=i.offsetNode.parentNode,o=s?s.parentNode:null,r=o?o.parentNode:null;return(r&&r.nodeType===r.ELEMENT_NODE?r.className:null)===Qo.CLASS_NAME?jl.createFromDOMInfo(e,i.offsetNode.parentNode,i.offset):new _a(i.offsetNode.parentNode)}if(i.offsetNode.nodeType===i.offsetNode.ELEMENT_NODE){const s=i.offsetNode.parentNode,o=s&&s.nodeType===s.ELEMENT_NODE?s.className:null,r=s?s.parentNode:null,a=r&&r.nodeType===r.ELEMENT_NODE?r.className:null;if(o===Qo.CLASS_NAME){const l=i.offsetNode.childNodes[Math.min(i.offset,i.offsetNode.childNodes.length-1)];if(l)return jl.createFromDOMInfo(e,l,0)}else if(a===Qo.CLASS_NAME)return jl.createFromDOMInfo(e,i.offsetNode,0)}return new _a(i.offsetNode)}static _snapToSoftTabBoundary(e,t){const i=t.getLineContent(e.lineNumber),{tabSize:s}=t.model.getOptions(),o=zf.atomicPosition(i,e.column-1,s,2);return o!==-1?new Y(e.lineNumber,o+1):e}static _doHitTest(e,t){let i=new _a;if(typeof document.caretRangeFromPoint=="function"?i=this._doHitTestWithCaretRangeFromPoint(e,t):document.caretPositionFromPoint&&(i=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates())),i.type===1){const s=e.viewModel.getInjectedTextAt(i.position),o=e.viewModel.normalizePosition(i.position,2);(s||!o.equals(i.position))&&(i=new f3(o,i.spanNode,s))}return i}}function Wz(n,e,t){const i=document.createRange();let s=n.elementFromPoint(e,t);if(s!==null){for(;s&&s.firstChild&&s.firstChild.nodeType!==s.firstChild.TEXT_NODE&&s.lastChild&&s.lastChild.firstChild;)s=s.lastChild;const o=s.getBoundingClientRect(),r=window.getComputedStyle(s,null).getPropertyValue("font-style"),a=window.getComputedStyle(s,null).getPropertyValue("font-variant"),l=window.getComputedStyle(s,null).getPropertyValue("font-weight"),c=window.getComputedStyle(s,null).getPropertyValue("font-size"),d=window.getComputedStyle(s,null).getPropertyValue("line-height"),u=window.getComputedStyle(s,null).getPropertyValue("font-family"),h=`${r} ${a} ${l} ${c}/${d} ${u}`,f=s.innerText;let g=o.left,p=0,_;if(e>o.left+o.width)p=f.length;else{const v=Jl.getInstance();for(let b=0;b<f.length+1;b++){if(_=v.getCharWidth(f.charAt(b),h)/2,g+=_,e<g){p=b;break}g+=_}}i.setStart(s.firstChild,p),i.setEnd(s.firstChild,p)}return i}class Jl{static getInstance(){return Jl._INSTANCE||(Jl._INSTANCE=new Jl),Jl._INSTANCE}constructor(){this._cache={},this._canvas=document.createElement("canvas")}getCharWidth(e,t){const i=e+t;if(this._cache[i])return this._cache[i];const s=this._canvas.getContext("2d");s.font=t;const r=s.measureText(e).width;return this._cache[i]=r,r}}Jl._INSTANCE=null;let qc=class extends oe{onclick(e,t){this._register(ee(e,_e.CLICK,i=>t(new Lo(i))))}onmousedown(e,t){this._register(ee(e,_e.MOUSE_DOWN,i=>t(new Lo(i))))}onmouseover(e,t){this._register(ee(e,_e.MOUSE_OVER,i=>t(new Lo(i))))}onmouseleave(e,t){this._register(ee(e,_e.MOUSE_LEAVE,i=>t(new Lo(i))))}onkeydown(e,t){this._register(ee(e,_e.KEY_DOWN,i=>t(new Wt(i))))}onkeyup(e,t){this._register(ee(e,_e.KEY_UP,i=>t(new Wt(i))))}oninput(e,t){this._register(ee(e,_e.INPUT,t))}onblur(e,t){this._register(ee(e,_e.BLUR,t))}onfocus(e,t){this._register(ee(e,_e.FOCUS,t))}ignoreGesture(e){return Ot.ignoreTarget(e)}};const Mu=11;class Hz extends qc{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...je.asClassNameArray(e.icon)),this.domNode.style.position="absolute",this.domNode.style.width=Mu+"px",this.domNode.style.height=Mu+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new j_),this._register(Ci(this.bgDomNode,_e.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(Ci(this.domNode,_e.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new Tg),this._pointerdownScheduleRepeatTimer=this._register(new zc)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24)};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,i=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}}class $z extends oe{constructor(e,t,i){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=i,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new zc)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{var e;(e=this._domNode)===null||e===void 0||e.setClassName(this._visibleClassName)},0))}_hide(e){var t;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,(t=this._domNode)===null||t===void 0||t.setClassName(this._invisibleClassName+(e?" fade":"")))}}const zz=140;class g3 extends qc{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new $z(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new j_),this._shouldRender=!0,this.domNode=tt(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(ee(this.domNode.domNode,_e.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){const t=this._register(new Hz(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,i,s){this.slider=tt(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof i=="number"&&this.slider.setWidth(i),typeof s=="number"&&this.slider.setHeight(s),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(ee(this.slider.domNode,_e.POINTER_DOWN,o=>{o.button===0&&(o.preventDefault(),this._sliderPointerDown(o))})),this.onclick(this.slider.domNode,o=>{o.leftButton&&o.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){const t=this.domNode.domNode.getClientRects()[0].top,i=t+this._scrollbarState.getSliderPosition(),s=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),o=this._sliderPointerPosition(e);i<=o&&o<=s?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,i;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,i=e.offsetY;else{const o=ms(this.domNode.domNode);t=e.pageX-o.left,i=e.pageY-o.top}const s=this._pointerDownRelativePosition(t,i);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(s):this._scrollbarState.getDesiredScrollPositionFromOffset(s)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._sliderPointerPosition(e),i=this._sliderOrthogonalPointerPosition(e),s=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,o=>{const r=this._sliderOrthogonalPointerPosition(o),a=Math.abs(r-i);if(is&&a>zz){this._setDesiredScrollPositionNow(s.getScrollPosition());return}const c=this._sliderPointerPosition(o)-t;this._setDesiredScrollPositionNow(s.getDesiredScrollPositionFromDelta(c))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}const Uz=20;class Ru{constructor(e,t,i,s,o,r){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(i),this._arrowSize=Math.round(e),this._visibleSize=s,this._scrollSize=o,this._scrollPosition=r,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new Ru(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,i,s,o){const r=Math.max(0,i-e),a=Math.max(0,r-2*t),l=s>0&&s>i;if(!l)return{computedAvailableSize:Math.round(r),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const c=Math.round(Math.max(Uz,Math.floor(i*a/s))),d=(a-c)/(s-i),u=o*d;return{computedAvailableSize:Math.round(r),computedIsNeeded:l,computedSliderSize:Math.round(c),computedSliderRatio:d,computedSliderPosition:Math.round(u)}}_refreshComputedValues(){const e=Ru._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let i=this._scrollPosition;return t<this._computedSliderPosition?i-=this._visibleSize:i+=this._visibleSize,i}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}class qz extends g3{constructor(e,t,i){const s=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new Ru(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,s.width,s.scrollWidth,o.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const r=(t.arrowSize-Mu)/2,a=(t.horizontalScrollbarSize-Mu)/2;this._createArrow({className:"scra",icon:we.scrollbarButtonLeft,top:a,left:r,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Dc(null,1,0))}),this._createArrow({className:"scra",icon:we.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:r,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Dc(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}class jz extends g3{constructor(e,t,i){const s=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new Ru(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,s.height,s.scrollHeight,o.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const r=(t.arrowSize-Mu)/2,a=(t.verticalScrollbarSize-Mu)/2;this._createArrow({className:"scra",icon:we.scrollbarButtonUp,top:r,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Dc(null,0,1))}),this._createArrow({className:"scra",icon:we.scrollbarButtonDown,top:void 0,left:a,bottom:r,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Dc(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}class g0{constructor(e,t,i,s,o,r,a){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(t=t|0,i=i|0,s=s|0,o=o|0,r=r|0,a=a|0),this.rawScrollLeft=s,this.rawScrollTop=a,t<0&&(t=0),s+t>i&&(s=i-t),s<0&&(s=0),o<0&&(o=0),a+o>r&&(a=r-o),a<0&&(a=0),this.width=t,this.scrollWidth=i,this.scrollLeft=s,this.height=o,this.scrollHeight=r,this.scrollTop=a}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new g0(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new g0(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const i=this.width!==e.width,s=this.scrollWidth!==e.scrollWidth,o=this.scrollLeft!==e.scrollLeft,r=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:i,scrollWidthChanged:s,scrollLeftChanged:o,heightChanged:r,scrollHeightChanged:a,scrollTopChanged:l}}}class Bg extends oe{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new q),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new g0(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){var i;const s=this._state.withScrollDimensions(e,t);this._setState(s,!!this._smoothScrolling),(i=this._smoothScrolling)===null||i===void 0||i.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const i=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===i.scrollLeft&&this._smoothScrolling.to.scrollTop===i.scrollTop)return;let s;t?s=new Uf(this._smoothScrolling.from,i,this._smoothScrolling.startTime,this._smoothScrolling.duration):s=this._smoothScrolling.combine(this._state,i,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=s}else{const i=this._state.withScrollPosition(e);this._smoothScrolling=Uf.start(this._state,i,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const i=this._state;i.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(i,t)))}}class K2{constructor(e,t,i){this.scrollLeft=e,this.scrollTop=t,this.isDone=i}}function bb(n,e){const t=e-n;return function(i){return n+t*Zz(i)}}function Kz(n,e,t){return function(i){return i<t?n(i/t):e((i-t)/(1-t))}}class Uf{constructor(e,t,i,s){this.from=e,this.to=t,this.duration=s,this.startTime=i,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,i){if(Math.abs(e-t)>2.5*i){let o,r;return e<t?(o=e+.75*i,r=t-.75*i):(o=e-.75*i,r=t+.75*i),Kz(bb(e,o),bb(r,t),.33)}return bb(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const i=this.scrollLeft(t),s=this.scrollTop(t);return new K2(i,s,!1)}return new K2(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,i){return Uf.start(e,t,i)}static start(e,t,i){i=i+10;const s=Date.now()-10;return new Uf(e,t,s,i)}}function Gz(n){return Math.pow(n,3)}function Zz(n){return 1-Gz(1-n)}const Yz=500,G2=50;class Xz{constructor(e,t,i){this.timestamp=e,this.deltaX=t,this.deltaY=i,this.score=0}}class p0{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,i=1,s=this._rear;do{const o=s===this._front?e:Math.pow(2,-i);if(e-=o,t+=this._memory[s].score*o,s===this._front)break;s=(this._capacity+s-1)%this._capacity,i++}while(!0);return t<=.5}acceptStandardWheelEvent(e){const t=window.devicePixelRatio/V6();is||Cn?this.accept(Date.now(),e.deltaX/t,e.deltaY/t):this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,t,i){const s=new Xz(e,t,i);s.score=this._computeScore(s),this._front===-1&&this._rear===-1?(this._memory[0]=s,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=s)}_computeScore(e){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let t=.5;return this._front===-1&&this._rear===-1||this._memory[this._rear],(!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(t+=.25),Math.min(Math.max(t,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}}p0.INSTANCE=new p0;class YS extends qc{get options(){return this._options}constructor(e,t,i){super(),this._onScroll=this._register(new q),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new q),e.style.overflow="hidden",this._options=Jz(t),this._scrollable=i,this._register(this._scrollable.onScroll(o=>{this._onWillScroll.fire(o),this._onDidScroll(o),this._onScroll.fire(o)}));const s={onMouseWheel:o=>this._onMouseWheel(o),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new jz(this._scrollable,this._options,s)),this._horizontalScrollbar=this._register(new qz(this._scrollable,this._options,s)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=tt(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=tt(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=tt(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,o=>this._onMouseOver(o)),this.onmouseleave(this._listenOnDomNode,o=>this._onMouseLeave(o)),this._hideTimeout=this._register(new zc),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=ci(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,gt&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new Dc(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=ci(this._mouseWheelToDispose),e)){const i=s=>{this._onMouseWheel(new Dc(s))};this._mouseWheelToDispose.push(ee(this._listenOnDomNode,_e.MOUSE_WHEEL,i,{passive:!1}))}}_onMouseWheel(e){var t;if(!((t=e.browserEvent)===null||t===void 0)&&t.defaultPrevented)return;const i=p0.INSTANCE;i.acceptStandardWheelEvent(e);let s=!1;if(e.deltaY||e.deltaX){let r=e.deltaY*this._options.mouseWheelScrollSensitivity,a=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&a+r===0?a=r=0:Math.abs(r)>=Math.abs(a)?a=0:r=0),this._options.flipAxes&&([r,a]=[a,r]);const l=!gt&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||l)&&!a&&(a=r,r=0),e.browserEvent&&e.browserEvent.altKey&&(a=a*this._options.fastScrollSensitivity,r=r*this._options.fastScrollSensitivity);const c=this._scrollable.getFutureScrollPosition();let d={};if(r){const u=G2*r,h=c.scrollTop-(u<0?Math.floor(u):Math.ceil(u));this._verticalScrollbar.writeScrollPosition(d,h)}if(a){const u=G2*a,h=c.scrollLeft-(u<0?Math.floor(u):Math.ceil(u));this._horizontalScrollbar.writeScrollPosition(d,h)}d=this._scrollable.validateScrollPosition(d),(c.scrollLeft!==d.scrollLeft||c.scrollTop!==d.scrollTop)&&(this._options.mouseWheelSmoothScroll&&i.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(d):this._scrollable.setScrollPositionNow(d),s=!0)}let o=s;!o&&this._options.alwaysConsumeMouseWheel&&(o=!0),!o&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(o=!0),o&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,i=e.scrollLeft>0,s=i?" left":"",o=t?" top":"",r=i||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${s}`),this._topShadowDomNode.setClassName(`shadow${o}`),this._topLeftShadowDomNode.setClassName(`shadow${r}${o}${s}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),Yz)}}class Qz extends YS{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const i=new Bg({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:s=>Ws(s)});super(e,t,i),this._register(i)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}}class XS extends YS{constructor(e,t,i){super(e,t,i)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class QS extends YS{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const i=new Bg({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:s=>Ws(s)});super(e,t,i),this._register(i),this._element=e,this.onScroll(s=>{s.scrollTopChanged&&(this._element.scrollTop=s.scrollTop),s.scrollLeftChanged&&(this._element.scrollLeft=s.scrollLeft)}),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function Jz(n){const e={lazyRender:typeof n.lazyRender<"u"?n.lazyRender:!1,className:typeof n.className<"u"?n.className:"",useShadows:typeof n.useShadows<"u"?n.useShadows:!0,handleMouseWheel:typeof n.handleMouseWheel<"u"?n.handleMouseWheel:!0,flipAxes:typeof n.flipAxes<"u"?n.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof n.consumeMouseWheelIfScrollbarIsNeeded<"u"?n.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof n.alwaysConsumeMouseWheel<"u"?n.alwaysConsumeMouseWheel:!1,scrollYToX:typeof n.scrollYToX<"u"?n.scrollYToX:!1,mouseWheelScrollSensitivity:typeof n.mouseWheelScrollSensitivity<"u"?n.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof n.fastScrollSensitivity<"u"?n.fastScrollSensitivity:5,scrollPredominantAxis:typeof n.scrollPredominantAxis<"u"?n.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof n.mouseWheelSmoothScroll<"u"?n.mouseWheelSmoothScroll:!0,arrowSize:typeof n.arrowSize<"u"?n.arrowSize:11,listenOnDomNode:typeof n.listenOnDomNode<"u"?n.listenOnDomNode:null,horizontal:typeof n.horizontal<"u"?n.horizontal:1,horizontalScrollbarSize:typeof n.horizontalScrollbarSize<"u"?n.horizontalScrollbarSize:10,horizontalSliderSize:typeof n.horizontalSliderSize<"u"?n.horizontalSliderSize:0,horizontalHasArrows:typeof n.horizontalHasArrows<"u"?n.horizontalHasArrows:!1,vertical:typeof n.vertical<"u"?n.vertical:1,verticalScrollbarSize:typeof n.verticalScrollbarSize<"u"?n.verticalScrollbarSize:10,verticalHasArrows:typeof n.verticalHasArrows<"u"?n.verticalHasArrows:!1,verticalSliderSize:typeof n.verticalSliderSize<"u"?n.verticalSliderSize:0,scrollByPage:typeof n.scrollByPage<"u"?n.scrollByPage:!1};return e.horizontalSliderSize=typeof n.horizontalSliderSize<"u"?n.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof n.verticalSliderSize<"u"?n.verticalSliderSize:e.verticalScrollbarSize,gt&&(e.className+=" mac"),e}class JS extends Fg{constructor(e,t,i){super(),this._mouseLeaveMonitor=null,this._context=e,this.viewController=t,this.viewHelper=i,this.mouseTargetFactory=new qi(this._context,i),this._mouseDownOperation=this._register(new eU(this._context,this.viewController,this.viewHelper,this.mouseTargetFactory,(r,a)=>this._createMouseTarget(r,a),r=>this._getMouseColumn(r))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(142).height;const s=new kz(this.viewHelper.viewDomNode);this._register(s.onContextMenu(this.viewHelper.viewDomNode,r=>this._onContextMenu(r,!0))),this._register(s.onMouseMove(this.viewHelper.viewDomNode,r=>{this._onMouseMove(r),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=ee(document,"mousemove",a=>{this.viewHelper.viewDomNode.contains(a.target)||this._onMouseLeave(new gl(a,!1,this.viewHelper.viewDomNode))}))})),this._register(s.onMouseUp(this.viewHelper.viewDomNode,r=>this._onMouseUp(r))),this._register(s.onMouseLeave(this.viewHelper.viewDomNode,r=>this._onMouseLeave(r)));let o=0;this._register(s.onPointerDown(this.viewHelper.viewDomNode,(r,a)=>{o=a})),this._register(ee(this.viewHelper.viewDomNode,_e.POINTER_UP,r=>{this._mouseDownOperation.onPointerUp()})),this._register(s.onMouseDown(this.viewHelper.viewDomNode,r=>this._onMouseDown(r,o))),this._setupMouseWheelZoomListener(),this._context.addEventHandler(this)}_setupMouseWheelZoomListener(){const e=p0.INSTANCE;let t=0,i=Na.getZoomLevel(),s=!1,o=0;const r=l=>{if(this.viewController.emitMouseWheel(l),!this._context.configuration.options.get(74))return;const c=new Dc(l);if(e.acceptStandardWheelEvent(c),e.isPhysicalMouseWheel()){if(a(l)){const d=Na.getZoomLevel(),u=c.deltaY>0?1:-1;Na.setZoomLevel(d+u),c.preventDefault(),c.stopPropagation()}}else Date.now()-t>50&&(i=Na.getZoomLevel(),s=a(l),o=0),t=Date.now(),o+=c.deltaY,s&&(Na.setZoomLevel(i+o/5),c.preventDefault(),c.stopPropagation())};this._register(ee(this.viewHelper.viewDomNode,_e.MOUSE_WHEEL,r,{capture:!0,passive:!1}));function a(l){return gt?(l.metaKey||l.ctrlKey)&&!l.shiftKey&&!l.altKey:l.ctrlKey&&!l.metaKey&&!l.shiftKey&&!l.altKey}}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(142)){const t=this._context.configuration.options.get(142).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}getTargetAtClientPoint(e,t){const s=new c3(e,t).toPageCoordinates(),o=KS(this.viewHelper.viewDomNode);if(s.y<o.y||s.y>o.y+o.height||s.x<o.x||s.x>o.x+o.width)return null;const r=GS(this.viewHelper.viewDomNode,o,s);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),o,s,r,null)}_createMouseTarget(e,t){let i=e.target;if(!this.viewHelper.viewDomNode.contains(i)){const s=Du(this.viewHelper.viewDomNode);s&&(i=s.elementsFromPoint(e.posx,e.posy).find(o=>this.viewHelper.viewDomNode.contains(o)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,t?i:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this.mouseTargetFactory.mouseTargetIsWidget(e)||e.preventDefault(),!(this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime)&&this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e,t){const i=this._createMouseTarget(e,!0),s=i.type===6||i.type===7,o=i.type===2||i.type===3||i.type===4,r=i.type===3,a=this._context.configuration.options.get(107),l=i.type===8||i.type===5,c=i.type===9;let d=e.leftButton||e.middleButton;gt&&e.leftButton&&e.ctrlKey&&(d=!1);const u=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(d&&(s||r&&a))u(),this._mouseDownOperation.start(i.type,e,t);else if(o)e.preventDefault();else if(l){const h=i.detail;d&&this.viewHelper.shouldSuppressMouseDownOnViewZone(h.viewZoneId)&&(u(),this._mouseDownOperation.start(i.type,e,t),e.preventDefault())}else c&&this.viewHelper.shouldSuppressMouseDownOnWidget(i.detail)&&(u(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:i})}}class eU extends oe{constructor(e,t,i,s,o,r){super(),this._context=e,this._viewController=t,this._viewHelper=i,this._mouseTargetFactory=s,this._createMouseTarget=o,this._getMouseColumn=r,this._mouseMoveMonitor=this._register(new Iz(this._viewHelper.viewDomNode)),this._topBottomDragScrolling=this._register(new tU(this._context,this._viewHelper,this._mouseTargetFactory,(a,l,c)=>this._dispatchMouse(a,l,c))),this._mouseState=new Q_,this._currentSelection=new at(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!1);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):t.type===13&&(t.outsidePosition==="above"||t.outsidePosition==="below")?this._topBottomDragScrolling.start(t,e):(this._topBottomDragScrolling.stop(),this._dispatchMouse(t,!0,1)))}start(e,t,i){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const s=this._findMousePosition(t,!0);if(!s||!s.position)return;this._mouseState.trySetCount(t.detail,s.position),t.detail=this._mouseState.count;const o=this._context.configuration.options;if(!o.get(89)&&o.get(34)&&!o.get(21)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&s.type===6&&s.position&&this._currentSelection.containsPosition(s.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,t.buttons,r=>this._onMouseDownThenMove(r),r=>{const a=this._findMousePosition(this._lastMouseEvent,!1);r&&r instanceof KeyboardEvent?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:a?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(s,t.shiftKey,1),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,t.buttons,r=>this._onMouseDownThenMove(r),()=>this._stop()))}_stop(){this._isActive=!1,this._topBottomDragScrolling.stop()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,i=this._context.viewModel,s=this._context.viewLayout,o=this._getMouseColumn(e);if(e.posy<t.y){const a=t.y-e.posy,l=Math.max(s.getCurrentScrollTop()-a,0),c=Au.getZoneAtCoord(this._context,l);if(c){const u=this._helpPositionJumpOverViewZone(c);if(u)return cn.createOutsideEditor(o,u,"above",a)}const d=s.getLineNumberAtVerticalOffset(l);return cn.createOutsideEditor(o,new Y(d,1),"above",a)}if(e.posy>t.y+t.height){const a=e.posy-t.y-t.height,l=s.getCurrentScrollTop()+e.relativePos.y,c=Au.getZoneAtCoord(this._context,l);if(c){const u=this._helpPositionJumpOverViewZone(c);if(u)return cn.createOutsideEditor(o,u,"below",a)}const d=s.getLineNumberAtVerticalOffset(l);return cn.createOutsideEditor(o,new Y(d,i.getLineMaxColumn(d)),"below",a)}const r=s.getLineNumberAtVerticalOffset(s.getCurrentScrollTop()+e.relativePos.y);if(e.posx<t.x){const a=t.x-e.posx;return cn.createOutsideEditor(o,new Y(r,1),"left",a)}if(e.posx>t.x+t.width){const a=e.posx-t.x-t.width;return cn.createOutsideEditor(o,new Y(r,i.getLineMaxColumn(r)),"right",a)}return null}_findMousePosition(e,t){const i=this._getPositionOutsideEditor(e);if(i)return i;const s=this._createMouseTarget(e,t);if(!s.position)return null;if(s.type===8||s.type===5){const r=this._helpPositionJumpOverViewZone(s.detail);if(r)return cn.createViewZone(s.type,s.element,s.mouseColumn,r,s.detail)}return s}_helpPositionJumpOverViewZone(e){const t=new Y(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),i=e.positionBefore,s=e.positionAfter;return i&&s?i.isBefore(t)?i:s:null}_dispatchMouse(e,t,i){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:i,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:e.type===6&&e.detail.injectedText!==null})}}class tU extends oe{constructor(e,t,i,s){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=i,this._dispatchMouse=s,this._operation=null}dispose(){super.dispose(),this.stop()}start(e,t){this._operation?this._operation.setPosition(e,t):this._operation=new iU(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,e,t)}stop(){this._operation&&(this._operation.dispose(),this._operation=null)}}class iU extends oe{constructor(e,t,i,s,o,r){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=i,this._dispatchMouse=s,this._position=o,this._mouseEvent=r,this._lastTime=Date.now(),this._animationFrameDisposable=Ws(()=>this._execute())}dispose(){this._animationFrameDisposable.dispose()}setPosition(e,t){this._position=e,this._mouseEvent=t}_tick(){const e=Date.now(),t=e-this._lastTime;return this._lastTime=e,t}_getScrollSpeed(){const e=this._context.configuration.options.get(65),t=this._context.configuration.options.get(142).height/e,i=this._position.outsideDistance/e;return i<=1.5?Math.max(30,t*(1+i)):i<=3?Math.max(60,t*(2+i)):Math.max(200,t*(7+i))}_execute(){const e=this._context.configuration.options.get(65),t=this._getScrollSpeed(),i=this._tick(),s=t*(i/1e3)*e,o=this._position.outsidePosition==="above"?-s:s;this._context.viewModel.viewLayout.deltaScrollNow(0,o),this._viewHelper.renderNow();const r=this._context.viewLayout.getLinesViewportData(),a=this._position.outsidePosition==="above"?r.startLineNumber:r.endLineNumber;let l;{const c=KS(this._viewHelper.viewDomNode),d=this._context.configuration.options.get(142).horizontalScrollbarHeight,u=new Z_(this._mouseEvent.pos.x,c.y+c.height-d-.1),h=GS(this._viewHelper.viewDomNode,c,u);l=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),c,u,h,null)}(!l.position||l.position.lineNumber!==a)&&(this._position.outsidePosition==="above"?l=cn.createOutsideEditor(this._position.mouseColumn,new Y(a,1),"above",this._position.outsideDistance):l=cn.createOutsideEditor(this._position.mouseColumn,new Y(a,this._context.viewModel.getLineMaxColumn(a)),"below",this._position.outsideDistance)),this._dispatchMouse(l,!0,2),this._animationFrameDisposable=Ws(()=>this._execute())}}class Q_{get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const i=new Date().getTime();i-this._lastSetMouseDownCountTime>Q_.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=i,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}}Q_.CLEAR_MOUSE_DOWN_COUNT_TIME=400;class Qe{get event(){return this.emitter.event}constructor(e,t,i){const s=o=>this.emitter.fire(o);this.emitter=new q({onWillAddFirstListener:()=>e.addEventListener(t,s,i),onDidRemoveLastListener:()=>e.removeEventListener(t,s,i)})}dispose(){this.emitter.dispose()}}var Ua;(function(n){const e={total:0,min:Number.MAX_VALUE,max:0},t=Object.assign({},e),i=Object.assign({},e),s=Object.assign({},e);let o=0;const r={keydown:0,input:0,render:0};function a(){v(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),r.keydown=1,queueMicrotask(l)}n.onKeyDown=a;function l(){r.keydown===1&&(performance.mark("keydown/end"),r.keydown=2)}function c(){performance.mark("input/start"),r.input=1,_()}n.onBeforeInput=c;function d(){r.input===0&&c(),queueMicrotask(u)}n.onInput=d;function u(){r.input===1&&(performance.mark("input/end"),r.input=2)}function h(){v()}n.onKeyUp=h;function f(){v()}n.onSelectionChange=f;function g(){r.keydown===2&&r.input===2&&r.render===0&&(performance.mark("render/start"),r.render=1,queueMicrotask(p),_())}n.onRenderStart=g;function p(){r.render===1&&(performance.mark("render/end"),r.render=2)}function _(){setTimeout(v)}function v(){r.keydown===2&&r.input===2&&r.render===2&&(performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("render","render/start","render/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),b("keydown",e),b("input",t),b("render",i),b("inputlatency",s),o++,w())}function b(L,x){const I=performance.getEntriesByName(L)[0].duration;x.total+=I,x.min=Math.min(x.min,I),x.max=Math.max(x.max,I)}function w(){performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("render/start"),performance.clearMarks("render/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("render"),performance.clearMeasures("inputlatency"),r.keydown=0,r.input=0,r.render=0}function C(){if(o===0)return;const L={keydown:S(e),input:S(t),render:S(i),total:S(s),sampleCount:o};return k(e),k(t),k(i),k(s),o=0,L}n.getAndClearMeasurements=C;function S(L){return{average:L.total/o,max:L.max,min:L.min}}function k(L){L.total=0,L.min=Number.MAX_VALUE,L.max=0}})(Ua||(Ua={}));class Fi{constructor(e,t,i,s,o){this.value=e,this.selectionStart=t,this.selectionEnd=i,this.selection=s,this.newlineCountBeforeSelection=o}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(e,t){const i=e.getValue(),s=e.getSelectionStart(),o=e.getSelectionEnd();let r;if(t){const a=i.substring(0,s),l=t.value.substring(0,t.selectionStart);a===l&&(r=t.newlineCountBeforeSelection)}return new Fi(i,s,o,null,r)}collapseSelection(){return this.selectionStart===this.value.length?this:new Fi(this.value,this.value.length,this.value.length,null,void 0)}writeToTextArea(e,t,i){t.setValue(e,this.value),i&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){var t,i,s,o,r,a,l,c;if(e<=this.selectionStart){const h=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition((i=(t=this.selection)===null||t===void 0?void 0:t.getStartPosition())!==null&&i!==void 0?i:null,h,-1)}if(e>=this.selectionEnd){const h=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition((o=(s=this.selection)===null||s===void 0?void 0:s.getEndPosition())!==null&&o!==void 0?o:null,h,1)}const d=this.value.substring(this.selectionStart,e);if(d.indexOf(String.fromCharCode(8230))===-1)return this._finishDeduceEditorPosition((a=(r=this.selection)===null||r===void 0?void 0:r.getStartPosition())!==null&&a!==void 0?a:null,d,1);const u=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition((c=(l=this.selection)===null||l===void 0?void 0:l.getEndPosition())!==null&&c!==void 0?c:null,u,-1)}_finishDeduceEditorPosition(e,t,i){let s=0,o=-1;for(;(o=t.indexOf(`
`,o+1))!==-1;)s++;return[e,i*t.length,s]}static deduceInput(e,t,i){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const s=Math.min(xw(e.value,t.value),e.selectionStart,t.selectionStart),o=Math.min(Dw(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd);e.value.substring(s,e.value.length-o);const r=t.value.substring(s,t.value.length-o),a=e.selectionStart-s,l=e.selectionEnd-s,c=t.selectionStart-s,d=t.selectionEnd-s;if(c===d){const h=e.selectionStart-s;return{text:r,replacePrevCharCnt:h,replaceNextCharCnt:0,positionDelta:0}}const u=l-a;return{text:r,replacePrevCharCnt:u,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const i=Math.min(xw(e.value,t.value),e.selectionEnd),s=Math.min(Dw(e.value,t.value),e.value.length-e.selectionEnd),o=e.value.substring(i,e.value.length-s),r=t.value.substring(i,t.value.length-s);e.selectionStart-i;const a=e.selectionEnd-i;t.selectionStart-i;const l=t.selectionEnd-i;return{text:r,replacePrevCharCnt:a,replaceNextCharCnt:o.length-a,positionDelta:l-r.length}}}Fi.EMPTY=new Fi("",0,0,null,void 0);class Ad{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const i=e*t,s=i+1,o=i+t;return new $(s,1,o+1,1)}static fromEditorSelection(e,t,i,s){const r=Ad._getPageOfLine(t.startLineNumber,i),a=Ad._getRangeForPage(r,i),l=Ad._getPageOfLine(t.endLineNumber,i),c=Ad._getRangeForPage(l,i);let d=a.intersectRanges(new $(1,1,t.startLineNumber,t.startColumn));if(s&&e.getValueLengthInRange(d,1)>500){const v=e.modifyPosition(d.getEndPosition(),-500);d=$.fromPositions(v,d.getEndPosition())}const u=e.getValueInRange(d,1),h=e.getLineCount(),f=e.getLineMaxColumn(h);let g=c.intersectRanges(new $(t.endLineNumber,t.endColumn,h,f));if(s&&e.getValueLengthInRange(g,1)>500){const v=e.modifyPosition(g.getStartPosition(),500);g=$.fromPositions(g.getStartPosition(),v)}const p=e.getValueInRange(g,1);let _;if(r===l||r+1===l)_=e.getValueInRange(t,1);else{const v=a.intersectRanges(t),b=c.intersectRanges(t);_=e.getValueInRange(v,1)+String.fromCharCode(8230)+e.getValueInRange(b,1)}return s&&_.length>2*500&&(_=_.substring(0,500)+String.fromCharCode(8230)+_.substring(_.length-500,_.length)),new Fi(u+_+p,u.length,u.length+_.length,t,d.endLineNumber-d.startLineNumber)}}var m0;(function(n){n.Tap="-monaco-textarea-synthetic-tap"})(m0||(m0={}));class _0{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}}_0.INSTANCE=new _0;class nU{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";const t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}class sU extends oe{get textAreaState(){return this._textAreaState}constructor(e,t,i,s){super(),this._host=e,this._textArea=t,this._OS=i,this._browser=s,this._onFocus=this._register(new q),this.onFocus=this._onFocus.event,this._onBlur=this._register(new q),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new q),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new q),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new q),this.onCut=this._onCut.event,this._onPaste=this._register(new q),this.onPaste=this._onPaste.event,this._onType=this._register(new q),this.onType=this._onType.event,this._onCompositionStart=this._register(new q),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new q),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new q),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new q),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncTriggerCut=this._register(new Sn(()=>this._onCut.fire(),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new Sn(()=>this.writeScreenReaderContent("asyncFocusGain"),0)),this._textAreaState=Fi.EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent("ctor"),this._hasFocus=!1,this._currentComposition=null;let o=null;this._register(this._textArea.onKeyDown(r=>{const a=new Wt(r);(a.keyCode===114||this._currentComposition&&a.keyCode===1)&&a.stopPropagation(),a.equals(9)&&a.preventDefault(),o=a,this._onKeyDown.fire(a)})),this._register(this._textArea.onKeyUp(r=>{const a=new Wt(r);this._onKeyUp.fire(a)})),this._register(this._textArea.onCompositionStart(r=>{const a=new nU;if(this._currentComposition){this._currentComposition=a;return}if(this._currentComposition=a,this._OS===2&&o&&o.equals(114)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===r.data&&(o.code==="ArrowRight"||o.code==="ArrowLeft")){a.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:r.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:r.data});return}this._onCompositionStart.fire({data:r.data})})),this._register(this._textArea.onCompositionUpdate(r=>{const a=this._currentComposition;if(!a)return;if(this._browser.isAndroid){const c=Fi.readFromTextArea(this._textArea,this._textAreaState),d=Fi.deduceAndroidCompositionInput(this._textAreaState,c);this._textAreaState=c,this._onType.fire(d),this._onCompositionUpdate.fire(r);return}const l=a.handleCompositionUpdate(r.data);this._textAreaState=Fi.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(l),this._onCompositionUpdate.fire(r)})),this._register(this._textArea.onCompositionEnd(r=>{const a=this._currentComposition;if(!a)return;if(this._currentComposition=null,this._browser.isAndroid){const c=Fi.readFromTextArea(this._textArea,this._textAreaState),d=Fi.deduceAndroidCompositionInput(this._textAreaState,c);this._textAreaState=c,this._onType.fire(d),this._onCompositionEnd.fire();return}const l=a.handleCompositionUpdate(r.data);this._textAreaState=Fi.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(l),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(r=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const a=Fi.readFromTextArea(this._textArea,this._textAreaState),l=Fi.deduceInput(this._textAreaState,a,this._OS===2);l.replacePrevCharCnt===0&&l.text.length===1&&(Ni(l.text.charCodeAt(0))||l.text.charCodeAt(0)===127)||(this._textAreaState=a,(l.text!==""||l.replacePrevCharCnt!==0||l.replaceNextCharCnt!==0||l.positionDelta!==0)&&this._onType.fire(l))})),this._register(this._textArea.onCut(r=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(r),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(r=>{this._ensureClipboardGetsEditorSelection(r)})),this._register(this._textArea.onPaste(r=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),r.preventDefault(),!r.clipboardData)return;let[a,l]=Z2.getTextData(r.clipboardData);a&&(l=l||_0.INSTANCE.get(a),this._onPaste.fire({text:a,metadata:l}))})),this._register(this._textArea.onFocus(()=>{const r=this._hasFocus;this._setHasFocus(!0),this._browser.isSafari&&!r&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return ee(document,"selectionchange",t=>{if(Ua.onSelectionChange(),!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const i=Date.now(),s=i-e;if(e=i,s<5)return;const o=i-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),o<100||!this._textAreaState.selection)return;const r=this._textArea.getValue();if(this._textAreaState.value!==r)return;const a=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===l)return;const c=this._textAreaState.deduceEditorPosition(a),d=this._host.deduceModelPosition(c[0],c[1],c[2]),u=this._textAreaState.deduceEditorPosition(l),h=this._host.deduceModelPosition(u[0],u[1],u[2]),f=new at(d.lineNumber,d.column,h.lineNumber,h.column);this._onSelectionChangeRequest.fire(f)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeScreenReaderContent(e){this._currentComposition||this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent())}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(),i={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};_0.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,`
`):t.text,i),e.preventDefault(),e.clipboardData&&Z2.setTextData(e.clipboardData,t.text,t.html,i)}}const Z2={getTextData(n){const e=n.getData(Fr.text);let t=null;const i=n.getData("vscode-editor-data");if(typeof i=="string")try{t=JSON.parse(i),t.version!==1&&(t=null)}catch{}return e.length===0&&t===null&&n.files.length>0?[Array.prototype.slice.call(n.files,0).map(o=>o.name).join(`
`),null]:[e,t]},setTextData(n,e,t,i){n.setData(Fr.text,e),typeof t=="string"&&n.setData("text/html",t),n.setData("vscode-editor-data",JSON.stringify(i))}};class oU extends oe{constructor(e){super(),this._actual=e,this.onKeyDown=this._register(new Qe(this._actual,"keydown")).event,this.onKeyUp=this._register(new Qe(this._actual,"keyup")).event,this.onCompositionStart=this._register(new Qe(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(new Qe(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(new Qe(this._actual,"compositionend")).event,this.onBeforeInput=this._register(new Qe(this._actual,"beforeinput")).event,this.onInput=this._register(new Qe(this._actual,"input")).event,this.onCut=this._register(new Qe(this._actual,"cut")).event,this.onCopy=this._register(new Qe(this._actual,"copy")).event,this.onPaste=this._register(new Qe(this._actual,"paste")).event,this.onFocus=this._register(new Qe(this._actual,"focus")).event,this.onBlur=this._register(new Qe(this._actual,"blur")).event,this._onSyntheticTap=this._register(new q),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(this.onKeyDown(()=>Ua.onKeyDown())),this._register(this.onBeforeInput(()=>Ua.onBeforeInput())),this._register(this.onInput(()=>Ua.onInput())),this._register(this.onKeyUp(()=>Ua.onKeyUp())),this._register(ee(this._actual,m0.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){const e=Du(this._actual);return e?e.activeElement===this._actual:T4(this._actual)?document.activeElement===this._actual:!1}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){const i=this._actual;i.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),i.value=t)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,i){const s=this._actual;let o=null;const r=Du(s);r?o=r.activeElement:o=document.activeElement;const a=o===s,l=s.selectionStart,c=s.selectionEnd;if(a&&l===t&&c===i){io&&window.parent!==window&&s.focus();return}if(a){this.setIgnoreSelectionChangeTime("setSelectionRange"),s.setSelectionRange(t,i),io&&window.parent!==window&&s.focus();return}try{const d=kH(s);this.setIgnoreSelectionChangeTime("setSelectionRange"),s.focus(),s.setSelectionRange(t,i),EH(s,d)}catch{}}}class rU extends JS{constructor(e,t,i){super(e,t,i),this._register(Ot.addTarget(this.viewHelper.linesContentDomNode)),this._register(ee(this.viewHelper.linesContentDomNode,It.Tap,o=>this.onTap(o))),this._register(ee(this.viewHelper.linesContentDomNode,It.Change,o=>this.onChange(o))),this._register(ee(this.viewHelper.linesContentDomNode,It.Contextmenu,o=>this._onContextMenu(new gl(o,!1,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(ee(this.viewHelper.linesContentDomNode,"pointerdown",o=>{const r=o.pointerType;if(r==="mouse"){this._lastPointerType="mouse";return}else r==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const s=new Ez(this.viewHelper.viewDomNode);this._register(s.onPointerMove(this.viewHelper.viewDomNode,o=>this._onMouseMove(o))),this._register(s.onPointerUp(this.viewHelper.viewDomNode,o=>this._onMouseUp(o))),this._register(s.onPointerLeave(this.viewHelper.viewDomNode,o=>this._onMouseLeave(o))),this._register(s.onPointerDown(this.viewHelper.viewDomNode,(o,r)=>this._onMouseDown(o,r)))}onTap(e){if(!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget))return;e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new gl(e,!1,this.viewHelper.viewDomNode),!1);t.position&&this.viewController.dispatchMouse({position:t.position,mouseColumn:t.position.column,startedOnLineNumbers:!1,revealType:1,mouseDownCount:e.tapCount,inSelectionMode:!1,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:t.type===6&&t.detail.injectedText!==null})}onChange(e){this._lastPointerType==="touch"&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}_onMouseDown(e,t){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e,t)}}class aU extends JS{constructor(e,t,i){super(e,t,i),this._register(Ot.addTarget(this.viewHelper.linesContentDomNode)),this._register(ee(this.viewHelper.linesContentDomNode,It.Tap,s=>this.onTap(s))),this._register(ee(this.viewHelper.linesContentDomNode,It.Change,s=>this.onChange(s))),this._register(ee(this.viewHelper.linesContentDomNode,It.Contextmenu,s=>this._onContextMenu(new gl(s,!1,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new gl(e,!1,this.viewHelper.viewDomNode),!1);if(t.position){const i=document.createEvent("CustomEvent");i.initEvent(m0.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(i),this.viewController.moveTo(t.position,1)}}onChange(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}}class lU extends oe{constructor(e,t,i){super(),ll&&C4.pointerEvents?this.handler=this._register(new rU(e,t,i)):window.TouchEvent?this.handler=this._register(new aU(e,t,i)):this.handler=this._register(new JS(e,t,i))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}class jc extends Fg{}const ro=ct("themeService");function vh(n){return{id:n}}function b0(n){switch(n){case As.DARK:return"vs-dark";case As.HIGH_CONTRAST_DARK:return"hc-black";case As.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}const p3={ThemingContribution:"base.contributions.theming"};class cU{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new q}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),st(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}}const m3=new cU;zi.add(p3.ThemingContribution,m3);function sa(n){return m3.onColorThemeChange(n)}class dU extends oe{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}const _3=F("editor.lineHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},m("lineHighlight","Background color for the highlight of line at the cursor position.")),Y2=F("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:dt},m("lineHighlightBorderBox","Background color for the border around the line at the cursor position."));F("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},m("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0);F("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:ri,hcLight:ri},m("rangeHighlightBorder","Background color of the border around highlighted ranges."),!0);F("editor.symbolHighlightBackground",{dark:Ha,light:Ha,hcDark:null,hcLight:null},m("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0);F("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:ri,hcLight:ri},m("symbolHighlightBorder","Background color of the border around highlighted symbols."),!0);const b3=F("editorCursor.foreground",{dark:"#AEAFAD",light:J.black,hcDark:J.white,hcLight:"#0F4A85"},m("caret","Color of the editor cursor.")),uU=F("editorCursor.background",null,m("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),Gr=F("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},m("editorWhitespaces","Color of whitespace characters in the editor.")),hU=F("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:J.white,hcLight:"#292929"},m("editorLineNumbers","Color of editor line numbers.")),Dp=F("editorIndentGuide.background",{dark:Gr,light:Gr,hcDark:Gr,hcLight:Gr},m("editorIndentGuides","Color of the editor indentation guides."),!1,m("deprecatedEditorIndentGuides","'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),kp=F("editorIndentGuide.activeBackground",{dark:Gr,light:Gr,hcDark:Gr,hcLight:Gr},m("editorActiveIndentGuide","Color of the active editor indentation guides."),!1,m("deprecatedEditorActiveIndentGuide","'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),Vg=F("editorIndentGuide.background1",{dark:Dp,light:Dp,hcDark:Dp,hcLight:Dp},m("editorIndentGuides1","Color of the editor indentation guides (1).")),fU=F("editorIndentGuide.background2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorIndentGuides2","Color of the editor indentation guides (2).")),gU=F("editorIndentGuide.background3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorIndentGuides3","Color of the editor indentation guides (3).")),pU=F("editorIndentGuide.background4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorIndentGuides4","Color of the editor indentation guides (4).")),mU=F("editorIndentGuide.background5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorIndentGuides5","Color of the editor indentation guides (5).")),_U=F("editorIndentGuide.background6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorIndentGuides6","Color of the editor indentation guides (6).")),Wg=F("editorIndentGuide.activeBackground1",{dark:kp,light:kp,hcDark:kp,hcLight:kp},m("editorActiveIndentGuide1","Color of the active editor indentation guides (1).")),bU=F("editorIndentGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorActiveIndentGuide2","Color of the active editor indentation guides (2).")),vU=F("editorIndentGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorActiveIndentGuide3","Color of the active editor indentation guides (3).")),wU=F("editorIndentGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorActiveIndentGuide4","Color of the active editor indentation guides (4).")),CU=F("editorIndentGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorActiveIndentGuide5","Color of the active editor indentation guides (5).")),yU=F("editorIndentGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorActiveIndentGuide6","Color of the active editor indentation guides (6).")),Ep=F("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:ri,hcLight:ri},m("editorActiveLineNumber","Color of editor active line number"),!1,m("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead."));F("editorLineNumber.activeForeground",{dark:Ep,light:Ep,hcDark:Ep,hcLight:Ep},m("editorActiveLineNumber","Color of editor active line number"));const SU=F("editorLineNumber.dimmedForeground",{dark:null,light:null,hcDark:null,hcLight:null},m("editorDimmedLineNumber","Color of the final editor line when editor.renderFinalNewline is set to dimmed."));F("editorRuler.foreground",{dark:"#5A5A5A",light:J.lightgrey,hcDark:J.white,hcLight:"#292929"},m("editorRuler","Color of the editor rulers."));F("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},m("editorCodeLensForeground","Foreground color of editor CodeLens"));F("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},m("editorBracketMatchBackground","Background color behind matching brackets"));F("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:dt,hcLight:dt},m("editorBracketMatchBorder","Color for matching brackets boxes"));const LU=F("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},m("editorOverviewRulerBorder","Color of the overview ruler border.")),xU=F("editorOverviewRuler.background",null,m("editorOverviewRulerBackground","Background color of the editor overview ruler."));F("editorGutter.background",{dark:Qi,light:Qi,hcDark:Qi,hcLight:Qi},m("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers."));F("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:J.fromHex("#fff").transparent(.8),hcLight:dt},m("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor."));const DU=F("editorUnnecessaryCode.opacity",{dark:J.fromHex("#000a"),light:J.fromHex("#0007"),hcDark:null,hcLight:null},m("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`));F("editorGhostText.border",{dark:null,light:null,hcDark:J.fromHex("#fff").transparent(.8),hcLight:J.fromHex("#292929").transparent(.8)},m("editorGhostTextBorder","Border color of ghost text in the editor."));F("editorGhostText.foreground",{dark:J.fromHex("#ffffff56"),light:J.fromHex("#0007"),hcDark:null,hcLight:null},m("editorGhostTextForeground","Foreground color of the ghost text in the editor."));F("editorGhostText.background",{dark:null,light:null,hcDark:null,hcLight:null},m("editorGhostTextBackground","Background color of the ghost text in the editor."));const Ip=new J(new rt(0,122,204,.6));F("editorOverviewRuler.rangeHighlightForeground",{dark:Ip,light:Ip,hcDark:Ip,hcLight:Ip},m("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0);const kU=F("editorOverviewRuler.errorForeground",{dark:new J(new rt(255,18,18,.7)),light:new J(new rt(255,18,18,.7)),hcDark:new J(new rt(255,50,50,1)),hcLight:"#B5200D"},m("overviewRuleError","Overview ruler marker color for errors.")),EU=F("editorOverviewRuler.warningForeground",{dark:Ts,light:Ts,hcDark:u0,hcLight:u0},m("overviewRuleWarning","Overview ruler marker color for warnings.")),IU=F("editorOverviewRuler.infoForeground",{dark:Do,light:Do,hcDark:T2,hcLight:T2},m("overviewRuleInfo","Overview ruler marker color for infos.")),v3=F("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},m("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),w3=F("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},m("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),C3=F("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},m("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),y3=F("editorBracketHighlight.foreground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),S3=F("editorBracketHighlight.foreground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),L3=F("editorBracketHighlight.foreground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),NU=F("editorBracketHighlight.unexpectedBracket.foreground",{dark:new J(new rt(255,18,18,.8)),light:new J(new rt(255,18,18,.8)),hcDark:new J(new rt(255,50,50,1)),hcLight:""},m("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),TU=F("editorBracketPairGuide.background1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),AU=F("editorBracketPairGuide.background2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),MU=F("editorBracketPairGuide.background3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),RU=F("editorBracketPairGuide.background4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),PU=F("editorBracketPairGuide.background5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),OU=F("editorBracketPairGuide.background6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),FU=F("editorBracketPairGuide.activeBackground1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),BU=F("editorBracketPairGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),VU=F("editorBracketPairGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),WU=F("editorBracketPairGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),HU=F("editorBracketPairGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),$U=F("editorBracketPairGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},m("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));F("editorUnicodeHighlight.border",{dark:"#BD9B03",light:"#CEA33D",hcDark:"#ff0000",hcLight:"#CEA33D"},m("editorUnicodeHighlight.border","Border color used to highlight unicode characters."));F("editorUnicodeHighlight.background",{dark:"#bd9b0326",light:"#cea33d14",hcDark:"#00000000",hcLight:"#cea33d14"},m("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));sa((n,e)=>{const t=n.getColor(Qi),i=n.getColor(_3),s=i&&!i.isTransparent()?i:t;s&&e.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${s}; }`)});class Hg extends jc{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new Y(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(65);const t=e.get(66);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(93);const i=e.get(142);this._lineNumbersLeft=i.lineNumbersLeft,this._lineNumbersWidth=i.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t);let i=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,i=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(i=!0),i}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getLineRenderLineNumber(e){const t=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Y(e,1));if(t.column!==1)return"";const i=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(i);if(this._renderLineNumbers===2){const s=Math.abs(this._lastCursorModelPosition.lineNumber-i);return s===0?'<span class="relative-current-line-number">'+i+"</span>":String(s)}return this._renderLineNumbers===3?this._lastCursorModelPosition.lineNumber===i||i%10===0?String(i):"":String(i)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const t=Cn?this._lineHeight%2===0?" lh-even":" lh-odd":"",i=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,o=this._context.viewModel.getLineCount(),r=[];for(let a=i;a<=s;a++){const l=a-i,c=this._getLineRenderLineNumber(a);if(!c){r[l]="";continue}let d="";if(a===o&&this._context.viewModel.getLineLength(a)===0){if(this._renderFinalNewline==="off"){r[l]="";continue}this._renderFinalNewline==="dimmed"&&(d=" dimmed-line-number")}a===this._activeLineNumber&&(d=" active-line-number"),r[l]=`<div class="${Hg.CLASS_NAME}${t}${d}" style="left:${this._lineNumbersLeft}px;width:${this._lineNumbersWidth}px;">${c}</div>`}this._renderResult=r}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}Hg.CLASS_NAME="line-numbers";sa((n,e)=>{const t=n.getColor(hU),i=n.getColor(SU);i?e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${i}; }`):t&&e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${t.transparent(.4)}; }`)});class Ec extends ss{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(142);this._canUseLayerHinting=!t.get(31),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._domNode=tt(document.createElement("div")),this._domNode.setClassName(Ec.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=tt(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(Ec.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(142);return this._canUseLayerHinting=!t.get(31),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const i=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(i),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(i)}}Ec.CLASS_NAME="glyph-margin";Ec.OUTER_CLASS_NAME="margin";const fc="monaco-mouse-cursor-text";class zU{constructor(){this._onDidChange=new q,this.onDidChange=this._onDidChange.event,this._enabled=!0}get enabled(){return this._enabled}enable(){this._enabled=!0,this._onDidChange.fire()}disable(){this._enabled=!1,this._onDidChange.fire()}}const of=new zU,$s=ct("keybindingService");var UU=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},qU=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};class jU{constructor(e,t,i,s,o){this._context=e,this.modelLineNumber=t,this.distanceToModelLineStart=i,this.widthOfHiddenLineTextBefore=s,this.distanceToModelLineEnd=o,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(e){const t=new Y(this.modelLineNumber,this.distanceToModelLineStart+1),i=new Y(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(e?this._previousPresentation=e:this._previousPresentation={foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}const vb=io;let nC=class extends ss{constructor(e,t,i,s){super(e),this._keybindingService=s,this._primaryCursorPosition=new Y(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._visibleRangeProvider=i,this._scrollLeft=0,this._scrollTop=0;const o=this._context.configuration.options,r=o.get(142);this._setAccessibilityOptions(o),this._contentLeft=r.contentLeft,this._contentWidth=r.contentWidth,this._contentHeight=r.height,this._fontInfo=o.get(49),this._lineHeight=o.get(65),this._emptySelectionClipboard=o.get(36),this._copyWithSyntaxHighlighting=o.get(24),this._visibleTextArea=null,this._selections=[new at(1,1,1,1)],this._modelSelections=[new at(1,1,1,1)],this._lastRenderPosition=null,this.textArea=tt(document.createElement("textarea")),ur.write(this.textArea,6),this.textArea.setClassName(`inputarea ${fc}`),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:a}=this._context.viewModel.model.getOptions();this.textArea.domNode.style.tabSize=`${a*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(o)),this.textArea.setAttribute("aria-required",o.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(o.get(122))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",m("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-autocomplete",o.get(89)?"none":"both"),this._ensureReadOnlyAttribute(),this.textAreaCover=tt(document.createElement("div")),this.textAreaCover.setPosition("absolute");const l={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:u=>this._context.viewModel.getLineMaxColumn(u),getValueInRange:(u,h)=>this._context.viewModel.getValueInRange(u,h),getValueLengthInRange:(u,h)=>this._context.viewModel.getValueLengthInRange(u,h),modifyPosition:(u,h)=>this._context.viewModel.modifyPosition(u,h)},c={getDataToCopy:()=>{const u=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,is),h=this._context.viewModel.model.getEOL(),f=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),g=Array.isArray(u)?u:null,p=Array.isArray(u)?u.join(h):u;let _,v=null;if(this._copyWithSyntaxHighlighting&&p.length<65536){const b=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);b&&(_=b.html,v=b.mode)}return{isFromEmptySelection:f,multicursorText:g,text:p,html:_,mode:v}},getScreenReaderContent:()=>{if(this._accessibilitySupport===1){const u=this._selections[0];if(gt&&u.isEmpty()){const f=u.getStartPosition();let g=this._getWordBeforePosition(f);if(g.length===0&&(g=this._getCharacterBeforePosition(f)),g.length>0)return new Fi(g,g.length,g.length,$.fromPositions(f),0)}const h=500;if(gt&&!u.isEmpty()&&l.getValueLengthInRange(u,0)<h){const f=l.getValueInRange(u,0);return new Fi(f,0,f.length,u,0)}if(ia&&!u.isEmpty()){const f="vscode-placeholder";return new Fi(f,0,f.length,null,void 0)}return Fi.EMPTY}if(pD){const u=this._selections[0];if(u.isEmpty()){const h=u.getStartPosition(),[f,g]=this._getAndroidWordAtPosition(h);if(f.length>0)return new Fi(f,g,g,$.fromPositions(h),0)}return Fi.EMPTY}return Ad.fromEditorSelection(l,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(u,h,f)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(u,h,f)},d=this._register(new oU(this.textArea.domNode));this._textAreaInput=this._register(new sU(c,d,Xs,{isAndroid:pD,isChrome:xS,isFirefox:io,isSafari:ia})),this._register(this._textAreaInput.onKeyDown(u=>{this._viewController.emitKeyDown(u)})),this._register(this._textAreaInput.onKeyUp(u=>{this._viewController.emitKeyUp(u)})),this._register(this._textAreaInput.onPaste(u=>{let h=!1,f=null,g=null;u.metadata&&(h=this._emptySelectionClipboard&&!!u.metadata.isFromEmptySelection,f=typeof u.metadata.multicursorText<"u"?u.metadata.multicursorText:null,g=u.metadata.mode),this._viewController.paste(u.text,h,f,g)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(u=>{u.replacePrevCharCnt||u.replaceNextCharCnt||u.positionDelta?this._viewController.compositionType(u.text,u.replacePrevCharCnt,u.replaceNextCharCnt,u.positionDelta):this._viewController.type(u.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(u=>{this._viewController.setSelection(u)})),this._register(this._textAreaInput.onCompositionStart(u=>{const h=this.textArea.domNode,f=this._modelSelections[0],{distanceToModelLineStart:g,widthOfHiddenTextBefore:p}=(()=>{const v=h.value.substring(0,Math.min(h.selectionStart,h.selectionEnd)),b=v.lastIndexOf(`
`),w=v.substring(b+1),C=w.lastIndexOf("	"),S=w.length-C-1,k=f.getStartPosition(),L=Math.min(k.column-1,S),x=k.column-1-L,I=w.substring(0,w.length-L),{tabSize:A}=this._context.viewModel.model.getOptions(),T=KU(I,this._fontInfo,A);return{distanceToModelLineStart:x,widthOfHiddenTextBefore:T}})(),{distanceToModelLineEnd:_}=(()=>{const v=h.value.substring(Math.max(h.selectionStart,h.selectionEnd)),b=v.indexOf(`
`),w=b===-1?v:v.substring(0,b),C=w.indexOf("	"),S=C===-1?w.length:w.length-C-1,k=f.getEndPosition(),L=Math.min(this._context.viewModel.model.getLineMaxColumn(k.lineNumber)-k.column,S);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(k.lineNumber)-k.column-L}})();this._context.viewModel.revealRange("keyboard",!0,$.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new jU(this._context,f.startLineNumber,g,p,_),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${fc} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(u=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._render(),this.textArea.setClassName(`inputarea ${fc}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.viewModel.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.viewModel.setHasFocus(!1)})),this._register(of.onDidChange(()=>{this._ensureReadOnlyAttribute()}))}writeScreenReaderContent(e){this._textAreaInput.writeScreenReaderContent(e)}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',i=this._context.viewModel.getLineContent(e.lineNumber),s=xu(t);let o=!0,r=e.column,a=!0,l=e.column,c=0;for(;c<50&&(o||a);){if(o&&r<=1&&(o=!1),o){const d=i.charCodeAt(r-2);s.get(d)!==0?o=!1:r--}if(a&&l>i.length&&(a=!1),a){const d=i.charCodeAt(l-1);s.get(d)!==0?a=!1:l++}c++}return[i.substring(r-1,l-1),e.column-r]}_getWordBeforePosition(e){const t=this._context.viewModel.getLineContent(e.lineNumber),i=xu(this._context.configuration.options.get(128));let s=e.column,o=0;for(;s>1;){const r=t.charCodeAt(s-2);if(i.get(r)!==0||o>50)return t.substring(s-1,e.column-1);o++,s--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const i=this._context.viewModel.getLineContent(e.lineNumber).charAt(e.column-2);if(!Ni(i.charCodeAt(0)))return i}return""}_getAriaLabel(e){var t,i,s;if(e.get(2)===1){const r=(t=this._keybindingService.lookupKeybinding("editor.action.toggleScreenReaderAccessibilityMode"))===null||t===void 0?void 0:t.getAriaLabel(),a=(i=this._keybindingService.lookupKeybinding("workbench.action.showCommands"))===null||i===void 0?void 0:i.getAriaLabel(),l=(s=this._keybindingService.lookupKeybinding("workbench.action.openGlobalKeybindings"))===null||s===void 0?void 0:s.getAriaLabel(),c=m("accessibilityModeOff","The editor is not accessible at this time.");return r?m("accessibilityOffAriaLabel","{0} To enable screen reader optimized mode, use {1}",c,r):a?m("accessibilityOffAriaLabelNoKb","{0} To enable screen reader optimized mode, open the quick pick with {1} and run the command Toggle Screen Reader Accessibility Mode, which is currently not triggerable via keyboard.",c,a):l?m("accessibilityOffAriaLabelNoKbs","{0} Please assign a keybinding for the command Toggle Screen Reader Accessibility Mode by accessing the keybindings editor with {1} and run it.",c,l):c}return e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);this._accessibilitySupport===2&&t===bl.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t;const s=e.get(142).wrappingColumn;if(s!==-1&&this._accessibilitySupport!==1){const o=e.get(49);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(s*o.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=vb?0:1}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(142);this._setAccessibilityOptions(t),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._contentHeight=i.height,this._fontInfo=t.get(49),this._lineHeight=t.get(65),this._emptySelectionClipboard=t.get(36),this._copyWithSyntaxHighlighting=t.get(24),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:s}=this._context.viewModel.model.getOptions();return this.textArea.domNode.style.tabSize=`${s*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("aria-required",t.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(t.get(122))),(e.hasChanged(33)||e.hasChanged(89))&&this._ensureReadOnlyAttribute(),e.hasChanged(2)&&this._textAreaInput.writeScreenReaderContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeScreenReaderContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}_ensureReadOnlyAttribute(){const e=this._context.configuration.options;!of.enabled||e.get(33)&&e.get(89)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")}prepareRender(e){var t;this._primaryCursorPosition=new Y(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),(t=this._visibleTextArea)===null||t===void 0||t.prepareRender(e)}render(e){this._textAreaInput.writeScreenReaderContent("render"),this._render()}_render(){var e;if(this._visibleTextArea){const s=this._visibleTextArea.visibleTextareaStart,o=this._visibleTextArea.visibleTextareaEnd,r=this._visibleTextArea.startPosition,a=this._visibleTextArea.endPosition;if(r&&a&&s&&o&&o.left>=this._scrollLeft&&s.left<=this._scrollLeft+this._contentWidth){const l=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,c=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let d=this._visibleTextArea.widthOfHiddenLineTextBefore,u=this._contentLeft+s.left-this._scrollLeft,h=o.left-s.left+1;if(u<this._contentLeft){const b=this._contentLeft-u;u+=b,d+=b,h-=b}h>this._contentWidth&&(h=this._contentWidth);const f=this._context.viewModel.getViewLineData(r.lineNumber),g=f.tokens.findTokenIndexAtOffset(r.column-1),p=f.tokens.findTokenIndexAtOffset(a.column-1),_=g===p,v=this._visibleTextArea.definePresentation(_?f.tokens.getPresentation(g):null);this.textArea.domNode.scrollTop=c*this._lineHeight,this.textArea.domNode.scrollLeft=d,this._doRender({lastRenderPosition:null,top:l,left:u,width:h,height:this._lineHeight,useCover:!1,color:(hi.getColorMap()||[])[v.foreground],italic:v.italic,bold:v.bold,underline:v.underline,strikethrough:v.strikethrough})}return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const t=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(t<this._contentLeft||t>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const i=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(i<0||i>this._contentHeight){this._renderAtTopLeft();return}if(gt){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:i,left:this._textAreaWrapping?this._contentLeft:t,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const s=(e=this._textAreaInput.textAreaState.newlineCountBeforeSelection)!==null&&e!==void 0?e:this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=s*this._lineHeight;return}this._doRender({lastRenderPosition:this._primaryCursorPosition,top:i,left:this._textAreaWrapping?this._contentLeft:t,width:this._textAreaWidth,height:vb?0:1,useCover:!1})}_newlinecount(e){let t=0,i=-1;do{if(i=e.indexOf(`
`,i+1),i===-1)break;t++}while(!0);return t}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:vb?0:1,useCover:!0})}_doRender(e){this._lastRenderPosition=e.lastRenderPosition;const t=this.textArea,i=this.textAreaCover;$i(t,this._fontInfo),t.setTop(e.top),t.setLeft(e.left),t.setWidth(e.width),t.setHeight(e.height),t.setColor(e.color?J.Format.CSS.formatHex(e.color):""),t.setFontStyle(e.italic?"italic":""),e.bold&&t.setFontWeight("bold"),t.setTextDecoration(`${e.underline?" underline":""}${e.strikethrough?" line-through":""}`),i.setTop(e.useCover?e.top:0),i.setLeft(e.useCover?e.left:0),i.setWidth(e.useCover?e.width:0),i.setHeight(e.useCover?e.height:0);const s=this._context.configuration.options;s.get(56)?i.setClassName("monaco-editor-background textAreaCover "+Ec.OUTER_CLASS_NAME):s.get(66).renderType!==0?i.setClassName("monaco-editor-background textAreaCover "+Hg.CLASS_NAME):i.setClassName("monaco-editor-background textAreaCover")}};nC=UU([qU(3,$s)],nC);function KU(n,e,t){if(n.length===0)return 0;const i=document.createElement("div");i.style.position="absolute",i.style.top="-50000px",i.style.width="50000px";const s=document.createElement("span");$i(s,e),s.style.whiteSpace="pre",s.style.tabSize=`${t*e.spaceWidth}px`,s.append(n),i.appendChild(s),document.body.appendChild(i);const o=s.offsetWidth;return document.body.removeChild(i),o}function GU(n,e,t){let i=0;for(let o=0;o<n.length;o++)n.charAt(o)==="	"?i=Si.nextIndentTabStop(i,e):i++;let s="";if(!t){const o=Math.floor(i/e);i=i%e;for(let r=0;r<o;r++)s+="	"}for(let o=0;o<i;o++)s+=" ";return s}function x3(n,e,t){let i=Jn(n);return i===-1&&(i=n.length),GU(n.substring(0,i),e,t)+n.substring(i)}const ZU=()=>!0,YU=()=>!1,XU=n=>n===" "||n==="	";class rd{static shouldRecreate(e){return e.hasChanged(142)||e.hasChanged(128)||e.hasChanged(36)||e.hasChanged(75)||e.hasChanged(77)||e.hasChanged(78)||e.hasChanged(6)||e.hasChanged(10)||e.hasChanged(8)||e.hasChanged(9)||e.hasChanged(13)||e.hasChanged(126)||e.hasChanged(49)||e.hasChanged(89)}constructor(e,t,i,s){this.languageConfigurationService=s,this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const o=i.options,r=o.get(142),a=o.get(49);this.readOnly=o.get(89),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=o.get(114),this.lineHeight=a.lineHeight,this.typicalHalfwidthCharacterWidth=a.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor(r.height/this.lineHeight)-2),this.useTabStops=o.get(126),this.wordSeparators=o.get(128),this.emptySelectionClipboard=o.get(36),this.copyWithSyntaxHighlighting=o.get(24),this.multiCursorMergeOverlapping=o.get(75),this.multiCursorPaste=o.get(77),this.multiCursorLimit=o.get(78),this.autoClosingBrackets=o.get(6),this.autoClosingQuotes=o.get(10),this.autoClosingDelete=o.get(8),this.autoClosingOvertype=o.get(9),this.autoSurround=o.get(13),this.autoIndent=o.get(11),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes,!0),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();const l=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(l)for(const c of l)this.surroundingPairs[c.open]=c.close}get electricChars(){var e;if(!this._electricChars){this._electricChars={};const t=(e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)===null||e===void 0?void 0:e.getElectricCharacters();if(t)for(const i of t)this._electricChars[i]=!0}return this._electricChars}onElectricCharacter(e,t,i){const s=M_(t,i-1),o=this.languageConfigurationService.getLanguageConfiguration(s.languageId).electricCharacter;return o?o.onElectricCharacter(e,s,i-s.firstCharOffset):null}normalizeIndentation(e){return x3(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,t,i){switch(t){case"beforeWhitespace":return XU;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e,i);case"always":return ZU;case"never":return YU}}_getLanguageDefinedShouldAutoClose(e,t){const i=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet(t);return s=>i.indexOf(s)!==-1}visibleColumnFromColumn(e,t){return Si.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}columnFromVisibleColumn(e,t,i){const s=Si.columnFromVisibleColumn(e.getLineContent(t),i,this.tabSize),o=e.getLineMinColumn(t);if(s<o)return o;const r=e.getLineMaxColumn(t);return s>r?r:s}}class Xe{static fromModelState(e){return new QU(e)}static fromViewState(e){return new JU(e)}static fromModelSelection(e){const t=at.liftSelection(e),i=new Bi($.fromPositions(t.getSelectionStart()),0,0,t.getPosition(),0);return Xe.fromModelState(i)}static fromModelSelections(e){const t=[];for(let i=0,s=e.length;i<s;i++)t[i]=this.fromModelSelection(e[i]);return t}constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}}class QU{constructor(e){this.modelState=e,this.viewState=null}}class JU{constructor(e){this.modelState=null,this.viewState=e}}class Bi{constructor(e,t,i,s,o){this.selectionStart=e,this.selectionStartKind=t,this.selectionStartLeftoverVisibleColumns=i,this.position=s,this.leftoverVisibleColumns=o,this._singleCursorStateBrand=void 0,this.selection=Bi._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.selectionStartKind===e.selectionStartKind&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,i,s){return e?new Bi(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new Y(t,i),s):new Bi(new $(t,i,t,i),0,s,new Y(t,i),s)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?at.fromPositions(e.getStartPosition(),t):at.fromPositions(e.getEndPosition(),t)}}class Dn{constructor(e,t,i){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=i.shouldPushStackElementBefore,this.shouldPushStackElementAfter=i.shouldPushStackElementAfter}}function ba(n){return n==="'"||n==='"'||n==="`"}class Kl{static columnSelect(e,t,i,s,o,r){const a=Math.abs(o-i)+1,l=i>o,c=s>r,d=s<r,u=[];for(let h=0;h<a;h++){const f=i+(l?-h:h),g=e.columnFromVisibleColumn(t,f,s),p=e.columnFromVisibleColumn(t,f,r),_=e.visibleColumnFromColumn(t,new Y(f,g)),v=e.visibleColumnFromColumn(t,new Y(f,p));d&&(_>r||v<s)||c&&(v>s||_<r)||u.push(new Bi(new $(f,g,f,g),0,0,new Y(f,p),0))}if(u.length===0)for(let h=0;h<a;h++){const f=i+(l?-h:h),g=t.getLineMaxColumn(f);u.push(new Bi(new $(f,g,f,g),0,0,new Y(f,g),0))}return{viewStates:u,reversed:l,fromLineNumber:i,fromVisualColumn:s,toLineNumber:o,toVisualColumn:r}}static columnSelectLeft(e,t,i){let s=i.toViewVisualColumn;return s>0&&s--,Kl.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,s)}static columnSelectRight(e,t,i){let s=0;const o=Math.min(i.fromViewLineNumber,i.toViewLineNumber),r=Math.max(i.fromViewLineNumber,i.toViewLineNumber);for(let l=o;l<=r;l++){const c=t.getLineMaxColumn(l),d=e.visibleColumnFromColumn(t,new Y(l,c));s=Math.max(s,d)}let a=i.toViewVisualColumn;return a<s&&a++,this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,a)}static columnSelectUp(e,t,i,s){const o=s?e.pageSize:1,r=Math.max(1,i.toViewLineNumber-o);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,r,i.toViewVisualColumn)}static columnSelectDown(e,t,i,s){const o=s?e.pageSize:1,r=Math.min(t.getLineCount(),i.toViewLineNumber+o);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,r,i.toViewVisualColumn)}}class Hn{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return at.fromPositions(s.getEndPosition())}}class Np{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return at.fromPositions(s.getStartPosition())}}class Sm{constructor(e,t,i,s,o=!1){this._range=e,this._text=t,this._columnDeltaOffset=s,this._lineNumberDeltaOffset=i,this.insertsAutoWhitespace=o}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return at.fromPositions(s.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class eq{constructor(e,t,i,s=!1){this._range=e,this._text=t,this._initialSelection=i,this._forceMoveMarkers=s,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class wb{constructor(e,t,i){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=i}}class St{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-ET(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const i=t.lineNumber-1;return new Y(i,e.getLineMaxColumn(i))}else return t}static leftPositionAtomicSoftTabs(e,t,i){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const s=e.getLineMinColumn(t.lineNumber),o=e.getLineContent(t.lineNumber),r=zf.atomicPosition(o,t.column-1,i,0);if(r!==-1&&r+1>=s)return new Y(t.lineNumber,r+1)}return this.leftPosition(e,t)}static left(e,t,i){const s=e.stickyTabStops?St.leftPositionAtomicSoftTabs(t,i,e.tabSize):St.leftPosition(t,i);return new wb(s.lineNumber,s.column,0)}static moveLeft(e,t,i,s,o){let r,a;if(i.hasSelection()&&!s)r=i.selection.startLineNumber,a=i.selection.startColumn;else{const l=i.position.delta(void 0,-(o-1)),c=t.normalizePosition(St.clipPositionColumn(l,t),0),d=St.left(e,t,c);r=d.lineNumber,a=d.column}return i.move(s,r,a,0)}static clipPositionColumn(e,t){return new Y(e.lineNumber,St.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,i){return e<t?t:e>i?i:e}static rightPosition(e,t,i){return i<e.getLineMaxColumn(t)?i=i+CS(e.getLineContent(t),i-1):t<e.getLineCount()&&(t=t+1,i=e.getLineMinColumn(t)),new Y(t,i)}static rightPositionAtomicSoftTabs(e,t,i,s,o){if(i<e.getLineIndentColumn(t)){const r=e.getLineContent(t),a=zf.atomicPosition(r,i-1,s,1);if(a!==-1)return new Y(t,a+1)}return this.rightPosition(e,t,i)}static right(e,t,i){const s=e.stickyTabStops?St.rightPositionAtomicSoftTabs(t,i.lineNumber,i.column,e.tabSize,e.indentSize):St.rightPosition(t,i.lineNumber,i.column);return new wb(s.lineNumber,s.column,0)}static moveRight(e,t,i,s,o){let r,a;if(i.hasSelection()&&!s)r=i.selection.endLineNumber,a=i.selection.endColumn;else{const l=i.position.delta(void 0,o-1),c=t.normalizePosition(St.clipPositionColumn(l,t),1),d=St.right(e,t,c);r=d.lineNumber,a=d.column}return i.move(s,r,a,0)}static vertical(e,t,i,s,o,r,a,l){const c=Si.visibleColumnFromColumn(t.getLineContent(i),s,e.tabSize)+o,d=t.getLineCount(),u=i===1&&s===1,h=i===d&&s===t.getLineMaxColumn(i),f=r<i?u:h;if(i=r,i<1?(i=1,a?s=t.getLineMinColumn(i):s=Math.min(t.getLineMaxColumn(i),s)):i>d?(i=d,a?s=t.getLineMaxColumn(i):s=Math.min(t.getLineMaxColumn(i),s)):s=e.columnFromVisibleColumn(t,i,c),f?o=0:o=c-Si.visibleColumnFromColumn(t.getLineContent(i),s,e.tabSize),l!==void 0){const g=new Y(i,s),p=t.normalizePosition(g,l);o=o+(s-p.column),i=p.lineNumber,s=p.column}return new wb(i,s,o)}static down(e,t,i,s,o,r,a){return this.vertical(e,t,i,s,o,i+r,a,4)}static moveDown(e,t,i,s,o){let r,a;i.hasSelection()&&!s?(r=i.selection.endLineNumber,a=i.selection.endColumn):(r=i.position.lineNumber,a=i.position.column);let l=0,c;do if(c=St.down(e,t,r+l,a,i.leftoverVisibleColumns,o,!0),t.normalizePosition(new Y(c.lineNumber,c.column),2).lineNumber>r)break;while(l++<10&&r+l<t.getLineCount());return i.move(s,c.lineNumber,c.column,c.leftoverVisibleColumns)}static translateDown(e,t,i){const s=i.selection,o=St.down(e,t,s.selectionStartLineNumber,s.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),r=St.down(e,t,s.positionLineNumber,s.positionColumn,i.leftoverVisibleColumns,1,!1);return new Bi(new $(o.lineNumber,o.column,o.lineNumber,o.column),0,o.leftoverVisibleColumns,new Y(r.lineNumber,r.column),r.leftoverVisibleColumns)}static up(e,t,i,s,o,r,a){return this.vertical(e,t,i,s,o,i-r,a,3)}static moveUp(e,t,i,s,o){let r,a;i.hasSelection()&&!s?(r=i.selection.startLineNumber,a=i.selection.startColumn):(r=i.position.lineNumber,a=i.position.column);const l=St.up(e,t,r,a,i.leftoverVisibleColumns,o,!0);return i.move(s,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,i){const s=i.selection,o=St.up(e,t,s.selectionStartLineNumber,s.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),r=St.up(e,t,s.positionLineNumber,s.positionColumn,i.leftoverVisibleColumns,1,!1);return new Bi(new $(o.lineNumber,o.column,o.lineNumber,o.column),0,o.leftoverVisibleColumns,new Y(r.lineNumber,r.column),r.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,i,s){let o=i.position.lineNumber;for(;o>1&&this._isBlankLine(t,o);)o--;for(;o>1&&!this._isBlankLine(t,o);)o--;return i.move(s,o,t.getLineMinColumn(o),0)}static moveToNextBlankLine(e,t,i,s){const o=t.getLineCount();let r=i.position.lineNumber;for(;r<o&&this._isBlankLine(t,r);)r++;for(;r<o&&!this._isBlankLine(t,r);)r++;return i.move(s,r,t.getLineMinColumn(r),0)}static moveToBeginningOfLine(e,t,i,s){const o=i.position.lineNumber,r=t.getLineMinColumn(o),a=t.getLineFirstNonWhitespaceColumn(o)||r;let l;return i.position.column===a?l=r:l=a,i.move(s,o,l,0)}static moveToEndOfLine(e,t,i,s,o){const r=i.position.lineNumber,a=t.getLineMaxColumn(r);return i.move(s,r,a,o?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,i,s){return i.move(s,1,1,0)}static moveToEndOfBuffer(e,t,i,s){const o=t.getLineCount(),r=t.getLineMaxColumn(o);return i.move(s,o,r,0)}}class Ic{static deleteRight(e,t,i,s){const o=[];let r=e!==3;for(let a=0,l=s.length;a<l;a++){const c=s[a];let d=c;if(d.isEmpty()){const u=c.getPosition(),h=St.right(t,i,u);d=new $(h.lineNumber,h.column,u.lineNumber,u.column)}if(d.isEmpty()){o[a]=null;continue}d.startLineNumber!==d.endLineNumber&&(r=!0),o[a]=new Hn(d,"")}return[r,o]}static isAutoClosingPairDelete(e,t,i,s,o,r,a){if(t==="never"&&i==="never"||e==="never")return!1;for(let l=0,c=r.length;l<c;l++){const d=r[l],u=d.getPosition();if(!d.isEmpty())return!1;const h=o.getLineContent(u.lineNumber);if(u.column<2||u.column>=h.length+1)return!1;const f=h.charAt(u.column-2),g=s.get(f);if(!g)return!1;if(ba(f)){if(i==="never")return!1}else if(t==="never")return!1;const p=h.charAt(u.column-1);let _=!1;for(const v of g)v.open===f&&v.close===p&&(_=!0);if(!_)return!1;if(e==="auto"){let v=!1;for(let b=0,w=a.length;b<w;b++){const C=a[b];if(u.lineNumber===C.startLineNumber&&u.column===C.startColumn){v=!0;break}}if(!v)return!1}}return!0}static _runAutoClosingPairDelete(e,t,i){const s=[];for(let o=0,r=i.length;o<r;o++){const a=i[o].getPosition(),l=new $(a.lineNumber,a.column-1,a.lineNumber,a.column+1);s[o]=new Hn(l,"")}return[!0,s]}static deleteLeft(e,t,i,s,o){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,i,s,o))return this._runAutoClosingPairDelete(t,i,s);const r=[];let a=e!==2;for(let l=0,c=s.length;l<c;l++){const d=Ic.getDeleteRange(s[l],i,t);if(d.isEmpty()){r[l]=null;continue}d.startLineNumber!==d.endLineNumber&&(a=!0),r[l]=new Hn(d,"")}return[a,r]}static getDeleteRange(e,t,i){if(!e.isEmpty())return e;const s=e.getPosition();if(i.useTabStops&&s.column>1){const o=t.getLineContent(s.lineNumber),r=Jn(o),a=r===-1?o.length+1:r+1;if(s.column<=a){const l=i.visibleColumnFromColumn(t,s),c=Si.prevIndentTabStop(l,i.indentSize),d=i.columnFromVisibleColumn(t,s.lineNumber,c);return new $(s.lineNumber,d,s.lineNumber,s.column)}}return $.fromPositions(Ic.getPositionAfterDeleteLeft(s,t),s)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const i=M6(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,i+1)}else if(e.lineNumber>1){const i=e.lineNumber-1;return new Y(i,t.getLineMaxColumn(i))}else return e}static cut(e,t,i){const s=[];let o=null;i.sort((r,a)=>Y.compare(r.getStartPosition(),a.getEndPosition()));for(let r=0,a=i.length;r<a;r++){const l=i[r];if(l.isEmpty())if(e.emptySelectionClipboard){const c=l.getPosition();let d,u,h,f;c.lineNumber<t.getLineCount()?(d=c.lineNumber,u=1,h=c.lineNumber+1,f=1):c.lineNumber>1&&(o==null?void 0:o.endLineNumber)!==c.lineNumber?(d=c.lineNumber-1,u=t.getLineMaxColumn(c.lineNumber-1),h=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber)):(d=c.lineNumber,u=1,h=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber));const g=new $(d,u,h,f);o=g,g.isEmpty()?s[r]=null:s[r]=new Hn(g,"")}else s[r]=null;else s[r]=new Hn(l,"")}return new Dn(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class ni{static _createWord(e,t,i,s,o){return{start:s,end:o,wordType:t,nextCharClass:i}}static _findPreviousWordOnLine(e,t,i){const s=t.getLineContent(i.lineNumber);return this._doFindPreviousWordOnLine(s,e,i)}static _doFindPreviousWordOnLine(e,t,i){let s=0;for(let o=i.column-2;o>=0;o--){const r=e.charCodeAt(o),a=t.get(r);if(a===0){if(s===2)return this._createWord(e,s,a,o+1,this._findEndOfWord(e,t,s,o+1));s=1}else if(a===2){if(s===1)return this._createWord(e,s,a,o+1,this._findEndOfWord(e,t,s,o+1));s=2}else if(a===1&&s!==0)return this._createWord(e,s,a,o+1,this._findEndOfWord(e,t,s,o+1))}return s!==0?this._createWord(e,s,1,0,this._findEndOfWord(e,t,s,0)):null}static _findEndOfWord(e,t,i,s){const o=e.length;for(let r=s;r<o;r++){const a=e.charCodeAt(r),l=t.get(a);if(l===1||i===1&&l===2||i===2&&l===0)return r}return o}static _findNextWordOnLine(e,t,i){const s=t.getLineContent(i.lineNumber);return this._doFindNextWordOnLine(s,e,i)}static _doFindNextWordOnLine(e,t,i){let s=0;const o=e.length;for(let r=i.column-1;r<o;r++){const a=e.charCodeAt(r),l=t.get(a);if(l===0){if(s===2)return this._createWord(e,s,l,this._findStartOfWord(e,t,s,r-1),r);s=1}else if(l===2){if(s===1)return this._createWord(e,s,l,this._findStartOfWord(e,t,s,r-1),r);s=2}else if(l===1&&s!==0)return this._createWord(e,s,l,this._findStartOfWord(e,t,s,r-1),r)}return s!==0?this._createWord(e,s,1,this._findStartOfWord(e,t,s,o-1),o):null}static _findStartOfWord(e,t,i,s){for(let o=s;o>=0;o--){const r=e.charCodeAt(o),a=t.get(r);if(a===1||i===1&&a===2||i===2&&a===0)return o+1}return 0}static moveWordLeft(e,t,i,s){let o=i.lineNumber,r=i.column;r===1&&o>1&&(o=o-1,r=t.getLineMaxColumn(o));let a=ni._findPreviousWordOnLine(e,t,new Y(o,r));if(s===0)return new Y(o,a?a.start+1:1);if(s===1)return a&&a.wordType===2&&a.end-a.start===1&&a.nextCharClass===0&&(a=ni._findPreviousWordOnLine(e,t,new Y(o,a.start+1))),new Y(o,a?a.start+1:1);if(s===3){for(;a&&a.wordType===2;)a=ni._findPreviousWordOnLine(e,t,new Y(o,a.start+1));return new Y(o,a?a.start+1:1)}return a&&r<=a.end+1&&(a=ni._findPreviousWordOnLine(e,t,new Y(o,a.start+1))),new Y(o,a?a.end+1:1)}static _moveWordPartLeft(e,t){const i=t.lineNumber,s=e.getLineMaxColumn(i);if(t.column===1)return i>1?new Y(i-1,e.getLineMaxColumn(i-1)):t;const o=e.getLineContent(i);for(let r=t.column-1;r>1;r--){const a=o.charCodeAt(r-2),l=o.charCodeAt(r-1);if(a===95&&l!==95)return new Y(i,r);if(a===45&&l!==45)return new Y(i,r);if((wd(a)||gp(a))&&ka(l))return new Y(i,r);if(ka(a)&&ka(l)&&r+1<s){const c=o.charCodeAt(r);if(wd(c)||gp(c))return new Y(i,r)}}return new Y(i,1)}static moveWordRight(e,t,i,s){let o=i.lineNumber,r=i.column,a=!1;r===t.getLineMaxColumn(o)&&o<t.getLineCount()&&(a=!0,o=o+1,r=1);let l=ni._findNextWordOnLine(e,t,new Y(o,r));if(s===2)l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=ni._findNextWordOnLine(e,t,new Y(o,l.end+1))),l?r=l.end+1:r=t.getLineMaxColumn(o);else if(s===3){for(a&&(r=0);l&&(l.wordType===2||l.start+1<=r);)l=ni._findNextWordOnLine(e,t,new Y(o,l.end+1));l?r=l.start+1:r=t.getLineMaxColumn(o)}else l&&!a&&r>=l.start+1&&(l=ni._findNextWordOnLine(e,t,new Y(o,l.end+1))),l?r=l.start+1:r=t.getLineMaxColumn(o);return new Y(o,r)}static _moveWordPartRight(e,t){const i=t.lineNumber,s=e.getLineMaxColumn(i);if(t.column===s)return i<e.getLineCount()?new Y(i+1,1):t;const o=e.getLineContent(i);for(let r=t.column+1;r<s;r++){const a=o.charCodeAt(r-2),l=o.charCodeAt(r-1);if(a!==95&&l===95)return new Y(i,r);if(a!==45&&l===45)return new Y(i,r);if((wd(a)||gp(a))&&ka(l))return new Y(i,r);if(ka(a)&&ka(l)&&r+1<s){const c=o.charCodeAt(r);if(wd(c)||gp(c))return new Y(i,r)}}return new Y(i,s)}static _deleteWordLeftWhitespace(e,t){const i=e.getLineContent(t.lineNumber),s=t.column-2,o=Fc(i,s);return o+1<s?new $(t.lineNumber,o+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const i=e.wordSeparators,s=e.model,o=e.selection,r=e.whitespaceHeuristics;if(!o.isEmpty())return o;if(Ic.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const u=e.selection.getPosition();return new $(u.lineNumber,u.column-1,u.lineNumber,u.column+1)}const a=new Y(o.positionLineNumber,o.positionColumn);let l=a.lineNumber,c=a.column;if(l===1&&c===1)return null;if(r){const u=this._deleteWordLeftWhitespace(s,a);if(u)return u}let d=ni._findPreviousWordOnLine(i,s,a);return t===0?d?c=d.start+1:c>1?c=1:(l--,c=s.getLineMaxColumn(l)):(d&&c<=d.end+1&&(d=ni._findPreviousWordOnLine(i,s,new Y(l,d.start+1))),d?c=d.end+1:c>1?c=1:(l--,c=s.getLineMaxColumn(l))),new $(l,c,a.lineNumber,a.column)}static deleteInsideWord(e,t,i){if(!i.isEmpty())return i;const s=new Y(i.positionLineNumber,i.positionColumn),o=this._deleteInsideWordWhitespace(t,s);return o||this._deleteInsideWordDetermineDeleteRange(e,t,s)}static _charAtIsWhitespace(e,t){const i=e.charCodeAt(t);return i===32||i===9}static _deleteInsideWordWhitespace(e,t){const i=e.getLineContent(t.lineNumber),s=i.length;if(s===0)return null;let o=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(i,o))return null;let r=Math.min(t.column-1,s-1);if(!this._charAtIsWhitespace(i,r))return null;for(;o>0&&this._charAtIsWhitespace(i,o-1);)o--;for(;r+1<s&&this._charAtIsWhitespace(i,r+1);)r++;return new $(t.lineNumber,o+1,t.lineNumber,r+2)}static _deleteInsideWordDetermineDeleteRange(e,t,i){const s=t.getLineContent(i.lineNumber),o=s.length;if(o===0)return i.lineNumber>1?new $(i.lineNumber-1,t.getLineMaxColumn(i.lineNumber-1),i.lineNumber,1):i.lineNumber<t.getLineCount()?new $(i.lineNumber,1,i.lineNumber+1,1):new $(i.lineNumber,1,i.lineNumber,1);const r=u=>u.start+1<=i.column&&i.column<=u.end+1,a=(u,h)=>(u=Math.min(u,i.column),h=Math.max(h,i.column),new $(i.lineNumber,u,i.lineNumber,h)),l=u=>{let h=u.start+1,f=u.end+1,g=!1;for(;f-1<o&&this._charAtIsWhitespace(s,f-1);)g=!0,f++;if(!g)for(;h>1&&this._charAtIsWhitespace(s,h-2);)h--;return a(h,f)},c=ni._findPreviousWordOnLine(e,t,i);if(c&&r(c))return l(c);const d=ni._findNextWordOnLine(e,t,i);return d&&r(d)?l(d):c&&d?a(c.end+1,d.start+1):c?a(c.start+1,c.end+1):d?a(d.start+1,d.end+1):a(1,o+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const i=t.getPosition(),s=ni._moveWordPartLeft(e,i);return new $(i.lineNumber,i.column,s.lineNumber,s.column)}static _findFirstNonWhitespaceChar(e,t){const i=e.length;for(let s=t;s<i;s++){const o=e.charAt(s);if(o!==" "&&o!=="	")return s}return i}static _deleteWordRightWhitespace(e,t){const i=e.getLineContent(t.lineNumber),s=t.column-1,o=this._findFirstNonWhitespaceChar(i,s);return s+1<o?new $(t.lineNumber,t.column,t.lineNumber,o+1):null}static deleteWordRight(e,t){const i=e.wordSeparators,s=e.model,o=e.selection,r=e.whitespaceHeuristics;if(!o.isEmpty())return o;const a=new Y(o.positionLineNumber,o.positionColumn);let l=a.lineNumber,c=a.column;const d=s.getLineCount(),u=s.getLineMaxColumn(l);if(l===d&&c===u)return null;if(r){const f=this._deleteWordRightWhitespace(s,a);if(f)return f}let h=ni._findNextWordOnLine(i,s,a);return t===2?h?c=h.end+1:c<u||l===d?c=u:(l++,h=ni._findNextWordOnLine(i,s,new Y(l,1)),h?c=h.start+1:c=s.getLineMaxColumn(l)):(h&&c>=h.start+1&&(h=ni._findNextWordOnLine(i,s,new Y(l,h.end+1))),h?c=h.start+1:c<u||l===d?c=u:(l++,h=ni._findNextWordOnLine(i,s,new Y(l,1)),h?c=h.start+1:c=s.getLineMaxColumn(l))),new $(l,c,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const i=t.getPosition(),s=ni._moveWordPartRight(e,i);return new $(i.lineNumber,i.column,s.lineNumber,s.column)}static _createWordAtPosition(e,t,i){const s=new $(t,i.start+1,t,i.end+1);return{word:e.getValueInRange(s),startColumn:s.startColumn,endColumn:s.endColumn}}static getWordAtPosition(e,t,i){const s=xu(t),o=ni._findPreviousWordOnLine(s,e,i);if(o&&o.wordType===1&&o.start<=i.column-1&&i.column-1<=o.end)return ni._createWordAtPosition(e,i.lineNumber,o);const r=ni._findNextWordOnLine(s,e,i);return r&&r.wordType===1&&r.start<=i.column-1&&i.column-1<=r.end?ni._createWordAtPosition(e,i.lineNumber,r):null}static word(e,t,i,s,o){const r=xu(e.wordSeparators),a=ni._findPreviousWordOnLine(r,t,o),l=ni._findNextWordOnLine(r,t,o);if(!s){let f,g;return a&&a.wordType===1&&a.start<=o.column-1&&o.column-1<=a.end?(f=a.start+1,g=a.end+1):l&&l.wordType===1&&l.start<=o.column-1&&o.column-1<=l.end?(f=l.start+1,g=l.end+1):(a?f=a.end+1:f=1,l?g=l.start+1:g=t.getLineMaxColumn(o.lineNumber)),new Bi(new $(o.lineNumber,f,o.lineNumber,g),1,0,new Y(o.lineNumber,g),0)}let c,d;a&&a.wordType===1&&a.start<o.column-1&&o.column-1<a.end?(c=a.start+1,d=a.end+1):l&&l.wordType===1&&l.start<o.column-1&&o.column-1<l.end?(c=l.start+1,d=l.end+1):(c=o.column,d=o.column);const u=o.lineNumber;let h;if(i.selectionStart.containsPosition(o))h=i.selectionStart.endColumn;else if(o.isBeforeOrEqual(i.selectionStart.getStartPosition())){h=c;const f=new Y(u,h);i.selectionStart.containsPosition(f)&&(h=i.selectionStart.endColumn)}else{h=d;const f=new Y(u,h);i.selectionStart.containsPosition(f)&&(h=i.selectionStart.startColumn)}return i.move(!0,u,h,0)}}class on{static addCursorDown(e,t,i){const s=[];let o=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];s[o++]=new Xe(l.modelState,l.viewState),i?s[o++]=Xe.fromModelState(St.translateDown(e.cursorConfig,e.model,l.modelState)):s[o++]=Xe.fromViewState(St.translateDown(e.cursorConfig,e,l.viewState))}return s}static addCursorUp(e,t,i){const s=[];let o=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];s[o++]=new Xe(l.modelState,l.viewState),i?s[o++]=Xe.fromModelState(St.translateUp(e.cursorConfig,e.model,l.modelState)):s[o++]=Xe.fromViewState(St.translateUp(e.cursorConfig,e,l.viewState))}return s}static moveToBeginningOfLine(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o];s[o]=this._moveToLineStart(e,a,i)}return s}static _moveToLineStart(e,t,i){const s=t.viewState.position.column,o=t.modelState.position.column,r=s===o,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!r&&!(s===l)?this._moveToLineStartByView(e,t,i):this._moveToLineStartByModel(e,t,i)}static _moveToLineStartByView(e,t,i){return Xe.fromViewState(St.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,i))}static _moveToLineStartByModel(e,t,i){return Xe.fromModelState(St.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,i))}static moveToEndOfLine(e,t,i,s){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=this._moveToLineEnd(e,l,i,s)}return o}static _moveToLineEnd(e,t,i,s){const o=t.viewState.position,r=e.getLineMaxColumn(o.lineNumber),a=o.column===r,l=t.modelState.position,c=e.model.getLineMaxColumn(l.lineNumber),d=r-o.column===c-l.column;return a||d?this._moveToLineEndByModel(e,t,i,s):this._moveToLineEndByView(e,t,i,s)}static _moveToLineEndByView(e,t,i,s){return Xe.fromViewState(St.moveToEndOfLine(e.cursorConfig,e,t.viewState,i,s))}static _moveToLineEndByModel(e,t,i,s){return Xe.fromModelState(St.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,i,s))}static expandLineSelection(e,t){const i=[];for(let s=0,o=t.length;s<o;s++){const r=t[s],a=r.modelState.selection.startLineNumber,l=e.model.getLineCount();let c=r.modelState.selection.endLineNumber,d;c===l?d=e.model.getLineMaxColumn(l):(c++,d=1),i[s]=Xe.fromModelState(new Bi(new $(a,1,a,1),0,0,new Y(c,d),0))}return i}static moveToBeginningOfBuffer(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o];s[o]=Xe.fromModelState(St.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,i))}return s}static moveToEndOfBuffer(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o];s[o]=Xe.fromModelState(St.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,i))}return s}static selectAll(e,t){const i=e.model.getLineCount(),s=e.model.getLineMaxColumn(i);return Xe.fromModelState(new Bi(new $(1,1,1,1),0,0,new Y(i,s),0))}static line(e,t,i,s,o){const r=e.model.validatePosition(s),a=o?e.coordinatesConverter.validateViewPosition(new Y(o.lineNumber,o.column),r):e.coordinatesConverter.convertModelPositionToViewPosition(r);if(!i){const c=e.model.getLineCount();let d=r.lineNumber+1,u=1;return d>c&&(d=c,u=e.model.getLineMaxColumn(d)),Xe.fromModelState(new Bi(new $(r.lineNumber,1,d,u),2,0,new Y(d,u),0))}const l=t.modelState.selectionStart.getStartPosition().lineNumber;if(r.lineNumber<l)return Xe.fromViewState(t.viewState.move(!0,a.lineNumber,1,0));if(r.lineNumber>l){const c=e.getLineCount();let d=a.lineNumber+1,u=1;return d>c&&(d=c,u=e.getLineMaxColumn(d)),Xe.fromViewState(t.viewState.move(!0,d,u,0))}else{const c=t.modelState.selectionStart.getEndPosition();return Xe.fromModelState(t.modelState.move(!0,c.lineNumber,c.column,0))}}static word(e,t,i,s){const o=e.model.validatePosition(s);return Xe.fromModelState(ni.word(e.cursorConfig,e.model,t.modelState,i,o))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new Xe(t.modelState,t.viewState);const i=t.viewState.position.lineNumber,s=t.viewState.position.column;return Xe.fromViewState(new Bi(new $(i,s,i,s),0,0,new Y(i,s),0))}static moveTo(e,t,i,s,o){if(i){if(t.modelState.selectionStartKind===1)return this.word(e,t,i,s);if(t.modelState.selectionStartKind===2)return this.line(e,t,i,s,o)}const r=e.model.validatePosition(s),a=o?e.coordinatesConverter.validateViewPosition(new Y(o.lineNumber,o.column),r):e.coordinatesConverter.convertModelPositionToViewPosition(r);return Xe.fromViewState(t.viewState.move(i,a.lineNumber,a.column,0))}static simpleMove(e,t,i,s,o,r){switch(i){case 0:return r===4?this._moveHalfLineLeft(e,t,s):this._moveLeft(e,t,s,o);case 1:return r===4?this._moveHalfLineRight(e,t,s):this._moveRight(e,t,s,o);case 2:return r===2?this._moveUpByViewLines(e,t,s,o):this._moveUpByModelLines(e,t,s,o);case 3:return r===2?this._moveDownByViewLines(e,t,s,o):this._moveDownByModelLines(e,t,s,o);case 4:return r===2?t.map(a=>Xe.fromViewState(St.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,s))):t.map(a=>Xe.fromModelState(St.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,s)));case 5:return r===2?t.map(a=>Xe.fromViewState(St.moveToNextBlankLine(e.cursorConfig,e,a.viewState,s))):t.map(a=>Xe.fromModelState(St.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,s)));case 6:return this._moveToViewMinColumn(e,t,s);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,s);case 8:return this._moveToViewCenterColumn(e,t,s);case 9:return this._moveToViewMaxColumn(e,t,s);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,s);default:return null}}static viewportMove(e,t,i,s,o){const r=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(r);switch(i){case 11:{const l=this._firstLineNumberInRange(e.model,a,o),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case 13:{const l=this._lastLineNumberInRange(e.model,a,o),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case 12:{const l=Math.round((a.startLineNumber+a.endLineNumber)/2),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case 14:{const l=[];for(let c=0,d=t.length;c<d;c++){const u=t[c];l[c]=this.findPositionInViewportIfOutside(e,u,r,s)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,i,s){const o=t.viewState.position.lineNumber;if(i.startLineNumber<=o&&o<=i.endLineNumber-1)return new Xe(t.modelState,t.viewState);{let r;o>i.endLineNumber-1?r=i.endLineNumber-1:o<i.startLineNumber?r=i.startLineNumber:r=o;const a=St.vertical(e.cursorConfig,e,o,t.viewState.position.column,t.viewState.leftoverVisibleColumns,r,!1);return Xe.fromViewState(t.viewState.move(s,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,i){let s=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(s)&&s++,Math.min(t.endLineNumber,s+i-1)}static _lastLineNumberInRange(e,t,i){let s=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(s)&&s++,Math.max(s,t.endLineNumber-i+1)}static _moveLeft(e,t,i,s){return t.map(o=>Xe.fromViewState(St.moveLeft(e.cursorConfig,e,o.viewState,i,s)))}static _moveHalfLineLeft(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=Math.round(e.getLineContent(l).length/2);s[o]=Xe.fromViewState(St.moveLeft(e.cursorConfig,e,a.viewState,i,c))}return s}static _moveRight(e,t,i,s){return t.map(o=>Xe.fromViewState(St.moveRight(e.cursorConfig,e,o.viewState,i,s)))}static _moveHalfLineRight(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=Math.round(e.getLineContent(l).length/2);s[o]=Xe.fromViewState(St.moveRight(e.cursorConfig,e,a.viewState,i,c))}return s}static _moveDownByViewLines(e,t,i,s){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=Xe.fromViewState(St.moveDown(e.cursorConfig,e,l.viewState,i,s))}return o}static _moveDownByModelLines(e,t,i,s){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=Xe.fromModelState(St.moveDown(e.cursorConfig,e.model,l.modelState,i,s))}return o}static _moveUpByViewLines(e,t,i,s){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=Xe.fromViewState(St.moveUp(e.cursorConfig,e,l.viewState,i,s))}return o}static _moveUpByModelLines(e,t,i,s){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=Xe.fromModelState(St.moveUp(e.cursorConfig,e.model,l.modelState,i,s))}return o}static _moveToViewPosition(e,t,i,s,o){return Xe.fromViewState(t.viewState.move(i,s,o,0))}static _moveToModelPosition(e,t,i,s,o){return Xe.fromModelState(t.modelState.move(i,s,o,0))}static _moveToViewMinColumn(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=e.getLineMinColumn(l);s[o]=this._moveToViewPosition(e,a,i,l,c)}return s}static _moveToViewFirstNonWhitespaceColumn(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=e.getLineFirstNonWhitespaceColumn(l);s[o]=this._moveToViewPosition(e,a,i,l,c)}return s}static _moveToViewCenterColumn(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);s[o]=this._moveToViewPosition(e,a,i,l,c)}return s}static _moveToViewMaxColumn(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=e.getLineMaxColumn(l);s[o]=this._moveToViewPosition(e,a,i,l,c)}return s}static _moveToViewLastNonWhitespaceColumn(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=e.getLineLastNonWhitespaceColumn(l);s[o]=this._moveToViewPosition(e,a,i,l,c)}return s}}var v0;(function(n){const e=function(i){if(!Gn(i))return!1;const s=i;return!(!Qn(s.to)||!Io(s.select)&&!JN(s.select)||!Io(s.by)&&!Qn(s.by)||!Io(s.value)&&!Ku(s.value))};n.description={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},n.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},n.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(i){if(!i.to)return null;let s;switch(i.to){case n.RawDirection.Left:s=0;break;case n.RawDirection.Right:s=1;break;case n.RawDirection.Up:s=2;break;case n.RawDirection.Down:s=3;break;case n.RawDirection.PrevBlankLine:s=4;break;case n.RawDirection.NextBlankLine:s=5;break;case n.RawDirection.WrappedLineStart:s=6;break;case n.RawDirection.WrappedLineFirstNonWhitespaceCharacter:s=7;break;case n.RawDirection.WrappedLineColumnCenter:s=8;break;case n.RawDirection.WrappedLineEnd:s=9;break;case n.RawDirection.WrappedLineLastNonWhitespaceCharacter:s=10;break;case n.RawDirection.ViewPortTop:s=11;break;case n.RawDirection.ViewPortBottom:s=13;break;case n.RawDirection.ViewPortCenter:s=12;break;case n.RawDirection.ViewPortIfOutside:s=14;break;default:return null}let o=0;switch(i.by){case n.RawUnit.Line:o=1;break;case n.RawUnit.WrappedLine:o=2;break;case n.RawUnit.Character:o=3;break;case n.RawUnit.HalfLine:o=4;break}return{direction:s,unit:o,select:!!i.select,value:i.value||1}}n.parse=t})(v0||(v0={}));function sC(n,e,t,i){const s=Yd(e,t.startLineNumber,t.startColumn),o=i.getLanguageConfiguration(s.languageId);if(!o)return null;const r=s.getLineContent(),a=r.substr(0,t.startColumn-1-s.firstCharOffset);let l;t.isEmpty()?l=r.substr(t.startColumn-1-s.firstCharOffset):l=Yd(e,t.endLineNumber,t.endColumn).getLineContent().substr(t.endColumn-1-s.firstCharOffset);let c="";if(t.startLineNumber>1&&s.firstCharOffset===0){const p=Yd(e,t.startLineNumber-1);p.languageId===s.languageId&&(c=p.getLineContent())}const d=o.onEnter(n,c,a,l);if(!d)return null;const u=d.indentAction;let h=d.appendText;const f=d.removeText||0;h?u===_n.Indent&&(h="	"+h):u===_n.Indent||u===_n.IndentOutdent?h="	":h="";let g=GT(e,t.startLineNumber,t.startColumn);return f&&(g=g.substring(0,g.length-f)),{indentAction:u,appendText:h,removeText:f,indentation:g}}var tq=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},iq=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},Lm;const Cb=Object.create(null);function Rl(n,e){if(e<=0)return"";Cb[n]||(Cb[n]=["",n]);const t=Cb[n];for(let i=t.length;i<=e;i++)t[i]=t[i-1]+n;return t[e]}let Gl=Lm=class{static unshiftIndent(e,t,i,s,o){const r=Si.visibleColumnFromColumn(e,t,i);if(o){const a=Rl(" ",s),c=Si.prevIndentTabStop(r,s)/s;return Rl(a,c)}else{const a="	",c=Si.prevRenderTabStop(r,i)/i;return Rl(a,c)}}static shiftIndent(e,t,i,s,o){const r=Si.visibleColumnFromColumn(e,t,i);if(o){const a=Rl(" ",s),c=Si.nextIndentTabStop(r,s)/s;return Rl(a,c)}else{const a="	",c=Si.nextRenderTabStop(r,i)/i;return Rl(a,c)}}constructor(e,t,i){this._languageConfigurationService=i,this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}_addEditOperation(e,t,i){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,i):e.addEditOperation(t,i)}getEditOperations(e,t){const i=this._selection.startLineNumber;let s=this._selection.endLineNumber;this._selection.endColumn===1&&i!==s&&(s=s-1);const{tabSize:o,indentSize:r,insertSpaces:a}=this._opts,l=i===s;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(i))&&(this._useLastEditRangeForCursorEndPosition=!0);let c=0,d=0;for(let u=i;u<=s;u++,c=d){d=0;const h=e.getLineContent(u);let f=Jn(h);if(this._opts.isUnshift&&(h.length===0||f===0)||!l&&!this._opts.isUnshift&&h.length===0)continue;if(f===-1&&(f=h.length),u>1&&Si.visibleColumnFromColumn(h,f+1,o)%r!==0&&e.tokenization.isCheapToTokenize(u-1)){const _=sC(this._opts.autoIndent,e,new $(u-1,e.getLineMaxColumn(u-1),u-1,e.getLineMaxColumn(u-1)),this._languageConfigurationService);if(_){if(d=c,_.appendText)for(let v=0,b=_.appendText.length;v<b&&d<r&&_.appendText.charCodeAt(v)===32;v++)d++;_.removeText&&(d=Math.max(0,d-_.removeText));for(let v=0;v<d&&!(f===0||h.charCodeAt(f-1)!==32);v++)f--}}if(this._opts.isUnshift&&f===0)continue;let g;this._opts.isUnshift?g=Lm.unshiftIndent(h,f+1,o,r,a):g=Lm.shiftIndent(h,f+1,o,r,a),this._addEditOperation(t,new $(u,1,u,f+1),g),u===i&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=f+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(i)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const c=a?Rl(" ",r):"	";for(let d=i;d<=s;d++){const u=e.getLineContent(d);let h=Jn(u);if(!(this._opts.isUnshift&&(u.length===0||h===0))&&!(!l&&!this._opts.isUnshift&&u.length===0)&&(h===-1&&(h=u.length),!(this._opts.isUnshift&&h===0)))if(this._opts.isUnshift){h=Math.min(h,r);for(let f=0;f<h;f++)if(u.charCodeAt(f)===9){h=f+1;break}this._addEditOperation(t,new $(d,1,d,h+1),"")}else this._addEditOperation(t,new $(d,1,d,1),c),d===i&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){const s=t.getInverseEditOperations()[0];return new at(s.range.endLineNumber,s.range.endColumn,s.range.endLineNumber,s.range.endColumn)}const i=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){const s=this._selection.startColumn;return i.startColumn<=s?i:i.getDirection()===0?new at(i.startLineNumber,s,i.endLineNumber,i.endColumn):new at(i.endLineNumber,i.endColumn,i.startLineNumber,s)}return i}};Gl=Lm=tq([iq(2,mr)],Gl);class nq{constructor(e,t,i){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=i}getEditOperations(e,t){t.addTrackedEditOperation(new $(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new $(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){const i=t.getInverseEditOperations(),s=i[0].range,o=i[1].range;return new at(s.endLineNumber,s.endColumn,o.endLineNumber,o.endColumn-this._charAfterSelection.length)}}class sq{constructor(e,t,i){this._position=e,this._text=t,this._charAfter=i}getEditOperations(e,t){t.addTrackedEditOperation(new $(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return new at(s.endLineNumber,s.startColumn,s.endLineNumber,s.endColumn-this._charAfter.length)}}function oq(n,e,t){const i=n.tokenization.getLanguageIdAtPosition(e,0);if(e>1){let s,o=-1;for(s=e-1;s>=1;s--){if(n.tokenization.getLanguageIdAtPosition(s,0)!==i)return o;const r=n.getLineContent(s);if(t.shouldIgnore(r)||/^\s+$/.test(r)||r===""){o=s;continue}return s}}return-1}function eL(n,e,t,i=!0,s){if(n<4)return null;const o=s.getLanguageConfiguration(e.tokenization.getLanguageId()).indentRulesSupport;if(!o)return null;if(t<=1)return{indentation:"",action:null};for(let l=t-1;l>0&&e.getLineContent(l)==="";l--)if(l===1)return{indentation:"",action:null};const r=oq(e,t,o);if(r<0)return null;if(r<1)return{indentation:"",action:null};const a=e.getLineContent(r);if(o.shouldIncrease(a)||o.shouldIndentNextLine(a))return{indentation:$n(a),action:_n.Indent,line:r};if(o.shouldDecrease(a))return{indentation:$n(a),action:null,line:r};{if(r===1)return{indentation:$n(e.getLineContent(r)),action:null,line:r};const l=r-1,c=o.getIndentMetadata(e.getLineContent(l));if(!(c&3)&&c&4){let d=0;for(let u=l-1;u>0;u--)if(!o.shouldIndentNextLine(e.getLineContent(u))){d=u;break}return{indentation:$n(e.getLineContent(d+1)),action:null,line:d+1}}if(i)return{indentation:$n(e.getLineContent(r)),action:null,line:r};for(let d=r;d>0;d--){const u=e.getLineContent(d);if(o.shouldIncrease(u))return{indentation:$n(u),action:_n.Indent,line:d};if(o.shouldIndentNextLine(u)){let h=0;for(let f=d-1;f>0;f--)if(!o.shouldIndentNextLine(e.getLineContent(d))){h=f;break}return{indentation:$n(e.getLineContent(h+1)),action:null,line:h+1}}else if(o.shouldDecrease(u))return{indentation:$n(u),action:null,line:d}}return{indentation:$n(e.getLineContent(1)),action:null,line:1}}}function rq(n,e,t,i,s){if(n<4)return null;e.tokenization.forceTokenization(t.startLineNumber);const o=e.tokenization.getLineTokens(t.startLineNumber),r=M_(o,t.startColumn-1),a=r.getLineContent();let l=!1,c;r.firstCharOffset>0&&o.getLanguageId(0)!==r.languageId?(l=!0,c=a.substr(0,t.startColumn-1-r.firstCharOffset)):c=o.getLineContent().substring(0,t.startColumn-1);let d;t.isEmpty()?d=a.substr(t.startColumn-1-r.firstCharOffset):d=Yd(e,t.endLineNumber,t.endColumn).getLineContent().substr(t.endColumn-1-r.firstCharOffset);const u=s.getLanguageConfiguration(r.languageId).indentRulesSupport;if(!u)return null;const h=c,f=$n(c),g={tokenization:{getLineTokens:b=>e.tokenization.getLineTokens(b),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(b,w)=>e.getLanguageIdAtPosition(b,w)},getLineContent:b=>b===t.startLineNumber?h:e.getLineContent(b)},p=$n(o.getLineContent()),_=eL(n,g,t.startLineNumber+1,void 0,s);if(!_){const b=l?p:f;return{beforeEnter:b,afterEnter:b}}let v=l?p:_.indentation;return _.action===_n.Indent&&(v=i.shiftIndent(v)),u.shouldDecrease(d)&&(v=i.unshiftIndent(v)),{beforeEnter:l?p:f,afterEnter:v}}function aq(n,e,t,i,s,o){if(n<4)return null;const r=Yd(e,t.startLineNumber,t.startColumn);if(r.firstCharOffset)return null;const a=o.getLanguageConfiguration(r.languageId).indentRulesSupport;if(!a)return null;const l=r.getLineContent(),c=l.substr(0,t.startColumn-1-r.firstCharOffset);let d;if(t.isEmpty()?d=l.substr(t.startColumn-1-r.firstCharOffset):d=Yd(e,t.endLineNumber,t.endColumn).getLineContent().substr(t.endColumn-1-r.firstCharOffset),!a.shouldDecrease(c+d)&&a.shouldDecrease(c+i+d)){const u=eL(n,e,t.startLineNumber,!1,o);if(!u)return null;let h=u.indentation;return u.action!==_n.Indent&&(h=s.unshiftIndent(h)),h}return null}class Jt{static indent(e,t,i){if(t===null||i===null)return[];const s=[];for(let o=0,r=i.length;o<r;o++)s[o]=new Gl(i[o],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return s}static outdent(e,t,i){const s=[];for(let o=0,r=i.length;o<r;o++)s[o]=new Gl(i[o],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return s}static shiftIndent(e,t,i){return i=i||1,Gl.shiftIndent(t,t.length+i,e.tabSize,e.indentSize,e.insertSpaces)}static unshiftIndent(e,t,i){return i=i||1,Gl.unshiftIndent(t,t.length+i,e.tabSize,e.indentSize,e.insertSpaces)}static _distributedPaste(e,t,i,s){const o=[];for(let r=0,a=i.length;r<a;r++)o[r]=new Hn(i[r],s[r]);return new Dn(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,i,s,o){const r=[];for(let a=0,l=i.length;a<l;a++){const c=i[a],d=c.getPosition();if(o&&!c.isEmpty()&&(o=!1),o&&s.indexOf(`
`)!==s.length-1&&(o=!1),o){const u=new $(d.lineNumber,1,d.lineNumber,1);r[a]=new eq(u,s,c,!0)}else r[a]=new Hn(c,s)}return new Dn(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(e,t,i,s,o){if(s||t.length===1)return null;if(o&&o.length===t.length)return o;if(e.multiCursorPaste==="spread"){i.charCodeAt(i.length-1)===10&&(i=i.substr(0,i.length-1)),i.charCodeAt(i.length-1)===13&&(i=i.substr(0,i.length-1));const r=kg(i);if(r.length===t.length)return r}return null}static paste(e,t,i,s,o,r){const a=this._distributePasteToCursors(e,i,s,o,r);return a?(i=i.sort($.compareRangesUsingStarts),this._distributedPaste(e,t,i,a)):this._simplePaste(e,t,i,s,o)}static _goodIndentForLine(e,t,i){let s=null,o="";const r=eL(e.autoIndent,t,i,!1,e.languageConfigurationService);if(r)s=r.action,o=r.indentation;else if(i>1){let a;for(a=i-1;a>=1;a--){const d=t.getLineContent(a);if(Fc(d)>=0)break}if(a<1)return null;const l=t.getLineMaxColumn(a),c=sC(e.autoIndent,t,new $(a,l,a,l),e.languageConfigurationService);c&&(o=c.indentation+c.appendText)}return s&&(s===_n.Indent&&(o=Jt.shiftIndent(e,o)),s===_n.Outdent&&(o=Jt.unshiftIndent(e,o)),o=e.normalizeIndentation(o)),o||null}static _replaceJumpToNextIndent(e,t,i,s){let o="";const r=i.getStartPosition();if(e.insertSpaces){const a=e.visibleColumnFromColumn(t,r),l=e.indentSize,c=l-a%l;for(let d=0;d<c;d++)o+=" "}else o="	";return new Hn(i,o,s)}static tab(e,t,i){const s=[];for(let o=0,r=i.length;o<r;o++){const a=i[o];if(a.isEmpty()){const l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.tokenization.isCheapToTokenize(a.startLineNumber)){let c=this._goodIndentForLine(e,t,a.startLineNumber);c=c||"	";const d=e.normalizeIndentation(c);if(!l.startsWith(d)){s[o]=new Hn(new $(a.startLineNumber,1,a.startLineNumber,l.length+1),d,!0);continue}}s[o]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){const l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){s[o]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}s[o]=new Gl(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return s}static compositionType(e,t,i,s,o,r,a,l){const c=s.map(d=>this._compositionType(i,d,o,r,a,l));return new Dn(4,c,{shouldPushStackElementBefore:Tp(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,i,s,o,r){if(!t.isEmpty())return null;const a=t.getPosition(),l=Math.max(1,a.column-s),c=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+o),d=new $(a.lineNumber,l,a.lineNumber,c);return e.getValueInRange(d)===i&&r===0?null:new Sm(d,i,0,r)}static _typeCommand(e,t,i){return i?new Np(e,t,!0):new Hn(e,t,!0)}static _enter(e,t,i,s){if(e.autoIndent===0)return Jt._typeCommand(s,`
`,i);if(!t.tokenization.isCheapToTokenize(s.getStartPosition().lineNumber)||e.autoIndent===1){const l=t.getLineContent(s.startLineNumber),c=$n(l).substring(0,s.startColumn-1);return Jt._typeCommand(s,`
`+e.normalizeIndentation(c),i)}const o=sC(e.autoIndent,t,s,e.languageConfigurationService);if(o){if(o.indentAction===_n.None)return Jt._typeCommand(s,`
`+e.normalizeIndentation(o.indentation+o.appendText),i);if(o.indentAction===_n.Indent)return Jt._typeCommand(s,`
`+e.normalizeIndentation(o.indentation+o.appendText),i);if(o.indentAction===_n.IndentOutdent){const l=e.normalizeIndentation(o.indentation),c=e.normalizeIndentation(o.indentation+o.appendText),d=`
`+c+`
`+l;return i?new Np(s,d,!0):new Sm(s,d,-1,c.length-l.length,!0)}else if(o.indentAction===_n.Outdent){const l=Jt.unshiftIndent(e,o.indentation);return Jt._typeCommand(s,`
`+e.normalizeIndentation(l+o.appendText),i)}}const r=t.getLineContent(s.startLineNumber),a=$n(r).substring(0,s.startColumn-1);if(e.autoIndent>=4){const l=rq(e.autoIndent,t,s,{unshiftIndent:c=>Jt.unshiftIndent(e,c),shiftIndent:c=>Jt.shiftIndent(e,c),normalizeIndentation:c=>e.normalizeIndentation(c)},e.languageConfigurationService);if(l){let c=e.visibleColumnFromColumn(t,s.getEndPosition());const d=s.endColumn,u=t.getLineContent(s.endLineNumber),h=Jn(u);if(h>=0?s=s.setEndPosition(s.endLineNumber,Math.max(s.endColumn,h+1)):s=s.setEndPosition(s.endLineNumber,t.getLineMaxColumn(s.endLineNumber)),i)return new Np(s,`
`+e.normalizeIndentation(l.afterEnter),!0);{let f=0;return d<=h+1&&(e.insertSpaces||(c=Math.ceil(c/e.indentSize)),f=Math.min(c+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new Sm(s,`
`+e.normalizeIndentation(l.afterEnter),0,f,!0)}}}return Jt._typeCommand(s,`
`+e.normalizeIndentation(a),i)}static _isAutoIndentType(e,t,i){if(e.autoIndent<4)return!1;for(let s=0,o=i.length;s<o;s++)if(!t.tokenization.isCheapToTokenize(i[s].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(e,t,i,s){const o=GT(t,i.startLineNumber,i.startColumn),r=aq(e.autoIndent,t,i,s,{shiftIndent:a=>Jt.shiftIndent(e,a),unshiftIndent:a=>Jt.unshiftIndent(e,a)},e.languageConfigurationService);if(r===null)return null;if(r!==e.normalizeIndentation(o)){const a=t.getLineFirstNonWhitespaceColumn(i.startLineNumber);return a===0?Jt._typeCommand(new $(i.startLineNumber,1,i.endLineNumber,i.endColumn),e.normalizeIndentation(r)+s,!1):Jt._typeCommand(new $(i.startLineNumber,1,i.endLineNumber,i.endColumn),e.normalizeIndentation(r)+t.getLineContent(i.startLineNumber).substring(a-1,i.startColumn-1)+s,!1)}return null}static _isAutoClosingOvertype(e,t,i,s,o){if(e.autoClosingOvertype==="never"||!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(o))return!1;for(let r=0,a=i.length;r<a;r++){const l=i[r];if(!l.isEmpty())return!1;const c=l.getPosition(),d=t.getLineContent(c.lineNumber);if(d.charAt(c.column-1)!==o)return!1;const h=ba(o);if((c.column>2?d.charCodeAt(c.column-2):0)===92&&h)return!1;if(e.autoClosingOvertype==="auto"){let g=!1;for(let p=0,_=s.length;p<_;p++){const v=s[p];if(c.lineNumber===v.startLineNumber&&c.column===v.startColumn){g=!0;break}}if(!g)return!1}}return!0}static _runAutoClosingOvertype(e,t,i,s,o){const r=[];for(let a=0,l=s.length;a<l;a++){const d=s[a].getPosition(),u=new $(d.lineNumber,d.column,d.lineNumber,d.column+1);r[a]=new Hn(u,o)}return new Dn(4,r,{shouldPushStackElementBefore:Tp(e,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(e,t){const i=t.charAt(0),s=e.autoClosingPairs.autoClosingPairsOpenByStart.get(i)||[],o=e.autoClosingPairs.autoClosingPairsCloseByStart.get(i)||[],r=s.some(l=>t.startsWith(l.open)),a=o.some(l=>t.startsWith(l.close));return!r&&a}static _findAutoClosingPairOpen(e,t,i,s){const o=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(s);if(!o)return null;let r=null;for(const a of o)if(r===null||a.open.length>r.open.length){let l=!0;for(const c of i)if(t.getValueInRange(new $(c.lineNumber,c.column-a.open.length+1,c.lineNumber,c.column))+s!==a.open){l=!1;break}l&&(r=a)}return r}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const i=t.close.charAt(t.close.length-1),s=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(i)||[];let o=null;for(const r of s)r.open!==t.open&&t.open.includes(r.open)&&t.close.endsWith(r.close)&&(!o||r.open.length>o.open.length)&&(o=r);return o}static _getAutoClosingPairClose(e,t,i,s,o){const r=ba(s),a=r?e.autoClosingQuotes:e.autoClosingBrackets,l=r?e.shouldAutoCloseBefore.quote:e.shouldAutoCloseBefore.bracket;if(a==="never")return null;for(const g of i)if(!g.isEmpty())return null;const c=i.map(g=>{const p=g.getPosition();return o?{lineNumber:p.lineNumber,beforeColumn:p.column-s.length,afterColumn:p.column}:{lineNumber:p.lineNumber,beforeColumn:p.column,afterColumn:p.column}}),d=this._findAutoClosingPairOpen(e,t,c.map(g=>new Y(g.lineNumber,g.beforeColumn)),s);if(!d)return null;const u=this._findContainedAutoClosingPair(e,d),h=u?u.close:"";let f=!0;for(const g of c){const{lineNumber:p,beforeColumn:_,afterColumn:v}=g,b=t.getLineContent(p),w=b.substring(0,_-1),C=b.substring(v-1);if(C.startsWith(h)||(f=!1),C.length>0){const x=C.charAt(0);if(!Jt._isBeforeClosingBrace(e,C)&&!l(x))return null}if(d.open.length===1&&(s==="'"||s==='"')&&a!=="always"){const x=xu(e.wordSeparators);if(w.length>0){const I=w.charCodeAt(w.length-1);if(x.get(I)===0)return null}}if(!t.tokenization.isCheapToTokenize(p))return null;t.tokenization.forceTokenization(p);const S=t.tokenization.getLineTokens(p),k=M_(S,_-1);if(!d.shouldAutoClose(k,_-k.firstCharOffset))return null;const L=d.findNeutralCharacter();if(L){const x=t.tokenization.getTokenTypeIfInsertingCharacter(p,_,L);if(!d.isOK(x))return null}}return f?d.close.substring(0,d.close.length-h.length):d.close}static _runAutoClosingOpenCharType(e,t,i,s,o,r,a){const l=[];for(let c=0,d=s.length;c<d;c++){const u=s[c];l[c]=new D3(u,o,!r,a)}return new Dn(4,l,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(e,t){return ba(t)?e.autoSurround==="quotes"||e.autoSurround==="languageDefined":e.autoSurround==="brackets"||e.autoSurround==="languageDefined"}static _isSurroundSelectionType(e,t,i,s){if(!Jt._shouldSurroundChar(e,s)||!e.surroundingPairs.hasOwnProperty(s))return!1;const o=ba(s);for(const r of i){if(r.isEmpty())return!1;let a=!0;for(let l=r.startLineNumber;l<=r.endLineNumber;l++){const c=t.getLineContent(l),d=l===r.startLineNumber?r.startColumn-1:0,u=l===r.endLineNumber?r.endColumn-1:c.length,h=c.substring(d,u);if(/[^ \t]/.test(h)){a=!1;break}}if(a)return!1;if(o&&r.startLineNumber===r.endLineNumber&&r.startColumn+1===r.endColumn){const l=t.getValueInRange(r);if(ba(l))return!1}}return!0}static _runSurroundSelectionType(e,t,i,s,o){const r=[];for(let a=0,l=s.length;a<l;a++){const c=s[a],d=t.surroundingPairs[o];r[a]=new nq(c,o,d)}return new Dn(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(e,t,i){return!!(i.length===1&&t.tokenization.isCheapToTokenize(i[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,i,s,o){if(!t.electricChars.hasOwnProperty(o)||!s.isEmpty())return null;const r=s.getPosition();i.tokenization.forceTokenization(r.lineNumber);const a=i.tokenization.getLineTokens(r.lineNumber);let l;try{l=t.onElectricCharacter(o,a,r.column)}catch(c){return $t(c),null}if(!l)return null;if(l.matchOpenBracket){const c=(a.getLineContent()+o).lastIndexOf(l.matchOpenBracket)+1,d=i.bracketPairs.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:r.lineNumber,column:c},500);if(d){if(d.startLineNumber===r.lineNumber)return null;const u=i.getLineContent(d.startLineNumber),h=$n(u),f=t.normalizeIndentation(h),g=i.getLineContent(r.lineNumber),p=i.getLineFirstNonWhitespaceColumn(r.lineNumber)||r.column,_=g.substring(p-1,r.column-1),v=f+_+o,b=new $(r.lineNumber,1,r.lineNumber,r.column),w=new Hn(b,v);return new Dn(yb(v,e),[w],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(e,t,i,s,o,r){if(!s)return null;let a=null;for(const u of s)if(a===null)a=u.insertedText;else if(a!==u.insertedText)return null;if(!a||a.length!==1)return null;const l=a;let c=!1;for(const u of s)if(u.deletedText.length!==0){c=!0;break}if(c){if(!Jt._shouldSurroundChar(t,l)||!t.surroundingPairs.hasOwnProperty(l))return null;const u=ba(l);for(const g of s)if(g.deletedSelectionStart!==0||g.deletedSelectionEnd!==g.deletedText.length||/^[ \t]+$/.test(g.deletedText)||u&&ba(g.deletedText))return null;const h=[];for(const g of o){if(!g.isEmpty())return null;h.push(g.getPosition())}if(h.length!==s.length)return null;const f=[];for(let g=0,p=h.length;g<p;g++)f.push(new sq(h[g],s[g].deletedText,t.surroundingPairs[l]));return new Dn(4,f,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(t,i,o,r,l)){const u=o.map(h=>new Hn(new $(h.positionLineNumber,h.positionColumn,h.positionLineNumber,h.positionColumn+1),"",!1));return new Dn(4,u,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const d=this._getAutoClosingPairClose(t,i,o,l,!0);return d!==null?this._runAutoClosingOpenCharType(e,t,i,o,l,!0,d):null}static typeWithInterceptors(e,t,i,s,o,r,a){if(!e&&a===`
`){const d=[];for(let u=0,h=o.length;u<h;u++)d[u]=Jt._enter(i,s,!1,o[u]);return new Dn(4,d,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoIndentType(i,s,o)){const d=[];let u=!1;for(let h=0,f=o.length;h<f;h++)if(d[h]=this._runAutoIndentType(i,s,o[h],a),!d[h]){u=!0;break}if(!u)return new Dn(4,d,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(i,s,o,r,a))return this._runAutoClosingOvertype(t,i,s,o,a);if(!e){const d=this._getAutoClosingPairClose(i,s,o,a,!1);if(d)return this._runAutoClosingOpenCharType(t,i,s,o,a,!1,d)}if(!e&&this._isSurroundSelectionType(i,s,o,a))return this._runSurroundSelectionType(t,i,s,o,a);if(!e&&this._isTypeInterceptorElectricChar(i,s,o)){const d=this._typeInterceptorElectricChar(t,i,s,o[0],a);if(d)return d}const l=[];for(let d=0,u=o.length;d<u;d++)l[d]=new Hn(o[d],a);const c=yb(a,t);return new Dn(c,l,{shouldPushStackElementBefore:Tp(t,c),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(e,t,i,s,o){const r=[];for(let l=0,c=s.length;l<c;l++)r[l]=new Hn(s[l],o);const a=yb(o,e);return new Dn(a,r,{shouldPushStackElementBefore:Tp(e,a),shouldPushStackElementAfter:!1})}static lineInsertBefore(e,t,i){if(t===null||i===null)return[];const s=[];for(let o=0,r=i.length;o<r;o++){let a=i[o].positionLineNumber;if(a===1)s[o]=new Np(new $(1,1,1,1),`
`);else{a--;const l=t.getLineMaxColumn(a);s[o]=this._enter(e,t,!1,new $(a,l,a,l))}}return s}static lineInsertAfter(e,t,i){if(t===null||i===null)return[];const s=[];for(let o=0,r=i.length;o<r;o++){const a=i[o].positionLineNumber,l=t.getLineMaxColumn(a);s[o]=this._enter(e,t,!1,new $(a,l,a,l))}return s}static lineBreakInsert(e,t,i){const s=[];for(let o=0,r=i.length;o<r;o++)s[o]=this._enter(e,t,!0,i[o]);return s}}class D3 extends Sm{constructor(e,t,i,s){super(e,(i?t:"")+s,0,-s.length),this._openCharacter=t,this._closeCharacter=s,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return this.closeCharacterRange=new $(s.startLineNumber,s.endColumn-this._closeCharacter.length,s.endLineNumber,s.endColumn),this.enclosingRange=new $(s.startLineNumber,s.endColumn-this._openCharacter.length-this._closeCharacter.length,s.endLineNumber,s.endColumn),super.computeCursorState(e,t)}}class lq{constructor(e,t,i,s,o,r){this.deletedText=e,this.deletedSelectionStart=t,this.deletedSelectionEnd=i,this.insertedText=s,this.insertedSelectionStart=o,this.insertedSelectionEnd=r}}function yb(n,e){return n===" "?e===5||e===6?6:5:4}function Tp(n,e){return Q2(n)&&!Q2(e)?!0:n===5?!1:X2(n)!==X2(e)}function X2(n){return n===6||n===5?"space":n}function Q2(n){return n===4||n===5||n===6}var Se;(function(n){n.editorSimpleInput=new Ie("editorSimpleInput",!1,!0),n.editorTextFocus=new Ie("editorTextFocus",!1,m("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),n.focus=new Ie("editorFocus",!1,m("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),n.textInputFocus=new Ie("textInputFocus",!1,m("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),n.readOnly=new Ie("editorReadonly",!1,m("editorReadonly","Whether the editor is read-only")),n.inDiffEditor=new Ie("inDiffEditor",!1,m("inDiffEditor","Whether the context is a diff editor")),n.isEmbeddedDiffEditor=new Ie("isEmbeddedDiffEditor",!1,m("isEmbeddedDiffEditor","Whether the context is an embedded diff editor")),n.comparingMovedCode=new Ie("comparingMovedCode",!1,m("comparingMovedCode","Whether a moved code block is selected for comparison")),n.accessibleDiffViewerVisible=new Ie("accessibleDiffViewerVisible",!1,m("accessibleDiffViewerVisible","Whether the accessible diff viewer is visible")),n.diffEditorRenderSideBySideInlineBreakpointReached=new Ie("diffEditorRenderSideBySideInlineBreakpointReached",!1,m("diffEditorRenderSideBySideInlineBreakpointReached","Whether the diff editor render side by side inline breakpoint is reached")),n.columnSelection=new Ie("editorColumnSelection",!1,m("editorColumnSelection","Whether `editor.columnSelection` is enabled")),n.writable=n.readOnly.toNegated(),n.hasNonEmptySelection=new Ie("editorHasSelection",!1,m("editorHasSelection","Whether the editor has text selected")),n.hasOnlyEmptySelection=n.hasNonEmptySelection.toNegated(),n.hasMultipleSelections=new Ie("editorHasMultipleSelections",!1,m("editorHasMultipleSelections","Whether the editor has multiple selections")),n.hasSingleSelection=n.hasMultipleSelections.toNegated(),n.tabMovesFocus=new Ie("editorTabMovesFocus",!1,m("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),n.tabDoesNotMoveFocus=n.tabMovesFocus.toNegated(),n.isInWalkThroughSnippet=new Ie("isInEmbeddedEditor",!1,!0),n.canUndo=new Ie("canUndo",!1,!0),n.canRedo=new Ie("canRedo",!1,!0),n.hoverVisible=new Ie("editorHoverVisible",!1,m("editorHoverVisible","Whether the editor hover is visible")),n.hoverFocused=new Ie("editorHoverFocused",!1,m("editorHoverFocused","Whether the editor hover is focused")),n.stickyScrollFocused=new Ie("stickyScrollFocused",!1,m("stickyScrollFocused","Whether the sticky scroll is focused")),n.stickyScrollVisible=new Ie("stickyScrollVisible",!1,m("stickyScrollVisible","Whether the sticky scroll is visible")),n.standaloneColorPickerVisible=new Ie("standaloneColorPickerVisible",!1,m("standaloneColorPickerVisible","Whether the standalone color picker is visible")),n.standaloneColorPickerFocused=new Ie("standaloneColorPickerFocused",!1,m("standaloneColorPickerFocused","Whether the standalone color picker is focused")),n.inCompositeEditor=new Ie("inCompositeEditor",void 0,m("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),n.notInCompositeEditor=n.inCompositeEditor.toNegated(),n.languageId=new Ie("editorLangId","",m("editorLangId","The language identifier of the editor")),n.hasCompletionItemProvider=new Ie("editorHasCompletionItemProvider",!1,m("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),n.hasCodeActionsProvider=new Ie("editorHasCodeActionsProvider",!1,m("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),n.hasCodeLensProvider=new Ie("editorHasCodeLensProvider",!1,m("editorHasCodeLensProvider","Whether the editor has a code lens provider")),n.hasDefinitionProvider=new Ie("editorHasDefinitionProvider",!1,m("editorHasDefinitionProvider","Whether the editor has a definition provider")),n.hasDeclarationProvider=new Ie("editorHasDeclarationProvider",!1,m("editorHasDeclarationProvider","Whether the editor has a declaration provider")),n.hasImplementationProvider=new Ie("editorHasImplementationProvider",!1,m("editorHasImplementationProvider","Whether the editor has an implementation provider")),n.hasTypeDefinitionProvider=new Ie("editorHasTypeDefinitionProvider",!1,m("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),n.hasHoverProvider=new Ie("editorHasHoverProvider",!1,m("editorHasHoverProvider","Whether the editor has a hover provider")),n.hasDocumentHighlightProvider=new Ie("editorHasDocumentHighlightProvider",!1,m("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),n.hasDocumentSymbolProvider=new Ie("editorHasDocumentSymbolProvider",!1,m("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),n.hasReferenceProvider=new Ie("editorHasReferenceProvider",!1,m("editorHasReferenceProvider","Whether the editor has a reference provider")),n.hasRenameProvider=new Ie("editorHasRenameProvider",!1,m("editorHasRenameProvider","Whether the editor has a rename provider")),n.hasSignatureHelpProvider=new Ie("editorHasSignatureHelpProvider",!1,m("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),n.hasInlayHintsProvider=new Ie("editorHasInlayHintsProvider",!1,m("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),n.hasDocumentFormattingProvider=new Ie("editorHasDocumentFormattingProvider",!1,m("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),n.hasDocumentSelectionFormattingProvider=new Ie("editorHasDocumentSelectionFormattingProvider",!1,m("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),n.hasMultipleDocumentFormattingProvider=new Ie("editorHasMultipleDocumentFormattingProvider",!1,m("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),n.hasMultipleDocumentSelectionFormattingProvider=new Ie("editorHasMultipleDocumentSelectionFormattingProvider",!1,m("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(Se||(Se={}));const ot=0;class jt extends kc{runEditorCommand(e,t,i){const s=t._getViewModel();s&&this.runCoreEditorCommand(s,i||{})}}var Ui;(function(n){const e=function(i){if(!Gn(i))return!1;const s=i;return!(!Qn(s.to)||!Io(s.by)&&!Qn(s.by)||!Io(s.value)&&!Ku(s.value)||!Io(s.revealCursor)&&!JN(s.revealCursor))};n.description={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},n.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},n.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"};function t(i){let s;switch(i.to){case n.RawDirection.Up:s=1;break;case n.RawDirection.Right:s=2;break;case n.RawDirection.Down:s=3;break;case n.RawDirection.Left:s=4;break;default:return null}let o;switch(i.by){case n.RawUnit.Line:o=1;break;case n.RawUnit.WrappedLine:o=2;break;case n.RawUnit.Page:o=3;break;case n.RawUnit.HalfPage:o=4;break;case n.RawUnit.Editor:o=5;break;case n.RawUnit.Column:o=6;break;default:o=2}const r=Math.floor(i.value||1),a=!!i.revealCursor;return{direction:s,unit:o,value:r,revealCursor:a,select:!!i.select}}n.parse=t})(Ui||(Ui={}));var Md;(function(n){const e=function(t){if(!Gn(t))return!1;const i=t;return!(!Ku(i.lineNumber)&&!Qn(i.lineNumber)||!Io(i.at)&&!Qn(i.at))};n.description={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},n.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(Md||(Md={}));class oC{constructor(e){e.addImplementation(1e4,"code-editor",(t,i)=>{const s=t.get(oi).getFocusedCodeEditor();return s&&s.hasTextFocus()?this._runEditorCommand(t,s,i):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,i)=>{const s=document.activeElement;return s&&["input","textarea"].indexOf(s.tagName.toLowerCase())>=0?(this.runDOMCommand(),!0):!1}),e.addImplementation(0,"generic-dom",(t,i)=>{const s=t.get(oi).getActiveCodeEditor();return s?(s.focus(),this._runEditorCommand(t,s,i)):!1})}_runEditorCommand(e,t,i){const s=this.runEditorCommand(e,t,i);return s||!0}}var Di;(function(n){class e extends jt{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){if(!w.position)return;b.model.pushStackElement(),b.setCursorStates(w.source,3,[on.moveTo(b,b.getPrimaryCursorState(),this._inSelectionMode,w.position,w.viewPosition)])&&w.revealType!==2&&b.revealPrimaryCursor(w.source,!0,!0)}}n.MoveTo=He(new e({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),n.MoveToSelect=He(new e({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class t extends jt{runCoreEditorCommand(b,w){b.model.pushStackElement();const C=this._getColumnSelectResult(b,b.getPrimaryCursorState(),b.getCursorColumnSelectData(),w);C!==null&&(b.setCursorStates(w.source,3,C.viewStates.map(S=>Xe.fromViewState(S))),b.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:C.fromLineNumber,fromViewVisualColumn:C.fromVisualColumn,toViewLineNumber:C.toLineNumber,toViewVisualColumn:C.toVisualColumn}),C.reversed?b.revealTopMostCursor(w.source):b.revealBottomMostCursor(w.source))}}n.ColumnSelect=He(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(v,b,w,C){if(typeof C.position>"u"||typeof C.viewPosition>"u"||typeof C.mouseColumn>"u")return null;const S=v.model.validatePosition(C.position),k=v.coordinatesConverter.validateViewPosition(new Y(C.viewPosition.lineNumber,C.viewPosition.column),S),L=C.doColumnSelect?w.fromViewLineNumber:k.lineNumber,x=C.doColumnSelect?w.fromViewVisualColumn:C.mouseColumn-1;return Kl.columnSelect(v.cursorConfig,v,L,x,k.lineNumber,C.mouseColumn-1)}}),n.CursorColumnSelectLeft=He(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(v,b,w,C){return Kl.columnSelectLeft(v.cursorConfig,v,w)}}),n.CursorColumnSelectRight=He(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(v,b,w,C){return Kl.columnSelectRight(v.cursorConfig,v,w)}});class i extends t{constructor(b){super(b),this._isPaged=b.isPaged}_getColumnSelectResult(b,w,C,S){return Kl.columnSelectUp(b.cursorConfig,b,C,this._isPaged)}}n.CursorColumnSelectUp=He(new i({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:3600,linux:{primary:0}}})),n.CursorColumnSelectPageUp=He(new i({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:3595,linux:{primary:0}}}));class s extends t{constructor(b){super(b),this._isPaged=b.isPaged}_getColumnSelectResult(b,w,C,S){return Kl.columnSelectDown(b.cursorConfig,b,C,this._isPaged)}}n.CursorColumnSelectDown=He(new s({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:3602,linux:{primary:0}}})),n.CursorColumnSelectPageDown=He(new s({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:3596,linux:{primary:0}}}));class o extends jt{constructor(){super({id:"cursorMove",precondition:void 0,description:v0.description})}runCoreEditorCommand(b,w){const C=v0.parse(w);C&&this._runCursorMove(b,w.source,C)}_runCursorMove(b,w,C){b.model.pushStackElement(),b.setCursorStates(w,3,o._move(b,b.getCursorStates(),C)),b.revealPrimaryCursor(w,!0)}static _move(b,w,C){const S=C.select,k=C.value;switch(C.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return on.simpleMove(b,w,C.direction,S,k,C.unit);case 11:case 13:case 12:case 14:return on.viewportMove(b,w,C.direction,S,k);default:return null}}}n.CursorMoveImpl=o,n.CursorMove=He(new o);class r extends jt{constructor(b){super(b),this._staticArgs=b.args}runCoreEditorCommand(b,w){let C=this._staticArgs;this._staticArgs.value===-1&&(C={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:w.pageSize||b.cursorConfig.pageSize}),b.model.pushStackElement(),b.setCursorStates(w.source,3,on.simpleMove(b,b.getCursorStates(),C.direction,C.select,C.value,C.unit)),b.revealPrimaryCursor(w.source,!0)}}n.CursorLeft=He(new r({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),n.CursorLeftSelect=He(new r({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:1039}})),n.CursorRight=He(new r({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),n.CursorRightSelect=He(new r({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:1041}})),n.CursorUp=He(new r({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),n.CursorUpSelect=He(new r({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),n.CursorPageUp=He(new r({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:11}})),n.CursorPageUpSelect=He(new r({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:1035}})),n.CursorDown=He(new r({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),n.CursorDownSelect=He(new r({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),n.CursorPageDown=He(new r({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:12}})),n.CursorPageDownSelect=He(new r({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:1036}})),n.CreateCursor=He(new class extends jt{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(v,b){if(!b.position)return;let w;b.wholeLine?w=on.line(v,v.getPrimaryCursorState(),!1,b.position,b.viewPosition):w=on.moveTo(v,v.getPrimaryCursorState(),!1,b.position,b.viewPosition);const C=v.getCursorStates();if(C.length>1){const S=w.modelState?w.modelState.position:null,k=w.viewState?w.viewState.position:null;for(let L=0,x=C.length;L<x;L++){const I=C[L];if(!(S&&!I.modelState.selection.containsPosition(S))&&!(k&&!I.viewState.selection.containsPosition(k))){C.splice(L,1),v.model.pushStackElement(),v.setCursorStates(b.source,3,C);return}}}C.push(w),v.model.pushStackElement(),v.setCursorStates(b.source,3,C)}}),n.LastCursorMoveToSelect=He(new class extends jt{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(v,b){if(!b.position)return;const w=v.getLastAddedCursorIndex(),C=v.getCursorStates(),S=C.slice(0);S[w]=on.moveTo(v,C[w],!0,b.position,b.viewPosition),v.model.pushStackElement(),v.setCursorStates(b.source,3,S)}});class a extends jt{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,on.moveToBeginningOfLine(b,b.getCursorStates(),this._inSelectionMode)),b.revealPrimaryCursor(w.source,!0)}}n.CursorHome=He(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),n.CursorHomeSelect=He(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class l extends jt{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,this._exec(b.getCursorStates())),b.revealPrimaryCursor(w.source,!0)}_exec(b){const w=[];for(let C=0,S=b.length;C<S;C++){const k=b[C],L=k.modelState.position.lineNumber;w[C]=Xe.fromModelState(k.modelState.move(this._inSelectionMode,L,1,0))}return w}}n.CursorLineStart=He(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:0,mac:{primary:287}}})),n.CursorLineStartSelect=He(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:0,mac:{primary:1311}}}));class c extends jt{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,on.moveToEndOfLine(b,b.getCursorStates(),this._inSelectionMode,w.sticky||!1)),b.revealPrimaryCursor(w.source,!0)}}n.CursorEnd=He(new c({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:ot,kbExpr:Se.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},description:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:m("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),n.CursorEndSelect=He(new c({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:ot,kbExpr:Se.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},description:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:m("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class d extends jt{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,this._exec(b,b.getCursorStates())),b.revealPrimaryCursor(w.source,!0)}_exec(b,w){const C=[];for(let S=0,k=w.length;S<k;S++){const L=w[S],x=L.modelState.position.lineNumber,I=b.model.getLineMaxColumn(x);C[S]=Xe.fromModelState(L.modelState.move(this._inSelectionMode,x,I,0))}return C}}n.CursorLineEnd=He(new d({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:0,mac:{primary:291}}})),n.CursorLineEndSelect=He(new d({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:0,mac:{primary:1315}}}));class u extends jt{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,on.moveToBeginningOfBuffer(b,b.getCursorStates(),this._inSelectionMode)),b.revealPrimaryCursor(w.source,!0)}}n.CursorTop=He(new u({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:2062,mac:{primary:2064}}})),n.CursorTopSelect=He(new u({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:3086,mac:{primary:3088}}}));class h extends jt{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,on.moveToEndOfBuffer(b,b.getCursorStates(),this._inSelectionMode)),b.revealPrimaryCursor(w.source,!0)}}n.CursorBottom=He(new h({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:2061,mac:{primary:2066}}})),n.CursorBottomSelect=He(new h({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:3085,mac:{primary:3090}}}));class f extends jt{constructor(){super({id:"editorScroll",precondition:void 0,description:Ui.description})}determineScrollMethod(b){const w=[6],C=[1,2,3,4,5,6],S=[4,2],k=[1,3];return w.includes(b.unit)&&S.includes(b.direction)?this._runHorizontalEditorScroll.bind(this):C.includes(b.unit)&&k.includes(b.direction)?this._runVerticalEditorScroll.bind(this):null}runCoreEditorCommand(b,w){const C=Ui.parse(w);if(!C)return;const S=this.determineScrollMethod(C);S&&S(b,w.source,C)}_runVerticalEditorScroll(b,w,C){const S=this._computeDesiredScrollTop(b,C);if(C.revealCursor){const k=b.getCompletelyVisibleViewRangeAtScrollTop(S);b.setCursorStates(w,3,[on.findPositionInViewportIfOutside(b,b.getPrimaryCursorState(),k,C.select)])}b.viewLayout.setScrollPosition({scrollTop:S},0)}_computeDesiredScrollTop(b,w){if(w.unit===1){const k=b.viewLayout.getFutureViewport(),L=b.getCompletelyVisibleViewRangeAtScrollTop(k.top),x=b.coordinatesConverter.convertViewRangeToModelRange(L);let I;w.direction===1?I=Math.max(1,x.startLineNumber-w.value):I=Math.min(b.model.getLineCount(),x.startLineNumber+w.value);const A=b.coordinatesConverter.convertModelPositionToViewPosition(new Y(I,1));return b.viewLayout.getVerticalOffsetForLineNumber(A.lineNumber)}if(w.unit===5){let k=0;return w.direction===3&&(k=b.model.getLineCount()-b.cursorConfig.pageSize),b.viewLayout.getVerticalOffsetForLineNumber(k)}let C;w.unit===3?C=b.cursorConfig.pageSize*w.value:w.unit===4?C=Math.round(b.cursorConfig.pageSize/2)*w.value:C=w.value;const S=(w.direction===1?-1:1)*C;return b.viewLayout.getCurrentScrollTop()+S*b.cursorConfig.lineHeight}_runHorizontalEditorScroll(b,w,C){const S=this._computeDesiredScrollLeft(b,C);b.viewLayout.setScrollPosition({scrollLeft:S},0)}_computeDesiredScrollLeft(b,w){const C=(w.direction===4?-1:1)*w.value;return b.viewLayout.getCurrentScrollLeft()+C*b.cursorConfig.typicalHalfwidthCharacterWidth}}n.EditorScrollImpl=f,n.EditorScroll=He(new f),n.ScrollLineUp=He(new class extends jt{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(v,b){n.EditorScroll.runCoreEditorCommand(v,{to:Ui.RawDirection.Up,by:Ui.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:b.source})}}),n.ScrollPageUp=He(new class extends jt{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(v,b){n.EditorScroll.runCoreEditorCommand(v,{to:Ui.RawDirection.Up,by:Ui.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:b.source})}}),n.ScrollEditorTop=He(new class extends jt{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus}})}runCoreEditorCommand(v,b){n.EditorScroll.runCoreEditorCommand(v,{to:Ui.RawDirection.Up,by:Ui.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:b.source})}}),n.ScrollLineDown=He(new class extends jt{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(v,b){n.EditorScroll.runCoreEditorCommand(v,{to:Ui.RawDirection.Down,by:Ui.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:b.source})}}),n.ScrollPageDown=He(new class extends jt{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(v,b){n.EditorScroll.runCoreEditorCommand(v,{to:Ui.RawDirection.Down,by:Ui.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:b.source})}}),n.ScrollEditorBottom=He(new class extends jt{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus}})}runCoreEditorCommand(v,b){n.EditorScroll.runCoreEditorCommand(v,{to:Ui.RawDirection.Down,by:Ui.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:b.source})}}),n.ScrollLeft=He(new class extends jt{constructor(){super({id:"scrollLeft",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus}})}runCoreEditorCommand(v,b){n.EditorScroll.runCoreEditorCommand(v,{to:Ui.RawDirection.Left,by:Ui.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:b.source})}}),n.ScrollRight=He(new class extends jt{constructor(){super({id:"scrollRight",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus}})}runCoreEditorCommand(v,b){n.EditorScroll.runCoreEditorCommand(v,{to:Ui.RawDirection.Right,by:Ui.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:b.source})}});class g extends jt{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){w.position&&(b.model.pushStackElement(),b.setCursorStates(w.source,3,[on.word(b,b.getPrimaryCursorState(),this._inSelectionMode,w.position)]),w.revealType!==2&&b.revealPrimaryCursor(w.source,!0,!0))}}n.WordSelect=He(new g({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),n.WordSelectDrag=He(new g({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),n.LastCursorWordSelect=He(new class extends jt{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(v,b){if(!b.position)return;const w=v.getLastAddedCursorIndex(),C=v.getCursorStates(),S=C.slice(0),k=C[w];S[w]=on.word(v,k,k.modelState.hasSelection(),b.position),v.model.pushStackElement(),v.setCursorStates(b.source,3,S)}});class p extends jt{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){w.position&&(b.model.pushStackElement(),b.setCursorStates(w.source,3,[on.line(b,b.getPrimaryCursorState(),this._inSelectionMode,w.position,w.viewPosition)]),w.revealType!==2&&b.revealPrimaryCursor(w.source,!1,!0))}}n.LineSelect=He(new p({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),n.LineSelectDrag=He(new p({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class _ extends jt{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){if(!w.position)return;const C=b.getLastAddedCursorIndex(),S=b.getCursorStates(),k=S.slice(0);k[C]=on.line(b,S[C],this._inSelectionMode,w.position,w.viewPosition),b.model.pushStackElement(),b.setCursorStates(w.source,3,k)}}n.LastCursorLineSelect=He(new _({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),n.LastCursorLineSelectDrag=He(new _({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),n.CancelSelection=He(new class extends jt{constructor(){super({id:"cancelSelection",precondition:Se.hasNonEmptySelection,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(v,b){v.model.pushStackElement(),v.setCursorStates(b.source,3,[on.cancelSelection(v,v.getPrimaryCursorState())]),v.revealPrimaryCursor(b.source,!0)}}),n.RemoveSecondaryCursors=He(new class extends jt{constructor(){super({id:"removeSecondaryCursors",precondition:Se.hasMultipleSelections,kbOpts:{weight:ot+1,kbExpr:Se.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(v,b){v.model.pushStackElement(),v.setCursorStates(b.source,3,[v.getPrimaryCursorState()]),v.revealPrimaryCursor(b.source,!0),Xw(m("removedCursor","Removed secondary cursors"))}}),n.RevealLine=He(new class extends jt{constructor(){super({id:"revealLine",precondition:void 0,description:Md.description})}runCoreEditorCommand(v,b){const w=b,C=w.lineNumber||0;let S=typeof C=="number"?C+1:parseInt(C)+1;S<1&&(S=1);const k=v.model.getLineCount();S>k&&(S=k);const L=new $(S,1,S,v.model.getLineMaxColumn(S));let x=0;if(w.at)switch(w.at){case Md.RawAtArgument.Top:x=3;break;case Md.RawAtArgument.Center:x=1;break;case Md.RawAtArgument.Bottom:x=4;break}const I=v.coordinatesConverter.convertModelRangeToViewRange(L);v.revealRange(b.source,!1,I,x,0)}}),n.SelectAll=new class extends oC{constructor(){super(zH)}runDOMCommand(){io&&(document.activeElement.focus(),document.activeElement.select()),document.execCommand("selectAll")}runEditorCommand(v,b,w){const C=b._getViewModel();C&&this.runCoreEditorCommand(C,w)}runCoreEditorCommand(v,b){v.model.pushStackElement(),v.setCursorStates("keyboard",3,[on.selectAll(v,v.getPrimaryCursorState())])}},n.SetSelection=He(new class extends jt{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(v,b){b.selection&&(v.model.pushStackElement(),v.setCursorStates(b.source,3,[Xe.fromModelSelection(b.selection)]))}})})(Di||(Di={}));const cq=Ct.and(Se.textInputFocus,Se.columnSelection);function Ju(n,e){Iu.registerKeybindingRule({id:n,primary:e,when:cq,weight:ot+1})}Ju(Di.CursorColumnSelectLeft.id,1039);Ju(Di.CursorColumnSelectRight.id,1041);Ju(Di.CursorColumnSelectUp.id,1040);Ju(Di.CursorColumnSelectPageUp.id,1035);Ju(Di.CursorColumnSelectDown.id,1042);Ju(Di.CursorColumnSelectPageDown.id,1036);function J2(n){return n.register(),n}var ek;(function(n){class e extends kc{runEditorCommand(i,s,o){const r=s._getViewModel();r&&this.runCoreEditingCommand(s,r,o||{})}}n.CoreEditingCommand=e,n.LineBreakInsert=He(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:Se.writable,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,i,s){t.pushUndoStop(),t.executeCommands(this.id,Jt.lineBreakInsert(i.cursorConfig,i.model,i.getCursorStates().map(o=>o.modelState.selection)))}}),n.Outdent=He(new class extends e{constructor(){super({id:"outdent",precondition:Se.writable,kbOpts:{weight:ot,kbExpr:Ct.and(Se.editorTextFocus,Se.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,i,s){t.pushUndoStop(),t.executeCommands(this.id,Jt.outdent(i.cursorConfig,i.model,i.getCursorStates().map(o=>o.modelState.selection))),t.pushUndoStop()}}),n.Tab=He(new class extends e{constructor(){super({id:"tab",precondition:Se.writable,kbOpts:{weight:ot,kbExpr:Ct.and(Se.editorTextFocus,Se.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,i,s){t.pushUndoStop(),t.executeCommands(this.id,Jt.tab(i.cursorConfig,i.model,i.getCursorStates().map(o=>o.modelState.selection))),t.pushUndoStop()}}),n.DeleteLeft=He(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,i,s){const[o,r]=Ic.deleteLeft(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map(a=>a.modelState.selection),i.getCursorAutoClosedCharacters());o&&t.pushUndoStop(),t.executeCommands(this.id,r),i.setPrevEditOperationType(2)}}),n.DeleteRight=He(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:ot,kbExpr:Se.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,i,s){const[o,r]=Ic.deleteRight(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map(a=>a.modelState.selection));o&&t.pushUndoStop(),t.executeCommands(this.id,r),i.setPrevEditOperationType(3)}}),n.Undo=new class extends oC{constructor(){super(K4)}runDOMCommand(){document.execCommand("undo")}runEditorCommand(t,i,s){if(!(!i.hasModel()||i.getOption(89)===!0))return i.getModel().undo()}},n.Redo=new class extends oC{constructor(){super(G4)}runDOMCommand(){document.execCommand("redo")}runEditorCommand(t,i,s){if(!(!i.hasModel()||i.getOption(89)===!0))return i.getModel().redo()}}})(ek||(ek={}));class tk extends q_{constructor(e,t,i){super({id:e,precondition:void 0,description:i}),this._handlerId=t}runCommand(e,t){const i=e.get(oi).getFocusedCodeEditor();i&&i.trigger("keyboard",this._handlerId,t)}}function Kc(n,e){J2(new tk("default:"+n,n)),J2(new tk(n,n,e))}Kc("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});Kc("replacePreviousChar");Kc("compositionType");Kc("compositionStart");Kc("compositionEnd");Kc("paste");Kc("cut");class dq{constructor(e,t,i,s){this.configuration=e,this.viewModel=t,this.userInputEvents=i,this.commandDelegate=s}paste(e,t,i,s){this.commandDelegate.paste(e,t,i,s)}type(e){this.commandDelegate.type(e)}compositionType(e,t,i,s){this.commandDelegate.compositionType(e,t,i,s)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){Di.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new Y(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(76)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(76)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,i=Cn&&t.get(105),s=t.get(21);e.middleButton&&!i?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position,e.revealType):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position,e.revealType):this._lastCursorLineSelect(e.position,e.revealType):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount===2?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position,e.revealType):e.inSelectionMode?this._wordSelectDrag(e.position,e.revealType):this._wordSelect(e.position,e.revealType)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position,e.revealType):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):s?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position,e.revealType):this.moveTo(e.position,e.revealType)}_usualArgs(e,t){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,revealType:t}}moveTo(e,t){Di.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_moveToSelect(e,t){Di.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_columnSelect(e,t,i){e=this._validateViewColumn(e),Di.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:i})}_createCursor(e,t){e=this._validateViewColumn(e),Di.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e,t){Di.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelect(e,t){Di.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelectDrag(e,t){Di.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorWordSelect(e,t){Di.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelect(e,t){Di.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelectDrag(e,t){Di.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelect(e,t){Di.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelectDrag(e,t){Di.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_selectAll(){Di.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class J_{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){var t;(t=this.onKeyDown)===null||t===void 0||t.call(this,e)}emitKeyUp(e){var t;(t=this.onKeyUp)===null||t===void 0||t.call(this,e)}emitContextMenu(e){var t;(t=this.onContextMenu)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseMove(e){var t;(t=this.onMouseMove)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){var t;(t=this.onMouseLeave)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDown(e){var t;(t=this.onMouseDown)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseUp(e){var t;(t=this.onMouseUp)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){var t;(t=this.onMouseDrag)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){var t;(t=this.onMouseDrop)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){var e;(e=this.onMouseDropCanceled)===null||e===void 0||e.call(this)}emitMouseWheel(e){var t;(t=this.onMouseWheel)===null||t===void 0||t.call(this,e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return J_.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){const i=Object.assign({},e);return i.position&&(i.position=t.convertViewPositionToModelPosition(i.position)),i.range&&(i.range=t.convertViewRangeToModelRange(i.range)),(i.type===5||i.type===8)&&(i.detail=this.convertViewToModelViewZoneData(i.detail,t)),i}static convertViewToModelViewZoneData(e,t){return{viewZoneId:e.viewZoneId,positionBefore:e.positionBefore?t.convertViewPositionToModelPosition(e.positionBefore):e.positionBefore,positionAfter:e.positionAfter?t.convertViewPositionToModelPosition(e.positionAfter):e.positionAfter,position:t.convertViewPositionToModelPosition(e.position),afterLineNumber:t.convertViewPositionToModelPosition(new Y(e.afterLineNumber,1)).lineNumber}}}class k3{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Ai("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const i=this.getStartLineNumber(),s=this.getEndLineNumber();if(t<i){const l=t-e+1;return this._rendLineNumberStart-=l,null}if(e>s)return null;let o=0,r=0;for(let l=i;l<=s;l++){const c=l-this._rendLineNumberStart;e<=l&&l<=t&&(r===0?(o=c,r=1):r++)}if(e<i){let l=0;t<i?l=t-e+1:l=i-e,this._rendLineNumberStart-=l}return this._lines.splice(o,r)}onLinesChanged(e,t){const i=e+t-1;if(this.getCount()===0)return!1;const s=this.getStartLineNumber(),o=this.getEndLineNumber();let r=!1;for(let a=e;a<=i;a++)a>=s&&a<=o&&(this._lines[a-this._rendLineNumberStart].onContentChanged(),r=!0);return r}onLinesInserted(e,t){if(this.getCount()===0)return null;const i=t-e+1,s=this.getStartLineNumber(),o=this.getEndLineNumber();if(e<=s)return this._rendLineNumberStart+=i,null;if(e>o)return null;if(i+e>o)return this._lines.splice(e-this._rendLineNumberStart,o-e+1);const r=[];for(let u=0;u<i;u++)r[u]=this._createLine();const a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),c=this._lines.slice(a,this._lines.length-i),d=this._lines.slice(this._lines.length-i,this._lines.length);return this._lines=l.concat(r).concat(c),d}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),i=this.getEndLineNumber();let s=!1;for(let o=0,r=e.length;o<r;o++){const a=e[o];if(a.toLineNumber<t||a.fromLineNumber>i)continue;const l=Math.max(t,a.fromLineNumber),c=Math.min(i,a.toLineNumber);for(let d=l;d<=c;d++){const u=d-this._rendLineNumberStart;this._lines[u].onTokensChanged(),s=!0}}return s}}class E3{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new k3(()=>this._host.createVisibleLine())}_createDomNode(){const e=tt(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(142)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,s=t.length;i<s;i++){const o=t[i].getDomNode();o&&this.domNode.domNode.removeChild(o)}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,s=t.length;i<s;i++){const o=t[i].getDomNode();o&&this.domNode.domNode.removeChild(o)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),i=new Wr(this.domNode.domNode,this._host,e),s={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},o=i.render(s,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(o.rendLineNumberStart,o.lines)}}class Wr{constructor(e,t,i){this.domNode=e,this.host=t,this.viewportData=i}render(e,t,i,s){const o={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(o.rendLineNumberStart+o.linesLength-1<t||i<o.rendLineNumberStart){o.rendLineNumberStart=t,o.linesLength=i-t+1,o.lines=[];for(let r=t;r<=i;r++)o.lines[r-t]=this.host.createVisibleLine();return this._finishRendering(o,!0,s),o}if(this._renderUntouchedLines(o,Math.max(t-o.rendLineNumberStart,0),Math.min(i-o.rendLineNumberStart,o.linesLength-1),s,t),o.rendLineNumberStart>t){const r=t,a=Math.min(i,o.rendLineNumberStart-1);r<=a&&(this._insertLinesBefore(o,r,a,s,t),o.linesLength+=a-r+1)}else if(o.rendLineNumberStart<t){const r=Math.min(o.linesLength,t-o.rendLineNumberStart);r>0&&(this._removeLinesBefore(o,r),o.linesLength-=r)}if(o.rendLineNumberStart=t,o.rendLineNumberStart+o.linesLength-1<i){const r=o.rendLineNumberStart+o.linesLength,a=i;r<=a&&(this._insertLinesAfter(o,r,a,s,t),o.linesLength+=a-r+1)}else if(o.rendLineNumberStart+o.linesLength-1>i){const r=Math.max(0,i-o.rendLineNumberStart+1),l=o.linesLength-1-r+1;l>0&&(this._removeLinesAfter(o,l),o.linesLength-=l)}return this._finishRendering(o,!1,s),o}_renderUntouchedLines(e,t,i,s,o){const r=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=i;l++){const c=r+l;a[l].layoutLine(c,s[c-o])}}_insertLinesBefore(e,t,i,s,o){const r=[];let a=0;for(let l=t;l<=i;l++)r[a++]=this.host.createVisibleLine();e.lines=r.concat(e.lines)}_removeLinesBefore(e,t){for(let i=0;i<t;i++){const s=e.lines[i].getDomNode();s&&this.domNode.removeChild(s)}e.lines.splice(0,t)}_insertLinesAfter(e,t,i,s,o){const r=[];let a=0;for(let l=t;l<=i;l++)r[a++]=this.host.createVisibleLine();e.lines=e.lines.concat(r)}_removeLinesAfter(e,t){const i=e.linesLength-t;for(let s=0;s<t;s++){const o=e.lines[i+s].getDomNode();o&&this.domNode.removeChild(o)}e.lines.splice(i,t)}_finishRenderingNewLines(e,t,i,s){Wr._ttPolicy&&(i=Wr._ttPolicy.createHTML(i));const o=this.domNode.lastChild;t||!o?this.domNode.innerHTML=i:o.insertAdjacentHTML("afterend",i);let r=this.domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const l=e.lines[a];s[a]&&(l.setDomNode(r),r=r.previousSibling)}}_finishRenderingInvalidLines(e,t,i){const s=document.createElement("div");Wr._ttPolicy&&(t=Wr._ttPolicy.createHTML(t)),s.innerHTML=t;for(let o=0;o<e.linesLength;o++){const r=e.lines[o];if(i[o]){const a=s.firstChild,l=r.getDomNode();l.parentNode.replaceChild(a,l),r.setDomNode(a)}}}_finishRendering(e,t,i){const s=Wr._sb,o=e.linesLength,r=e.lines,a=e.rendLineNumberStart,l=[];{s.reset();let c=!1;for(let d=0;d<o;d++){const u=r[d];l[d]=!1,!(u.getDomNode()||!u.renderLine(d+a,i[d],this.viewportData,s))&&(l[d]=!0,c=!0)}c&&this._finishRenderingNewLines(e,t,s.build(),l)}{s.reset();let c=!1;const d=[];for(let u=0;u<o;u++){const h=r[u];d[u]=!1,!(l[u]||!h.renderLine(u+a,i[u],this.viewportData,s))&&(d[u]=!0,c=!0)}c&&this._finishRenderingInvalidLines(e,s.build(),d)}}}Wr._ttPolicy=Qu("editorViewLayer",{createHTML:n=>n});Wr._sb=new Ng(1e5);class I3 extends ss{constructor(e){super(e),this._visibleLines=new E3(this),this.domNode=this._visibleLines.domNode;const i=this._context.configuration.options.get(49);$i(this.domNode,i),this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new uq(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let r=t;r<=i;r++)this._visibleLines.getVisibleLine(r).onConfigurationChanged(e);const o=this._context.configuration.options.get(49);return $i(this.domNode,o),!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(i=>i.shouldRender());for(let i=0,s=t.length;i<s;i++){const o=t[i];o.prepareRender(e),o.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class uq{constructor(e,t){this._configuration=e,this._lineHeight=this._configuration.options.get(65),this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=tt(e)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(e){this._lineHeight=this._configuration.options.get(65)}renderLine(e,t,i,s){let o="";for(let r=0,a=this._dynamicOverlays.length;r<a;r++){const l=this._dynamicOverlays[r];o+=l.render(i.startLineNumber,e)}return this._renderedContent===o?!1:(this._renderedContent=o,s.appendString('<div style="position:absolute;top:'),s.appendString(String(t)),s.appendString("px;width:100%;height:"),s.appendString(String(this._lineHeight)),s.appendString('px;">'),s.appendString(o),s.appendString("</div>"),!0)}layoutLine(e,t){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(this._lineHeight))}}class hq extends I3{constructor(e){super(e);const i=this._context.configuration.options.get(142);this._contentWidth=i.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const i=this._context.configuration.options.get(142);return this._contentWidth=i.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class fq extends I3{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(142);this._contentLeft=i.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),$i(this.domNode,t.get(49))}onConfigurationChanged(e){const t=this._context.configuration.options;$i(this.domNode,t.get(49));const i=t.get(142);return this._contentLeft=i.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}class gq extends ss{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=tt(document.createElement("div")),ur.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=tt(document.createElement("div")),ur.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesDeleted(e){return this._updateAnchorsViewPositions(),!0}onLinesInserted(e){return this._updateAnchorsViewPositions(),!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}_updateAnchorsViewPositions(){const e=Object.keys(this._widgets);for(const t of e)this._widgets[t].updateAnchorViewPosition()}addWidget(e){const t=new pq(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,i,s,o){this._widgets[e.getId()].setPosition(t,i,s,o),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const i=this._widgets[t];delete this._widgets[t];const s=i.domNode.domNode;s.parentNode.removeChild(s),s.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].render(e)}}class pq{constructor(e,t,i){this._primaryAnchor=new wh(null,null),this._secondaryAnchor=new wh(null,null),this._context=e,this._viewDomNode=t,this._actual=i,this.domNode=tt(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const s=this._context.configuration.options,o=s.get(142);this._fixedOverflowWidgets=s.get(41),this._contentWidth=o.contentWidth,this._contentLeft=o.contentLeft,this._lineHeight=s.get(65),this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(65),e.hasChanged(142)){const i=t.get(142);this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._maxWidth=this._getMaxWidth()}}updateAnchorViewPosition(){this._setPosition(this._affinity,this._primaryAnchor.modelPosition,this._secondaryAnchor.modelPosition)}_setPosition(e,t,i){this._affinity=e,this._primaryAnchor=s(t,this._context.viewModel,this._affinity),this._secondaryAnchor=s(i,this._context.viewModel,this._affinity);function s(o,r,a){if(!o)return new wh(null,null);const l=r.model.validatePosition(o);if(r.coordinatesConverter.modelPositionIsVisible(l)){const c=r.coordinatesConverter.convertModelPositionToViewPosition(l,a??void 0);return new wh(o,c)}return new wh(o,null)}}_getMaxWidth(){return this.allowEditorOverflow?window.innerWidth||document.documentElement.offsetWidth||document.body.offsetWidth:this._contentWidth}setPosition(e,t,i,s){this._setPosition(s,e,t),this._preference=i,this._primaryAnchor.viewPosition&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(e,t,i,s){const o=e.top,r=o,a=e.top+e.height,l=s.viewportHeight-a,c=o-i,d=r>=i,u=a,h=l>=i;let f=e.left;return f+t>s.scrollLeft+s.viewportWidth&&(f=s.scrollLeft+s.viewportWidth-t),f<s.scrollLeft&&(f=s.scrollLeft),{fitsAbove:d,aboveTop:c,fitsBelow:h,belowTop:u,left:f}}_layoutHorizontalSegmentInPage(e,t,i,s){const a=Math.max(15,t.left-s),l=Math.min(t.left+t.width+s,e.width-15);let c=t.left+i-window.scrollX;if(c+s>l){const d=c-(l-s);c-=d,i-=d}if(c<a){const d=c-a;c-=d,i-=d}return[i,c]}_layoutBoxInPage(e,t,i,s){const o=e.top-i,r=e.top+e.height,a=ms(this._viewDomNode.domNode),l=a.top+o-window.scrollY,c=a.top+r-window.scrollY,d=M4(document.body),[u,h]=this._layoutHorizontalSegmentInPage(d,a,e.left-s.scrollLeft+this._contentLeft,t),f=22,g=22,p=l>=f,_=c+i<=d.height-g;return this._fixedOverflowWidgets?{fitsAbove:p,aboveTop:Math.max(l,f),fitsBelow:_,belowTop:c,left:h}:{fitsAbove:p,aboveTop:o,fitsBelow:_,belowTop:r,left:u}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new Ch(e.top,e.left+this._contentLeft)}_getAnchorsCoordinates(e){var t,i;const s=a(this._primaryAnchor.viewPosition,this._affinity,this._lineHeight),o=((t=this._secondaryAnchor.viewPosition)===null||t===void 0?void 0:t.lineNumber)===((i=this._primaryAnchor.viewPosition)===null||i===void 0?void 0:i.lineNumber)?this._secondaryAnchor.viewPosition:null,r=a(o,this._affinity,this._lineHeight);return{primary:s,secondary:r};function a(l,c,d){if(!l)return null;const u=e.visibleRangeForPosition(l);if(!u)return null;const h=l.column===1&&c===3?0:u.left,f=e.getVerticalOffsetForLineNumber(l.lineNumber)-e.scrollTop;return new ik(f,h,d)}}_reduceAnchorCoordinates(e,t,i){if(!t)return e;const s=this._context.configuration.options.get(49);let o=t.left;return o<e.left?o=Math.max(o,e.left-i+s.typicalFullwidthCharacterWidth):o=Math.min(o,e.left+i-s.typicalFullwidthCharacterWidth),new ik(e.top,o,e.height)}_prepareRenderWidget(e){if(!this._preference||this._preference.length===0)return null;const{primary:t,secondary:i}=this._getAnchorsCoordinates(e);if(!t)return null;if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){let r=null;if(typeof this._actual.beforeRender=="function"&&(r=Sb(this._actual.beforeRender,this._actual)),r)this._cachedDomNodeOffsetWidth=r.width,this._cachedDomNodeOffsetHeight=r.height;else{const l=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(l.width),this._cachedDomNodeOffsetHeight=Math.round(l.height)}}const s=this._reduceAnchorCoordinates(t,i,this._cachedDomNodeOffsetWidth);let o;this.allowEditorOverflow?o=this._layoutBoxInPage(s,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):o=this._layoutBoxInViewport(s,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(let r=1;r<=2;r++)for(const a of this._preference)if(a===1){if(!o)return null;if(r===2||o.fitsAbove)return{coordinate:new Ch(o.aboveTop,o.left),position:1}}else if(a===2){if(!o)return null;if(r===2||o.fitsBelow)return{coordinate:new Ch(o.belowTop,o.left),position:2}}else return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(new Ch(s.top,s.left)),position:0}:{coordinate:new Ch(s.top,s.left),position:0};return null}onBeforeRender(e){!this._primaryAnchor.viewPosition||!this._preference||this._primaryAnchor.viewPosition.lineNumber<e.startLineNumber||this._primaryAnchor.viewPosition.lineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&Sb(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&Sb(this._actual.afterRender,this._actual,this._renderData.position)}}class wh{constructor(e,t){this.modelPosition=e,this.viewPosition=t}}class Ch{constructor(e,t){this.top=e,this.left=t,this._coordinateBrand=void 0}}class ik{constructor(e,t,i){this.top=e,this.left=t,this.height=i,this._anchorCoordinateBrand=void 0}}function Sb(n,e,...t){try{return n.call(e,...t)}catch{return null}}class N3 extends jc{constructor(e){super(),this._context=e;const t=this._context.configuration.options,i=t.get(142);this._lineHeight=t.get(65),this._renderLineHighlight=t.get(94),this._renderLineHighlightOnlyWhenFocus=t.get(95),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new at(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=this._selections.map(s=>s.positionLineNumber);t.sort((s,o)=>s-o),An(this._cursorLineNumbers,t)||(this._cursorLineNumbers=t,e=!0);const i=this._selections.every(s=>s.isEmpty());return this._selectionIsEmpty!==i&&(this._selectionIsEmpty=i,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(142);return this._lineHeight=t.get(65),this._renderLineHighlight=t.get(94),this._renderLineHighlightOnlyWhenFocus=t.get(95),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=this._renderOne(e),i=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,o=this._cursorLineNumbers.length;let r=0;const a=[];for(let l=i;l<=s;l++){const c=l-i;for(;r<o&&this._cursorLineNumbers[r]<l;)r++;r<o&&this._cursorLineNumbers[r]===l?a[c]=t:a[c]=""}this._renderData=a}render(e,t){if(!this._renderData)return"";const i=t-e;return i>=this._renderData.length?"":this._renderData[i]}_shouldRenderInMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class mq extends N3{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderOther()?" current-line-both":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}}class _q extends N3{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")}" style="width:${this._contentLeft}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}}sa((n,e)=>{const t=n.getColor(_3);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||n.defines(Y2)){const i=n.getColor(Y2);i&&(e.addRule(`.monaco-editor .view-overlays .current-line { border: 2px solid ${i}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid ${i}; }`),tu(n.type)&&(e.addRule(".monaco-editor .view-overlays .current-line { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }")))}});class bq extends jc{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(65),this._typicalHalfwidthCharacterWidth=t.get(49).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(65),this._typicalHalfwidthCharacterWidth=t.get(49).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let i=[],s=0;for(let l=0,c=t.length;l<c;l++){const d=t[l];d.options.className&&(i[s++]=d)}i=i.sort((l,c)=>{if(l.options.zIndex<c.options.zIndex)return-1;if(l.options.zIndex>c.options.zIndex)return 1;const d=l.options.className,u=c.options.className;return d<u?-1:d>u?1:$.compareRangesUsingStarts(l.range,c.range)});const o=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,a=[];for(let l=o;l<=r;l++){const c=l-o;a[c]=""}this._renderWholeLineDecorations(e,i,a),this._renderNormalDecorations(e,i,a),this._renderResult=a}_renderWholeLineDecorations(e,t,i){const s=String(this._lineHeight),o=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber;for(let a=0,l=t.length;a<l;a++){const c=t[a];if(!c.options.isWholeLine)continue;const d='<div class="cdr '+c.options.className+'" style="left:0;width:100%;height:'+s+'px;"></div>',u=Math.max(c.range.startLineNumber,o),h=Math.min(c.range.endLineNumber,r);for(let f=u;f<=h;f++){const g=f-o;i[g]+=d}}}_renderNormalDecorations(e,t,i){var s;const o=String(this._lineHeight),r=e.visibleRange.startLineNumber;let a=null,l=!1,c=null,d=!1;for(let u=0,h=t.length;u<h;u++){const f=t[u];if(f.options.isWholeLine)continue;const g=f.options.className,p=!!f.options.showIfCollapsed;let _=f.range;if(p&&_.endColumn===1&&_.endLineNumber!==_.startLineNumber&&(_=new $(_.startLineNumber,_.startColumn,_.endLineNumber-1,this._context.viewModel.getLineMaxColumn(_.endLineNumber-1))),a===g&&l===p&&$.areIntersectingOrTouching(c,_)){c=$.plusRange(c,_);continue}a!==null&&this._renderNormalDecoration(e,c,a,d,l,o,r,i),a=g,l=p,c=_,d=(s=f.options.shouldFillLineOnLineBreak)!==null&&s!==void 0?s:!1}a!==null&&this._renderNormalDecoration(e,c,a,d,l,o,r,i)}_renderNormalDecoration(e,t,i,s,o,r,a,l){const c=e.linesVisibleRangesForRange(t,i==="findMatch");if(c)for(let d=0,u=c.length;d<u;d++){const h=c[d];if(h.outsideRenderedLine)continue;const f=h.lineNumber-a;if(o&&h.ranges.length===1){const g=h.ranges[0];if(g.width<this._typicalHalfwidthCharacterWidth){const p=Math.round(g.left+g.width/2),_=Math.max(0,Math.round(p-this._typicalHalfwidthCharacterWidth/2));h.ranges[0]=new Y_(_,this._typicalHalfwidthCharacterWidth)}}for(let g=0,p=h.ranges.length;g<p;g++){const _=s&&h.continuesOnNextLine&&p===1,v=h.ranges[g],b='<div class="cdr '+i+'" style="left:'+String(v.left)+(_?"px;width:100%;height:":"px;width:"+String(v.width)+"px;height:")+r+'px;"></div>';l[f]+=b}}}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}class vq extends ss{constructor(e,t,i,s){super(e);const o=this._context.configuration.options,r=o.get(101),a=o.get(73),l=o.get(39),c=o.get(104),d={listenOnDomNode:i.domNode,className:"editor-scrollable "+b0(e.theme.type),useShadows:!1,lazyRender:!0,vertical:r.vertical,horizontal:r.horizontal,verticalHasArrows:r.verticalHasArrows,horizontalHasArrows:r.horizontalHasArrows,verticalScrollbarSize:r.verticalScrollbarSize,verticalSliderSize:r.verticalSliderSize,horizontalScrollbarSize:r.horizontalScrollbarSize,horizontalSliderSize:r.horizontalSliderSize,handleMouseWheel:r.handleMouseWheel,alwaysConsumeMouseWheel:r.alwaysConsumeMouseWheel,arrowSize:r.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:c,scrollByPage:r.scrollByPage};this.scrollbar=this._register(new XS(t.domNode,d,this._context.viewLayout.getScrollable())),ur.write(this.scrollbar.getDomNode(),5),this.scrollbarDomNode=tt(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const u=(h,f,g)=>{const p={};if(f){const _=h.scrollTop;_&&(p.scrollTop=this._context.viewLayout.getCurrentScrollTop()+_,h.scrollTop=0)}if(g){const _=h.scrollLeft;_&&(p.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+_,h.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(p,1)};this._register(ee(i.domNode,"scroll",h=>u(i.domNode,!0,!0))),this._register(ee(t.domNode,"scroll",h=>u(t.domNode,!0,!1))),this._register(ee(s.domNode,"scroll",h=>u(s.domNode,!0,!1))),this._register(ee(this.scrollbarDomNode.domNode,"scroll",h=>u(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(142);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(71).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this.scrollbar.delegateScrollFromMouseWheelEvent(e)}onConfigurationChanged(e){if(e.hasChanged(101)||e.hasChanged(73)||e.hasChanged(39)){const t=this._context.configuration.options,i=t.get(101),s=t.get(73),o=t.get(39),r=t.get(104),a={vertical:i.vertical,horizontal:i.horizontal,verticalScrollbarSize:i.verticalScrollbarSize,horizontalScrollbarSize:i.horizontalScrollbarSize,scrollByPage:i.scrollByPage,handleMouseWheel:i.handleMouseWheel,mouseWheelScrollSensitivity:s,fastScrollSensitivity:o,scrollPredominantAxis:r};this.scrollbar.updateOptions(a)}return e.hasChanged(142)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+b0(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}class T3 extends oe{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}function wq(n,e){let t=0,i=0;const s=n.length;for(;i<s;){const o=n.charCodeAt(i);if(o===32)t++;else if(o===9)t=t-t%e+e;else break;i++}return i===s?-1:t}var gc;(function(n){n[n.Disabled=0]="Disabled",n[n.EnabledForActive=1]="EnabledForActive",n[n.Enabled=2]="Enabled"})(gc||(gc={}));class ec{constructor(e,t,i,s,o,r){if(this.visibleColumn=e,this.column=t,this.className=i,this.horizontalLine=s,this.forWrappedLinesAfterColumn=o,this.forWrappedLinesBeforeOrAtColumn=r,e!==-1==(t!==-1))throw new Error}}class rf{constructor(e,t){this.top=e,this.endColumn=t}}class Cq extends T3{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return wq(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,i){this.assertNotDisposed();const s=this.textModel.getLineCount();if(e<1||e>s)throw new Ai("Illegal value for lineNumber");const o=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=!!(o&&o.offSide);let a=-2,l=-1,c=-2,d=-1;const u=L=>{if(a!==-1&&(a===-2||a>L-1)){a=-1,l=-1;for(let x=L-2;x>=0;x--){const I=this._computeIndentLevel(x);if(I>=0){a=x,l=I;break}}}if(c===-2){c=-1,d=-1;for(let x=L;x<s;x++){const I=this._computeIndentLevel(x);if(I>=0){c=x,d=I;break}}}};let h=-2,f=-1,g=-2,p=-1;const _=L=>{if(h===-2){h=-1,f=-1;for(let x=L-2;x>=0;x--){const I=this._computeIndentLevel(x);if(I>=0){h=x,f=I;break}}}if(g!==-1&&(g===-2||g<L-1)){g=-1,p=-1;for(let x=L;x<s;x++){const I=this._computeIndentLevel(x);if(I>=0){g=x,p=I;break}}}};let v=0,b=!0,w=0,C=!0,S=0,k=0;for(let L=0;b||C;L++){const x=e-L,I=e+L;L>1&&(x<1||x<t)&&(b=!1),L>1&&(I>s||I>i)&&(C=!1),L>5e4&&(b=!1,C=!1);let A=-1;if(b&&x>=1){const O=this._computeIndentLevel(x-1);O>=0?(c=x-1,d=O,A=Math.ceil(O/this.textModel.getOptions().indentSize)):(u(x),A=this._getIndentLevelForWhitespaceLine(r,l,d))}let T=-1;if(C&&I<=s){const O=this._computeIndentLevel(I-1);O>=0?(h=I-1,f=O,T=Math.ceil(O/this.textModel.getOptions().indentSize)):(_(I),T=this._getIndentLevelForWhitespaceLine(r,f,p))}if(L===0){k=A;continue}if(L===1){if(I<=s&&T>=0&&k+1===T){b=!1,v=I,w=I,S=T;continue}if(x>=1&&A>=0&&A-1===k){C=!1,v=x,w=x,S=A;continue}if(v=e,w=e,S=k,S===0)return{startLineNumber:v,endLineNumber:w,indent:S}}b&&(A>=S?v=x:b=!1),C&&(T>=S?w=I:C=!1)}return{startLineNumber:v,endLineNumber:w,indent:S}}getLinesBracketGuides(e,t,i,s){var o;const r=[];for(let h=e;h<=t;h++)r.push([]);const a=!0,l=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new $(e,1,t,this.textModel.getLineMaxColumn(t))).toArray();let c;if(i&&l.length>0){const h=(e<=i.lineNumber&&i.lineNumber<=t?l:this.textModel.bracketPairs.getBracketPairsInRange($.fromPositions(i)).toArray()).filter(f=>$.strictContainsPosition(f.range,i));c=(o=w7(h,f=>a))===null||o===void 0?void 0:o.range}const d=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,u=new A3;for(const h of l){if(!h.closingBracketRange)continue;const f=c&&h.range.equalsRange(c);if(!f&&!s.includeInactive)continue;const g=u.getInlineClassName(h.nestingLevel,h.nestingLevelOfEqualBracketType,d)+(s.highlightActive&&f?" "+u.activeClassName:""),p=h.openingBracketRange.getStartPosition(),_=h.closingBracketRange.getStartPosition(),v=s.horizontalGuides===gc.Enabled||s.horizontalGuides===gc.EnabledForActive&&f;if(h.range.startLineNumber===h.range.endLineNumber){v&&r[h.range.startLineNumber-e].push(new ec(-1,h.openingBracketRange.getEndPosition().column,g,new rf(!1,_.column),-1,-1));continue}const b=this.getVisibleColumnFromPosition(_),w=this.getVisibleColumnFromPosition(h.openingBracketRange.getStartPosition()),C=Math.min(w,b,h.minVisibleColumnIndentation+1);let S=!1;Jn(this.textModel.getLineContent(h.closingBracketRange.startLineNumber))<h.closingBracketRange.startColumn-1&&(S=!0);const x=Math.max(p.lineNumber,e),I=Math.min(_.lineNumber,t),A=S?1:0;for(let T=x;T<I+A;T++)r[T-e].push(new ec(C,-1,g,null,T===p.lineNumber?p.column:-1,T===_.lineNumber?_.column:-1));v&&(p.lineNumber>=e&&w>C&&r[p.lineNumber-e].push(new ec(C,-1,g,new rf(!1,p.column),-1,-1)),_.lineNumber<=t&&b>C&&r[_.lineNumber-e].push(new ec(C,-1,g,new rf(!S,_.column),-1,-1)))}for(const h of r)h.sort((f,g)=>f.visibleColumn-g.visibleColumn);return r}getVisibleColumnFromPosition(e){return Si.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();const i=this.textModel.getLineCount();if(e<1||e>i)throw new Error("Illegal value for startLineNumber");if(t<1||t>i)throw new Error("Illegal value for endLineNumber");const s=this.textModel.getOptions(),o=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=!!(o&&o.offSide),a=new Array(t-e+1);let l=-2,c=-1,d=-2,u=-1;for(let h=e;h<=t;h++){const f=h-e,g=this._computeIndentLevel(h-1);if(g>=0){l=h-1,c=g,a[f]=Math.ceil(g/s.indentSize);continue}if(l===-2){l=-1,c=-1;for(let p=h-2;p>=0;p--){const _=this._computeIndentLevel(p);if(_>=0){l=p,c=_;break}}}if(d!==-1&&(d===-2||d<h-1)){d=-1,u=-1;for(let p=h;p<i;p++){const _=this._computeIndentLevel(p);if(_>=0){d=p,u=_;break}}}a[f]=this._getIndentLevelForWhitespaceLine(r,c,u)}return a}_getIndentLevelForWhitespaceLine(e,t,i){const s=this.textModel.getOptions();return t===-1||i===-1?0:t<i?1+Math.floor(t/s.indentSize):t===i||e?Math.ceil(i/s.indentSize):1+Math.floor(i/s.indentSize)}}class A3{constructor(){this.activeClassName="indent-active"}getInlineClassName(e,t,i){return this.getInlineClassNameOfLevel(i?t:e)}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}class yq extends jc{constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,i=t.get(143),s=t.get(49);this._lineHeight=t.get(65),this._spaceWidth=s.spaceWidth,this._maxIndentLeft=i.wrappingColumn===-1?-1:i.wrappingColumn*s.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(15),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(143),s=t.get(49);return this._lineHeight=t.get(65),this._spaceWidth=s.spaceWidth,this._maxIndentLeft=i.wrappingColumn===-1?-1:i.wrappingColumn*s.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(15),!0}onCursorStateChanged(e){var t;const s=e.selections[0].getPosition();return!((t=this._primaryPosition)===null||t===void 0)&&t.equals(s)?!1:(this._primaryPosition=s,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var t,i,s,o;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const r=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,l=e.scrollWidth,c=this._lineHeight,d=this._primaryPosition,u=this.getGuidesByLine(r,Math.min(a+1,this._context.viewModel.getLineCount()),d),h=[];for(let f=r;f<=a;f++){const g=f-r,p=u[g];let _="";const v=(i=(t=e.visibleRangeForPosition(new Y(f,1)))===null||t===void 0?void 0:t.left)!==null&&i!==void 0?i:0;for(const b of p){const w=b.column===-1?v+(b.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new Y(f,b.column)).left;if(w>l||this._maxIndentLeft>0&&w>this._maxIndentLeft)break;const C=b.horizontalLine?b.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",S=b.horizontalLine?((o=(s=e.visibleRangeForPosition(new Y(f,b.horizontalLine.endColumn)))===null||s===void 0?void 0:s.left)!==null&&o!==void 0?o:w+this._spaceWidth)-w:this._spaceWidth;_+=`<div class="core-guide ${b.className} ${C}" style="left:${w}px;height:${c}px;width:${S}px"></div>`}h[g]=_}this._renderResult=h}getGuidesByLine(e,t,i){const s=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(e,t,i,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?gc.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?gc.EnabledForActive:gc.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,o=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,t):null;let r=0,a=0,l=0;if(this._bracketPairGuideOptions.highlightActiveIndentation!==!1&&i){const u=this._context.viewModel.getActiveIndentGuide(i.lineNumber,e,t);r=u.startLineNumber,a=u.endLineNumber,l=u.indent}const{indentSize:c}=this._context.viewModel.model.getOptions(),d=[];for(let u=e;u<=t;u++){const h=new Array;d.push(h);const f=s?s[u-e]:[],g=new ea(f),p=o?o[u-e]:0;for(let _=1;_<=p;_++){const v=(_-1)*c+1,b=(this._bracketPairGuideOptions.highlightActiveIndentation==="always"||f.length===0)&&r<=u&&u<=a&&_===l;h.push(...g.takeWhile(C=>C.visibleColumn<v)||[]);const w=g.peek();(!w||w.visibleColumn!==v||w.horizontalLine)&&h.push(new ec(v,-1,`core-guide-indent lvl-${(_-1)%30}`+(b?" indent-active":""),null,-1,-1))}h.push(...g.takeWhile(_=>!0)||[])}return d}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}function ad(n){if(!(n&&n.isTransparent()))return n}sa((n,e)=>{const t=[{bracketColor:v3,guideColor:TU,guideColorActive:FU},{bracketColor:w3,guideColor:AU,guideColorActive:BU},{bracketColor:C3,guideColor:MU,guideColorActive:VU},{bracketColor:y3,guideColor:RU,guideColorActive:WU},{bracketColor:S3,guideColor:PU,guideColorActive:HU},{bracketColor:L3,guideColor:OU,guideColorActive:$U}],i=new A3,s=[{indentColor:Vg,indentColorActive:Wg},{indentColor:fU,indentColorActive:bU},{indentColor:gU,indentColorActive:vU},{indentColor:pU,indentColorActive:wU},{indentColor:mU,indentColorActive:CU},{indentColor:_U,indentColorActive:yU}],o=t.map(a=>{var l,c;const d=n.getColor(a.bracketColor),u=n.getColor(a.guideColor),h=n.getColor(a.guideColorActive),f=ad((l=ad(u))!==null&&l!==void 0?l:d==null?void 0:d.transparent(.3)),g=ad((c=ad(h))!==null&&c!==void 0?c:d);if(!(!f||!g))return{guideColor:f,guideColorActive:g}}).filter(Hm),r=s.map(a=>{const l=n.getColor(a.indentColor),c=n.getColor(a.indentColorActive),d=ad(l),u=ad(c);if(!(!d||!u))return{indentColor:d,indentColorActive:u}}).filter(Hm);if(o.length>0){for(let a=0;a<30;a++){const l=o[a%o.length];e.addRule(`.monaco-editor .${i.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${l.guideColor}; --guide-color-active: ${l.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${i.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${i.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${i.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}if(r.length>0){for(let a=0;a<30;a++){const l=r[a%r.length];e.addRule(`.monaco-editor .lines-content .core-guide-indent.lvl-${a} { --indent-color: ${l.indentColor}; --indent-color-active: ${l.indentColorActive}; }`)}e.addRule(".monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 var(--indent-color) inset; }"),e.addRule(".monaco-editor .lines-content .core-guide-indent.indent-active { box-shadow: 1px 0 0 0 var(--indent-color-active) inset; }")}});class Lb{get didDomLayout(){return this._didDomLayout}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;const e=this._domNode.getBoundingClientRect();this.markDidDomLayout(),this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}constructor(e,t){this._domNode=e,this.endNode=t,this._didDomLayout=!1,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1}markDidDomLayout(){this._didDomLayout=!0}}class Sq{constructor(){this._currentVisibleRange=new $(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class Lq{constructor(e,t,i,s,o,r,a){this.minimalReveal=e,this.lineNumber=t,this.startColumn=i,this.endColumn=s,this.startScrollTop=o,this.stopScrollTop=r,this.scrollType=a,this.type="range",this.minLineNumber=t,this.maxLineNumber=t}}class xq{constructor(e,t,i,s,o){this.minimalReveal=e,this.selections=t,this.startScrollTop=i,this.stopScrollTop=s,this.scrollType=o,this.type="selections";let r=t[0].startLineNumber,a=t[0].endLineNumber;for(let l=1,c=t.length;l<c;l++){const d=t[l];r=Math.min(r,d.startLineNumber),a=Math.max(a,d.endLineNumber)}this.minLineNumber=r,this.maxLineNumber=a}}class e1 extends ss{constructor(e,t){super(e),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new E3(this),this.domNode=this._visibleLines.domNode;const i=this._context.configuration,s=this._context.configuration.options,o=s.get(49),r=s.get(143);this._lineHeight=s.get(65),this._typicalHalfwidthCharacterWidth=o.typicalHalfwidthCharacterWidth,this._isViewportWrapping=r.isViewportWrapping,this._revealHorizontalRightPadding=s.get(98),this._cursorSurroundingLines=s.get(28),this._cursorSurroundingLinesStyle=s.get(29),this._canUseLayerHinting=!s.get(31),this._viewLineOptions=new q2(i,this._context.theme.type),ur.write(this.domNode,7),this.domNode.setClassName(`view-lines ${fc}`),$i(this.domNode,o),this._maxLineWidth=0,this._asyncUpdateLineWidths=new Sn(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new Sn(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new Sq,this._horizontalRevealRequest=null,this._stickyScrollEnabled=s.get(113).enabled,this._maxNumberStickyLines=s.get(113).maxLineCount}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new Qo(this._viewLineOptions)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(143)&&(this._maxLineWidth=0);const t=this._context.configuration.options,i=t.get(49),s=t.get(143);return this._lineHeight=t.get(65),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._isViewportWrapping=s.isViewportWrapping,this._revealHorizontalRightPadding=t.get(98),this._cursorSurroundingLines=t.get(28),this._cursorSurroundingLinesStyle=t.get(29),this._canUseLayerHinting=!t.get(31),this._stickyScrollEnabled=t.get(113).enabled,this._maxNumberStickyLines=t.get(113).maxLineCount,$i(this.domNode,i),this._onOptionsMaybeChanged(),e.hasChanged(142)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new q2(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const i=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let o=i;o<=s;o++)this._visibleLines.getVisibleLine(o).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();let s=!1;for(let o=t;o<=i;o++)s=this._visibleLines.getVisibleLine(o).onSelectionChanged()||s;return s}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=t;s<=i;s++)this._visibleLines.getVisibleLine(s).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(t===-1)return!1;let i=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?i={scrollTop:i.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new Lq(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new xq(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const o=Math.abs(this._context.viewLayout.getCurrentScrollTop()-i.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(i,o),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),i=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>i)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const i=this._getViewLineDomNode(e);if(i===null)return null;const s=this._getLineNumberFor(i);if(s===-1||s<1||s>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(s)===1)return new Y(s,1);const o=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();if(s<o||s>r)return null;let a=this._visibleLines.getVisibleLine(s).getColumnOfNodeOffset(e,t);const l=this._context.viewModel.getLineMinColumn(s);return a<l&&(a=l),new Y(s,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===Qo.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=t;s<=i;s++){const o=this._visibleLines.getVisibleLine(s);if(e===o.getDomNode())return s}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();if(e<t||e>i)return-1;const s=new Lb(this.domNode.domNode,this._textRangeRestingSpot),o=this._visibleLines.getVisibleLine(e).getWidth(s);return this._updateLineWidthsSlowIfDomDidLayout(s),o}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const i=e.endLineNumber,s=$.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!s)return null;const o=[];let r=0;const a=new Lb(this.domNode.domNode,this._textRangeRestingSpot);let l=0;t&&(l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Y(s.startLineNumber,1)).lineNumber);const c=this._visibleLines.getStartLineNumber(),d=this._visibleLines.getEndLineNumber();for(let u=s.startLineNumber;u<=s.endLineNumber;u++){if(u<c||u>d)continue;const h=u===s.startLineNumber?s.startColumn:1,f=u!==s.endLineNumber,g=f?this._context.viewModel.getLineMaxColumn(u):s.endColumn,p=this._visibleLines.getVisibleLine(u).getVisibleRangesForRange(u,h,g,a);if(p){if(t&&u<i){const _=l;l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Y(u+1,1)).lineNumber,_!==l&&(p.ranges[p.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}o[r++]=new Az(p.outsideRenderedLine,u,Y_.from(p.ranges),f)}}return this._updateLineWidthsSlowIfDomDidLayout(a),r===0?null:o}_visibleRangesForLineRange(e,t,i){if(this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber())return null;const s=new Lb(this.domNode.domNode,this._textRangeRestingSpot),o=this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,i,s);return this._updateLineWidthsSlowIfDomDidLayout(s),o}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new Mz(t.outsideRenderedLine,t.ranges[0].left):null}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidthsSlowIfDomDidLayout(e){e.didDomLayout&&(this._asyncUpdateLineWidths.isScheduled()||(this._asyncUpdateLineWidths.cancel(),this._updateLineWidthsSlow()))}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();let s=1,o=!0;for(let r=t;r<=i;r++){const a=this._visibleLines.getVisibleLine(r);if(e&&!a.getWidthIsFast()){o=!1;continue}s=Math.max(s,a.getWidth(null))}return o&&t===1&&i===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(s),o}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const i=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let o=i;o<=s;o++){const r=this._visibleLines.getVisibleLine(o);if(r.needsMonospaceFontCheck()){const a=r.getWidth(null);a>t&&(t=a,e=o)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let o=i;o<=s;o++)this._visibleLines.getVisibleLine(o).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const i=this._horizontalRevealRequest;if(e.startLineNumber<=i.minLineNumber&&i.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const s=this._computeScrollLeftToReveal(i);s&&(this._isViewportWrapping||this._ensureMaxLineWidth(s.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:s.scrollLeft},i.scrollType))}}if(this._updateLineWidthsFast()?this._asyncUpdateLineWidths.cancel():this._asyncUpdateLineWidths.schedule(),Cn&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const i=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let o=i;o<=s;o++)if(this._visibleLines.getVisibleLine(o).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,i,s,o,r){const a=e.top,l=e.height,c=a+l;let d,u,h;if(o&&o.length>0){let v=o[0].startLineNumber,b=o[0].endLineNumber;for(let w=1,C=o.length;w<C;w++){const S=o[w];v=Math.min(v,S.startLineNumber),b=Math.max(b,S.endLineNumber)}d=!1,u=this._context.viewLayout.getVerticalOffsetForLineNumber(v),h=this._context.viewLayout.getVerticalOffsetForLineNumber(b)+this._lineHeight}else if(s)d=!0,u=this._context.viewLayout.getVerticalOffsetForLineNumber(s.startLineNumber),h=this._context.viewLayout.getVerticalOffsetForLineNumber(s.endLineNumber)+this._lineHeight;else return-1;const f=(t==="mouse"||i)&&this._cursorSurroundingLinesStyle==="default";let g=0,p=0;if(f)i||(g=this._lineHeight);else{const v=Math.min(l/this._lineHeight/2,this._cursorSurroundingLines);this._stickyScrollEnabled?g=Math.max(v,this._maxNumberStickyLines)*this._lineHeight:g=v*this._lineHeight,p=Math.max(0,v-1)*this._lineHeight}i||(r===0||r===4)&&(p+=this._lineHeight),u-=g,h+=p;let _;if(h-u>l){if(!d)return-1;_=u}else if(r===5||r===6)if(r===6&&a<=u&&h<=c)_=a;else{const v=Math.max(5*this._lineHeight,l*.2),b=u-v,w=h-l;_=Math.max(w,b)}else if(r===1||r===2)if(r===2&&a<=u&&h<=c)_=a;else{const v=(u+h)/2;_=Math.max(0,v-l/2)}else _=this._computeMinimumScrolling(a,c,u,h,r===3,r===4);return _}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),i=this._context.configuration.options.get(142),s=t.left,o=s+t.width-i.verticalScrollbarWidth;let r=1073741824,a=0;if(e.type==="range"){const c=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!c)return null;for(const d of c.ranges)r=Math.min(r,Math.round(d.left)),a=Math.max(a,Math.round(d.left+d.width))}else for(const c of e.selections){if(c.startLineNumber!==c.endLineNumber)return null;const d=this._visibleRangesForLineRange(c.startLineNumber,c.startColumn,c.endColumn);if(!d)return null;for(const u of d.ranges)r=Math.min(r,Math.round(u.left)),a=Math.max(a,Math.round(u.left+u.width))}return e.minimalReveal||(r=Math.max(0,r-e1.HORIZONTAL_EXTRA_PX),a+=this._revealHorizontalRightPadding),e.type==="selections"&&a-r>t.width?null:{scrollLeft:this._computeMinimumScrolling(s,o,r,a),maxHorizontalOffset:a}}_computeMinimumScrolling(e,t,i,s,o,r){e=e|0,t=t|0,i=i|0,s=s|0,o=!!o,r=!!r;const a=t-e;if(s-i<a){if(o)return i;if(r)return Math.max(0,s-a);if(i<e)return i;if(s>t)return Math.max(0,s-a)}else return i;return e}}e1.HORIZONTAL_EXTRA_PX=30;class rC{constructor(e,t,i,s){this._decorationToRenderBrand=void 0,this.startLineNumber=+e,this.endLineNumber=+t,this.className=String(i),this.zIndex=s??0}}class Dq{constructor(e,t){this.className=e,this.zIndex=t}}class kq{constructor(){this.decorations=[]}add(e){this.decorations.push(e)}getDecorations(){return this.decorations}}class M3 extends jc{_render(e,t,i){const s=[];for(let a=e;a<=t;a++){const l=a-e;s[l]=new kq}if(i.length===0)return s;i.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let o=null,r=0;for(let a=0,l=i.length;a<l;a++){const c=i[a],d=c.className,u=c.zIndex;let h=Math.max(c.startLineNumber,e)-e;const f=Math.min(c.endLineNumber,t)-e;o===d?(h=Math.max(r+1,h),r=Math.max(r,f)):(o=d,r=f);for(let g=h;g<=r;g++)s[g].add(new Dq(d,u))}return s}}class Eq extends ss{constructor(e){super(e),this._widgets={},this._context=e;const t=this._context.configuration.options,i=t.get(142);this.domNode=tt(document.createElement("div")),this.domNode.setClassName("glyph-margin-widgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this._lineHeight=t.get(65),this._glyphMargin=t.get(56),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._glyphMarginDecorationLaneCount=i.glyphMarginDecorationLaneCount,this._managedDomNodes=[],this._decorationGlyphsToRender=[]}dispose(){this._managedDomNodes=[],this._decorationGlyphsToRender=[],this._widgets={},super.dispose()}getWidgets(){return Object.values(this._widgets)}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(142);return this._lineHeight=t.get(65),this._glyphMargin=t.get(56),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._glyphMarginDecorationLaneCount=i.glyphMarginDecorationLaneCount,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}addWidget(e){const t=tt(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:e.getPosition(),domNode:t,renderInfo:null},t.setPosition("absolute"),t.setDisplay("none"),t.setAttribute("widgetId",e.getId()),this.domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const i=this._widgets[e.getId()];return i.preference.lane===t.lane&&i.preference.zIndex===t.zIndex&&$.equalsRange(i.preference.range,t.range)?!1:(i.preference=t,this.setShouldRender(),!0)}removeWidget(e){var t;const i=e.getId();if(this._widgets[i]){const o=this._widgets[i].domNode.domNode;delete this._widgets[i],(t=o.parentNode)===null||t===void 0||t.removeChild(o),this.setShouldRender()}}_collectDecorationBasedGlyphRenderRequest(e,t){var i,s,o;const r=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,l=e.getDecorationsInViewport();for(const c of l){const d=c.options.glyphMarginClassName;if(!d)continue;const u=Math.max(c.range.startLineNumber,r),h=Math.min(c.range.endLineNumber,a),f=Math.min((s=(i=c.options.glyphMargin)===null||i===void 0?void 0:i.position)!==null&&s!==void 0?s:1,this._glyphMarginDecorationLaneCount),g=(o=c.options.zIndex)!==null&&o!==void 0?o:0;for(let p=u;p<=h;p++)t.push(new Iq(p,f,g,d))}}_collectWidgetBasedGlyphRenderRequest(e,t){const i=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;for(const o of Object.values(this._widgets)){const r=o.preference.range;if(r.endLineNumber<i||r.startLineNumber>s)continue;const a=Math.max(r.startLineNumber,i),l=Math.min(o.preference.lane,this._glyphMarginDecorationLaneCount);t.push(new Nq(a,l,o.preference.zIndex,o))}}_collectSortedGlyphRenderRequests(e){const t=[];return this._collectDecorationBasedGlyphRenderRequest(e,t),this._collectWidgetBasedGlyphRenderRequest(e,t),t.sort((i,s)=>i.lineNumber===s.lineNumber?i.lane===s.lane?i.zIndex===s.zIndex?s.type===i.type?i.type===0&&s.type===0?i.className<s.className?-1:1:0:s.type-i.type:s.zIndex-i.zIndex:i.lane-s.lane:i.lineNumber-s.lineNumber),t}prepareRender(e){if(!this._glyphMargin){this._decorationGlyphsToRender=[];return}for(const s of Object.values(this._widgets))s.renderInfo=null;const t=new ea(this._collectSortedGlyphRenderRequests(e)),i=[];for(;t.length>0;){const s=t.peek();if(!s)break;const o=t.takeWhile(a=>a.lineNumber===s.lineNumber&&a.lane===s.lane);if(!o||o.length===0)break;const r=o[0];if(r.type===0){const a=[];for(const l of o){if(l.zIndex!==r.zIndex||l.type!==r.type)break;(a.length===0||a[a.length-1]!==l.className)&&a.push(l.className)}i.push(r.accept(a.join(" ")))}else r.widget.renderInfo={lineNumber:r.lineNumber,lane:r.lane}}this._decorationGlyphsToRender=i}render(e){if(!this._glyphMargin){for(const i of Object.values(this._widgets))i.domNode.setDisplay("none");for(;this._managedDomNodes.length>0;){const i=this._managedDomNodes.pop();i==null||i.domNode.remove()}return}const t=Math.round(this._glyphMarginWidth/this._glyphMarginDecorationLaneCount);for(const i of Object.values(this._widgets))if(!i.renderInfo)i.domNode.setDisplay("none");else{const s=e.viewportData.relativeVerticalOffset[i.renderInfo.lineNumber-e.viewportData.startLineNumber],o=this._glyphMarginLeft+(i.renderInfo.lane-1)*this._lineHeight;i.domNode.setDisplay("block"),i.domNode.setTop(s),i.domNode.setLeft(o),i.domNode.setWidth(t),i.domNode.setHeight(this._lineHeight)}for(let i=0;i<this._decorationGlyphsToRender.length;i++){const s=this._decorationGlyphsToRender[i],o=e.viewportData.relativeVerticalOffset[s.lineNumber-e.viewportData.startLineNumber],r=this._glyphMarginLeft+(s.lane-1)*this._lineHeight;let a;i<this._managedDomNodes.length?a=this._managedDomNodes[i]:(a=tt(document.createElement("div")),this._managedDomNodes.push(a),this.domNode.appendChild(a)),a.setClassName("cgmr codicon "+s.combinedClassName),a.setPosition("absolute"),a.setTop(o),a.setLeft(r),a.setWidth(t),a.setHeight(this._lineHeight)}for(;this._managedDomNodes.length>this._decorationGlyphsToRender.length;){const i=this._managedDomNodes.pop();i==null||i.domNode.remove()}}}class Iq{constructor(e,t,i,s){this.lineNumber=e,this.lane=t,this.zIndex=i,this.className=s,this.type=0}accept(e){return new Tq(this.lineNumber,this.lane,e)}}class Nq{constructor(e,t,i,s){this.lineNumber=e,this.lane=t,this.zIndex=i,this.widget=s,this.type=1}}class Tq{constructor(e,t,i){this.lineNumber=e,this.lane=t,this.combinedClassName=i}}class Aq extends M3{constructor(e){super(),this._context=e;const i=this._context.configuration.options.get(142);this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const i=this._context.configuration.options.get(142);return this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),i=[];let s=0;for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.options.linesDecorationsClassName,c=a.options.zIndex;l&&(i[s++]=new rC(a.range.startLineNumber,a.range.endLineNumber,l,c));const d=a.options.firstLineDecorationClassName;d&&(i[s++]=new rC(a.range.startLineNumber,a.range.startLineNumber,d,c))}return i}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s=this._render(t,i,this._getDecorations(e)),o=this._decorationsLeft.toString(),r=this._decorationsWidth.toString(),a='" style="left:'+o+"px;width:"+r+'px;"></div>',l=[];for(let c=t;c<=i;c++){const d=c-t,u=s[d].getDecorations();let h="";for(const f of u)h+='<div class="cldr '+f.className+a;l[d]=h}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class Mq extends M3{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),i=[];let s=0;for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.options.marginClassName,c=a.options.zIndex;l&&(i[s++]=new rC(a.range.startLineNumber,a.range.endLineNumber,l,c))}return i}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s=this._render(t,i,this._getDecorations(e)),o=[];for(let r=t;r<=i;r++){const a=r-t,l=s[a].getDecorations();let c="";for(const d of l)c+='<div class="cmdr '+d.className+'" style=""></div>';o[a]=c}this._renderResult=o}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class Ms{constructor(e,t,i,s){this._rgba8Brand=void 0,this.r=Ms._clamp(e),this.g=Ms._clamp(t),this.b=Ms._clamp(i),this.a=Ms._clamp(s)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}}Ms.Empty=new Ms(0,0,0,0);class $g extends oe{static getInstance(){return this._INSTANCE||(this._INSTANCE=new $g),this._INSTANCE}constructor(){super(),this._onDidChange=new q,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(hi.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}_updateColorMap(){const e=hi.getColorMap();if(!e){this._colors=[Ms.Empty],this._backgroundIsLight=!0;return}this._colors=[Ms.Empty];for(let i=1;i<e.length;i++){const s=e[i].rgba;this._colors[i]=new Ms(s.r,s.g,s.b,Math.round(s.a*255))}const t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}}$g._INSTANCE=null;const Rq=(()=>{const n=[];for(let e=32;e<=126;e++)n.push(e);return n.push(65533),n})(),Pq=(n,e)=>(n-=32,n<0||n>96?e<=2?(n+96)%96:96-1:n);class qf{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=qf.soften(e,12/15),this.charDataLight=qf.soften(e,50/60)}static soften(e,t){const i=new Uint8ClampedArray(e.length);for(let s=0,o=e.length;s<o;s++)i[s]=s0(e[s]*t);return i}renderChar(e,t,i,s,o,r,a,l,c,d,u){const h=1*this.scale,f=2*this.scale,g=u?1:f;if(t+h>e.width||i+g>e.height){console.warn("bad render request outside image data");return}const p=d?this.charDataLight:this.charDataNormal,_=Pq(s,c),v=e.width*4,b=a.r,w=a.g,C=a.b,S=o.r-b,k=o.g-w,L=o.b-C,x=Math.max(r,l),I=e.data;let A=_*h*f,T=i*v+t*4;for(let O=0;O<g;O++){let R=T;for(let X=0;X<h;X++){const ie=p[A++]/255*(r/255);I[R++]=b+S*ie,I[R++]=w+k*ie,I[R++]=C+L*ie,I[R++]=x}T+=v}}blockRenderChar(e,t,i,s,o,r,a,l){const c=1*this.scale,d=2*this.scale,u=l?1:d;if(t+c>e.width||i+u>e.height){console.warn("bad render request outside image data");return}const h=e.width*4,f=.5*(o/255),g=r.r,p=r.g,_=r.b,v=s.r-g,b=s.g-p,w=s.b-_,C=g+v*f,S=p+b*f,k=_+w*f,L=Math.max(o,a),x=e.data;let I=i*h+t*4;for(let A=0;A<u;A++){let T=I;for(let O=0;O<c;O++)x[T++]=C,x[T++]=S,x[T++]=k,x[T++]=L;I+=h}}}const nk={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},sk=n=>{const e=new Uint8ClampedArray(n.length/2);for(let t=0;t<n.length;t+=2)e[t>>1]=nk[n[t]]<<4|nk[n[t+1]]&15;return e},ok={1:Sc(()=>sk("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:Sc(()=>sk("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class af{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let i;return ok[e]?i=new qf(ok[e](),e):i=af.createFromSampleData(af.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=i,i}static createSampleData(e){const t=document.createElement("canvas"),i=t.getContext("2d");t.style.height="16px",t.height=16,t.width=96*10,t.style.width=96*10+"px",i.fillStyle="#ffffff",i.font=`bold 16px ${e}`,i.textBaseline="middle";let s=0;for(const o of Rq)i.fillText(String.fromCharCode(o),s,16/2),s+=10;return i.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");const s=af._downsample(e,t);return new qf(s,t)}static _downsampleChar(e,t,i,s,o){const r=1*o,a=2*o;let l=s,c=0;for(let d=0;d<a;d++){const u=d/a*16,h=(d+1)/a*16;for(let f=0;f<r;f++){const g=f/r*10,p=(f+1)/r*10;let _=0,v=0;for(let w=u;w<h;w++){const C=t+Math.floor(w)*3840,S=1-(w-Math.floor(w));for(let k=g;k<p;k++){const L=1-(k-Math.floor(k)),x=C+Math.floor(k)*4,I=L*S;v+=I,_+=e[x]*e[x+3]/255*I}}const b=_/v;c=Math.max(c,b),i[l++]=s0(b)}}return c}static _downsample(e,t){const i=2*t*1*t,s=i*96,o=new Uint8ClampedArray(s);let r=0,a=0,l=0;for(let c=0;c<96;c++)l=Math.max(l,this._downsampleChar(e,a,o,r,t)),r+=i,a+=10*4;if(l>0){const c=255/l;for(let d=0;d<s;d++)o[d]*=c}return o}}const Oq=140,Fq=2;class jf{constructor(e,t,i){const s=e.options,o=s.get(140),r=s.get(142),a=r.minimap,l=s.get(49),c=s.get(71);this.renderMinimap=a.renderMinimap,this.size=c.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=s.get(103),this.paddingTop=s.get(82).top,this.paddingBottom=s.get(82).bottom,this.showSlider=c.showSlider,this.autohide=c.autohide,this.pixelRatio=o,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=s.get(65),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=r.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=r.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=Sc(()=>af.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=i.getColor(2),this.backgroundColor=jf._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=jf._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const i=e.getColor(bz);return i?new Ms(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(vz);return t?Ms._clamp(Math.round(255*t.rgba.a)):255}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.paddingTop===e.paddingTop&&this.paddingBottom===e.paddingBottom&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class lf{constructor(e,t,i,s,o,r,a,l,c){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=i,this._computedSliderRatio=s,this.sliderTop=o,this.sliderHeight=r,this.topPaddingLineCount=a,this.startLineNumber=l,this.endLineNumber=c}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}intersectWithViewport(e){const t=Math.max(this.startLineNumber,e.startLineNumber),i=Math.min(this.endLineNumber,e.endLineNumber);return t>i?null:[t,i]}getYForLineNumber(e,t){return+(e-this.startLineNumber+this.topPaddingLineCount)*t}static create(e,t,i,s,o,r,a,l,c,d,u){const h=e.pixelRatio,f=e.minimapLineHeight,g=Math.floor(e.canvasInnerHeight/f),p=e.lineHeight;if(e.minimapHeightIsEditorHeight){let k=l*e.lineHeight+e.paddingTop+e.paddingBottom;e.scrollBeyondLastLine&&(k+=Math.max(0,o-e.lineHeight-e.paddingBottom));const L=Math.max(1,Math.floor(o*o/k)),x=Math.max(0,e.minimapHeight-L),I=x/(d-o),A=c*I,T=x>0,O=Math.floor(e.canvasInnerHeight/e.minimapLineHeight),R=Math.floor(e.paddingTop/e.lineHeight);return new lf(c,d,T,I,A,L,R,1,Math.min(a,O))}let _;if(r&&i!==a){const k=i-t+1;_=Math.floor(k*f/h)}else{const k=o/p;_=Math.floor(k*f/h)}const v=Math.floor(e.paddingTop/p);let b=Math.floor(e.paddingBottom/p);if(e.scrollBeyondLastLine){const k=o/p;b=Math.max(b,k-1)}let w;if(b>0){const k=o/p;w=(v+a+b-k-1)*f/h}else w=Math.max(0,(v+a)*f/h-_);w=Math.min(e.minimapHeight-_,w);const C=w/(d-o),S=c*C;if(g>=v+a+b){const k=w>0;return new lf(c,d,k,C,S,_,v,1,a)}else{let k;t>1?k=t+v:k=Math.max(1,c/p);let L,x=Math.max(1,Math.floor(k-S*h/f));x<v?(L=v-x+1,x=1):(L=0,x=Math.max(1,x-v)),u&&u.scrollHeight===d&&(u.scrollTop>c&&(x=Math.min(x,u.startLineNumber),L=Math.max(L,u.topPaddingLineCount)),u.scrollTop<c&&(x=Math.max(x,u.startLineNumber),L=Math.min(L,u.topPaddingLineCount)));const I=Math.min(a,x-L+g-1),A=(c-s)/p;let T;return c>=e.paddingTop?T=(t-x+L+A)*f/h:T=c/e.paddingTop*(L+A)*f/h,new lf(c,d,!0,C,T,_,L,x,I)}}}class w0{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}w0.INVALID=new w0(-1);class rk{constructor(e,t,i){this.renderedLayout=e,this._imageData=t,this._renderedLines=new k3(()=>w0.INVALID),this._renderedLines._set(e.startLineNumber,i)}linesEquals(e){if(!this.scrollEquals(e))return!1;const i=this._renderedLines._get().lines;for(let s=0,o=i.length;s<o;s++)if(i[s].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class tL{constructor(e,t,i,s){this._backgroundFillData=tL._createBackgroundFillData(t,i,s),this._buffers=[e.createImageData(t,i),e.createImageData(t,i)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,i){const s=i.r,o=i.g,r=i.b,a=i.a,l=new Uint8ClampedArray(e*t*4);let c=0;for(let d=0;d<t;d++)for(let u=0;u<e;u++)l[c]=s,l[c+1]=o,l[c+2]=r,l[c+3]=a,c+=4;return l}}class Kf{static compute(e,t,i){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const{minimapLineCount:s}=jd.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:e.scrollBeyondLastLine,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:e.editorHeight,lineHeight:e.lineHeight,pixelRatio:e.pixelRatio}),o=t/s,r=o/2;if(!i||i.minimapLines.length===0){const _=[];if(_[0]=1,s>1){for(let v=0,b=s-1;v<b;v++)_[v]=Math.round(v*o+r);_[s-1]=t}return[new Kf(o,_),[]]}const a=i.minimapLines,l=a.length,c=[];let d=0,u=0,h=1;const f=10;let g=[],p=null;for(let _=0;_<s;_++){const v=Math.max(h,Math.round(_*o)),b=Math.max(v,Math.round((_+1)*o));for(;d<l&&a[d]<v;){if(g.length<f){const C=d+1+u;p&&p.type==="deleted"&&p._oldIndex===d-1?p.deleteToLineNumber++:(p={type:"deleted",_oldIndex:d,deleteFromLineNumber:C,deleteToLineNumber:C},g.push(p)),u--}d++}let w;if(d<l&&a[d]<=b)w=a[d],d++;else if(_===0?w=1:_+1===s?w=t:w=Math.round(_*o+r),g.length<f){const C=d+1+u;p&&p.type==="inserted"&&p._i===_-1?p.insertToLineNumber++:(p={type:"inserted",_i:_,insertFromLineNumber:C,insertToLineNumber:C},g.push(p)),u++}c[_]=w,h=w}if(g.length<f)for(;d<l;){const _=d+1+u;p&&p.type==="deleted"&&p._oldIndex===d-1?p.deleteToLineNumber++:(p={type:"deleted",_oldIndex:d,deleteFromLineNumber:_,deleteToLineNumber:_},g.push(p)),u--,d++}else g=[{type:"flush"}];return[new Kf(o,c),g]}constructor(e,t){this.samplingRatio=e,this.minimapLines=t}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e)-1;for(;i>0&&this.minimapLines[i-1]>=e;)i--;let s=this.modelLineToMinimapLine(t)-1;for(;s+1<this.minimapLines.length&&this.minimapLines[s+1]<=t;)s++;if(i===s){const o=this.minimapLines[i];if(o<e||o>t)return null}return[i+1,s+1]}decorationLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e),s=this.modelLineToMinimapLine(t);return e!==t&&s===i&&(s===this.minimapLines.length?i>1&&i--:s++),[i,s]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let i=this.minimapLines.length,s=0;for(let o=this.minimapLines.length-1;o>=0&&!(this.minimapLines[o]<e.fromLineNumber);o--)this.minimapLines[o]<=e.toLineNumber?(this.minimapLines[o]=Math.max(1,e.fromLineNumber-1),i=Math.min(i,o),s=Math.max(s,o)):this.minimapLines[o]-=t;return[i,s]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let i=this.minimapLines.length-1;i>=0&&!(this.minimapLines[i]<e.fromLineNumber);i--)this.minimapLines[i]+=t}}class Bq extends ss{constructor(e){super(e),this.tokensColorTracker=$g.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new jf(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=Kf.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new C0(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new jf(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return t?this._actual.onLinesChanged(t[0],t[1]-t[0]+1):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){if(this._samplingState){const[t,i]=this._samplingState.onLinesDeleted(e);return t<=i&&this._actual.onLinesChanged(t+1,i-t+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){const t=[];for(const i of e.ranges){const s=this._samplingState.modelLineRangeToMinimapLineRange(i.fromLineNumber,i.toLineNumber);s&&t.push({fromLineNumber:s[0],toLineNumber:s[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),i=this._samplingState.modelLineToMinimapLine(i));const s={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:i,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(s)}_recreateLineSampling(){this._minimapSelections=null;const e=!!this._samplingState,[t,i]=Kf.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const s of i)switch(s.type){case"deleted":this._actual.onLinesDeleted(s.deleteFromLineNumber,s.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(s.insertFromLineNumber,s.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,i){if(this._samplingState){const s=[];for(let o=0,r=t-e+1;o<r;o++)i[o]?s[o]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+o-1]):s[o]=null;return s}return this._context.viewModel.getMinimapLinesRenderingData(e,t,i).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,i]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new at(t,e.startColumn,i,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){let i;if(this._samplingState){const o=this._samplingState.minimapLines[e-1],r=this._samplingState.minimapLines[t-1];i=new $(o,1,r,this._context.viewModel.getLineMaxColumn(r))}else i=new $(e,1,t,this._context.viewModel.getLineMaxColumn(t));const s=this._context.viewModel.getMinimapDecorationsInRange(i);if(this._samplingState){const o=[];for(const r of s){if(!r.options.minimap)continue;const a=r.range,l=this._samplingState.modelLineToMinimapLine(a.startLineNumber),c=this._samplingState.modelLineToMinimapLine(a.endLineNumber);o.push(new _4(new $(l,a.startColumn,c,a.endColumn),r.options))}return o}return s}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new $(e,1,e,1),1,0)}setScrollTop(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}}class C0 extends oe{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(W2),this._domNode=tt(document.createElement("div")),ur.write(this._domNode,8),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=tt(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=tt(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=tt(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=tt(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=tt(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=Ci(this._domNode.domNode,_e.POINTER_DOWN,i=>{if(i.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(i.button===0&&this._lastRenderData){const c=ms(this._slider.domNode),d=c.top+c.height/2;this._startSliderDragging(i,d,this._lastRenderData.renderedLayout)}return}const o=this._model.options.minimapLineHeight,r=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*i.offsetY;let l=Math.floor(r/o)+this._lastRenderData.renderedLayout.startLineNumber-this._lastRenderData.renderedLayout.topPaddingLineCount;l=Math.min(l,this._model.getLineCount()),this._model.revealLineNumber(l)}),this._sliderPointerMoveMonitor=new j_,this._sliderPointerDownListener=Ci(this._slider.domNode,_e.POINTER_DOWN,i=>{i.preventDefault(),i.stopPropagation(),i.button===0&&this._lastRenderData&&this._startSliderDragging(i,i.pageY,this._lastRenderData.renderedLayout)}),this._gestureDisposable=Ot.addTarget(this._domNode.domNode),this._sliderTouchStartListener=ee(this._domNode.domNode,It.Start,i=>{i.preventDefault(),i.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(i))},{passive:!1}),this._sliderTouchMoveListener=ee(this._domNode.domNode,It.Change,i=>{i.preventDefault(),i.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(i)},{passive:!1}),this._sliderTouchEndListener=Ci(this._domNode.domNode,It.End,i=>{i.preventDefault(),i.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,i){if(!e.target||!(e.target instanceof Element))return;const s=e.pageX;this._slider.toggleClassName("active",!0);const o=(r,a)=>{const l=ms(this._domNode.domNode),c=Math.min(Math.abs(a-s),Math.abs(a-l.left),Math.abs(a-l.left-l.width));if(is&&c>Oq){this._model.setScrollTop(i.scrollTop);return}const d=r-t;this._model.setScrollTop(i.getDesiredScrollTopFromDelta(d))};e.pageY!==t&&o(e.pageY,s),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,r=>o(r.pageY,r.pageX),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,i=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(i)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){const e=["minimap"];return this._model.options.showSlider==="always"?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide&&e.push("autohide"),e.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new tL(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){var i;return(i=this._lastRenderData)===null||i===void 0||i.onLinesDeleted(e,t),!0}onLinesInserted(e,t){var i;return(i=this._lastRenderData)===null||i===void 0||i.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(W2),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const i=lf.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(i.sliderNeeded?"block":"none"),this._slider.setTop(i.sliderTop),this._slider.setHeight(i.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(i.sliderHeight),this.renderDecorations(i),this._lastRenderData=this.renderLines(i)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort($.compareRangesUsingStarts);const i=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);i.sort((h,f)=>(h.options.zIndex||0)-(f.options.zIndex||0));const{canvasInnerWidth:s,canvasInnerHeight:o}=this._model.options,r=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,c=this._decorationsCanvas.domNode.getContext("2d");c.clearRect(0,0,s,o);const d=new ak(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(c,t,d,e,r),this._renderDecorationsLineHighlights(c,i,d,e,r);const u=new ak(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(c,t,u,e,r,l,a,s),this._renderDecorationsHighlights(c,i,u,e,r,l,a,s)}}_renderSelectionLineHighlights(e,t,i,s,o){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let r=0,a=0;for(const l of t){const c=s.intersectWithViewport(l);if(!c)continue;const[d,u]=c;for(let g=d;g<=u;g++)i.set(g,!0);const h=s.getYForLineNumber(d,o),f=s.getYForLineNumber(u,o);a>=h||(a>r&&e.fillRect(pa,r,e.canvas.width,a-r),r=h),a=f}a>r&&e.fillRect(pa,r,e.canvas.width,a-r)}_renderDecorationsLineHighlights(e,t,i,s,o){const r=new Map;for(let a=t.length-1;a>=0;a--){const l=t[a],c=l.options.minimap;if(!c||c.position!==cc.Inline)continue;const d=s.intersectWithViewport(l.range);if(!d)continue;const[u,h]=d,f=c.getColor(this._theme.value);if(!f||f.isTransparent())continue;let g=r.get(f.toString());g||(g=f.transparent(.5).toString(),r.set(f.toString(),g)),e.fillStyle=g;for(let p=u;p<=h;p++){if(i.has(p))continue;i.set(p,!0);const _=s.getYForLineNumber(u,o);e.fillRect(pa,_,e.canvas.width,o)}}}_renderSelectionsHighlights(e,t,i,s,o,r,a,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const c of t){const d=s.intersectWithViewport(c);if(!d)continue;const[u,h]=d;for(let f=u;f<=h;f++)this.renderDecorationOnLine(e,i,c,this._selectionColor,s,f,o,o,r,a,l)}}_renderDecorationsHighlights(e,t,i,s,o,r,a,l){for(const c of t){const d=c.options.minimap;if(!d)continue;const u=s.intersectWithViewport(c.range);if(!u)continue;const[h,f]=u,g=d.getColor(this._theme.value);if(!(!g||g.isTransparent()))for(let p=h;p<=f;p++)switch(d.position){case cc.Inline:this.renderDecorationOnLine(e,i,c.range,g,s,p,o,o,r,a,l);continue;case cc.Gutter:{const _=s.getYForLineNumber(p,o),v=2;this.renderDecoration(e,g,v,_,Fq,o);continue}}}}renderDecorationOnLine(e,t,i,s,o,r,a,l,c,d,u){const h=o.getYForLineNumber(r,l);if(h+a<0||h>this._model.options.canvasInnerHeight)return;const{startLineNumber:f,endLineNumber:g}=i,p=f===r?i.startColumn:1,_=g===r?i.endColumn:this._model.getLineMaxColumn(r),v=this.getXOffsetForPosition(t,r,p,c,d,u),b=this.getXOffsetForPosition(t,r,_,c,d,u);this.renderDecoration(e,s,v,h,b-v,a)}getXOffsetForPosition(e,t,i,s,o,r){if(i===1)return pa;if((i-1)*o>=r)return r;let l=e.get(t);if(!l){const c=this._model.getLineContent(t);l=[pa];let d=pa;for(let u=1;u<c.length+1;u++){const h=c.charCodeAt(u-1),f=h===9?s*o:cl(h)?2*o:o,g=d+f;if(g>=r){l[u]=r;break}l[u]=g,d=g}e.set(t,l)}return i-1<l.length?l[i-1]:r}renderDecoration(e,t,i,s,o,r){e.fillStyle=t&&t.toString()||"",e.fillRect(i,s,o,r)}renderLines(e){const t=e.startLineNumber,i=e.endLineNumber,s=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const ie=this._lastRenderData._get();return new rk(e,ie.imageData,ie.lines)}const o=this._getBuffer();if(!o)return null;const[r,a,l]=C0._renderUntouchedLines(o,e.topPaddingLineCount,t,i,s,this._lastRenderData),c=this._model.getMinimapLinesRenderingData(t,i,l),d=this._model.getOptions().tabSize,u=this._model.options.defaultBackgroundColor,h=this._model.options.backgroundColor,f=this._model.options.foregroundAlpha,g=this._model.tokensColorTracker,p=g.backgroundIsLight(),_=this._model.options.renderMinimap,v=this._model.options.charRenderer(),b=this._model.options.fontScale,w=this._model.options.minimapCharWidth,S=(_===1?2:2+1)*b,k=s>S?Math.floor((s-S)/2):0,L=h.a/255,x=new Ms(Math.round((h.r-u.r)*L+u.r),Math.round((h.g-u.g)*L+u.g),Math.round((h.b-u.b)*L+u.b),255);let I=e.topPaddingLineCount*s;const A=[];for(let ie=0,ae=i-t+1;ie<ae;ie++)l[ie]&&C0._renderLine(o,x,h.a,p,_,w,g,f,v,I,k,d,c[ie],b,s),A[ie]=new w0(I),I+=s;const T=r===-1?0:r,R=(a===-1?o.height:a)-T;return this._canvas.domNode.getContext("2d").putImageData(o,0,0,0,T,o.width,R),new rk(e,o,A)}static _renderUntouchedLines(e,t,i,s,o,r){const a=[];if(!r){for(let I=0,A=s-i+1;I<A;I++)a[I]=!0;return[-1,-1,a]}const l=r._get(),c=l.imageData.data,d=l.rendLineNumberStart,u=l.lines,h=u.length,f=e.width,g=e.data,p=(s-i+1)*o*f*4;let _=-1,v=-1,b=-1,w=-1,C=-1,S=-1,k=t*o;for(let I=i;I<=s;I++){const A=I-i,T=I-d,O=T>=0&&T<h?u[T].dy:-1;if(O===-1){a[A]=!0,k+=o;continue}const R=O*f*4,X=(O+o)*f*4,ie=k*f*4,ae=(k+o)*f*4;w===R&&S===ie?(w=X,S=ae):(b!==-1&&(g.set(c.subarray(b,w),C),_===-1&&b===0&&b===C&&(_=w),v===-1&&w===p&&b===C&&(v=b)),b=R,w=X,C=ie,S=ae),a[A]=!1,k+=o}b!==-1&&(g.set(c.subarray(b,w),C),_===-1&&b===0&&b===C&&(_=w),v===-1&&w===p&&b===C&&(v=b));const L=_===-1?-1:_/(f*4),x=v===-1?-1:v/(f*4);return[L,x,a]}static _renderLine(e,t,i,s,o,r,a,l,c,d,u,h,f,g,p){const _=f.content,v=f.tokens,b=e.width-r,w=p===1;let C=pa,S=0,k=0;for(let L=0,x=v.getCount();L<x;L++){const I=v.getEndOffset(L),A=v.getForeground(L),T=a.getColor(A);for(;S<I;S++){if(C>b)return;const O=_.charCodeAt(S);if(O===9){const R=h-(S+k)%h;k+=R-1,C+=R*r}else if(O===32)C+=r;else{const R=cl(O)?2:1;for(let X=0;X<R;X++)if(o===2?c.blockRenderChar(e,C,d+u,T,l,t,i,w):c.renderChar(e,C,d+u,O,T,l,t,i,g,s,w),C+=r,C>b)return}}}}}class ak{constructor(e,t,i){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=i,this._values=[];for(let s=0,o=this._endLineNumber-this._startLineNumber+1;s<o;s++)this._values[s]=i}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}class Vq extends ss{constructor(e){super(e);const i=this._context.configuration.options.get(142);this._widgets={},this._verticalScrollbarWidth=i.verticalScrollbarWidth,this._minimapWidth=i.minimap.minimapWidth,this._horizontalScrollbarHeight=i.horizontalScrollbarHeight,this._editorHeight=i.height,this._editorWidth=i.width,this._domNode=tt(document.createElement("div")),ur.write(this._domNode,4),this._domNode.setClassName("overlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const i=this._context.configuration.options.get(142);return this._verticalScrollbarWidth=i.verticalScrollbarWidth,this._minimapWidth=i.minimap.minimapWidth,this._horizontalScrollbarHeight=i.horizontalScrollbarHeight,this._editorHeight=i.height,this._editorWidth=i.width,!0}addWidget(e){const t=tt(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),this._domNode.appendChild(t),this.setShouldRender(),this._updateMaxMinWidth()}setWidgetPosition(e,t){const i=this._widgets[e.getId()];return i.preference===t?(this._updateMaxMinWidth(),!1):(i.preference=t,this.setShouldRender(),this._updateMaxMinWidth(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const s=this._widgets[t].domNode.domNode;delete this._widgets[t],s.parentNode.removeChild(s),this.setShouldRender(),this._updateMaxMinWidth()}}_updateMaxMinWidth(){var e,t;let i=0;const s=Object.keys(this._widgets);for(let o=0,r=s.length;o<r;o++){const a=s[o],c=(t=(e=this._widgets[a].widget).getMinContentWidthInPx)===null||t===void 0?void 0:t.call(e);typeof c<"u"&&(i=Math.max(i,c))}this._context.viewLayout.setOverlayWidgetsMinWidth(i)}_renderWidget(e){const t=e.domNode;if(e.preference===null){t.setTop("");return}if(e.preference===0)t.setTop(0),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(e.preference===1){const i=t.domNode.clientHeight;t.setTop(this._editorHeight-i-2*this._horizontalScrollbarHeight),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else e.preference===2&&(t.setTop(0),t.domNode.style.right="50%")}prepareRender(e){}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets);for(let i=0,s=t.length;i<s;i++){const o=t[i];this._renderWidget(this._widgets[o])}}}class Wq{constructor(e,t){const i=e.options;this.lineHeight=i.get(65),this.pixelRatio=i.get(140),this.overviewRulerLanes=i.get(81),this.renderBorder=i.get(80);const s=t.getColor(LU);this.borderColor=s?s.toString():null,this.hideCursor=i.get(58);const o=t.getColor(b3);this.cursorColor=o?o.transparent(.7).toString():null,this.themeType=t.type;const r=i.get(71),a=r.enabled,l=r.side,c=t.getColor(xU),d=hi.getDefaultBackground();c?this.backgroundColor=c:a&&l==="right"?this.backgroundColor=d:this.backgroundColor=null;const h=i.get(142).overviewRuler;this.top=h.top,this.right=h.right,this.domWidth=h.width,this.domHeight=h.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[f,g]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=f,this.w=g}_initLanes(e,t,i){const s=t-e;if(i>=3){const o=Math.floor(s/3),r=Math.floor(s/3),a=s-o-r,l=e,c=l+o,d=l+o+a;return[[0,l,c,l,d,l,c,l],[0,o,a,o+a,r,o+a+r,a+r,o+a+r]]}else if(i===2){const o=Math.floor(s/2),r=s-o,a=e,l=a+o;return[[0,a,a,a,l,a,a,a],[0,o,o,o,r,o+r,o+r,o+r]]}else{const o=e,r=s;return[[0,o,o,o,o,o,o,o],[0,r,r,r,r,r,r,r]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&J.equals(this.backgroundColor,e.backgroundColor)&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class Hq extends ss{constructor(e){super(e),this._domNode=tt(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=hi.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new Wq(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}onConfigurationChanged(e){return this._updateSettings(!1)}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,i=e.selections.length;t<i;t++)this._cursorPositions[t]=e.selections[t].getPosition();return this._cursorPositions.sort(Y.compare),!0}onDecorationsChanged(e){return!!e.affectsOverviewRuler}onFlushed(e){return!0}onScrollChanged(e){return e.scrollHeightChanged}onZonesChanged(e){return!0}onThemeChanged(e){return this._updateSettings(!1)}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render()}_render(){const e=this._settings.backgroundColor;if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(e?J.Format.CSS.formatHexA(e):""),this._domNode.setDisplay("none");return}this._domNode.setDisplay("block");const t=this._settings.canvasWidth,i=this._settings.canvasHeight,s=this._settings.lineHeight,o=this._context.viewLayout,r=this._context.viewLayout.getScrollHeight(),a=i/r,l=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme),c=6*this._settings.pixelRatio|0,d=c/2|0,u=this._domNode.domNode.getContext("2d");e?e.isOpaque()?(u.fillStyle=J.Format.CSS.formatHexA(e),u.fillRect(0,0,t,i)):(u.clearRect(0,0,t,i),u.fillStyle=J.Format.CSS.formatHexA(e),u.fillRect(0,0,t,i)):u.clearRect(0,0,t,i);const h=this._settings.x,f=this._settings.w;l.sort(b4.cmp);for(const g of l){const p=g.color,_=g.data;u.fillStyle=p;let v=0,b=0,w=0;for(let C=0,S=_.length/3;C<S;C++){const k=_[3*C],L=_[3*C+1],x=_[3*C+2];let I=o.getVerticalOffsetForLineNumber(L)*a|0,A=(o.getVerticalOffsetForLineNumber(x)+s)*a|0;if(A-I<c){let O=(I+A)/2|0;O<d?O=d:O+d>i&&(O=i-d),I=O-d,A=O+d}I>w+1||k!==v?(C!==0&&u.fillRect(h[v],b,f[v],w-b),v=k,b=I,w=A):A>w&&(w=A)}u.fillRect(h[v],b,f[v],w-b)}if(!this._settings.hideCursor&&this._settings.cursorColor){const g=2*this._settings.pixelRatio|0,p=g/2|0,_=this._settings.x[7],v=this._settings.w[7];u.fillStyle=this._settings.cursorColor;let b=-100,w=-100;for(let C=0,S=this._cursorPositions.length;C<S;C++){const k=this._cursorPositions[C];let L=o.getVerticalOffsetForLineNumber(k.lineNumber)*a|0;L<p?L=p:L+p>i&&(L=i-p);const x=L-p,I=x+g;x>w+1?(C!==0&&u.fillRect(_,b,v,w-b),b=x,w=I):I>w&&(w=I)}u.fillRect(_,b,v,w-b)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(u.beginPath(),u.lineWidth=1,u.strokeStyle=this._settings.borderColor,u.moveTo(0,0),u.lineTo(0,i),u.stroke(),u.moveTo(0,0),u.lineTo(t,0),u.stroke())}}class lk{constructor(e,t,i){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=i|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class Pu{constructor(e,t,i,s){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.heightInLines=i,this.color=s,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.heightInLines===t.heightInLines?e.endLineNumber-t.endLineNumber:e.heightInLines-t.heightInLines:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class $q{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(Pu.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),i=Math.floor(this.getCanvasHeight()),s=Math.floor(this._outerHeight),o=i/s,r=Math.floor(4*this._pixelRatio/2),a=[];for(let l=0,c=this._zones.length;l<c;l++){const d=this._zones[l];if(!e){const C=d.getColorZones();if(C){a.push(C);continue}}const u=this._getVerticalOffsetForLine(d.startLineNumber),h=d.heightInLines===0?this._getVerticalOffsetForLine(d.endLineNumber)+t:u+d.heightInLines*t,f=Math.floor(o*u),g=Math.floor(o*h);let p=Math.floor((f+g)/2),_=g-p;_<r&&(_=r),p-_<0&&(p=_),p+_>i&&(p=i-_);const v=d.color;let b=this._color2Id[v];b||(b=++this._lastAssignedId,this._color2Id[v]=b,this._id2Color[b]=v);const w=new lk(p-_,p+_,b);d.setColorZone(w),a.push(w)}return this._colorZonesInvalid=!1,a.sort(lk.compare),a}}class zq extends Fg{constructor(e,t){super(),this._context=e;const i=this._context.configuration.options;this._domNode=tt(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new $q(s=>this._context.viewLayout.getVerticalOffsetForLineNumber(s)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(i.get(65)),this._zoneManager.setPixelRatio(i.get(140)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(65)&&(this._zoneManager.setLineHeight(t.get(65)),this._render()),e.hasChanged(140)&&(this._zoneManager.setPixelRatio(t.get(140)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),i=this._zoneManager.resolveColorZones(),s=this._zoneManager.getId2Color(),o=this._domNode.domNode.getContext("2d");return o.clearRect(0,0,e,t),i.length>0&&this._renderOneLane(o,i,s,e),!0}_renderOneLane(e,t,i,s){let o=0,r=0,a=0;for(const l of t){const c=l.colorId,d=l.from,u=l.to;c!==o?(e.fillRect(0,r,s,a-r),o=c,e.fillStyle=i[o],r=d,a=u):a>=d?a=Math.max(a,u):(e.fillRect(0,r,s,a-r),r=d,a=u)}e.fillRect(0,r,s,a-r)}}class Uq extends ss{constructor(e){super(e),this.domNode=tt(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(100),this._typicalHalfwidthCharacterWidth=t.get(49).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(100),this._typicalHalfwidthCharacterWidth=t.get(49).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:s}=this._context.viewModel.model.getOptions(),o=s;let r=t-e;for(;r>0;){const a=tt(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(o),this.domNode.appendChild(a),this._renderedRulers.push(a),r--}return}let i=e-t;for(;i>0;){const s=this._renderedRulers.pop();this.domNode.removeChild(s),i--}}render(e){this._ensureRulersCount();for(let t=0,i=this._rulers.length;t<i;t++){const s=this._renderedRulers[t],o=this._rulers[t];s.setBoxShadow(o.color?`1px 0 0 0 ${o.color} inset`:""),s.setHeight(Math.min(e.scrollHeight,1e6)),s.setLeft(o.column*this._typicalHalfwidthCharacterWidth)}}}class qq extends ss{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const i=this._context.configuration.options.get(101);this._useShadows=i.useShadows,this._domNode=tt(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(142);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.verticalScrollbarWidth}onConfigurationChanged(e){const i=this._context.configuration.options.get(101);return this._useShadows=i.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}class jq{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class Kq{constructor(e,t){this.lineNumber=e,this.ranges=t}}function Gq(n){return new jq(n)}function Zq(n){return new Kq(n.lineNumber,n.ranges.map(Gq))}class ei extends jc{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(65),this._roundedSelection=t.get(99),this._typicalHalfwidthCharacterWidth=t.get(49).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(65),this._roundedSelection=t.get(99),this._typicalHalfwidthCharacterWidth=t.get(49).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,i=e.length;t<i;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,i){const s=this._typicalHalfwidthCharacterWidth/4;let o=null,r=null;if(i&&i.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let c=0;!o&&c<i.length;c++)i[c].lineNumber===a&&(o=i[c].ranges[0]);const l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let c=i.length-1;!r&&c>=0;c--)i[c].lineNumber===l&&(r=i[c].ranges[0]);o&&!o.startStyle&&(o=null),r&&!r.startStyle&&(r=null)}for(let a=0,l=t.length;a<l;a++){const c=t[a].ranges[0],d=c.left,u=c.left+c.width,h={top:0,bottom:0},f={top:0,bottom:0};if(a>0){const g=t[a-1].ranges[0].left,p=t[a-1].ranges[0].left+t[a-1].ranges[0].width;Ap(d-g)<s?h.top=2:d>g&&(h.top=1),Ap(u-p)<s?f.top=2:g<u&&u<p&&(f.top=1)}else o&&(h.top=o.startStyle.top,f.top=o.endStyle.top);if(a+1<l){const g=t[a+1].ranges[0].left,p=t[a+1].ranges[0].left+t[a+1].ranges[0].width;Ap(d-g)<s?h.bottom=2:g<d&&d<p&&(h.bottom=1),Ap(u-p)<s?f.bottom=2:u<p&&(f.bottom=1)}else r&&(h.bottom=r.startStyle.bottom,f.bottom=r.endStyle.bottom);c.startStyle=h,c.endStyle=f}}_getVisibleRangesWithStyle(e,t,i){const o=(t.linesVisibleRangesForRange(e,!0)||[]).map(Zq);return!this._visibleRangesHaveGaps(o)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,o,i),o}_createSelectionPiece(e,t,i,s,o){return'<div class="cslr '+i+'" style="top:'+e.toString()+"px;left:"+s.toString()+"px;width:"+o.toString()+"px;height:"+t+'px;"></div>'}_actualRenderOneSelection(e,t,i,s){if(s.length===0)return;const o=!!s[0].ranges[0].startStyle,r=this._lineHeight.toString(),a=(this._lineHeight-1).toString(),l=s[0].lineNumber,c=s[s.length-1].lineNumber;for(let d=0,u=s.length;d<u;d++){const h=s[d],f=h.lineNumber,g=f-t,p=i&&(f===c||f===l)?a:r,_=i&&f===l?1:0;let v="",b="";for(let w=0,C=h.ranges.length;w<C;w++){const S=h.ranges[w];if(o){const L=S.startStyle,x=S.endStyle;if(L.top===1||L.bottom===1){v+=this._createSelectionPiece(_,p,ei.SELECTION_CLASS_NAME,S.left-ei.ROUNDED_PIECE_WIDTH,ei.ROUNDED_PIECE_WIDTH);let I=ei.EDITOR_BACKGROUND_CLASS_NAME;L.top===1&&(I+=" "+ei.SELECTION_TOP_RIGHT),L.bottom===1&&(I+=" "+ei.SELECTION_BOTTOM_RIGHT),v+=this._createSelectionPiece(_,p,I,S.left-ei.ROUNDED_PIECE_WIDTH,ei.ROUNDED_PIECE_WIDTH)}if(x.top===1||x.bottom===1){v+=this._createSelectionPiece(_,p,ei.SELECTION_CLASS_NAME,S.left+S.width,ei.ROUNDED_PIECE_WIDTH);let I=ei.EDITOR_BACKGROUND_CLASS_NAME;x.top===1&&(I+=" "+ei.SELECTION_TOP_LEFT),x.bottom===1&&(I+=" "+ei.SELECTION_BOTTOM_LEFT),v+=this._createSelectionPiece(_,p,I,S.left+S.width,ei.ROUNDED_PIECE_WIDTH)}}let k=ei.SELECTION_CLASS_NAME;if(o){const L=S.startStyle,x=S.endStyle;L.top===0&&(k+=" "+ei.SELECTION_TOP_LEFT),L.bottom===0&&(k+=" "+ei.SELECTION_BOTTOM_LEFT),x.top===0&&(k+=" "+ei.SELECTION_TOP_RIGHT),x.bottom===0&&(k+=" "+ei.SELECTION_BOTTOM_RIGHT)}b+=this._createSelectionPiece(_,p,k,S.left,S.width)}e[g][0]+=v,e[g][1]+=b}}prepareRender(e){const t=[],i=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;for(let r=i;r<=s;r++){const a=r-i;t[a]=["",""]}const o=[];for(let r=0,a=this._selections.length;r<a;r++){const l=this._selections[r];if(l.isEmpty()){o[r]=null;continue}const c=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[r]);o[r]=c,this._actualRenderOneSelection(t,i,this._selections.length>1,c)}this._previousFrameVisibleRangesWithStyle=o,this._renderResult=t.map(([r,a])=>r+a)}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}ei.SELECTION_CLASS_NAME="selected-text";ei.SELECTION_TOP_LEFT="top-left-radius";ei.SELECTION_BOTTOM_LEFT="bottom-left-radius";ei.SELECTION_TOP_RIGHT="top-right-radius";ei.SELECTION_BOTTOM_RIGHT="bottom-right-radius";ei.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background";ei.ROUNDED_PIECE_WIDTH=10;sa((n,e)=>{const t=n.getColor(B$);t&&!t.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${t}; }`)});function Ap(n){return n<0?-n:n}class ck{constructor(e,t,i,s,o,r,a){this.top=e,this.left=t,this.paddingLeft=i,this.width=s,this.height=o,this.textContent=r,this.textContentClassName=a}}class dk{constructor(e){this._context=e;const t=this._context.configuration.options,i=t.get(49);this._cursorStyle=t.get(27),this._lineHeight=t.get(65),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(30),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=tt(document.createElement("div")),this._domNode.setClassName(`cursor ${fc}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),$i(this._domNode,i),this._domNode.setDisplay("none"),this._position=new Y(1,1),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(49);return this._cursorStyle=t.get(27),this._lineHeight=t.get(65),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(30),this._typicalHalfwidthCharacterWidth),$i(this._domNode,i),!0}onCursorPositionChanged(e,t){return t?this._domNode.domNode.style.transitionProperty="none":this._domNode.domNode.style.transitionProperty="",this._position=e,!0}_getGraphemeAwarePosition(){const{lineNumber:e,column:t}=this._position,i=this._context.viewModel.getLineContent(e),[s,o]=E6(i,t-1);return[new Y(e,s+1),i.substring(s,o)]}_prepareRender(e){let t="",i="";const[s,o]=this._getGraphemeAwarePosition();if(this._cursorStyle===Vi.Line||this._cursorStyle===Vi.LineThin){const h=e.visibleRangeForPosition(s);if(!h||h.outsideRenderedLine)return null;let f;this._cursorStyle===Vi.Line?(f=L2(this._lineCursorWidth>0?this._lineCursorWidth:2),f>2&&(t=o,i=this._getTokenClassName(s))):f=L2(1);let g=h.left,p=0;f>=2&&g>=1&&(p=1,g-=p);const _=e.getVerticalOffsetForLineNumber(s.lineNumber)-e.bigNumbersDelta;return new ck(_,g,p,f,this._lineHeight,t,i)}const r=e.linesVisibleRangesForRange(new $(s.lineNumber,s.column,s.lineNumber,s.column+o.length),!1);if(!r||r.length===0)return null;const a=r[0];if(a.outsideRenderedLine||a.ranges.length===0)return null;const l=a.ranges[0],c=o==="	"?this._typicalHalfwidthCharacterWidth:l.width<1?this._typicalHalfwidthCharacterWidth:l.width;this._cursorStyle===Vi.Block&&(t=o,i=this._getTokenClassName(s));let d=e.getVerticalOffsetForLineNumber(s.lineNumber)-e.bigNumbersDelta,u=this._lineHeight;return(this._cursorStyle===Vi.Underline||this._cursorStyle===Vi.UnderlineThin)&&(d+=this._lineHeight-2,u=2),new ck(d,l.left,0,c,u,t,i)}_getTokenClassName(e){const t=this._context.viewModel.getViewLineData(e.lineNumber),i=t.tokens.findTokenIndexAtOffset(e.column-1);return t.tokens.getClassName(i)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${fc} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setPaddingLeft(this._renderData.paddingLeft),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}class Gf extends ss{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(89),this._cursorBlinking=t.get(25),this._cursorStyle=t.get(27),this._cursorSmoothCaretAnimation=t.get(26),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new dk(this._context),this._secondaryCursors=[],this._renderData=[],this._domNode=tt(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new zc,this._cursorFlatBlinkInterval=new Tg,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(89),this._cursorBlinking=t.get(25),this._cursorStyle=t.get(27),this._cursorSmoothCaretAnimation=t.get(26),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let i=0,s=this._secondaryCursors.length;i<s;i++)this._secondaryCursors[i].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t,i){const s=this._secondaryCursors.length!==t.length||this._cursorSmoothCaretAnimation==="explicit"&&i!==3;if(this._primaryCursor.onCursorPositionChanged(e,s),this._updateBlinking(),this._secondaryCursors.length<t.length){const o=t.length-this._secondaryCursors.length;for(let r=0;r<o;r++){const a=new dk(this._context);this._domNode.domNode.insertBefore(a.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(a)}}else if(this._secondaryCursors.length>t.length){const o=this._secondaryCursors.length-t.length;for(let r=0;r<o;r++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let o=0;o<t.length;o++)this._secondaryCursors[o].onCursorPositionChanged(t[o],s)}onCursorStateChanged(e){const t=[];for(let s=0,o=e.selections.length;s<o;s++)t[s]=e.selections[s].getPosition();this._onCursorPositionChanged(t[0],t.slice(1),e.reason);const i=e.selections[0].isEmpty();return this._selectionIsEmpty!==i&&(this._selectionIsEmpty=i,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=i=>{for(let s=0,o=e.ranges.length;s<o;s++)if(e.ranges[s].fromLineNumber<=i.lineNumber&&i.lineNumber<=e.ranges[s].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(const i of this._secondaryCursors)if(t(i.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===0,i=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!i&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},Gf.BLINK_INTERVAL):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},Gf.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case Vi.Line:e+=" cursor-line-style";break;case Vi.Block:e+=" cursor-block-style";break;case Vi.Underline:e+=" cursor-underline-style";break;case Vi.LineThin:e+=" cursor-line-thin-style";break;case Vi.BlockOutline:e+=" cursor-block-outline-style";break;case Vi.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return(this._cursorSmoothCaretAnimation==="on"||this._cursorSmoothCaretAnimation==="explicit")&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,i=this._secondaryCursors.length;t<i;t++)this._secondaryCursors[t].prepareRender(e)}render(e){const t=[];let i=0;const s=this._primaryCursor.render(e);s&&(t[i++]=s);for(let o=0,r=this._secondaryCursors.length;o<r;o++){const a=this._secondaryCursors[o].render(e);a&&(t[i++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}}Gf.BLINK_INTERVAL=500;sa((n,e)=>{const t=n.getColor(b3);if(t){let i=n.getColor(uU);i||(i=t.opposite()),e.addRule(`.monaco-editor .cursors-layer .cursor { background-color: ${t}; border-color: ${t}; color: ${i}; }`),tu(n.type)&&e.addRule(`.monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ${i}; border-right: 1px solid ${i}; }`)}});const xb=()=>{throw new Error("Invalid change accessor")};class Yq extends ss{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(142);this._lineHeight=t.get(65),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,this.domNode=tt(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=tt(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const s of e)t.set(s.id,s);let i=!1;return this._context.viewModel.changeWhitespace(s=>{const o=Object.keys(this._zones);for(let r=0,a=o.length;r<a;r++){const l=o[r],c=this._zones[l],d=this._computeWhitespaceProps(c.delegate);c.isInHiddenArea=d.isInHiddenArea;const u=t.get(l);u&&(u.afterLineNumber!==d.afterViewLineNumber||u.height!==d.heightInPx)&&(s.changeOneWhitespace(l,d.afterViewLineNumber,d.heightInPx),this._safeCallOnComputedHeight(c.delegate,d.heightInPx),i=!0)}}),i}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(142);return this._lineHeight=t.get(65),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,e.hasChanged(65)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){var t,i;return(i=(t=e.ordinal)!==null&&t!==void 0?t:e.afterColumn)!==null&&i!==void 0?i:1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const r=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new Y(r,this._context.viewModel.model.getLineMaxColumn(r))}let i;t.column===this._context.viewModel.model.getLineMaxColumn(t.lineNumber)?i=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber+1,column:1}):i=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber,column:t.column+1});const s=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity,!0),o=e.showInHiddenAreas||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(i);return{isInHiddenArea:!o,afterViewLineNumber:s.lineNumber,heightInPx:o?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.viewModel.changeWhitespace(i=>{const s={addZone:o=>(t=!0,this._addZone(i,o)),removeZone:o=>{o&&(t=this._removeZone(i,o)||t)},layoutZone:o=>{o&&(t=this._layoutZone(i,o)||t)}};Xq(e,s),s.addZone=xb,s.removeZone=xb,s.layoutZone=xb}),t}_addZone(e,t){const i=this._computeWhitespaceProps(t),o={whitespaceId:e.insertWhitespace(i.afterViewLineNumber,this._getZoneOrdinal(t),i.heightInPx,i.minWidthInPx),delegate:t,isInHiddenArea:i.isInHiddenArea,isVisible:!1,domNode:tt(t.domNode),marginDomNode:t.marginDomNode?tt(t.marginDomNode):null};return this._safeCallOnComputedHeight(o.delegate,i.heightInPx),o.domNode.setPosition("absolute"),o.domNode.domNode.style.width="100%",o.domNode.setDisplay("none"),o.domNode.setAttribute("monaco-view-zone",o.whitespaceId),this.domNode.appendChild(o.domNode),o.marginDomNode&&(o.marginDomNode.setPosition("absolute"),o.marginDomNode.domNode.style.width="100%",o.marginDomNode.setDisplay("none"),o.marginDomNode.setAttribute("monaco-view-zone",o.whitespaceId),this.marginDomNode.appendChild(o.marginDomNode)),this._zones[o.whitespaceId]=o,this.setShouldRender(),o.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t];return delete this._zones[t],e.removeWhitespace(i.whitespaceId),i.domNode.removeAttribute("monaco-visible-view-zone"),i.domNode.removeAttribute("monaco-view-zone"),i.domNode.domNode.parentNode.removeChild(i.domNode.domNode),i.marginDomNode&&(i.marginDomNode.removeAttribute("monaco-visible-view-zone"),i.marginDomNode.removeAttribute("monaco-view-zone"),i.marginDomNode.domNode.parentNode.removeChild(i.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t],s=this._computeWhitespaceProps(i.delegate);return i.isInHiddenArea=s.isInHiddenArea,e.changeOneWhitespace(i.whitespaceId,s.afterViewLineNumber,s.heightInPx),this._safeCallOnComputedHeight(i.delegate,s.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){return this._zones.hasOwnProperty(e)?!!this._zones[e].delegate.suppressMouseDown:!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(i){$t(i)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(i){$t(i)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,i={};let s=!1;for(const r of t)this._zones[r.id].isInHiddenArea||(i[r.id]=r,s=!0);const o=Object.keys(this._zones);for(let r=0,a=o.length;r<a;r++){const l=o[r],c=this._zones[l];let d=0,u=0,h="none";i.hasOwnProperty(l)?(d=i[l].verticalOffset-e.bigNumbersDelta,u=i[l].height,h="block",c.isVisible||(c.domNode.setAttribute("monaco-visible-view-zone","true"),c.isVisible=!0),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(i[l].verticalOffset))):(c.isVisible&&(c.domNode.removeAttribute("monaco-visible-view-zone"),c.isVisible=!1),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),c.domNode.setTop(d),c.domNode.setHeight(u),c.domNode.setDisplay(h),c.marginDomNode&&(c.marginDomNode.setTop(d),c.marginDomNode.setHeight(u),c.marginDomNode.setDisplay(h))}s&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function Xq(n,e){try{return n(e)}catch(t){$t(t)}}class Qq{get type(){return this._theme.type}get value(){return this._theme}constructor(e){this._theme=e}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class Jq{constructor(e,t,i){this.configuration=e,this.theme=new Qq(t),this.viewModel=i,this.viewLayout=i.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}}class ej{constructor(e,t,i,s){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.whitespaceViewportData=i,this._model=s,this.visibleRange=new $(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewportViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class tj extends ss{constructor(e){super(e),this.blocks=[],this.contentWidth=-1,this.contentLeft=0,this.domNode=tt(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let e=!1;const i=this._context.configuration.options.get(142),s=i.contentWidth-i.verticalScrollbarWidth;this.contentWidth!==s&&(this.contentWidth=s,e=!0);const o=i.contentLeft;return this.contentLeft!==o&&(this.contentLeft=o,e=!0),e}dispose(){super.dispose()}onConfigurationChanged(e){return this.update()}onScrollChanged(e){return e.scrollTopChanged||e.scrollLeftChanged}onDecorationsChanged(e){return!0}onZonesChanged(e){return!0}prepareRender(e){}render(e){var t;let i=0;const s=e.getDecorationsInViewport();for(const o of s){if(!o.options.blockClassName)continue;let r=this.blocks[i];r||(r=this.blocks[i]=tt(document.createElement("div")),this.domNode.appendChild(r));let a,l;o.options.blockIsAfterEnd?(a=e.getVerticalOffsetAfterLineNumber(o.range.endLineNumber,!1),l=e.getVerticalOffsetAfterLineNumber(o.range.endLineNumber,!0)):(a=e.getVerticalOffsetForLineNumber(o.range.startLineNumber,!0),l=o.range.isEmpty()&&!o.options.blockDoesNotCollapse?e.getVerticalOffsetForLineNumber(o.range.startLineNumber,!1):e.getVerticalOffsetAfterLineNumber(o.range.endLineNumber,!0));const[c,d,u,h]=(t=o.options.blockPadding)!==null&&t!==void 0?t:[0,0,0,0];r.setClassName("blockDecorations-block "+o.options.blockClassName),r.setLeft(this.contentLeft-h),r.setWidth(this.contentWidth+h+d),r.setTop(a-e.scrollTop-c),r.setHeight(l-a+c+u),i++}for(let o=i;o<this.blocks.length;o++)this.blocks[o].domNode.remove();this.blocks.length=i}}class ij extends jc{constructor(e){super(),this._context=e,this._options=new uk(this._context.configuration),this._selection=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=new uk(this._context.configuration);return this._options.equals(t)?e.hasChanged(142):(this._options=t,!0)}onCursorStateChanged(e){return this._selection=e.selections,this._options.renderWhitespace==="selection"}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}prepareRender(e){if(this._options.renderWhitespace==="none"){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber-t+1,o=new Array(s);for(let a=0;a<s;a++)o[a]=!0;const r=this._context.viewModel.getMinimapLinesRenderingData(e.viewportData.startLineNumber,e.viewportData.endLineNumber,o);this._renderResult=[];for(let a=e.viewportData.startLineNumber;a<=e.viewportData.endLineNumber;a++){const l=a-e.viewportData.startLineNumber,c=r.data[l];let d=null;if(this._options.renderWhitespace==="selection"){const u=this._selection;for(const h of u){if(h.endLineNumber<a||h.startLineNumber>a)continue;const f=h.startLineNumber===a?h.startColumn:c.minColumn,g=h.endLineNumber===a?h.endColumn:c.maxColumn;f<g&&(d||(d=[]),d.push(new g4(f-1,g-1)))}}this._renderResult[l]=this._applyRenderWhitespace(e,a,d,c)}}_applyRenderWhitespace(e,t,i,s){if(this._options.renderWhitespace==="selection"&&!i||this._options.renderWhitespace==="trailing"&&s.continuesWithWrappedLine)return"";const o=this._context.theme.getColor(Gr),r=this._options.renderWithSVG,a=s.content,l=this._options.stopRenderingLineAfter===-1?a.length:Math.min(this._options.stopRenderingLineAfter,a.length),c=s.continuesWithWrappedLine,d=s.minColumn-1,u=this._options.renderWhitespace==="boundary",h=this._options.renderWhitespace==="trailing",f=this._options.lineHeight,g=this._options.middotWidth,p=this._options.wsmiddotWidth,_=this._options.spaceWidth,v=Math.abs(p-_),b=Math.abs(g-_),w=v<b?11825:183,C=this._options.canUseHalfwidthRightwardsArrow;let S="",k=!1,L=Jn(a),x;L===-1?(k=!0,L=l,x=l):x=Fc(a);let I=0,A=i&&i[I],T=0;for(let O=d;O<l;O++){const R=a.charCodeAt(O);if(A&&O>=A.endOffset&&(I++,A=i&&i[I]),R!==9&&R!==32||h&&!k&&O<=x)continue;if(u&&O>=L&&O<=x&&R===32){const ie=O-1>=0?a.charCodeAt(O-1):0,ae=O+1<l?a.charCodeAt(O+1):0;if(ie!==32&&ae!==32)continue}if(u&&c&&O===l-1){const ie=O-1>=0?a.charCodeAt(O-1):0;if(R===32&&ie!==32&&ie!==9)continue}if(i&&(!A||A.startOffset>O||A.endOffset<=O))continue;const X=e.visibleRangeForPosition(new Y(t,O+1));X&&(r?(T=Math.max(T,X.left),R===9?S+=this._renderArrow(f,_,X.left):S+=`<circle cx="${(X.left+_/2).toFixed(2)}" cy="${(f/2).toFixed(2)}" r="${(_/7).toFixed(2)}" />`):R===9?S+=`<div class="mwh" style="left:${X.left}px;height:${f}px;">${C?String.fromCharCode(65515):String.fromCharCode(8594)}</div>`:S+=`<div class="mwh" style="left:${X.left}px;height:${f}px;">${String.fromCharCode(w)}</div>`)}return r?(T=Math.round(T+_),`<svg style="position:absolute;width:${T}px;height:${f}px" viewBox="0 0 ${T} ${f}" xmlns="http://www.w3.org/2000/svg" fill="${o}">`+S+"</svg>"):S}_renderArrow(e,t,i){const s=t/7,o=t,r=e/2,a=i,l={x:0,y:s/2},c={x:100/125*o,y:l.y},d={x:c.x-.2*c.x,y:c.y+.2*c.x},u={x:d.x+.1*c.x,y:d.y+.1*c.x},h={x:u.x+.35*c.x,y:u.y-.35*c.x},f={x:h.x,y:-h.y},g={x:u.x,y:-u.y},p={x:d.x,y:-d.y},_={x:c.x,y:-c.y},v={x:l.x,y:-l.y};return`<path d="M ${[l,c,d,u,h,f,g,p,_,v].map(C=>`${(a+C.x).toFixed(2)} ${(r+C.y).toFixed(2)}`).join(" L ")}" />`}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}class uk{constructor(e){const t=e.options,i=t.get(49),s=t.get(37);s==="off"?(this.renderWhitespace="none",this.renderWithSVG=!1):s==="svg"?(this.renderWhitespace=t.get(97),this.renderWithSVG=!0):(this.renderWhitespace=t.get(97),this.renderWithSVG=!1),this.spaceWidth=i.spaceWidth,this.middotWidth=i.middotWidth,this.wsmiddotWidth=i.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=i.canUseHalfwidthRightwardsArrow,this.lineHeight=t.get(65),this.stopRenderingLineAfter=t.get(115)}equals(e){return this.renderWhitespace===e.renderWhitespace&&this.renderWithSVG===e.renderWithSVG&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter}}var nj=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},sj=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let aC=class extends Fg{constructor(e,t,i,s,o,r,a){super(),this._instantiationService=a,this._shouldRecomputeGlyphMarginLanes=!1,this._selections=[new at(1,1,1,1)],this._renderAnimationFrame=null;const l=new dq(t,s,o,e);this._context=new Jq(t,i,s),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=this._instantiationService.createInstance(nC,this._context,l,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=tt(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=tt(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=tt(document.createElement("div")),ur.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new vq(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new e1(this._context,this._linesContent),this._viewZones=new Yq(this._context),this._viewParts.push(this._viewZones);const c=new Hq(this._context);this._viewParts.push(c);const d=new qq(this._context);this._viewParts.push(d);const u=new hq(this._context);this._viewParts.push(u),u.addDynamicOverlay(new mq(this._context)),u.addDynamicOverlay(new ei(this._context)),u.addDynamicOverlay(new yq(this._context)),u.addDynamicOverlay(new bq(this._context)),u.addDynamicOverlay(new ij(this._context));const h=new fq(this._context);this._viewParts.push(h),h.addDynamicOverlay(new _q(this._context)),h.addDynamicOverlay(new Mq(this._context)),h.addDynamicOverlay(new Aq(this._context)),h.addDynamicOverlay(new Hg(this._context)),this._glyphMarginWidgets=new Eq(this._context),this._viewParts.push(this._glyphMarginWidgets);const f=new Ec(this._context);f.getDomNode().appendChild(this._viewZones.marginDomNode),f.getDomNode().appendChild(h.getDomNode()),f.getDomNode().appendChild(this._glyphMarginWidgets.domNode),this._viewParts.push(f),this._contentWidgets=new gq(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new Gf(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new Vq(this._context),this._viewParts.push(this._overlayWidgets);const g=new Uq(this._context);this._viewParts.push(g);const p=new tj(this._context);this._viewParts.push(p);const _=new Bq(this._context);if(this._viewParts.push(_),c){const v=this._scrollbar.getOverviewRulerLayoutInfo();v.parent.insertBefore(c.getDomNode(),v.insertBefore)}this._linesContent.appendChild(u.getDomNode()),this._linesContent.appendChild(g.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(f.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(d.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(_.getDomNode()),this._overflowGuardContainer.appendChild(p.domNode),this.domNode.appendChild(this._overflowGuardContainer),r?r.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode):this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this._applyLayout(),this._pointerHandler=this._register(new lU(this._context,l,this._createPointerHandlerHelper()))}_flushAccumulatedAndRenderNow(){this._shouldRecomputeGlyphMarginLanes&&(this._shouldRecomputeGlyphMarginLanes=!1,this._context.configuration.setGlyphMarginDecorationLaneCount(this._computeGlyphMarginLaneCount())),Ua.onRenderStart(),this._renderNow()}_computeGlyphMarginLaneCount(){const e=this._context.viewModel.model;let t=[];t=t.concat(e.getAllMarginDecorations().map(o=>{var r,a;const l=(a=(r=o.options.glyphMargin)===null||r===void 0?void 0:r.position)!==null&&a!==void 0?a:Zd.Left;return{range:o.range,lane:l}})),t=t.concat(this._glyphMarginWidgets.getWidgets().map(o=>({range:e.validateRange(o.preference.range),lane:o.preference.lane}))),t.sort((o,r)=>$.compareRangesUsingStarts(o.range,r.range));let i=null,s=null;for(const o of t)if(o.lane===Zd.Left&&(!i||$.compareRangesUsingEnds(i,o.range)<0)&&(i=o.range),o.lane===Zd.Right&&(!s||$.compareRangesUsingEnds(s,o.range)<0)&&(s=o.range),i&&s){if(i.endLineNumber<s.startLineNumber){i=null;continue}if(s.endLineNumber<i.startLineNumber){s=null;continue}return 2}return 1}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new Bz(e,t)},renderNow:()=>{this.render(!0,!1)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new Y(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(e))}}_applyLayout(){const t=this._context.configuration.options.get(142);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(139)+" "+b0(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onDecorationsChanged(e){return e.affectsGlyphMargin&&(this._shouldRecomputeGlyphMarginLanes=!0),!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){this._renderAnimationFrame===null&&(this._renderAnimationFrame=A4(this._onRenderScheduled.bind(this),100))}_onRenderScheduled(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()}_renderNow(){oj(()=>this._actualRender())}_getViewPartsToRender(){const e=[];let t=0;for(const i of this._viewParts)i.shouldRender()&&(e[t++]=i);return e}_actualRender(){if(!T4(this.domNode.domNode))return;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return;const t=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const i=new ej(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(i),this._viewLines.shouldRender()&&(this._viewLines.renderText(i),this._viewLines.onDidRender(),e=this._getViewPartsToRender());const s=new Tz(this._context.viewLayout,i,this._viewLines);for(const o of e)o.prepareRender(s);for(const o of e)o.render(s),o.onDidRender()}delegateVerticalScrollbarPointerDown(e){this._scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this._scrollbar.delegateScrollFromMouseWheelEvent(e)}restoreState(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft},1),this._context.viewModel.visibleLinesStabilized()}getOffsetForColumn(e,t){const i=this._context.viewModel.model.validatePosition({lineNumber:e,column:t}),s=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i);this._flushAccumulatedAndRenderNow();const o=this._viewLines.visibleRangeForPosition(new Y(s.lineNumber,s.column));return o?o.left:-1}getTargetAtClientPoint(e,t){const i=this._pointerHandler.getTargetAtClientPoint(e,t);return i?J_.convertViewToModelMouseTarget(i,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(e){return new zq(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const i of this._viewParts)i.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}writeScreenReaderContent(e){this._textAreaHandler.writeScreenReaderContent(e)}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){var t,i,s,o,r,a,l,c;this._contentWidgets.setWidgetPosition(e.widget,(i=(t=e.position)===null||t===void 0?void 0:t.position)!==null&&i!==void 0?i:null,(o=(s=e.position)===null||s===void 0?void 0:s.secondaryPosition)!==null&&o!==void 0?o:null,(a=(r=e.position)===null||r===void 0?void 0:r.preference)!==null&&a!==void 0?a:null,(c=(l=e.position)===null||l===void 0?void 0:l.positionAffinity)!==null&&c!==void 0?c:null),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){const t=e.position?e.position.preference:null;this._overlayWidgets.setWidgetPosition(e.widget,t)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}addGlyphMarginWidget(e){this._glyphMarginWidgets.addWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}layoutGlyphMarginWidget(e){const t=e.position;this._glyphMarginWidgets.setWidgetPosition(e.widget,t)&&(this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender())}removeGlyphMarginWidget(e){this._glyphMarginWidgets.removeWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}};aC=nj([sj(6,ai)],aC);function oj(n){try{return n()}catch(e){$t(e)}}class R3{constructor(e,t,i,s,o,r){this.id=e,this.label=t,this.alias=i,this._precondition=s,this._run=o,this._contextKeyService=r}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(e){return this.isSupported()?this._run(e):Promise.resolve(void 0)}}function Ou(n){let e=0,t=0,i=0,s=0;for(let o=0,r=n.length;o<r;o++){const a=n.charCodeAt(o);a===13?(e===0&&(t=o),e++,o+1<r&&n.charCodeAt(o+1)===10?(s|=2,o++):s|=3,i=o+1):a===10&&(s|=1,e===0&&(t=o),e++,i=o+1)}return e===0&&(t=n.length),[e,t,n.length-i,s]}class hk{constructor(e,t,i,s){this.range=e,this.nestingLevel=t,this.nestingLevelOfEqualBracketType=i,this.isInvalid=s}}class rj{constructor(e,t,i,s,o,r){this.range=e,this.openingBracketRange=t,this.closingBracketRange=i,this.nestingLevel=s,this.nestingLevelOfEqualBracketType=o,this.bracketPairNode=r}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}}class aj extends rj{constructor(e,t,i,s,o,r,a){super(e,t,i,s,o,r),this.minVisibleColumnIndentation=a}}class lC{constructor(e,t){this.lineCount=e,this.columnCount=t}toString(){return`${this.lineCount},${this.columnCount}`}}lC.zero=new lC(0,0);function lj(n,e,t,i){return n!==t?si(t-n,i):si(0,i-e)}const Tn=0;function y0(n){return n===0}const _s=Math.pow(2,26);function si(n,e){return n*_s+e}function Ps(n){const e=n,t=Math.floor(e/_s),i=e-t*_s;return new lC(t,i)}function cj(n){return Math.floor(n/_s)}function gi(n,e){let t=n+e;return e>=_s&&(t=t-n%_s),t}function dj(n,e){return n.reduce((t,i)=>gi(t,e(i)),Tn)}function P3(n,e){return n===e}function Zf(n,e){const t=n,i=e;if(i-t<=0)return Tn;const o=Math.floor(t/_s),r=Math.floor(i/_s),a=i-r*_s;if(o===r){const l=t-o*_s;return si(0,a-l)}else return si(r-o,a)}function nu(n,e){return n<e}function su(n,e){return n<=e}function Hh(n,e){return n>=e}function Rd(n){return si(n.lineNumber-1,n.column-1)}function pc(n,e){const t=n,i=Math.floor(t/_s),s=t-i*_s,o=e,r=Math.floor(o/_s),a=o-r*_s;return new $(i+1,s+1,r+1,a+1)}function uj(n){const e=kg(n);return si(e.length-1,e[e.length-1].length)}class Zr{static fromModelContentChanges(e){return e.map(i=>{const s=$.lift(i.range);return new Zr(Rd(s.getStartPosition()),Rd(s.getEndPosition()),uj(i.text))}).reverse()}constructor(e,t,i){this.startOffset=e,this.endOffset=t,this.newLength=i}toString(){return`[${Ps(this.startOffset)}...${Ps(this.endOffset)}) -> ${Ps(this.newLength)}`}}class hj{constructor(e){this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(t=>iL.from(t))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],i=t?this.translateOldToCur(t.offsetObj):null;return i===null?null:Zf(e,i)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?si(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):si(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=Ps(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?si(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):si(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],i=this.translateOldToCur(t.endOffsetAfterObj);if(su(i,e)){this.nextEditIdx++;const s=Ps(i),o=Ps(this.translateOldToCur(t.endOffsetBeforeObj)),r=s.lineCount-o.lineCount;this.deltaOldToNewLineCount+=r;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=s.columnCount-o.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}}class iL{static from(e){return new iL(e.startOffset,e.endOffset,e.newLength)}constructor(e,t,i){this.endOffsetBeforeObj=Ps(t),this.endOffsetAfterObj=Ps(gi(e,i)),this.offsetObj=Ps(e)}}const xm=[];class ui{static create(e,t){if(e<=128&&t.length===0){let i=ui.cache[e];return i||(i=new ui(e,t),ui.cache[e]=i),i}return new ui(e,t)}static getEmpty(){return this.empty}constructor(e,t){this.items=e,this.additionalItems=t}add(e,t){const i=t.getKey(e);let s=i>>5;if(s===0){const r=1<<i|this.items;return r===this.items?this:ui.create(r,this.additionalItems)}s--;const o=this.additionalItems.slice(0);for(;o.length<s;)o.push(0);return o[s]|=1<<(i&31),ui.create(this.items,o)}merge(e){const t=this.items|e.items;if(this.additionalItems===xm&&e.additionalItems===xm)return t===this.items?this:t===e.items?e:ui.create(t,xm);const i=[];for(let s=0;s<Math.max(this.additionalItems.length,e.additionalItems.length);s++){const o=this.additionalItems[s]||0,r=e.additionalItems[s]||0;i.push(o|r)}return ui.create(t,i)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}}ui.cache=new Array(129);ui.empty=ui.create(0,xm);const fk={getKey(n){return n}};class fj{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}}class nL{get length(){return this._length}constructor(e){this._length=e}}class Yf extends nL{static create(e,t,i){let s=e.length;return t&&(s=gi(s,t.length)),i&&(s=gi(s,i.length)),new Yf(s,e,t,i,t?t.missingOpeningBracketIds:ui.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=[];return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}constructor(e,t,i,s,o){super(e),this.openingBracket=t,this.child=i,this.closingBracket=s,this.missingOpeningBracketIds=o}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new Yf(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(gi(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class hr extends nL{static create23(e,t,i,s=!1){let o=e.length,r=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(o=gi(o,t.length),r=r.merge(t.missingOpeningBracketIds),i){if(e.listHeight!==i.listHeight)throw new Error("Invalid list heights");o=gi(o,i.length),r=r.merge(i.missingOpeningBracketIds)}return s?new gj(o,e.listHeight+1,e,t,i,r):new Xf(o,e.listHeight+1,e,t,i,r)}static getEmpty(){return new pj(Tn,0,[],ui.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}constructor(e,t,i){super(e),this.listHeight=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),i=t.kind===4?t.toMutable():t;return t!==i&&this.setChild(e-1,i),i}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),i=t.kind===4?t.toMutable():t;return t!==i&&this.setChild(0,i),i}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds)||this.childrenLength===0)return!1;let t=this;for(;t.kind===4;){const i=t.childrenLength;if(i===0)throw new Ai;t=t.getChild(i-1)}return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,i=this.getChild(0).missingOpeningBracketIds;for(let s=1;s<e;s++){const o=this.getChild(s);t=gi(t,o.length),i=i.merge(o.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let i=Number.MAX_SAFE_INTEGER,s=e;for(let o=0;o<this.childrenLength;o++){const r=this.getChild(o);r&&(i=Math.min(i,r.computeMinIndentation(s,t)),s=gi(s,r.length))}return this.cachedMinIndentation=i,i}}class Xf extends hr{get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}constructor(e,t,i,s,o,r){super(e,t,r),this._item1=i,this._item2=s,this._item3=o}deepClone(){return new Xf(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class gj extends Xf{toMutable(){return new Xf(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class S0 extends hr{get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}constructor(e,t,i,s){super(e,t,s),this._children=i}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new S0(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class pj extends S0{toMutable(){return new S0(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const mj=[];class sL extends nL{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return mj}deepClone(){return this}}class Zl extends sL{get kind(){return 0}get missingOpeningBracketIds(){return ui.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const i=Ps(e),s=(i.columnCount===0?i.lineCount:i.lineCount+1)+1,o=cj(gi(e,this.length))+1;let r=Number.MAX_SAFE_INTEGER;for(let a=s;a<=o;a++){const l=t.getLineFirstNonWhitespaceColumn(a),c=t.getLineContent(a);if(l===0)continue;const d=Si.visibleColumnFromColumn(c,l,t.getOptions().tabSize);r=Math.min(r,d)}return r}}class L0 extends sL{static create(e,t,i){return new L0(e,t,i)}get kind(){return 1}get missingOpeningBracketIds(){return ui.getEmpty()}constructor(e,t,i){super(e),this.bracketInfo=t,this.bracketIds=i}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class _j extends sL{get kind(){return 3}constructor(e,t){super(t),this.missingOpeningBracketIds=e}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class Ra{constructor(e,t,i,s,o){this.length=e,this.kind=t,this.bracketId=i,this.bracketIds=s,this.astNode=o}}class bj{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new vj(this.textModel,this.bracketTokens),this._offset=Tn,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return si(this.textBufferLineCount-1,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=gi(this._offset,e);const t=Ps(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=gi(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class vj{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.line!==null&&(this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const o=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=o.length,o}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let i=0;for(;;){const o=this.lineTokens,r=o.getCount();let a=null;if(this.lineTokenOffset<r){const l=o.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<r&&l===o.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const c=qn.getTokenType(l)===0,d=qn.containsBalancedBrackets(l),u=o.getEndOffset(this.lineTokenOffset);if(d&&c&&this.lineCharOffset<u){const h=o.getLanguageId(this.lineTokenOffset),f=this.line.substring(this.lineCharOffset,u),g=this.bracketTokens.getSingleLanguageBracketTokens(h),p=g.regExpGlobal;if(p){p.lastIndex=0;const _=p.exec(f);_&&(a=g.getToken(_[0]),a&&(this.lineCharOffset+=_.index))}}if(i+=u-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=u}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,i+=33,i>1e3))break;if(i>1500)break}const s=lj(e,t,this.lineIdx,this.lineCharOffset);return new Ra(s,0,-1,ui.getEmpty(),new Zl(s))}}class wj{constructor(e,t){this.text=e,this._offset=Tn,this.idx=0;const i=t.getRegExpStr(),s=i?new RegExp(i+`|
`,"gi"):null,o=[];let r,a=0,l=0,c=0,d=0;const u=[];for(let g=0;g<60;g++)u.push(new Ra(si(0,g),0,-1,ui.getEmpty(),new Zl(si(0,g))));const h=[];for(let g=0;g<60;g++)h.push(new Ra(si(1,g),0,-1,ui.getEmpty(),new Zl(si(1,g))));if(s)for(s.lastIndex=0;(r=s.exec(e))!==null;){const g=r.index,p=r[0];if(p===`
`)a++,l=g+1;else{if(c!==g){let _;if(d===a){const v=g-c;if(v<u.length)_=u[v];else{const b=si(0,v);_=new Ra(b,0,-1,ui.getEmpty(),new Zl(b))}}else{const v=a-d,b=g-l;if(v===1&&b<h.length)_=h[b];else{const w=si(v,b);_=new Ra(w,0,-1,ui.getEmpty(),new Zl(w))}}o.push(_)}o.push(t.getToken(p)),c=g+p.length,d=a}}const f=e.length;if(c!==f){const g=d===a?si(0,f-c):si(a-d,f-l);o.push(new Ra(g,0,-1,ui.getEmpty(),new Zl(g)))}this.length=si(a,f-l),this.tokens=o}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new BF}}class oL{static createFromLanguage(e,t){function i(o){return t.getKey(`${o.languageId}:::${o.bracketText}`)}const s=new Map;for(const o of e.bracketsNew.openingBrackets){const r=si(0,o.bracketText.length),a=i(o),l=ui.getEmpty().add(a,fk);s.set(o.bracketText,new Ra(r,1,a,l,L0.create(r,o,l)))}for(const o of e.bracketsNew.closingBrackets){const r=si(0,o.bracketText.length);let a=ui.getEmpty();const l=o.getOpeningBrackets();for(const c of l)a=a.add(i(c),fk);s.set(o.bracketText,new Ra(r,2,i(l[0]),a,L0.create(r,o,a)))}return new oL(s)}constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>Cj(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(const[t,i]of this.map)if(i.kind===2&&i.bracketIds.intersects(e))return t}get isEmpty(){return this.map.size===0}}function Cj(n){let e=ta(n);return/^[\w ]+/.test(n)&&(e=`\\b${e}`),/[\w ]+$/.test(n)&&(e=`${e}\\b`),e}class yj{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=oL.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}function Sj(n){if(n.length===0)return null;if(n.length===1)return n[0];let e=0;function t(){if(e>=n.length)return null;const r=e,a=n[r].listHeight;for(e++;e<n.length&&n[e].listHeight===a;)e++;return e-r>=2?O3(r===0&&e===n.length?n:n.slice(r,e),!1):n[r]}let i=t(),s=t();if(!s)return i;for(let r=t();r;r=t())gk(i,s)<=gk(s,r)?(i=Db(i,s),s=r):s=Db(s,r);return Db(i,s)}function O3(n,e=!1){if(n.length===0)return null;if(n.length===1)return n[0];let t=n.length;for(;t>3;){const i=t>>1;for(let s=0;s<i;s++){const o=s<<1;n[s]=hr.create23(n[o],n[o+1],o+3===t?n[o+2]:null,e)}t=i}return hr.create23(n[0],n[1],t>=3?n[2]:null,e)}function gk(n,e){return Math.abs(n.listHeight-e.listHeight)}function Db(n,e){return n.listHeight===e.listHeight?hr.create23(n,e,null,!1):n.listHeight>e.listHeight?Lj(n,e):xj(e,n)}function Lj(n,e){n=n.toMutable();let t=n;const i=[];let s;for(;;){if(e.listHeight===t.listHeight){s=e;break}if(t.kind!==4)throw new Error("unexpected");i.push(t),t=t.makeLastElementMutable()}for(let o=i.length-1;o>=0;o--){const r=i[o];s?r.childrenLength>=3?s=hr.create23(r.unappendChild(),s,null,!1):(r.appendChildOfSameHeight(s),s=void 0):r.handleChildrenChanged()}return s?hr.create23(n,s,null,!1):n}function xj(n,e){n=n.toMutable();let t=n;const i=[];for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");i.push(t),t=t.makeFirstElementMutable()}let s=e;for(let o=i.length-1;o>=0;o--){const r=i[o];s?r.childrenLength>=3?s=hr.create23(s,r.unprependChild(),null,!1):(r.prependChildOfSameHeight(s),s=void 0):r.handleChildrenChanged()}return s?hr.create23(s,n,null,!1):n}class Dj{constructor(e){this.lastOffset=Tn,this.nextNodes=[e],this.offsets=[Tn],this.idxs=[]}readLongestNodeAt(e,t){if(nu(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const i=yh(this.nextNodes);if(!i)return;const s=yh(this.offsets);if(nu(e,s))return;if(nu(s,e))if(gi(s,i.length)<=e)this.nextNodeAfterCurrent();else{const o=kb(i);o!==-1?(this.nextNodes.push(i.getChild(o)),this.offsets.push(s),this.idxs.push(o)):this.nextNodeAfterCurrent()}else{if(t(i))return this.nextNodeAfterCurrent(),i;{const o=kb(i);if(o===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(i.getChild(o)),this.offsets.push(s),this.idxs.push(o)}}}}nextNodeAfterCurrent(){for(;;){const e=yh(this.offsets),t=yh(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const i=yh(this.nextNodes),s=kb(i,this.idxs[this.idxs.length-1]);if(s!==-1){this.nextNodes.push(i.getChild(s)),this.offsets.push(gi(e,t.length)),this.idxs[this.idxs.length-1]=s;break}else this.idxs.pop()}}}function kb(n,e=-1){for(;;){if(e++,e>=n.childrenLength)return-1;if(n.getChild(e))return e}}function yh(n){return n.length>0?n[n.length-1]:void 0}function pk(n,e,t,i){return new kj(n,e,t,i).parseDocument()}class kj{constructor(e,t,i,s){if(this.tokenizer=e,this.createImmutableLists=s,this._itemsConstructed=0,this._itemsFromCache=0,i&&s)throw new Error("Not supported");this.oldNodeReader=i?new Dj(i):void 0,this.positionMapper=new hj(t)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(ui.getEmpty(),0);return e||(e=hr.getEmpty()),e}parseList(e,t){const i=[];for(;;){let o=this.tryReadChildFromCache(e);if(!o){const r=this.tokenizer.peek();if(!r||r.kind===2&&r.bracketIds.intersects(e))break;o=this.parseChild(e,t+1)}o.kind===4&&o.childrenLength===0||i.push(o)}return this.oldNodeReader?Sj(i):O3(i,this.createImmutableLists)}tryReadChildFromCache(e){if(this.oldNodeReader){const t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(t===null||!y0(t)){const i=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),s=>t!==null&&!nu(s.length,t)?!1:s.canBeReused(e));if(i)return this._itemsFromCache++,this.tokenizer.skip(i.length),i}}}parseChild(e,t){this._itemsConstructed++;const i=this.tokenizer.read();switch(i.kind){case 2:return new _j(i.bracketIds,i.length);case 0:return i.astNode;case 1:{if(t>300)return new Zl(i.length);const s=e.merge(i.bracketIds),o=this.parseList(s,t+1),r=this.tokenizer.peek();return r&&r.kind===2&&(r.bracketId===i.bracketId||r.bracketIds.intersects(i.bracketIds))?(this.tokenizer.read(),Yf.create(i.astNode,o,r.astNode)):Yf.create(i.astNode,o,null)}default:throw new Error("unexpected")}}}function x0(n,e){if(n.length===0)return e;if(e.length===0)return n;const t=new ea(mk(n)),i=mk(e);i.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let s=t.dequeue();function o(c){if(c===void 0){const u=t.takeWhile(h=>!0)||[];return s&&u.unshift(s),u}const d=[];for(;s&&!y0(c);){const[u,h]=s.splitAt(c);d.push(u),c=Zf(u.lengthAfter,c),s=h??t.dequeue()}return y0(c)||d.push(new qa(!1,c,c)),d}const r=[];function a(c,d,u){if(r.length>0&&P3(r[r.length-1].endOffset,c)){const h=r[r.length-1];r[r.length-1]=new Zr(h.startOffset,d,gi(h.newLength,u))}else r.push({startOffset:c,endOffset:d,newLength:u})}let l=Tn;for(const c of i){const d=o(c.lengthBefore);if(c.modified){const u=dj(d,f=>f.lengthBefore),h=gi(l,u);a(l,h,c.lengthAfter),l=h}else for(const u of d){const h=l;l=gi(l,u.lengthBefore),u.modified&&a(h,l,u.lengthAfter)}}return r}class qa{constructor(e,t,i){this.modified=e,this.lengthBefore=t,this.lengthAfter=i}splitAt(e){const t=Zf(e,this.lengthAfter);return P3(t,Tn)?[this,void 0]:this.modified?[new qa(this.modified,this.lengthBefore,e),new qa(this.modified,Tn,t)]:[new qa(this.modified,e,e),new qa(this.modified,t,t)]}toString(){return`${this.modified?"M":"U"}:${Ps(this.lengthBefore)} -> ${Ps(this.lengthAfter)}`}}function mk(n){const e=[];let t=Tn;for(const i of n){const s=Zf(t,i.startOffset);y0(s)||e.push(new qa(!1,s,s));const o=Zf(i.startOffset,i.endOffset);e.push(new qa(!0,o,i.newLength)),t=i.endOffset}return e}class Ej extends oe{didLanguageChange(e){return this.brackets.didLanguageChange(e)}constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new q,this.denseKeyProvider=new fj,this.brackets=new yj(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this.queuedTextEditsForInitialAstWithoutTokens=[],this.queuedTextEdits=[],e.tokenization.hasTokens)e.tokenization.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{const i=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),s=new wj(this.textModel.getValue(),i);this.initialAstWithoutTokens=pk(s,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===2){const e=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:e}){const t=e.map(i=>new Zr(si(i.fromLineNumber-1,0),si(i.toLineNumber,0),si(i.toLineNumber-i.fromLineNumber+1,0)));this.handleEdits(t,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){const t=Zr.fromModelContentChanges(e.changes);this.handleEdits(t,!1)}handleEdits(e,t){const i=x0(this.queuedTextEdits,e);this.queuedTextEdits=i,this.initialAstWithoutTokens&&!t&&(this.queuedTextEditsForInitialAstWithoutTokens=x0(this.queuedTextEditsForInitialAstWithoutTokens,e))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(e,t,i){const s=t,o=new bj(this.textModel,this.brackets);return pk(o,e,s,i)}getBracketsInRange(e,t){this.flushQueue();const i=si(e.startLineNumber-1,e.startColumn-1),s=si(e.endLineNumber-1,e.endColumn-1);return new ar(o=>{const r=this.initialAstWithoutTokens||this.astWithTokens;cC(r,Tn,r.length,i,s,o,0,0,new Map,t)})}getBracketPairsInRange(e,t){this.flushQueue();const i=Rd(e.getStartPosition()),s=Rd(e.getEndPosition());return new ar(o=>{const r=this.initialAstWithoutTokens||this.astWithTokens,a=new Ij(o,t,this.textModel);dC(r,Tn,r.length,i,s,a,0,new Map)})}getFirstBracketAfter(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return B3(t,Tn,t.length,Rd(e))}getFirstBracketBefore(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return F3(t,Tn,t.length,Rd(e))}}function F3(n,e,t,i){if(n.kind===4||n.kind===2){const s=[];for(const o of n.children)t=gi(e,o.length),s.push({nodeOffsetStart:e,nodeOffsetEnd:t}),e=t;for(let o=s.length-1;o>=0;o--){const{nodeOffsetStart:r,nodeOffsetEnd:a}=s[o];if(nu(r,i)){const l=F3(n.children[o],r,a,i);if(l)return l}}return null}else{if(n.kind===3)return null;if(n.kind===1){const s=pc(e,t);return{bracketInfo:n.bracketInfo,range:s}}}return null}function B3(n,e,t,i){if(n.kind===4||n.kind===2){for(const s of n.children){if(t=gi(e,s.length),nu(i,t)){const o=B3(s,e,t,i);if(o)return o}e=t}return null}else{if(n.kind===3)return null;if(n.kind===1){const s=pc(e,t);return{bracketInfo:n.bracketInfo,range:s}}}return null}function cC(n,e,t,i,s,o,r,a,l,c,d=!1){if(r>200)return!0;e:for(;;)switch(n.kind){case 4:{const u=n.childrenLength;for(let h=0;h<u;h++){const f=n.getChild(h);if(f){if(t=gi(e,f.length),su(e,s)&&Hh(t,i)){if(Hh(t,s)){n=f;continue e}if(!cC(f,e,t,i,s,o,r,0,l,c))return!1}e=t}}return!0}case 2:{const u=!c||!n.closingBracket||n.closingBracket.bracketInfo.closesColorized(n.openingBracket.bracketInfo);let h=0;if(l){let g=l.get(n.openingBracket.text);g===void 0&&(g=0),h=g,u&&(g++,l.set(n.openingBracket.text,g))}const f=n.childrenLength;for(let g=0;g<f;g++){const p=n.getChild(g);if(p){if(t=gi(e,p.length),su(e,s)&&Hh(t,i)){if(Hh(t,s)&&p.kind!==1){n=p,u?(r++,a=h+1):a=h;continue e}if((u||p.kind!==1||!n.closingBracket)&&!cC(p,e,t,i,s,o,u?r+1:r,u?h+1:h,l,c,!n.closingBracket))return!1}e=t}}return l==null||l.set(n.openingBracket.text,h),!0}case 3:{const u=pc(e,t);return o(new hk(u,r-1,0,!0))}case 1:{const u=pc(e,t);return o(new hk(u,r-1,a-1,d))}case 0:return!0}}class Ij{constructor(e,t,i){this.push=e,this.includeMinIndentation=t,this.textModel=i}}function dC(n,e,t,i,s,o,r,a){var l;if(r>200)return!0;let c=!0;if(n.kind===2){let d=0;if(a){let f=a.get(n.openingBracket.text);f===void 0&&(f=0),d=f,f++,a.set(n.openingBracket.text,f)}const u=gi(e,n.openingBracket.length);let h=-1;if(o.includeMinIndentation&&(h=n.computeMinIndentation(e,o.textModel)),c=o.push(new aj(pc(e,t),pc(e,u),n.closingBracket?pc(gi(u,((l=n.child)===null||l===void 0?void 0:l.length)||Tn),t):void 0,r,d,n,h)),e=u,c&&n.child){const f=n.child;if(t=gi(e,f.length),su(e,s)&&Hh(t,i)&&(c=dC(f,e,t,i,s,o,r+1,a),!c))return!1}a==null||a.set(n.openingBracket.text,d)}else{let d=e;for(const u of n.children){const h=d;if(d=gi(d,u.length),su(h,s)&&su(i,d)&&(c=dC(u,h,d,i,s,o,r,a),!c))return!1}}return c}class Nj extends oe{get canBuildAST(){return this.textModel.getValueLength()<=5e6}constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new bu),this.onDidChangeEmitter=new q,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(this.languageConfigurationService.onDidChange(i=>{var s;(!i.languageId||!((s=this.bracketPairsTree.value)===null||s===void 0)&&s.object.didLanguageChange(i.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}))}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){var t;(t=this.bracketPairsTree.value)===null||t===void 0||t.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){var e;(e=this.bracketPairsTree.value)===null||e===void 0||e.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){var t;(t=this.bracketPairsTree.value)===null||t===void 0||t.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){const e=new Fe;this.bracketPairsTree.value=Tj(e.add(new Ej(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.bracketPairsTree.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!1))||ar.empty}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!0))||ar.empty}getBracketsInRange(e,t=!1){var i;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((i=this.bracketPairsTree.value)===null||i===void 0?void 0:i.object.getBracketsInRange(e,t))||ar.empty}findMatchingBracketUp(e,t,i){const s=this.textModel.validatePosition(t),o=this.textModel.getLanguageIdAtPosition(s.lineNumber,s.column);if(this.canBuildAST){const r=this.languageConfigurationService.getLanguageConfiguration(o).bracketsNew.getClosingBracketInfo(e);if(!r)return null;const a=this.getBracketPairsInRange($.fromPositions(t,t)).findLast(l=>r.closes(l.openingBracketInfo));return a?a.openingBracketRange:null}else{const r=e.toLowerCase(),a=this.languageConfigurationService.getLanguageConfiguration(o).brackets;if(!a)return null;const l=a.textIsBracket[r];return l?Mp(this._findMatchingBracketUp(l,s,Eb(i))):null}}matchBracket(e,t){if(this.canBuildAST){const i=this.getBracketPairsInRange($.fromPositions(e,e)).filter(s=>s.closingBracketRange!==void 0&&(s.openingBracketRange.containsPosition(e)||s.closingBracketRange.containsPosition(e))).findLastMaxBy(Eo(s=>s.openingBracketRange.containsPosition(e)?s.openingBracketRange:s.closingBracketRange,$.compareRangesUsingStarts));return i?[i.openingBracketRange,i.closingBracketRange]:null}else{const i=Eb(t);return this._matchBracket(this.textModel.validatePosition(e),i)}}_establishBracketSearchOffsets(e,t,i,s){const o=t.getCount(),r=t.getLanguageId(s);let a=Math.max(0,e.column-1-i.maxBracketLength);for(let c=s-1;c>=0;c--){const d=t.getEndOffset(c);if(d<=a)break;if(Wo(t.getStandardTokenType(c))||t.getLanguageId(c)!==r){a=d;break}}let l=Math.min(t.getLineContent().length,e.column-1+i.maxBracketLength);for(let c=s+1;c<o;c++){const d=t.getStartOffset(c);if(d>=l)break;if(Wo(t.getStandardTokenType(c))||t.getLanguageId(c)!==r){l=d;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e,t){const i=e.lineNumber,s=this.textModel.tokenization.getLineTokens(i),o=this.textModel.getLineContent(i),r=s.findTokenIndexAtOffset(e.column-1);if(r<0)return null;const a=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId(r)).brackets;if(a&&!Wo(s.getStandardTokenType(r))){let{searchStartOffset:l,searchEndOffset:c}=this._establishBracketSearchOffsets(e,s,a,r),d=null;for(;;){const u=Gs.findNextBracketInRange(a.forwardRegex,i,o,l,c);if(!u)break;if(u.startColumn<=e.column&&e.column<=u.endColumn){const h=o.substring(u.startColumn-1,u.endColumn-1).toLowerCase(),f=this._matchFoundBracket(u,a.textIsBracket[h],a.textIsOpenBracket[h],t);if(f){if(f instanceof Tr)return null;d=f}}l=u.endColumn-1}if(d)return d}if(r>0&&s.getStartOffset(r)===e.column-1){const l=r-1,c=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId(l)).brackets;if(c&&!Wo(s.getStandardTokenType(l))){const{searchStartOffset:d,searchEndOffset:u}=this._establishBracketSearchOffsets(e,s,c,l),h=Gs.findPrevBracketInRange(c.reversedRegex,i,o,d,u);if(h&&h.startColumn<=e.column&&e.column<=h.endColumn){const f=o.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),g=this._matchFoundBracket(h,c.textIsBracket[f],c.textIsOpenBracket[f],t);if(g)return g instanceof Tr?null:g}}}return null}_matchFoundBracket(e,t,i,s){if(!t)return null;const o=i?this._findMatchingBracketDown(t,e.getEndPosition(),s):this._findMatchingBracketUp(t,e.getStartPosition(),s);return o?o instanceof Tr?o:[e,o]:null}_findMatchingBracketUp(e,t,i){const s=e.languageId,o=e.reversedRegex;let r=-1,a=0;const l=(c,d,u,h)=>{for(;;){if(i&&++a%100===0&&!i())return Tr.INSTANCE;const f=Gs.findPrevBracketInRange(o,c,d,u,h);if(!f)break;const g=d.substring(f.startColumn-1,f.endColumn-1).toLowerCase();if(e.isOpen(g)?r++:e.isClose(g)&&r--,r===0)return f;h=f.startColumn-1}return null};for(let c=t.lineNumber;c>=1;c--){const d=this.textModel.tokenization.getLineTokens(c),u=d.getCount(),h=this.textModel.getLineContent(c);let f=u-1,g=h.length,p=h.length;c===t.lineNumber&&(f=d.findTokenIndexAtOffset(t.column-1),g=t.column-1,p=t.column-1);let _=!0;for(;f>=0;f--){const v=d.getLanguageId(f)===s&&!Wo(d.getStandardTokenType(f));if(v)_?g=d.getStartOffset(f):(g=d.getStartOffset(f),p=d.getEndOffset(f));else if(_&&g!==p){const b=l(c,h,g,p);if(b)return b}_=v}if(_&&g!==p){const v=l(c,h,g,p);if(v)return v}}return null}_findMatchingBracketDown(e,t,i){const s=e.languageId,o=e.forwardRegex;let r=1,a=0;const l=(d,u,h,f)=>{for(;;){if(i&&++a%100===0&&!i())return Tr.INSTANCE;const g=Gs.findNextBracketInRange(o,d,u,h,f);if(!g)break;const p=u.substring(g.startColumn-1,g.endColumn-1).toLowerCase();if(e.isOpen(p)?r++:e.isClose(p)&&r--,r===0)return g;h=g.endColumn-1}return null},c=this.textModel.getLineCount();for(let d=t.lineNumber;d<=c;d++){const u=this.textModel.tokenization.getLineTokens(d),h=u.getCount(),f=this.textModel.getLineContent(d);let g=0,p=0,_=0;d===t.lineNumber&&(g=u.findTokenIndexAtOffset(t.column-1),p=t.column-1,_=t.column-1);let v=!0;for(;g<h;g++){const b=u.getLanguageId(g)===s&&!Wo(u.getStandardTokenType(g));if(b)v||(p=u.getStartOffset(g)),_=u.getEndOffset(g);else if(v&&p!==_){const w=l(d,f,p,_);if(w)return w}v=b}if(v&&p!==_){const b=l(d,f,p,_);if(b)return b}}return null}findPrevBracket(e){var t;const i=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getFirstBracketBefore(i))||null;let s=null,o=null,r=null;for(let a=i.lineNumber;a>=1;a--){const l=this.textModel.tokenization.getLineTokens(a),c=l.getCount(),d=this.textModel.getLineContent(a);let u=c-1,h=d.length,f=d.length;if(a===i.lineNumber){u=l.findTokenIndexAtOffset(i.column-1),h=i.column-1,f=i.column-1;const p=l.getLanguageId(u);s!==p&&(s=p,o=this.languageConfigurationService.getLanguageConfiguration(s).brackets,r=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew)}let g=!0;for(;u>=0;u--){const p=l.getLanguageId(u);if(s!==p){if(o&&r&&g&&h!==f){const v=Gs.findPrevBracketInRange(o.reversedRegex,a,d,h,f);if(v)return this._toFoundBracket(r,v);g=!1}s=p,o=this.languageConfigurationService.getLanguageConfiguration(s).brackets,r=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew}const _=!!o&&!Wo(l.getStandardTokenType(u));if(_)g?h=l.getStartOffset(u):(h=l.getStartOffset(u),f=l.getEndOffset(u));else if(r&&o&&g&&h!==f){const v=Gs.findPrevBracketInRange(o.reversedRegex,a,d,h,f);if(v)return this._toFoundBracket(r,v)}g=_}if(r&&o&&g&&h!==f){const p=Gs.findPrevBracketInRange(o.reversedRegex,a,d,h,f);if(p)return this._toFoundBracket(r,p)}}return null}findNextBracket(e){var t;const i=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getFirstBracketAfter(i))||null;const s=this.textModel.getLineCount();let o=null,r=null,a=null;for(let l=i.lineNumber;l<=s;l++){const c=this.textModel.tokenization.getLineTokens(l),d=c.getCount(),u=this.textModel.getLineContent(l);let h=0,f=0,g=0;if(l===i.lineNumber){h=c.findTokenIndexAtOffset(i.column-1),f=i.column-1,g=i.column-1;const _=c.getLanguageId(h);o!==_&&(o=_,r=this.languageConfigurationService.getLanguageConfiguration(o).brackets,a=this.languageConfigurationService.getLanguageConfiguration(o).bracketsNew)}let p=!0;for(;h<d;h++){const _=c.getLanguageId(h);if(o!==_){if(a&&r&&p&&f!==g){const b=Gs.findNextBracketInRange(r.forwardRegex,l,u,f,g);if(b)return this._toFoundBracket(a,b);p=!1}o=_,r=this.languageConfigurationService.getLanguageConfiguration(o).brackets,a=this.languageConfigurationService.getLanguageConfiguration(o).bracketsNew}const v=!!r&&!Wo(c.getStandardTokenType(h));if(v)p||(f=c.getStartOffset(h)),g=c.getEndOffset(h);else if(a&&r&&p&&f!==g){const b=Gs.findNextBracketInRange(r.forwardRegex,l,u,f,g);if(b)return this._toFoundBracket(a,b)}p=v}if(a&&r&&p&&f!==g){const _=Gs.findNextBracketInRange(r.forwardRegex,l,u,f,g);if(_)return this._toFoundBracket(a,_)}}return null}findEnclosingBrackets(e,t){const i=this.textModel.validatePosition(e);if(this.canBuildAST){const f=$.fromPositions(i),g=this.getBracketPairsInRange($.fromPositions(i,i)).findLast(p=>p.closingBracketRange!==void 0&&p.range.strictContainsRange(f));return g?[g.openingBracketRange,g.closingBracketRange]:null}const s=Eb(t),o=this.textModel.getLineCount(),r=new Map;let a=[];const l=(f,g)=>{if(!r.has(f)){const p=[];for(let _=0,v=g?g.brackets.length:0;_<v;_++)p[_]=0;r.set(f,p)}a=r.get(f)};let c=0;const d=(f,g,p,_,v)=>{for(;;){if(s&&++c%100===0&&!s())return Tr.INSTANCE;const b=Gs.findNextBracketInRange(f.forwardRegex,g,p,_,v);if(!b)break;const w=p.substring(b.startColumn-1,b.endColumn-1).toLowerCase(),C=f.textIsBracket[w];if(C&&(C.isOpen(w)?a[C.index]++:C.isClose(w)&&a[C.index]--,a[C.index]===-1))return this._matchFoundBracket(b,C,!1,s);_=b.endColumn-1}return null};let u=null,h=null;for(let f=i.lineNumber;f<=o;f++){const g=this.textModel.tokenization.getLineTokens(f),p=g.getCount(),_=this.textModel.getLineContent(f);let v=0,b=0,w=0;if(f===i.lineNumber){v=g.findTokenIndexAtOffset(i.column-1),b=i.column-1,w=i.column-1;const S=g.getLanguageId(v);u!==S&&(u=S,h=this.languageConfigurationService.getLanguageConfiguration(u).brackets,l(u,h))}let C=!0;for(;v<p;v++){const S=g.getLanguageId(v);if(u!==S){if(h&&C&&b!==w){const L=d(h,f,_,b,w);if(L)return Mp(L);C=!1}u=S,h=this.languageConfigurationService.getLanguageConfiguration(u).brackets,l(u,h)}const k=!!h&&!Wo(g.getStandardTokenType(v));if(k)C||(b=g.getStartOffset(v)),w=g.getEndOffset(v);else if(h&&C&&b!==w){const L=d(h,f,_,b,w);if(L)return Mp(L)}C=k}if(h&&C&&b!==w){const S=d(h,f,_,b,w);if(S)return Mp(S)}}return null}_toFoundBracket(e,t){if(!t)return null;let i=this.textModel.getValueInRange(t);i=i.toLowerCase();const s=e.getBracketInfo(i);return s?{range:t,bracketInfo:s}:null}}function Tj(n,e){return{object:n,dispose:()=>e==null?void 0:e.dispose()}}function Eb(n){if(typeof n>"u")return()=>!0;{const e=Date.now();return()=>Date.now()-e<=n}}class Tr{constructor(){this._searchCanceledBrand=void 0}}Tr.INSTANCE=new Tr;function Mp(n){return n instanceof Tr?null:n}class Aj extends oe{constructor(e){super(),this.textModel=e,this.colorProvider=new V3,this.onDidChangeEmitter=new q,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,t,i,s){return s?[]:t===void 0?[]:this.colorizationOptions.enabled?this.textModel.bracketPairs.getBracketsInRange(e,!0).map(r=>({id:`bracket${r.range.toString()}-${r.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(r,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:r.range})).toArray():[]}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new $(1,1,this.textModel.getLineCount(),1),e,t):[]}}class V3{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}sa((n,e)=>{const t=[v3,w3,C3,y3,S3,L3],i=new V3;e.addRule(`.monaco-editor .${i.unexpectedClosingBracketClassName} { color: ${n.getColor(NU)}; }`);const s=t.map(o=>n.getColor(o)).filter(o=>!!o).filter(o=>!o.isTransparent());for(let o=0;o<30;o++){const r=s[o%s.length];e.addRule(`.monaco-editor .${i.getInlineClassNameOfLevel(o)} { color: ${r}; }`)}});function Rp(n){return n.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class ji{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(e,t,i,s){this.oldPosition=e,this.oldText=t,this.newPosition=i,this.newText=s}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${Rp(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${Rp(this.oldText)}")`:`(replace@${this.oldPosition} "${Rp(this.oldText)}" with "${Rp(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,i){const s=t.length;bo(e,s,i),i+=4;for(let o=0;o<s;o++)mB(e,t.charCodeAt(o),i),i+=2;return i}static _readString(e,t){const i=_o(e,t);return t+=4,bB(e,t,i)}writeSize(){return 4+4+ji._writeStringSize(this.oldText)+ji._writeStringSize(this.newText)}write(e,t){return bo(e,this.oldPosition,t),t+=4,bo(e,this.newPosition,t),t+=4,t=ji._writeString(e,this.oldText,t),t=ji._writeString(e,this.newText,t),t}static read(e,t,i){const s=_o(e,t);t+=4;const o=_o(e,t);t+=4;const r=ji._readString(e,t);t+=ji._writeStringSize(r);const a=ji._readString(e,t);return t+=ji._writeStringSize(a),i.push(new ji(s,r,o,a)),t}}function Mj(n,e){return n===null||n.length===0?e:new Ho(n,e).compress()}class Ho{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,i=this._getPrev(e),s=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(i===null){this._acceptCurr(s),s=this._getCurr(++t);continue}if(s===null){this._acceptPrev(i),i=this._getPrev(++e);continue}if(s.oldEnd<=i.newPosition){this._acceptCurr(s),s=this._getCurr(++t);continue}if(i.newEnd<=s.oldPosition){this._acceptPrev(i),i=this._getPrev(++e);continue}if(s.oldPosition<i.newPosition){const[c,d]=Ho._splitCurr(s,i.newPosition-s.oldPosition);this._acceptCurr(c),s=d;continue}if(i.newPosition<s.oldPosition){const[c,d]=Ho._splitPrev(i,s.oldPosition-i.newPosition);this._acceptPrev(c),i=d;continue}let a,l;if(s.oldEnd===i.newEnd)a=i,l=s,i=this._getPrev(++e),s=this._getCurr(++t);else if(s.oldEnd<i.newEnd){const[c,d]=Ho._splitPrev(i,s.oldLength);a=c,l=s,i=d,s=this._getCurr(++t)}else{const[c,d]=Ho._splitCurr(s,i.newLength);a=i,l=c,i=this._getPrev(++e),s=d}this._result[this._resultLen++]=new ji(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const o=Ho._merge(this._result);return Ho._removeNoOps(o)}_acceptCurr(e){this._result[this._resultLen++]=Ho._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=Ho._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new ji(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new ji(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const i=e.newText.substr(0,t),s=e.newText.substr(t);return[new ji(e.oldPosition,e.oldText,e.newPosition,i),new ji(e.oldEnd,"",e.newPosition+t,s)]}static _splitCurr(e,t){const i=e.oldText.substr(0,t),s=e.oldText.substr(t);return[new ji(e.oldPosition,i,e.newPosition,e.newText),new ji(e.oldPosition+t,s,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;const t=[];let i=0,s=e[0];for(let o=1;o<e.length;o++){const r=e[o];s.oldEnd===r.oldPosition?s=new ji(s.oldPosition,s.oldText+r.oldText,s.newPosition,s.newText+r.newText):(t[i++]=s,s=r)}return t[i++]=s,t}static _removeNoOps(e){if(e.length===0)return e;const t=[];let i=0;for(let s=0;s<e.length;s++){const o=e[s];o.oldText!==o.newText&&(t[i++]=o)}return t}}function ha(n){return n===47||n===92}function W3(n){return n.replace(/[\\/]/g,fi.sep)}function Rj(n){return n.indexOf("/")===-1&&(n=W3(n)),/^[a-zA-Z]:(\/|$)/.test(n)&&(n="/"+n),n}function _k(n,e=fi.sep){if(!n)return"";const t=n.length,i=n.charCodeAt(0);if(ha(i)){if(ha(n.charCodeAt(1))&&!ha(n.charCodeAt(2))){let o=3;const r=o;for(;o<t&&!ha(n.charCodeAt(o));o++);if(r!==o&&!ha(n.charCodeAt(o+1))){for(o+=1;o<t;o++)if(ha(n.charCodeAt(o)))return n.slice(0,o+1).replace(/[\\/]/g,e)}}return e}else if(Pj(i)&&n.charCodeAt(1)===58)return ha(n.charCodeAt(2))?n.slice(0,2)+e:n.slice(0,2);let s=n.indexOf("://");if(s!==-1){for(s+=3;s<t;s++)if(ha(n.charCodeAt(s)))return n.slice(0,s+1)}return""}function uC(n,e,t,i=Qa){if(n===e)return!0;if(!n||!e||e.length>n.length)return!1;if(t){if(!bS(n,e))return!1;if(e.length===n.length)return!0;let o=e.length;return e.charAt(e.length-1)===i&&o--,n.charAt(o)===i}return e.charAt(e.length-1)!==i&&(e+=i),n.indexOf(e)===0}function Pj(n){return n>=65&&n<=90||n>=97&&n<=122}function Cr(n){return Zm(n,!0)}class Oj{constructor(e){this._ignorePathCasing=e}compare(e,t,i=!1){return e===t?0:Lw(this.getComparisonKey(e,i),this.getComparisonKey(t,i))}isEqual(e,t,i=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,i)===this.getComparisonKey(t,i)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}isEqualOrParent(e,t,i=!1){if(e.scheme===t.scheme){if(e.scheme===Je.file)return uC(Cr(e),Cr(t),this._ignorePathCasing(e))&&e.query===t.query&&(i||e.fragment===t.fragment);if(vk(e.authority,t.authority))return uC(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(i||e.fragment===t.fragment)}return!1}joinPath(e,...t){return nt.joinPath(e,...t)}basenameOrAuthority(e){return rL(e)||e.authority}basename(e){return fi.basename(e.path)}extname(e){return fi.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===Je.file?t=nt.file(a6(Cr(e))).path:(t=fi.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===Je.file?t=nt.file(wT(Cr(e))).path:t=fi.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!vk(e.authority,t.authority))return;if(e.scheme===Je.file){const o=r6(Cr(e),Cr(t));return is?W3(o):o}let i=e.path||"/";const s=t.path||"/";if(this._ignorePathCasing(e)){let o=0;for(const r=Math.min(i.length,s.length);o<r&&!(i.charCodeAt(o)!==s.charCodeAt(o)&&i.charAt(o).toLowerCase()!==s.charAt(o).toLowerCase());o++);i=s.substr(0,o)+i.substr(o)}return fi.relative(i,s)}resolvePath(e,t){if(e.scheme===Je.file){const i=nt.file(o6(Cr(e),t));return e.with({authority:i.authority,path:i.path})}return t=Rj(t),e.with({path:fi.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&Cd(e,t)}hasTrailingPathSeparator(e,t=Qa){if(e.scheme===Je.file){const i=Cr(e);return i.length>_k(i).length&&i[i.length-1]===t}else{const i=e.path;return i.length>1&&i.charCodeAt(i.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=Qa){return wk(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=Qa){let i=!1;if(e.scheme===Je.file){const s=Cr(e);i=s!==void 0&&s.length===_k(s).length&&s[s.length-1]===t}else{t="/";const s=e.path;i=s.length===1&&s.charCodeAt(s.length-1)===47}return!i&&!wk(e,t)?e.with({path:e.path+"/"}):e}}const zt=new Oj(()=>!1),Fj=zt.isEqual.bind(zt);zt.isEqualOrParent.bind(zt);zt.getComparisonKey.bind(zt);zt.basenameOrAuthority.bind(zt);const rL=zt.basename.bind(zt);zt.extname.bind(zt);const Bj=zt.dirname.bind(zt);zt.joinPath.bind(zt);const Vj=zt.normalizePath.bind(zt);zt.relativePath.bind(zt);const bk=zt.resolvePath.bind(zt);zt.isAbsolutePath.bind(zt);const vk=zt.isEqualAuthority.bind(zt),wk=zt.hasTrailingPathSeparator.bind(zt);zt.removeTrailingPathSeparator.bind(zt);zt.addTrailingPathSeparator.bind(zt);var D0;(function(n){n.META_DATA_LABEL="label",n.META_DATA_DESCRIPTION="description",n.META_DATA_SIZE="size",n.META_DATA_MIME="mime";function e(t){const i=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(r=>{const[a,l]=r.split(":");a&&l&&i.set(a,l)});const o=t.path.substring(0,t.path.indexOf(";"));return o&&i.set(n.META_DATA_MIME,o),i}n.parseMetaData=e})(D0||(D0={}));function ld(n){return n.toString()}class ki{static create(e,t){const i=e.getAlternativeVersionId(),s=hC(e);return new ki(i,i,s,s,t,t,[])}constructor(e,t,i,s,o,r,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=i,this.afterEOL=s,this.beforeCursorState=o,this.afterCursorState=r,this.changes=a}append(e,t,i,s,o){t.length>0&&(this.changes=Mj(this.changes,t)),this.afterEOL=i,this.afterVersionId=s,this.afterCursorState=o}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,i){if(bo(e,t?t.length:0,i),i+=4,t)for(const s of t)bo(e,s.selectionStartLineNumber,i),i+=4,bo(e,s.selectionStartColumn,i),i+=4,bo(e,s.positionLineNumber,i),i+=4,bo(e,s.positionColumn,i),i+=4;return i}static _readSelections(e,t,i){const s=_o(e,t);t+=4;for(let o=0;o<s;o++){const r=_o(e,t);t+=4;const a=_o(e,t);t+=4;const l=_o(e,t);t+=4;const c=_o(e,t);t+=4,i.push(new at(r,a,l,c))}return t}serialize(){let e=10+ki._writeSelectionsSize(this.beforeCursorState)+ki._writeSelectionsSize(this.afterCursorState)+4;for(const s of this.changes)e+=s.writeSize();const t=new Uint8Array(e);let i=0;bo(t,this.beforeVersionId,i),i+=4,bo(t,this.afterVersionId,i),i+=4,yD(t,this.beforeEOL,i),i+=1,yD(t,this.afterEOL,i),i+=1,i=ki._writeSelections(t,this.beforeCursorState,i),i=ki._writeSelections(t,this.afterCursorState,i),bo(t,this.changes.length,i),i+=4;for(const s of this.changes)i=s.write(t,i);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let i=0;const s=_o(t,i);i+=4;const o=_o(t,i);i+=4;const r=CD(t,i);i+=1;const a=CD(t,i);i+=1;const l=[];i=ki._readSelections(t,i,l);const c=[];i=ki._readSelections(t,i,c);const d=_o(t,i);i+=4;const u=[];for(let h=0;h<d;h++)i=ji.read(t,i,u);return new ki(s,o,r,a,l,c,u)}}class H3{get type(){return 0}get resource(){return nt.isUri(this.model)?this.model:this.model.uri}constructor(e,t,i,s){this.label=e,this.code=t,this.model=i,this._data=ki.create(i,s)}toString(){return(this._data instanceof ki?this._data:ki.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(nt.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof ki}append(e,t,i,s,o){this._data instanceof ki&&this._data.append(e,t,i,s,o)}close(){this._data instanceof ki&&(this._data=this._data.serialize())}open(){this._data instanceof ki||(this._data=ki.deserialize(this._data))}undo(){if(nt.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof ki&&(this._data=this._data.serialize());const e=ki.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(nt.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof ki&&(this._data=this._data.serialize());const e=ki.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof ki&&(this._data=this._data.serialize()),this._data.byteLength+168}}class Wj{get resources(){return this._editStackElementsArr.map(e=>e.resource)}constructor(e,t,i){this.label=e,this.code=t,this.type=1,this._isOpen=!0,this._editStackElementsArr=i.slice(0),this._editStackElementsMap=new Map;for(const s of this._editStackElementsArr){const o=ld(s.resource);this._editStackElementsMap.set(o,s)}this._delegate=null}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=ld(e);return this._editStackElementsMap.has(t)}setModel(e){const t=ld(nt.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=ld(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,i,s,o){const r=ld(e.uri);this._editStackElementsMap.get(r).append(e,t,i,s,o)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=ld(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){const e=[];for(const t of this._editStackElementsArr)e.push(`${rL(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function hC(n){return n.getEOL()===`
`?0:1}function Ar(n){return n?n instanceof H3||n instanceof Wj:!1}class aL{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Ar(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Ar(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e,t){const i=this._undoRedoService.getLastElement(this._model.uri);if(Ar(i)&&i.canAppend(this._model))return i;const s=new H3(m("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(s,t),s}pushEOL(e){const t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],hC(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,i,s){const o=this._getOrCreateEditStackElement(e,s),r=this._model.applyEdits(t,!0),a=aL._computeCursorState(i,r),l=r.map((c,d)=>({index:d,textChange:c.textChange}));return l.sort((c,d)=>c.textChange.oldPosition===d.textChange.oldPosition?c.index-d.index:c.textChange.oldPosition-d.textChange.oldPosition),o.append(this._model,l.map(c=>c.textChange),hC(this._model),this._model.getAlternativeVersionId(),a),a}static _computeCursorState(e,t){try{return e?e(t):null}catch(i){return $t(i),null}}}class Hj{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function $j(n,e,t,i,s){s.spacesDiff=0,s.looksLikeAlignment=!1;let o;for(o=0;o<e&&o<i;o++){const h=n.charCodeAt(o),f=t.charCodeAt(o);if(h!==f)break}let r=0,a=0;for(let h=o;h<e;h++)n.charCodeAt(h)===32?r++:a++;let l=0,c=0;for(let h=o;h<i;h++)t.charCodeAt(h)===32?l++:c++;if(r>0&&a>0||l>0&&c>0)return;const d=Math.abs(a-c),u=Math.abs(r-l);if(d===0){s.spacesDiff=u,u>0&&0<=l-1&&l-1<n.length&&l<t.length&&t.charCodeAt(l)!==32&&n.charCodeAt(l-1)===32&&n.charCodeAt(n.length-1)===44&&(s.looksLikeAlignment=!0);return}if(u%d===0){s.spacesDiff=u/d;return}}function Ck(n,e,t){const i=Math.min(n.getLineCount(),1e4);let s=0,o=0,r="",a=0;const l=[2,4,6,8,3,5,7],c=8,d=[0,0,0,0,0,0,0,0,0],u=new Hj;for(let g=1;g<=i;g++){const p=n.getLineLength(g),_=n.getLineContent(g),v=p<=65536;let b=!1,w=0,C=0,S=0;for(let L=0,x=p;L<x;L++){const I=v?_.charCodeAt(L):n.getLineCharCode(g,L);if(I===9)S++;else if(I===32)C++;else{b=!0,w=L;break}}if(!b||(S>0?s++:C>1&&o++,$j(r,a,_,w,u),u.looksLikeAlignment&&!(t&&e===u.spacesDiff)))continue;const k=u.spacesDiff;k<=c&&d[k]++,r=_,a=w}let h=t;s!==o&&(h=s<o);let f=e;if(h){let g=h?0:.1*i;l.forEach(p=>{const _=d[p];_>g&&(g=_,f=p)}),f===4&&d[4]>0&&d[2]>0&&d[2]>=d[4]/2&&(f=2)}return{insertSpaces:h,tabSize:f}}function kn(n){return(n.metadata&1)>>>0}function Rt(n,e){n.metadata=n.metadata&254|e<<0}function Gi(n){return(n.metadata&2)>>>1===1}function Nt(n,e){n.metadata=n.metadata&253|(e?1:0)<<1}function $3(n){return(n.metadata&4)>>>2===1}function yk(n,e){n.metadata=n.metadata&251|(e?1:0)<<2}function z3(n){return(n.metadata&64)>>>6===1}function Sk(n,e){n.metadata=n.metadata&191|(e?1:0)<<6}function zj(n){return(n.metadata&24)>>>3}function Lk(n,e){n.metadata=n.metadata&231|e<<3}function Uj(n){return(n.metadata&32)>>>5===1}function xk(n,e){n.metadata=n.metadata&223|(e?1:0)<<5}class U3{constructor(e,t,i){this.metadata=0,this.parent=this,this.left=this,this.right=this,Rt(this,1),this.start=t,this.end=i,this.delta=0,this.maxEnd=i,this.id=e,this.ownerId=0,this.options=null,yk(this,!1),Sk(this,!1),Lk(this,1),xk(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=null,Nt(this,!1)}reset(e,t,i,s){this.start=t,this.end=i,this.maxEnd=i,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=s}setOptions(e){this.options=e;const t=this.options.className;yk(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),Sk(this,this.options.glyphMarginClassName!==null),Lk(this,this.options.stickiness),xk(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,i){this.cachedVersionId!==i&&(this.range=null),this.cachedVersionId=i,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const ze=new U3(null,0,0);ze.parent=ze;ze.left=ze;ze.right=ze;Rt(ze,0);class Ib{constructor(){this.root=ze,this.requestNormalizeDelta=!1}intervalSearch(e,t,i,s,o,r){return this.root===ze?[]:Qj(this,e,t,i,s,o,r)}search(e,t,i,s){return this.root===ze?[]:Xj(this,e,t,i,s)}collectNodesFromOwner(e){return Zj(this,e)}collectNodesPostOrder(){return Yj(this)}insert(e){Dk(this,e),this._normalizeDeltaIfNecessary()}delete(e){kk(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const i=e;let s=0;for(;e!==this.root;)e===e.parent.right&&(s+=e.parent.delta),e=e.parent;const o=i.start+s,r=i.end+s;i.setCachedOffsets(o,r,t)}acceptReplace(e,t,i,s){const o=Kj(this,e,e+t);for(let r=0,a=o.length;r<a;r++){const l=o[r];kk(this,l)}this._normalizeDeltaIfNecessary(),Gj(this,e,e+t,i),this._normalizeDeltaIfNecessary();for(let r=0,a=o.length;r<a;r++){const l=o[r];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,jj(l,e,e+t,i,s),l.maxEnd=l.end,Dk(this,l)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,qj(this))}}function qj(n){let e=n.root,t=0;for(;e!==ze;){if(e.left!==ze&&!Gi(e.left)){e=e.left;continue}if(e.right!==ze&&!Gi(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,pl(e),Nt(e,!0),Nt(e.left,!1),Nt(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}Nt(n.root,!1)}function cd(n,e,t,i){return n<t?!0:n>t||i===1?!1:i===2?!0:e}function jj(n,e,t,i,s){const o=zj(n),r=o===0||o===2,a=o===1||o===2,l=t-e,c=i,d=Math.min(l,c),u=n.start;let h=!1;const f=n.end;let g=!1;e<=u&&f<=t&&Uj(n)&&(n.start=e,h=!0,n.end=e,g=!0);{const _=s?1:l>0?2:0;!h&&cd(u,r,e,_)&&(h=!0),!g&&cd(f,a,e,_)&&(g=!0)}if(d>0&&!s){const _=l>c?2:0;!h&&cd(u,r,e+d,_)&&(h=!0),!g&&cd(f,a,e+d,_)&&(g=!0)}{const _=s?1:0;!h&&cd(u,r,t,_)&&(n.start=e+c,h=!0),!g&&cd(f,a,t,_)&&(n.end=e+c,g=!0)}const p=c-l;h||(n.start=Math.max(0,u+p)),g||(n.end=Math.max(0,f+p)),n.start>n.end&&(n.end=n.start)}function Kj(n,e,t){let i=n.root,s=0,o=0,r=0,a=0;const l=[];let c=0;for(;i!==ze;){if(Gi(i)){Nt(i.left,!1),Nt(i.right,!1),i===i.parent.right&&(s-=i.parent.delta),i=i.parent;continue}if(!Gi(i.left)){if(o=s+i.maxEnd,o<e){Nt(i,!0);continue}if(i.left!==ze){i=i.left;continue}}if(r=s+i.start,r>t){Nt(i,!0);continue}if(a=s+i.end,a>=e&&(i.setCachedOffsets(r,a,0),l[c++]=i),Nt(i,!0),i.right!==ze&&!Gi(i.right)){s+=i.delta,i=i.right;continue}}return Nt(n.root,!1),l}function Gj(n,e,t,i){let s=n.root,o=0,r=0,a=0;const l=i-(t-e);for(;s!==ze;){if(Gi(s)){Nt(s.left,!1),Nt(s.right,!1),s===s.parent.right&&(o-=s.parent.delta),pl(s),s=s.parent;continue}if(!Gi(s.left)){if(r=o+s.maxEnd,r<e){Nt(s,!0);continue}if(s.left!==ze){s=s.left;continue}}if(a=o+s.start,a>t){s.start+=l,s.end+=l,s.delta+=l,(s.delta<-1073741824||s.delta>1073741824)&&(n.requestNormalizeDelta=!0),Nt(s,!0);continue}if(Nt(s,!0),s.right!==ze&&!Gi(s.right)){o+=s.delta,s=s.right;continue}}Nt(n.root,!1)}function Zj(n,e){let t=n.root;const i=[];let s=0;for(;t!==ze;){if(Gi(t)){Nt(t.left,!1),Nt(t.right,!1),t=t.parent;continue}if(t.left!==ze&&!Gi(t.left)){t=t.left;continue}if(t.ownerId===e&&(i[s++]=t),Nt(t,!0),t.right!==ze&&!Gi(t.right)){t=t.right;continue}}return Nt(n.root,!1),i}function Yj(n){let e=n.root;const t=[];let i=0;for(;e!==ze;){if(Gi(e)){Nt(e.left,!1),Nt(e.right,!1),e=e.parent;continue}if(e.left!==ze&&!Gi(e.left)){e=e.left;continue}if(e.right!==ze&&!Gi(e.right)){e=e.right;continue}t[i++]=e,Nt(e,!0)}return Nt(n.root,!1),t}function Xj(n,e,t,i,s){let o=n.root,r=0,a=0,l=0;const c=[];let d=0;for(;o!==ze;){if(Gi(o)){Nt(o.left,!1),Nt(o.right,!1),o===o.parent.right&&(r-=o.parent.delta),o=o.parent;continue}if(o.left!==ze&&!Gi(o.left)){o=o.left;continue}a=r+o.start,l=r+o.end,o.setCachedOffsets(a,l,i);let u=!0;if(e&&o.ownerId&&o.ownerId!==e&&(u=!1),t&&$3(o)&&(u=!1),s&&!z3(o)&&(u=!1),u&&(c[d++]=o),Nt(o,!0),o.right!==ze&&!Gi(o.right)){r+=o.delta,o=o.right;continue}}return Nt(n.root,!1),c}function Qj(n,e,t,i,s,o,r){let a=n.root,l=0,c=0,d=0,u=0;const h=[];let f=0;for(;a!==ze;){if(Gi(a)){Nt(a.left,!1),Nt(a.right,!1),a===a.parent.right&&(l-=a.parent.delta),a=a.parent;continue}if(!Gi(a.left)){if(c=l+a.maxEnd,c<e){Nt(a,!0);continue}if(a.left!==ze){a=a.left;continue}}if(d=l+a.start,d>t){Nt(a,!0);continue}if(u=l+a.end,u>=e){a.setCachedOffsets(d,u,o);let g=!0;i&&a.ownerId&&a.ownerId!==i&&(g=!1),s&&$3(a)&&(g=!1),r&&!z3(a)&&(g=!1),g&&(h[f++]=a)}if(Nt(a,!0),a.right!==ze&&!Gi(a.right)){l+=a.delta,a=a.right;continue}}return Nt(n.root,!1),h}function Dk(n,e){if(n.root===ze)return e.parent=ze,e.left=ze,e.right=ze,Rt(e,0),n.root=e,n.root;Jj(n,e),va(e.parent);let t=e;for(;t!==n.root&&kn(t.parent)===1;)if(t.parent===t.parent.parent.left){const i=t.parent.parent.right;kn(i)===1?(Rt(t.parent,0),Rt(i,0),Rt(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,cf(n,t)),Rt(t.parent,0),Rt(t.parent.parent,1),df(n,t.parent.parent))}else{const i=t.parent.parent.left;kn(i)===1?(Rt(t.parent,0),Rt(i,0),Rt(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,df(n,t)),Rt(t.parent,0),Rt(t.parent.parent,1),cf(n,t.parent.parent))}return Rt(n.root,0),e}function Jj(n,e){let t=0,i=n.root;const s=e.start,o=e.end;for(;;)if(tK(s,o,i.start+t,i.end+t)<0)if(i.left===ze){e.start-=t,e.end-=t,e.maxEnd-=t,i.left=e;break}else i=i.left;else if(i.right===ze){e.start-=t+i.delta,e.end-=t+i.delta,e.maxEnd-=t+i.delta,i.right=e;break}else t+=i.delta,i=i.right;e.parent=i,e.left=ze,e.right=ze,Rt(e,1)}function kk(n,e){let t,i;if(e.left===ze?(t=e.right,i=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(n.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===ze?(t=e.left,i=e):(i=eK(e.right),t=i.right,t.start+=i.delta,t.end+=i.delta,t.delta+=i.delta,(t.delta<-1073741824||t.delta>1073741824)&&(n.requestNormalizeDelta=!0),i.start+=e.delta,i.end+=e.delta,i.delta=e.delta,(i.delta<-1073741824||i.delta>1073741824)&&(n.requestNormalizeDelta=!0)),i===n.root){n.root=t,Rt(t,0),e.detach(),Nb(),pl(t),n.root.parent=ze;return}const s=kn(i)===1;if(i===i.parent.left?i.parent.left=t:i.parent.right=t,i===e?t.parent=i.parent:(i.parent===e?t.parent=i:t.parent=i.parent,i.left=e.left,i.right=e.right,i.parent=e.parent,Rt(i,kn(e)),e===n.root?n.root=i:e===e.parent.left?e.parent.left=i:e.parent.right=i,i.left!==ze&&(i.left.parent=i),i.right!==ze&&(i.right.parent=i)),e.detach(),s){va(t.parent),i!==e&&(va(i),va(i.parent)),Nb();return}va(t),va(t.parent),i!==e&&(va(i),va(i.parent));let o;for(;t!==n.root&&kn(t)===0;)t===t.parent.left?(o=t.parent.right,kn(o)===1&&(Rt(o,0),Rt(t.parent,1),cf(n,t.parent),o=t.parent.right),kn(o.left)===0&&kn(o.right)===0?(Rt(o,1),t=t.parent):(kn(o.right)===0&&(Rt(o.left,0),Rt(o,1),df(n,o),o=t.parent.right),Rt(o,kn(t.parent)),Rt(t.parent,0),Rt(o.right,0),cf(n,t.parent),t=n.root)):(o=t.parent.left,kn(o)===1&&(Rt(o,0),Rt(t.parent,1),df(n,t.parent),o=t.parent.left),kn(o.left)===0&&kn(o.right)===0?(Rt(o,1),t=t.parent):(kn(o.left)===0&&(Rt(o.right,0),Rt(o,1),cf(n,o),o=t.parent.left),Rt(o,kn(t.parent)),Rt(t.parent,0),Rt(o.left,0),df(n,t.parent),t=n.root));Rt(t,0),Nb()}function eK(n){for(;n.left!==ze;)n=n.left;return n}function Nb(){ze.parent=ze,ze.delta=0,ze.start=0,ze.end=0}function cf(n,e){const t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(n.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==ze&&(t.left.parent=e),t.parent=e.parent,e.parent===ze?n.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,pl(e),pl(t)}function df(n,e){const t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(n.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==ze&&(t.right.parent=e),t.parent=e.parent,e.parent===ze?n.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,pl(e),pl(t)}function q3(n){let e=n.end;if(n.left!==ze){const t=n.left.maxEnd;t>e&&(e=t)}if(n.right!==ze){const t=n.right.maxEnd+n.delta;t>e&&(e=t)}return e}function pl(n){n.maxEnd=q3(n)}function va(n){for(;n!==ze;){const e=q3(n);if(n.maxEnd===e)return;n.maxEnd=e,n=n.parent}}function tK(n,e,t,i){return n===t?e-i:n-t}class fC{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==We)return lL(this.right);let e=this;for(;e.parent!==We&&e.parent.left!==e;)e=e.parent;return e.parent===We?We:e.parent}prev(){if(this.left!==We)return j3(this.left);let e=this;for(;e.parent!==We&&e.parent.right!==e;)e=e.parent;return e.parent===We?We:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}const We=new fC(null,0);We.parent=We;We.left=We;We.right=We;We.color=0;function lL(n){for(;n.left!==We;)n=n.left;return n}function j3(n){for(;n.right!==We;)n=n.right;return n}function cL(n){return n===We?0:n.size_left+n.piece.length+cL(n.right)}function dL(n){return n===We?0:n.lf_left+n.piece.lineFeedCnt+dL(n.right)}function Tb(){We.parent=We}function uf(n,e){const t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==We&&(t.left.parent=e),t.parent=e.parent,e.parent===We?n.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function hf(n,e){const t=e.left;e.left=t.right,t.right!==We&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===We?n.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function Pp(n,e){let t,i;if(e.left===We?(i=e,t=i.right):e.right===We?(i=e,t=i.left):(i=lL(e.right),t=i.right),i===n.root){n.root=t,t.color=0,e.detach(),Tb(),n.root.parent=We;return}const s=i.color===1;if(i===i.parent.left?i.parent.left=t:i.parent.right=t,i===e?(t.parent=i.parent,$h(n,t)):(i.parent===e?t.parent=i:t.parent=i.parent,$h(n,t),i.left=e.left,i.right=e.right,i.parent=e.parent,i.color=e.color,e===n.root?n.root=i:e===e.parent.left?e.parent.left=i:e.parent.right=i,i.left!==We&&(i.left.parent=i),i.right!==We&&(i.right.parent=i),i.size_left=e.size_left,i.lf_left=e.lf_left,$h(n,i)),e.detach(),t.parent.left===t){const r=cL(t),a=dL(t);if(r!==t.parent.size_left||a!==t.parent.lf_left){const l=r-t.parent.size_left,c=a-t.parent.lf_left;t.parent.size_left=r,t.parent.lf_left=a,Dr(n,t.parent,l,c)}}if($h(n,t.parent),s){Tb();return}let o;for(;t!==n.root&&t.color===0;)t===t.parent.left?(o=t.parent.right,o.color===1&&(o.color=0,t.parent.color=1,uf(n,t.parent),o=t.parent.right),o.left.color===0&&o.right.color===0?(o.color=1,t=t.parent):(o.right.color===0&&(o.left.color=0,o.color=1,hf(n,o),o=t.parent.right),o.color=t.parent.color,t.parent.color=0,o.right.color=0,uf(n,t.parent),t=n.root)):(o=t.parent.left,o.color===1&&(o.color=0,t.parent.color=1,hf(n,t.parent),o=t.parent.left),o.left.color===0&&o.right.color===0?(o.color=1,t=t.parent):(o.left.color===0&&(o.right.color=0,o.color=1,uf(n,o),o=t.parent.left),o.color=t.parent.color,t.parent.color=0,o.left.color=0,hf(n,t.parent),t=n.root));t.color=0,Tb()}function Ek(n,e){for($h(n,e);e!==n.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,uf(n,e)),e.parent.color=0,e.parent.parent.color=1,hf(n,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,hf(n,e)),e.parent.color=0,e.parent.parent.color=1,uf(n,e.parent.parent))}n.root.color=0}function Dr(n,e,t,i){for(;e!==n.root&&e!==We;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=i),e=e.parent}function $h(n,e){let t=0,i=0;if(e!==n.root){for(;e!==n.root&&e===e.parent.right;)e=e.parent;if(e!==n.root)for(e=e.parent,t=cL(e.left)-e.size_left,i=dL(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=i;e!==n.root&&(t!==0||i!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=i),e=e.parent}}const yr=65535;function K3(n){let e;return n[n.length-1]<65536?e=new Uint16Array(n.length):e=new Uint32Array(n.length),e.set(n,0),e}class iK{constructor(e,t,i,s,o){this.lineStarts=e,this.cr=t,this.lf=i,this.crlf=s,this.isBasicASCII=o}}function kr(n,e=!0){const t=[0];let i=1;for(let s=0,o=n.length;s<o;s++){const r=n.charCodeAt(s);r===13?s+1<o&&n.charCodeAt(s+1)===10?(t[i++]=s+2,s++):t[i++]=s+1:r===10&&(t[i++]=s+1)}return e?K3(t):t}function nK(n,e){n.length=0,n[0]=0;let t=1,i=0,s=0,o=0,r=!0;for(let l=0,c=e.length;l<c;l++){const d=e.charCodeAt(l);d===13?l+1<c&&e.charCodeAt(l+1)===10?(o++,n[t++]=l+2,l++):(i++,n[t++]=l+1):d===10?(s++,n[t++]=l+1):r&&d!==9&&(d<32||d>126)&&(r=!1)}const a=new iK(K3(n),i,s,o,r);return n.length=0,a}class Bn{constructor(e,t,i,s,o){this.bufferIndex=e,this.start=t,this.end=i,this.lineFeedCnt=s,this.length=o}}class Yl{constructor(e,t){this.buffer=e,this.lineStarts=t}}class sK{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==We&&e.iterate(e.root,i=>(i!==We&&this._pieces.push(i.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class oK{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartOffset<=e&&i.nodeStartOffset+i.node.piece.length>=e)return i}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<e&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=e)return i}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1;const i=this._cache;for(let s=0;s<i.length;s++){const o=i[s];if(o.node.parent===null||o.nodeStartOffset>=e){i[s]=null,t=!0;continue}}if(t){const s=[];for(const o of i)o!==null&&s.push(o);this._cache=s}}}class rK{constructor(e,t,i){this.create(e,t,i)}create(e,t,i){this._buffers=[new Yl("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=We,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=i;let s=null;for(let o=0,r=e.length;o<r;o++)if(e[o].buffer.length>0){e[o].lineStarts||(e[o].lineStarts=kr(e[o].buffer));const a=new Bn(o+1,{line:0,column:0},{line:e[o].lineStarts.length-1,column:e[o].buffer.length-e[o].lineStarts[e[o].lineStarts.length-1]},e[o].lineStarts.length-1,e[o].buffer.length);this._buffers.push(e[o]),s=this.rbInsertRight(s,a)}this._searchCache=new oK(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const t=yr,i=t-Math.floor(t/3),s=i*2;let o="",r=0;const a=[];if(this.iterate(this.root,l=>{const c=this.getNodeContent(l),d=c.length;if(r<=i||r+d<s)return o+=c,r+=d,!0;const u=o.replace(/\r\n|\r|\n/g,e);return a.push(new Yl(u,kr(u))),o=c,r=d,!0}),r>0){const l=o.replace(/\r\n|\r|\n/g,e);a.push(new Yl(l,kr(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new sK(this,e)}getOffsetAt(e,t){let i=0,s=this.root;for(;s!==We;)if(s.left!==We&&s.lf_left+1>=e)s=s.left;else if(s.lf_left+s.piece.lineFeedCnt+1>=e){i+=s.size_left;const o=this.getAccumulatedValue(s,e-s.lf_left-2);return i+=o+t-1}else e-=s.lf_left+s.piece.lineFeedCnt,i+=s.size_left+s.piece.length,s=s.right;return i}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,i=0;const s=e;for(;t!==We;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const o=this.getIndexOf(t,e-t.size_left);if(i+=t.lf_left+o.index,o.index===0){const r=this.getOffsetAt(i+1,1),a=s-r;return new Y(i+1,a+1)}return new Y(i+1,o.remainder+1)}else if(e-=t.size_left+t.piece.length,i+=t.lf_left+t.piece.lineFeedCnt,t.right===We){const o=this.getOffsetAt(i+1,1),r=s-e-o;return new Y(i+1,r+1)}else t=t.right;return new Y(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const i=this.nodeAt2(e.startLineNumber,e.startColumn),s=this.nodeAt2(e.endLineNumber,e.endColumn),o=this.getValueInRange2(i,s);return t?t!==this._EOL||!this._EOLNormalized?o.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?o:o.replace(/\r\n|\r|\n/g,t):o}getValueInRange2(e,t){if(e.node===t.node){const a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,c=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(c+e.remainder,c+t.remainder)}let i=e.node;const s=this._buffers[i.piece.bufferIndex].buffer,o=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);let r=s.substring(o+e.remainder,o+i.piece.length);for(i=i.next();i!==We;){const a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(i===t.node){r+=a.substring(l,l+t.remainder);break}else r+=a.substr(l,i.piece.length);i=i.next()}return r}getLinesContent(){const e=[];let t=0,i="",s=!1;return this.iterate(this.root,o=>{if(o===We)return!0;const r=o.piece;let a=r.length;if(a===0)return!0;const l=this._buffers[r.bufferIndex].buffer,c=this._buffers[r.bufferIndex].lineStarts,d=r.start.line,u=r.end.line;let h=c[d]+r.start.column;if(s&&(l.charCodeAt(h)===10&&(h++,a--),e[t++]=i,i="",s=!1,a===0))return!0;if(d===u)return!this._EOLNormalized&&l.charCodeAt(h+a-1)===13?(s=!0,i+=l.substr(h,a-1)):i+=l.substr(h,a),!0;i+=this._EOLNormalized?l.substring(h,Math.max(h,c[d+1]-this._EOLLength)):l.substring(h,c[d+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;for(let f=d+1;f<u;f++)i=this._EOLNormalized?l.substring(c[f],c[f+1]-this._EOLLength):l.substring(c[f],c[f+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;return!this._EOLNormalized&&l.charCodeAt(c[u]+r.end.column-1)===13?(s=!0,r.end.column===0?t--:i=l.substr(c[u],r.end.column-1)):i=l.substr(c[u],r.end.column),!0}),s&&(e[t++]=i,i=""),e[t++]=i,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const i=this._buffers[t.piece.bufferIndex],s=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return i.buffer.charCodeAt(s)}else{const t=this._buffers[e.node.piece.bufferIndex],s=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(s)}}getLineCharCode(e,t){const i=this.nodeAt2(e,t+1);return this._getCharCode(i)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,i,s,o,r,a,l,c,d,u){const h=this._buffers[e.piece.bufferIndex],f=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),g=this.offsetInBuffer(e.piece.bufferIndex,o),p=this.offsetInBuffer(e.piece.bufferIndex,r);let _;const v={line:0,column:0};let b,w;t._wordSeparators?(b=h.buffer.substring(g,p),w=C=>C+g,t.reset(0)):(b=h.buffer,w=C=>C,t.reset(g));do if(_=t.next(b),_){if(w(_.index)>=p)return d;this.positionInBuffer(e,w(_.index)-f,v);const C=this.getLineFeedCnt(e.piece.bufferIndex,o,v),S=v.line===o.line?v.column-o.column+s:v.column+1,k=S+_[0].length;if(u[d++]=zl(new $(i+C,S,i+C,k),_,l),w(_.index)+_[0].length>=p||d>=c)return d}while(_);return d}findMatchesLineByLine(e,t,i,s){const o=[];let r=0;const a=new Sd(t.wordSeparators,t.regex);let l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];const c=this.nodeAt2(e.endLineNumber,e.endColumn);if(c===null)return[];let d=this.positionInBuffer(l.node,l.remainder);const u=this.positionInBuffer(c.node,c.remainder);if(l.node===c.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,d,u,t,i,s,r,o),o;let h=e.startLineNumber,f=l.node;for(;f!==c.node;){const p=this.getLineFeedCnt(f.piece.bufferIndex,d,f.piece.end);if(p>=1){const v=this._buffers[f.piece.bufferIndex].lineStarts,b=this.offsetInBuffer(f.piece.bufferIndex,f.piece.start),w=v[d.line+p],C=h===e.startLineNumber?e.startColumn:1;if(r=this.findMatchesInNode(f,a,h,C,d,this.positionInBuffer(f,w-b),t,i,s,r,o),r>=s)return o;h+=p}const _=h===e.startLineNumber?e.startColumn-1:0;if(h===e.endLineNumber){const v=this.getLineContent(h).substring(_,e.endColumn-1);return r=this._findMatchesInLine(t,a,v,e.endLineNumber,_,r,o,i,s),o}if(r=this._findMatchesInLine(t,a,this.getLineContent(h).substr(_),h,_,r,o,i,s),r>=s)return o;h++,l=this.nodeAt2(h,1),f=l.node,d=this.positionInBuffer(l.node,l.remainder)}if(h===e.endLineNumber){const p=h===e.startLineNumber?e.startColumn-1:0,_=this.getLineContent(h).substring(p,e.endColumn-1);return r=this._findMatchesInLine(t,a,_,e.endLineNumber,p,r,o,i,s),o}const g=h===e.startLineNumber?e.startColumn:1;return r=this.findMatchesInNode(c.node,a,h,g,d,u,t,i,s,r,o),o}_findMatchesInLine(e,t,i,s,o,r,a,l,c){const d=e.wordSeparators;if(!l&&e.simpleSearch){const h=e.simpleSearch,f=h.length,g=i.length;let p=-f;for(;(p=i.indexOf(h,p+f))!==-1;)if((!d||MS(d,i,g,p,f))&&(a[r++]=new Rf(new $(s,p+1+o,s,p+1+f+o),null),r>=c))return r;return r}let u;t.reset(0);do if(u=t.next(i),u&&(a[r++]=zl(new $(s,u.index+1+o,s,u.index+1+u[0].length+o),u,l),r>=c))return r;while(u);return r}insert(e,t,i=!1){if(this._EOLNormalized=this._EOLNormalized&&i,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==We){const{node:s,remainder:o,nodeStartOffset:r}=this.nodeAt(e),a=s.piece,l=a.bufferIndex,c=this.positionInBuffer(s,o);if(s.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&r+a.length===e&&t.length<yr){this.appendToNode(s,t),this.computeBufferMetadata();return}if(r===e)this.insertContentToNodeLeft(t,s),this._searchCache.validate(e);else if(r+s.piece.length>e){const d=[];let u=new Bn(a.bufferIndex,c,a.end,this.getLineFeedCnt(a.bufferIndex,c,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,c));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(s,o)===10){const p={line:u.start.line+1,column:0};u=new Bn(u.bufferIndex,p,u.end,this.getLineFeedCnt(u.bufferIndex,p,u.end),u.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(s,o-1)===13){const p=this.positionInBuffer(s,o-1);this.deleteNodeTail(s,p),t="\r"+t,s.piece.length===0&&d.push(s)}else this.deleteNodeTail(s,c);else this.deleteNodeTail(s,c);const h=this.createNewPieces(t);u.length>0&&this.rbInsertRight(s,u);let f=s;for(let g=0;g<h.length;g++)f=this.rbInsertRight(f,h[g]);this.deleteNodes(d)}else this.insertContentToNodeRight(t,s)}else{const s=this.createNewPieces(t);let o=this.rbInsertLeft(null,s[0]);for(let r=1;r<s.length;r++)o=this.rbInsertRight(o,s[r])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===We)return;const i=this.nodeAt(e),s=this.nodeAt(e+t),o=i.node,r=s.node;if(o===r){const h=this.positionInBuffer(o,i.remainder),f=this.positionInBuffer(o,s.remainder);if(i.nodeStartOffset===e){if(t===o.piece.length){const g=o.next();Pp(this,o),this.validateCRLFWithPrevNode(g),this.computeBufferMetadata();return}this.deleteNodeHead(o,f),this._searchCache.validate(e),this.validateCRLFWithPrevNode(o),this.computeBufferMetadata();return}if(i.nodeStartOffset+o.piece.length===e+t){this.deleteNodeTail(o,h),this.validateCRLFWithNextNode(o),this.computeBufferMetadata();return}this.shrinkNode(o,h,f),this.computeBufferMetadata();return}const a=[],l=this.positionInBuffer(o,i.remainder);this.deleteNodeTail(o,l),this._searchCache.validate(e),o.piece.length===0&&a.push(o);const c=this.positionInBuffer(r,s.remainder);this.deleteNodeHead(r,c),r.piece.length===0&&a.push(r);const d=o.next();for(let h=d;h!==We&&h!==r;h=h.next())a.push(h);const u=o.piece.length===0?o.prev():o;this.deleteNodes(a),this.validateCRLFWithNextNode(u),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){const i=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){const r=t.piece,a={line:r.start.line+1,column:0},l=new Bn(r.bufferIndex,a,r.end,this.getLineFeedCnt(r.bufferIndex,a,r.end),r.length-1);t.piece=l,e+=`
`,Dr(this,t,-1,-1),t.piece.length===0&&i.push(t)}const s=this.createNewPieces(e);let o=this.rbInsertLeft(t,s[s.length-1]);for(let r=s.length-2;r>=0;r--)o=this.rbInsertLeft(o,s[r]);this.validateCRLFWithPrevNode(o),this.deleteNodes(i)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);const i=this.createNewPieces(e),s=this.rbInsertRight(t,i[0]);let o=s;for(let r=1;r<i.length;r++)o=this.rbInsertRight(o,i[r]);this.validateCRLFWithPrevNode(s)}positionInBuffer(e,t,i){const s=e.piece,o=e.piece.bufferIndex,r=this._buffers[o].lineStarts,l=r[s.start.line]+s.start.column+t;let c=s.start.line,d=s.end.line,u=0,h=0,f=0;for(;c<=d&&(u=c+(d-c)/2|0,f=r[u],u!==d);)if(h=r[u+1],l<f)d=u-1;else if(l>=h)c=u+1;else break;return i?(i.line=u,i.column=l-f,null):{line:u,column:l-f}}getLineFeedCnt(e,t,i){if(i.column===0)return i.line-t.line;const s=this._buffers[e].lineStarts;if(i.line===s.length-1)return i.line-t.line;const o=s[i.line+1],r=s[i.line]+i.column;if(o>r+1)return i.line-t.line;const a=r-1;return this._buffers[e].buffer.charCodeAt(a)===13?i.line-t.line+1:i.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)Pp(this,e[t])}createNewPieces(e){if(e.length>yr){const d=[];for(;e.length>yr;){const h=e.charCodeAt(yr-1);let f;h===13||h>=55296&&h<=56319?(f=e.substring(0,yr-1),e=e.substring(yr-1)):(f=e.substring(0,yr),e=e.substring(yr));const g=kr(f);d.push(new Bn(this._buffers.length,{line:0,column:0},{line:g.length-1,column:f.length-g[g.length-1]},g.length-1,f.length)),this._buffers.push(new Yl(f,g))}const u=kr(e);return d.push(new Bn(this._buffers.length,{line:0,column:0},{line:u.length-1,column:e.length-u[u.length-1]},u.length-1,e.length)),this._buffers.push(new Yl(e,u)),d}let t=this._buffers[0].buffer.length;const i=kr(e,!1);let s=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},s=this._lastChangeBufferPos;for(let d=0;d<i.length;d++)i[d]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let d=0;d<i.length;d++)i[d]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+=e}const o=this._buffers[0].buffer.length,r=this._buffers[0].lineStarts.length-1,a=o-this._buffers[0].lineStarts[r],l={line:r,column:a},c=new Bn(0,s,l,this.getLineFeedCnt(0,s,l),o-t);return this._lastChangeBufferPos=l,[c]}getLineRawContent(e,t=0){let i=this.root,s="";const o=this._searchCache.get2(e);if(o){i=o.node;const r=this.getAccumulatedValue(i,e-o.nodeStartLineNumber-1),a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(o.nodeStartLineNumber+i.piece.lineFeedCnt===e)s=a.substring(l+r,l+i.piece.length);else{const c=this.getAccumulatedValue(i,e-o.nodeStartLineNumber);return a.substring(l+r,l+c-t)}}else{let r=0;const a=e;for(;i!==We;)if(i.left!==We&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const l=this.getAccumulatedValue(i,e-i.lf_left-2),c=this.getAccumulatedValue(i,e-i.lf_left-1),d=this._buffers[i.piece.bufferIndex].buffer,u=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return r+=i.size_left,this._searchCache.set({node:i,nodeStartOffset:r,nodeStartLineNumber:a-(e-1-i.lf_left)}),d.substring(u+l,u+c-t)}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const l=this.getAccumulatedValue(i,e-i.lf_left-2),c=this._buffers[i.piece.bufferIndex].buffer,d=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);s=c.substring(d+l,d+i.piece.length);break}else e-=i.lf_left+i.piece.lineFeedCnt,r+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==We;){const r=this._buffers[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const a=this.getAccumulatedValue(i,0),l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return s+=r.substring(l,l+a-t),s}else{const a=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);s+=r.substr(a,i.piece.length)}i=i.next()}return s}computeBufferMetadata(){let e=this.root,t=1,i=0;for(;e!==We;)t+=e.lf_left+e.piece.lineFeedCnt,i+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=i,this._searchCache.validate(this._length)}getIndexOf(e,t){const i=e.piece,s=this.positionInBuffer(e,t),o=s.line-i.start.line;if(this.offsetInBuffer(i.bufferIndex,i.end)-this.offsetInBuffer(i.bufferIndex,i.start)===t){const r=this.getLineFeedCnt(e.piece.bufferIndex,i.start,s);if(r!==o)return{index:r,remainder:0}}return{index:o,remainder:s.column}}getAccumulatedValue(e,t){if(t<0)return 0;const i=e.piece,s=this._buffers[i.bufferIndex].lineStarts,o=i.start.line+t+1;return o>i.end.line?s[i.end.line]+i.end.column-s[i.start.line]-i.start.column:s[o]-s[i.start.line]-i.start.column}deleteNodeTail(e,t){const i=e.piece,s=i.lineFeedCnt,o=this.offsetInBuffer(i.bufferIndex,i.end),r=t,a=this.offsetInBuffer(i.bufferIndex,r),l=this.getLineFeedCnt(i.bufferIndex,i.start,r),c=l-s,d=a-o,u=i.length+d;e.piece=new Bn(i.bufferIndex,i.start,r,l,u),Dr(this,e,d,c)}deleteNodeHead(e,t){const i=e.piece,s=i.lineFeedCnt,o=this.offsetInBuffer(i.bufferIndex,i.start),r=t,a=this.getLineFeedCnt(i.bufferIndex,r,i.end),l=this.offsetInBuffer(i.bufferIndex,r),c=a-s,d=o-l,u=i.length+d;e.piece=new Bn(i.bufferIndex,r,i.end,a,u),Dr(this,e,d,c)}shrinkNode(e,t,i){const s=e.piece,o=s.start,r=s.end,a=s.length,l=s.lineFeedCnt,c=t,d=this.getLineFeedCnt(s.bufferIndex,s.start,c),u=this.offsetInBuffer(s.bufferIndex,t)-this.offsetInBuffer(s.bufferIndex,o);e.piece=new Bn(s.bufferIndex,s.start,c,d,u),Dr(this,e,u-a,d-l);const h=new Bn(s.bufferIndex,i,r,this.getLineFeedCnt(s.bufferIndex,i,r),this.offsetInBuffer(s.bufferIndex,r)-this.offsetInBuffer(s.bufferIndex,i)),f=this.rbInsertRight(e,h);this.validateCRLFWithPrevNode(f)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const i=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),s=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const o=kr(t,!1);for(let f=0;f<o.length;f++)o[f]+=s;if(i){const f=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:s-f}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(o.slice(1));const r=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[r],l={line:r,column:a},c=e.piece.length+t.length,d=e.piece.lineFeedCnt,u=this.getLineFeedCnt(0,e.piece.start,l),h=u-d;e.piece=new Bn(e.piece.bufferIndex,e.piece.start,l,u,c),this._lastChangeBufferPos=l,Dr(this,e,t.length,h)}nodeAt(e){let t=this.root;const i=this._searchCache.get(e);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:e-i.nodeStartOffset};let s=0;for(;t!==We;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){s+=t.size_left;const o={node:t,remainder:e-t.size_left,nodeStartOffset:s};return this._searchCache.set(o),o}else e-=t.size_left+t.piece.length,s+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let i=this.root,s=0;for(;i!==We;)if(i.left!==We&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const o=this.getAccumulatedValue(i,e-i.lf_left-2),r=this.getAccumulatedValue(i,e-i.lf_left-1);return s+=i.size_left,{node:i,remainder:Math.min(o+t-1,r),nodeStartOffset:s}}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const o=this.getAccumulatedValue(i,e-i.lf_left-2);if(o+t-1<=i.piece.length)return{node:i,remainder:o+t-1,nodeStartOffset:s};t-=i.piece.length-o;break}else e-=i.lf_left+i.piece.lineFeedCnt,s+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==We;){if(i.piece.lineFeedCnt>0){const o=this.getAccumulatedValue(i,0),r=this.offsetOfNode(i);return{node:i,remainder:Math.min(t-1,o),nodeStartOffset:r}}else if(i.piece.length>=t-1){const o=this.offsetOfNode(i);return{node:i,remainder:t-1,nodeStartOffset:o}}else t-=i.piece.length;i=i.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;const i=this._buffers[e.piece.bufferIndex],s=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return i.buffer.charCodeAt(s)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===We||e.piece.lineFeedCnt===0)return!1;const t=e.piece,i=this._buffers[t.bufferIndex].lineStarts,s=t.start.line,o=i[s]+t.start.column;return s===i.length-1||i[s+1]>o+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(o)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===We||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){const i=[],s=this._buffers[e.piece.bufferIndex].lineStarts;let o;e.piece.end.column===0?o={line:e.piece.end.line-1,column:s[e.piece.end.line]-s[e.piece.end.line-1]-1}:o={line:e.piece.end.line,column:e.piece.end.column-1};const r=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new Bn(e.piece.bufferIndex,e.piece.start,o,a,r),Dr(this,e,-1,-1),e.piece.length===0&&i.push(e);const l={line:t.piece.start.line+1,column:0},c=t.piece.length-1,d=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new Bn(t.piece.bufferIndex,l,t.piece.end,d,c),Dr(this,t,-1,-1),t.piece.length===0&&i.push(t);const u=this.createNewPieces(`\r
`);this.rbInsertRight(e,u[0]);for(let h=0;h<i.length;h++)Pp(this,i[h])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const i=t.next();if(this.startWithLF(i)){if(e+=`
`,i.piece.length===1)Pp(this,i);else{const s=i.piece,o={line:s.start.line+1,column:0},r=s.length-1,a=this.getLineFeedCnt(s.bufferIndex,o,s.end);i.piece=new Bn(s.bufferIndex,o,s.end,a,r),Dr(this,i,-1,-1)}return!0}}return!1}iterate(e,t){if(e===We)return t(We);const i=this.iterate(e.left,t);return i&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===We)return"";const t=this._buffers[e.piece.bufferIndex],i=e.piece,s=this.offsetInBuffer(i.bufferIndex,i.start),o=this.offsetInBuffer(i.bufferIndex,i.end);return t.buffer.substring(s,o)}getPieceContent(e){const t=this._buffers[e.bufferIndex],i=this.offsetInBuffer(e.bufferIndex,e.start),s=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(i,s)}rbInsertRight(e,t){const i=new fC(t,1);if(i.left=We,i.right=We,i.parent=We,i.size_left=0,i.lf_left=0,this.root===We)this.root=i,i.color=0;else if(e.right===We)e.right=i,i.parent=e;else{const o=lL(e.right);o.left=i,i.parent=o}return Ek(this,i),i}rbInsertLeft(e,t){const i=new fC(t,1);if(i.left=We,i.right=We,i.parent=We,i.size_left=0,i.lf_left=0,this.root===We)this.root=i,i.color=0;else if(e.left===We)e.left=i,i.parent=e;else{const s=j3(e.left);s.right=i,i.parent=s}return Ek(this,i),i}}class ou extends oe{constructor(e,t,i,s,o,r,a){super(),this._onDidChangeContent=this._register(new q),this._BOM=t,this._mightContainNonBasicASCII=!r,this._mightContainRTL=s,this._mightContainUnusualLineTerminators=o,this._pieceTree=new rK(e,i,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){const i=e+t,s=this.getPositionAt(e),o=this.getPositionAt(i);return new $(s.lineNumber,s.column,o.lineNumber,o.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const i=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,i)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const i=this.getOffsetAt(e.startLineNumber,e.startColumn),s=this.getOffsetAt(e.endLineNumber,e.endColumn);let o=0;const r=this._getEndOfLine(t),a=this.getEOL();if(r.length!==a.length){const l=r.length-a.length,c=e.endLineNumber-e.startLineNumber;o=l*c}return s-i+o}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let i=0;const s=e.startLineNumber,o=e.endLineNumber;for(let r=s;r<=o;r++){const a=this.getLineContent(r),l=r===s?e.startColumn-1:0,c=r===o?e.endColumn-1:a.length;for(let d=l;d<c;d++)Ni(a.charCodeAt(d))?(i=i+1,d=d+1):i=i+1}return i+=this._getEndOfLine(t).length*(o-s),i}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=Jn(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Fc(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,i){let s=this._mightContainRTL,o=this._mightContainUnusualLineTerminators,r=this._mightContainNonBasicASCII,a=!0,l=[];for(let p=0;p<e.length;p++){const _=e[p];a&&_._isTracked&&(a=!1);const v=_.range;if(_.text){let k=!0;r||(k=!yS(_.text),r=k),!s&&k&&(s=Tf(_.text)),!o&&k&&(o=NT(_.text))}let b="",w=0,C=0,S=0;if(_.text){let k;[w,C,S,k]=Ou(_.text);const L=this.getEOL();k===0||k===(L===`\r
`?2:1)?b=_.text:b=_.text.replace(/\r\n|\r|\n/g,L)}l[p]={sortIndex:p,identifier:_.identifier||null,range:v,rangeOffset:this.getOffsetAt(v.startLineNumber,v.startColumn),rangeLength:this.getValueLengthInRange(v),text:b,eolCount:w,firstLineLength:C,lastLineLength:S,forceMoveMarkers:!!_.forceMoveMarkers,isAutoWhitespaceEdit:_.isAutoWhitespaceEdit||!1}}l.sort(ou._sortOpsAscending);let c=!1;for(let p=0,_=l.length-1;p<_;p++){const v=l[p].range.getEndPosition(),b=l[p+1].range.getStartPosition();if(b.isBeforeOrEqual(v)){if(b.isBefore(v))throw new Error("Overlapping ranges are not allowed!");c=!0}}a&&(l=this._reduceOperations(l));const d=i||t?ou._getInverseEditRanges(l):[],u=[];if(t)for(let p=0;p<l.length;p++){const _=l[p],v=d[p];if(_.isAutoWhitespaceEdit&&_.range.isEmpty())for(let b=v.startLineNumber;b<=v.endLineNumber;b++){let w="";b===v.startLineNumber&&(w=this.getLineContent(_.range.startLineNumber),Jn(w)!==-1)||u.push({lineNumber:b,oldContent:w})}}let h=null;if(i){let p=0;h=[];for(let _=0;_<l.length;_++){const v=l[_],b=d[_],w=this.getValueInRange(v.range),C=v.rangeOffset+p;p+=v.text.length-w.length,h[_]={sortIndex:v.sortIndex,identifier:v.identifier,range:b,text:w,textChange:new ji(v.rangeOffset,w,C,v.text)}}c||h.sort((_,v)=>_.sortIndex-v.sortIndex)}this._mightContainRTL=s,this._mightContainUnusualLineTerminators=o,this._mightContainNonBasicASCII=r;const f=this._doApplyEdits(l);let g=null;if(t&&u.length>0){u.sort((p,_)=>_.lineNumber-p.lineNumber),g=[];for(let p=0,_=u.length;p<_;p++){const v=u[p].lineNumber;if(p>0&&u[p-1].lineNumber===v)continue;const b=u[p].oldContent,w=this.getLineContent(v);w.length===0||w===b||Jn(w)!==-1||g.push(v)}}return this._onDidChangeContent.fire(),new uB(h,f,g)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const i=e[0].range,s=e[e.length-1].range,o=new $(i.startLineNumber,i.startColumn,s.endLineNumber,s.endColumn);let r=i.startLineNumber,a=i.startColumn;const l=[];for(let f=0,g=e.length;f<g;f++){const p=e[f],_=p.range;t=t||p.forceMoveMarkers,l.push(this.getValueInRange(new $(r,a,_.startLineNumber,_.startColumn))),p.text.length>0&&l.push(p.text),r=_.endLineNumber,a=_.endColumn}const c=l.join(""),[d,u,h]=Ou(c);return{sortIndex:0,identifier:e[0].identifier,range:o,rangeOffset:this.getOffsetAt(o.startLineNumber,o.startColumn),rangeLength:this.getValueLengthInRange(o,0),text:c,eolCount:d,firstLineLength:u,lastLineLength:h,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(ou._sortOpsDescending);const t=[];for(let i=0;i<e.length;i++){const s=e[i],o=s.range.startLineNumber,r=s.range.startColumn,a=s.range.endLineNumber,l=s.range.endColumn;if(o===a&&r===l&&s.text.length===0)continue;s.text?(this._pieceTree.delete(s.rangeOffset,s.rangeLength),this._pieceTree.insert(s.rangeOffset,s.text,!0)):this._pieceTree.delete(s.rangeOffset,s.rangeLength);const c=new $(o,r,a,l);t.push({range:c,rangeLength:s.rangeLength,text:s.text,rangeOffset:s.rangeOffset,forceMoveMarkers:s.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,i,s){return this._pieceTree.findMatchesLineByLine(e,t,i,s)}static _getInverseEditRanges(e){const t=[];let i=0,s=0,o=null;for(let r=0,a=e.length;r<a;r++){const l=e[r];let c,d;o?o.range.endLineNumber===l.range.startLineNumber?(c=i,d=s+(l.range.startColumn-o.range.endColumn)):(c=i+(l.range.startLineNumber-o.range.endLineNumber),d=l.range.startColumn):(c=l.range.startLineNumber,d=l.range.startColumn);let u;if(l.text.length>0){const h=l.eolCount+1;h===1?u=new $(c,d,c,d+l.firstLineLength):u=new $(c,d,c+h-1,l.lastLineLength+1)}else u=new $(c,d,c,d);i=u.endLineNumber,s=u.endColumn,t.push(u),o=l}return t}static _sortOpsAscending(e,t){const i=$.compareRangesUsingEnds(e.range,t.range);return i===0?e.sortIndex-t.sortIndex:i}static _sortOpsDescending(e,t){const i=$.compareRangesUsingEnds(e.range,t.range);return i===0?t.sortIndex-e.sortIndex:-i}}class aK{constructor(e,t,i,s,o,r,a,l,c){this._chunks=e,this._bom=t,this._cr=i,this._lf=s,this._crlf=o,this._containsRTL=r,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=c}_getEOL(e){const t=this._cr+this._lf+this._crlf,i=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:i>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e),i=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let o=0,r=i.length;o<r;o++){const a=i[o].buffer.replace(/\r\n|\r|\n/g,t),l=kr(a);i[o]=new Yl(a,l)}const s=new ou(i,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:s,disposable:s}}}class G3{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&LS(e)&&(this.BOM=T6,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=nK(this._tmpLineStarts,e);this.chunks.push(new Yl(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=Tf(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=NT(e)))}finish(e=!0){return this._finish(),new aK(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const t=kr(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}}class lK{constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}replace(e,t,i){if(e>=this._store.length)return;if(t===0){this.insert(e,i);return}else if(i===0){this.delete(e,t);return}const s=this._store.slice(0,e),o=this._store.slice(e+t),r=cK(i,this._default);this._store=s.concat(r,o)}delete(e,t){t===0||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(t===0||e>=this._store.length)return;const i=[];for(let s=0;s<t;s++)i[s]=this._default;this._store=b_(this._store,e,i)}}function cK(n,e){const t=[];for(let i=0;i<n;i++)t[i]=e;return t}class dK{get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}}class gC{constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){const i=this._tokens[this._tokens.length-1];if(i.endLineNumber+1===e){i.appendLineTokens(t);return}}this._tokens.push(new dK(e,[t]))}finalize(){return this._tokens}}class uK{constructor(e,t){this.tokenizationSupport=t,this.initialState=this.tokenizationSupport.getInitialState(),this.store=new pC(e)}getStartState(e){return this.store.getStartState(e,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}}class hK extends uK{constructor(e,t,i,s){super(e,t),this._textModel=i,this._languageIdCodec=s}updateTokensUntilLine(e,t){const i=this._textModel.getLanguageId();for(;;){const s=this.getFirstInvalidLine();if(!s||s.lineNumber>t)break;const o=this._textModel.getLineContent(s.lineNumber),r=Sh(this._languageIdCodec,i,this.tokenizationSupport,o,!0,s.startState);e.add(s.lineNumber,r.tokens),this.store.setEndState(s.lineNumber,r.endState)}}getTokenTypeIfInsertingCharacter(e,t){const i=this.getStartState(e.lineNumber);if(!i)return 0;const s=this._textModel.getLanguageId(),o=this._textModel.getLineContent(e.lineNumber),r=o.substring(0,e.column-1)+t+o.substring(e.column-1),a=Sh(this._languageIdCodec,s,this.tokenizationSupport,r,!0,i),l=new Hi(a.tokens,r,this._languageIdCodec);if(l.getCount()===0)return 0;const c=l.findTokenIndexAtOffset(e.column-1);return l.getStandardTokenType(c)}tokenizeLineWithEdit(e,t,i){const s=e.lineNumber,o=e.column,r=this.getStartState(s);if(!r)return null;const a=this._textModel.getLineContent(s),l=a.substring(0,o-1)+i+a.substring(o-1+t),c=this._textModel.getLanguageIdAtPosition(s,0),d=Sh(this._languageIdCodec,c,this.tokenizationSupport,l,!0,r);return new Hi(d.tokens,l,this._languageIdCodec)}isCheapToTokenize(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t||e===t&&this._textModel.getLineLength(e)<2048}tokenizeHeuristically(e,t,i){if(i<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(t<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(e,i),{heuristicTokens:!1};let s=this.guessStartState(t);const o=this._textModel.getLanguageId();for(let r=t;r<=i;r++){const a=this._textModel.getLineContent(r),l=Sh(this._languageIdCodec,o,this.tokenizationSupport,a,!0,s);e.add(r,l.tokens),s=l.endState}return{heuristicTokens:!0}}guessStartState(e){let t=this._textModel.getLineFirstNonWhitespaceColumn(e);const i=[];let s=null;for(let a=e-1;t>1&&a>=1;a--){const l=this._textModel.getLineFirstNonWhitespaceColumn(a);if(l!==0&&l<t&&(i.push(this._textModel.getLineContent(a)),t=l,s=this.getStartState(a),s))break}s||(s=this.tokenizationSupport.getInitialState()),i.reverse();const o=this._textModel.getLanguageId();let r=s;for(const a of i)r=Sh(this._languageIdCodec,o,this.tokenizationSupport,a,!1,r).endState;return r}}class pC{constructor(e){this.lineCount=e,this._tokenizationStateStore=new fK,this._invalidEndStatesLineNumbers=new gK,this._invalidEndStatesLineNumbers.addRange(new et(1,e+1))}getEndState(e){return this._tokenizationStateStore.getEndState(e)}setEndState(e,t){if(!t)throw new Ai("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(e);const i=this._tokenizationStateStore.setEndState(e,t);return i&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new et(e+1,e+2)),i}acceptChange(e,t){this.lineCount+=t-e.length,this._tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new et(e.startLineNumber,e.endLineNumberExclusive),t)}acceptChanges(e){for(const t of e){const[i]=Ou(t.text);this.acceptChange(new it(t.range.startLineNumber,t.range.endLineNumber+1),i+1)}}invalidateEndStateRange(e){this._invalidEndStatesLineNumbers.addRange(new et(e.startLineNumber,e.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}allStatesValid(){return this._invalidEndStatesLineNumbers.min===null}getStartState(e,t){return e===1?t:this.getEndState(e-1)}getFirstInvalidLine(e){const t=this.getFirstInvalidEndStateLineNumber();if(t===null)return null;const i=this.getStartState(t,e);if(!i)throw new Ai("Start state must be defined");return{lineNumber:t,startState:i}}}class fK{constructor(){this._lineEndStates=new lK(null)}getEndState(e){return this._lineEndStates.get(e)}setEndState(e,t){const i=this._lineEndStates.get(e);return i&&i.equals(t)?!1:(this._lineEndStates.set(e,t),!0)}acceptChange(e,t){let i=e.length;t>0&&i>0&&(i--,t--),this._lineEndStates.replace(e.startLineNumber,i,t)}}class gK{constructor(){this._ranges=[]}get min(){return this._ranges.length===0?null:this._ranges[0].start}delete(e){const t=this._ranges.findIndex(i=>i.contains(e));if(t!==-1){const i=this._ranges[t];i.start===e?i.endExclusive===e+1?this._ranges.splice(t,1):this._ranges[t]=new et(e+1,i.endExclusive):i.endExclusive===e+1?this._ranges[t]=new et(i.start,e):this._ranges.splice(t,1,new et(i.start,e),new et(e+1,i.endExclusive))}}addRange(e){et.addRange(e,this._ranges)}addRangeAndResize(e,t){let i=0;for(;!(i>=this._ranges.length||e.start<=this._ranges[i].endExclusive);)i++;let s=i;for(;!(s>=this._ranges.length||e.endExclusive<this._ranges[s].start);)s++;const o=t-e.length;for(let r=s;r<this._ranges.length;r++)this._ranges[r]=this._ranges[r].delta(o);if(i===s){const r=new et(e.start,e.start+t);r.isEmpty||this._ranges.splice(i,0,r)}else{const r=Math.min(e.start,this._ranges[i].start),a=Math.max(e.endExclusive,this._ranges[s-1].endExclusive),l=new et(r,a+o);l.isEmpty?this._ranges.splice(i,s-i):this._ranges.splice(i,s-i,l)}}toString(){return this._ranges.map(e=>e.toString()).join(" + ")}}function Sh(n,e,t,i,s,o){let r=null;if(t)try{r=t.tokenizeEncoded(i,s,o.clone())}catch(a){$t(a)}return r||(r=XT(n.encodeLanguageId(e),o)),Hi.convertToEndOffset(r.tokens,i.length),r}class pK{constructor(e,t){this._tokenizerWithStateStore=e,this._backgroundTokenStore=t,this._isDisposed=!1,this._isScheduled=!1}dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,Ba(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){const t=Date.now()+e.timeRemaining(),i=()=>{this._isDisposed||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?oT(i):this._beginBackgroundTokenization())};i()}_backgroundTokenizeForAtLeast1ms(){const e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new gC,i=Oc.create(!1);do if(i.elapsed()>1||this._tokenizeOneInvalidLine(t)>=e)break;while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}_hasLinesToTokenize(){return this._tokenizerWithStateStore?!this._tokenizerWithStateStore.store.allStatesValid():!1}_tokenizeOneInvalidLine(e){var t;const i=(t=this._tokenizerWithStateStore)===null||t===void 0?void 0:t.getFirstInvalidLine();return i?(this._tokenizerWithStateStore.updateTokensUntilLine(e,i.lineNumber),i.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new it(e,t))}}const Er=new Uint32Array(0).buffer;class zo{static deleteBeginning(e,t){return e===null||e===Er?e:zo.delete(e,0,t)}static deleteEnding(e,t){if(e===null||e===Er)return e;const i=Hr(e),s=i[i.length-2];return zo.delete(e,t,s)}static delete(e,t,i){if(e===null||e===Er||t===i)return e;const s=Hr(e),o=s.length>>>1;if(t===0&&s[s.length-2]===i)return Er;const r=Hi.findIndexInTokensArray(s,t),a=r>0?s[r-1<<1]:0,l=s[r<<1];if(i<l){const f=i-t;for(let g=r;g<o;g++)s[g<<1]-=f;return e}let c,d;a!==t?(s[r<<1]=t,c=r+1<<1,d=t):(c=r<<1,d=a);const u=i-t;for(let f=r+1;f<o;f++){const g=s[f<<1]-u;g>d&&(s[c++]=g,s[c++]=s[(f<<1)+1],d=g)}if(c===s.length)return e;const h=new Uint32Array(c);return h.set(s.subarray(0,c),0),h.buffer}static append(e,t){if(t===Er)return e;if(e===Er)return t;if(e===null)return e;if(t===null)return null;const i=Hr(e),s=Hr(t),o=s.length>>>1,r=new Uint32Array(i.length+s.length);r.set(i,0);let a=i.length;const l=i[i.length-2];for(let c=0;c<o;c++)r[a++]=s[c<<1]+l,r[a++]=s[(c<<1)+1];return r.buffer}static insert(e,t,i){if(e===null||e===Er)return e;const s=Hr(e),o=s.length>>>1;let r=Hi.findIndexInTokensArray(s,t);r>0&&s[r-1<<1]===t&&r--;for(let a=r;a<o;a++)s[a<<1]+=i;return e}}function Hr(n){return n instanceof Uint32Array?n:new Uint32Array(n)}class Qf{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,i){let s=null;if(t<this._len&&(s=this._lineTokens[t]),s!==null&&s!==Er)return new Hi(Hr(s),i,this._languageIdCodec);const o=new Uint32Array(2);return o[0]=i.length,o[1]=Ik(this._languageIdCodec.encodeLanguageId(e)),new Hi(o,i,this._languageIdCodec)}static _massageTokens(e,t,i){const s=i?Hr(i):null;if(t===0){let o=!1;if(s&&s.length>1&&(o=qn.getLanguageId(s[1])!==e),!o)return Er}if(!s||s.length===0){const o=new Uint32Array(2);return o[0]=t,o[1]=Ik(e),o.buffer}return s[s.length-2]=t,s.byteOffset===0&&s.byteLength===s.buffer.byteLength?s.buffer:s}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const i=[];for(let s=0;s<t;s++)i[s]=null;this._lineTokens=b_(this._lineTokens,e,i),this._len+=t}setTokens(e,t,i,s,o){const r=Qf._massageTokens(this._languageIdCodec.encodeLanguageId(e),i,s);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=r,o?!Qf._equals(a,r):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const i=Hr(e),s=Hr(t);if(i.length!==s.length)return!1;for(let o=0,r=i.length;o<r;o++)if(i[o]!==s[o])return!1;return!0}acceptEdit(e,t,i){this._acceptDeleteRange(e),this._acceptInsertText(new Y(e.startLineNumber,e.startColumn),t,i)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=zo.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=zo.deleteEnding(this._lineTokens[t],e.startColumn-1);const i=e.endLineNumber-1;let s=null;i<this._len&&(s=zo.deleteBeginning(this._lineTokens[i],e.endColumn-1)),this._lineTokens[t]=zo.append(this._lineTokens[t],s),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,i){if(t===0&&i===0)return;const s=e.lineNumber-1;if(!(s>=this._len)){if(t===0){this._lineTokens[s]=zo.insert(this._lineTokens[s],e.column-1,i);return}this._lineTokens[s]=zo.deleteEnding(this._lineTokens[s],e.column-1),this._lineTokens[s]=zo.insert(this._lineTokens[s],e.column-1,i),this._insertLines(e.lineNumber,t)}}setMultilineTokens(e,t){if(e.length===0)return{changes:[]};const i=[];for(let s=0,o=e.length;s<o;s++){const r=e[s];let a=0,l=0,c=!1;for(let d=r.startLineNumber;d<=r.endLineNumber;d++)c?(this.setTokens(t.getLanguageId(),d-1,t.getLineLength(d),r.getLineTokens(d),!1),l=d):this.setTokens(t.getLanguageId(),d-1,t.getLineLength(d),r.getLineTokens(d),!0)&&(c=!0,a=d,l=d);c&&i.push({fromLineNumber:a,toLineNumber:l})}return{changes:i}}}function Ik(n){return(n<<0|0|0|32768|2<<24|1024)>>>0}class uL{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let i=e;if(t.length>0){const o=t[0].getRange(),r=t[t.length-1].getRange();if(!o||!r)return e;i=e.plusRange(o).plusRange(r)}let s=null;for(let o=0,r=this._pieces.length;o<r;o++){const a=this._pieces[o];if(a.endLineNumber<i.startLineNumber)continue;if(a.startLineNumber>i.endLineNumber){s=s||{index:o};break}if(a.removeTokens(i),a.isEmpty()){this._pieces.splice(o,1),o--,r--;continue}if(a.endLineNumber<i.startLineNumber)continue;if(a.startLineNumber>i.endLineNumber){s=s||{index:o};continue}const[l,c]=a.split(i);if(l.isEmpty()){s=s||{index:o};continue}c.isEmpty()||(this._pieces.splice(o,1,l,c),o++,r++,s=s||{index:o})}return s=s||{index:this._pieces.length},t.length>0&&(this._pieces=b_(this._pieces,s.index,t)),i}isComplete(){return this._isComplete}addSparseTokens(e,t){if(t.getLineContent().length===0)return t;const i=this._pieces;if(i.length===0)return t;const s=uL._findFirstPieceWithLine(i,e),o=i[s].getLineTokens(e);if(!o)return t;const r=t.getCount(),a=o.getCount();let l=0;const c=[];let d=0,u=0;const h=(f,g)=>{f!==u&&(u=f,c[d++]=f,c[d++]=g)};for(let f=0;f<a;f++){const g=o.getStartCharacter(f),p=o.getEndCharacter(f),_=o.getMetadata(f),v=((_&1?2048:0)|(_&2?4096:0)|(_&4?8192:0)|(_&8?16384:0)|(_&16?16744448:0)|(_&32?4278190080:0))>>>0,b=~v>>>0;for(;l<r&&t.getEndOffset(l)<=g;)h(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<r&&t.getStartOffset(l)<g&&h(g,t.getMetadata(l));l<r&&t.getEndOffset(l)<p;)h(t.getEndOffset(l),t.getMetadata(l)&b|_&v),l++;if(l<r)h(p,t.getMetadata(l)&b|_&v),t.getEndOffset(l)===p&&l++;else{const w=Math.min(Math.max(0,l-1),r-1);h(p,t.getMetadata(w)&b|_&v)}}for(;l<r;)h(t.getEndOffset(l),t.getMetadata(l)),l++;return new Hi(new Uint32Array(c),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let i=0,s=e.length-1;for(;i<s;){let o=i+Math.floor((s-i)/2);if(e[o].endLineNumber<t)i=o+1;else if(e[o].startLineNumber>t)s=o-1;else{for(;o>i&&e[o-1].startLineNumber<=t&&t<=e[o-1].endLineNumber;)o--;return o}}return i}acceptEdit(e,t,i,s,o){for(const r of this._pieces)r.acceptEdit(e,t,i,s,o)}}class k0 extends T3{constructor(e,t,i,s,o,r){super(),this._languageService=e,this._languageConfigurationService=t,this._textModel=i,this._bracketPairsTextModelPart=s,this._languageId=o,this._attachedViews=r,this._semanticTokens=new uL(this._languageService.languageIdCodec),this._onDidChangeLanguage=this._register(new q),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new q),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new q),this.onDidChangeTokens=this._onDidChangeTokens.event,this.grammarTokens=this._register(new mK(this._languageService.languageIdCodec,this._textModel,()=>this._languageId,this._attachedViews)),this._register(this._languageConfigurationService.onDidChange(a=>{a.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})})),this._register(this.grammarTokens.onDidChangeTokens(a=>{this._emitModelTokensChangedEvent(a)})),this._register(this.grammarTokens.onDidChangeBackgroundTokenizationState(a=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()}))}handleDidChangeContent(e){if(e.isFlush)this._semanticTokens.flush();else if(!e.isEolChange)for(const t of e.changes){const[i,s,o]=Ou(t.text);this._semanticTokens.acceptEdit(t.range,i,s,o,t.text.length>0?t.text.charCodeAt(0):0)}this.grammarTokens.handleDidChangeContent(e)}handleDidChangeAttached(){this.grammarTokens.handleDidChangeAttached()}getLineTokens(e){this.validateLineNumber(e);const t=this.grammarTokens.getLineTokens(e);return this._semanticTokens.addSparseTokens(e,t)}_emitModelTokensChangedEvent(e){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}validateLineNumber(e){if(e<1||e>this._textModel.getLineCount())throw new Ai("Illegal value for lineNumber")}get hasTokens(){return this.grammarTokens.hasTokens}resetTokenization(){this.grammarTokens.resetTokenization()}get backgroundTokenizationState(){return this.grammarTokens.backgroundTokenizationState}forceTokenization(e){this.validateLineNumber(e),this.grammarTokens.forceTokenization(e)}isCheapToTokenize(e){return this.validateLineNumber(e),this.grammarTokens.isCheapToTokenize(e)}tokenizeIfCheap(e){this.validateLineNumber(e),this.grammarTokens.tokenizeIfCheap(e)}getTokenTypeIfInsertingCharacter(e,t,i){return this.grammarTokens.getTokenTypeIfInsertingCharacter(e,t,i)}tokenizeLineWithEdit(e,t,i){return this.grammarTokens.tokenizeLineWithEdit(e,t,i)}setSemanticTokens(e,t){this._semanticTokens.set(e,t),this._emitModelTokensChangedEvent({semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const i=this._textModel.validateRange(this._semanticTokens.setPartial(e,t));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:i.startLineNumber,toLineNumber:i.endLineNumber}]})}getWordAtPosition(e){this.assertNotDisposed();const t=this._textModel.validatePosition(e),i=this._textModel.getLineContent(t.lineNumber),s=this.getLineTokens(t.lineNumber),o=s.findTokenIndexAtOffset(t.column-1),[r,a]=k0._findLanguageBoundaries(s,o),l=Ef(t.column,this.getLanguageConfiguration(s.getLanguageId(o)).getWordDefinition(),i.substring(r,a),r);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(o>0&&r===t.column-1){const[c,d]=k0._findLanguageBoundaries(s,o-1),u=Ef(t.column,this.getLanguageConfiguration(s.getLanguageId(o-1)).getWordDefinition(),i.substring(c,d),c);if(u&&u.startColumn<=e.column&&e.column<=u.endColumn)return u}return null}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}static _findLanguageBoundaries(e,t){const i=e.getLanguageId(t);let s=0;for(let r=t;r>=0&&e.getLanguageId(r)===i;r--)s=e.getStartOffset(r);let o=e.getLineContent().length;for(let r=t,a=e.getCount();r<a&&e.getLanguageId(r)===i;r++)o=e.getEndOffset(r);return[s,o]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(e,t){const i=this._textModel.validatePosition(new Y(e,t)),s=this.getLineTokens(i.lineNumber);return s.getLanguageId(s.findTokenIndexAtOffset(i.column-1))}setLanguageId(e,t="api"){if(this._languageId===e)return;const i={oldLanguage:this._languageId,newLanguage:e,source:t};this._languageId=e,this._bracketPairsTextModelPart.handleDidChangeLanguage(i),this.grammarTokens.resetTokenization(),this._onDidChangeLanguage.fire(i),this._onDidChangeLanguageConfiguration.fire({})}}class mK extends oe{get backgroundTokenizationState(){return this._backgroundTokenizationState}constructor(e,t,i,s){super(),this._languageIdCodec=e,this._textModel=t,this.getLanguageId=i,this._tokenizer=null,this._defaultBackgroundTokenizer=null,this._backgroundTokenizer=this._register(new bu),this._tokens=new Qf(this._languageIdCodec),this._debugBackgroundTokenizer=this._register(new bu),this._backgroundTokenizationState=1,this._onDidChangeBackgroundTokenizationState=this._register(new q),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event,this._onDidChangeTokens=this._register(new q),this.onDidChangeTokens=this._onDidChangeTokens.event,this._attachedViewStates=this._register(new uS),this._register(hi.onDidChange(o=>{const r=this.getLanguageId();o.changedLanguages.indexOf(r)!==-1&&this.resetTokenization()})),this.resetTokenization(),this._register(s.onDidChangeVisibleRanges(({view:o,state:r})=>{if(r){let a=this._attachedViewStates.get(o);a||(a=new _K(()=>this.refreshRanges(a.lineRanges)),this._attachedViewStates.set(o,a)),a.handleStateChange(r)}else this._attachedViewStates.deleteAndDispose(o)}))}resetTokenization(e=!0){var t;this._tokens.flush(),(t=this._debugBackgroundTokens)===null||t===void 0||t.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new pC(this._textModel.getLineCount())),e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});const i=()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];const r=hi.get(this.getLanguageId());if(!r)return[null,null];let a;try{a=r.getInitialState()}catch(l){return $t(l),[null,null]}return[r,a]},[s,o]=i();if(s&&o?this._tokenizer=new hK(this._textModel.getLineCount(),s,this._textModel,this._languageIdCodec):this._tokenizer=null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){const r={setTokens:a=>{this.setTokens(a)},backgroundTokenizationFinished:()=>{if(this._backgroundTokenizationState===2)return;const a=2;this._backgroundTokenizationState=a,this._onDidChangeBackgroundTokenizationState.fire()},setEndState:(a,l)=>{var c;if(!this._tokenizer)return;const d=this._tokenizer.store.getFirstInvalidEndStateLineNumber();d!==null&&a>=d&&((c=this._tokenizer)===null||c===void 0||c.store.setEndState(a,l))}};s&&s.createBackgroundTokenizer&&!s.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=s.createBackgroundTokenizer(this._textModel,r)),this._backgroundTokenizer.value||(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new pK(this._tokenizer,r),this._defaultBackgroundTokenizer.handleChanges()),s!=null&&s.backgroundTokenizerShouldOnlyVerifyTokens&&s.createBackgroundTokenizer?(this._debugBackgroundTokens=new Qf(this._languageIdCodec),this._debugBackgroundStates=new pC(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=s.createBackgroundTokenizer(this._textModel,{setTokens:a=>{var l;(l=this._debugBackgroundTokens)===null||l===void 0||l.setMultilineTokens(a,this._textModel)},backgroundTokenizationFinished(){},setEndState:(a,l)=>{var c;(c=this._debugBackgroundStates)===null||c===void 0||c.setEndState(a,l)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){var e;(e=this._defaultBackgroundTokenizer)===null||e===void 0||e.handleChanges()}handleDidChangeContent(e){var t,i,s;if(e.isFlush)this.resetTokenization(!1);else if(!e.isEolChange){for(const o of e.changes){const[r,a]=Ou(o.text);this._tokens.acceptEdit(o.range,r,a),(t=this._debugBackgroundTokens)===null||t===void 0||t.acceptEdit(o.range,r,a)}(i=this._debugBackgroundStates)===null||i===void 0||i.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),(s=this._defaultBackgroundTokenizer)===null||s===void 0||s.handleChanges()}}setTokens(e){const{changes:t}=this._tokens.setMultilineTokens(e,this._textModel);return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}refreshAllVisibleLineTokens(){const e=it.joinMany([...this._attachedViewStates].map(([t,i])=>i.lineRanges));this.refreshRanges(e)}refreshRanges(e){for(const t of e)this.refreshRange(t.startLineNumber,t.endLineNumberExclusive-1)}refreshRange(e,t){var i,s;if(!this._tokenizer)return;e=Math.max(1,Math.min(this._textModel.getLineCount(),e)),t=Math.min(this._textModel.getLineCount(),t);const o=new gC,{heuristicTokens:r}=this._tokenizer.tokenizeHeuristically(o,e,t),a=this.setTokens(o.finalize());if(r)for(const l of a.changes)(i=this._backgroundTokenizer.value)===null||i===void 0||i.requestTokens(l.fromLineNumber,l.toLineNumber+1);(s=this._defaultBackgroundTokenizer)===null||s===void 0||s.checkFinished()}forceTokenization(e){var t,i;const s=new gC;(t=this._tokenizer)===null||t===void 0||t.updateTokensUntilLine(s,e),this.setTokens(s.finalize()),(i=this._defaultBackgroundTokenizer)===null||i===void 0||i.checkFinished()}isCheapToTokenize(e){return this._tokenizer?this._tokenizer.isCheapToTokenize(e):!0}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}getLineTokens(e){var t;const i=this._textModel.getLineContent(e),s=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,i);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){const o=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,i);!s.equals(o)&&(!((t=this._debugBackgroundTokenizer.value)===null||t===void 0)&&t.reportMismatchingTokens)&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return s}getTokenTypeIfInsertingCharacter(e,t,i){if(!this._tokenizer)return 0;const s=this._textModel.validatePosition(new Y(e,t));return this.forceTokenization(s.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(s,i)}tokenizeLineWithEdit(e,t,i){if(!this._tokenizer)return null;const s=this._textModel.validatePosition(e);return this.forceTokenization(s.lineNumber),this._tokenizer.tokenizeLineWithEdit(s,t,i)}get hasTokens(){return this._tokens.hasTokens}}class _K extends oe{get lineRanges(){return this._lineRanges}constructor(e){super(),this._refreshTokens=e,this.runner=this._register(new Sn(()=>this.update(),50)),this._computedLineRanges=[],this._lineRanges=[]}update(){An(this._computedLineRanges,this._lineRanges,(e,t)=>e.equals(t))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(e){this._lineRanges=e.visibleLineRanges,e.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}}class bK{constructor(){this.changeType=1}}class Mo{static applyInjectedText(e,t){if(!t||t.length===0)return e;let i="",s=0;for(const o of t)i+=e.substring(s,o.column-1),s=o.column-1,i+=o.options.content;return i+=e.substring(s),i}static fromDecorations(e){const t=[];for(const i of e)i.options.before&&i.options.before.content.length>0&&t.push(new Mo(i.ownerId,i.range.startLineNumber,i.range.startColumn,i.options.before,0)),i.options.after&&i.options.after.content.length>0&&t.push(new Mo(i.ownerId,i.range.endLineNumber,i.range.endColumn,i.options.after,1));return t.sort((i,s)=>i.lineNumber===s.lineNumber?i.column===s.column?i.order-s.order:i.column-s.column:i.lineNumber-s.lineNumber),t}constructor(e,t,i,s,o){this.ownerId=e,this.lineNumber=t,this.column=i,this.options=s,this.order=o}}class Nk{constructor(e,t,i){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=i}}class vK{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class wK{constructor(e,t,i,s){this.changeType=4,this.injectedTexts=s,this.fromLineNumber=e,this.toLineNumber=t,this.detail=i}}class CK{constructor(){this.changeType=5}}class ru{constructor(e,t,i,s){this.changes=e,this.versionId=t,this.isUndoing=i,this.isRedoing=s,this.resultingSelection=null}containsEvent(e){for(let t=0,i=this.changes.length;t<i;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const i=[].concat(e.changes).concat(t.changes),s=t.versionId,o=e.isUndoing||t.isUndoing,r=e.isRedoing||t.isRedoing;return new ru(i,s,o,r)}}class Z3{constructor(e){this.changes=e}}class mc{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=ru.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),i=mc._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new mc(t,i)}static _mergeChangeEvents(e,t){const i=[].concat(e.changes).concat(t.changes),s=t.eol,o=t.versionId,r=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush,c=e.isEolChange&&t.isEolChange;return{changes:i,eol:s,isEolChange:c,versionId:o,isUndoing:r,isRedoing:a,isFlush:l}}}const hL=ct("undoRedoService");class Y3{constructor(e,t){this.resource=e,this.elements=t}}class Fu{constructor(){this.id=Fu._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}Fu._ID=0;Fu.None=new Fu;class Jo{constructor(){this.id=Jo._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}Jo._ID=0;Jo.None=new Jo;var yK=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Ab=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},gd;function SK(n){const e=new G3;return e.acceptChunk(n),e.finish()}function LK(n){const e=new G3;let t;for(;typeof(t=n.read())=="string";)e.acceptChunk(t);return e.finish()}function Tk(n,e){let t;return typeof n=="string"?t=SK(n):cB(n)?t=LK(n):t=n,t.create(e)}let Op=0;const xK=999,DK=1e4;class kK{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;const e=[];let t=0,i=0;do{const s=this._source.read();if(s===null)return this._eos=!0,t===0?null:e.join("");if(s.length>0&&(e[t++]=s,i+=s.length),i>=64*1024)return e.join("")}while(!0)}}const Lh=()=>{throw new Error("Invalid change accessor")};let Nc=gd=class extends oe{static resolveOptions(e,t){if(t.detectIndentation){const i=Ck(e,t.tabSize,t.insertSpaces);return new gm({tabSize:i.tabSize,indentSize:"tabSize",insertSpaces:i.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new gm(t)}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}onDidChangeContentOrInjectedText(e){return lr(this._eventEmitter.fastEvent(t=>e(t)),this._onDidChangeInjectedText.event(t=>e(t)))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}constructor(e,t,i,s=null,o,r,a){super(),this._undoRedoService=o,this._languageService=r,this._languageConfigurationService=a,this._onWillDispose=this._register(new q),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new AK(f=>this.handleBeforeFireDecorationsChangedEvent(f))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new q),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new q),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new q),this._eventEmitter=this._register(new MK),this._languageSelectionListener=this._register(new bu),this._deltaDecorationCallCnt=0,this._attachedViews=new RK,Op++,this.id="$model"+Op,this.isForSimpleWidget=i.isForSimpleWidget,typeof s>"u"||s===null?this._associatedResource=nt.parse("inmemory://model/"+Op):this._associatedResource=s,this._attachedEditorCount=0;const{textBuffer:l,disposable:c}=Tk(e,i.defaultEOL);this._buffer=l,this._bufferDisposable=c,this._options=gd.resolveOptions(this._buffer,i);const d=typeof t=="string"?t:t.languageId;typeof t!="string"&&(this._languageSelectionListener.value=t.onDidChange(()=>this._setLanguage(t.languageId))),this._bracketPairs=this._register(new Nj(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new Cq(this,this._languageConfigurationService)),this._decorationProvider=this._register(new Aj(this)),this._tokenizationTextModelPart=new k0(this._languageService,this._languageConfigurationService,this,this._bracketPairs,d,this._attachedViews);const u=this._buffer.getLineCount(),h=this._buffer.getValueLengthInRange(new $(1,1,u,this._buffer.getLineLength(u)+1),0);i.largeFileOptimizations?this._isTooLargeForTokenization=h>gd.LARGE_FILE_SIZE_THRESHOLD||u>gd.LARGE_FILE_LINE_COUNT_THRESHOLD:this._isTooLargeForTokenization=!1,this._isTooLargeForSyncing=h>gd._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=TT(Op),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new Ak,this._commandManager=new aL(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()})),this._languageService.requestRichLanguageFeatures(d)}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;const e=new ou([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=oe.None}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(e,t){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(t),this._bracketPairs.handleDidChangeContent(t),this._eventEmitter.fire(new mc(e,t)))}setValue(e){if(this._assertNotDisposed(),e==null)throw C_();const{textBuffer:t,disposable:i}=Tk(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,i)}_createContentChanged2(e,t,i,s,o,r,a,l){return{changes:[{range:e,rangeOffset:t,rangeLength:i,text:s}],eol:this._buffer.getEOL(),isEolChange:l,versionId:this.getVersionId(),isUndoing:o,isRedoing:r,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const i=this.getFullModelRange(),s=this.getValueLengthInRange(i),o=this.getLineCount(),r=this.getLineMaxColumn(o);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new Ak,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new ru([new bK],this._versionId,!1,!1),this._createContentChanged2(new $(1,1,o,r),0,s,this.getValue(),!1,!1,!0,!1))}setEOL(e){this._assertNotDisposed();const t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const i=this.getFullModelRange(),s=this.getValueLengthInRange(i),o=this.getLineCount(),r=this.getLineMaxColumn(o);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new ru([new CK],this._versionId,!1,!1),this._createContentChanged2(new $(1,1,o,r),0,s,this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let i=0,s=t.length;i<s;i++){const o=t[i],r=o.range,a=o.cachedAbsoluteStart-o.start,l=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),c=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);o.cachedAbsoluteStart=l,o.cachedAbsoluteEnd=c,o.cachedVersionId=e,o.start=l-a,o.end=c-a,pl(o)}}onBeforeAttached(){return this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(e){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(e)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const i=this._buffer.getLineCount();for(let s=1;s<=i;s++){const o=this._buffer.getLineLength(s);o>=DK?t+=o:e+=o}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();const t=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,i=typeof e.indentSize<"u"?e.indentSize:this._options.originalIndentSize,s=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,o=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,r=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new gm({tabSize:t,indentSize:i,insertSpaces:s,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:o,bracketPairColorizationOptions:r});if(this._options.equals(a))return;const l=this._options.createChangeEvent(a);this._options=a,this._bracketPairs.handleDidChangeOptions(l),this._decorationProvider.handleDidChangeOptions(l),this._onDidChangeOptions.fire(l)}detectIndentation(e,t){this._assertNotDisposed();const i=Ck(this._buffer,t,e);this.updateOptions({insertSpaces:i.insertSpaces,tabSize:i.tabSize,indentSize:i.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),x3(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(IT.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(i=>({range:i.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();const t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();const t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){this._assertNotDisposed();const i=this.getFullModelRange(),s=this.getValueInRange(i,e);return t?this._buffer.getBOM()+s:s}createSnapshot(e=!1){return new kK(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const i=this.getFullModelRange(),s=this.getValueLengthInRange(i,e);return t?this._buffer.getBOM().length+s:s}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Ai("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Ai("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){return this._assertNotDisposed(),this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Ai("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Ai("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Ai("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),i=e.startLineNumber,s=e.startColumn;let o=Math.floor(typeof i=="number"&&!isNaN(i)?i:1),r=Math.floor(typeof s=="number"&&!isNaN(s)?s:1);if(o<1)o=1,r=1;else if(o>t)o=t,r=this.getLineMaxColumn(o);else if(r<=1)r=1;else{const u=this.getLineMaxColumn(o);r>=u&&(r=u)}const a=e.endLineNumber,l=e.endColumn;let c=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),d=Math.floor(typeof l=="number"&&!isNaN(l)?l:1);if(c<1)c=1,d=1;else if(c>t)c=t,d=this.getLineMaxColumn(c);else if(d<=1)d=1;else{const u=this.getLineMaxColumn(c);d>=u&&(d=u)}return i===o&&s===r&&a===c&&l===d&&e instanceof $&&!(e instanceof at)?e:new $(o,r,c,d)}_isValidPosition(e,t,i){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const s=this._buffer.getLineCount();if(e>s)return!1;if(t===1)return!0;const o=this.getLineMaxColumn(e);if(t>o)return!1;if(i===1){const r=this._buffer.getLineCharCode(e,t-2);if(Ni(r))return!1}return!0}_validatePosition(e,t,i){const s=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),o=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),r=this._buffer.getLineCount();if(s<1)return new Y(1,1);if(s>r)return new Y(r,this.getLineMaxColumn(r));if(o<=1)return new Y(s,1);const a=this.getLineMaxColumn(s);if(o>=a)return new Y(s,a);if(i===1){const l=this._buffer.getLineCharCode(s,o-2);if(Ni(l))return new Y(s,o-1)}return new Y(s,o)}validatePosition(e){return this._assertNotDisposed(),e instanceof Y&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const i=e.startLineNumber,s=e.startColumn,o=e.endLineNumber,r=e.endColumn;if(!this._isValidPosition(i,s,0)||!this._isValidPosition(o,r,0))return!1;if(t===1){const a=s>1?this._buffer.getLineCharCode(i,s-2):0,l=r>1&&r<=this._buffer.getLineLength(o)?this._buffer.getLineCharCode(o,r-2):0,c=Ni(a),d=Ni(l);return!c&&!d}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof $&&!(e instanceof at)&&this._isValidRange(e,1))return e;const i=this._validatePosition(e.startLineNumber,e.startColumn,0),s=this._validatePosition(e.endLineNumber,e.endColumn,0),o=i.lineNumber,r=i.column,a=s.lineNumber,l=s.column;{const c=r>1?this._buffer.getLineCharCode(o,r-2):0,d=l>1&&l<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,l-2):0,u=Ni(c),h=Ni(d);return!u&&!h?new $(o,r,a,l):o===a&&r===l?new $(o,r-1,a,l-1):u&&h?new $(o,r-1,a,l+1):u?new $(o,r-1,a,l):new $(o,r,a,l+1)}}modifyPosition(e,t){this._assertNotDisposed();const i=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,i)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new $(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,i,s){return this._buffer.findMatchesLineByLine(e,t,i,s)}findMatches(e,t,i,s,o,r,a=xK){this._assertNotDisposed();let l=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(u=>$.isIRange(u))&&(l=t.map(u=>this.validateRange(u)))),l===null&&(l=[this.getFullModelRange()]),l=l.sort((u,h)=>u.startLineNumber-h.startLineNumber||u.startColumn-h.startColumn);const c=[];c.push(l.reduce((u,h)=>$.areIntersecting(u,h)?u.plusRange(h):(c.push(u),h)));let d;if(!i&&e.indexOf(`
`)<0){const h=new sd(e,i,s,o).parseSearchRequest();if(!h)return[];d=f=>this.findMatchesLineByLine(f,h,r,a)}else d=u=>_p.findMatches(this,new sd(e,i,s,o),u,r,a);return c.map(d).reduce((u,h)=>u.concat(h),[])}findNextMatch(e,t,i,s,o,r){this._assertNotDisposed();const a=this.validatePosition(t);if(!i&&e.indexOf(`
`)<0){const c=new sd(e,i,s,o).parseSearchRequest();if(!c)return null;const d=this.getLineCount();let u=new $(a.lineNumber,a.column,d,this.getLineMaxColumn(d)),h=this.findMatchesLineByLine(u,c,r,1);return _p.findNextMatch(this,new sd(e,i,s,o),a,r),h.length>0||(u=new $(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),h=this.findMatchesLineByLine(u,c,r,1),h.length>0)?h[0]:null}return _p.findNextMatch(this,new sd(e,i,s,o),a,r)}findPreviousMatch(e,t,i,s,o,r){this._assertNotDisposed();const a=this.validatePosition(t);return _p.findPreviousMatch(this,new sd(e,i,s,o),a,r)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof K1?e:new K1(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let i=0,s=e.length;i<s;i++)t[i]=this._validateEditOperation(e[i]);return t}pushEditOperations(e,t,i,s){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),i,s)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,i,s){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const o=t.map(a=>({range:this.validateRange(a.range),text:a.text}));let r=!0;if(e)for(let a=0,l=e.length;a<l;a++){const c=e[a];let d=!1;for(let u=0,h=o.length;u<h;u++){const f=o[u].range,g=f.startLineNumber>c.endLineNumber,p=c.startLineNumber>f.endLineNumber;if(!g&&!p){d=!0;break}}if(!d){r=!1;break}}if(r)for(let a=0,l=this._trimAutoWhitespaceLines.length;a<l;a++){const c=this._trimAutoWhitespaceLines[a],d=this.getLineMaxColumn(c);let u=!0;for(let h=0,f=o.length;h<f;h++){const g=o[h].range,p=o[h].text;if(!(c<g.startLineNumber||c>g.endLineNumber)&&!(c===g.startLineNumber&&g.startColumn===d&&g.isEmpty()&&p&&p.length>0&&p.charAt(0)===`
`)&&!(c===g.startLineNumber&&g.startColumn===1&&g.isEmpty()&&p&&p.length>0&&p.charAt(p.length-1)===`
`)){u=!1;break}}if(u){const h=new $(c,1,c,d);t.push(new K1(null,h,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,i,s)}_applyUndo(e,t,i,s){const o=e.map(r=>{const a=this.getPositionAt(r.newPosition),l=this.getPositionAt(r.newEnd);return{range:new $(a.lineNumber,a.column,l.lineNumber,l.column),text:r.oldText}});this._applyUndoRedoEdits(o,t,!0,!1,i,s)}_applyRedo(e,t,i,s){const o=e.map(r=>{const a=this.getPositionAt(r.oldPosition),l=this.getPositionAt(r.oldEnd);return{range:new $(a.lineNumber,a.column,l.lineNumber,l.column),text:r.newText}});this._applyUndoRedoEdits(o,t,!1,!0,i,s)}_applyUndoRedoEdits(e,t,i,s,o,r){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=i,this._isRedoing=s,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(o)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(r),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const i=this._validateEditOperations(e);return this._doApplyEdits(i,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const i=this._buffer.getLineCount(),s=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),o=this._buffer.getLineCount(),r=s.changes;if(this._trimAutoWhitespaceLines=s.trimAutoWhitespaceLineNumbers,r.length!==0){for(let c=0,d=r.length;c<d;c++){const u=r[c];this._decorationsTree.acceptReplace(u.rangeOffset,u.rangeLength,u.text.length,u.forceMoveMarkers)}const a=[];this._increaseVersionId();let l=i;for(let c=0,d=r.length;c<d;c++){const u=r[c],[h]=Ou(u.text);this._onDidChangeDecorations.fire();const f=u.range.startLineNumber,g=u.range.endLineNumber,p=g-f,_=h,v=Math.min(p,_),b=_-p,w=o-l-b+f,C=w,S=w+_,k=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new Y(C,1)),this.getOffsetAt(new Y(S,this.getLineMaxColumn(S))),0),L=Mo.fromDecorations(k),x=new ea(L);for(let I=v;I>=0;I--){const A=f+I,T=w+I;x.takeFromEndWhile(R=>R.lineNumber>T);const O=x.takeFromEndWhile(R=>R.lineNumber===T);a.push(new Nk(A,this.getLineContent(T),O))}if(v<p){const I=f+v;a.push(new vK(I+1,g))}if(v<_){const I=new ea(L),A=f+v,T=_-v,O=o-l-T+A+1,R=[],X=[];for(let ie=0;ie<T;ie++){const ae=O+ie;X[ie]=this.getLineContent(ae),I.takeWhile(ue=>ue.lineNumber<ae),R[ie]=I.takeWhile(ue=>ue.lineNumber===ae)}a.push(new wK(A+1,f+_,X,R))}l+=b}this._emitContentChangedEvent(new ru(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:r,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return s.reverseEdits===null?void 0:s.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;const i=Array.from(e).map(s=>new Nk(s,this.getLineContent(s),this._getInjectedTextInLine(s)));this._onDidChangeInjectedText.fire(new Z3(i))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){const i={addDecoration:(o,r)=>this._deltaDecorationsImpl(e,[],[{range:o,options:r}])[0],changeDecoration:(o,r)=>{this._changeDecorationImpl(o,r)},changeDecorationOptions:(o,r)=>{this._changeDecorationOptionsImpl(o,Rk(r))},removeDecoration:o=>{this._deltaDecorationsImpl(e,[o],[])},deltaDecorations:(o,r)=>o.length===0&&r.length===0?[]:this._deltaDecorationsImpl(e,o,r)};let s=null;try{s=t(i)}catch(o){$t(o)}return i.addDecoration=Lh,i.changeDecoration=Lh,i.changeDecorationOptions=Lh,i.removeDecoration=Lh,i.deltaDecorations=Lh,s}deltaDecorations(e,t,i=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),$t(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(i,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,i){const s=e?this._decorations[e]:null;if(!s)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:Mk[i]}],!0)[0]:null;if(!t)return this._decorationsTree.delete(s),delete this._decorations[s.id],null;const o=this._validateRangeRelaxedNoAllocations(t),r=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),a=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);return this._decorationsTree.delete(s),s.reset(this.getVersionId(),r,a,o),s.setOptions(Mk[i]),this._decorationsTree.insert(s),s.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let i=0,s=t.length;i<s;i++){const o=t[i];this._decorationsTree.delete(o),delete this._decorations[o.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,i=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,i)}getLinesDecorations(e,t,i=0,s=!1,o=!1){const r=this.getLineCount(),a=Math.min(r,Math.max(1,e)),l=Math.min(r,Math.max(1,t)),c=this.getLineMaxColumn(l),d=new $(a,1,l,c),u=this._getDecorationsInRange(d,i,s,o);return Zx(u,this._decorationProvider.getDecorationsInRange(d,i,s)),u}getDecorationsInRange(e,t=0,i=!1,s=!1,o=!1){const r=this.validateRange(e),a=this._getDecorationsInRange(r,t,i,o);return Zx(a,this._decorationProvider.getDecorationsInRange(r,t,i,s)),a}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0,!1)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),i=t+this._buffer.getLineLength(e),s=this._decorationsTree.getInjectedTextInInterval(this,t,i,0);return Mo.fromDecorations(s).filter(o=>o.lineNumber===e)}getAllDecorations(e=0,t=!1){let i=this._decorationsTree.getAll(this,e,t,!1,!1);return i=i.concat(this._decorationProvider.getAllDecorations(e,t)),i}getAllMarginDecorations(e=0){return this._decorationsTree.getAll(this,e,!1,!1,!0)}_getDecorationsInRange(e,t,i,s){const o=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),r=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,o,r,t,i,s)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const i=this._decorations[e];if(!i)return;if(i.options.after){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(i.options.before){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}const s=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),r=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);this._decorationsTree.delete(i),i.reset(this.getVersionId(),o,r,s),this._decorationsTree.insert(i),this._onDidChangeDecorations.checkAffectedAndFire(i.options),i.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.endLineNumber),i.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.startLineNumber)}_changeDecorationOptionsImpl(e,t){const i=this._decorations[e];if(!i)return;const s=!!(i.options.overviewRuler&&i.options.overviewRuler.color),o=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(i.options),this._onDidChangeDecorations.checkAffectedAndFire(t),i.options.after||t.after){const r=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.endLineNumber)}if(i.options.before||t.before){const r=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.startLineNumber)}s!==o?(this._decorationsTree.delete(i),i.setOptions(t),this._decorationsTree.insert(i)):i.setOptions(t)}_deltaDecorationsImpl(e,t,i,s=!1){const o=this.getVersionId(),r=t.length;let a=0;const l=i.length;let c=0;this._onDidChangeDecorations.beginDeferredEmit();try{const d=new Array(l);for(;a<r||c<l;){let u=null;if(a<r){do u=this._decorations[t[a++]];while(!u&&a<r);if(u){if(u.options.after){const h=this._decorationsTree.getNodeRange(this,u);this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.endLineNumber)}if(u.options.before){const h=this._decorationsTree.getNodeRange(this,u);this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.startLineNumber)}this._decorationsTree.delete(u),s||this._onDidChangeDecorations.checkAffectedAndFire(u.options)}}if(c<l){if(!u){const v=++this._lastDecorationId,b=`${this._instanceId};${v}`;u=new U3(b,0,0),this._decorations[b]=u}const h=i[c],f=this._validateRangeRelaxedNoAllocations(h.range),g=Rk(h.options),p=this._buffer.getOffsetAt(f.startLineNumber,f.startColumn),_=this._buffer.getOffsetAt(f.endLineNumber,f.endColumn);u.ownerId=e,u.reset(o,p,_,f),u.setOptions(g),u.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.endLineNumber),u.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.startLineNumber),s||this._onDidChangeDecorations.checkAffectedAndFire(g),this._decorationsTree.insert(u),d[c]=u.id,c++}else u&&delete this._decorations[u.id]}return d}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(e,t){typeof e=="string"?(this._languageSelectionListener.clear(),this._setLanguage(e,t)):(this._languageSelectionListener.value=e.onDidChange(()=>this._setLanguage(e.languageId,t)),this._setLanguage(e.languageId,t))}_setLanguage(e,t){this.tokenization.setLanguageId(e,t),this._languageService.requestRichLanguageFeatures(e)}getLanguageIdAtPosition(e,t){return this.tokenization.getLanguageIdAtPosition(e,t)}getWordAtPosition(e){return this._tokenizationTextModelPart.getWordAtPosition(e)}getWordUntilPosition(e){return this._tokenizationTextModelPart.getWordUntilPosition(e)}normalizePosition(e,t){return e}getLineIndentColumn(e){return EK(this.getLineContent(e))+1}};Nc._MODEL_SYNC_LIMIT=50*1024*1024;Nc.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024;Nc.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3;Nc.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Xi.tabSize,indentSize:Xi.indentSize,insertSpaces:Xi.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Xi.trimAutoWhitespace,largeFileOptimizations:Xi.largeFileOptimizations,bracketPairColorizationOptions:Xi.bracketPairColorizationOptions};Nc=gd=yK([Ab(4,hL),Ab(5,Mi),Ab(6,mr)],Nc);function EK(n){let e=0;for(const t of n)if(t===" "||t==="	")e++;else break;return e}function Mb(n){return!!(n.options.overviewRuler&&n.options.overviewRuler.color)}function Rb(n){return!!n.options.after||!!n.options.before}class Ak{constructor(){this._decorationsTree0=new Ib,this._decorationsTree1=new Ib,this._injectedTextDecorationsTree=new Ib}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1,!1)}_ensureNodesHaveRanges(e,t){for(const i of t)i.range===null&&(i.range=e.getRangeAt(i.cachedAbsoluteStart,i.cachedAbsoluteEnd));return t}getAllInInterval(e,t,i,s,o,r){const a=e.getVersionId(),l=this._intervalSearch(t,i,s,o,a,r);return this._ensureNodesHaveRanges(e,l)}_intervalSearch(e,t,i,s,o,r){const a=this._decorationsTree0.intervalSearch(e,t,i,s,o,r),l=this._decorationsTree1.intervalSearch(e,t,i,s,o,r),c=this._injectedTextDecorationsTree.intervalSearch(e,t,i,s,o,r);return a.concat(l).concat(c)}getInjectedTextInInterval(e,t,i,s){const o=e.getVersionId(),r=this._injectedTextDecorationsTree.intervalSearch(t,i,s,!1,o,!1);return this._ensureNodesHaveRanges(e,r).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){const i=e.getVersionId(),s=this._injectedTextDecorationsTree.search(t,!1,i,!1);return this._ensureNodesHaveRanges(e,s).filter(o=>o.options.showIfCollapsed||!o.range.isEmpty())}getAll(e,t,i,s,o){const r=e.getVersionId(),a=this._search(t,i,s,r,o);return this._ensureNodesHaveRanges(e,a)}_search(e,t,i,s,o){if(i)return this._decorationsTree1.search(e,t,s,o);{const r=this._decorationsTree0.search(e,t,s,o),a=this._decorationsTree1.search(e,t,s,o),l=this._injectedTextDecorationsTree.search(e,t,s,o);return r.concat(a).concat(l)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),i=this._decorationsTree1.collectNodesFromOwner(e),s=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(i).concat(s)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),i=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(i)}insert(e){Rb(e)?this._injectedTextDecorationsTree.insert(e):Mb(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){Rb(e)?this._injectedTextDecorationsTree.delete(e):Mb(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const i=e.getVersionId();return t.cachedVersionId!==i&&this._resolveNode(t,i),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){Rb(e)?this._injectedTextDecorationsTree.resolveNode(e,t):Mb(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,i,s){this._decorationsTree0.acceptReplace(e,t,i,s),this._decorationsTree1.acceptReplace(e,t,i,s),this._injectedTextDecorationsTree.acceptReplace(e,t,i,s)}}function Sr(n){return n.replace(/[^a-z0-9\-_]/gi," ")}class X3{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class IK extends X3{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:e0.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;const i=e?t.getColor(e.id):null;return i?i.toString():""}}class NK{constructor(e){var t;this.position=(t=e==null?void 0:e.position)!==null&&t!==void 0?t:Zd.Left}}class TK extends X3{constructor(e){super(e),this.position=e.position}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?J.fromHex(e):t.getColor(e.id)}}class Jf{static from(e){return e instanceof Jf?e:new Jf(e)}constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}}class Ft{static register(e){return new Ft(e)}static createDynamic(e){return new Ft(e)}constructor(e){var t,i,s,o,r,a;this.description=e.description,this.blockClassName=e.blockClassName?Sr(e.blockClassName):null,this.blockDoesNotCollapse=(t=e.blockDoesNotCollapse)!==null&&t!==void 0?t:null,this.blockIsAfterEnd=(i=e.blockIsAfterEnd)!==null&&i!==void 0?i:null,this.blockPadding=(s=e.blockPadding)!==null&&s!==void 0?s:null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?Sr(e.className):null,this.shouldFillLineOnLineBreak=(o=e.shouldFillLineOnLineBreak)!==null&&o!==void 0?o:null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new IK(e.overviewRuler):null,this.minimap=e.minimap?new TK(e.minimap):null,this.glyphMargin=e.glyphMarginClassName?new NK(e.glyphMargin):null,this.glyphMarginClassName=e.glyphMarginClassName?Sr(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?Sr(e.linesDecorationsClassName):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?Sr(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?Sr(e.marginClassName):null,this.inlineClassName=e.inlineClassName?Sr(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?Sr(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?Sr(e.afterContentClassName):null,this.after=e.after?Jf.from(e.after):null,this.before=e.before?Jf.from(e.before):null,this.hideInCommentTokens=(r=e.hideInCommentTokens)!==null&&r!==void 0?r:!1,this.hideInStringTokens=(a=e.hideInStringTokens)!==null&&a!==void 0?a:!1}}Ft.EMPTY=Ft.register({description:"empty"});const Mk=[Ft.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),Ft.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),Ft.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),Ft.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function Rk(n){return n instanceof Ft?n:Ft.createDynamic(n)}class AK extends oe{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new q),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;this._deferredCnt--,this._deferredCnt===0&&(this._shouldFireDeferred&&this.doFire(),(e=this._affectedInjectedTextLines)===null||e===void 0||e.clear(),this._affectedInjectedTextLines=null)}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){this._affectsMinimap||(this._affectsMinimap=!!(e.minimap&&e.minimap.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!(e.overviewRuler&&e.overviewRuler.color)),this._affectsGlyphMargin||(this._affectsGlyphMargin=!!e.glyphMarginClassName),this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){this._deferredCnt===0?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines);const e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(e)}}class MK extends oe{constructor(){super(),this._fastEmitter=this._register(new q),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new q),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}class RK{constructor(){this._onDidChangeVisibleRanges=new q,this.onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event,this._views=new Set}attachView(){const e=new PK(t=>{this._onDidChangeVisibleRanges.fire({view:e,state:t})});return this._views.add(e),e}detachView(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0})}}class PK{constructor(e){this.handleStateChange=e}setVisibleLines(e,t){const i=e.map(s=>new it(s.startLineNumber,s.endLineNumber+1));this.handleStateChange({visibleLineRanges:i,stabilized:t})}}class E0{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new Bi(new $(1,1,1,1),0,0,new Y(1,1),0),new Bi(new $(1,1,1,1),0,0,new Y(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new Xe(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.isEmpty()&&!t.isEmpty()?at.fromRange(t.collapseToEnd(),this.modelState.selection.getDirection()):at.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,i){this._setState(e,t,i)}static _validatePositionWithCache(e,t,i,s){return t.equals(i)?s:e.normalizePosition(t,2)}static _validateViewState(e,t){const i=t.position,s=t.selectionStart.getStartPosition(),o=t.selectionStart.getEndPosition(),r=e.normalizePosition(i,2),a=this._validatePositionWithCache(e,s,i,r),l=this._validatePositionWithCache(e,o,s,a);return i.equals(r)&&s.equals(a)&&o.equals(l)?t:new Bi($.fromPositions(a,l),t.selectionStartKind,t.selectionStartLeftoverVisibleColumns+s.column-a.column,r,t.leftoverVisibleColumns+i.column-r.column)}_setState(e,t,i){if(i&&(i=E0._validateViewState(e.viewModel,i)),t){const s=e.model.validateRange(t.selectionStart),o=t.selectionStart.equalsRange(s)?t.selectionStartLeftoverVisibleColumns:0,r=e.model.validatePosition(t.position),a=t.position.equals(r)?t.leftoverVisibleColumns:0;t=new Bi(s,t.selectionStartKind,o,r,a)}else{if(!i)return;const s=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(i.selectionStart)),o=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(i.position));t=new Bi(s,i.selectionStartKind,i.selectionStartLeftoverVisibleColumns,o,i.leftoverVisibleColumns)}if(i){const s=e.coordinatesConverter.validateViewRange(i.selectionStart,t.selectionStart),o=e.coordinatesConverter.validateViewPosition(i.position,t.position);i=new Bi(s,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,o,t.leftoverVisibleColumns)}else{const s=e.coordinatesConverter.convertModelPositionToViewPosition(new Y(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),o=e.coordinatesConverter.convertModelPositionToViewPosition(new Y(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),r=new $(s.lineNumber,s.column,o.lineNumber,o.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);i=new Bi(r,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=i,this._updateTrackedRange(e)}}class Pk{constructor(e){this.context=e,this.cursors=[new E0(e)],this.lastAddedCursorIndex=0}dispose(){for(const e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(const e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(const e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(const e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(e=>e.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(e=>e.asCursorState())}getViewPositions(){return this.cursors.map(e=>e.viewState.position)}getTopMostViewPosition(){return D7(this.cursors,Eo(e=>e.viewState.position,Y.compare)).viewState.position}getBottomMostViewPosition(){return x7(this.cursors,Eo(e=>e.viewState.position,Y.compare)).viewState.position}getSelections(){return this.cursors.map(e=>e.modelState.selection)}getViewSelections(){return this.cursors.map(e=>e.viewState.selection)}setSelections(e){this.setStates(Xe.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){e!==null&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.cursors.length-1,i=e.length;if(t<i){const s=i-t;for(let o=0;o<s;o++)this._addSecondaryCursor()}else if(t>i){const s=t-i;for(let o=0;o<s;o++)this._removeSecondaryCursor(this.cursors.length-2)}for(let s=0;s<i;s++)this.cursors[s+1].setState(this.context,e[s].modelState,e[s].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new E0(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return this.cursors.length===1||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(this.cursors.length===1)return;const e=this.cursors.slice(0),t=[];for(let i=0,s=e.length;i<s;i++)t.push({index:i,selection:e[i].modelState.selection});t.sort(Eo(i=>i.selection,$.compareRangesUsingStarts));for(let i=0;i<t.length-1;i++){const s=t[i],o=t[i+1],r=s.selection,a=o.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||r.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(r.getEndPosition()):l=a.getStartPosition().isBefore(r.getEndPosition()),l){const c=s.index<o.index?i:i+1,d=s.index<o.index?i+1:i,u=t[d].index,h=t[c].index,f=t[d].selection,g=t[c].selection;if(!f.equalsSelection(g)){const p=f.plusRange(g),_=f.selectionStartLineNumber===f.startLineNumber&&f.selectionStartColumn===f.startColumn,v=g.selectionStartLineNumber===g.startLineNumber&&g.selectionStartColumn===g.startColumn;let b;u===this.lastAddedCursorIndex?(b=_,this.lastAddedCursorIndex=h):b=v;let w;b?w=new at(p.startLineNumber,p.startColumn,p.endLineNumber,p.endColumn):w=new at(p.endLineNumber,p.endColumn,p.startLineNumber,p.startColumn),t[c].selection=w;const C=Xe.fromModelSelection(w);e[h].setState(this.context,C.modelState,C.viewState)}for(const p of t)p.index>u&&p.index--;e.splice(u,1),t.splice(d,1),this._removeSecondaryCursor(u-1),i--}}}}class Ok{constructor(e,t,i,s){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=i,this.cursorConfig=s}}class OK{constructor(){this.type=0}}class FK{constructor(){this.type=1}}class BK{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class VK{constructor(e,t,i){this.selections=e,this.modelSelections=t,this.reason=i,this.type=3}}class dd{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler,this.affectsGlyphMargin=e.affectsGlyphMargin):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0,this.affectsGlyphMargin=!0)}}class Fp{constructor(){this.type=5}}class WK{constructor(e){this.type=6,this.isFocused=e}}class HK{constructor(){this.type=7}}class Bp{constructor(){this.type=8}}class Q3{constructor(e,t){this.fromLineNumber=e,this.count=t,this.type=9}}class mC{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}class _C{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}class Dm{constructor(e,t,i,s,o,r,a){this.source=e,this.minimalReveal=t,this.range=i,this.selections=s,this.verticalType=o,this.revealHorizontal=r,this.scrollType=a,this.type=12}}class $K{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class zK{constructor(e){this.theme=e,this.type=14}}class UK{constructor(e){this.type=15,this.ranges=e}}class qK{constructor(){this.type=16}}let jK=class{constructor(){this.type=17}};class KK extends oe{constructor(){super(),this._onEvent=this._register(new q),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,i=this._outgoingEvents.length;t<i;t++){const s=this._outgoingEvents[t].kind===e.kind?this._outgoingEvents[t].attemptToMerge(e):null;if(s){this._outgoingEvents[t]=s;return}}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,i=this._eventHandlers.length;t<i;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new GK),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const i of e)this._addOutgoingEvent(i);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const i of t)i.handleEvents(e)}}}class GK{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class fL{constructor(e,t,i,s){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=i,this.contentHeight=s,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(e){return e.kind!==this.kind?null:new fL(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class gL{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(e){return e.kind!==this.kind?null:new gL(this.oldHasFocus,e.hasFocus)}}class pL{constructor(e,t,i,s,o,r,a,l){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=i,this._oldScrollTop=s,this.scrollWidth=o,this.scrollLeft=r,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}attemptToMerge(e){return e.kind!==this.kind?null:new pL(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class ZK{constructor(){this.kind=3}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class YK{constructor(){this.kind=4}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class I0{constructor(e,t,i,s,o,r,a){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=i,this.modelVersionId=s,this.source=o,this.reason=r,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const i=e.length,s=t.length;if(i!==s)return!1;for(let o=0;o<i;o++)if(!e[o].equalsSelection(t[o]))return!1;return!0}isNoOp(){return I0._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(e){return e.kind!==this.kind?null:new I0(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class XK{constructor(){this.kind=5}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class QK{constructor(e){this.event=e,this.kind=7}isNoOp(){return!1}attemptToMerge(e){return null}}class JK{constructor(e){this.event=e,this.kind=8}isNoOp(){return!1}attemptToMerge(e){return null}}class eG{constructor(e){this.event=e,this.kind=9}isNoOp(){return!1}attemptToMerge(e){return null}}class tG{constructor(e){this.event=e,this.kind=10}isNoOp(){return!1}attemptToMerge(e){return null}}class iG{constructor(e){this.event=e,this.kind=11}isNoOp(){return!1}attemptToMerge(e){return null}}class nG{constructor(e){this.event=e,this.kind=12}isNoOp(){return!1}attemptToMerge(e){return null}}class sG extends oe{constructor(e,t,i,s){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=i,this.context=new Ok(this._model,this._viewModel,this._coordinatesConverter,s),this._cursors=new Pk(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=ci(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new Ok(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const i=this._autoClosedActions[t];i.isValid(e)||(i.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,i,s){let o=!1;const r=this.context.cursorConfig.multiCursorLimit;s!==null&&s.length>r&&(s=s.slice(0,r),o=!0);const a=ff.from(this._model,this);return this._cursors.setStates(s),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,i,a,o)}setCursorColumnSelectData(e){this._columnSelectData=e}revealPrimary(e,t,i,s,o,r){const a=this._cursors.getViewPositions();let l=null,c=null;a.length>1?c=this._cursors.getViewSelections():l=$.fromPositions(a[0],a[0]),e.emitViewEvent(new Dm(t,i,l,c,s,o,r))}saveState(){const e=[],t=this._cursors.getSelections();for(let i=0,s=t.length;i<s;i++){const o=t[i];e.push({inSelectionMode:!o.isEmpty(),selectionStart:{lineNumber:o.selectionStartLineNumber,column:o.selectionStartColumn},position:{lineNumber:o.positionLineNumber,column:o.positionColumn}})}return e}restoreState(e,t){const i=[];for(let s=0,o=t.length;s<o;s++){const r=t[s];let a=1,l=1;r.position&&r.position.lineNumber&&(a=r.position.lineNumber),r.position&&r.position.column&&(l=r.position.column);let c=a,d=l;r.selectionStart&&r.selectionStart.lineNumber&&(c=r.selectionStart.lineNumber),r.selectionStart&&r.selectionStart.column&&(d=r.selectionStart.column),i.push({selectionStartLineNumber:c,selectionStartColumn:d,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",0,Xe.fromModelSelections(i)),this.revealPrimary(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,t){if(t instanceof Z3){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{const i=t.rawContentChangedEvent;if(this._knownModelVersionId=i.versionId,this._isHandling)return;const s=i.containsEvent(1);if(this._prevEditOperationType=0,s)this._cursors.dispose(),this._cursors=new Pk(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&i.resultingSelection&&i.resultingSelection.length>0){const o=Xe.fromModelSelections(i.resultingSelection);this.setStates(e,"modelChange",i.isUndoing?5:i.isRedoing?6:2,o)&&this.revealPrimary(e,"modelChange",!1,0,!0,0)}else{const o=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,Xe.fromModelSelections(o))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),i=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,t),toViewLineNumber:i.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,i)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,i,s){this.setStates(e,t,s,Xe.fromModelSelections(i))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){const i=[],s=[];for(let a=0,l=e.length;a<l;a++)i.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),s.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});const o=this._model.deltaDecorations([],i),r=this._model.deltaDecorations([],s);this._autoClosedActions.push(new Fk(this._model,o,r))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=oG.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);const i=[],s=[];for(let o=0;o<e.commands.length;o++){const r=e.commands[o];r instanceof D3&&r.enclosingRange&&r.closeCharacterRange&&(i.push(r.closeCharacterRange),s.push(r.enclosingRange))}i.length>0&&this._pushAutoClosedAction(i,s),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,i,s,o){const r=ff.from(this._model,this);if(r.equals(s))return!1;const a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new VK(l,a,i)),!s||s.cursorState.length!==r.cursorState.length||r.cursorState.some((c,d)=>!c.modelState.equals(s.cursorState[d].modelState))){const c=s?s.cursorState.map(u=>u.modelState.selection):null,d=s?s.modelVersionId:0;e.emitOutgoingEvent(new I0(c,a,d,r.modelVersionId,t||"keyboard",i,o))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;const t=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];if(!o.text||o.text.indexOf(`
`)>=0)return null;const r=o.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!r)return null;const a=r[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;const c=l[0].open,d=o.text.length-r[2].length-1,u=o.text.lastIndexOf(c,d-1);if(u===-1)return null;t.push([u,d])}return t}executeEdits(e,t,i,s){let o=null;t==="snippet"&&(o=this._findAutoClosingPairs(i)),o&&(i[0]._isTracked=!0);const r=[],a=[],l=this._model.pushEditOperations(this.getSelections(),i,c=>{if(o)for(let u=0,h=o.length;u<h;u++){const[f,g]=o[u],p=c[u],_=p.range.startLineNumber,v=p.range.startColumn-1+f,b=p.range.startColumn-1+g;r.push(new $(_,b+1,_,b+2)),a.push(new $(_,v+1,_,b+2))}const d=s(c);return d&&(this._isHandling=!0),d});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),r.length>0&&this._pushAutoClosedAction(r,a)}_executeEdit(e,t,i,s=0){if(this.context.cursorConfig.readOnly)return;const o=ff.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(r){$t(r)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,i,s,o,!1)&&this.revealPrimary(t,i,!1,0,!0,0)}getAutoClosedCharacters(){return Fk.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._compositionState=new gf(this._model,this.getSelections())}endComposition(e,t){const i=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit(()=>{t==="keyboard"&&this._executeEditOperation(Jt.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,i,this.getSelections(),this.getAutoClosedCharacters()))},e,t)}type(e,t,i){this._executeEdit(()=>{if(i==="keyboard"){const s=t.length;let o=0;for(;o<s;){const r=CS(t,o),a=t.substr(o,r);this._executeEditOperation(Jt.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),o+=r}}else this._executeEditOperation(Jt.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,i)}compositionType(e,t,i,s,o,r){if(t.length===0&&i===0&&s===0){if(o!==0){const a=this.getSelections().map(l=>{const c=l.getPosition();return new at(c.lineNumber,c.column+o,c.lineNumber,c.column+o)});this.setSelections(e,r,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(Jt.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,i,s,o))},e,r)}paste(e,t,i,s,o){this._executeEdit(()=>{this._executeEditOperation(Jt.paste(this.context.cursorConfig,this._model,this.getSelections(),t,i,s||[]))},e,o,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(Ic.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,i){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new Dn(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,i)}executeCommands(e,t,i){this._executeEdit(()=>{this._executeEditOperation(new Dn(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,i)}}class ff{static from(e,t){return new ff(e.getVersionId(),t.getCursorStates())}constructor(e,t){this.modelVersionId=e,this.cursorState=t}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,i=this.cursorState.length;t<i;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class Fk{static getAllAutoClosedCharacters(e){let t=[];for(const i of e)t=t.concat(i.getAutoClosedCharactersRanges());return t}constructor(e,t,i){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=i}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const i=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);i&&e.push(i)}return e}isValid(e){const t=[];for(let i=0;i<this._autoClosedEnclosingDecorations.length;i++){const s=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[i]);if(s&&(t.push(s),s.startLineNumber!==s.endLineNumber))return!1}t.sort($.compareRangesUsingStarts),e.sort($.compareRangesUsingStarts);for(let i=0;i<e.length;i++)if(i>=t.length||!t[i].strictContainsRange(e[i]))return!1;return!0}}class oG{static executeCommands(e,t,i){const s={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},o=this._innerExecuteCommands(s,i);for(let r=0,a=s.trackedRanges.length;r<a;r++)s.model._setTrackedRange(s.trackedRanges[r],null,0);return o}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const i=this._getEditOperations(e,t);if(i.operations.length===0)return null;const s=i.operations,o=this._getLoserCursorMap(s);if(o.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;const r=[];for(let c=0,d=s.length;c<d;c++)o.hasOwnProperty(s[c].identifier.major.toString())||r.push(s[c]);i.hadTrackedEditOperation&&r.length>0&&(r[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,r,c=>{const d=[];for(let f=0;f<e.selectionsBefore.length;f++)d[f]=[];for(const f of c)f.identifier&&d[f.identifier.major].push(f);const u=(f,g)=>f.identifier.minor-g.identifier.minor,h=[];for(let f=0;f<e.selectionsBefore.length;f++)d[f].length>0?(d[f].sort(u),h[f]=t[f].computeCursorState(e.model,{getInverseEditOperations:()=>d[f],getTrackedSelection:g=>{const p=parseInt(g,10),_=e.model._getTrackedRange(e.trackedRanges[p]);return e.trackedRangesDirection[p]===0?new at(_.startLineNumber,_.startColumn,_.endLineNumber,_.endColumn):new at(_.endLineNumber,_.endColumn,_.startLineNumber,_.startColumn)}})):h[f]=e.selectionsBefore[f];return h});a||(a=e.selectionsBefore);const l=[];for(const c in o)o.hasOwnProperty(c)&&l.push(parseInt(c,10));l.sort((c,d)=>d-c);for(const c of l)a.splice(c,1);return a}static _arrayIsEmpty(e){for(let t=0,i=e.length;t<i;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let i=[],s=!1;for(let o=0,r=t.length;o<r;o++){const a=t[o];if(a){const l=this._getEditOperationsFromCommand(e,o,a);i=i.concat(l.operations),s=s||l.hadTrackedEditOperation}}return{operations:i,hadTrackedEditOperation:s}}static _getEditOperationsFromCommand(e,t,i){const s=[];let o=0;const r=(u,h,f=!1)=>{$.isEmpty(u)&&h===""||s.push({identifier:{major:t,minor:o++},range:u,text:h,forceMoveMarkers:f,isAutoWhitespaceEdit:i.insertsAutoWhitespace})};let a=!1;const d={addEditOperation:r,addTrackedEditOperation:(u,h,f)=>{a=!0,r(u,h,f)},trackSelection:(u,h)=>{const f=at.liftSelection(u);let g;if(f.isEmpty())if(typeof h=="boolean")h?g=2:g=3;else{const v=e.model.getLineMaxColumn(f.startLineNumber);f.startColumn===v?g=2:g=3}else g=1;const p=e.trackedRanges.length,_=e.model._setTrackedRange(null,f,g);return e.trackedRanges[p]=_,e.trackedRangesDirection[p]=f.getDirection(),p.toString()}};try{i.getEditOperations(e.model,d)}catch(u){return $t(u),{operations:[],hadTrackedEditOperation:!1}}return{operations:s,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((i,s)=>-$.compareRangesUsingEnds(i.range,s.range));const t={};for(let i=1;i<e.length;i++){const s=e[i-1],o=e[i];if($.getStartPosition(s.range).isBefore($.getEndPosition(o.range))){let r;s.identifier.major>o.identifier.major?r=s.identifier.major:r=o.identifier.major,t[r.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===r&&(e.splice(a,1),a<i&&i--,a--);i>0&&i--}}return t}}class rG{constructor(e,t,i){this.text=e,this.startSelection=t,this.endSelection=i}}class gf{static _capture(e,t){const i=[];for(const s of t){if(s.startLineNumber!==s.endLineNumber)return null;i.push(new rG(e.getLineContent(s.startLineNumber),s.startColumn-1,s.endColumn-1))}return i}constructor(e,t){this._original=gf._capture(e,t)}deduceOutcome(e,t){if(!this._original)return null;const i=gf._capture(e,t);if(!i||this._original.length!==i.length)return null;const s=[];for(let o=0,r=this._original.length;o<r;o++)s.push(gf._deduceOutcome(this._original[o],i[o]));return s}static _deduceOutcome(e,t){const i=Math.min(e.startSelection,t.startSelection,xw(e.text,t.text)),s=Math.min(e.text.length-e.endSelection,t.text.length-t.endSelection,Dw(e.text,t.text)),o=e.text.substring(i,e.text.length-s),r=t.text.substring(i,t.text.length-s);return new lq(o,e.startSelection-i,e.endSelection-i,r,t.startSelection-i,t.endSelection-i)}}globalThis&&globalThis.__awaiter;function aG(n,e,t,i,s,o,r){let a="<div>",l=i,c=0,d=!0;for(let u=0,h=e.getCount();u<h;u++){const f=e.getEndOffset(u);if(f<=i)continue;let g="";for(;l<f&&l<s;l++){const p=n.charCodeAt(l);switch(p){case 9:{let _=o-(l+c)%o;for(c+=_-1;_>0;)r&&d?(g+="&#160;",d=!1):(g+=" ",d=!0),_--;break}case 60:g+="&lt;",d=!1;break;case 62:g+="&gt;",d=!1;break;case 38:g+="&amp;",d=!1;break;case 0:g+="&#00;",d=!1;break;case 65279:case 8232:case 8233:case 133:g+="�",d=!1;break;case 13:g+="&#8203",d=!1;break;case 32:r&&d?(g+="&#160;",d=!1):(g+=" ",d=!0);break;default:g+=String.fromCharCode(p),d=!1}}if(a+=`<span style="${e.getInlineStyle(u,t)}">${g}</span>`,f>s||l>=s)break}return a+="</div>",a}class lG{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,i=this._changes,s=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,i,s)}}class cG{constructor(e,t,i,s,o){this.id=e,this.afterLineNumber=t,this.ordinal=i,this.height=s,this.minWidth=o,this.prefixSum=0}}let J3=class bC{constructor(e,t,i,s){this._instanceId=TT(++bC.INSTANCE_COUNT),this._pendingChanges=new lG,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=i,this._paddingBottom=s}static findInsertionIndex(e,t,i){let s=0,o=e.length;for(;s<o;){const r=s+o>>>1;t===e[r].afterLineNumber?i<e[r].ordinal?o=r:s=r+1:t<e[r].afterLineNumber?o=r:s=r+1}return s}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(s,o,r,a)=>{t=!0,s=s|0,o=o|0,r=r|0,a=a|0;const l=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new cG(l,s,o,r,a)),l},changeOneWhitespace:(s,o,r)=>{t=!0,o=o|0,r=r|0,this._pendingChanges.change({id:s,newAfterLineNumber:o,newHeight:r})},removeWhitespace:s=>{t=!0,this._pendingChanges.remove({id:s})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,i){if((e.length>0||i.length>0)&&(this._minWidth=-1),e.length+t.length+i.length<=1){for(const l of e)this._insertWhitespace(l);for(const l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(const l of i){const c=this._findWhitespaceIndex(l.id);c!==-1&&this._removeWhitespace(c)}return}const s=new Set;for(const l of i)s.add(l.id);const o=new Map;for(const l of t)o.set(l.id,l);const r=l=>{const c=[];for(const d of l)if(!s.has(d.id)){if(o.has(d.id)){const u=o.get(d.id);d.afterLineNumber=u.newAfterLineNumber,d.height=u.newHeight}c.push(d)}return c},a=r(this._arr).concat(r(e));a.sort((l,c)=>l.afterLineNumber===c.afterLineNumber?l.ordinal-c.ordinal:l.afterLineNumber-c.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=bC.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let i=0,s=t.length;i<s;i++)if(t[i].id===e)return i;return-1}_changeOneWhitespace(e,t,i){const s=this._findWhitespaceIndex(e);if(s!==-1&&(this._arr[s].height!==i&&(this._arr[s].height=i,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,s-1)),this._arr[s].afterLineNumber!==t)){const o=this._arr[s];this._removeWhitespace(s),o.afterLineNumber=t,this._insertWhitespace(o)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let i=0,s=this._arr.length;i<s;i++){const o=this._arr[i].afterLineNumber;e<=o&&o<=t?this._arr[i].afterLineNumber=e-1:o>t&&(this._arr[i].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let i=0,s=this._arr.length;i<s;i++){const o=this._arr[i].afterLineNumber;e<=o&&(this._arr[i].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let i=t;i<=e;i++)this._arr[i].prefixSum=this._arr[i-1].prefixSum+this._arr[i].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let i=0,s=t.length-1;for(;i<=s;){const r=(s-i|0)/2|0,a=i+r|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;i=a+1|0}else s=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const i=this._findLastWhitespaceBeforeLineNumber(e)+1;return i<this._arr.length?i:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;let i;e>1?i=this._lineHeight*(e-1):i=0;const s=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e-(t?1:0));return i+s+this._paddingTop}getVerticalOffsetAfterLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;const i=this._lineHeight*e,s=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e+(t?1:0));return i+s+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,i=this._arr.length;t<i;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const t=this._lineCount|0,i=this._lineHeight;let s=1,o=t;for(;s<o;){const r=(s+o)/2|0,a=this.getVerticalOffsetForLineNumber(r)|0;if(e>=a+i)s=r+1;else{if(e>=a)return r;o=r}}return s>t?t:s}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const i=this._lineHeight,s=this.getLineNumberAtOrAfterVerticalOffset(e)|0,o=this.getVerticalOffsetForLineNumber(s)|0;let r=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(s)|0;const l=this.getWhitespacesCount()|0;let c,d;a===-1?(a=l,d=r+1,c=0):(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);let u=o,h=u;const f=5e5;let g=0;o>=f&&(g=Math.floor(o/f)*f,g=Math.floor(g/i)*i,h-=g);const p=[],_=e+(t-e)/2;let v=-1;for(let S=s;S<=r;S++){if(v===-1){const k=u,L=u+i;(k<=_&&_<L||k>_)&&(v=S)}for(u+=i,p[S-s]=h,h+=i;d===S;)h+=c,u+=c,a++,a>=l?d=r+1:(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);if(u>=t){r=S;break}}v===-1&&(v=r);const b=this.getVerticalOffsetForLineNumber(r)|0;let w=s,C=r;return w<C&&o<e&&w++,w<C&&b+i>t&&C--,{bigNumbersDelta:g,startLineNumber:s,endLineNumber:r,relativeVerticalOffset:p,centeredLineNumber:v,completelyVisibleStartLineNumber:w,completelyVisibleEndLineNumber:C}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let i;t>=1?i=this._lineHeight*t:i=0;let s;return e>0?s=this.getWhitespacesAccumulatedHeight(e-1):s=0,i+s+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,i=this.getWhitespacesCount()-1;if(i<0)return-1;const s=this.getVerticalOffsetForWhitespaceIndex(i),o=this.getHeightForWhitespaceIndex(i);if(e>=s+o)return-1;for(;t<i;){const r=Math.floor((t+i)/2),a=this.getVerticalOffsetForWhitespaceIndex(r),l=this.getHeightForWhitespaceIndex(r);if(e>=a+l)t=r+1;else{if(e>=a)return r;i=r}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const i=this.getVerticalOffsetForWhitespaceIndex(t);if(i>e)return null;const s=this.getHeightForWhitespaceIndex(t),o=this.getIdForWhitespaceIndex(t),r=this.getAfterLineNumberForWhitespaceIndex(t);return{id:o,afterLineNumber:r,verticalOffset:i,height:s}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const i=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),s=this.getWhitespacesCount()-1;if(i<0)return[];const o=[];for(let r=i;r<=s;r++){const a=this.getVerticalOffsetForWhitespaceIndex(r),l=this.getHeightForWhitespaceIndex(r);if(a>=t)break;o.push({id:this.getIdForWhitespaceIndex(r),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(r),verticalOffset:a,height:l})}return o}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}};J3.INSTANCE_COUNT=0;const dG=125;class zh{constructor(e,t,i,s){e=e|0,t=t|0,i=i|0,s=s|0,e<0&&(e=0),t<0&&(t=0),i<0&&(i=0),s<0&&(s=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=i,this.contentHeight=s,this.scrollHeight=Math.max(i,s)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class uG extends oe{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new q),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new zh(0,0,0,0),this._scrollable=this._register(new Bg({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:t})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const i=t.contentWidth!==e.contentWidth,s=t.contentHeight!==e.contentHeight;(i||s)&&this._onDidContentSizeChange.fire(new fL(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}}class hG extends oe{constructor(e,t,i){super(),this._configuration=e;const s=this._configuration.options,o=s.get(142),r=s.get(82);this._linesLayout=new J3(t,s.get(65),r.top,r.bottom),this._maxLineWidth=0,this._overlayWidgetsMinWidth=0,this._scrollable=this._register(new uG(0,i)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new zh(o.contentWidth,0,o.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(112)?dG:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(65)&&this._linesLayout.setLineHeight(t.get(65)),e.hasChanged(82)){const i=t.get(82);this._linesLayout.setPadding(i.top,i.bottom)}if(e.hasChanged(142)){const i=t.get(142),s=i.contentWidth,o=i.height,r=this._scrollable.getScrollDimensions(),a=r.contentWidth;this._scrollable.setScrollDimensions(new zh(s,r.contentWidth,o,this._getContentHeight(s,o,a)))}else this._updateHeight();e.hasChanged(112)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const s=this._configuration.options.get(101);return s.horizontal===2||e>=t?0:s.horizontalScrollbarSize}_getContentHeight(e,t,i){const s=this._configuration.options;let o=this._linesLayout.getLinesTotalHeight();return s.get(103)?o+=Math.max(0,t-s.get(65)-s.get(82).bottom):o+=this._getHorizontalScrollbarHeight(e,i),o}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,i=e.height,s=e.contentWidth;this._scrollable.setScrollDimensions(new zh(t,e.contentWidth,i,this._getContentHeight(t,i,s)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new c2(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new c2(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(){const e=this._configuration.options,t=this._maxLineWidth,i=e.get(143),s=e.get(49),o=e.get(142);if(i.isViewportWrapping){const r=e.get(71);return t>o.contentWidth+s.typicalHalfwidthCharacterWidth&&r.enabled&&r.side==="right"?t+o.verticalScrollbarWidth:t}else{const r=e.get(102)*s.typicalHalfwidthCharacterWidth,a=this._linesLayout.getWhitespaceMinWidth();return Math.max(t+r+o.verticalScrollbarWidth,a,this._overlayWidgetsMinWidth)}}setMaxLineWidth(e){this._maxLineWidth=e,this._updateContentWidth()}setOverlayWidgetsMinWidth(e){this._overlayWidgetsMinWidth=e,this._updateContentWidth()}_updateContentWidth(){const e=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new zh(e.width,this._computeContentWidth(),e.height,e.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,i=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),s=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(i);return{scrollTop:t,scrollTopWithoutViewZones:t-s,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetAfterLineNumber(e,t)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}deltaScrollNow(e,t){const i=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:i.scrollLeft+e,scrollTop:i.scrollTop+t})}}class fG{constructor(e,t,i,s,o){this.editorId=e,this.model=t,this.configuration=i,this._linesCollection=s,this._coordinatesConverter=o,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let i=this._decorationsCache[t];if(!i){const s=e.range,o=e.options;let r;if(o.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new Y(s.startLineNumber,1),0,!1,!0),l=this._coordinatesConverter.convertModelPositionToViewPosition(new Y(s.endLineNumber,this.model.getLineMaxColumn(s.endLineNumber)),1);r=new $(a.lineNumber,a.column,l.lineNumber,l.column)}else r=this._coordinatesConverter.convertModelRangeToViewRange(s,1);i=new _4(r,o),this._decorationsCache[t]=i}return i}getMinimapDecorationsInRange(e){return this._getDecorationsInRange(e,!0,!1).decorations}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(e,!1,!1),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(e,t=!1,i=!1){const s=new $(e,this._linesCollection.getViewLineMinColumn(e),e,this._linesCollection.getViewLineMaxColumn(e));return this._getDecorationsInRange(s,t,i).inlineDecorations[0]}_getDecorationsInRange(e,t,i){const s=this._linesCollection.getDecorationsInRange(e,this.editorId,qm(this.configuration.options),t,i),o=e.startLineNumber,r=e.endLineNumber,a=[];let l=0;const c=[];for(let d=o;d<=r;d++)c[d-o]=[];for(let d=0,u=s.length;d<u;d++){const h=s[d],f=h.options;if(!gG(this.model,h))continue;const g=this._getOrCreateViewModelDecoration(h),p=g.range;if(a[l++]=g,f.inlineClassName){const _=new Jd(p,f.inlineClassName,f.inlineClassNameAffectsLetterSpacing?3:0),v=Math.max(o,p.startLineNumber),b=Math.min(r,p.endLineNumber);for(let w=v;w<=b;w++)c[w-o].push(_)}if(f.beforeContentClassName&&o<=p.startLineNumber&&p.startLineNumber<=r){const _=new Jd(new $(p.startLineNumber,p.startColumn,p.startLineNumber,p.startColumn),f.beforeContentClassName,1);c[p.startLineNumber-o].push(_)}if(f.afterContentClassName&&o<=p.endLineNumber&&p.endLineNumber<=r){const _=new Jd(new $(p.endLineNumber,p.endColumn,p.endLineNumber,p.endColumn),f.afterContentClassName,2);c[p.endLineNumber-o].push(_)}}return{decorations:a,inlineDecorations:c}}}function gG(n,e){return!(e.options.hideInCommentTokens&&pG(n,e)||e.options.hideInStringTokens&&mG(n,e))}function pG(n,e){return eA(n,e.range,t=>t===1)}function mG(n,e){return eA(n,e.range,t=>t===2)}function eA(n,e,t){for(let i=e.startLineNumber;i<=e.endLineNumber;i++){const s=n.tokenization.getLineTokens(i),o=i===e.startLineNumber,r=i===e.endLineNumber;let a=o?s.findTokenIndexAtOffset(e.startColumn-1):0;for(;a<s.getCount()&&!(r&&s.getStartOffset(a)>e.endColumn-1);){if(!t(s.getStandardTokenType(a)))return!1;a++}}return!0}function Pb(n,e){return n===null?e?N0.INSTANCE:T0.INSTANCE:new _G(n,e)}class _G{constructor(e,t){this._projectionData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(e,t,i){this._assertVisible();const s=i>0?this._projectionData.breakOffsets[i-1]:0,o=this._projectionData.breakOffsets[i];let r;if(this._projectionData.injectionOffsets!==null){const a=this._projectionData.injectionOffsets.map((c,d)=>new Mo(0,0,c+1,this._projectionData.injectionOptions[d],0));r=Mo.applyInjectedText(e.getLineContent(t),a).substring(s,o)}else r=e.getValueInRange({startLineNumber:t,startColumn:s+1,endLineNumber:t,endColumn:o+1});return i>0&&(r=Bk(this._projectionData.wrappedTextIndentLength)+r),r}getViewLineLength(e,t,i){return this._assertVisible(),this._projectionData.getLineLength(i)}getViewLineMinColumn(e,t,i){return this._assertVisible(),this._projectionData.getMinOutputOffset(i)+1}getViewLineMaxColumn(e,t,i){return this._assertVisible(),this._projectionData.getMaxOutputOffset(i)+1}getViewLineData(e,t,i){const s=new Array;return this.getViewLinesData(e,t,i,1,0,[!0],s),s[0]}getViewLinesData(e,t,i,s,o,r,a){this._assertVisible();const l=this._projectionData,c=l.injectionOffsets,d=l.injectionOptions;let u=null;if(c){u=[];let f=0,g=0;for(let p=0;p<l.getOutputLineCount();p++){const _=new Array;u[p]=_;const v=p>0?l.breakOffsets[p-1]:0,b=l.breakOffsets[p];for(;g<c.length;){const w=d[g].content.length,C=c[g]+f,S=C+w;if(C>b)break;if(v<S){const k=d[g];if(k.inlineClassName){const L=p>0?l.wrappedTextIndentLength:0,x=L+Math.max(C-v,0),I=L+Math.min(S-v,b-v);x!==I&&_.push(new NW(x,I,k.inlineClassName,k.inlineClassNameAffectsLetterSpacing))}}if(S<=b)f+=w,g++;else break}}}let h;c?h=e.tokenization.getLineTokens(t).withInserted(c.map((f,g)=>({offset:f,text:d[g].content,tokenMetadata:Hi.defaultTokenMetadata}))):h=e.tokenization.getLineTokens(t);for(let f=i;f<i+s;f++){const g=o+f-i;if(!r[g]){a[g]=null;continue}a[g]=this._getViewLineData(h,u?u[f]:null,f)}}_getViewLineData(e,t,i){this._assertVisible();const s=this._projectionData,o=i>0?s.wrappedTextIndentLength:0,r=i>0?s.breakOffsets[i-1]:0,a=s.breakOffsets[i],l=e.sliceAndInflate(r,a,o);let c=l.getLineContent();i>0&&(c=Bk(s.wrappedTextIndentLength)+c);const d=this._projectionData.getMinOutputOffset(i)+1,u=c.length+1,h=i+1<this.getViewLineCount(),f=i===0?0:s.breakOffsetsVisibleColumn[i-1];return new BS(c,h,d,u,f,l,t)}getModelColumnOfViewPosition(e,t){return this._assertVisible(),this._projectionData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t,i=2){return this._assertVisible(),this._projectionData.translateToOutputPosition(t-1,i).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this._assertVisible();const i=this._projectionData.translateToOutputPosition(t-1);return e+i.outputLineIndex}normalizePosition(e,t,i){const s=t.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,t.column-1,i).toPosition(s)}getInjectedTextAt(e,t){return this._projectionData.getInjectedText(e,t-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}class N0{constructor(){}isVisible(){return!0}setVisible(e){return e?this:T0.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,i){return e.getLineContent(t)}getViewLineLength(e,t,i){return e.getLineLength(t)}getViewLineMinColumn(e,t,i){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,i){return e.getLineMaxColumn(t)}getViewLineData(e,t,i){const s=e.tokenization.getLineTokens(t),o=s.getLineContent();return new BS(o,!1,1,o.length+1,0,s.inflate(),null)}getViewLinesData(e,t,i,s,o,r,a){if(!r[o]){a[o]=null;return}a[o]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new Y(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,i){return t}getInjectedTextAt(e,t){return null}}N0.INSTANCE=new N0;class T0{constructor(){}isVisible(){return!1}setVisible(e){return e?N0.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,i){throw new Error("Not supported")}getViewLineLength(e,t,i){throw new Error("Not supported")}getViewLineMinColumn(e,t,i){throw new Error("Not supported")}getViewLineMaxColumn(e,t,i){throw new Error("Not supported")}getViewLineData(e,t,i){throw new Error("Not supported")}getViewLinesData(e,t,i,s,o,r,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,i){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}}T0.INSTANCE=new T0;const Ob=[""];function Bk(n){if(n>=Ob.length)for(let e=1;e<=n;e++)Ob[e]=bG(e);return Ob[n]}function bG(n){return new Array(n+1).join(" ")}class vG{constructor(e,t,i,s,o,r,a,l,c,d){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=i,this._monospaceLineBreaksComputerFactory=s,this.fontInfo=o,this.tabSize=r,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=c,this.wordBreak=d,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new CG(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const i=this.model.getLinesContent(),s=this.model.getInjectedTextDecorations(this._editorId),o=i.length,r=this.createLineBreaksComputer(),a=new ea(Mo.fromDecorations(s));for(let p=0;p<o;p++){const _=a.takeWhile(v=>v.lineNumber===p+1);r.addRequest(i[p],_,t?t[p]:null)}const l=r.finalize(),c=[],d=this.hiddenAreasDecorationIds.map(p=>this.model.getDecorationRange(p)).sort($.compareRangesUsingStarts);let u=1,h=0,f=-1,g=f+1<d.length?h+1:o+2;for(let p=0;p<o;p++){const _=p+1;_===g&&(f++,u=d[f].startLineNumber,h=d[f].endLineNumber,g=f+1<d.length?h+1:o+2);const v=_>=u&&_<=h,b=Pb(l[p],!v);c[p]=b.getViewLineCount(),this.modelLineProjections[p]=b}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new _V(c)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){const t=e.map(h=>this.model.validateRange(h)),i=wG(t),s=this.hiddenAreasDecorationIds.map(h=>this.model.getDecorationRange(h)).sort($.compareRangesUsingStarts);if(i.length===s.length){let h=!1;for(let f=0;f<i.length;f++)if(!i[f].equalsRange(s[f])){h=!0;break}if(!h)return!1}const o=i.map(h=>({range:h,options:Ft.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,o);const r=i;let a=1,l=0,c=-1,d=c+1<r.length?l+1:this.modelLineProjections.length+2,u=!1;for(let h=0;h<this.modelLineProjections.length;h++){const f=h+1;f===d&&(c++,a=r[c].startLineNumber,l=r[c].endLineNumber,d=c+1<r.length?l+1:this.modelLineProjections.length+2);let g=!1;if(f>=a&&f<=l?this.modelLineProjections[h].isVisible()&&(this.modelLineProjections[h]=this.modelLineProjections[h].setVisible(!1),g=!0):(u=!0,this.modelLineProjections[h].isVisible()||(this.modelLineProjections[h]=this.modelLineProjections[h].setVisible(!0),g=!0)),g){const p=this.modelLineProjections[h].getViewLineCount();this.projectedModelLineLineCounts.setValue(h,p)}}return u||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.modelLineProjections.length?!1:this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,i,s,o){const r=this.fontInfo.equals(e),a=this.wrappingStrategy===t,l=this.wrappingColumn===i,c=this.wrappingIndent===s,d=this.wordBreak===o;if(r&&a&&l&&c&&d)return!1;const u=r&&a&&!l&&c&&d;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=i,this.wrappingIndent=s,this.wordBreak=o;let h=null;if(u){h=[];for(let f=0,g=this.modelLineProjections.length;f<g;f++)h[f]=this.modelLineProjections[f].getProjectionData()}return this._constructLines(!1,h),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent,this.wordBreak)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,i){if(!e||e<=this._validModelVersionId)return null;const s=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,o=this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections.splice(t-1,i-t+1),this.projectedModelLineLineCounts.removeValues(t-1,i-t+1),new mC(s,o)}onModelLinesInserted(e,t,i,s){if(!e||e<=this._validModelVersionId)return null;const o=t>2&&!this.modelLineProjections[t-2].isVisible(),r=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1;let a=0;const l=[],c=[];for(let d=0,u=s.length;d<u;d++){const h=Pb(s[d],!o);l.push(h);const f=h.getViewLineCount();a+=f,c[d]=f}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(l).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,c),new _C(r,r+a-1)}onModelLineChanged(e,t,i){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];const s=t-1,o=this.modelLineProjections[s].getViewLineCount(),r=this.modelLineProjections[s].isVisible(),a=Pb(i,r);this.modelLineProjections[s]=a;const l=this.modelLineProjections[s].getViewLineCount();let c=!1,d=0,u=-1,h=0,f=-1,g=0,p=-1;o>l?(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,u=d+l-1,g=u+1,p=g+(o-l)-1,c=!0):o<l?(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,u=d+o-1,h=u+1,f=h+(l-o)-1,c=!0):(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,u=d+l-1),this.projectedModelLineLineCounts.setValue(s,l);const _=d<=u?new Q3(d,u-d+1):null,v=h<=f?new _C(h,f):null,b=g<=p?new mC(g,p):null;return[c,_,v,b]}acceptVersionId(e){this._validModelVersionId=e,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),i=this._toValidViewLineNumber(i);const s=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),o=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),r=this.convertViewPositionToModelPosition(i,this.getViewLineMinColumn(i)),a=this.model.guides.getActiveIndentGuide(s.lineNumber,o.lineNumber,r.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),c=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:c.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);const t=this.projectedModelLineLineCounts.getIndexOf(e-1),i=t.index,s=t.remainder;return new Vk(i+1,s)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],i=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),s=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new Y(e.modelLineNumber,s)}getModelEndPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],i=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),s=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new Y(e.modelLineNumber,s)}getViewLineInfosGroupedByModelRanges(e,t){const i=this.getViewLineInfo(e),s=this.getViewLineInfo(t),o=new Array;let r=this.getModelStartPositionOfViewLine(i),a=new Array;for(let l=i.modelLineNumber;l<=s.modelLineNumber;l++){const c=this.modelLineProjections[l-1];if(c.isVisible()){const d=l===i.modelLineNumber?i.modelLineWrappedLineIdx:0,u=l===s.modelLineNumber?s.modelLineWrappedLineIdx+1:c.getViewLineCount();for(let h=d;h<u;h++)a.push(new Vk(l,h))}if(!c.isVisible()&&r){const d=new Y(l-1,this.model.getLineMaxColumn(l-1)+1),u=$.fromPositions(r,d);o.push(new Wk(u,a)),a=[],r=null}else c.isVisible()&&!r&&(r=new Y(l,1))}if(r){const l=$.fromPositions(r,this.getModelEndPositionOfViewLine(s));o.push(new Wk(l,a))}return o}getViewLinesBracketGuides(e,t,i,s){const o=i?this.convertViewPositionToModelPosition(i.lineNumber,i.column):null,r=[];for(const a of this.getViewLineInfosGroupedByModelRanges(e,t)){const l=a.modelRange.startLineNumber,c=this.model.guides.getLinesBracketGuides(l,a.modelRange.endLineNumber,o,s);for(const d of a.viewLines){const h=c[d.modelLineNumber-l].map(f=>{if(f.forWrappedLinesAfterColumn!==-1&&this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.forWrappedLinesAfterColumn).lineNumber>=d.modelLineWrappedLineIdx||f.forWrappedLinesBeforeOrAtColumn!==-1&&this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.forWrappedLinesBeforeOrAtColumn).lineNumber<d.modelLineWrappedLineIdx)return;if(!f.horizontalLine)return f;let g=-1;if(f.column!==-1){const v=this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.column);if(v.lineNumber===d.modelLineWrappedLineIdx)g=v.column;else if(v.lineNumber<d.modelLineWrappedLineIdx)g=this.getMinColumnOfViewLine(d);else if(v.lineNumber>d.modelLineWrappedLineIdx)return}const p=this.convertModelPositionToViewPosition(d.modelLineNumber,f.horizontalLine.endColumn),_=this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.horizontalLine.endColumn);return _.lineNumber===d.modelLineWrappedLineIdx?new ec(f.visibleColumn,g,f.className,new rf(f.horizontalLine.top,p.column),-1,-1):_.lineNumber<d.modelLineWrappedLineIdx||f.visibleColumn!==-1?void 0:new ec(f.visibleColumn,g,f.className,new rf(f.horizontalLine.top,this.getMaxColumnOfViewLine(d)),-1,-1)});r.push(h.filter(f=>!!f))}}return r}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),s=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let o=[];const r=[],a=[],l=i.lineNumber-1,c=s.lineNumber-1;let d=null;for(let g=l;g<=c;g++){const p=this.modelLineProjections[g];if(p.isVisible()){const _=p.getViewLineNumberOfModelPosition(0,g===l?i.column:1),v=p.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(g+1)),b=v-_+1;let w=0;b>1&&p.getViewLineMinColumn(this.model,g+1,v)===1&&(w=_===0?1:2),r.push(b),a.push(w),d===null&&(d=new Y(g+1,0))}else d!==null&&(o=o.concat(this.model.guides.getLinesIndentGuides(d.lineNumber,g)),d=null)}d!==null&&(o=o.concat(this.model.guides.getLinesIndentGuides(d.lineNumber,s.lineNumber)),d=null);const u=t-e+1,h=new Array(u);let f=0;for(let g=0,p=o.length;g<p;g++){let _=o[g];const v=Math.min(u-f,r[g]),b=a[g];let w;b===2?w=0:b===1?w=1:w=v;for(let C=0;C<v;C++)C===w&&(_=0),h[f++]=_}return h}getViewLineContent(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const s=this.projectedModelLineLineCounts.getIndexOf(e-1);let o=e;const r=s.index,a=s.remainder,l=[];for(let c=r,d=this.model.getLineCount();c<d;c++){const u=this.modelLineProjections[c];if(!u.isVisible())continue;const h=c===r?a:0;let f=u.getViewLineCount()-h,g=!1;if(o+f>t&&(g=!0,f=t-o+1),u.getViewLinesData(this.model,c+1,h,f,o-e,i,l),o+=f,g)break}return l}validateViewPosition(e,t,i){e=this._toValidViewLineNumber(e);const s=this.projectedModelLineLineCounts.getIndexOf(e-1),o=s.index,r=s.remainder,a=this.modelLineProjections[o],l=a.getViewLineMinColumn(this.model,o+1,r),c=a.getViewLineMaxColumn(this.model,o+1,r);t<l&&(t=l),t>c&&(t=c);const d=a.getModelColumnOfViewPosition(r,t);return this.model.validatePosition(new Y(o+1,d)).equals(i)?new Y(e,t):this.convertModelPositionToViewPosition(i.lineNumber,i.column)}validateViewRange(e,t){const i=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),s=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new $(i.lineNumber,i.column,s.lineNumber,s.column)}convertViewPositionToModelPosition(e,t){const i=this.getViewLineInfo(e),s=this.modelLineProjections[i.modelLineNumber-1].getModelColumnOfViewPosition(i.modelLineWrappedLineIdx,t);return this.model.validatePosition(new Y(i.modelLineNumber,s))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),i=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new $(t.lineNumber,t.column,i.lineNumber,i.column)}convertModelPositionToViewPosition(e,t,i=2,s=!1,o=!1){const r=this.model.validatePosition(new Y(e,t)),a=r.lineNumber,l=r.column;let c=a-1,d=!1;if(o)for(;c<this.modelLineProjections.length&&!this.modelLineProjections[c].isVisible();)c++,d=!0;else for(;c>0&&!this.modelLineProjections[c].isVisible();)c--,d=!0;if(c===0&&!this.modelLineProjections[c].isVisible())return new Y(s?0:1,1);const u=1+this.projectedModelLineLineCounts.getPrefixSum(c);let h;return d?o?h=this.modelLineProjections[c].getViewPositionOfModelPosition(u,1,i):h=this.modelLineProjections[c].getViewPositionOfModelPosition(u,this.model.getLineMaxColumn(c+1),i):h=this.modelLineProjections[a-1].getViewPositionOfModelPosition(u,l,i),h}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){const i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return $.fromPositions(i)}else{const i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),s=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new $(i.lineNumber,i.column,s.lineNumber,s.column)}}getViewLineNumberOfModelPosition(e,t){let i=e-1;if(this.modelLineProjections[i].isVisible()){const o=1+this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections[i].getViewLineNumberOfModelPosition(o,t)}for(;i>0&&!this.modelLineProjections[i].isVisible();)i--;if(i===0&&!this.modelLineProjections[i].isVisible())return 1;const s=1+this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections[i].getViewLineNumberOfModelPosition(s,this.model.getLineMaxColumn(i+1))}getDecorationsInRange(e,t,i,s,o){const r=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),a=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(a.lineNumber-r.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new $(r.lineNumber,1,a.lineNumber,a.column),t,i,s,o);let l=[];const c=r.lineNumber-1,d=a.lineNumber-1;let u=null;for(let p=c;p<=d;p++)if(this.modelLineProjections[p].isVisible())u===null&&(u=new Y(p+1,p===c?r.column:1));else if(u!==null){const v=this.model.getLineMaxColumn(p);l=l.concat(this.model.getDecorationsInRange(new $(u.lineNumber,u.column,p,v),t,i,s)),u=null}u!==null&&(l=l.concat(this.model.getDecorationsInRange(new $(u.lineNumber,u.column,a.lineNumber,a.column),t,i,s)),u=null),l.sort((p,_)=>{const v=$.compareRangesUsingStarts(p.range,_.range);return v===0?p.id<_.id?-1:p.id>_.id?1:0:v});const h=[];let f=0,g=null;for(const p of l){const _=p.id;g!==_&&(g=_,h[f++]=p)}return h}getInjectedTextAt(e){const t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){const i=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[i.modelLineNumber-1].normalizePosition(i.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){const t=this.getViewLineInfo(e);return t.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(t.modelLineNumber):0}}function wG(n){if(n.length===0)return[];const e=n.slice();e.sort($.compareRangesUsingStarts);const t=[];let i=e[0].startLineNumber,s=e[0].endLineNumber;for(let o=1,r=e.length;o<r;o++){const a=e[o];a.startLineNumber>s+1?(t.push(new $(i,1,s,1)),i=a.startLineNumber,s=a.endLineNumber):a.endLineNumber>s&&(s=a.endLineNumber)}return t.push(new $(i,1,s,1)),t}class Vk{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}}class Wk{constructor(e,t){this.modelRange=e,this.viewLines=t}}class CG{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t,i,s){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t,i,s)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}class yG{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new SG(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,i,s){return!1}createLineBreaksComputer(){const e=[];return{addRequest:(t,i,s)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,i){return new mC(t,i)}onModelLinesInserted(e,t,i,s){return new _C(t,i)}onModelLineChanged(e,t,i){return[!1,new Q3(t,1),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,i){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,i){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const i=t-e+1,s=new Array(i);for(let o=0;o<i;o++)s[o]=0;return s}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){const t=this.model.tokenization.getLineTokens(e),i=t.getLineContent();return new BS(i,!1,1,i.length+1,0,t.inflate(),null)}getViewLinesData(e,t,i){const s=this.model.getLineCount();e=Math.min(Math.max(1,e),s),t=Math.min(Math.max(1,t),s);const o=[];for(let r=e;r<=t;r++){const a=r-e;o[a]=i[a]?this.getViewLineData(r):null}return o}getDecorationsInRange(e,t,i,s,o){return this.model.getDecorationsInRange(e,t,i,s,o)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class SG{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}let LG=class extends oe{constructor(e,t,i,s,o,r,a,l,c){if(super(),this.languageConfigurationService=a,this._themeService=l,this._attachedView=c,this.hiddenAreasModel=new DG,this.previousHiddenAreas=[],this._editorId=e,this._configuration=t,this.model=i,this._eventDispatcher=new KK,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new rd(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._updateConfigurationViewLineCount=this._register(new Sn(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStart=mL.create(this.model),this.model.isTooLargeForTokenization())this._lines=new yG(this.model);else{const d=this._configuration.options,u=d.get(49),h=d.get(136),f=d.get(143),g=d.get(135),p=d.get(127);this._lines=new vG(this._editorId,this.model,s,o,u,this.model.getOptions().tabSize,h,f.wrappingColumn,g,p)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new sG(i,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new hG(this._configuration,this.getLineCount(),r)),this._register(this.viewLayout.onDidScroll(d=>{d.scrollTopChanged&&this._handleVisibleLinesChanged(),d.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new $K(d)),this._eventDispatcher.emitOutgoingEvent(new pL(d.oldScrollWidth,d.oldScrollLeft,d.oldScrollHeight,d.oldScrollTop,d.scrollWidth,d.scrollLeft,d.scrollHeight,d.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(d=>{this._eventDispatcher.emitOutgoingEvent(d)})),this._decorations=new fG(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(d=>{try{const u=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(u,d)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register($g.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new qK)})),this._register(this._themeService.onDidColorThemeChange(d=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new zK(d))})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}getModelVisibleRanges(){const e=this.viewLayout.getLinesViewportData(),t=new $(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber));return this._toModelVisibleRanges(t)}visibleLinesStabilized(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!0)}_handleVisibleLinesChanged(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!1)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new WK(e)),this._eventDispatcher.emitOutgoingEvent(new gL(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new OK)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new FK)}_captureStableViewport(){if(this._viewportStart.isValid&&this.viewLayout.getCurrentScrollTop()>0){const e=new Y(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber)),t=this.coordinatesConverter.convertViewPositionToModelPosition(e);return new $k(t,this._viewportStart.startLineDelta)}return new $k(null,0)}_onConfigurationChanged(e,t){const i=this._captureStableViewport(),s=this._configuration.options,o=s.get(49),r=s.get(136),a=s.get(143),l=s.get(135),c=s.get(127);this._lines.setWrappingSettings(o,r,a.wrappingColumn,l,c)&&(e.emitViewEvent(new Fp),e.emitViewEvent(new Bp),e.emitViewEvent(new dd(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(89)&&(this._decorations.reset(),e.emitViewEvent(new dd(null))),e.emitViewEvent(new BK(t)),this.viewLayout.onConfigurationChanged(t),i.recoverViewportStart(this.coordinatesConverter,this.viewLayout),rd.shouldRecreate(t)&&(this.cursorConfig=new rd(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const i=this._eventDispatcher.beginEmitViewEvents();let s=!1,o=!1;const r=e instanceof mc?e.rawContentChangedEvent.changes:e.changes,a=e instanceof mc?e.rawContentChangedEvent.versionId:null,l=this._lines.createLineBreaksComputer();for(const u of r)switch(u.changeType){case 4:{for(let h=0;h<u.detail.length;h++){const f=u.detail[h];let g=u.injectedTexts[h];g&&(g=g.filter(p=>!p.ownerId||p.ownerId===this._editorId)),l.addRequest(f,g,null)}break}case 2:{let h=null;u.injectedText&&(h=u.injectedText.filter(f=>!f.ownerId||f.ownerId===this._editorId)),l.addRequest(u.detail,h,null);break}}const c=l.finalize(),d=new ea(c);for(const u of r)switch(u.changeType){case 1:{this._lines.onModelFlushed(),i.emitViewEvent(new Fp),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),s=!0;break}case 3:{const h=this._lines.onModelLinesDeleted(a,u.fromLineNumber,u.toLineNumber);h!==null&&(i.emitViewEvent(h),this.viewLayout.onLinesDeleted(h.fromLineNumber,h.toLineNumber)),s=!0;break}case 4:{const h=d.takeCount(u.detail.length),f=this._lines.onModelLinesInserted(a,u.fromLineNumber,u.toLineNumber,h);f!==null&&(i.emitViewEvent(f),this.viewLayout.onLinesInserted(f.fromLineNumber,f.toLineNumber)),s=!0;break}case 2:{const h=d.dequeue(),[f,g,p,_]=this._lines.onModelLineChanged(a,u.lineNumber,h);o=f,g&&i.emitViewEvent(g),p&&(i.emitViewEvent(p),this.viewLayout.onLinesInserted(p.fromLineNumber,p.toLineNumber)),_&&(i.emitViewEvent(_),this.viewLayout.onLinesDeleted(_.fromLineNumber,_.toLineNumber));break}case 5:break}a!==null&&this._lines.acceptVersionId(a),this.viewLayout.onHeightMaybeChanged(),!s&&o&&(i.emitViewEvent(new Bp),i.emitViewEvent(new dd(null)),this._cursor.onLineMappingChanged(i),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}const t=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&t){const i=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(i){const s=this.coordinatesConverter.convertModelPositionToViewPosition(i.getStartPosition()),o=this.viewLayout.getVerticalOffsetForLineNumber(s.lineNumber);this.viewLayout.setScrollPosition({scrollTop:o+this._viewportStart.startLineDelta},1)}}try{const i=this._eventDispatcher.beginEmitViewEvents();e instanceof mc&&i.emitOutgoingEvent(new tG(e.contentChangedEvent)),this._cursor.onModelContentChanged(i,e)}finally{this._eventDispatcher.endEmitViewEvents()}this._handleVisibleLinesChanged()})),this._register(this.model.onDidChangeTokens(e=>{const t=[];for(let i=0,s=e.ranges.length;i<s;i++){const o=e.ranges[i],r=this.coordinatesConverter.convertModelPositionToViewPosition(new Y(o.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new Y(o.toLineNumber,this.model.getLineMaxColumn(o.toLineNumber))).lineNumber;t[i]={fromLineNumber:r,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new UK(t)),this._eventDispatcher.emitOutgoingEvent(new nG(e))})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new HK),this.cursorConfig=new rd(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new eG(e))})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new rd(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new JK(e))})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new Fp),t.emitViewEvent(new Bp),t.emitViewEvent(new dd(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new rd(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new iG(e))})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new dd(e)),this._eventDispatcher.emitOutgoingEvent(new QK(e))}))}setHiddenAreas(e,t){this.hiddenAreasModel.setHiddenAreas(t,e);const i=this.hiddenAreasModel.getMergedRanges();if(i===this.previousHiddenAreas)return;this.previousHiddenAreas=i;const s=this._captureStableViewport();let o=!1;try{const r=this._eventDispatcher.beginEmitViewEvents();o=this._lines.setHiddenAreas(i),o&&(r.emitViewEvent(new Fp),r.emitViewEvent(new Bp),r.emitViewEvent(new dd(null)),this._cursor.onLineMappingChanged(r),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged()),s.recoverViewportStart(this.coordinatesConverter,this.viewLayout)}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),o&&this._eventDispatcher.emitOutgoingEvent(new YK)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(142),t=this._configuration.options.get(65),i=Math.max(20,Math.round(e.height/t)),s=this.viewLayout.getLinesViewportData(),o=Math.max(1,s.completelyVisibleStartLineNumber-i),r=Math.min(this.getLineCount(),s.completelyVisibleEndLineNumber+i);return this._toModelVisibleRanges(new $(o,this.getLineMinColumn(o),r,this.getLineMaxColumn(r)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),i=this._lines.getHiddenAreas();if(i.length===0)return[t];const s=[];let o=0,r=t.startLineNumber,a=t.startColumn;const l=t.endLineNumber,c=t.endColumn;for(let d=0,u=i.length;d<u;d++){const h=i[d].startLineNumber,f=i[d].endLineNumber;f<r||h>l||(r<h&&(s[o++]=new $(r,a,h-1,this.model.getLineMaxColumn(h-1))),r=f+1,a=1)}return(r<l||r===l&&a<c)&&(s[o++]=new $(r,a,l,c)),s}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,i=e.completelyVisibleEndLineNumber;return new $(t,this.getLineMinColumn(t),i,this.getLineMaxColumn(i))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),i=t.completelyVisibleStartLineNumber,s=t.completelyVisibleEndLineNumber;return new $(i,this.getLineMinColumn(i),s,this.getLineMaxColumn(s))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,i=this.viewLayout.getLineNumberAtVerticalOffset(t),s=this.coordinatesConverter.convertViewPositionToModelPosition(new Y(i,this.getLineMinColumn(i))),o=this.viewLayout.getVerticalOffsetForLineNumber(i)-t;return{scrollLeft:e.scrollLeft,firstPosition:s,firstPositionDeltaTop:o}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),i=this.coordinatesConverter.convertModelPositionToViewPosition(t),s=this.viewLayout.getVerticalOffsetForLineNumber(i.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:s}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,i){this._viewportStart.update(this,e)}getActiveIndentGuide(e,t,i){return this._lines.getActiveIndentGuide(e,t,i)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,i,s){return this._lines.getViewLinesBracketGuides(e,t,i,s)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=Jn(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Fc(this.getLineContent(e));return t===-1?0:t+2}getMinimapDecorationsInRange(e){return this._decorations.getMinimapDecorationsInRange(e)}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewportViewLineRenderingData(e,t){const s=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return this._getViewLineRenderingData(t,s)}getViewLineRenderingData(e){const t=this._decorations.getInlineDecorationsOnLine(e);return this._getViewLineRenderingData(e,t)}_getViewLineRenderingData(e,t){const i=this.model.mightContainRTL(),s=this.model.mightContainNonBasicASCII(),o=this.getTabSize(),r=this._lines.getViewLineData(e);return r.inlineDecorations&&(t=[...t,...r.inlineDecorations.map(a=>a.toInlineDecoration(e))]),new hn(r.minColumn,r.maxColumn,r.content,r.continuesWithWrappedLine,i,s,r.tokens,t,o,r.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,i){const s=this._lines.getViewLinesData(e,t,i);return new IW(this.getTabSize(),s)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,qm(this._configuration.options)),i=new xG;for(const s of t){const o=s.options,r=o.overviewRuler;if(!r)continue;const a=r.position;if(a===0)continue;const l=r.getColor(e.value),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(s.range.startLineNumber,s.range.startColumn),d=this.coordinatesConverter.getViewLineNumberOfModelPosition(s.range.endLineNumber,s.range.endColumn);i.accept(l,o.zIndex,c,d,a)}return i.asArray}_invalidateDecorationsColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const i=t.options.overviewRuler;i==null||i.invalidateCachedColor();const s=t.options.minimap;s==null||s.invalidateCachedColor()}}getValueInRange(e,t){const i=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(i,t)}getValueLengthInRange(e,t){const i=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueLengthInRange(i,t)}modifyPosition(e,t){const i=this.coordinatesConverter.convertViewPositionToModelPosition(e);return this.model.modifyPosition(i,t)}deduceModelPositionRelativeToViewPosition(e,t,i){const s=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=i:t+=i);const r=this.model.getOffsetAt(s)+t;return this.model.getPositionAt(r)}getPlainTextToCopy(e,t,i){const s=i?`\r
`:this.model.getEOL();e=e.slice(0),e.sort($.compareRangesUsingStarts);let o=!1,r=!1;for(const l of e)l.isEmpty()?o=!0:r=!0;if(!r){if(!t)return"";const l=e.map(d=>d.startLineNumber);let c="";for(let d=0;d<l.length;d++)d>0&&l[d-1]===l[d]||(c+=this.model.getLineContent(l[d])+s);return c}if(o&&t){const l=[];let c=0;for(const d of e){const u=d.startLineNumber;d.isEmpty()?u!==c&&l.push(this.model.getLineContent(u)):l.push(this.model.getValueInRange(d,i?2:0)),c=u}return l.length===1?l[0]:l}const a=[];for(const l of e)l.isEmpty()||a.push(this.model.getValueInRange(l,i?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const i=this.model.getLanguageId();if(i===No||e.length!==1)return null;let s=e[0];if(s.isEmpty()){if(!t)return null;const d=s.startLineNumber;s=new $(d,this.model.getLineMinColumn(d),d,this.model.getLineMaxColumn(d))}const o=this._configuration.options.get(49),r=this._getColorMap(),l=/[:;\\\/<>]/.test(o.fontFamily)||o.fontFamily===Rs.fontFamily;let c;return l?c=Rs.fontFamily:(c=o.fontFamily,c=c.replace(/"/g,"'"),/[,']/.test(c)||/[+ ]/.test(c)&&(c=`'${c}'`),c=`${c}, ${Rs.fontFamily}`),{mode:i,html:`<div style="color: ${r[1]};background-color: ${r[2]};font-family: ${c};font-weight: ${o.fontWeight};font-size: ${o.fontSize}px;line-height: ${o.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(s,r)+"</div>"}}_getHTMLToCopy(e,t){const i=e.startLineNumber,s=e.startColumn,o=e.endLineNumber,r=e.endColumn,a=this.getTabSize();let l="";for(let c=i;c<=o;c++){const d=this.model.tokenization.getLineTokens(c),u=d.getLineContent(),h=c===i?s-1:0,f=c===o?r-1:u.length;u===""?l+="<br>":l+=aG(u,d.inflate(),t,h,f,a,is)}return l}_getColorMap(){const e=hi.getColorMap(),t=["#000000"];if(e)for(let i=1,s=e.length;i<s;i++)t[i]=J.Format.CSS.formatHex(e[i]);return t}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,i){return this._withViewEventsCollector(s=>this._cursor.setStates(s,e,t,i))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,i=0){this._withViewEventsCollector(s=>this._cursor.setSelections(s,e,t,i))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new XK);return}this._withViewEventsCollector(e)}executeEdits(e,t,i){this._executeCursorEdit(s=>this._cursor.executeEdits(s,e,t,i))}startComposition(){this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(i=>this._cursor.type(i,e,t))}compositionType(e,t,i,s,o){this._executeCursorEdit(r=>this._cursor.compositionType(r,e,t,i,s,o))}paste(e,t,i,s){this._executeCursorEdit(o=>this._cursor.paste(o,e,t,i,s))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(i=>this._cursor.executeCommand(i,e,t))}executeCommands(e,t){this._executeCursorEdit(i=>this._cursor.executeCommands(i,e,t))}revealPrimaryCursor(e,t,i=!1){this._withViewEventsCollector(s=>this._cursor.revealPrimary(s,e,i,0,t,0))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),i=new $(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(s=>s.emitViewEvent(new Dm(e,!1,i,null,0,!0,0)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),i=new $(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(s=>s.emitViewEvent(new Dm(e,!1,i,null,0,!0,0)))}revealRange(e,t,i,s,o){this._withViewEventsCollector(r=>r.emitViewEvent(new Dm(e,!1,i,null,s,t,o)))}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new jK),this._eventDispatcher.emitOutgoingEvent(new ZK))}_withViewEventsCollector(e){try{const t=this._eventDispatcher.beginEmitViewEvents();return e(t)}finally{this._eventDispatcher.endEmitViewEvents()}}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}};class mL{static create(e){const t=e._setTrackedRange(null,new $(1,1,1,1),1);return new mL(e,1,!1,t,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}constructor(e,t,i,s,o){this._model=e,this._viewLineNumber=t,this._isValid=i,this._modelTrackedRange=s,this._startLineDelta=o}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(e,t){const i=e.coordinatesConverter.convertViewPositionToModelPosition(new Y(t,e.getLineMinColumn(t))),s=e.model._setTrackedRange(this._modelTrackedRange,new $(i.lineNumber,i.column,i.lineNumber,i.column),1),o=e.viewLayout.getVerticalOffsetForLineNumber(t),r=e.viewLayout.getCurrentScrollTop();this._viewLineNumber=t,this._isValid=!0,this._modelTrackedRange=s,this._startLineDelta=r-o}invalidate(){this._isValid=!1}}class xG{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,i,s,o){const r=this._asMap[e];if(r){const a=r.data,l=a[a.length-3],c=a[a.length-1];if(l===o&&c+1>=i){s>c&&(a[a.length-1]=s);return}a.push(o,i,s)}else{const a=new b4(e,t,[o,i,s]);this._asMap[e]=a,this.asArray.push(a)}}}class DG{constructor(){this.hiddenAreas=new Map,this.shouldRecompute=!1,this.ranges=[]}setHiddenAreas(e,t){const i=this.hiddenAreas.get(e);i&&Hk(i,t)||(this.hiddenAreas.set(e,t),this.shouldRecompute=!0)}getMergedRanges(){if(!this.shouldRecompute)return this.ranges;this.shouldRecompute=!1;const e=Array.from(this.hiddenAreas.values()).reduce((t,i)=>kG(t,i),[]);return Hk(this.ranges,e)?this.ranges:(this.ranges=e,this.ranges)}}function kG(n,e){const t=[];let i=0,s=0;for(;i<n.length&&s<e.length;){const o=n[i],r=e[s];if(o.endLineNumber<r.startLineNumber-1)t.push(n[i++]);else if(r.endLineNumber<o.startLineNumber-1)t.push(e[s++]);else{const a=Math.min(o.startLineNumber,r.startLineNumber),l=Math.max(o.endLineNumber,r.endLineNumber);t.push(new $(a,1,l,1)),i++,s++}}for(;i<n.length;)t.push(n[i++]);for(;s<e.length;)t.push(e[s++]);return t}function Hk(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].equalsRange(e[t]))return!1;return!0}class $k{constructor(e,t){this.viewportStartModelPosition=e,this.startLineDelta=t}recoverViewportStart(e,t){if(!this.viewportStartModelPosition)return;const i=e.convertModelPositionToViewPosition(this.viewportStartModelPosition),s=t.getVerticalOffsetForLineNumber(i.lineNumber);t.setScrollPosition({scrollTop:s+this.startLineDelta},1)}}class zg{constructor(...e){this._entries=new Map;for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this._entries.get(e);return this._entries.set(e,t),i}get(e){return this._entries.get(e)}}var eg;(function(n){n[n.Ignore=0]="Ignore",n[n.Info=1]="Info",n[n.Warning=2]="Warning",n[n.Error=3]="Error"})(eg||(eg={}));(function(n){const e="error",t="warning",i="warn",s="info",o="ignore";function r(l){return l?Cd(e,l)?n.Error:Cd(t,l)||Cd(i,l)?n.Warning:Cd(s,l)?n.Info:n.Ignore:n.Ignore}n.fromValue=r;function a(l){switch(l){case n.Error:return e;case n.Warning:return t;case n.Info:return s;default:return o}}n.toString=a})(eg||(eg={}));const wi=eg;var EG=wi;const zs=ct("notificationService");class IG{}class pf{constructor(e,t,i,s,o){this.injectionOffsets=e,this.injectionOptions=t,this.breakOffsets=i,this.breakOffsetsVisibleColumn=s,this.wrappedTextIndentLength=o}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){const t=e>0?this.breakOffsets[e-1]:0;let s=this.breakOffsets[e]-t;return e>0&&(s+=this.wrappedTextIndentLength),s}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let s=e===0?t:this.breakOffsets[e-1]+t;if(this.injectionOffsets!==null)for(let o=0;o<this.injectionOffsets.length&&s>this.injectionOffsets[o];o++)s<this.injectionOffsets[o]+this.injectionOptions[o].content.length?s=this.injectionOffsets[o]:s-=this.injectionOptions[o].content.length;return s}translateToOutputPosition(e,t=2){let i=e;if(this.injectionOffsets!==null)for(let s=0;s<this.injectionOffsets.length&&!(e<this.injectionOffsets[s]||t!==1&&e===this.injectionOffsets[s]);s++)i+=this.injectionOptions[s].content.length;return this.offsetInInputWithInjectionsToOutputPosition(i,t)}offsetInInputWithInjectionsToOutputPosition(e,t=2){let i=0,s=this.breakOffsets.length-1,o=0,r=0;for(;i<=s;){o=i+(s-i)/2|0;const l=this.breakOffsets[o];if(r=o>0?this.breakOffsets[o-1]:0,t===0)if(e<=r)s=o-1;else if(e>l)i=o+1;else break;else if(e<r)s=o-1;else if(e>=l)i=o+1;else break}let a=e-r;return o>0&&(a+=this.wrappedTextIndentLength),new Vp(o,a)}normalizeOutputPosition(e,t,i){if(this.injectionOffsets!==null){const s=this.outputPositionToOffsetInInputWithInjections(e,t),o=this.normalizeOffsetInInputWithInjectionsAroundInjections(s,i);if(o!==s)return this.offsetInInputWithInjectionsToOutputPosition(o,i)}if(i===0){if(e>0&&t===this.getMinOutputOffset(e))return new Vp(e-1,this.getMaxOutputOffset(e-1))}else if(i===1){const s=this.getOutputLineCount()-1;if(e<s&&t===this.getMaxOutputOffset(e))return new Vp(e+1,this.getMinOutputOffset(e+1))}return new Vp(e,t)}outputPositionToOffsetInInputWithInjections(e,t){return e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+t}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){const i=this.getInjectedTextAtOffset(e);if(!i)return e;if(t===2){if(e===i.offsetInInputWithInjections+i.length&&zk(this.injectionOptions[i.injectedTextIndex].cursorStops))return i.offsetInInputWithInjections+i.length;{let s=i.offsetInInputWithInjections;if(Uk(this.injectionOptions[i.injectedTextIndex].cursorStops))return s;let o=i.injectedTextIndex-1;for(;o>=0&&this.injectionOffsets[o]===this.injectionOffsets[i.injectedTextIndex]&&!(zk(this.injectionOptions[o].cursorStops)||(s-=this.injectionOptions[o].content.length,Uk(this.injectionOptions[o].cursorStops)));)o--;return s}}else if(t===1||t===4){let s=i.offsetInInputWithInjections+i.length,o=i.injectedTextIndex;for(;o+1<this.injectionOffsets.length&&this.injectionOffsets[o+1]===this.injectionOffsets[o];)s+=this.injectionOptions[o+1].content.length,o++;return s}else if(t===0||t===3){let s=i.offsetInInputWithInjections,o=i.injectedTextIndex;for(;o-1>=0&&this.injectionOffsets[o-1]===this.injectionOffsets[o];)s-=this.injectionOptions[o-1].content.length,o--;return s}kS()}getInjectedText(e,t){const i=this.outputPositionToOffsetInInputWithInjections(e,t),s=this.getInjectedTextAtOffset(i);return s?{options:this.injectionOptions[s.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,i=this.injectionOptions;if(t!==null){let s=0;for(let o=0;o<t.length;o++){const r=i[o].content.length,a=t[o]+s,l=t[o]+s+r;if(a>e)break;if(e<=l)return{injectedTextIndex:o,offsetInInputWithInjections:a,length:r};s+=r}}}}function zk(n){return n==null?!0:n===yu.Right||n===yu.Both}function Uk(n){return n==null?!0:n===yu.Left||n===yu.Both}class Vp{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new Y(e+this.outputLineIndex,this.outputOffset+1)}}class _L{static create(e){return new _L(e.get(131),e.get(130))}constructor(e,t){this.classifier=new NG(e,t)}createLineBreaksComputer(e,t,i,s,o){const r=[],a=[],l=[];return{addRequest:(c,d,u)=>{r.push(c),a.push(d),l.push(u)},finalize:()=>{const c=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,d=[];for(let u=0,h=r.length;u<h;u++){const f=a[u],g=l[u];g&&!g.injectionOptions&&!f?d[u]=TG(this.classifier,g,r[u],t,i,c,s,o):d[u]=AG(this.classifier,r[u],f,t,i,c,s,o)}return vC.length=0,wC.length=0,d}}}}class NG extends Ag{constructor(e,t){super(0);for(let i=0;i<e.length;i++)this.set(e.charCodeAt(i),1);for(let i=0;i<t.length;i++)this.set(t.charCodeAt(i),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let vC=[],wC=[];function TG(n,e,t,i,s,o,r,a){if(s===-1)return null;const l=t.length;if(l<=1)return null;const c=a==="keepAll",d=e.breakOffsets,u=e.breakOffsetsVisibleColumn,h=tA(t,i,s,o,r),f=s-h,g=vC,p=wC;let _=0,v=0,b=0,w=s;const C=d.length;let S=0;if(S>=0){let k=Math.abs(u[S]-w);for(;S+1<C;){const L=Math.abs(u[S+1]-w);if(L>=k)break;k=L,S++}}for(;S<C;){let k=S<0?0:d[S],L=S<0?0:u[S];v>k&&(k=v,L=b);let x=0,I=0,A=0,T=0;if(L<=w){let R=L,X=k===0?0:t.charCodeAt(k-1),ie=k===0?0:n.get(X),ae=!0;for(let ue=k;ue<l;ue++){const me=ue,de=t.charCodeAt(ue);let Ae,ye;if(Ni(de)?(ue++,Ae=0,ye=2):(Ae=n.get(de),ye=mf(de,R,i,o)),me>v&&CC(X,ie,de,Ae,c)&&(x=me,I=R),R+=ye,R>w){me>v?(A=me,T=R-ye):(A=ue+1,T=R),R-I>f&&(x=0),ae=!1;break}X=de,ie=Ae}if(ae){_>0&&(g[_]=d[d.length-1],p[_]=u[d.length-1],_++);break}}if(x===0){let R=L,X=t.charCodeAt(k),ie=n.get(X),ae=!1;for(let ue=k-1;ue>=v;ue--){const me=ue+1,de=t.charCodeAt(ue);if(de===9){ae=!0;break}let Ae,ye;if(Cu(de)?(ue--,Ae=0,ye=2):(Ae=n.get(de),ye=cl(de)?o:1),R<=w){if(A===0&&(A=me,T=R),R<=w-f)break;if(CC(de,Ae,X,ie,c)){x=me,I=R;break}}R-=ye,X=de,ie=Ae}if(x!==0){const ue=f-(T-I);if(ue<=i){const me=t.charCodeAt(A);let de;Ni(me)?de=2:de=mf(me,T,i,o),ue-de<0&&(x=0)}}if(ae){S--;continue}}if(x===0&&(x=A,I=T),x<=v){const R=t.charCodeAt(v);Ni(R)?(x=v+2,I=b+2):(x=v+1,I=b+mf(R,b,i,o))}for(v=x,g[_]=x,b=I,p[_]=I,_++,w=I+f;S<0||S<C&&u[S]<I;)S++;let O=Math.abs(u[S]-w);for(;S+1<C;){const R=Math.abs(u[S+1]-w);if(R>=O)break;O=R,S++}}return _===0?null:(g.length=_,p.length=_,vC=e.breakOffsets,wC=e.breakOffsetsVisibleColumn,e.breakOffsets=g,e.breakOffsetsVisibleColumn=p,e.wrappedTextIndentLength=h,e)}function AG(n,e,t,i,s,o,r,a){const l=Mo.applyInjectedText(e,t);let c,d;if(t&&t.length>0?(c=t.map(I=>I.options),d=t.map(I=>I.column-1)):(c=null,d=null),s===-1)return c?new pf(d,c,[l.length],[],0):null;const u=l.length;if(u<=1)return c?new pf(d,c,[l.length],[],0):null;const h=a==="keepAll",f=tA(l,i,s,o,r),g=s-f,p=[],_=[];let v=0,b=0,w=0,C=s,S=l.charCodeAt(0),k=n.get(S),L=mf(S,0,i,o),x=1;Ni(S)&&(L+=1,S=l.charCodeAt(1),k=n.get(S),x++);for(let I=x;I<u;I++){const A=I,T=l.charCodeAt(I);let O,R;Ni(T)?(I++,O=0,R=2):(O=n.get(T),R=mf(T,L,i,o)),CC(S,k,T,O,h)&&(b=A,w=L),L+=R,L>C&&((b===0||L-w>g)&&(b=A,w=L-R),p[v]=b,_[v]=w,v++,C=w+g,b=0),S=T,k=O}return v===0&&(!t||t.length===0)?null:(p[v]=u,_[v]=L,new pf(d,c,p,_,f))}function mf(n,e,t,i){return n===9?t-e%t:cl(n)||n<32?i:1}function qk(n,e){return e-n%e}function CC(n,e,t,i,s){return t!==32&&(e===2&&i!==2||e!==1&&i===1||!s&&e===3&&i!==2||!s&&i===3&&e!==1)}function tA(n,e,t,i,s){let o=0;if(s!==0){const r=Jn(n);if(r!==-1){for(let l=0;l<r;l++){const c=n.charCodeAt(l)===9?qk(o,e):1;o+=c}const a=s===3?2:s===2?1:0;for(let l=0;l<a;l++){const c=qk(o,e);o+=c}o+i>t&&(o=0)}}return o}const Fb=Qu("domLineBreaksComputer",{createHTML:n=>n});class bL{static create(){return new bL}constructor(){}createLineBreaksComputer(e,t,i,s,o){const r=[],a=[];return{addRequest:(l,c,d)=>{r.push(l),a.push(c)},finalize:()=>MG(r,e,t,i,s,o,a)}}}function MG(n,e,t,i,s,o,r){var a;function l(I){const A=r[I];if(A){const T=Mo.applyInjectedText(n[I],A),O=A.map(X=>X.options),R=A.map(X=>X.column-1);return new pf(R,O,[T.length],[],0)}else return null}if(i===-1){const I=[];for(let A=0,T=n.length;A<T;A++)I[A]=l(A);return I}const c=Math.round(i*e.typicalHalfwidthCharacterWidth),u=Math.round(t*(s===3?2:s===2?1:0)),h=Math.ceil(e.spaceWidth*u),f=document.createElement("div");$i(f,e);const g=new Ng(1e4),p=[],_=[],v=[],b=[],w=[];for(let I=0;I<n.length;I++){const A=Mo.applyInjectedText(n[I],r[I]);let T=0,O=0,R=c;if(s!==0)if(T=Jn(A),T===-1)T=0;else{for(let ue=0;ue<T;ue++){const me=A.charCodeAt(ue)===9?t-O%t:1;O+=me}const ae=Math.ceil(e.spaceWidth*O);ae+e.typicalFullwidthCharacterWidth>c?(T=0,O=0):R=c-ae}const X=A.substr(T),ie=RG(X,O,t,R,g,h);p[I]=T,_[I]=O,v[I]=X,b[I]=ie[0],w[I]=ie[1]}const C=g.build(),S=(a=Fb==null?void 0:Fb.createHTML(C))!==null&&a!==void 0?a:C;f.innerHTML=S,f.style.position="absolute",f.style.top="10000",o==="keepAll"?(f.style.wordBreak="keep-all",f.style.overflowWrap="anywhere"):(f.style.wordBreak="inherit",f.style.overflowWrap="break-word"),document.body.appendChild(f);const k=document.createRange(),L=Array.prototype.slice.call(f.children,0),x=[];for(let I=0;I<n.length;I++){const A=L[I],T=PG(k,A,v[I],b[I]);if(T===null){x[I]=l(I);continue}const O=p[I],R=_[I]+u,X=w[I],ie=[];for(let de=0,Ae=T.length;de<Ae;de++)ie[de]=X[T[de]];if(O!==0)for(let de=0,Ae=T.length;de<Ae;de++)T[de]+=O;let ae,ue;const me=r[I];me?(ae=me.map(de=>de.options),ue=me.map(de=>de.column-1)):(ae=null,ue=null),x[I]=new pf(ue,ae,T,ie,R)}return document.body.removeChild(f),x}function RG(n,e,t,i,s,o){if(o!==0){const h=String(o);s.appendString('<div style="text-indent: -'),s.appendString(h),s.appendString("px; padding-left: "),s.appendString(h),s.appendString("px; box-sizing: border-box; width:")}else s.appendString('<div style="width:');s.appendString(String(i)),s.appendString('px;">');const r=n.length;let a=e,l=0;const c=[],d=[];let u=0<r?n.charCodeAt(0):0;s.appendString("<span>");for(let h=0;h<r;h++){h!==0&&h%16384===0&&s.appendString("</span><span>"),c[h]=l,d[h]=a;const f=u;u=h+1<r?n.charCodeAt(h+1):0;let g=1,p=1;switch(f){case 9:g=t-a%t,p=g;for(let _=1;_<=g;_++)_<g?s.appendCharCode(160):s.appendASCIICharCode(32);break;case 32:u===32?s.appendCharCode(160):s.appendASCIICharCode(32);break;case 60:s.appendString("&lt;");break;case 62:s.appendString("&gt;");break;case 38:s.appendString("&amp;");break;case 0:s.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:s.appendCharCode(65533);break;default:cl(f)&&p++,f<32?s.appendCharCode(9216+f):s.appendCharCode(f)}l+=g,a+=p}return s.appendString("</span>"),c[n.length]=l,d[n.length]=a,s.appendString("</div>"),[c,d]}function PG(n,e,t,i){if(t.length<=1)return null;const s=Array.prototype.slice.call(e.children,0),o=[];try{yC(n,s,i,0,null,t.length-1,null,o)}catch(r){return console.log(r),null}return o.length===0?null:(o.push(t.length),o)}function yC(n,e,t,i,s,o,r,a){if(i===o||(s=s||Bb(n,e,t[i],t[i+1]),r=r||Bb(n,e,t[o],t[o+1]),Math.abs(s[0].top-r[0].top)<=.1))return;if(i+1===o){a.push(o);return}const l=i+(o-i)/2|0,c=Bb(n,e,t[l],t[l+1]);yC(n,e,t,i,s,l,c,a),yC(n,e,t,l,c,o,r,a)}function Bb(n,e,t,i){return n.setStart(e[t/16384|0].firstChild,t%16384),n.setEnd(e[i/16384|0].firstChild,i%16384),n.getClientRects()}const iA={value:m("accessibleDiffViewer","Accessible Diff Viewer"),original:"Accessible Diff Viewer"};class eh extends z4{constructor(){super({id:eh.id,title:{value:m("editor.action.accessibleDiffViewer.next","Go to Next Difference"),original:"Go to Next Difference"},category:iA,precondition:Ct.has("isInDiffEditor"),keybinding:{primary:65,weight:100},f1:!0})}run(e){const t=nA(e);t==null||t.accessibleDiffViewerNext()}}eh.id="editor.action.accessibleDiffViewer.next";xo.appendMenuItem(M.EditorTitle,{command:{id:eh.id,title:m("Open Accessible Diff Viewer","Open Accessible Diff Viewer")},order:10,group:"2_diff",when:Ct.and(Se.accessibleDiffViewerVisible.negate(),Ct.has("isInDiffEditor"))});class Ug extends z4{constructor(){super({id:Ug.id,title:{value:m("editor.action.accessibleDiffViewer.prev","Go to Previous Difference"),original:"Go to Previous Difference"},category:iA,precondition:Ct.has("isInDiffEditor"),keybinding:{primary:1089,weight:100},f1:!0})}run(e){const t=nA(e);t==null||t.accessibleDiffViewerPrev()}}Ug.id="editor.action.accessibleDiffViewer.prev";function nA(n){var e;const t=n.get(oi),i=t.listDiffEditors(),s=(e=t.getFocusedCodeEditor())!==null&&e!==void 0?e:t.getActiveCodeEditor();if(!s)return null;for(let o=0,r=i.length;o<r;o++){const a=i[o];if(a.getModifiedEditor().getId()===s.getId()||a.getOriginalEditor().getId()===s.getId())return a}if(document.activeElement)for(const o of i){const r=o.getContainerDomNode();if(OG(r,document.activeElement))return o}return null}function OG(n,e){let t=e;for(;t;){if(t===n)return!0;t=t.parentElement}return!1}nn.registerCommandAlias("editor.action.diffReview.next",eh.id);U4(eh);nn.registerCommandAlias("editor.action.diffReview.prev",Ug.id);U4(Ug);class FG extends oe{constructor(){super(),this._editor=null,this._instantiationService=null,this._instances=this._register(new uS),this._pending=new Map,this._finishedInstantiation=[],this._finishedInstantiation[0]=!1,this._finishedInstantiation[1]=!1,this._finishedInstantiation[2]=!1,this._finishedInstantiation[3]=!1}initialize(e,t,i){this._editor=e,this._instantiationService=i;for(const s of t){if(this._pending.has(s.id)){$t(new Error(`Cannot have two contributions with the same id ${s.id}`));continue}this._pending.set(s.id,s)}this._instantiateSome(0),this._register(Ba(()=>{this._instantiateSome(1)})),this._register(Ba(()=>{this._instantiateSome(2)})),this._register(Ba(()=>{this._instantiateSome(3)},5e3))}saveViewState(){const e={};for(const[t,i]of this._instances)typeof i.saveViewState=="function"&&(e[t]=i.saveViewState());return e}restoreViewState(e){for(const[t,i]of this._instances)typeof i.restoreViewState=="function"&&i.restoreViewState(e[t])}get(e){return this._instantiateById(e),this._instances.get(e)||null}onBeforeInteractionEvent(){this._instantiateSome(2)}onAfterModelAttached(){this._register(Ba(()=>{this._instantiateSome(1)},50))}_instantiateSome(e){if(this._finishedInstantiation[e])return;this._finishedInstantiation[e]=!0;const t=this._findPendingContributionsByInstantiation(e);for(const i of t)this._instantiateById(i.id)}_findPendingContributionsByInstantiation(e){const t=[];for(const[,i]of this._pending)i.instantiation===e&&t.push(i);return t}_instantiateById(e){const t=this._pending.get(e);if(t){if(this._pending.delete(e),!this._instantiationService||!this._editor)throw new Error("Cannot instantiate contributions before being initialized!");try{const i=this._instantiationService.createInstance(t.ctor,this._editor);this._instances.set(t.id,i),typeof i.restoreViewState=="function"&&t.instantiation!==0&&console.warn(`Editor contribution '${t.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`)}catch(i){$t(i)}}}}var BG=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Lr=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},VG=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})},Vl;let WG=0,HG=class{constructor(e,t,i,s,o,r){this.model=e,this.viewModel=t,this.view=i,this.hasRealView=s,this.listenersToRemove=o,this.attachedView=r}dispose(){ci(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}},Bu=Vl=class extends oe{get isSimpleWidget(){return this._configuration.isSimpleWidget}constructor(e,t,i,s,o,r,a,l,c,d,u,h){var f;super(),this.languageConfigurationService=u,this._deliveryQueue=qF(),this._contributions=this._register(new FG),this._onDidDispose=this._register(new q),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new q({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new q({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new q({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new q({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new q({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new q({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new q({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onDidChangeModel=this._register(new q({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new q({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new q({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new rn(this._contributions,this._deliveryQueue)),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new q({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new jk({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new jk({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new rn(this._contributions,this._deliveryQueue)),this.onWillType=this._onWillType.event,this._onDidType=this._register(new rn(this._contributions,this._deliveryQueue)),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new rn(this._contributions,this._deliveryQueue)),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new rn(this._contributions,this._deliveryQueue)),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new rn(this._contributions,this._deliveryQueue)),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new rn(this._contributions,this._deliveryQueue)),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new rn(this._contributions,this._deliveryQueue)),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new rn(this._contributions,this._deliveryQueue)),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new rn(this._contributions,this._deliveryQueue)),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new rn(this._contributions,this._deliveryQueue)),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new rn(this._contributions,this._deliveryQueue)),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new rn(this._contributions,this._deliveryQueue)),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new rn(this._contributions,this._deliveryQueue)),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new rn(this._contributions,this._deliveryQueue)),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new rn(this._contributions,this._deliveryQueue)),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new rn(this._contributions,this._deliveryQueue)),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new rn(this._contributions,this._deliveryQueue)),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new q({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new q({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new q({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new q({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._actions=new Map,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection(),o.willCreateCodeEditor();const g=Object.assign({},t);this._domElement=e,this._overflowWidgetsDomNode=g.overflowWidgetsDomNode,delete g.overflowWidgetsDomNode,this._id=++WG,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=i.telemetryData,this._configuration=this._register(this._createConfiguration(i.isSimpleWidget||!1,g,d)),this._register(this._configuration.onDidChange(v=>{this._onDidChangeConfiguration.fire(v);const b=this._configuration.options;if(v.hasChanged(142)){const w=b.get(142);this._onDidLayoutChange.fire(w)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=c,this._codeEditorService=o,this._commandService=r,this._themeService=l,this._register(new $G(this,this._contextKeyService)),this._register(new zG(this,this._contextKeyService,h)),this._instantiationService=s.createChild(new zg([Et,this._contextKeyService])),this._modelData=null,this._focusTracker=new UG(e),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={},this._glyphMarginWidgets={};let p;Array.isArray(i.contributions)?p=i.contributions:p=uc.getEditorContributions(),this._contributions.initialize(this,p,this._instantiationService);for(const v of uc.getEditorActions()){if(this._actions.has(v.id)){$t(new Error(`Cannot have two actions with the same id ${v.id}`));continue}const b=new R3(v.id,v.label,v.alias,(f=v.precondition)!==null&&f!==void 0?f:void 0,()=>this._instantiationService.invokeFunction(w=>Promise.resolve(v.runEditorCommand(w,this,null))),this._contextKeyService);this._actions.set(b.id,b)}const _=()=>!this._configuration.options.get(89)&&this._configuration.options.get(35).enabled;this._register(new MH(this._domElement,{onDragEnter:()=>{},onDragOver:v=>{if(!_())return;const b=this.getTargetAtClientPoint(v.clientX,v.clientY);b!=null&&b.position&&this.showDropIndicatorAt(b.position)},onDrop:v=>VG(this,void 0,void 0,function*(){if(!_()||(this.removeDropIndicator(),!v.dataTransfer))return;const b=this.getTargetAtClientPoint(v.clientX,v.clientY);b!=null&&b.position&&this._onDropIntoEditor.fire({position:b.position,event:v})}),onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}writeScreenReaderContent(e){var t;(t=this._modelData)===null||t===void 0||t.view.writeScreenReaderContent(e)}_createConfiguration(e,t,i){return new Jw(e,t,this._domElement,i)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return A_.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?ni.getWordAtPosition(this._modelData.model,this._configuration.options.get(128),e):null}getValue(e=null){if(!this._modelData)return"";const t=!!(e&&e.preserveBOM);let i=0;return e&&e.lineEnding&&e.lineEnding===`
`?i=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(i=2),this._modelData.model.getValue(i,t)}setValue(e){this._modelData&&this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){const t=e;if(this._modelData===null&&t===null||this._modelData&&this._modelData.model===t)return;const i=this.hasTextFocus(),s=this._detachModel();this._attachModel(t),i&&this.hasModel()&&this.focus();const o={oldModelUrl:s?s.uri:null,newModelUrl:t?t.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(o),this._postDetachModelCleanup(s),this._contributions.onAfterModelAttached()}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(const e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(const i in t)this._removeDecorationType(e+"-"+i)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(e,t,i,s){const o=e.model.validatePosition({lineNumber:t,column:i}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(o);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(r.lineNumber,s)}getTopForLineNumber(e,t=!1){return this._modelData?Vl._getVerticalOffsetForPosition(this._modelData,e,1,t):-1}getTopForPosition(e,t){return this._modelData?Vl._getVerticalOffsetForPosition(this._modelData,e,t,!1):-1}static _getVerticalOffsetForPosition(e,t,i,s=!1){const o=e.model.validatePosition({lineNumber:t,column:i}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(o);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(r.lineNumber,s)}getBottomForLineNumber(e,t=!1){return this._modelData?Vl._getVerticalOffsetAfterPosition(this._modelData,e,1,t):-1}setHiddenAreas(e,t){var i;(i=this._modelData)===null||i===void 0||i.viewModel.setHiddenAreas(e.map(s=>$.lift(s)),t)}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),i=this._modelData.model.getOptions().tabSize;return Si.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,i)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e,t="api"){if(this._modelData){if(!Y.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,i,s){if(!this._modelData)return;if(!$.isIRange(e))throw new Error("Invalid arguments");const o=this._modelData.model.validateRange(e),r=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(o);this._modelData.viewModel.revealRange("api",i,r,t,s)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,i){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new $(e,1,e,1),t,!1,i)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,i,s){if(!Y.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new $(e.lineNumber,e.column,e.lineNumber,e.column),t,i,s)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e,t="api"){const i=at.isISelection(e),s=$.isIRange(e);if(!i&&!s)throw new Error("Invalid arguments");if(i)this._setSelectionImpl(e,t);else if(s){const o={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(o,t)}}_setSelectionImpl(e,t){if(!this._modelData)return;const i=new at(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(t,[i])}revealLines(e,t,i=0){this._revealLines(e,t,0,i)}revealLinesInCenter(e,t,i=0){this._revealLines(e,t,1,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._revealLines(e,t,2,i)}revealLinesNearTop(e,t,i=0){this._revealLines(e,t,5,i)}_revealLines(e,t,i,s){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new $(e,1,t,1),i,!1,s)}revealRange(e,t=0,i=!1,s=!0){this._revealRange(e,i?1:0,s,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,i,s){if(!$.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange($.lift(e),t,i,s)}setSelections(e,t="api",i=0){if(this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let s=0,o=e.length;s<o;s++)if(!at.isISelection(e[s]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,i)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,t)}hasPendingScrollAnimation(){return this._modelData?this._modelData.viewModel.viewLayout.hasPendingScrollAnimation():!1}saveViewState(){if(!this._modelData)return null;const e=this._contributions.saveViewState(),t=this._modelData.viewModel.saveCursorState(),i=this._modelData.viewModel.saveState();return{cursorState:t,viewState:i,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const i=t.cursorState;Array.isArray(i)?i.length>0&&this._modelData.viewModel.restoreCursorState(i):this._modelData.viewModel.restoreCursorState([i]),this._contributions.restoreViewState(t.contributionsState||{});const s=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(s)}}handleInitialized(){var e;(e=this._getViewModel())===null||e===void 0||e.visibleLinesStabilized()}getContribution(e){return this._contributions.get(e)}getActions(){return Array.from(this._actions.values())}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions.get(e)||null}trigger(e,t,i){switch(i=i||{},t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const o=i;this._type(e,o.text||"");return}case"replacePreviousChar":{const o=i;this._compositionType(e,o.text||"",o.replaceCharCnt||0,0,0);return}case"compositionType":{const o=i;this._compositionType(e,o.text||"",o.replacePrevCharCnt||0,o.replaceNextCharCnt||0,o.positionDelta||0);return}case"paste":{const o=i;this._paste(e,o.text||"",o.pasteOnNewLine||!1,o.multicursorText||null,o.mode||null);return}case"cut":this._cut(e);return}const s=this.getAction(t);if(s){Promise.resolve(s.run(i)).then(void 0,$t);return}this._modelData&&(this._triggerEditorCommand(e,t,i)||this._triggerCommand(t,i))}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,i,s,o){this._modelData&&this._modelData.viewModel.compositionType(t,i,s,o,e)}_paste(e,t,i,s,o){if(!this._modelData||t.length===0)return;const r=this._modelData.viewModel,a=r.getSelection().getStartPosition();r.paste(t,i,s,e);const l=r.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({range:new $(a.lineNumber,a.column,l.lineNumber,l.column),languageId:o})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,i){const s=uc.getEditorCommand(t);return s?(i=i||{},i.source=e,this._instantiationService.invokeFunction(o=>{Promise.resolve(s.runEditorCommand(o,this,i)).then(void 0,$t)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(89)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(89)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,i){if(!this._modelData||this._configuration.options.get(89))return!1;let s;return i?Array.isArray(i)?s=()=>i:s=i:s=()=>null,this._modelData.viewModel.executeEdits(e,t,s),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}createDecorationsCollection(e){return new qG(this,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,qm(this._configuration.options)):null}getDecorationsInRange(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,qm(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){!this._modelData||e.length===0||this._modelData.model.changeDecorations(t=>{t.deltaDecorations(e,[])})}removeDecorationsByType(e){const t=this._decorationTypeKeysToIds[e];t&&this.deltaDecorations(t,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(142)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarPointerDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateScrollFromMouseWheelEvent(e)}layout(e){this._configuration.observeContainer(e),this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const i=this._contentWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(i)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const i=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(i)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const i=this._overlayWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(i)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const i=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(i)}}addGlyphMarginWidget(e){const t={widget:e,position:e.getPosition()};this._glyphMarginWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a glyph margin widget with the same id."),this._glyphMarginWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addGlyphMarginWidget(t)}layoutGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const i=this._glyphMarginWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutGlyphMarginWidget(i)}}removeGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const i=this._glyphMarginWidgets[t];delete this._glyphMarginWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeGlyphMarginWidget(i)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),i=this._configuration.options,s=i.get(142),o=Vl._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),r=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+s.glyphMarginWidth+s.lineNumbersWidth+s.decorationsWidth-this.getScrollLeft();return{top:o,left:r,height:i.get(65)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.view.render(!0,e)}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){$i(e,this._configuration.options.get(49))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=e,this._configuration.setReservedHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e){this._modelData=null;return}const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount());const i=e.onBeforeAttached(),s=new LG(this._id,this._configuration,e,bL.create(),_L.create(this._configuration.options),a=>Ws(a),this.languageConfigurationService,this._themeService,i);t.push(e.onWillDispose(()=>this.setModel(null))),t.push(s.onEvent(a=>{switch(a.kind){case 0:this._onDidContentSizeChange.fire(a);break;case 1:this._editorTextFocus.setValue(a.hasFocus);break;case 2:this._onDidScrollChange.fire(a);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{if(a.reachedMaxCursorCount){const u=this.getOption(78),h=m("cursors.maximum","The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",u);this._notificationService.prompt(EG.Warning,h,[{label:"Find and Replace",run:()=>{this._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:m("goToSetting","Increase Multi Cursor Limit"),run:()=>{this._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}const l=[];for(let u=0,h=a.selections.length;u<h;u++)l[u]=a.selections[u].getPosition();const c={position:l[0],secondaryPositions:l.slice(1),reason:a.reason,source:a.source};this._onDidChangeCursorPosition.fire(c);const d={selection:a.selections[0],secondarySelections:a.selections.slice(1),modelVersionId:a.modelVersionId,oldSelections:a.oldSelections,oldModelVersionId:a.oldModelVersionId,source:a.source,reason:a.reason};this._onDidChangeCursorSelection.fire(d);break}case 7:this._onDidChangeModelDecorations.fire(a.event);break;case 8:this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(a.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(a.event);break;case 10:this._onDidChangeModelContent.fire(a.event);break;case 11:this._onDidChangeModelOptions.fire(a.event);break;case 12:this._onDidChangeModelTokens.fire(a.event);break}}));const[o,r]=this._createView(s);if(r){this._domElement.appendChild(o.domNode.domNode);let a=Object.keys(this._contentWidgets);for(let l=0,c=a.length;l<c;l++){const d=a[l];o.addContentWidget(this._contentWidgets[d])}a=Object.keys(this._overlayWidgets);for(let l=0,c=a.length;l<c;l++){const d=a[l];o.addOverlayWidget(this._overlayWidgets[d])}a=Object.keys(this._glyphMarginWidgets);for(let l=0,c=a.length;l<c;l++){const d=a[l];o.addGlyphMarginWidget(this._glyphMarginWidgets[d])}o.render(!1,!0),o.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new HG(e,s,o,r,t,i)}_createView(e){let t;this.isSimpleWidget?t={paste:(o,r,a,l)=>{this._paste("keyboard",o,r,a,l)},type:o=>{this._type("keyboard",o)},compositionType:(o,r,a,l)=>{this._compositionType("keyboard",o,r,a,l)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(o,r,a,l)=>{const c={text:o,pasteOnNewLine:r,multicursorText:a,mode:l};this._commandService.executeCommand("paste",c)},type:o=>{const r={text:o};this._commandService.executeCommand("type",r)},compositionType:(o,r,a,l)=>{if(a||l){const c={text:o,replacePrevCharCnt:r,replaceNextCharCnt:a,positionDelta:l};this._commandService.executeCommand("compositionType",c)}else{const c={text:o,replaceCharCnt:r};this._commandService.executeCommand("replacePreviousChar",c)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const i=new J_(e.coordinatesConverter);return i.onKeyDown=o=>this._onKeyDown.fire(o),i.onKeyUp=o=>this._onKeyUp.fire(o),i.onContextMenu=o=>this._onContextMenu.fire(o),i.onMouseMove=o=>this._onMouseMove.fire(o),i.onMouseLeave=o=>this._onMouseLeave.fire(o),i.onMouseDown=o=>this._onMouseDown.fire(o),i.onMouseUp=o=>this._onMouseUp.fire(o),i.onMouseDrag=o=>this._onMouseDrag.fire(o),i.onMouseDrop=o=>this._onMouseDrop.fire(o),i.onMouseDropCanceled=o=>this._onMouseDropCanceled.fire(o),i.onMouseWheel=o=>this._onMouseWheel.fire(o),[new aC(t,this._configuration,this._themeService.getColorTheme(),e,i,this._overflowWidgetsDomNode,this._instantiationService),!0]}_postDetachModelCleanup(e){e==null||e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&this._domElement.removeChild(t),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}showDropIndicatorAt(e){const t=[{range:new $(e.lineNumber,e.column,e.lineNumber,e.column),options:Vl.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(t),this.revealPosition(e,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}setContextValue(e,t){this._contextKeyService.createKey(e,t)}};Bu.dropIntoEditorDecorationOptions=Ft.register({description:"workbench-dnd-target",className:"dnd-target"});Bu=Vl=BG([Lr(3,ai),Lr(4,oi),Lr(5,oo),Lr(6,Et),Lr(7,ro),Lr(8,zs),Lr(9,Hc),Lr(10,mr),Lr(11,At)],Bu);class jk extends oe{constructor(e){super(),this._emitterOptions=e,this._onDidChangeToTrue=this._register(new q(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new q(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class rn extends q{constructor(e,t){super({deliveryQueue:t}),this._contributions=e}fire(e){this._contributions.onBeforeInteractionEvent(),super.fire(e)}}class $G extends oe{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=Se.editorSimpleInput.bindTo(t),this._editorFocus=Se.focus.bindTo(t),this._textInputFocus=Se.textInputFocus.bindTo(t),this._editorTextFocus=Se.editorTextFocus.bindTo(t),this._editorTabMovesFocus=Se.tabMovesFocus.bindTo(t),this._editorReadonly=Se.readOnly.bindTo(t),this._inDiffEditor=Se.inDiffEditor.bindTo(t),this._editorColumnSelection=Se.columnSelection.bindTo(t),this._hasMultipleSelections=Se.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=Se.hasNonEmptySelection.bindTo(t),this._canUndo=Se.canUndo.bindTo(t),this._canRedo=Se.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._register(sf.onDidChangeTabFocus(()=>this._editorTabMovesFocus.set(sf.getTabFocusMode("editorFocus")))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._editorTabMovesFocus.set(sf.getTabFocusMode("editorFocus")),this._editorReadonly.set(e.get(89)),this._inDiffEditor.set(e.get(60)),this._editorColumnSelection.set(e.get(21))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}}class zG extends oe{constructor(e,t,i){super(),this._editor=e,this._contextKeyService=t,this._languageFeaturesService=i,this._langId=Se.languageId.bindTo(t),this._hasCompletionItemProvider=Se.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=Se.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=Se.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=Se.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=Se.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=Se.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=Se.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=Se.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=Se.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=Se.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=Se.hasReferenceProvider.bindTo(t),this._hasRenameProvider=Se.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=Se.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=Se.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=Se.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=Se.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=Se.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=Se.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInWalkThrough=Se.isInWalkThroughSnippet.bindTo(t);const s=()=>this._update();this._register(e.onDidChangeModel(s)),this._register(e.onDidChangeModelLanguage(s)),this._register(i.completionProvider.onDidChange(s)),this._register(i.codeActionProvider.onDidChange(s)),this._register(i.codeLensProvider.onDidChange(s)),this._register(i.definitionProvider.onDidChange(s)),this._register(i.declarationProvider.onDidChange(s)),this._register(i.implementationProvider.onDidChange(s)),this._register(i.typeDefinitionProvider.onDidChange(s)),this._register(i.hoverProvider.onDidChange(s)),this._register(i.documentHighlightProvider.onDidChange(s)),this._register(i.documentSymbolProvider.onDidChange(s)),this._register(i.referenceProvider.onDidChange(s)),this._register(i.renameProvider.onDidChange(s)),this._register(i.documentFormattingEditProvider.onDidChange(s)),this._register(i.documentRangeFormattingEditProvider.onDidChange(s)),this._register(i.signatureHelpProvider.onDidChange(s)),this._register(i.inlayHintsProvider.onDidChange(s)),s()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInWalkThrough.set(e.uri.scheme===Je.walkThroughSnippet)})}}class UG extends oe{constructor(e){super(),this._onChange=this._register(new q),this.onChange=this._onChange.event,this._hasFocus=!1,this._domFocusTracker=this._register(H_(e)),this._register(this._domFocusTracker.onDidFocus(()=>{this._hasFocus=!0,this._onChange.fire(void 0)})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasFocus=!1,this._onChange.fire(void 0)}))}hasFocus(){return this._hasFocus}}class qG{get length(){return this._decorationIds.length}constructor(e,t){this._editor=e,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(t)&&t.length>0&&this.set(t)}onDidChange(e,t,i){return this._editor.onDidChangeModelDecorations(s=>{this._isChangingDecorations||e.call(t,s)},i)}getRange(e){return!this._editor.hasModel()||e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e])}getRanges(){if(!this._editor.hasModel())return[];const e=this._editor.getModel(),t=[];for(const i of this._decorationIds){const s=e.getDecorationRange(i);s&&t.push(s)}return t}has(e){return this._decorationIds.includes(e.id)}clear(){this._decorationIds.length!==0&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations(t=>{this._decorationIds=t.deltaDecorations(this._decorationIds,e)})}finally{this._isChangingDecorations=!1}return this._decorationIds}}const jG=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),KG=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function Vb(n){return jG+encodeURIComponent(n.toString())+KG}const GG=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),ZG=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function YG(n){return GG+encodeURIComponent(n.toString())+ZG}sa((n,e)=>{const t=n.getColor(qr);t&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${Vb(t)}") repeat-x bottom left; }`);const i=n.getColor(Ts);i&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${Vb(i)}") repeat-x bottom left; }`);const s=n.getColor(Do);s&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${Vb(s)}") repeat-x bottom left; }`);const o=n.getColor(N$);o&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${YG(o)}") no-repeat bottom left; }`);const r=n.getColor(DU);r&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${r.rgba.a}; }`)});var th=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o};const XG=!1;var Kk;(function(n){n.North="north",n.South="south",n.East="east",n.West="west"})(Kk||(Kk={}));let QG=4;const JG=new q;let eZ=300;const tZ=new q;class vL{constructor(){this.disposables=new Fe}get onPointerMove(){return this.disposables.add(new Qe(window,"mousemove")).event}get onPointerUp(){return this.disposables.add(new Qe(window,"mouseup")).event}dispose(){this.disposables.dispose()}}th([li],vL.prototype,"onPointerMove",null);th([li],vL.prototype,"onPointerUp",null);class wL{get onPointerMove(){return this.disposables.add(new Qe(this.el,It.Change)).event}get onPointerUp(){return this.disposables.add(new Qe(this.el,It.End)).event}constructor(e){this.el=e,this.disposables=new Fe}dispose(){this.disposables.dispose()}}th([li],wL.prototype,"onPointerMove",null);th([li],wL.prototype,"onPointerUp",null);class A0{get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}constructor(e){this.factory=e}dispose(){}}th([li],A0.prototype,"onPointerMove",null);th([li],A0.prototype,"onPointerUp",null);const Gk="pointer-events-disabled";class cs extends oe{get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this._orthogonalStartSash!==e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=i=>{this.orthogonalStartDragHandleDisposables.clear(),i!==0&&(this._orthogonalStartDragHandle=De(this.el,Be(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(st(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new Qe(this._orthogonalStartDragHandle,"mouseenter")).event(()=>cs.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new Qe(this._orthogonalStartDragHandle,"mouseleave")).event(()=>cs.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}}set orthogonalEndSash(e){if(this._orthogonalEndSash!==e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=i=>{this.orthogonalEndDragHandleDisposables.clear(),i!==0&&(this._orthogonalEndDragHandle=De(this.el,Be(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(st(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new Qe(this._orthogonalEndDragHandle,"mouseenter")).event(()=>cs.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new Qe(this._orthogonalEndDragHandle,"mouseleave")).event(()=>cs.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}}constructor(e,t,i){super(),this.hoverDelay=eZ,this.hoverDelayer=this._register(new F_(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new q),this._onDidStart=this._register(new q),this._onDidChange=this._register(new q),this._onDidReset=this._register(new q),this._onDidEnd=this._register(new q),this.orthogonalStartSashDisposables=this._register(new Fe),this.orthogonalStartDragHandleDisposables=this._register(new Fe),this.orthogonalEndSashDisposables=this._register(new Fe),this.orthogonalEndDragHandleDisposables=this._register(new Fe),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=De(e,Be(".monaco-sash")),i.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${i.orthogonalEdge}`),gt&&this.el.classList.add("mac");const s=this._register(new Qe(this.el,"mousedown")).event;this._register(s(u=>this.onPointerStart(u,new vL),this));const o=this._register(new Qe(this.el,"dblclick")).event;this._register(o(this.onPointerDoublePress,this));const r=this._register(new Qe(this.el,"mouseenter")).event;this._register(r(()=>cs.onMouseEnter(this)));const a=this._register(new Qe(this.el,"mouseleave")).event;this._register(a(()=>cs.onMouseLeave(this))),this._register(Ot.addTarget(this.el));const l=this._register(new Qe(this.el,It.Start)).event;this._register(l(u=>this.onPointerStart(u,new wL(this.el)),this));const c=this._register(new Qe(this.el,It.Tap)).event;let d;this._register(c(u=>{if(d){clearTimeout(d),d=void 0,this.onPointerDoublePress(u);return}clearTimeout(d),d=setTimeout(()=>d=void 0,250)},this)),typeof i.size=="number"?(this.size=i.size,i.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=QG,this._register(JG.event(u=>{this.size=u,this.layout()}))),this._register(tZ.event(u=>this.hoverDelay=u)),this.layoutProvider=t,this.orthogonalStartSash=i.orthogonalStartSash,this.orthogonalEndSash=i.orthogonalEndSash,this.orientation=i.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",XG),this.layout()}onPointerStart(e,t){qe.stop(e);let i=!1;if(!e.__orthogonalSashEvent){const g=this.getOrthogonalSash(e);g&&(i=!0,e.__orthogonalSashEvent=!0,g.onPointerStart(e,new A0(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new A0(t))),!this.state)return;const s=document.getElementsByTagName("iframe");for(const g of s)g.classList.add(Gk);const o=e.pageX,r=e.pageY,a=e.altKey,l={startX:o,currentX:o,startY:r,currentY:r,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);const c=so(this.el),d=()=>{let g="";i?g="all-scroll":this.orientation===1?this.state===1?g="s-resize":this.state===2?g="n-resize":g=gt?"row-resize":"ns-resize":this.state===1?g="e-resize":this.state===2?g="w-resize":g=gt?"col-resize":"ew-resize",c.textContent=`* { cursor: ${g} !important; }`},u=new Fe;d(),i||this.onDidEnablementChange.event(d,null,u);const h=g=>{qe.stop(g,!1);const p={startX:o,currentX:g.pageX,startY:r,currentY:g.pageY,altKey:a};this._onDidChange.fire(p)},f=g=>{qe.stop(g,!1),this.el.removeChild(c),this.el.classList.remove("active"),this._onDidEnd.fire(),u.dispose();for(const p of s)p.classList.remove(Gk)};t.onPointerMove(h,null,u),t.onPointerUp(f,null,u),u.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&cs.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&cs.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){cs.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){var t;const i=(t=e.initialTarget)!==null&&t!==void 0?t:e.target;if(!(!i||!(i instanceof HTMLElement))&&i.classList.contains("orthogonal-drag-handle"))return i.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}var Zk,Yk;class iZ{constructor(e,t){this.uri=e,this.value=t}}class vn{constructor(e,t){this[Zk]="ResourceMap",e instanceof vn?(this.map=new Map(e.map),this.toKey=t??vn.defaultToKey):(this.map=new Map,this.toKey=e??vn.defaultToKey)}set(e,t){return this.map.set(this.toKey(e),new iZ(e,t)),this}get(e){var t;return(t=this.map.get(this.toKey(e)))===null||t===void 0?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(const[i,s]of this.map)e(s.value,s.uri,this)}*values(){for(const e of this.map.values())yield e.value}*keys(){for(const e of this.map.values())yield e.uri}*entries(){for(const e of this.map.values())yield[e.uri,e.value]}*[(Zk=Symbol.toStringTag,Symbol.iterator)](){for(const[,e]of this.map)yield[e.uri,e.value]}}vn.defaultToKey=n=>n.toString();class nZ{constructor(){this[Yk]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const i=this._map.get(e);if(i)return t!==0&&this.touch(i,t),i.value}set(e,t,i=0){let s=this._map.get(e);if(s)s.value=t,i!==0&&this.touch(s,i);else{switch(s={key:e,value:t,next:void 0,previous:void 0},i){case 0:this.addItemLast(s);break;case 1:this.addItemFirst(s);break;case 2:this.addItemLast(s);break;default:this.addItemLast(s);break}this._map.set(e,s),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const i=this._state;let s=this._head;for(;s;){if(t?e.bind(t)(s.value,s.key,this):e(s.value,s.key,this),this._state!==i)throw new Error("LinkedMap got modified during iteration.");s=s.next}}keys(){const e=this,t=this._state;let i=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const o={value:i.key,done:!1};return i=i.next,o}else return{value:void 0,done:!0}}};return s}values(){const e=this,t=this._state;let i=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const o={value:i.value,done:!1};return i=i.next,o}else return{value:void 0,done:!0}}};return s}entries(){const e=this,t=this._state;let i=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const o={value:[i.key,i.value],done:!1};return i=i.next,o}else return{value:void 0,done:!0}}};return s}[(Yk=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.next,i--;this._head=t,this._size=i,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const i=e.next,s=e.previous;e===this._tail?(s.next=void 0,this._tail=s):(i.previous=s,s.next=i),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const i=e.next,s=e.previous;e===this._head?(i.previous=void 0,this._head=i):(i.previous=s,s.next=i),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,i)=>{e.push([i,t])}),e}fromJSON(e){this.clear();for(const[t,i]of e)this.set(t,i)}}class CL extends nZ{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}function sA(...n){return function(e,t){for(let i=0,s=n.length;i<s;i++){const o=n[i](e,t);if(o)return o}return null}}oA.bind(void 0,!1);const M0=oA.bind(void 0,!0);function oA(n,e,t){if(!t||t.length<e.length)return null;let i;return n?i=bS(t,e):i=t.indexOf(e)===0,i?e.length>0?[{start:0,end:e.length}]:[]:null}function sZ(n,e){const t=e.toLowerCase().indexOf(n.toLowerCase());return t===-1?null:[{start:t,end:t+n.length}]}function oZ(n,e){return SC(n.toLowerCase(),e.toLowerCase(),0,0)}function SC(n,e,t,i){if(t===n.length)return[];if(i===e.length)return null;if(n[t]===e[i]){let s=null;return(s=SC(n,e,t+1,i+1))?aA({start:i,end:i+1},s):null}return SC(n,e,t,i+1)}function yL(n){return 97<=n&&n<=122}function t1(n){return 65<=n&&n<=90}function SL(n){return 48<=n&&n<=57}function rZ(n){return n===32||n===9||n===10||n===13}const aZ=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(n=>aZ.add(n.charCodeAt(0)));function rA(n){return yL(n)||t1(n)||SL(n)}function aA(n,e){return e.length===0?e=[n]:n.end===e[0].start?e[0].start=n.start:e.unshift(n),e}function lA(n,e){for(let t=e;t<n.length;t++){const i=n.charCodeAt(t);if(t1(i)||SL(i)||t>0&&!rA(n.charCodeAt(t-1)))return t}return n.length}function LC(n,e,t,i){if(t===n.length)return[];if(i===e.length)return null;if(n[t]!==e[i].toLowerCase())return null;{let s=null,o=i+1;for(s=LC(n,e,t+1,i+1);!s&&(o=lA(e,o))<e.length;)s=LC(n,e,t+1,o),o++;return s===null?null:aA({start:i,end:i+1},s)}}function lZ(n){let e=0,t=0,i=0,s=0,o=0;for(let d=0;d<n.length;d++)o=n.charCodeAt(d),t1(o)&&e++,yL(o)&&t++,rA(o)&&i++,SL(o)&&s++;const r=e/n.length,a=t/n.length,l=i/n.length,c=s/n.length;return{upperPercent:r,lowerPercent:a,alphaPercent:l,numericPercent:c}}function cZ(n){const{upperPercent:e,lowerPercent:t}=n;return t===0&&e>.6}function dZ(n){const{upperPercent:e,lowerPercent:t,alphaPercent:i,numericPercent:s}=n;return t>.2&&e<.8&&i>.6&&s<.2}function uZ(n){let e=0,t=0,i=0,s=0;for(let o=0;o<n.length;o++)i=n.charCodeAt(o),t1(i)&&e++,yL(i)&&t++,rZ(i)&&s++;return(e===0||t===0)&&s===0?n.length<=30:e<=5}function cA(n,e){if(!e||(e=e.trim(),e.length===0)||!uZ(n)||e.length>60)return null;const t=lZ(e);if(!dZ(t)){if(!cZ(t))return null;e=e.toLowerCase()}let i=null,s=0;for(n=n.toLowerCase();s<e.length&&(i=LC(n,e,0,s))===null;)s=lA(e,s+1);return i}const hZ=sA(M0,cA,sZ),fZ=sA(M0,cA,oZ),Xk=new CL(1e4);function Qk(n,e,t=!1){if(typeof n!="string"||typeof e!="string")return null;let i=Xk.get(n);i||(i=new RegExp(x6(n),"i"),Xk.set(n,i));const s=i.exec(e);return s?[{start:s.index,end:s.index+s[0].length}]:t?fZ(n,e):hZ(n,e)}function gZ(n,e){const t=fA(n,n.toLowerCase(),0,e,e.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return t?pZ(t):null}function pZ(n){if(typeof n>"u")return[];const e=[],t=n[1];for(let i=n.length-1;i>1;i--){const s=n[i]+t,o=e[e.length-1];o&&o.end===s?o.end=s+1:e.push({start:s,end:s+1})}return e}const ja=128;function LL(){const n=[],e=[];for(let t=0;t<=ja;t++)e[t]=0;for(let t=0;t<=ja;t++)n.push(e.slice(0));return n}function dA(n){const e=[];for(let t=0;t<=n;t++)e[t]=0;return e}const uA=dA(2*ja),xC=dA(2*ja),xr=LL(),Pl=LL(),Wp=LL();function Hp(n,e){if(e<0||e>=n.length)return!1;const t=n.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!SS(t)}}function Jk(n,e){if(e<0||e>=n.length)return!1;switch(n.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function km(n,e,t){return e[n]!==t[n]}function mZ(n,e,t,i,s,o,r=!1){for(;e<t&&s<o;)n[e]===i[s]&&(r&&(uA[e]=s),e+=1),s+=1;return e===t}var au;(function(n){n.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}n.isDefault=e})(au||(au={}));class hA{constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}}hA.default={boostFullMatch:!0,firstMatchCanBeWeak:!1};function fA(n,e,t,i,s,o,r=hA.default){const a=n.length>ja?ja:n.length,l=i.length>ja?ja:i.length;if(t>=a||o>=l||a-t>l-o||!mZ(e,t,a,s,o,l,!0))return;_Z(a,l,t,o,e,s);let c=1,d=1,u=t,h=o;const f=[!1];for(c=1,u=t;u<a;c++,u++){const b=uA[u],w=xC[u],C=u+1<a?xC[u+1]:l;for(d=b-o+1,h=b;h<C;d++,h++){let S=Number.MIN_SAFE_INTEGER,k=!1;h<=w&&(S=bZ(n,e,u,t,i,s,h,l,o,xr[c-1][d-1]===0,f));let L=0;S!==Number.MAX_SAFE_INTEGER&&(k=!0,L=S+Pl[c-1][d-1]);const x=h>b,I=x?Pl[c][d-1]+(xr[c][d-1]>0?-5:0):0,A=h>b+1&&xr[c][d-1]>0,T=A?Pl[c][d-2]+(xr[c][d-2]>0?-5:0):0;if(A&&(!x||T>=I)&&(!k||T>=L))Pl[c][d]=T,Wp[c][d]=3,xr[c][d]=0;else if(x&&(!k||I>=L))Pl[c][d]=I,Wp[c][d]=2,xr[c][d]=0;else if(k)Pl[c][d]=L,Wp[c][d]=1,xr[c][d]=xr[c-1][d-1]+1;else throw new Error("not possible")}}if(!f[0]&&!r.firstMatchCanBeWeak)return;c--,d--;const g=[Pl[c][d],o];let p=0,_=0;for(;c>=1;){let b=d;do{const w=Wp[c][b];if(w===3)b=b-2;else if(w===2)b=b-1;else break}while(b>=1);p>1&&e[t+c-1]===s[o+d-1]&&!km(b+o-1,i,s)&&p+1>xr[c][b]&&(b=d),b===d?p++:p=1,_||(_=b),c--,d=b-1,g.push(d)}l===a&&r.boostFullMatch&&(g[0]+=2);const v=_-a;return g[0]-=v,g}function _Z(n,e,t,i,s,o){let r=n-1,a=e-1;for(;r>=t&&a>=i;)s[r]===o[a]&&(xC[r]=a,r--),a--}function bZ(n,e,t,i,s,o,r,a,l,c,d){if(e[t]!==o[r])return Number.MIN_SAFE_INTEGER;let u=1,h=!1;return r===t-i?u=n[t]===s[r]?7:5:km(r,s,o)&&(r===0||!km(r-1,s,o))?(u=n[t]===s[r]?7:5,h=!0):Hp(o,r)&&(r===0||!Hp(o,r-1))?u=5:(Hp(o,r-1)||Jk(o,r-1))&&(u=5,h=!0),u>1&&t===i&&(d[0]=!0),h||(h=km(r,s,o)||Hp(o,r-1)||Jk(o,r-1)),t===i?r>l&&(u-=h?3:5):c?u+=h?2:0:u+=h?0:1,r+1===a&&(u-=h?3:5),u}const vZ="$(",xL=new RegExp(`\\$\\(${je.iconNameExpression}(?:${je.iconModifierExpression})?\\)`,"g"),wZ=new RegExp(`(\\\\)?${xL.source}`,"g");function CZ(n){return n.replace(wZ,(e,t)=>t?e:`\\${e}`)}const yZ=new RegExp(`\\\\${xL.source}`,"g");function SZ(n){return n.replace(yZ,e=>`\\${e}`)}const LZ=new RegExp(`(\\s)?(\\\\)?${xL.source}(\\s)?`,"g");function gA(n){return n.indexOf(vZ)===-1?n:n.replace(LZ,(e,t,i,s)=>i?e:t||s||"")}function xZ(n){return n?n.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}const Wb=new RegExp(`\\$\\(${je.iconNameCharacter}+\\)`,"g");function Uh(n){Wb.lastIndex=0;let e="";const t=[];let i=0;for(;;){const s=Wb.lastIndex,o=Wb.exec(n),r=n.substring(s,o==null?void 0:o.index);if(r.length>0){e+=r;for(let a=0;a<r.length;a++)t.push(i)}if(!o)break;i+=o[0].length}return{text:e,iconOffsets:t}}function Hb(n,e,t=!1){const{text:i,iconOffsets:s}=e;if(!s||s.length===0)return Qk(n,i,t);const o=S_(i," "),r=i.length-o.length,a=Qk(n,o,t);if(a)for(const l of a){const c=s[l.start+r]+r;l.start+=c,l.end+=c}return a}class i1{constructor(e="",t=!1){var i,s,o;if(this.value=e,typeof this.value!="string")throw C_("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=(i=t.isTrusted)!==null&&i!==void 0?i:void 0,this.supportThemeIcons=(s=t.supportThemeIcons)!==null&&s!==void 0?s:!1,this.supportHtml=(o=t.supportHtml)!==null&&o!==void 0?o:!1)}appendText(e,t=0){return this.value+=kZ(this.supportThemeIcons?CZ(e):e).replace(/([ \t]+)/g,(i,s)=>"&nbsp;".repeat(s.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+="\n```",this.value+=e,this.value+=`
`,this.value+=t,this.value+="\n```\n",this}appendLink(e,t,i){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),i&&(this.value+=` "${this._escape(this._escape(i,'"'),")")}"`),this.value+=")",this}_escape(e,t){const i=new RegExp(ta(t),"g");return e.replace(i,(s,o)=>e.charAt(o-1)!=="\\"?`\\${s}`:s)}}function Em(n){return n instanceof i1?!0:n&&typeof n=="object"?typeof n.value=="string"&&(typeof n.isTrusted=="boolean"||typeof n.isTrusted=="object"||n.isTrusted===void 0)&&(typeof n.supportThemeIcons=="boolean"||n.supportThemeIcons===void 0):!1}function DZ(n,e){return n===e?!0:!n||!e?!1:n.value===e.value&&n.isTrusted===e.isTrusted&&n.supportThemeIcons===e.supportThemeIcons&&n.supportHtml===e.supportHtml&&(n.baseUri===e.baseUri||!!n.baseUri&&!!e.baseUri&&Fj(nt.from(n.baseUri),nt.from(e.baseUri)))}function kZ(n){return n.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function $p(n){return n.replace(/"/g,"&quot;")}function $b(n){return n&&n.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}function EZ(n){const e=[],t=n.split("|").map(s=>s.trim());n=t[0];const i=t[1];if(i){const s=/height=(\d+)/.exec(i),o=/width=(\d+)/.exec(i),r=s?s[1]:"",a=o?o[1]:"",l=isFinite(parseInt(a)),c=isFinite(parseInt(r));l&&e.push(`width="${a}"`),c&&e.push(`height="${r}"`)}return{href:n,dimensions:e}}class tg{static capture(e){if(e.getScrollTop()===0||e.hasPendingScrollAnimation())return new tg(e.getScrollTop(),e.getContentHeight(),null,0,null);let t=null,i=0;const s=e.getVisibleRanges();if(s.length>0){t=s[0].getStartPosition();const o=e.getTopForPosition(t.lineNumber,t.column);i=e.getScrollTop()-o}return new tg(e.getScrollTop(),e.getContentHeight(),t,i,e.getPosition())}constructor(e,t,i,s,o){this._initialScrollTop=e,this._initialContentHeight=t,this._visiblePosition=i,this._visiblePositionScrollDelta=s,this._cursorPosition=o}restore(e){if(!(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())&&this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){if(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())return;const t=e.getPosition();if(!this._cursorPosition||!t)return;const i=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+i)}}const pA={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:Fr.text,INTERNAL_URI_LIST:"application/vnd.code.uri-list"};var DC=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};function IZ(n,e){Qn(e)?n.title=gA(e):e!=null&&e.markdownNotSupportedFallback?n.title=e.markdownNotSupportedFallback:n.removeAttribute("title")}class NZ{constructor(e,t,i){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=i}update(e,t,i){var s;return DC(this,void 0,void 0,function*(){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let o;if(e===void 0||Qn(e)||e instanceof HTMLElement)o=e;else if(!$m(e.markdown))o=(s=e.markdown)!==null&&s!==void 0?s:e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(m("iconLabel.loading","Loading..."),t),this._cancellationTokenSource=new vl;const r=this._cancellationTokenSource.token;if(o=yield e.markdown(r),o===void 0&&(o=e.markdownNotSupportedFallback),this.isDisposed||r.isCancellationRequested)return}this.show(o,t,i)})}show(e,t,i){const s=this._hoverWidget;if(this.hasContent(e)){const o=Object.assign({content:e,target:this.target,showPointer:this.hoverDelegate.placement==="element",hoverPosition:2,skipFadeInAnimation:!this.fadeInAnimation||!!s},i);this._hoverWidget=this.hoverDelegate.showHover(o,t)}s==null||s.dispose()}hasContent(e){return e?Em(e)?!!e.value:!0:!1}get isDisposed(){var e;return(e=this._hoverWidget)===null||e===void 0?void 0:e.isDisposed}dispose(){var e,t;(e=this._hoverWidget)===null||e===void 0||e.dispose(),(t=this._cancellationTokenSource)===null||t===void 0||t.dispose(!0),this._cancellationTokenSource=void 0}}function mA(n,e,t,i){let s,o;const r=(u,h)=>{var f;const g=o!==void 0;u&&(o==null||o.dispose(),o=void 0),h&&(s==null||s.dispose(),s=void 0),g&&((f=n.onDidHideHover)===null||f===void 0||f.call(n))},a=(u,h,f)=>new zc(()=>DC(this,void 0,void 0,function*(){(!o||o.isDisposed)&&(o=new NZ(n,f||e,u>0),yield o.update(t,h,i))}),u),l=()=>{if(s)return;const u=new Fe,h=p=>r(!1,p.fromElement===e);u.add(ee(e,_e.MOUSE_LEAVE,h,!0));const f=()=>r(!0,!0);u.add(ee(e,_e.MOUSE_DOWN,f,!0));const g={targetElements:[e],dispose:()=>{}};if(n.placement===void 0||n.placement==="mouse"){const p=_=>{g.x=_.x+10,_.target instanceof HTMLElement&&_.target.classList.contains("action-label")&&r(!0,!0)};u.add(ee(e,_e.MOUSE_MOVE,p,!0))}u.add(a(n.delay,!1,g)),s=u},c=ee(e,_e.MOUSE_OVER,l,!0);return{show:u=>{r(!1,!0),a(0,u)},hide:()=>{r(!0,!0)},update:(u,h)=>DC(this,void 0,void 0,function*(){t=u,yield o==null?void 0:o.update(t,void 0,h)}),dispose:()=>{c.dispose(),r(!0,!0)}}}function TZ(n,e={}){const t=DL(e);return t.textContent=n,t}function AZ(n,e={}){const t=DL(e);return _A(t,RZ(n,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function DL(n){const e=n.inline?"span":"div",t=document.createElement(e);return n.className&&(t.className=n.className),t}class MZ{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function _A(n,e,t,i){let s;if(e.type===2)s=document.createTextNode(e.content||"");else if(e.type===3)s=document.createElement("b");else if(e.type===4)s=document.createElement("i");else if(e.type===7&&i)s=document.createElement("code");else if(e.type===5&&t){const o=document.createElement("a");t.disposables.add(Ci(o,"click",r=>{t.callback(String(e.index),r)})),s=o}else e.type===8?s=document.createElement("br"):e.type===1&&(s=n);s&&n!==s&&n.appendChild(s),s&&Array.isArray(e.children)&&e.children.forEach(o=>{_A(s,o,t,i)})}function RZ(n,e){const t={type:1,children:[]};let i=0,s=t;const o=[],r=new MZ(n);for(;!r.eos();){let a=r.next();const l=a==="\\"&&kC(r.peek(),e)!==0;if(l&&(a=r.next()),!l&&PZ(a,e)&&a===r.peek()){r.advance(),s.type===2&&(s=o.pop());const c=kC(a,e);if(s.type===c||s.type===5&&c===6)s=o.pop();else{const d={type:c,children:[]};c===5&&(d.index=i,i++),s.children.push(d),o.push(s),s=d}}else if(a===`
`)s.type===2&&(s=o.pop()),s.children.push({type:8});else if(s.type!==2){const c={type:2,content:a};s.children.push(c),o.push(s),s=c}else s.content+=a}return s.type===2&&(s=o.pop()),t}function PZ(n,e){return kC(n,e)!==0}function kC(n,e){switch(n){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}const OZ=new RegExp(`(\\\\)?\\$\\((${je.iconNameExpression}(?:${je.iconModifierExpression})?)\\)`,"g");function _c(n){const e=new Array;let t,i=0,s=0;for(;(t=OZ.exec(n))!==null;){s=t.index||0,i<s&&e.push(n.substring(i,s)),i=(t.index||0)+t[0].length;const[,o,r]=t;e.push(o?`$(${r})`:EC({id:r}))}return i<n.length&&e.push(n.substring(i)),e}function EC(n){const e=Be("span");return e.classList.add(...je.asClassNameArray(n)),e}class bA{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const eE=new bA("id#");let Ln={};(function(){function n(e,t){t(Ln)}n.amd=!0,function(e,t){typeof n=="function"&&n.amd?n(["exports"],t):typeof tn=="object"&&typeof eM<"u"?t(tn):(e=typeof globalThis<"u"?globalThis:e||self,t(e.marked={}))}(this,function(e){function t(z,H){for(var B=0;B<H.length;B++){var E=H[B];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(z,E.key,E)}}function i(z,H,B){return H&&t(z.prototype,H),B&&t(z,B),Object.defineProperty(z,"prototype",{writable:!1}),z}function s(z,H){if(z){if(typeof z=="string")return o(z,H);var B=Object.prototype.toString.call(z).slice(8,-1);if(B==="Object"&&z.constructor&&(B=z.constructor.name),B==="Map"||B==="Set")return Array.from(z);if(B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B))return o(z,H)}}function o(z,H){(H==null||H>z.length)&&(H=z.length);for(var B=0,E=new Array(H);B<H;B++)E[B]=z[B];return E}function r(z,H){var B=typeof Symbol<"u"&&z[Symbol.iterator]||z["@@iterator"];if(B)return(B=B.call(z)).next.bind(B);if(Array.isArray(z)||(B=s(z))||H&&z&&typeof z.length=="number"){B&&(z=B);var E=0;return function(){return E>=z.length?{done:!0}:{done:!1,value:z[E++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}e.defaults=a();function l(z){e.defaults=z}var c=/[&<>"']/,d=/[&<>"']/g,u=/[<>"']|&(?!#?\w+;)/,h=/[<>"']|&(?!#?\w+;)/g,f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},g=function(H){return f[H]};function p(z,H){if(H){if(c.test(z))return z.replace(d,g)}else if(u.test(z))return z.replace(h,g);return z}var _=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function v(z){return z.replace(_,function(H,B){return B=B.toLowerCase(),B==="colon"?":":B.charAt(0)==="#"?B.charAt(1)==="x"?String.fromCharCode(parseInt(B.substring(2),16)):String.fromCharCode(+B.substring(1)):""})}var b=/(^|[^\[])\^/g;function w(z,H){z=typeof z=="string"?z:z.source,H=H||"";var B={replace:function(N,V){return V=V.source||V,V=V.replace(b,"$1"),z=z.replace(N,V),B},getRegex:function(){return new RegExp(z,H)}};return B}var C=/[^\w:]/g,S=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function k(z,H,B){if(z){var E;try{E=decodeURIComponent(v(B)).replace(C,"").toLowerCase()}catch{return null}if(E.indexOf("javascript:")===0||E.indexOf("vbscript:")===0||E.indexOf("data:")===0)return null}H&&!S.test(B)&&(B=T(H,B));try{B=encodeURI(B).replace(/%25/g,"%")}catch{return null}return B}var L={},x=/^[^:]+:\/*[^/]*$/,I=/^([^:]+:)[\s\S]*$/,A=/^([^:]+:\/*[^/]*)[\s\S]*$/;function T(z,H){L[" "+z]||(x.test(z)?L[" "+z]=z+"/":L[" "+z]=ie(z,"/",!0)),z=L[" "+z];var B=z.indexOf(":")===-1;return H.substring(0,2)==="//"?B?H:z.replace(I,"$1")+H:H.charAt(0)==="/"?B?H:z.replace(A,"$1")+H:z+H}var O={exec:function(){}};function R(z){for(var H=1,B,E;H<arguments.length;H++){B=arguments[H];for(E in B)Object.prototype.hasOwnProperty.call(B,E)&&(z[E]=B[E])}return z}function X(z,H){var B=z.replace(/\|/g,function(V,P,Z){for(var ne=!1,ge=P;--ge>=0&&Z[ge]==="\\";)ne=!ne;return ne?"|":" |"}),E=B.split(/ \|/),N=0;if(E[0].trim()||E.shift(),E.length>0&&!E[E.length-1].trim()&&E.pop(),E.length>H)E.splice(H);else for(;E.length<H;)E.push("");for(;N<E.length;N++)E[N]=E[N].trim().replace(/\\\|/g,"|");return E}function ie(z,H,B){var E=z.length;if(E===0)return"";for(var N=0;N<E;){var V=z.charAt(E-N-1);if(V===H&&!B)N++;else if(V!==H&&B)N++;else break}return z.slice(0,E-N)}function ae(z,H){if(z.indexOf(H[1])===-1)return-1;for(var B=z.length,E=0,N=0;N<B;N++)if(z[N]==="\\")N++;else if(z[N]===H[0])E++;else if(z[N]===H[1]&&(E--,E<0))return N;return-1}function ue(z){z&&z.sanitize&&!z.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function me(z,H){if(H<1)return"";for(var B="";H>1;)H&1&&(B+=z),H>>=1,z+=z;return B+z}function de(z,H,B,E){var N=H.href,V=H.title?p(H.title):null,P=z[1].replace(/\\([\[\]])/g,"$1");if(z[0].charAt(0)!=="!"){E.state.inLink=!0;var Z={type:"link",raw:B,href:N,title:V,text:P,tokens:E.inlineTokens(P)};return E.state.inLink=!1,Z}return{type:"image",raw:B,href:N,title:V,text:p(P)}}function Ae(z,H){var B=z.match(/^(\s+)(?:```)/);if(B===null)return H;var E=B[1];return H.split(`
`).map(function(N){var V=N.match(/^\s+/);if(V===null)return N;var P=V[0];return P.length>=E.length?N.slice(E.length):N}).join(`
`)}var ye=function(){function z(B){this.options=B||e.defaults}var H=z.prototype;return H.space=function(E){var N=this.rules.block.newline.exec(E);if(N&&N[0].length>0)return{type:"space",raw:N[0]}},H.code=function(E){var N=this.rules.block.code.exec(E);if(N){var V=N[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:N[0],codeBlockStyle:"indented",text:this.options.pedantic?V:ie(V,`
`)}}},H.fences=function(E){var N=this.rules.block.fences.exec(E);if(N){var V=N[0],P=Ae(V,N[3]||"");return{type:"code",raw:V,lang:N[2]?N[2].trim():N[2],text:P}}},H.heading=function(E){var N=this.rules.block.heading.exec(E);if(N){var V=N[2].trim();if(/#$/.test(V)){var P=ie(V,"#");(this.options.pedantic||!P||/ $/.test(P))&&(V=P.trim())}return{type:"heading",raw:N[0],depth:N[1].length,text:V,tokens:this.lexer.inline(V)}}},H.hr=function(E){var N=this.rules.block.hr.exec(E);if(N)return{type:"hr",raw:N[0]}},H.blockquote=function(E){var N=this.rules.block.blockquote.exec(E);if(N){var V=N[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:N[0],tokens:this.lexer.blockTokens(V,[]),text:V}}},H.list=function(E){var N=this.rules.block.list.exec(E);if(N){var V,P,Z,ne,ge,Ce,Me,Oe,Dt,ht,Re,pt,Lt=N[1].trim(),Fn=Lt.length>1,mt={type:"list",raw:"",ordered:Fn,start:Fn?+Lt.slice(0,-1):"",loose:!1,items:[]};Lt=Fn?"\\d{1,9}\\"+Lt.slice(-1):"\\"+Lt,this.options.pedantic&&(Lt=Fn?Lt:"[*+-]");for(var bi=new RegExp("^( {0,3}"+Lt+")((?:[	 ][^\\n]*)?(?:\\n|$))");E&&(pt=!1,!(!(N=bi.exec(E))||this.rules.block.hr.test(E)));){if(V=N[0],E=E.substring(V.length),Oe=N[2].split(`
`,1)[0],Dt=E.split(`
`,1)[0],this.options.pedantic?(ne=2,Re=Oe.trimLeft()):(ne=N[2].search(/[^ ]/),ne=ne>4?1:ne,Re=Oe.slice(ne),ne+=N[1].length),Ce=!1,!Oe&&/^ *$/.test(Dt)&&(V+=Dt+`
`,E=E.substring(Dt.length+1),pt=!0),!pt)for(var Dl=new RegExp("^ {0,"+Math.min(3,ne-1)+"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))"),kl=new RegExp("^ {0,"+Math.min(3,ne-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"),ao=new RegExp("^ {0,"+Math.min(3,ne-1)+"}(?:```|~~~)"),aa=new RegExp("^ {0,"+Math.min(3,ne-1)+"}#");E&&(ht=E.split(`
`,1)[0],Oe=ht,this.options.pedantic&&(Oe=Oe.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(ao.test(Oe)||aa.test(Oe)||Dl.test(Oe)||kl.test(E)));){if(Oe.search(/[^ ]/)>=ne||!Oe.trim())Re+=`
`+Oe.slice(ne);else if(!Ce)Re+=`
`+Oe;else break;!Ce&&!Oe.trim()&&(Ce=!0),V+=ht+`
`,E=E.substring(ht.length+1)}mt.loose||(Me?mt.loose=!0:/\n *\n *$/.test(V)&&(Me=!0)),this.options.gfm&&(P=/^\[[ xX]\] /.exec(Re),P&&(Z=P[0]!=="[ ] ",Re=Re.replace(/^\[[ xX]\] +/,""))),mt.items.push({type:"list_item",raw:V,task:!!P,checked:Z,loose:!1,text:Re}),mt.raw+=V}mt.items[mt.items.length-1].raw=V.trimRight(),mt.items[mt.items.length-1].text=Re.trimRight(),mt.raw=mt.raw.trimRight();var El=mt.items.length;for(ge=0;ge<El;ge++){this.lexer.state.top=!1,mt.items[ge].tokens=this.lexer.blockTokens(mt.items[ge].text,[]);var Il=mt.items[ge].tokens.filter(function(Nl){return Nl.type==="space"}),Jc=Il.every(function(Nl){for(var k1=Nl.raw.split(""),Oo=0,rh=r(k1),ah;!(ah=rh()).done;){var ip=ah.value;if(ip===`
`&&(Oo+=1),Oo>1)return!0}return!1});!mt.loose&&Il.length&&Jc&&(mt.loose=!0,mt.items[ge].loose=!0)}return mt}},H.html=function(E){var N=this.rules.block.html.exec(E);if(N){var V={type:"html",raw:N[0],pre:!this.options.sanitizer&&(N[1]==="pre"||N[1]==="script"||N[1]==="style"),text:N[0]};if(this.options.sanitize){var P=this.options.sanitizer?this.options.sanitizer(N[0]):p(N[0]);V.type="paragraph",V.text=P,V.tokens=this.lexer.inline(P)}return V}},H.def=function(E){var N=this.rules.block.def.exec(E);if(N){N[3]&&(N[3]=N[3].substring(1,N[3].length-1));var V=N[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:V,raw:N[0],href:N[2],title:N[3]}}},H.table=function(E){var N=this.rules.block.table.exec(E);if(N){var V={type:"table",header:X(N[1]).map(function(Me){return{text:Me}}),align:N[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:N[3]&&N[3].trim()?N[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(V.header.length===V.align.length){V.raw=N[0];var P=V.align.length,Z,ne,ge,Ce;for(Z=0;Z<P;Z++)/^ *-+: *$/.test(V.align[Z])?V.align[Z]="right":/^ *:-+: *$/.test(V.align[Z])?V.align[Z]="center":/^ *:-+ *$/.test(V.align[Z])?V.align[Z]="left":V.align[Z]=null;for(P=V.rows.length,Z=0;Z<P;Z++)V.rows[Z]=X(V.rows[Z],V.header.length).map(function(Me){return{text:Me}});for(P=V.header.length,ne=0;ne<P;ne++)V.header[ne].tokens=this.lexer.inline(V.header[ne].text);for(P=V.rows.length,ne=0;ne<P;ne++)for(Ce=V.rows[ne],ge=0;ge<Ce.length;ge++)Ce[ge].tokens=this.lexer.inline(Ce[ge].text);return V}}},H.lheading=function(E){var N=this.rules.block.lheading.exec(E);if(N)return{type:"heading",raw:N[0],depth:N[2].charAt(0)==="="?1:2,text:N[1],tokens:this.lexer.inline(N[1])}},H.paragraph=function(E){var N=this.rules.block.paragraph.exec(E);if(N){var V=N[1].charAt(N[1].length-1)===`
`?N[1].slice(0,-1):N[1];return{type:"paragraph",raw:N[0],text:V,tokens:this.lexer.inline(V)}}},H.text=function(E){var N=this.rules.block.text.exec(E);if(N)return{type:"text",raw:N[0],text:N[0],tokens:this.lexer.inline(N[0])}},H.escape=function(E){var N=this.rules.inline.escape.exec(E);if(N)return{type:"escape",raw:N[0],text:p(N[1])}},H.tag=function(E){var N=this.rules.inline.tag.exec(E);if(N)return!this.lexer.state.inLink&&/^<a /i.test(N[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(N[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(N[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(N[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:N[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(N[0]):p(N[0]):N[0]}},H.link=function(E){var N=this.rules.inline.link.exec(E);if(N){var V=N[2].trim();if(!this.options.pedantic&&/^</.test(V)){if(!/>$/.test(V))return;var P=ie(V.slice(0,-1),"\\");if((V.length-P.length)%2===0)return}else{var Z=ae(N[2],"()");if(Z>-1){var ne=N[0].indexOf("!")===0?5:4,ge=ne+N[1].length+Z;N[2]=N[2].substring(0,Z),N[0]=N[0].substring(0,ge).trim(),N[3]=""}}var Ce=N[2],Me="";if(this.options.pedantic){var Oe=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(Ce);Oe&&(Ce=Oe[1],Me=Oe[3])}else Me=N[3]?N[3].slice(1,-1):"";return Ce=Ce.trim(),/^</.test(Ce)&&(this.options.pedantic&&!/>$/.test(V)?Ce=Ce.slice(1):Ce=Ce.slice(1,-1)),de(N,{href:Ce&&Ce.replace(this.rules.inline._escapes,"$1"),title:Me&&Me.replace(this.rules.inline._escapes,"$1")},N[0],this.lexer)}},H.reflink=function(E,N){var V;if((V=this.rules.inline.reflink.exec(E))||(V=this.rules.inline.nolink.exec(E))){var P=(V[2]||V[1]).replace(/\s+/g," ");if(P=N[P.toLowerCase()],!P||!P.href){var Z=V[0].charAt(0);return{type:"text",raw:Z,text:Z}}return de(V,P,V[0],this.lexer)}},H.emStrong=function(E,N,V){V===void 0&&(V="");var P=this.rules.inline.emStrong.lDelim.exec(E);if(P&&!(P[3]&&V.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var Z=P[1]||P[2]||"";if(!Z||Z&&(V===""||this.rules.inline.punctuation.exec(V))){var ne=P[0].length-1,ge,Ce,Me=ne,Oe=0,Dt=P[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(Dt.lastIndex=0,N=N.slice(-1*E.length+ne);(P=Dt.exec(N))!=null;)if(ge=P[1]||P[2]||P[3]||P[4]||P[5]||P[6],!!ge){if(Ce=ge.length,P[3]||P[4]){Me+=Ce;continue}else if((P[5]||P[6])&&ne%3&&!((ne+Ce)%3)){Oe+=Ce;continue}if(Me-=Ce,!(Me>0)){if(Ce=Math.min(Ce,Ce+Me+Oe),Math.min(ne,Ce)%2){var ht=E.slice(1,ne+P.index+Ce);return{type:"em",raw:E.slice(0,ne+P.index+Ce+1),text:ht,tokens:this.lexer.inlineTokens(ht)}}var Re=E.slice(2,ne+P.index+Ce-1);return{type:"strong",raw:E.slice(0,ne+P.index+Ce+1),text:Re,tokens:this.lexer.inlineTokens(Re)}}}}}},H.codespan=function(E){var N=this.rules.inline.code.exec(E);if(N){var V=N[2].replace(/\n/g," "),P=/[^ ]/.test(V),Z=/^ /.test(V)&&/ $/.test(V);return P&&Z&&(V=V.substring(1,V.length-1)),V=p(V,!0),{type:"codespan",raw:N[0],text:V}}},H.br=function(E){var N=this.rules.inline.br.exec(E);if(N)return{type:"br",raw:N[0]}},H.del=function(E){var N=this.rules.inline.del.exec(E);if(N)return{type:"del",raw:N[0],text:N[2],tokens:this.lexer.inlineTokens(N[2])}},H.autolink=function(E,N){var V=this.rules.inline.autolink.exec(E);if(V){var P,Z;return V[2]==="@"?(P=p(this.options.mangle?N(V[1]):V[1]),Z="mailto:"+P):(P=p(V[1]),Z=P),{type:"link",raw:V[0],text:P,href:Z,tokens:[{type:"text",raw:P,text:P}]}}},H.url=function(E,N){var V;if(V=this.rules.inline.url.exec(E)){var P,Z;if(V[2]==="@")P=p(this.options.mangle?N(V[0]):V[0]),Z="mailto:"+P;else{var ne;do ne=V[0],V[0]=this.rules.inline._backpedal.exec(V[0])[0];while(ne!==V[0]);P=p(V[0]),V[1]==="www."?Z="http://"+P:Z=P}return{type:"link",raw:V[0],text:P,href:Z,tokens:[{type:"text",raw:P,text:P}]}}},H.inlineText=function(E,N){var V=this.rules.inline.text.exec(E);if(V){var P;return this.lexer.state.inRawBlock?P=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(V[0]):p(V[0]):V[0]:P=p(this.options.smartypants?N(V[0]):V[0]),{type:"text",raw:V[0],text:P}}},z}(),be={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:O,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};be._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,be._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,be.def=w(be.def).replace("label",be._label).replace("title",be._title).getRegex(),be.bullet=/(?:[*+-]|\d{1,9}[.)])/,be.listItemStart=w(/^( *)(bull) */).replace("bull",be.bullet).getRegex(),be.list=w(be.list).replace(/bull/g,be.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+be.def.source+")").getRegex(),be._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",be._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,be.html=w(be.html,"i").replace("comment",be._comment).replace("tag",be._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),be.paragraph=w(be._paragraph).replace("hr",be.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",be._tag).getRegex(),be.blockquote=w(be.blockquote).replace("paragraph",be.paragraph).getRegex(),be.normal=R({},be),be.gfm=R({},be.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),be.gfm.table=w(be.gfm.table).replace("hr",be.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",be._tag).getRegex(),be.gfm.paragraph=w(be._paragraph).replace("hr",be.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",be.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",be._tag).getRegex(),be.pedantic=R({},be.normal,{html:w(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",be._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:O,paragraph:w(be.normal._paragraph).replace("hr",be.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",be.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var le={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:O,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:O,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};le._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",le.punctuation=w(le.punctuation).replace(/punctuation/g,le._punctuation).getRegex(),le.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,le.escapedEmSt=/\\\*|\\_/g,le._comment=w(be._comment).replace("(?:-->|$)","-->").getRegex(),le.emStrong.lDelim=w(le.emStrong.lDelim).replace(/punct/g,le._punctuation).getRegex(),le.emStrong.rDelimAst=w(le.emStrong.rDelimAst,"g").replace(/punct/g,le._punctuation).getRegex(),le.emStrong.rDelimUnd=w(le.emStrong.rDelimUnd,"g").replace(/punct/g,le._punctuation).getRegex(),le._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,le._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,le._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,le.autolink=w(le.autolink).replace("scheme",le._scheme).replace("email",le._email).getRegex(),le._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,le.tag=w(le.tag).replace("comment",le._comment).replace("attribute",le._attribute).getRegex(),le._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,le._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,le._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,le.link=w(le.link).replace("label",le._label).replace("href",le._href).replace("title",le._title).getRegex(),le.reflink=w(le.reflink).replace("label",le._label).replace("ref",be._label).getRegex(),le.nolink=w(le.nolink).replace("ref",be._label).getRegex(),le.reflinkSearch=w(le.reflinkSearch,"g").replace("reflink",le.reflink).replace("nolink",le.nolink).getRegex(),le.normal=R({},le),le.pedantic=R({},le.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:w(/^!?\[(label)\]\((.*?)\)/).replace("label",le._label).getRegex(),reflink:w(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",le._label).getRegex()}),le.gfm=R({},le.normal,{escape:w(le.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),le.gfm.url=w(le.gfm.url,"i").replace("email",le.gfm._extended_email).getRegex(),le.breaks=R({},le.gfm,{br:w(le.br).replace("{2,}","*").getRegex(),text:w(le.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function Bt(z){return z.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function Ri(z){var H="",B,E,N=z.length;for(B=0;B<N;B++)E=z.charCodeAt(B),Math.random()>.5&&(E="x"+E.toString(16)),H+="&#"+E+";";return H}var Mt=function(){function z(B){this.tokens=[],this.tokens.links=Object.create(null),this.options=B||e.defaults,this.options.tokenizer=this.options.tokenizer||new ye,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var E={block:be.normal,inline:le.normal};this.options.pedantic?(E.block=be.pedantic,E.inline=le.pedantic):this.options.gfm&&(E.block=be.gfm,this.options.breaks?E.inline=le.breaks:E.inline=le.gfm),this.tokenizer.rules=E}z.lex=function(E,N){var V=new z(N);return V.lex(E)},z.lexInline=function(E,N){var V=new z(N);return V.inlineTokens(E)};var H=z.prototype;return H.lex=function(E){E=E.replace(/\r\n|\r/g,`
`),this.blockTokens(E,this.tokens);for(var N;N=this.inlineQueue.shift();)this.inlineTokens(N.src,N.tokens);return this.tokens},H.blockTokens=function(E,N){var V=this;N===void 0&&(N=[]),this.options.pedantic?E=E.replace(/\t/g,"    ").replace(/^ +$/gm,""):E=E.replace(/^( *)(\t+)/gm,function(Me,Oe,Dt){return Oe+"    ".repeat(Dt.length)});for(var P,Z,ne,ge;E;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(Me){return(P=Me.call({lexer:V},E,N))?(E=E.substring(P.raw.length),N.push(P),!0):!1}))){if(P=this.tokenizer.space(E)){E=E.substring(P.raw.length),P.raw.length===1&&N.length>0?N[N.length-1].raw+=`
`:N.push(P);continue}if(P=this.tokenizer.code(E)){E=E.substring(P.raw.length),Z=N[N.length-1],Z&&(Z.type==="paragraph"||Z.type==="text")?(Z.raw+=`
`+P.raw,Z.text+=`
`+P.text,this.inlineQueue[this.inlineQueue.length-1].src=Z.text):N.push(P);continue}if(P=this.tokenizer.fences(E)){E=E.substring(P.raw.length),N.push(P);continue}if(P=this.tokenizer.heading(E)){E=E.substring(P.raw.length),N.push(P);continue}if(P=this.tokenizer.hr(E)){E=E.substring(P.raw.length),N.push(P);continue}if(P=this.tokenizer.blockquote(E)){E=E.substring(P.raw.length),N.push(P);continue}if(P=this.tokenizer.list(E)){E=E.substring(P.raw.length),N.push(P);continue}if(P=this.tokenizer.html(E)){E=E.substring(P.raw.length),N.push(P);continue}if(P=this.tokenizer.def(E)){E=E.substring(P.raw.length),Z=N[N.length-1],Z&&(Z.type==="paragraph"||Z.type==="text")?(Z.raw+=`
`+P.raw,Z.text+=`
`+P.raw,this.inlineQueue[this.inlineQueue.length-1].src=Z.text):this.tokens.links[P.tag]||(this.tokens.links[P.tag]={href:P.href,title:P.title});continue}if(P=this.tokenizer.table(E)){E=E.substring(P.raw.length),N.push(P);continue}if(P=this.tokenizer.lheading(E)){E=E.substring(P.raw.length),N.push(P);continue}if(ne=E,this.options.extensions&&this.options.extensions.startBlock&&function(){var Me=1/0,Oe=E.slice(1),Dt=void 0;V.options.extensions.startBlock.forEach(function(ht){Dt=ht.call({lexer:this},Oe),typeof Dt=="number"&&Dt>=0&&(Me=Math.min(Me,Dt))}),Me<1/0&&Me>=0&&(ne=E.substring(0,Me+1))}(),this.state.top&&(P=this.tokenizer.paragraph(ne))){Z=N[N.length-1],ge&&Z.type==="paragraph"?(Z.raw+=`
`+P.raw,Z.text+=`
`+P.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=Z.text):N.push(P),ge=ne.length!==E.length,E=E.substring(P.raw.length);continue}if(P=this.tokenizer.text(E)){E=E.substring(P.raw.length),Z=N[N.length-1],Z&&Z.type==="text"?(Z.raw+=`
`+P.raw,Z.text+=`
`+P.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=Z.text):N.push(P);continue}if(E){var Ce="Infinite loop on byte: "+E.charCodeAt(0);if(this.options.silent){console.error(Ce);break}else throw new Error(Ce)}}return this.state.top=!0,N},H.inline=function(E,N){return N===void 0&&(N=[]),this.inlineQueue.push({src:E,tokens:N}),N},H.inlineTokens=function(E,N){var V=this;N===void 0&&(N=[]);var P,Z,ne,ge=E,Ce,Me,Oe;if(this.tokens.links){var Dt=Object.keys(this.tokens.links);if(Dt.length>0)for(;(Ce=this.tokenizer.rules.inline.reflinkSearch.exec(ge))!=null;)Dt.includes(Ce[0].slice(Ce[0].lastIndexOf("[")+1,-1))&&(ge=ge.slice(0,Ce.index)+"["+me("a",Ce[0].length-2)+"]"+ge.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(Ce=this.tokenizer.rules.inline.blockSkip.exec(ge))!=null;)ge=ge.slice(0,Ce.index)+"["+me("a",Ce[0].length-2)+"]"+ge.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(Ce=this.tokenizer.rules.inline.escapedEmSt.exec(ge))!=null;)ge=ge.slice(0,Ce.index)+"++"+ge.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;E;)if(Me||(Oe=""),Me=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(Re){return(P=Re.call({lexer:V},E,N))?(E=E.substring(P.raw.length),N.push(P),!0):!1}))){if(P=this.tokenizer.escape(E)){E=E.substring(P.raw.length),N.push(P);continue}if(P=this.tokenizer.tag(E)){E=E.substring(P.raw.length),Z=N[N.length-1],Z&&P.type==="text"&&Z.type==="text"?(Z.raw+=P.raw,Z.text+=P.text):N.push(P);continue}if(P=this.tokenizer.link(E)){E=E.substring(P.raw.length),N.push(P);continue}if(P=this.tokenizer.reflink(E,this.tokens.links)){E=E.substring(P.raw.length),Z=N[N.length-1],Z&&P.type==="text"&&Z.type==="text"?(Z.raw+=P.raw,Z.text+=P.text):N.push(P);continue}if(P=this.tokenizer.emStrong(E,ge,Oe)){E=E.substring(P.raw.length),N.push(P);continue}if(P=this.tokenizer.codespan(E)){E=E.substring(P.raw.length),N.push(P);continue}if(P=this.tokenizer.br(E)){E=E.substring(P.raw.length),N.push(P);continue}if(P=this.tokenizer.del(E)){E=E.substring(P.raw.length),N.push(P);continue}if(P=this.tokenizer.autolink(E,Ri)){E=E.substring(P.raw.length),N.push(P);continue}if(!this.state.inLink&&(P=this.tokenizer.url(E,Ri))){E=E.substring(P.raw.length),N.push(P);continue}if(ne=E,this.options.extensions&&this.options.extensions.startInline&&function(){var Re=1/0,pt=E.slice(1),Lt=void 0;V.options.extensions.startInline.forEach(function(Fn){Lt=Fn.call({lexer:this},pt),typeof Lt=="number"&&Lt>=0&&(Re=Math.min(Re,Lt))}),Re<1/0&&Re>=0&&(ne=E.substring(0,Re+1))}(),P=this.tokenizer.inlineText(ne,Bt)){E=E.substring(P.raw.length),P.raw.slice(-1)!=="_"&&(Oe=P.raw.slice(-1)),Me=!0,Z=N[N.length-1],Z&&Z.type==="text"?(Z.raw+=P.raw,Z.text+=P.text):N.push(P);continue}if(E){var ht="Infinite loop on byte: "+E.charCodeAt(0);if(this.options.silent){console.error(ht);break}else throw new Error(ht)}}return N},i(z,null,[{key:"rules",get:function(){return{block:be,inline:le}}}]),z}(),fn=function(){function z(B){this.options=B||e.defaults}var H=z.prototype;return H.code=function(E,N,V){var P=(N||"").match(/\S*/)[0];if(this.options.highlight){var Z=this.options.highlight(E,P);Z!=null&&Z!==E&&(V=!0,E=Z)}return E=E.replace(/\n$/,"")+`
`,P?'<pre><code class="'+this.options.langPrefix+p(P,!0)+'">'+(V?E:p(E,!0))+`</code></pre>
`:"<pre><code>"+(V?E:p(E,!0))+`</code></pre>
`},H.blockquote=function(E){return`<blockquote>
`+E+`</blockquote>
`},H.html=function(E){return E},H.heading=function(E,N,V,P){if(this.options.headerIds){var Z=this.options.headerPrefix+P.slug(V);return"<h"+N+' id="'+Z+'">'+E+"</h"+N+`>
`}return"<h"+N+">"+E+"</h"+N+`>
`},H.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},H.list=function(E,N,V){var P=N?"ol":"ul",Z=N&&V!==1?' start="'+V+'"':"";return"<"+P+Z+`>
`+E+"</"+P+`>
`},H.listitem=function(E){return"<li>"+E+`</li>
`},H.checkbox=function(E){return"<input "+(E?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},H.paragraph=function(E){return"<p>"+E+`</p>
`},H.table=function(E,N){return N&&(N="<tbody>"+N+"</tbody>"),`<table>
<thead>
`+E+`</thead>
`+N+`</table>
`},H.tablerow=function(E){return`<tr>
`+E+`</tr>
`},H.tablecell=function(E,N){var V=N.header?"th":"td",P=N.align?"<"+V+' align="'+N.align+'">':"<"+V+">";return P+E+("</"+V+`>
`)},H.strong=function(E){return"<strong>"+E+"</strong>"},H.em=function(E){return"<em>"+E+"</em>"},H.codespan=function(E){return"<code>"+E+"</code>"},H.br=function(){return this.options.xhtml?"<br/>":"<br>"},H.del=function(E){return"<del>"+E+"</del>"},H.link=function(E,N,V){if(E=k(this.options.sanitize,this.options.baseUrl,E),E===null)return V;var P='<a href="'+p(E)+'"';return N&&(P+=' title="'+N+'"'),P+=">"+V+"</a>",P},H.image=function(E,N,V){if(E=k(this.options.sanitize,this.options.baseUrl,E),E===null)return V;var P='<img src="'+E+'" alt="'+V+'"';return N&&(P+=' title="'+N+'"'),P+=this.options.xhtml?"/>":">",P},H.text=function(E){return E},z}(),ut=function(){function z(){}var H=z.prototype;return H.strong=function(E){return E},H.em=function(E){return E},H.codespan=function(E){return E},H.del=function(E){return E},H.html=function(E){return E},H.text=function(E){return E},H.link=function(E,N,V){return""+V},H.image=function(E,N,V){return""+V},H.br=function(){return""},z}(),_i=function(){function z(){this.seen={}}var H=z.prototype;return H.serialize=function(E){return E.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},H.getNextSafeSlug=function(E,N){var V=E,P=0;if(this.seen.hasOwnProperty(V)){P=this.seen[E];do P++,V=E+"-"+P;while(this.seen.hasOwnProperty(V))}return N||(this.seen[E]=P,this.seen[V]=0),V},H.slug=function(E,N){N===void 0&&(N={});var V=this.serialize(E);return this.getNextSafeSlug(V,N.dryrun)},z}(),qt=function(){function z(B){this.options=B||e.defaults,this.options.renderer=this.options.renderer||new fn,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new ut,this.slugger=new _i}z.parse=function(E,N){var V=new z(N);return V.parse(E)},z.parseInline=function(E,N){var V=new z(N);return V.parseInline(E)};var H=z.prototype;return H.parse=function(E,N){N===void 0&&(N=!0);var V="",P,Z,ne,ge,Ce,Me,Oe,Dt,ht,Re,pt,Lt,Fn,mt,bi,Dl,kl,ao,aa,El=E.length;for(P=0;P<El;P++){if(Re=E[P],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Re.type]&&(aa=this.options.extensions.renderers[Re.type].call({parser:this},Re),aa!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(Re.type))){V+=aa||"";continue}switch(Re.type){case"space":continue;case"hr":{V+=this.renderer.hr();continue}case"heading":{V+=this.renderer.heading(this.parseInline(Re.tokens),Re.depth,v(this.parseInline(Re.tokens,this.textRenderer)),this.slugger);continue}case"code":{V+=this.renderer.code(Re.text,Re.lang,Re.escaped);continue}case"table":{for(Dt="",Oe="",ge=Re.header.length,Z=0;Z<ge;Z++)Oe+=this.renderer.tablecell(this.parseInline(Re.header[Z].tokens),{header:!0,align:Re.align[Z]});for(Dt+=this.renderer.tablerow(Oe),ht="",ge=Re.rows.length,Z=0;Z<ge;Z++){for(Me=Re.rows[Z],Oe="",Ce=Me.length,ne=0;ne<Ce;ne++)Oe+=this.renderer.tablecell(this.parseInline(Me[ne].tokens),{header:!1,align:Re.align[ne]});ht+=this.renderer.tablerow(Oe)}V+=this.renderer.table(Dt,ht);continue}case"blockquote":{ht=this.parse(Re.tokens),V+=this.renderer.blockquote(ht);continue}case"list":{for(pt=Re.ordered,Lt=Re.start,Fn=Re.loose,ge=Re.items.length,ht="",Z=0;Z<ge;Z++)bi=Re.items[Z],Dl=bi.checked,kl=bi.task,mt="",bi.task&&(ao=this.renderer.checkbox(Dl),Fn?bi.tokens.length>0&&bi.tokens[0].type==="paragraph"?(bi.tokens[0].text=ao+" "+bi.tokens[0].text,bi.tokens[0].tokens&&bi.tokens[0].tokens.length>0&&bi.tokens[0].tokens[0].type==="text"&&(bi.tokens[0].tokens[0].text=ao+" "+bi.tokens[0].tokens[0].text)):bi.tokens.unshift({type:"text",text:ao}):mt+=ao),mt+=this.parse(bi.tokens,Fn),ht+=this.renderer.listitem(mt,kl,Dl);V+=this.renderer.list(ht,pt,Lt);continue}case"html":{V+=this.renderer.html(Re.text);continue}case"paragraph":{V+=this.renderer.paragraph(this.parseInline(Re.tokens));continue}case"text":{for(ht=Re.tokens?this.parseInline(Re.tokens):Re.text;P+1<El&&E[P+1].type==="text";)Re=E[++P],ht+=`
`+(Re.tokens?this.parseInline(Re.tokens):Re.text);V+=N?this.renderer.paragraph(ht):ht;continue}default:{var Il='Token with "'+Re.type+'" type was not found.';if(this.options.silent){console.error(Il);return}else throw new Error(Il)}}}return V},H.parseInline=function(E,N){N=N||this.renderer;var V="",P,Z,ne,ge=E.length;for(P=0;P<ge;P++){if(Z=E[P],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Z.type]&&(ne=this.options.extensions.renderers[Z.type].call({parser:this},Z),ne!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(Z.type))){V+=ne||"";continue}switch(Z.type){case"escape":{V+=N.text(Z.text);break}case"html":{V+=N.html(Z.text);break}case"link":{V+=N.link(Z.href,Z.title,this.parseInline(Z.tokens,N));break}case"image":{V+=N.image(Z.href,Z.title,Z.text);break}case"strong":{V+=N.strong(this.parseInline(Z.tokens,N));break}case"em":{V+=N.em(this.parseInline(Z.tokens,N));break}case"codespan":{V+=N.codespan(Z.text);break}case"br":{V+=N.br();break}case"del":{V+=N.del(this.parseInline(Z.tokens,N));break}case"text":{V+=N.text(Z.text);break}default:{var Ce='Token with "'+Z.type+'" type was not found.';if(this.options.silent){console.error(Ce);return}else throw new Error(Ce)}}}return V},z}();function Ve(z,H,B){if(typeof z>"u"||z===null)throw new Error("marked(): input parameter is undefined or null");if(typeof z!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(z)+", string expected");if(typeof H=="function"&&(B=H,H=null),H=R({},Ve.defaults,H||{}),ue(H),B){var E=H.highlight,N;try{N=Mt.lex(z,H)}catch(ge){return B(ge)}var V=function(Ce){var Me;if(!Ce)try{H.walkTokens&&Ve.walkTokens(N,H.walkTokens),Me=qt.parse(N,H)}catch(Oe){Ce=Oe}return H.highlight=E,Ce?B(Ce):B(null,Me)};if(!E||E.length<3||(delete H.highlight,!N.length))return V();var P=0;Ve.walkTokens(N,function(ge){ge.type==="code"&&(P++,setTimeout(function(){E(ge.text,ge.lang,function(Ce,Me){if(Ce)return V(Ce);Me!=null&&Me!==ge.text&&(ge.text=Me,ge.escaped=!0),P--,P===0&&V()})},0))}),P===0&&V();return}function Z(ge){if(ge.message+=`
Please report this to https://github.com/markedjs/marked.`,H.silent)return"<p>An error occurred:</p><pre>"+p(ge.message+"",!0)+"</pre>";throw ge}try{var ne=Mt.lex(z,H);if(H.walkTokens){if(H.async)return Promise.all(Ve.walkTokens(ne,H.walkTokens)).then(function(){return qt.parse(ne,H)}).catch(Z);Ve.walkTokens(ne,H.walkTokens)}return qt.parse(ne,H)}catch(ge){Z(ge)}}Ve.options=Ve.setOptions=function(z){return R(Ve.defaults,z),l(Ve.defaults),Ve},Ve.getDefaults=a,Ve.defaults=e.defaults,Ve.use=function(){for(var z=arguments.length,H=new Array(z),B=0;B<z;B++)H[B]=arguments[B];var E=R.apply(void 0,[{}].concat(H)),N=Ve.defaults.extensions||{renderers:{},childTokens:{}},V;H.forEach(function(P){if(P.extensions&&(V=!0,P.extensions.forEach(function(ne){if(!ne.name)throw new Error("extension name required");if(ne.renderer){var ge=N.renderers?N.renderers[ne.name]:null;ge?N.renderers[ne.name]=function(){for(var Ce=arguments.length,Me=new Array(Ce),Oe=0;Oe<Ce;Oe++)Me[Oe]=arguments[Oe];var Dt=ne.renderer.apply(this,Me);return Dt===!1&&(Dt=ge.apply(this,Me)),Dt}:N.renderers[ne.name]=ne.renderer}if(ne.tokenizer){if(!ne.level||ne.level!=="block"&&ne.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");N[ne.level]?N[ne.level].unshift(ne.tokenizer):N[ne.level]=[ne.tokenizer],ne.start&&(ne.level==="block"?N.startBlock?N.startBlock.push(ne.start):N.startBlock=[ne.start]:ne.level==="inline"&&(N.startInline?N.startInline.push(ne.start):N.startInline=[ne.start]))}ne.childTokens&&(N.childTokens[ne.name]=ne.childTokens)})),P.renderer&&function(){var ne=Ve.defaults.renderer||new fn,ge=function(Oe){var Dt=ne[Oe];ne[Oe]=function(){for(var ht=arguments.length,Re=new Array(ht),pt=0;pt<ht;pt++)Re[pt]=arguments[pt];var Lt=P.renderer[Oe].apply(ne,Re);return Lt===!1&&(Lt=Dt.apply(ne,Re)),Lt}};for(var Ce in P.renderer)ge(Ce);E.renderer=ne}(),P.tokenizer&&function(){var ne=Ve.defaults.tokenizer||new ye,ge=function(Oe){var Dt=ne[Oe];ne[Oe]=function(){for(var ht=arguments.length,Re=new Array(ht),pt=0;pt<ht;pt++)Re[pt]=arguments[pt];var Lt=P.tokenizer[Oe].apply(ne,Re);return Lt===!1&&(Lt=Dt.apply(ne,Re)),Lt}};for(var Ce in P.tokenizer)ge(Ce);E.tokenizer=ne}(),P.walkTokens){var Z=Ve.defaults.walkTokens;E.walkTokens=function(ne){var ge=[];return ge.push(P.walkTokens.call(this,ne)),Z&&(ge=ge.concat(Z.call(this,ne))),ge}}V&&(E.extensions=N),Ve.setOptions(E)})},Ve.walkTokens=function(z,H){for(var B=[],E=function(){var Z=V.value;switch(B=B.concat(H.call(Ve,Z)),Z.type){case"table":{for(var ne=r(Z.header),ge;!(ge=ne()).done;){var Ce=ge.value;B=B.concat(Ve.walkTokens(Ce.tokens,H))}for(var Me=r(Z.rows),Oe;!(Oe=Me()).done;)for(var Dt=Oe.value,ht=r(Dt),Re;!(Re=ht()).done;){var pt=Re.value;B=B.concat(Ve.walkTokens(pt.tokens,H))}break}case"list":{B=B.concat(Ve.walkTokens(Z.items,H));break}default:Ve.defaults.extensions&&Ve.defaults.extensions.childTokens&&Ve.defaults.extensions.childTokens[Z.type]?Ve.defaults.extensions.childTokens[Z.type].forEach(function(Lt){B=B.concat(Ve.walkTokens(Z[Lt],H))}):Z.tokens&&(B=B.concat(Ve.walkTokens(Z.tokens,H)))}},N=r(z),V;!(V=N()).done;)E();return B},Ve.parseInline=function(z,H){if(typeof z>"u"||z===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof z!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(z)+", string expected");H=R({},Ve.defaults,H||{}),ue(H);try{var B=Mt.lexInline(z,H);return H.walkTokens&&Ve.walkTokens(B,H.walkTokens),qt.parseInline(B,H)}catch(E){if(E.message+=`
Please report this to https://github.com/markedjs/marked.`,H.silent)return"<p>An error occurred:</p><pre>"+p(E.message+"",!0)+"</pre>";throw E}},Ve.Parser=qt,Ve.parser=qt.parse,Ve.Renderer=fn,Ve.TextRenderer=ut,Ve.Lexer=Mt,Ve.lexer=Mt.lex,Ve.Tokenizer=ye,Ve.Slugger=_i,Ve.parse=Ve;var On=Ve.options,U=Ve.setOptions,G=Ve.use,re=Ve.walkTokens,ce=Ve.parseInline,fe=Ve,xe=qt.parse,Te=Mt.lex;e.Lexer=Mt,e.Parser=qt,e.Renderer=fn,e.Slugger=_i,e.TextRenderer=ut,e.Tokenizer=ye,e.getDefaults=a,e.lexer=Te,e.marked=Ve,e.options=On,e.parse=fe,e.parseInline=ce,e.parser=xe,e.setOptions=U,e.use=G,e.walkTokens=re,Object.defineProperty(e,"__esModule",{value:!0})})})();Ln.Lexer||tn.Lexer;Ln.Parser||tn.Parser;Ln.Renderer||tn.Renderer;Ln.Slugger||tn.Slugger;Ln.TextRenderer||tn.TextRenderer;Ln.Tokenizer||tn.Tokenizer;Ln.getDefaults||tn.getDefaults;Ln.lexer||tn.lexer;var er=Ln.marked||tn.marked;Ln.options||tn.options;Ln.parse||tn.parse;Ln.parseInline||tn.parseInline;Ln.parser||tn.parser;Ln.setOptions||tn.setOptions;Ln.use||tn.use;Ln.walkTokens||tn.walkTokens;function FZ(n){return JSON.stringify(n,BZ)}function IC(n){let e=JSON.parse(n);return e=NC(e),e}function BZ(n,e){return e instanceof RegExp?{$mid:2,source:e.source,flags:e.flags}:e}function NC(n,e=0){if(!n||e>200)return n;if(typeof n=="object"){switch(n.$mid){case 1:return nt.revive(n);case 2:return new RegExp(n.source,n.flags);case 16:return new Date(n.source)}if(n instanceof IS||n instanceof Uint8Array)return n;if(Array.isArray(n))for(let t=0;t<n.length;++t)n[t]=NC(n[t],e+1);else for(const t in n)Object.hasOwnProperty.call(n,t)&&(n[t]=NC(n[t],e+1))}return n}const zb=Object.freeze({image:(n,e,t)=>{let i=[],s=[];return n&&({href:n,dimensions:i}=EZ(n),s.push(`src="${$p(n)}"`)),t&&s.push(`alt="${$p(t)}"`),e&&s.push(`title="${$p(e)}"`),i.length&&(s=s.concat(i)),"<img "+s.join(" ")+">"},paragraph:n=>`<p>${n}</p>`,link:(n,e,t)=>typeof n!="string"?"":(n===t&&(t=$b(t)),e=typeof e=="string"?$p($b(e)):"",n=$b(n),n=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${n}" title="${e||n}">${t}</a>`)});function vA(n,e={},t={}){var i,s;const o=new Fe;let r=!1;const a=DL(e),l=function(v){let b;try{b=IC(decodeURIComponent(v))}catch{}return b?(b=tT(b,w=>{if(n.uris&&n.uris[w])return nt.revive(n.uris[w])}),encodeURIComponent(JSON.stringify(b))):v},c=function(v,b){const w=n.uris&&n.uris[v];let C=nt.revive(w);return b?v.startsWith(Je.data+":")?v:(C||(C=nt.parse(v)),N4.uriToBrowserUri(C).toString(!0)):!C||nt.parse(v).toString()===C.toString()?v:(C.query&&(C=C.with({query:l(C.query)})),C.toString())},d=new er.Renderer;d.image=zb.image,d.link=zb.link,d.paragraph=zb.paragraph;const u=[],h=[];if(e.codeBlockRendererSync?d.code=(v,b)=>{const w=eE.nextId(),C=e.codeBlockRendererSync(tE(b),v);return h.push([w,C]),`<div class="code" data-code="${w}">${Sw(v)}</div>`}:e.codeBlockRenderer&&(d.code=(v,b)=>{const w=eE.nextId(),C=e.codeBlockRenderer(tE(b),v);return u.push(C.then(S=>[w,S])),`<div class="code" data-code="${w}">${Sw(v)}</div>`}),e.actionHandler){const v=function(C){let S=C.target;if(!(S.tagName!=="A"&&(S=S.parentElement,!S||S.tagName!=="A")))try{let k=S.dataset.href;k&&(n.baseUri&&(k=Ub(nt.from(n.baseUri),k)),e.actionHandler.callback(k,C))}catch(k){$t(k)}finally{C.preventDefault()}},b=e.actionHandler.disposables.add(new Qe(a,"click")),w=e.actionHandler.disposables.add(new Qe(a,"auxclick"));e.actionHandler.disposables.add(ke.any(b.event,w.event)(C=>{const S=new Lo(C);!S.leftButton&&!S.middleButton||v(S)})),e.actionHandler.disposables.add(ee(a,"keydown",C=>{const S=new Wt(C);!S.equals(10)&&!S.equals(3)||v(S)}))}n.supportHtml||(t.sanitizer=v=>(n.isTrusted?v.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?v:"",t.sanitize=!0,t.silent=!0),t.renderer=d;let f=(i=n.value)!==null&&i!==void 0?i:"";f.length>1e5&&(f=`${f.substr(0,1e5)}…`),n.supportThemeIcons&&(f=SZ(f));let g;if(e.fillInIncompleteTokens){const v=Object.assign(Object.assign({},er.defaults),t),b=er.lexer(f,v),w=jZ(b);g=er.parser(w,v)}else g=er.parse(f,t);n.supportThemeIcons&&(g=_c(g).map(b=>typeof b=="string"?b:b.outerHTML).join(""));const _=new DOMParser().parseFromString(TC(n,g),"text/html");if(_.body.querySelectorAll("img").forEach(v=>{const b=v.getAttribute("src");if(b){let w=b;try{n.baseUri&&(w=Ub(nt.from(n.baseUri),w))}catch{}v.src=c(w,!0)}}),_.body.querySelectorAll("a").forEach(v=>{const b=v.getAttribute("href");if(v.setAttribute("href",""),!b||/^data:|javascript:/i.test(b)||/^command:/i.test(b)&&!n.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(b))v.replaceWith(...v.childNodes);else{let w=c(b,!1);n.baseUri&&(w=Ub(nt.from(n.baseUri),b)),v.dataset.href=w}}),a.innerHTML=TC(n,_.body.innerHTML),u.length>0)Promise.all(u).then(v=>{var b,w;if(r)return;const C=new Map(v),S=a.querySelectorAll("div[data-code]");for(const k of S){const L=C.get((b=k.dataset.code)!==null&&b!==void 0?b:"");L&&Mn(k,L)}(w=e.asyncRenderCallback)===null||w===void 0||w.call(e)});else if(h.length>0){const v=new Map(h),b=a.querySelectorAll("div[data-code]");for(const w of b){const C=v.get((s=w.dataset.code)!==null&&s!==void 0?s:"");C&&Mn(w,C)}}if(e.asyncRenderCallback)for(const v of a.getElementsByTagName("img")){const b=o.add(ee(v,"load",()=>{b.dispose(),e.asyncRenderCallback()}))}return{element:a,dispose:()=>{r=!0,o.dispose()}}}function tE(n){if(!n)return"";const e=n.split(/[\s+|:|,|\{|\?]/,1);return e.length?e[0]:n}function Ub(n,e){return/^\w[\w\d+.-]*:/.test(e)?e:n.path.endsWith("/")?bk(n,e).toString():bk(Bj(n),e).toString()}function TC(n,e){const{config:t,allowedSchemes:i}=WZ(n);k4("uponSanitizeAttribute",(o,r)=>{if(r.attrName==="style"||r.attrName==="class"){if(o.tagName==="SPAN"){if(r.attrName==="style"){r.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?$/.test(r.attrValue);return}else if(r.attrName==="class"){r.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(r.attrValue);return}}r.keepAttr=!1;return}});const s=TH(i);try{return D4(e,Object.assign(Object.assign({},t),{RETURN_TRUSTED_TYPE:!0}))}finally{E4("uponSanitizeAttribute"),s.dispose()}}const VZ=["align","autoplay","alt","class","controls","data-code","data-href","height","href","loop","muted","playsinline","poster","src","style","target","title","width","start"];function WZ(n){const e=[Je.http,Je.https,Je.mailto,Je.data,Je.file,Je.vscodeFileResource,Je.vscodeRemote,Je.vscodeRemoteResource];return n.isTrusted&&e.push(Je.command),{config:{ALLOWED_TAGS:[...AH],ALLOWED_ATTR:VZ,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}function HZ(n){return typeof n=="string"?n:$Z(n)}function $Z(n){var e;let t=(e=n.value)!==null&&e!==void 0?e:"";t.length>1e5&&(t=`${t.substr(0,1e5)}…`);const i=er.parse(t,{renderer:UZ.value}).replace(/&(#\d+|[a-zA-Z]+);/g,s=>{var o;return(o=zZ.get(s))!==null&&o!==void 0?o:s});return TC({isTrusted:!1},i).toString()}const zZ=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]),UZ=new Dg(()=>{const n=new er.Renderer;return n.code=e=>e,n.blockquote=e=>e,n.html=e=>"",n.heading=(e,t,i)=>e+`
`,n.hr=()=>"",n.list=(e,t)=>e,n.listitem=e=>e+`
`,n.paragraph=e=>e+`
`,n.table=(e,t)=>e+t+`
`,n.tablerow=e=>e,n.tablecell=(e,t)=>e+" ",n.strong=e=>e,n.em=e=>e,n.codespan=e=>e,n.br=()=>`
`,n.del=e=>e,n.image=(e,t,i)=>"",n.text=e=>e,n.link=(e,t,i)=>i,n});function kL(n){let e="";return n.forEach(t=>{e+=t.raw}),e}function qZ(n){for(const e of n.tokens)if(e.type==="text"){const t=e.raw.split(`
`),i=t[t.length-1];if(i.includes("`"))return GZ(n);if(i.includes("**"))return JZ(n);if(i.match(/\*\w/))return ZZ(n);if(i.match(/(^|\s)__\w/))return eY(n);if(i.match(/(^|\s)_\w/))return YZ(n);if(i.match(/(^|\s)\[.*\]\(\w*/))return XZ(n);if(i.match(/(^|\s)\[\w/))return QZ(n)}}function jZ(n){let e,t;for(e=0;e<n.length;e++){const i=n[e];if(i.type==="paragraph"&&i.raw.match(/(\n|^)```/)){t=KZ(n.slice(e));break}if(i.type==="paragraph"&&i.raw.match(/(\n|^)\|/)){t=tY(n.slice(e));break}if(e===n.length-1&&i.type==="paragraph"){const s=qZ(i);if(s){t=[s];break}}}if(t){const i=[...n.slice(0,e),...t];return i.links=n.links,i}return n}function KZ(n){const e=kL(n);return er.lexer(e+"\n```")}function GZ(n){return Gc(n,"`")}function ZZ(n){return Gc(n,"*")}function YZ(n){return Gc(n,"_")}function XZ(n){return Gc(n,")")}function QZ(n){return Gc(n,"](about:blank)")}function JZ(n){return Gc(n,"**")}function eY(n){return Gc(n,"__")}function Gc(n,e){const t=kL(Array.isArray(n)?n:[n]);return er.lexer(t+e)[0]}function tY(n){const e=kL(n),t=e.split(`
`);let i,s=!1;for(let o=0;o<t.length;o++){const r=t[o].trim();if(typeof i>"u"&&r.match(/^\s*\|/)){const a=r.match(/(\|[^\|]+)(?=\||$)/g);a&&(i=a.length)}else if(typeof i=="number")if(r.match(/^\s*\|/)){if(o!==t.length-1)return;s=!0}else return}if(typeof i=="number"&&i>0){const o=s?t.slice(0,-1).join(`
`):e,r=!!o.match(/\|\s*$/),a=o+(r?"":"|")+`
|${" --- |".repeat(i)}`;return er.lexer(a)}}class iY{constructor(e){this.spliceables=e}splice(e,t,i){this.spliceables.forEach(s=>s.splice(e,t,i))}}function ds(n,e,t){return Math.min(Math.max(n,e),t)}class wA{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}class nY{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(e),this._values.fill(0,0,e)}update(e){const t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}class ud extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}var Zi;(function(n){function e(o,r){if(o.start>=r.end||r.start>=o.end)return{start:0,end:0};const a=Math.max(o.start,r.start),l=Math.min(o.end,r.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}n.intersect=e;function t(o){return o.end-o.start<=0}n.isEmpty=t;function i(o,r){return!t(e(o,r))}n.intersects=i;function s(o,r){const a=[],l={start:o.start,end:Math.min(r.start,o.end)},c={start:Math.max(r.end,o.start),end:o.end};return t(l)||a.push(l),t(c)||a.push(c),a}n.relativeComplement=s})(Zi||(Zi={}));function iE(n,e){const t=[];for(const i of e){if(n.start>=i.range.end)continue;if(n.end<i.range.start)break;const s=Zi.intersect(n,i.range);Zi.isEmpty(s)||t.push({range:s,size:i.size})}return t}function AC({start:n,end:e},t){return{start:n+t,end:e+t}}function sY(n){const e=[];let t=null;for(const i of n){const s=i.range.start,o=i.range.end,r=i.size;if(t&&r===t.size){t.range.end=o;continue}t={range:{start:s,end:o},size:r},e.push(t)}return e}function oY(...n){return sY(n.reduce((e,t)=>e.concat(t),[]))}class nE{get paddingTop(){return this._paddingTop}set paddingTop(e){this._size=this._size+e-this._paddingTop,this._paddingTop=e}constructor(e){this.groups=[],this._size=0,this._paddingTop=0,this._paddingTop=e??0,this._size=this._paddingTop}splice(e,t,i=[]){const s=i.length-t,o=iE({start:0,end:e},this.groups),r=iE({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:AC(l.range,s),size:l.size})),a=i.map((l,c)=>({range:{start:e+c,end:e+c+1},size:l.size}));this.groups=oY(o,a,r),this._size=this._paddingTop+this.groups.reduce((l,c)=>l+c.size*(c.range.end-c.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;if(e<this._paddingTop)return 0;let t=0,i=this._paddingTop;for(const s of this.groups){const o=s.range.end-s.range.start,r=i+o*s.size;if(e<r)return t+Math.floor((e-i)/s.size);t+=o,i=r}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,i=0;for(const s of this.groups){const o=s.range.end-s.range.start,r=i+o;if(e<r)return this._paddingTop+t+(e-i)*s.size;t+=o*s.size,i=r}return-1}}function rY(n){var e;try{(e=n.parentElement)===null||e===void 0||e.removeChild(n)}catch{}}class aY{constructor(e){this.renderers=e,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}alloc(e){let t=this.getTemplateCache(e).pop(),i=!1;if(t)i=this.transactionNodesPendingRemoval.has(t.domNode),i&&this.transactionNodesPendingRemoval.delete(t.domNode);else{const s=Be(".monaco-list-row"),r=this.getRenderer(e).renderTemplate(s);t={domNode:s,templateId:e,templateData:r}}return{row:t,isReusingConnectedDomNode:i}}release(e){e&&this.releaseRow(e)}transact(e){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{e()}finally{for(const t of this.transactionNodesPendingRemoval)this.doRemoveNode(t);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(e){const{domNode:t,templateId:i}=e;t&&(this.inTransaction?this.transactionNodesPendingRemoval.add(t):this.doRemoveNode(t)),this.getTemplateCache(i).push(e)}doRemoveNode(e){e.classList.remove("scrolling"),rY(e)}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const i of e)this.getRenderer(t).disposeTemplate(i.templateData),i.templateData=null}),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}var oa=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o};const Ol={CurrentDragAndDropData:void 0},Vo={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(n){return[n]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class qg{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class lY{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class cY{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const i=e.files.item(t);i&&(i.size||i.type)&&this.files.push(i)}}}getData(){return{types:this.types,files:this.files}}}function dY(n,e){return Array.isArray(n)&&Array.isArray(e)?An(n,e):n===e}class uY{constructor(e){e!=null&&e.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,i,s)=>s,e!=null&&e.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,i)=>i+1,e!=null&&e.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e!=null&&e.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}class Us{get contentHeight(){return this.rangeMap.size}get onDidScroll(){return this.scrollableElement.onScroll}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:gb(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}constructor(e,t,i,s=Vo){var o,r,a,l,c,d,u,h,f,g,p,_,v;if(this.virtualDelegate=t,this.domId=`list_id_${++Us.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new F_(50),this.splicing=!1,this.dragOverAnimationStopDisposable=oe.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=oe.None,this.onDragLeaveTimeout=oe.None,this.disposables=new Fe,this._onDidChangeContentHeight=new q,this._onDidChangeContentWidth=new q,this._horizontalScrolling=!1,s.horizontalScrolling&&s.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=new nE((o=s.paddingTop)!==null&&o!==void 0?o:0);for(const w of i)this.renderers.set(w.templateId,w);this.cache=this.disposables.add(new aY(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof s.mouseSupport=="boolean"?s.mouseSupport:!0),this._horizontalScrolling=(r=s.horizontalScrolling)!==null&&r!==void 0?r:Vo.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=typeof s.paddingBottom>"u"?0:s.paddingBottom,this.accessibilityProvider=new uY(s.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",((a=s.transformOptimization)!==null&&a!==void 0?a:Vo.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(Ot.addTarget(this.rowsContainer)),this.scrollable=new Bg({forceIntegerValues:!0,smoothScrollDuration:(l=s.smoothScrolling)!==null&&l!==void 0&&l?125:0,scheduleAtNextAnimationFrame:w=>Ws(w)}),this.scrollableElement=this.disposables.add(new XS(this.rowsContainer,{alwaysConsumeMouseWheel:(c=s.alwaysConsumeMouseWheel)!==null&&c!==void 0?c:Vo.alwaysConsumeMouseWheel,horizontal:1,vertical:(d=s.verticalScrollMode)!==null&&d!==void 0?d:Vo.verticalScrollMode,useShadows:(u=s.useShadows)!==null&&u!==void 0?u:Vo.useShadows,mouseWheelScrollSensitivity:s.mouseWheelScrollSensitivity,fastScrollSensitivity:s.fastScrollSensitivity,scrollByPage:s.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(ee(this.rowsContainer,It.Change,w=>this.onTouchChange(w))),this.disposables.add(ee(this.scrollableElement.getDomNode(),"scroll",w=>w.target.scrollTop=0)),this.disposables.add(ee(this.domNode,"dragover",w=>this.onDragOver(this.toDragEvent(w)))),this.disposables.add(ee(this.domNode,"drop",w=>this.onDrop(this.toDragEvent(w)))),this.disposables.add(ee(this.domNode,"dragleave",w=>this.onDragLeave(this.toDragEvent(w)))),this.disposables.add(ee(this.domNode,"dragend",w=>this.onDragEnd(w))),this.setRowLineHeight=(h=s.setRowLineHeight)!==null&&h!==void 0?h:Vo.setRowLineHeight,this.setRowHeight=(f=s.setRowHeight)!==null&&f!==void 0?f:Vo.setRowHeight,this.supportDynamicHeights=(g=s.supportDynamicHeights)!==null&&g!==void 0?g:Vo.supportDynamicHeights,this.dnd=(p=s.dnd)!==null&&p!==void 0?p:Vo.dnd,this.layout((_=s.initialSize)===null||_===void 0?void 0:_.height,(v=s.initialSize)===null||v===void 0?void 0:v.width)}updateOptions(e){e.paddingBottom!==void 0&&(this.paddingBottom=e.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling);let t;if(e.scrollByPage!==void 0&&(t=Object.assign(Object.assign({},t??{}),{scrollByPage:e.scrollByPage})),e.mouseWheelScrollSensitivity!==void 0&&(t=Object.assign(Object.assign({},t??{}),{mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity})),e.fastScrollSensitivity!==void 0&&(t=Object.assign(Object.assign({},t??{}),{fastScrollSensitivity:e.fastScrollSensitivity})),t&&this.scrollableElement.updateOptions(t),e.paddingTop!==void 0&&e.paddingTop!==this.rangeMap.paddingTop){const i=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s=e.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=e.paddingTop,this.render(i,Math.max(0,this.lastRenderTop+s),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}splice(e,t,i=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,i)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,i=[]){const s=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),o={start:e,end:e+t},r=Zi.intersect(s,o),a=new Map;for(let k=r.end-1;k>=r.start;k--){const L=this.items[k];if(L.dragStartDisposable.dispose(),L.checkedDisposable.dispose(),L.row){let x=a.get(L.templateId);x||(x=[],a.set(L.templateId,x));const I=this.renderers.get(L.templateId);I&&I.disposeElement&&I.disposeElement(L.element,k,L.row.templateData,L.size),x.push(L.row)}L.row=null}const l={start:e+t,end:this.items.length},c=Zi.intersect(l,s),d=Zi.relativeComplement(l,s),u=i.map(k=>({id:String(this.itemId++),element:k,templateId:this.virtualDelegate.getTemplateId(k),size:this.virtualDelegate.getHeight(k),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(k),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:oe.None,checkedDisposable:oe.None}));let h;e===0&&t>=this.items.length?(this.rangeMap=new nE(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,u),h=this.items,this.items=u):(this.rangeMap.splice(e,t,u),h=this.items.splice(e,t,...u));const f=i.length-t,g=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),p=AC(c,f),_=Zi.intersect(g,p);for(let k=_.start;k<_.end;k++)this.updateItemInDOM(this.items[k],k);const v=Zi.relativeComplement(p,g);for(const k of v)for(let L=k.start;L<k.end;L++)this.removeItemFromDOM(L);const b=d.map(k=>AC(k,f)),C=[{start:e,end:e+i.length},...b].map(k=>Zi.intersect(g,k)),S=this.getNextToLastElement(C);for(const k of C)for(let L=k.start;L<k.end;L++){const x=this.items[L],I=a.get(x.templateId),A=I==null?void 0:I.pop();this.insertItemInDOM(L,S,A)}for(const k of a.values())for(const L of k)this.cache.release(L);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),h.map(k=>k.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=Ws(()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){const e=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),t=this.rangeMap.positionAt(e.start),i=this.rangeMap.positionAt(e.start+1);return i!==-1&&(i-t)/2+t<this.scrollTop?e.start+1:e.start}element(e){return this.items[e].element}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){const i={height:typeof e=="number"?e:LH(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,i.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(i),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:gb(this.domNode)})}render(e,t,i,s,o,r=!1){const a=this.getRenderRange(t,i),l=Zi.relativeComplement(a,e),c=Zi.relativeComplement(e,a),d=this.getNextToLastElement(l);if(r){const u=Zi.intersect(e,a);for(let h=u.start;h<u.end;h++)this.updateItemInDOM(this.items[h],h)}this.cache.transact(()=>{for(const u of c)for(let h=u.start;h<u.end;h++)this.removeItemFromDOM(h);for(const u of l)for(let h=u.start;h<u.end;h++)this.insertItemInDOM(h,d)}),s!==void 0&&(this.rowsContainer.style.left=`-${s}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&o!==void 0&&(this.rowsContainer.style.width=`${Math.max(o,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=i}insertItemInDOM(e,t,i){const s=this.items[e];let o=!1;if(!s.row)if(i)s.row=i;else{const d=this.cache.alloc(s.templateId);s.row=d.row,o=d.isReusingConnectedDomNode}const r=this.accessibilityProvider.getRole(s.element)||"listitem";s.row.domNode.setAttribute("role",r);const a=this.accessibilityProvider.isChecked(s.element);if(typeof a=="boolean")s.row.domNode.setAttribute("aria-checked",String(!!a));else if(a){const d=u=>s.row.domNode.setAttribute("aria-checked",String(!!u));d(a.value),s.checkedDisposable=a.onDidChange(d)}(o||!s.row.domNode.parentElement)&&(t?this.rowsContainer.insertBefore(s.row.domNode,t):this.rowsContainer.appendChild(s.row.domNode)),this.updateItemInDOM(s,e);const l=this.renderers.get(s.templateId);if(!l)throw new Error(`No renderer found for template id ${s.templateId}`);l==null||l.renderElement(s.element,e,s.row.templateData,s.size);const c=this.dnd.getDragURI(s.element);s.dragStartDisposable.dispose(),s.row.domNode.draggable=!!c,c&&(s.dragStartDisposable=ee(s.row.domNode,"dragstart",d=>this.onDragStart(s.element,c,d))),this.horizontalScrolling&&(this.measureItemWidth(s),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width="fit-content",e.width=gb(e.row.domNode);const t=window.getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){const i=this.renderers.get(t.templateId);i&&i.disposeElement&&i.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return ke.map(this.disposables.add(new Qe(this.domNode,"click")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return ke.map(this.disposables.add(new Qe(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return ke.filter(ke.map(this.disposables.add(new Qe(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e),this.disposables),e=>e.browserEvent.button===1,this.disposables)}get onMouseDown(){return ke.map(this.disposables.add(new Qe(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return ke.map(this.disposables.add(new Qe(this.domNode,"mouseover")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOut(){return ke.map(this.disposables.add(new Qe(this.domNode,"mouseout")).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return ke.any(ke.map(this.disposables.add(new Qe(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e),this.disposables),ke.map(this.disposables.add(new Qe(this.domNode,It.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return ke.map(this.disposables.add(new Qe(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return ke.map(this.disposables.add(new Qe(this.rowsContainer,It.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],s=i&&i.element;return{browserEvent:e,index:t,element:s}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],s=i&&i.element;return{browserEvent:e,index:t,element:s}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),i=typeof t>"u"?void 0:this.items[t],s=i&&i.element;return{browserEvent:e,index:t,element:s}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],s=i&&i.element;return{browserEvent:e,index:t,element:s}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,i){var s,o;if(!i.dataTransfer)return;const r=this.dnd.getDragElements(e);if(i.dataTransfer.effectAllowed="copyMove",i.dataTransfer.setData(pA.TEXT,t),i.dataTransfer.setDragImage){let a;this.dnd.getDragLabel&&(a=this.dnd.getDragLabel(r,i)),typeof a>"u"&&(a=String(r.length));const l=Be(".monaco-drag-image");l.textContent=a;const d=(u=>{for(;u&&!u.classList.contains("monaco-workbench");)u=u.parentElement;return u||document.body})(this.domNode);d.appendChild(l),i.dataTransfer.setDragImage(l,-10,-10),setTimeout(()=>d.removeChild(l),0)}this.domNode.classList.add("dragging"),this.currentDragData=new qg(r),Ol.CurrentDragAndDropData=new lY(r),(o=(s=this.dnd).onDragStart)===null||o===void 0||o.call(s,this.currentDragData,i)}onDragOver(e){var t;if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),Ol.CurrentDragAndDropData&&Ol.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(Ol.CurrentDragAndDropData)this.currentDragData=Ol.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new cY}const i=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.browserEvent);if(this.canDrop=typeof i=="boolean"?i:i.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof i!="boolean"&&i.effect===0?"copy":"move";let s;if(typeof i!="boolean"&&i.feedback?s=i.feedback:typeof e.index>"u"?s=[-1]:s=[e.index],s=Cc(s).filter(o=>o>=-1&&o<this.length).sort((o,r)=>o-r),s=s[0]===-1?[-1]:s,dY(this.currentDragFeedback,s))return!0;if(this.currentDragFeedback=s,this.currentDragFeedbackDisposable.dispose(),s[0]===-1)this.domNode.classList.add("drop-target"),this.rowsContainer.classList.add("drop-target"),this.currentDragFeedbackDisposable=st(()=>{this.domNode.classList.remove("drop-target"),this.rowsContainer.classList.remove("drop-target")});else{for(const o of s){const r=this.items[o];r.dropTarget=!0,(t=r.row)===null||t===void 0||t.domNode.classList.add("drop-target")}this.currentDragFeedbackDisposable=st(()=>{var o;for(const r of s){const a=this.items[r];a.dropTarget=!1,(o=a.row)===null||o===void 0||o.domNode.classList.remove("drop-target")}})}return!0}onDragLeave(e){var t,i;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=Pw(()=>this.clearDragOverFeedback(),100),this.currentDragData&&((i=(t=this.dnd).onDragLeave)===null||i===void 0||i.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,Ol.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.browserEvent))}onDragEnd(e){var t,i;this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,Ol.CurrentDragAndDropData=void 0,(i=(t=this.dnd).onDragEnd)===null||i===void 0||i.call(t,e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=oe.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=yH(this.domNode).top;this.dragOverAnimationDisposable=NH(this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=Pw(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,i=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>i&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-i))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let i=e;for(;i instanceof HTMLElement&&i!==this.rowsContainer&&t.contains(i);){const s=i.getAttribute("data-index");if(s){const o=Number(s);if(!isNaN(o))return o}i=i.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,i){const s=this.getRenderRange(e,t);let o,r;e===this.elementTop(s.start)?(o=s.start,r=0):s.end-s.start>1&&(o=s.start+1,r=this.elementTop(o)-e);let a=0;for(;;){const l=this.getRenderRange(e,t);let c=!1;for(let d=l.start;d<l.end;d++){const u=this.probeDynamicHeight(d);u!==0&&this.rangeMap.splice(d,1,[this.items[d]]),a+=u,c=c||u!==0}if(!c){a!==0&&this.eventuallyUpdateScrollDimensions();const d=Zi.relativeComplement(s,l);for(const h of d)for(let f=h.start;f<h.end;f++)this.items[f].row&&this.removeItemFromDOM(f);const u=Zi.relativeComplement(l,s);for(const h of u)for(let f=h.start;f<h.end;f++){const g=f+1,p=g<this.items.length?this.items[g].row:null,_=p?p.domNode:null;this.insertItemInDOM(f,_)}for(let h=l.start;h<l.end;h++)this.items[h].row&&this.updateItemInDOM(this.items[h],h);if(typeof o=="number"){const h=this.scrollable.getFutureScrollPosition().scrollTop-e,f=this.elementTop(o)-r+h;this.setScrollTop(f,i)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){var t,i,s;const o=this.items[e];if(this.virtualDelegate.getDynamicHeight){const c=this.virtualDelegate.getDynamicHeight(o.element);if(c!==null){const d=o.size;return o.size=c,o.lastDynamicHeightWidth=this.renderWidth,c-d}}if(!o.hasDynamicHeight||o.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(o.element))return 0;const r=o.size;if(o.row)return o.row.domNode.style.height="",o.size=o.row.domNode.offsetHeight,o.lastDynamicHeightWidth=this.renderWidth,o.size-r;const{row:a}=this.cache.alloc(o.templateId);a.domNode.style.height="",this.rowsContainer.appendChild(a.domNode);const l=this.renderers.get(o.templateId);if(!l)throw new Ai("Missing renderer for templateId: "+o.templateId);return l.renderElement(o.element,e,a.templateData,void 0),o.size=a.domNode.offsetHeight,(t=l.disposeElement)===null||t===void 0||t.call(l,o.element,e,a.templateData,void 0),(s=(i=this.virtualDelegate).setDynamicHeight)===null||s===void 0||s.call(i,o.element,o.size),o.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(a.domNode),this.cache.release(a),o.size-r}getNextToLastElement(e){const t=e[e.length-1];if(!t)return null;const i=this.items[t.end];return!i||!i.row?null:i.row.domNode}getElementDomId(e){return`${this.domId}_${e}`}dispose(){var e;if(this.items){for(const t of this.items)if(t.row){const i=this.renderers.get(t.row.templateId);i&&((e=i.disposeElement)===null||e===void 0||e.call(i,t.element,-1,t.row.templateData,void 0),i.disposeTemplate(t.row.templateData))}this.items=[]}this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),ci(this.disposables)}}Us.InstanceCount=0;oa([li],Us.prototype,"onMouseClick",null);oa([li],Us.prototype,"onMouseDblClick",null);oa([li],Us.prototype,"onMouseMiddleClick",null);oa([li],Us.prototype,"onMouseDown",null);oa([li],Us.prototype,"onMouseOver",null);oa([li],Us.prototype,"onMouseOut",null);oa([li],Us.prototype,"onContextMenu",null);oa([li],Us.prototype,"onTouchStart",null);oa([li],Us.prototype,"onTap",null);var Zc=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},sE=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class hY{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,i){const s=this.renderedElements.findIndex(o=>o.templateData===i);if(s>=0){const o=this.renderedElements[s];this.trait.unrender(i),o.index=t}else{const o={index:t,templateData:i};this.renderedElements.push(o)}this.trait.renderIndex(t,i)}splice(e,t,i){const s=[];for(const o of this.renderedElements)o.index<e?s.push(o):o.index>=e+t&&s.push({index:o.index+i-t,templateData:o.templateData});this.renderedElements=s}renderIndexes(e){for(const{index:t,templateData:i}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,i)}disposeTemplate(e){const t=this.renderedElements.findIndex(i=>i.templateData===e);t<0||this.renderedElements.splice(t,1)}}let R0=class{get name(){return this._trait}get renderer(){return new hY(this)}constructor(e){this._trait=e,this.length=0,this.indexes=[],this.sortedIndexes=[],this._onChange=new q,this.onChange=this._onChange.event}splice(e,t,i){var s;t=Math.max(0,Math.min(t,this.length-e));const o=i.length-t,r=e+t,a=[];let l=0;for(;l<this.sortedIndexes.length&&this.sortedIndexes[l]<e;)a.push(this.sortedIndexes[l++]);for(let d=0;d<i.length;d++)i[d]&&a.push(d+e);for(;l<this.sortedIndexes.length&&this.sortedIndexes[l]>=r;)a.push(this.sortedIndexes[l++]+o);const c=this.length+o;if(this.sortedIndexes.length>0&&a.length===0&&c>0){const d=(s=this.sortedIndexes.find(u=>u>=e))!==null&&s!==void 0?s:c-1;a.push(Math.min(d,c-1))}this.renderer.splice(e,t,i.length),this._set(a,a),this.length=c}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(rE),t)}_set(e,t,i){const s=this.indexes,o=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const r=MC(o,e);return this.renderer.renderIndexes(r),this._onChange.fire({indexes:e,browserEvent:i}),s}get(){return this.indexes}contains(e){return m7(this.sortedIndexes,e,rE)>=0}dispose(){ci(this._onChange)}};Zc([li],R0.prototype,"renderer",null);class fY extends R0{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class qb{constructor(e,t,i){this.trait=e,this.view=t,this.identityProvider=i}splice(e,t,i){if(!this.identityProvider)return this.trait.splice(e,t,new Array(i.length).fill(!1));const s=this.trait.get().map(a=>this.identityProvider.getId(this.view.element(a)).toString());if(s.length===0)return this.trait.splice(e,t,new Array(i.length).fill(!1));const o=new Set(s),r=i.map(a=>o.has(this.identityProvider.getId(a).toString()));this.trait.splice(e,t,r)}}function ol(n){return n.tagName==="INPUT"||n.tagName==="TEXTAREA"}function Pd(n){return n.classList.contains("monaco-editor")?!0:n.classList.contains("monaco-list")||!n.parentElement?!1:Pd(n.parentElement)}function CA(n){return n.tagName==="A"&&n.classList.contains("monaco-button")||n.tagName==="DIV"&&n.classList.contains("monaco-button-dropdown")?!0:n.classList.contains("monaco-list")||!n.parentElement?!1:CA(n.parentElement)}class yA{get onKeyDown(){return this.disposables.add(ke.chain(this.disposables.add(new Qe(this.view.domNode,"keydown")).event).filter(e=>!ol(e.target)).map(e=>new Wt(e)))}constructor(e,t,i){this.list=e,this.view=t,this.disposables=new Fe,this.multipleSelectionDisposables=new Fe,this.onKeyDown.filter(s=>s.keyCode===3).on(this.onEnter,this,this.disposables),this.onKeyDown.filter(s=>s.keyCode===16).on(this.onUpArrow,this,this.disposables),this.onKeyDown.filter(s=>s.keyCode===18).on(this.onDownArrow,this,this.disposables),this.onKeyDown.filter(s=>s.keyCode===11).on(this.onPageUpArrow,this,this.disposables),this.onKeyDown.filter(s=>s.keyCode===12).on(this.onPageDownArrow,this,this.disposables),this.onKeyDown.filter(s=>s.keyCode===9).on(this.onEscape,this,this.disposables),i.multipleSelectionSupport!==!1&&this.onKeyDown.filter(s=>(gt?s.metaKey:s.ctrlKey)&&s.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionDisposables.clear(),e.multipleSelectionSupport&&this.onKeyDown.filter(t=>(gt?t.metaKey:t.ctrlKey)&&t.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables))}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(gn(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}Zc([li],yA.prototype,"onKeyDown",null);var tr;(function(n){n[n.Automatic=0]="Automatic",n[n.Trigger=1]="Trigger"})(tr||(tr={}));var Od;(function(n){n[n.Idle=0]="Idle",n[n.Typing=1]="Typing"})(Od||(Od={}));const gY=new class{mightProducePrintableCharacter(n){return n.ctrlKey||n.metaKey||n.altKey?!1:n.keyCode>=31&&n.keyCode<=56||n.keyCode>=21&&n.keyCode<=30||n.keyCode>=98&&n.keyCode<=107||n.keyCode>=85&&n.keyCode<=95}};class pY{constructor(e,t,i,s,o){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=i,this.keyboardNavigationEventFilter=s,this.delegate=o,this.enabled=!1,this.state=Od.Idle,this.mode=tr.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new Fe,this.disposables=new Fe,this.updateOptions(e.options)}updateOptions(e){var t,i;!((t=e.typeNavigationEnabled)!==null&&t!==void 0)||t?this.enable():this.disable(),this.mode=(i=e.typeNavigationMode)!==null&&i!==void 0?i:tr.Automatic}enable(){if(this.enabled)return;let e=!1;const t=this.enabledDisposables.add(ke.chain(this.enabledDisposables.add(new Qe(this.view.domNode,"keydown")).event)).filter(o=>!ol(o.target)).filter(()=>this.mode===tr.Automatic||this.triggered).map(o=>new Wt(o)).filter(o=>e||this.keyboardNavigationEventFilter(o)).filter(o=>this.delegate.mightProducePrintableCharacter(o)).forEach(o=>qe.stop(o,!0)).map(o=>o.browserEvent.key).event,i=ke.debounce(t,()=>null,800,void 0,void 0,void 0,this.enabledDisposables);ke.reduce(ke.any(t,i),(o,r)=>r===null?null:(o||"")+r,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),i(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),i(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var e;const t=this.list.getFocus();if(t.length>0&&t[0]===this.previouslyFocused){const i=(e=this.list.options.accessibilityProvider)===null||e===void 0?void 0:e.getAriaLabel(this.list.element(t[0]));i&&H4(i)}this.previouslyFocused=-1}onInput(e){if(!e){this.state=Od.Idle,this.triggered=!1;return}const t=this.list.getFocus(),i=t.length>0?t[0]:0,s=this.state===Od.Idle?1:0;this.state=Od.Typing;for(let o=0;o<this.list.length;o++){const r=(i+o+s)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(r)),l=a&&a.toString();if(this.list.options.typeNavigationEnabled){if(typeof l<"u"){const c=M0(e,l),d=gZ(e,l);if(d){const u=d[0].end-d[0].start;if(c||u>1&&d.length===1){this.previouslyFocused=i,this.list.setFocus([r]),this.list.reveal(r);return}}}}else if(typeof l>"u"||M0(e,l)){this.previouslyFocused=i,this.list.setFocus([r]),this.list.reveal(r);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class mY{constructor(e,t){this.list=e,this.view=t,this.disposables=new Fe,this.disposables.add(ke.chain(this.disposables.add(new Qe(t.domNode,"keydown")).event)).filter(s=>!ol(s.target)).map(s=>new Wt(s)).filter(s=>s.keyCode===2&&!s.ctrlKey&&!s.metaKey&&!s.shiftKey&&!s.altKey).on(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const i=this.view.domElement(t[0]);if(!i)return;const s=i.querySelector("[tabIndex]");if(!s||!(s instanceof HTMLElement)||s.tabIndex===-1)return;const o=window.getComputedStyle(s);o.visibility==="hidden"||o.display==="none"||(e.preventDefault(),e.stopPropagation(),s.focus())}dispose(){this.disposables.dispose()}}function SA(n){return gt?n.browserEvent.metaKey:n.browserEvent.ctrlKey}function LA(n){return n.browserEvent.shiftKey}function _Y(n){return n instanceof MouseEvent&&n.button===2}const oE={isSelectionSingleChangeEvent:SA,isSelectionRangeChangeEvent:LA};class xA{constructor(e){this.list=e,this.disposables=new Fe,this._onPointer=new q,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||oE),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(Ot.addTarget(e.getHTMLElement()))),ke.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||oE))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){Pd(e.browserEvent.target)||document.activeElement!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(ol(e.browserEvent.target)||Pd(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||ol(e.browserEvent.target)||Pd(e.browserEvent.target)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),_Y(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(ol(e.browserEvent.target)||Pd(e.browserEvent.target)||this.isSelectionChangeEvent(e)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let i=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){if(typeof i>"u"){const d=this.list.getFocus()[0];i=d??t,this.list.setAnchor(i)}const s=Math.min(i,t),o=Math.max(i,t),r=gn(s,o+1),a=this.list.getSelection(),l=wY(MC(a,[i]),i);if(l.length===0)return;const c=MC(r,CY(a,l));this.list.setSelection(c,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const s=this.list.getSelection(),o=s.filter(r=>r!==t);this.list.setFocus([t]),this.list.setAnchor(t),s.length===o.length?this.list.setSelection([...o,t],e.browserEvent):this.list.setSelection(o,e.browserEvent)}}dispose(){this.disposables.dispose()}}class DA{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){var t,i;const s=this.selectorSuffix&&`.${this.selectorSuffix}`,o=[];e.listBackground&&o.push(`.monaco-list${s} .monaco-list-rows { background: ${e.listBackground}; }`),e.listFocusBackground&&(o.push(`.monaco-list${s}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),o.push(`.monaco-list${s}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&o.push(`.monaco-list${s}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(o.push(`.monaco-list${s}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),o.push(`.monaco-list${s}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&o.push(`.monaco-list${s}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&o.push(`.monaco-list${s}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&o.push(`
				.monaco-drag-image,
				.monaco-list${s}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&o.push(`
				.monaco-drag-image,
				.monaco-list${s}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(o.push(`.monaco-list${s} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),o.push(`.monaco-list${s} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&o.push(`.monaco-list${s} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(o.push(`.monaco-list${s} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),o.push(`.monaco-list${s} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(o.push(`.monaco-list${s} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),o.push(`.monaco-list${s} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&o.push(`.monaco-list${s} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&o.push(`.monaco-list${s}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&o.push(`.monaco-list${s}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`);const r=dc(e.listFocusAndSelectionOutline,dc(e.listSelectionOutline,(t=e.listFocusOutline)!==null&&t!==void 0?t:""));r&&o.push(`.monaco-list${s}:focus .monaco-list-row.focused.selected { outline: 1px solid ${r}; outline-offset: -1px;}`),e.listFocusOutline&&o.push(`
				.monaco-drag-image,
				.monaco-list${s}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${s}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`);const a=dc(e.listSelectionOutline,(i=e.listInactiveFocusOutline)!==null&&i!==void 0?i:"");a&&o.push(`.monaco-list${s} .monaco-list-row.focused.selected { outline: 1px dotted ${a}; outline-offset: -1px; }`),e.listSelectionOutline&&o.push(`.monaco-list${s} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listInactiveFocusOutline&&o.push(`.monaco-list${s} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&o.push(`.monaco-list${s} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropBackground&&o.push(`
				.monaco-list${s}.drop-target,
				.monaco-list${s} .monaco-list-rows.drop-target,
				.monaco-list${s} .monaco-list-row.drop-target { background-color: ${e.listDropBackground} !important; color: inherit !important; }
			`),e.tableColumnsBorder&&o.push(`
				.monaco-table > .monaco-split-view2,
				.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
				}

				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: transparent;
				}
			`),e.tableOddRowsBackgroundColor&&o.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=o.join(`
`)}}const bY={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropBackground:"#383B3D",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:J.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:J.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:J.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0},vY={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}}};function wY(n,e){const t=n.indexOf(e);if(t===-1)return[];const i=[];let s=t-1;for(;s>=0&&n[s]===e-(t-s);)i.push(n[s--]);for(i.reverse(),s=t;s<n.length&&n[s]===e+(s-t);)i.push(n[s++]);return i}function MC(n,e){const t=[];let i=0,s=0;for(;i<n.length||s<e.length;)if(i>=n.length)t.push(e[s++]);else if(s>=e.length)t.push(n[i++]);else if(n[i]===e[s]){t.push(n[i]),i++,s++;continue}else n[i]<e[s]?t.push(n[i++]):t.push(e[s++]);return t}function CY(n,e){const t=[];let i=0,s=0;for(;i<n.length||s<e.length;)if(i>=n.length)t.push(e[s++]);else if(s>=e.length)t.push(n[i++]);else if(n[i]===e[s]){i++,s++;continue}else n[i]<e[s]?t.push(n[i++]):s++;return t}const rE=(n,e)=>n-e;class yY{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,i,s){let o=0;for(const r of this.renderers)r.renderElement(e,t,i[o++],s)}disposeElement(e,t,i,s){var o;let r=0;for(const a of this.renderers)(o=a.disposeElement)===null||o===void 0||o.call(a,e,t,i[r],s),r+=1}disposeTemplate(e){let t=0;for(const i of this.renderers)i.disposeTemplate(e[t++])}}class SY{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return e}renderElement(e,t,i){const s=this.accessibilityProvider.getAriaLabel(e);s?i.setAttribute("aria-label",s):i.removeAttribute("aria-label");const o=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof o=="number"?i.setAttribute("aria-level",`${o}`):i.removeAttribute("aria-level")}disposeTemplate(e){}}class LY{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){var i,s;(s=(i=this.dnd).onDragStart)===null||s===void 0||s.call(i,e,t)}onDragOver(e,t,i,s){return this.dnd.onDragOver(e,t,i,s)}onDragLeave(e,t,i,s){var o,r;(r=(o=this.dnd).onDragLeave)===null||r===void 0||r.call(o,e,t,i,s)}onDragEnd(e){var t,i;(i=(t=this.dnd).onDragEnd)===null||i===void 0||i.call(t,e)}drop(e,t,i,s){this.dnd.drop(e,t,i,s)}}class br{get onDidChangeFocus(){return ke.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return ke.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=this.disposables.add(ke.chain(this.disposables.add(new Qe(this.view.domNode,"keydown")).event)).map(o=>new Wt(o)).filter(o=>e=o.keyCode===58||o.shiftKey&&o.keyCode===68).map(o=>qe.stop(o,!0)).filter(()=>!1).event,i=this.disposables.add(ke.chain(this.disposables.add(new Qe(this.view.domNode,"keyup")).event)).forEach(()=>e=!1).map(o=>new Wt(o)).filter(o=>o.keyCode===58||o.shiftKey&&o.keyCode===68).map(o=>qe.stop(o,!0)).map(({browserEvent:o})=>{const r=this.getFocus(),a=r.length?r[0]:void 0,l=typeof a<"u"?this.view.element(a):void 0,c=typeof a<"u"?this.view.domElement(a):this.view.domNode;return{index:a,element:l,anchor:c,browserEvent:o}}).event,s=this.disposables.add(ke.chain(this.view.onContextMenu)).filter(o=>!e).map(({element:o,index:r,browserEvent:a})=>({element:o,index:r,anchor:new Lo(a),browserEvent:a})).event;return ke.any(t,i,s)}get onKeyDown(){return this.disposables.add(new Qe(this.view.domNode,"keydown")).event}get onDidFocus(){return ke.signal(this.disposables.add(new Qe(this.view.domNode,"focus",!0)).event)}constructor(e,t,i,s,o=vY){var r,a,l,c;this.user=e,this._options=o,this.focus=new R0("focused"),this.anchor=new R0("anchor"),this.eventBufferer=new fS,this._ariaLabel="",this.disposables=new Fe,this._onDidDispose=new q,this.onDidDispose=this._onDidDispose.event;const d=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(r=this._options.accessibilityProvider)===null||r===void 0?void 0:r.getWidgetRole():"list";this.selection=new fY(d!=="listbox");const u=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=o.accessibilityProvider,this.accessibilityProvider&&(u.push(new SY(this.accessibilityProvider)),(l=(a=this.accessibilityProvider).onDidChangeActiveDescendant)===null||l===void 0||l.call(a,this.onDidChangeActiveDescendant,this,this.disposables)),s=s.map(f=>new yY(f.templateId,[...u,f]));const h=Object.assign(Object.assign({},o),{dnd:o.dnd&&new LY(this,o.dnd)});if(this.view=this.createListView(t,i,s,h),this.view.domNode.setAttribute("role",d),o.styleController)this.styleController=o.styleController(this.view.domId);else{const f=so(this.view.domNode);this.styleController=new DA(f,this.view.domId)}if(this.spliceable=new iY([new qb(this.focus,this.view,o.identityProvider),new qb(this.selection,this.view,o.identityProvider),new qb(this.anchor,this.view,o.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new mY(this,this.view)),(typeof o.keyboardSupport!="boolean"||o.keyboardSupport)&&(this.keyboardController=new yA(this,this.view,o),this.disposables.add(this.keyboardController)),o.keyboardNavigationLabelProvider){const f=o.keyboardNavigationDelegate||gY;this.typeNavigationController=new pY(this,this.view,o.keyboardNavigationLabelProvider,(c=o.keyboardNavigationEventFilter)!==null&&c!==void 0?c:()=>!0,f),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(o),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}createListView(e,t,i,s){return new Us(e,t,i,s)}createMouseController(e){return new xA(this)}updateOptions(e={}){var t,i;this._options=Object.assign(Object.assign({},this._options),e),(t=this.typeNavigationController)===null||t===void 0||t.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),(i=this.keyboardController)===null||i===void 0||i.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,i=[]){if(e<0||e>this.view.length)throw new ud(this.user,`Invalid start index: ${e}`);if(t<0)throw new ud(this.user,`Invalid delete count: ${t}`);t===0&&i.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,i))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const i of e)if(i<0||i>=this.length)throw new ud(this.user,`Invalid index ${i}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new ud(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return YN(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const i of e)if(i<0||i>=this.length)throw new ud(this.user,`Invalid index ${i}`);this.focus.set(e,t)}focusNext(e=1,t=!1,i,s){if(this.length===0)return;const o=this.focus.get(),r=this.findNextIndex(o.length>0?o[0]+e:0,t,s);r>-1&&this.setFocus([r],i)}focusPrevious(e=1,t=!1,i,s){if(this.length===0)return;const o=this.focus.get(),r=this.findPreviousIndex(o.length>0?o[0]-e:0,t,s);r>-1&&this.setFocus([r],i)}focusNextPage(e,t){return sE(this,void 0,void 0,function*(){let i=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);i=i===0?0:i-1;const s=this.getFocus()[0];if(s!==i&&(s===void 0||i>s)){const o=this.findPreviousIndex(i,!1,t);o>-1&&s!==o?this.setFocus([o],e):this.setFocus([i],e)}else{const o=this.view.getScrollTop();let r=o+this.view.renderHeight;i>s&&(r-=this.view.elementHeight(i)),this.view.setScrollTop(r),this.view.getScrollTop()!==o&&(this.setFocus([]),yield Pf(0),yield this.focusNextPage(e,t))}})}focusPreviousPage(e,t){return sE(this,void 0,void 0,function*(){let i;const s=this.view.getScrollTop();s===0?i=this.view.indexAt(s):i=this.view.indexAfter(s-1);const o=this.getFocus()[0];if(o!==i&&(o===void 0||o>=i)){const r=this.findNextIndex(i,!1,t);r>-1&&o!==r?this.setFocus([r],e):this.setFocus([i],e)}else{const r=s;this.view.setScrollTop(s-this.view.renderHeight),this.view.getScrollTop()!==r&&(this.setFocus([]),yield Pf(0),yield this.focusPreviousPage(e,t))}})}focusLast(e,t){if(this.length===0)return;const i=this.findPreviousIndex(this.length-1,!1,t);i>-1&&this.setFocus([i],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,i){if(this.length===0)return;const s=this.findNextIndex(e,!1,i);s>-1&&this.setFocus([s],t)}findNextIndex(e,t=!1,i){for(let s=0;s<this.length;s++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!i||i(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,i){for(let s=0;s<this.length;s++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!i||i(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t){if(e<0||e>=this.length)throw new ud(this.user,`Invalid index ${e}`);const i=this.view.getScrollTop(),s=this.view.elementTop(e),o=this.view.elementHeight(e);if(Ku(t)){const r=o-this.view.renderHeight;this.view.setScrollTop(r*ds(t,0,1)+s)}else{const r=s+o,a=i+this.view.renderHeight;s<i&&r>=a||(s<i||r>=a&&o>=this.view.renderHeight?this.view.setScrollTop(s):r>=a&&this.view.setScrollTop(r-this.view.renderHeight))}}getHTMLElement(){return this.view.domNode}getElementID(e){return this.view.getElementDomId(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(i=>this.view.element(i)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var e;const t=this.focus.get();if(t.length>0){let i;!((e=this.accessibilityProvider)===null||e===void 0)&&e.getActiveDescendantId&&(i=this.accessibilityProvider.getActiveDescendantId(this.view.element(t[0]))),this.view.domNode.setAttribute("aria-activedescendant",i||this.view.getElementDomId(t[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}Zc([li],br.prototype,"onDidChangeFocus",null);Zc([li],br.prototype,"onDidChangeSelection",null);Zc([li],br.prototype,"onContextMenu",null);Zc([li],br.prototype,"onKeyDown",null);Zc([li],br.prototype,"onDidFocus",null);const tc=Be,kA="selectOption.entry.template";class xY{get templateId(){return kA}renderTemplate(e){const t=Object.create(null);return t.root=e,t.text=De(e,tc(".option-text")),t.detail=De(e,tc(".option-detail")),t.decoratorRight=De(e,tc(".option-decorator-right")),t}renderElement(e,t,i){const s=i,o=e.text,r=e.detail,a=e.decoratorRight,l=e.isDisabled;s.text.textContent=o,s.detail.textContent=r||"",s.decoratorRight.innerText=a||"",l?s.root.classList.add("option-disabled"):s.root.classList.remove("option-disabled")}disposeTemplate(e){}}class ir extends oe{constructor(e,t,i,s,o){super(),this.options=[],this._currentSelection=0,this._hasDetails=!1,this._skipLayout=!1,this._sticky=!1,this._isVisible=!1,this.styles=s,this.selectBoxOptions=o||Object.create(null),typeof this.selectBoxOptions.minBottomMargin!="number"?this.selectBoxOptions.minBottomMargin=ir.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0),this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=new q,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(i),this.selected=t||0,e&&this.setOptions(e,t),this.initStyleSheet()}getHeight(){return 22}getTemplateId(){return kA}constructSelectDropDown(e){this.contextViewProvider=e,this.selectDropDownContainer=Be(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=De(this.selectDropDownContainer,tc(".select-box-details-pane"));const t=De(this.selectDropDownContainer,tc(".select-box-dropdown-container-width-control")),i=De(t,tc(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",De(i,this.widthControlElement),this._dropDownPosition=0,this.styleElement=so(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(ee(this.selectDropDownContainer,_e.DRAG_START,s=>{qe.stop(s,!0)}))}registerListeners(){this._register(Ci(this.selectElement,"change",t=>{this.selected=t.target.selectedIndex,this._onDidSelect.fire({index:t.target.selectedIndex,selected:t.target.value}),this.options[this.selected]&&this.options[this.selected].text&&(this.selectElement.title=this.options[this.selected].text)})),this._register(ee(this.selectElement,_e.CLICK,t=>{qe.stop(t),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(ee(this.selectElement,_e.MOUSE_DOWN,t=>{qe.stop(t)}));let e;this._register(ee(this.selectElement,"touchstart",t=>{e=this._isVisible})),this._register(ee(this.selectElement,"touchend",t=>{qe.stop(t),e?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(ee(this.selectElement,_e.KEY_DOWN,t=>{const i=new Wt(t);let s=!1;gt?(i.keyCode===18||i.keyCode===16||i.keyCode===10||i.keyCode===3)&&(s=!0):(i.keyCode===18&&i.altKey||i.keyCode===16&&i.altKey||i.keyCode===10||i.keyCode===3)&&(s=!0),s&&(this.showSelectDropDown(),qe.stop(t,!0))}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){An(this.options,e)||(this.options=e,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach((i,s)=>{this.selectElement.add(this.createOption(i.text,s,i.isDisabled)),typeof i.description=="string"&&(this._hasDetails=!0)})),t!==void 0&&(this.select(t),this._currentSelection=this.selected)}setOptionsList(){var e;(e=this.selectList)===null||e===void 0||e.splice(0,this.selectList.length,this.options)}select(e){e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&(this.selectElement.title=this.options[this.selected].text)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){this.container=e,e.classList.add("select-container"),e.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){const e=[];this.styles.listFocusBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`),this.styles.listFocusForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`),this.styles.decoratorRightForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(e.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `)):this.styles.selectListBorder&&(e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `)),this.styles.listHoverForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`),this.styles.listHoverBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`),this.styles.listFocusOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`),this.styles.listHoverOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=e.join(`
`)}styleSelectElement(){var e,t,i;const s=(e=this.styles.selectBackground)!==null&&e!==void 0?e:"",o=(t=this.styles.selectForeground)!==null&&t!==void 0?t:"",r=(i=this.styles.selectBorder)!==null&&i!==void 0?i:"";this.selectElement.style.backgroundColor=s,this.selectElement.style.color=o,this.selectElement.style.borderColor=r}styleList(){var e,t;const i=(e=this.styles.selectBackground)!==null&&e!==void 0?e:"",s=dc(this.styles.selectListBackground,i);this.selectDropDownListContainer.style.backgroundColor=s,this.selectionDetailsPane.style.backgroundColor=s;const o=(t=this.styles.focusBorder)!==null&&t!==void 0?t:"";this.selectDropDownContainer.style.outlineColor=o,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(e,t,i){const s=document.createElement("option");return s.value=e,s.text=e,s.disabled=!!i,s}showSelectDropDown(){this.selectionDetailsPane.innerText="",!(!this.contextViewProvider||this._isVisible)&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}hideSelectDropDown(e){!this.contextViewProvider||!this._isVisible||(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),e&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(e,t){return e.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(t),{dispose:()=>{try{e.removeChild(this.selectDropDownContainer)}catch{}}}}measureMaxDetailsHeight(){let e=0;return this.options.forEach((t,i)=>{this.updateDetail(i),this.selectionDetailsPane.offsetHeight>e&&(e=this.selectionDetailsPane.offsetHeight)}),e}layoutSelectDropDown(e){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");const t=ms(this.selectElement),i=getComputedStyle(this.selectElement),s=parseFloat(i.getPropertyValue("--dropdown-padding-top"))+parseFloat(i.getPropertyValue("--dropdown-padding-bottom")),o=window.innerHeight-t.top-t.height-(this.selectBoxOptions.minBottomMargin||0),r=t.top-ir.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,a=this.selectElement.offsetWidth,l=this.setWidthControlElement(this.widthControlElement),c=Math.max(l,Math.round(a)).toString()+"px";this.selectDropDownContainer.style.width=c,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let d=this.selectList.contentHeight;this._hasDetails&&this._cachedMaxDetailsHeight===void 0&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());const u=this._hasDetails?this._cachedMaxDetailsHeight:0,h=d+s+u,f=Math.floor((o-s-u)/this.getHeight()),g=Math.floor((r-s-u)/this.getHeight());if(e)return t.top+t.height>window.innerHeight-22||t.top<ir.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||f<1&&g<1?!1:(f<ir.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&g>f&&this.options.length>f?(this._dropDownPosition=1,this.selectDropDownContainer.removeChild(this.selectDropDownListContainer),this.selectDropDownContainer.removeChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=0,this.selectDropDownContainer.removeChild(this.selectDropDownListContainer),this.selectDropDownContainer.removeChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(t.top+t.height>window.innerHeight-22||t.top<ir.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||this._dropDownPosition===0&&f<1||this._dropDownPosition===1&&g<1)return this.hideSelectDropDown(!0),!1;if(this._dropDownPosition===0){if(this._isVisible&&f+g<1)return this.hideSelectDropDown(!0),!1;h>o&&(d=f*this.getHeight())}else h>r&&(d=g*this.getHeight());return this.selectList.layout(d),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=d+s+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=d+s+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=c,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}else return!1}setWidthControlElement(e){let t=0;if(e){let i=0,s=0;this.options.forEach((o,r)=>{const a=o.detail?o.detail.length:0,l=o.decoratorRight?o.decoratorRight.length:0,c=o.text.length+a+l;c>s&&(i=r,s=c)}),e.textContent=this.options[i].text+(this.options[i].decoratorRight?this.options[i].decoratorRight+" ":""),t=HS(e)}return t}createSelectList(e){if(this.selectList)return;this.selectDropDownListContainer=De(e,tc(".select-box-dropdown-list-container")),this.listRenderer=new xY,this.selectList=new br("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:3,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:s=>{let o=s.text;return s.detail&&(o+=`. ${s.detail}`),s.decoratorRight&&(o+=`. ${s.decoratorRight}`),s.description&&(o+=`. ${s.description}`),o},getWidgetAriaLabel:()=>m({key:"selectBox",comment:["Behave like native select dropdown element."]},"Select Box"),getRole:()=>gt?"":"option",getWidgetRole:()=>"listbox"}}),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);const t=this._register(new Qe(this.selectDropDownListContainer,"keydown")),i=ke.chain(t.event).filter(()=>this.selectList.length>0).map(s=>new Wt(s));this._register(i.filter(s=>s.keyCode===3).on(s=>this.onEnter(s),this)),this._register(i.filter(s=>s.keyCode===2).on(s=>this.onEnter(s),this)),this._register(i.filter(s=>s.keyCode===9).on(s=>this.onEscape(s),this)),this._register(i.filter(s=>s.keyCode===16).on(s=>this.onUpArrow(s),this)),this._register(i.filter(s=>s.keyCode===18).on(s=>this.onDownArrow(s),this)),this._register(i.filter(s=>s.keyCode===12).on(this.onPageDown,this)),this._register(i.filter(s=>s.keyCode===11).on(this.onPageUp,this)),this._register(i.filter(s=>s.keyCode===14).on(this.onHome,this)),this._register(i.filter(s=>s.keyCode===13).on(this.onEnd,this)),this._register(i.filter(s=>s.keyCode>=21&&s.keyCode<=56||s.keyCode>=85&&s.keyCode<=113).on(this.onCharacter,this)),this._register(ee(this.selectList.getHTMLElement(),_e.POINTER_UP,s=>this.onPointerUp(s))),this._register(this.selectList.onMouseOver(s=>typeof s.index<"u"&&this.selectList.setFocus([s.index]))),this._register(this.selectList.onDidChangeFocus(s=>this.onListFocus(s))),this._register(ee(this.selectDropDownContainer,_e.FOCUS_OUT,s=>{!this._isVisible||un(s.relatedTarget,this.selectDropDownContainer)||this.onListBlur()})),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(e){if(!this.selectList.length)return;qe.stop(e);const t=e.target;if(!t||t.classList.contains("slider"))return;const i=t.closest(".monaco-list-row");if(!i)return;const s=Number(i.getAttribute("data-index")),o=i.classList.contains("option-disabled");s>=0&&s<this.options.length&&!o&&(this.selected=s,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&(this.selectElement.title=this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(e,t){const i=o=>{for(let r=0;r<o.childNodes.length;r++){const a=o.childNodes.item(r);(a.tagName&&a.tagName.toLowerCase())==="img"?o.removeChild(a):i(a)}},s=vA({value:e,supportThemeIcons:!0},{actionHandler:t});return s.element.classList.add("select-box-description-markdown"),i(s.element),s.element}onListFocus(e){!this._isVisible||!this._hasDetails||this.updateDetail(e.indexes[0])}updateDetail(e){var t,i;this.selectionDetailsPane.innerText="";const s=this.options[e],o=(t=s==null?void 0:s.description)!==null&&t!==void 0?t:"",r=(i=s==null?void 0:s.descriptionIsMarkdown)!==null&&i!==void 0?i:!1;if(o){if(r){const a=s.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(o,a))}else this.selectionDetailsPane.innerText=o;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(e){qe.stop(e),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(e){qe.stop(e),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&(this.selectElement.title=this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(e){if(this.selected<this.options.length-1){qe.stop(e,!0);const t=this.options[this.selected+1].isDisabled;if(t&&this.options.length>this.selected+2)this.selected+=2;else{if(t)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(e){this.selected>0&&(qe.stop(e,!0),this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]))}onPageUp(e){qe.stop(e),this.selectList.focusPreviousPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onPageDown(e){qe.stop(e),this.selectList.focusNextPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onHome(e){qe.stop(e),!(this.options.length<2)&&(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(e){qe.stop(e),!(this.options.length<2)&&(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(e){const t=Pr.toString(e.keyCode);let i=-1;for(let s=0;s<this.options.length-1;s++)if(i=(s+this.selected+1)%this.options.length,this.options[i].text.charAt(0).toUpperCase()===t&&!this.options[i].isDisabled){this.select(i),this.selectList.setFocus([i]),this.selectList.reveal(this.selectList.getFocus()[0]),qe.stop(e);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}}ir.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32;ir.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2;ir.DEFAULT_MINIMUM_VISIBLE_OPTIONS=3;class DY extends oe{constructor(e,t,i,s){super(),this.selected=0,this.selectBoxOptions=s||Object.create(null),this.options=[],this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new q),this.styles=i,this.registerListeners(),this.setOptions(e,t)}registerListeners(){this._register(Ot.addTarget(this.selectElement)),[It.Tap].forEach(e=>{this._register(ee(this.selectElement,e,t=>{this.selectElement.focus()}))}),this._register(Ci(this.selectElement,"click",e=>{qe.stop(e,!0)})),this._register(Ci(this.selectElement,"change",e=>{this.selectElement.title=e.target.value,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value})})),this._register(Ci(this.selectElement,"keydown",e=>{let t=!1;gt?(e.keyCode===18||e.keyCode===16||e.keyCode===10)&&(t=!0):(e.keyCode===18&&e.altKey||e.keyCode===10||e.keyCode===3)&&(t=!0),t&&e.stopPropagation()}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){(!this.options||!An(this.options,e))&&(this.options=e,this.selectElement.options.length=0,this.options.forEach((i,s)=>{this.selectElement.add(this.createOption(i.text,s,i.isDisabled))})),t!==void 0&&this.select(t)}select(e){this.options.length===0?this.selected=0:e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&typeof this.options[this.selected].text=="string"?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){e.classList.add("select-container"),e.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}applyStyles(){var e,t,i;this.selectElement&&(this.selectElement.style.backgroundColor=(e=this.styles.selectBackground)!==null&&e!==void 0?e:"",this.selectElement.style.color=(t=this.styles.selectForeground)!==null&&t!==void 0?t:"",this.selectElement.style.borderColor=(i=this.styles.selectBorder)!==null&&i!==void 0?i:"")}createOption(e,t,i){const s=document.createElement("option");return s.value=e,s.text=e,s.disabled=!!i,s}}class kY extends qc{constructor(e,t,i,s,o){super(),gt&&!(o!=null&&o.useCustomDrawn)?this.selectBoxDelegate=new DY(e,t,s,o):this.selectBoxDelegate=new ir(e,t,i,s,o),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(e,t){this.selectBoxDelegate.setOptions(e,t)}select(e){this.selectBoxDelegate.select(e)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(e){this.selectBoxDelegate.setFocusable(e)}render(e){this.selectBoxDelegate.render(e)}}class wo extends oe{get action(){return this._action}constructor(e,t,i={}){super(),this.options=i,this._context=e||this,this._action=t,t instanceof ws&&this._register(t.onDidChange(s=>{this.element&&this.handleActionChangeEvent(s)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new Eu)),this._actionRunner}set actionRunner(e){this._actionRunner=e}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(Ot.addTarget(e));const i=this.options&&this.options.draggable;i&&(e.draggable=!0,io&&this._register(ee(e,_e.DRAG_START,s=>{var o;return(o=s.dataTransfer)===null||o===void 0?void 0:o.setData(pA.TEXT,this._action.label)}))),this._register(ee(t,It.Tap,s=>this.onClick(s,!0))),this._register(ee(t,_e.MOUSE_DOWN,s=>{i||qe.stop(s,!0),this._action.enabled&&s.button===0&&t.classList.add("active")})),gt&&this._register(ee(t,_e.CONTEXT_MENU,s=>{s.button===0&&s.ctrlKey===!0&&this.onClick(s)})),this._register(ee(t,_e.CLICK,s=>{qe.stop(s,!0),this.options&&this.options.isMenu||this.onClick(s)})),this._register(ee(t,_e.DBLCLICK,s=>{qe.stop(s,!0)})),[_e.MOUSE_UP,_e.MOUSE_OUT].forEach(s=>{this._register(ee(t,s,o=>{qe.stop(o),t.classList.remove("active")}))})}onClick(e,t=!1){var i;qe.stop(e,!0);const s=hs(this._context)?!((i=this.options)===null||i===void 0)&&i.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,s)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getTooltip(){return this.action.tooltip}updateTooltip(){var e;if(!this.element)return;const t=(e=this.getTooltip())!==null&&e!==void 0?e:"";this.updateAriaLabel(),this.options.hoverDelegate?(this.element.title="",this.customHover?this.customHover.update(t):(this.customHover=mA(this.options.hoverDelegate,this.element,t),this._store.add(this.customHover))):this.element.title=t}updateAriaLabel(){var e;if(this.element){const t=(e=this.getTooltip())!==null&&e!==void 0?e:"";this.element.setAttribute("aria-label",t)}}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,super.dispose()}}class EL extends wo{constructor(e,t,i){super(e,t,i),this.options=i,this.options.icon=i.icon!==void 0?i.icon:!1,this.options.label=i.label!==void 0?i.label:!0,this.cssClass=""}render(e){super.render(e),this.element&&(this.label=De(this.element,Be("a.action-label"))),this.label&&this.label.setAttribute("role",this.getDefaultAriaRole()),this.options.label&&this.options.keybinding&&this.element&&(De(this.element,Be("span.keybinding")).textContent=this.options.keybinding),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}getDefaultAriaRole(){return this._action.id===ts.ID?"presentation":this.options.isMenu?"menuitem":"button"}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:!this.options.label&&this.action.label&&this.options.icon&&(e=this.action.label,this.options.keybinding&&(e=m({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e??void 0}updateClass(){var e;this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.action.class,this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):(e=this.label)===null||e===void 0||e.classList.remove("codicon")}updateEnabled(){var e,t;this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),(e=this.element)===null||e===void 0||e.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),(t=this.element)===null||t===void 0||t.classList.add("disabled"))}updateAriaLabel(){var e;if(this.label){const t=(e=this.getTooltip())!==null&&e!==void 0?e:"";this.label.setAttribute("aria-label",t)}}updateChecked(){this.label&&(this.action.checked!==void 0?(this.label.classList.toggle("checked",this.action.checked),this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox")):(this.label.classList.remove("checked"),this.label.setAttribute("aria-checked",""),this.label.setAttribute("role",this.getDefaultAriaRole())))}}class EY extends wo{constructor(e,t,i,s,o,r,a){super(e,t),this.selectBox=new kY(i,s,o,r,a),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}select(e){this.selectBox.select(e)}registerListeners(){this._register(this.selectBox.onDidSelect(e=>this.runAction(e.selected,e.index)))}runAction(e,t){this.actionRunner.run(this._action,this.getActionContext(e,t))}getActionContext(e,t){return e}setFocusable(e){this.selectBox.setFocusable(e)}focus(){var e;(e=this.selectBox)===null||e===void 0||e.focus()}blur(){var e;(e=this.selectBox)===null||e===void 0||e.blur()}render(e){this.selectBox.render(e)}}var IY=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class ml extends oe{constructor(e,t={}){var i,s,o,r,a,l;super(),this._actionRunnerDisposables=this._register(new Fe),this.viewItemDisposables=this._register(new uS),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new q),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new q({onWillAddFirstListener:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new q),this.onDidRun=this._onDidRun.event,this._onWillRun=this._register(new q),this.onWillRun=this._onWillRun.event,this.options=t,this._context=(i=t.context)!==null&&i!==void 0?i:null,this._orientation=(s=this.options.orientation)!==null&&s!==void 0?s:0,this._triggerKeys={keyDown:(r=(o=this.options.triggerKeys)===null||o===void 0?void 0:o.keyDown)!==null&&r!==void 0?r:!1,keys:(l=(a=this.options.triggerKeys)===null||a===void 0?void 0:a.keys)!==null&&l!==void 0?l:[3,10]},this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new Eu,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(u=>this._onDidRun.fire(u))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(u=>this._onWillRun.fire(u))),this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",t.animated!==!1&&this.domNode.classList.add("animated");let c,d;switch(this._orientation){case 0:c=[15],d=[17];break;case 1:c=[16],d=[18],this.domNode.className+=" vertical";break}this._register(ee(this.domNode,_e.KEY_DOWN,u=>{const h=new Wt(u);let f=!0;const g=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;c&&(h.equals(c[0])||h.equals(c[1]))?f=this.focusPrevious():d&&(h.equals(d[0])||h.equals(d[1]))?f=this.focusNext():h.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():h.equals(14)?f=this.focusFirst():h.equals(13)?f=this.focusLast():h.equals(2)&&g instanceof wo&&g.trapsArrowNavigation?f=this.focusNext():this.isTriggerKeyEvent(h)?this._triggerKeys.keyDown?this.doTrigger(h):this.triggerKeyDown=!0:f=!1,f&&(h.preventDefault(),h.stopPropagation())})),this._register(ee(this.domNode,_e.KEY_UP,u=>{const h=new Wt(u);this.isTriggerKeyEvent(h)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(h)),h.preventDefault(),h.stopPropagation()):(h.equals(2)||h.equals(1026))&&this.updateFocusedItem()})),this.focusTracker=this._register(H_(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(nl()===this.domNode||!un(nl(),this.domNode))&&(this._onDidBlur.fire(),this.previouslyFocusedItem=this.focusedItem,this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.options.highlightToggledItems&&this.actionsList.classList.add("highlight-toggled"),this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=2?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(e){if(this.focusable=e,this.focusable){const t=this.viewItems.find(i=>i instanceof wo&&i.isEnabled());t instanceof wo&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof wo&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(i=>{t=t||e.equals(i)}),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){const t=this.actionsList.children[e];if(un(nl(),t)){this.focusedItem=e;break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){this._actionRunner=e,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(t=>this._onDidRun.fire(t))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(t=>this._onWillRun.fire(t))),this.viewItems.forEach(t=>t.actionRunner=e)}getContainer(){return this.domNode}getAction(e){var t;if(typeof e=="number")return(t=this.viewItems[e])===null||t===void 0?void 0:t.action;if(e instanceof HTMLElement){for(;e.parentElement!==this.actionsList;){if(!e.parentElement)return;e=e.parentElement}for(let i=0;i<this.actionsList.childNodes.length;i++)if(this.actionsList.childNodes[i]===e)return this.viewItems[i].action}}push(e,t={}){const i=Array.isArray(e)?e:[e];let s=Ku(t.index)?t.index:null;i.forEach(o=>{const r=document.createElement("li");r.className="action-item",r.setAttribute("role","presentation");let a;const l=Object.assign({hoverDelegate:this.options.hoverDelegate},t);this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(o,l)),a||(a=new EL(this.context,o,l)),this.options.allowContextMenu||this.viewItemDisposables.set(a,ee(r,_e.CONTEXT_MENU,c=>{qe.stop(c,!0)})),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(r),this.focusable&&a instanceof wo&&this.viewItems.length===0&&a.setFocusable(!0),s===null||s<0||s>=this.actionsList.children.length?(this.actionsList.appendChild(r),this.viewItems.push(a)):(this.actionsList.insertBefore(r,this.actionsList.children[s]),this.viewItems.splice(s,0,a),s++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}clear(){this.isEmpty()||(this.viewItems=ci(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),Vs(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return this.viewItems.length===0}focus(e){let t=!1,i;if(e===void 0?t=!0:typeof e=="number"?i=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){const s=this.viewItems.findIndex(o=>o.isEnabled());this.focusedItem=s===-1?void 0:s,this.updateFocus(void 0,void 0,!0)}else i!==void 0&&(this.focusedItem=i),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let i;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=t,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,i=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!i.isEnabled()||i.action.id===ts.ID));return this.updateFocus(),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let i;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}i=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!i.isEnabled()||i.action.id===ts.ID));return this.updateFocus(!0),!0}updateFocus(e,t,i=!1){var s;typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&((s=this.viewItems[this.previouslyFocusedItem])===null||s===void 0||s.blur());const o=this.focusedItem!==void 0&&this.viewItems[this.focusedItem];if(o){let r=!0;$m(o.focus)||(r=!1),this.options.focusOnlyEnabledItems&&$m(o.isEnabled)&&!o.isEnabled()&&(r=!1),o.action.id===ts.ID&&(r=!1),r?(i||this.previouslyFocusedItem!==this.focusedItem)&&(o.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0)}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof wo){const i=t._context===null||t._context===void 0?e:t._context;this.run(t._action,i)}}run(e,t){return IY(this,void 0,void 0,function*(){yield this._actionRunner.run(e,t)})}dispose(){this._context=void 0,this.viewItems=ci(this.viewItems),this.getContainer().remove(),super.dispose()}}const NY={IconContribution:"base.contributions.icons"};var aE;(function(n){function e(t,i){let s=t.defaults;for(;je.isThemeIcon(s);){const o=Yc.getIcon(s.id);if(!o)return;s=o.defaults}return s}n.getDefinition=e})(aE||(aE={}));var lE;(function(n){function e(i){return{weight:i.weight,style:i.style,src:i.src.map(s=>({format:s.format,location:s.location.toString()}))}}n.toJSONObject=e;function t(i){const s=o=>Qn(o)?o:void 0;if(i&&Array.isArray(i.src)&&i.src.every(o=>Qn(o.format)&&Qn(o.location)))return{weight:s(i.weight),style:s(i.style),src:i.src.map(o=>({format:o.format,location:nt.parse(o.location)}))}}n.fromJSONObject=t})(lE||(lE={}));class TY{constructor(){this._onDidChange=new q,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:m("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:m("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${je.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,i,s){const o=this.iconsById[e];if(o){if(i&&!o.description){o.description=i,this.iconSchema.properties[e].markdownDescription=`${i} $(${e})`;const l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=i),this._onDidChange.fire()}return o}const r={id:e,description:i,defaults:t,deprecationMessage:s};this.iconsById[e]=r;const a={$ref:"#/definitions/icons"};return s&&(a.deprecationMessage=s),i&&(a.markdownDescription=`${i}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(i||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}toString(){const e=(o,r)=>o.id.localeCompare(r.id),t=o=>{for(;je.isThemeIcon(o.defaults);)o=this.iconsById[o.defaults.id];return`codicon codicon-${o?o.id:""}`},i=[];i.push("| preview     | identifier                        | default codicon ID                | description"),i.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const s=Object.keys(this.iconsById).map(o=>this.iconsById[o]);for(const o of s.filter(r=>!!r.description).sort(e))i.push(`|<i class="${t(o)}"></i>|${o.id}|${je.isThemeIcon(o.defaults)?o.defaults.id:o.id}|${o.description||""}|`);i.push("| preview     | identifier                        "),i.push("| ----------- | --------------------------------- |");for(const o of s.filter(r=>!je.isThemeIcon(r.defaults)).sort(e))i.push(`|<i class="${t(o)}"></i>|${o.id}|`);return i.join(`
`)}}const Yc=new TY;zi.add(NY.IconContribution,Yc);function qs(n,e,t,i){return Yc.registerIcon(n,e,t,i)}function EA(){return Yc}function AY(){const n=xT();for(const e in n){const t="\\"+n[e].toString(16);Yc.registerIcon(e,{fontCharacter:t})}}AY();const IA="vscode://schemas/icons",NA=zi.as(O_.JSONContribution);NA.registerSchema(IA,Yc.getIconSchema());const cE=new Sn(()=>NA.notifySchemaChanged(IA),200);Yc.onDidChange(()=>{cE.isScheduled()||cE.schedule()});qs("widget-close",we.close,m("widgetClose","Icon for the close action in widgets."));qs("goto-previous-location",we.arrowUp,m("previousChangeIcon","Icon for goto previous editor location."));qs("goto-next-location",we.arrowDown,m("nextChangeIcon","Icon for goto next editor location."));je.modify(we.sync,"spin");je.modify(we.loading,"spin");var MY=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},jb=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},RY=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})},wa;const zp=3;class xh{constructor(e,t,i,s){this.originalLineStart=e,this.originalLineEnd=t,this.modifiedLineStart=i,this.modifiedLineEnd=s}getType(){return this.originalLineStart===0?1:this.modifiedLineStart===0?2:0}}class Kb{constructor(e){this.entries=e}}const PY=qs("diff-review-insert",we.add,m("diffReviewInsertIcon","Icon for 'Insert' in diff review.")),OY=qs("diff-review-remove",we.remove,m("diffReviewRemoveIcon","Icon for 'Remove' in diff review.")),FY=qs("diff-review-close",we.close,m("diffReviewCloseIcon","Icon for 'Close' in diff review."));let Ka=wa=class extends oe{constructor(e,t,i,s){super(),this._languageService=t,this._audioCueService=i,this._configurationService=s,this._width=0,this._diffEditor=e,this._isVisible=!1,this.shadow=tt(document.createElement("div")),this.shadow.setClassName("diff-review-shadow"),this.actionBarContainer=tt(document.createElement("div")),this.actionBarContainer.setClassName("diff-review-actions"),this._actionBar=this._register(new ml(this.actionBarContainer.domNode)),this._actionBar.push(new ws("diffreview.close",m("label.close","Close"),"close-diff-review "+je.asClassName(FY),!0,()=>RY(this,void 0,void 0,function*(){return this.hide()})),{label:!1,icon:!0}),this.domNode=tt(document.createElement("div")),this.domNode.setClassName("diff-review monaco-editor-background"),this._content=tt(document.createElement("div")),this._content.setClassName("diff-review-content"),this._content.setAttribute("role","code"),this.scrollbar=this._register(new QS(this._content.domNode,{})),this.domNode.domNode.appendChild(this.scrollbar.getDomNode()),this._register(e.onDidUpdateDiff(()=>{this._isVisible&&(this._diffs=this._compute(),this._render())})),this._register(e.getModifiedEditor().onDidChangeCursorPosition(()=>{this._isVisible&&this._render()})),this._register(Ci(this.domNode.domNode,"click",o=>{o.preventDefault();const r=R4(o.target,"diff-review-row");r&&this._goToRow(r)})),this._register(Ci(this.domNode.domNode,"keydown",o=>{(o.equals(18)||o.equals(2066)||o.equals(530))&&(o.preventDefault(),this._goToRow(this._getNextRow(),"next")),(o.equals(16)||o.equals(2064)||o.equals(528))&&(o.preventDefault(),this._goToRow(this._getPrevRow(),"previous")),(o.equals(9)||o.equals(2057)||o.equals(521)||o.equals(1033)||o.equals(10)||o.equals(3))&&(o.preventDefault(),this.accept())})),this._register(this._configurationService.onDidChangeConfiguration(o=>{o.affectsConfiguration("accessibility.verbosity.diffEditor")&&this._diffEditor.updateOptions({accessibilityVerbose:this._configurationService.getValue("accessibility.verbosity.diffEditor")})})),this._diffs=[],this._currentDiff=null}prev(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let i=-1;for(let s=0,o=this._diffs.length;s<o;s++)if(this._diffs[s]===this._currentDiff){i=s;break}e=this._diffs.length+i-1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new Y(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getPrevRow(),"previous")}next(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let i=-1;for(let s=0,o=this._diffs.length;s<o;s++)if(this._diffs[s]===this._currentDiff){i=s;break}e=i+1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new Y(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow(),"next")}accept(){let e=-1;const t=this._getCurrentFocusedRow();if(t){const i=parseInt(t.getAttribute("data-line"),10);isNaN(i)||(e=i)}this.hide(),e!==-1&&(this._diffEditor.setPosition(new Y(e,1)),this._diffEditor.revealPosition(new Y(e,1),1))}hide(){this._isVisible=!1,this._diffEditor.updateOptions({readOnly:!1}),this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()}_getPrevRow(){const e=this._getCurrentFocusedRow();return e?e.previousElementSibling?e.previousElementSibling:e:this._getFirstRow()}_getNextRow(){const e=this._getCurrentFocusedRow();return e?e.nextElementSibling?e.nextElementSibling:e:this._getFirstRow()}_getFirstRow(){return this.domNode.domNode.querySelector(".diff-review-row")}_getCurrentFocusedRow(){const e=document.activeElement;return e&&/diff-review-row/.test(e.className)?e:null}_goToRow(e,t){const i=this._getCurrentFocusedRow();e.tabIndex=0,e.focus(),i&&i!==e&&(i.tabIndex=-1);const s=t?t==="next"?i==null?void 0:i.nextElementSibling:i==null?void 0:i.previousElementSibling:i;s!=null&&s.classList.contains("line-insert")?this._audioCueService.playAudioCue(Ke.diffLineInserted,{allowManyInParallel:!0}):s!=null&&s.classList.contains("line-delete")&&this._audioCueService.playAudioCue(Ke.diffLineDeleted,{allowManyInParallel:!0}),this.scrollbar.scanDomNode()}isVisible(){return this._isVisible}layout(e,t,i){this._width=t,this.shadow.setTop(e-6),this.shadow.setWidth(t),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(e),this.domNode.setWidth(t),this.domNode.setHeight(i),this._content.setHeight(i),this._content.setWidth(t),this._isVisible?(this.actionBarContainer.setAttribute("aria-hidden","false"),this.actionBarContainer.setDisplay("block")):(this.actionBarContainer.setAttribute("aria-hidden","true"),this.actionBarContainer.setDisplay("none"))}_compute(){const e=this._diffEditor.getLineChanges();if(!e||e.length===0)return[];const t=this._diffEditor.getOriginalEditor().getModel(),i=this._diffEditor.getModifiedEditor().getModel();return!t||!i?[]:wa._mergeAdjacent(e,t.getLineCount(),i.getLineCount())}static _mergeAdjacent(e,t,i){if(!e||e.length===0)return[];const s=[];let o=0;for(let c=0,d=e.length;c<d;c++){const u=e[c],h=u.originalStartLineNumber,f=u.originalEndLineNumber,g=u.modifiedStartLineNumber,p=u.modifiedEndLineNumber,_=[];let v=0;{const b=f===0?h:h-1,w=p===0?g:g-1;let C=1,S=1;if(c>0){const x=e[c-1];x.originalEndLineNumber===0?C=x.originalStartLineNumber+1:C=x.originalEndLineNumber+1,x.modifiedEndLineNumber===0?S=x.modifiedStartLineNumber+1:S=x.modifiedEndLineNumber+1}let k=b-zp+1,L=w-zp+1;if(k<C){const x=C-k;k=k+x,L=L+x}if(L<S){const x=S-L;k=k+x,L=L+x}_[v++]=new xh(k,b,L,w)}f!==0&&(_[v++]=new xh(h,f,0,0)),p!==0&&(_[v++]=new xh(0,0,g,p));{const b=f===0?h+1:f+1,w=p===0?g+1:p+1;let C=t,S=i;if(c+1<d){const x=e[c+1];x.originalEndLineNumber===0?C=x.originalStartLineNumber:C=x.originalStartLineNumber-1,x.modifiedEndLineNumber===0?S=x.modifiedStartLineNumber:S=x.modifiedStartLineNumber-1}let k=b+zp-1,L=w+zp-1;if(k>C){const x=C-k;k=k+x,L=L+x}if(L>S){const x=S-L;k=k+x,L=L+x}_[v++]=new xh(b,k,w,L)}s[o++]=new Kb(_)}let r=s[0].entries;const a=[];let l=0;for(let c=1,d=s.length;c<d;c++){const u=s[c].entries,h=r[r.length-1],f=u[0];if(h.getType()===0&&f.getType()===0&&f.originalLineStart<=h.originalLineEnd){r[r.length-1]=new xh(h.originalLineStart,f.originalLineEnd,h.modifiedLineStart,f.modifiedLineEnd),r=r.concat(u.slice(1));continue}a[l++]=new Kb(r),r=u}return a[l++]=new Kb(r),a}_findDiffIndex(e){const t=e.lineNumber;for(let i=0,s=this._diffs.length;i<s;i++){const o=this._diffs[i].entries,r=o[o.length-1].modifiedLineEnd;if(t<=r)return i}return 0}_render(){const e=this._diffEditor.getOriginalEditor().getOptions(),t=this._diffEditor.getModifiedEditor().getOptions(),i=this._diffEditor.getOriginalEditor().getModel(),s=this._diffEditor.getModifiedEditor().getModel(),o=i.getOptions(),r=s.getOptions();if(!this._isVisible||!i||!s){Vs(this._content.domNode),this._currentDiff=null,this.scrollbar.scanDomNode();return}this._diffEditor.updateOptions({readOnly:!0});const a=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[a]===this._currentDiff)return;this._currentDiff=this._diffs[a];const l=this._diffs[a].entries,c=document.createElement("div");c.className="diff-review-table",c.setAttribute("role","list"),c.setAttribute("aria-label",'Difference review. Use "Stage | Unstage | Revert Selected Ranges" commands'),$i(c,t.get(49));let d=0,u=0,h=0,f=0;for(let L=0,x=l.length;L<x;L++){const I=l[L],A=I.originalLineStart,T=I.originalLineEnd,O=I.modifiedLineStart,R=I.modifiedLineEnd;A!==0&&(d===0||A<d)&&(d=A),T!==0&&(u===0||T>u)&&(u=T),O!==0&&(h===0||O<h)&&(h=O),R!==0&&(f===0||R>f)&&(f=R)}const g=document.createElement("div");g.className="diff-review-row";const p=document.createElement("div");p.className="diff-review-cell diff-review-summary";const _=u-d+1,v=f-h+1;p.appendChild(document.createTextNode(`${a+1}/${this._diffs.length}: @@ -${d},${_} +${h},${v} @@`)),g.setAttribute("data-line",String(h));const b=L=>L===0?m("no_lines_changed","no lines changed"):L===1?m("one_line_changed","1 line changed"):m("more_lines_changed","{0} lines changed",L),w=b(_),C=b(v);g.setAttribute("aria-label",m({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",a+1,this._diffs.length,d,w,h,C)),g.appendChild(p),g.setAttribute("role","listitem"),c.appendChild(g);const S=t.get(65);let k=h;for(let L=0,x=l.length;L<x;L++){const I=l[L];wa._renderSection(c,I,k,S,this._width,e,i,o,t,s,r,this._languageService.languageIdCodec),I.modifiedLineStart!==0&&(k=I.modifiedLineEnd)}Vs(this._content.domNode),this._content.domNode.appendChild(c),this.scrollbar.scanDomNode()}static _renderSection(e,t,i,s,o,r,a,l,c,d,u,h){const f=t.getType();let g="diff-review-row",p="";const _="diff-review-spacer";let v=null;switch(f){case 1:g="diff-review-row line-insert",p=" char-insert",v=PY;break;case 2:g="diff-review-row line-delete",p=" char-delete",v=OY;break}const b=t.originalLineStart,w=t.originalLineEnd,C=t.modifiedLineStart,S=t.modifiedLineEnd,k=Math.max(S-C,w-b),L=r.get(142),x=L.glyphMarginWidth+L.lineNumbersWidth,I=c.get(142),A=10+I.glyphMarginWidth+I.lineNumbersWidth;for(let T=0;T<=k;T++){const O=b===0?0:b+T,R=C===0?0:C+T,X=document.createElement("div");X.style.minWidth=o+"px",X.className=g,X.setAttribute("role","listitem"),R!==0&&(i=R),X.setAttribute("data-line",String(i));const ie=document.createElement("div");ie.className="diff-review-cell",ie.style.height=`${s}px`,X.appendChild(ie);const ae=document.createElement("span");ae.style.width=x+"px",ae.style.minWidth=x+"px",ae.className="diff-review-line-number"+p,O!==0?ae.appendChild(document.createTextNode(String(O))):ae.innerText=" ",ie.appendChild(ae);const ue=document.createElement("span");ue.style.width=A+"px",ue.style.minWidth=A+"px",ue.style.paddingRight="10px",ue.className="diff-review-line-number"+p,R!==0?ue.appendChild(document.createTextNode(String(R))):ue.innerText=" ",ie.appendChild(ue);const me=document.createElement("span");if(me.className=_,v){const ye=document.createElement("span");ye.className=je.asClassName(v),ye.innerText="  ",me.appendChild(ye)}else me.innerText="  ";ie.appendChild(me);let de;if(R!==0){let ye=this._renderLine(d,c,u.tabSize,R,h);wa._ttPolicy&&(ye=wa._ttPolicy.createHTML(ye)),ie.insertAdjacentHTML("beforeend",ye),de=d.getLineContent(R)}else{let ye=this._renderLine(a,r,l.tabSize,O,h);wa._ttPolicy&&(ye=wa._ttPolicy.createHTML(ye)),ie.insertAdjacentHTML("beforeend",ye),de=a.getLineContent(O)}de.length===0&&(de=m("blankLine","blank"));let Ae="";switch(f){case 0:O===R?Ae=m({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",de,O):Ae=m("equalLine","{0} original line {1} modified line {2}",de,O,R);break;case 1:Ae=m("insertLine","+ {0} modified line {1}",de,R);break;case 2:Ae=m("deleteLine","- {0} original line {1}",de,O);break}X.setAttribute("aria-label",Ae),e.appendChild(X)}}static _renderLine(e,t,i,s,o){const r=e.getLineContent(s),a=t.get(49),l=Hi.createEmpty(r,o),c=hn.isBasicASCII(r,e.mightContainNonBasicASCII()),d=hn.containsRTL(r,c,e.mightContainRTL());return Rg(new yl(a.isMonospace&&!t.get(32),a.canUseHalfwidthRightwardsArrow,r,!1,c,d,0,l,[],i,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(115),t.get(97),t.get(92),t.get(50)!==Kn.OFF,null)).html}};Ka._ttPolicy=Qu("diffReview",{createHTML:n=>n});Ka=wa=MY([jb(1,Mi),jb(2,Xu),jb(3,mi)],Ka);var Gb=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class BY extends oe{get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,e?this._diffActions.style.visibility="visible":this._diffActions.style.visibility="hidden")}constructor(e,t,i,s,o,r){super(),this._viewZoneId=e,this._marginDomNode=t,this.editor=i,this.diff=s,this._contextMenuService=o,this._clipboardService=r,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=je.asClassName(we.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";const a=i.getOption(65),l=i.getModel().getEOL();this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${a}px`,this._diffActions.style.lineHeight=`${a}px`,this._marginDomNode.appendChild(this._diffActions);const c=[],d=s.modifiedEndLineNumber===0;c.push(new ws("diff.clipboard.copyDeletedContent",d?s.originalEndLineNumber>s.modifiedStartLineNumber?m("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):m("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):s.originalEndLineNumber>s.modifiedStartLineNumber?m("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):m("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,()=>Gb(this,void 0,void 0,function*(){const _=new $(s.originalStartLineNumber,1,s.originalEndLineNumber+1,1),v=s.originalModel.getValueInRange(_);yield this._clipboardService.writeText(v)})));let u=0,h;s.originalEndLineNumber>s.modifiedStartLineNumber&&(h=new ws("diff.clipboard.copyDeletedLineContent",d?m("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",s.originalStartLineNumber):m("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",s.originalStartLineNumber),void 0,!0,()=>Gb(this,void 0,void 0,function*(){const _=s.originalModel.getLineContent(s.originalStartLineNumber+u);if(_===""){const v=s.originalModel.getEndOfLineSequence();yield this._clipboardService.writeText(v===0?`
`:`\r
`)}else yield this._clipboardService.writeText(_)})),c.push(h)),i.getOption(89)||c.push(new ws("diff.inline.revertChange",m("diff.inline.revertChange.label","Revert this change"),void 0,!0,()=>Gb(this,void 0,void 0,function*(){const _=new $(s.originalStartLineNumber,1,s.originalEndLineNumber,s.originalModel.getLineMaxColumn(s.originalEndLineNumber)),v=s.originalModel.getValueInRange(_);if(s.modifiedEndLineNumber===0){const b=i.getModel().getLineMaxColumn(s.modifiedStartLineNumber);i.executeEdits("diffEditor",[{range:new $(s.modifiedStartLineNumber,b,s.modifiedStartLineNumber,b),text:l+v}])}else{const b=i.getModel().getLineMaxColumn(s.modifiedEndLineNumber);i.executeEdits("diffEditor",[{range:new $(s.modifiedStartLineNumber,1,s.modifiedEndLineNumber,b),text:v}])}})));const g=i.getOption(125)&&!ll,p=(_,v)=>{var b;this._contextMenuService.showContextMenu({domForShadowRoot:g&&(b=i.getDomNode())!==null&&b!==void 0?b:void 0,getAnchor:()=>({x:_,y:v}),getActions:()=>(h&&(h.label=d?m("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",s.originalStartLineNumber+u):m("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",s.originalStartLineNumber+u)),c),autoSelectFirstItem:!0})};this._register(Ci(this._diffActions,"mousedown",_=>{const{top:v,height:b}=ms(this._diffActions),w=Math.floor(a/3);_.preventDefault(),p(_.posx,v+b+w)})),this._register(i.onMouseMove(_=>{_.target.type===8||_.target.type===5?_.target.detail.viewZoneId===this._viewZoneId?(this.visibility=!0,u=this._updateLightBulbPosition(this._marginDomNode,_.event.browserEvent.y,a)):this.visibility=!1:this.visibility=!1})),this._register(i.onMouseDown(_=>{_.event.rightButton&&(_.target.type===8||_.target.type===5)&&_.target.detail.viewZoneId===this._viewZoneId&&(_.event.preventDefault(),u=this._updateLightBulbPosition(this._marginDomNode,_.event.browserEvent.y,a),p(_.event.posx,_.event.posy+a))}))}_updateLightBulbPosition(e,t,i){const{top:s}=ms(e),o=t-s,r=Math.floor(o/i),a=r*i;if(this._diffActions.style.top=`${a}px`,this.diff.viewLineCounts){let l=0;for(let c=0;c<this.diff.viewLineCounts.length;c++)if(l+=this.diff.viewLineCounts[c],r<l)return c}return r}}const jg=ct("editorWorkerService");var VY=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},dE=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},WY=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})},Wl;let ig=Wl=class{constructor(e,t,i){this.editorWorkerService=t,this.telemetryService=i,this.onDidChangeEventEmitter=new q,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="advanced",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions(e)}dispose(){var e;(e=this.diffAlgorithmOnDidChangeSubscription)===null||e===void 0||e.dispose()}computeDiff(e,t,i,s){var o,r;return WY(this,void 0,void 0,function*(){if(typeof this.diffAlgorithm!="string")return this.diffAlgorithm.computeDiff(e,t,i,s);if(e.getLineCount()===1&&e.getLineMaxColumn(1)===1)return t.getLineCount()===1&&t.getLineMaxColumn(1)===1?{changes:[],identical:!0,quitEarly:!1,moves:[]}:{changes:[new vs(new it(1,2),new it(1,t.getLineCount()+1),[new ul(e.getFullModelRange(),t.getFullModelRange())])],identical:!1,quitEarly:!1,moves:[]};const a=JSON.stringify([e.uri.toString(),t.uri.toString()]),l=JSON.stringify([e.id,t.id,e.getAlternativeVersionId(),t.getAlternativeVersionId(),JSON.stringify(i)]),c=Wl.diffCache.get(a);if(c&&c.context===l)return c.result;const d=Oc.create(),u=yield this.editorWorkerService.computeDiff(e.uri,t.uri,i,this.diffAlgorithm),h=d.elapsed();if(this.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:h,timedOut:(o=u==null?void 0:u.quitEarly)!==null&&o!==void 0?o:!0,detectedMoves:i.computeMoves?(r=u==null?void 0:u.moves.length)!==null&&r!==void 0?r:0:-1}),s.isCancellationRequested)return{changes:[],identical:!1,quitEarly:!0,moves:[]};if(!u)throw new Error("no diff result available");return Wl.diffCache.size>10&&Wl.diffCache.delete(Wl.diffCache.keys().next().value),Wl.diffCache.set(a,{result:u,context:l}),u})}setOptions(e){var t;let i=!1;e.diffAlgorithm&&this.diffAlgorithm!==e.diffAlgorithm&&((t=this.diffAlgorithmOnDidChangeSubscription)===null||t===void 0||t.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=e.diffAlgorithm,typeof e.diffAlgorithm!="string"&&(this.diffAlgorithmOnDidChangeSubscription=e.diffAlgorithm.onDidChange(()=>this.onDidChangeEventEmitter.fire())),i=!0),i&&this.onDidChangeEventEmitter.fire()}};ig.diffCache=new Map;ig=Wl=VY([dE(1,jg),dE(2,Pg)],ig);const Kg=ct("clipboardService"),Gg=ct("contextViewService"),Ll=ct("contextMenuService"),HY=ct("progressService"),Zg=ct("editorProgressService");var $Y=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},fa=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},zY=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})},Oi;class uE{constructor(e,t){this._contextMenuService=e,this._clipboardService=t,this._zones=[],this._inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}getForeignViewZones(e){return e.filter(t=>!this._zonesMap[String(t.id)])}clean(e){this._zones.length>0&&e.changeViewZones(t=>{for(const i of this._zones)t.removeZone(i)}),this._zones=[],this._zonesMap={},e.changeDecorations(t=>{this._decorations=t.deltaDecorations(this._decorations,[])})}apply(e,t,i,s){const o=s?tg.capture(e):null;e.changeViewZones(r=>{var a;for(const l of this._zones)r.removeZone(l);for(const l of this._inlineDiffMargins)l.dispose();this._zones=[],this._zonesMap={},this._inlineDiffMargins=[];for(let l=0,c=i.zones.length;l<c;l++){const d=i.zones[l];d.suppressMouseDown=!0,d.showInHiddenAreas=!0;const u=r.addZone(d);this._zones.push(u),this._zonesMap[String(u)]=!0,i.zones[l].diff&&d.marginDomNode&&(d.suppressMouseDown=!1,((a=i.zones[l].diff)===null||a===void 0?void 0:a.originalModel.getValueLength())!==0&&this._inlineDiffMargins.push(new BY(u,d.marginDomNode,e,i.zones[l].diff,this._contextMenuService,this._clipboardService)))}}),o==null||o.restore(e),e.changeDecorations(r=>{this._decorations=r.deltaDecorations(this._decorations,i.decorations)}),t==null||t.setZones(i.overviewZones)}}let UY=0;const qY=qs("diff-insert",we.add,m("diffInsertIcon","Line decoration for inserts in the diff editor.")),TA=qs("diff-remove",we.remove,m("diffRemoveIcon","Line decoration for removals in the diff editor.")),RC=Qu("diffEditorWidget",{createHTML:n=>n}),hE=m("diff-aria-navigation-tip"," use Shift + F7 to navigate changes");let _l=Oi=class extends oe{constructor(e,t,i,s,o,r,a,l,c,d,u){super(),this._editorProgressService=u,this._onDidDispose=this._register(new q),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModel=this._register(new q),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidUpdateDiff=this._register(new q),this.onDidUpdateDiff=this._onDidUpdateDiff.event,this._onDidContentSizeChange=this._register(new q),this._lastOriginalWarning=null,this._lastModifiedWarning=null,a.willCreateDiffEditor(),this._documentDiffProvider=this._register(r.createInstance(ig,t)),this._register(this._documentDiffProvider.onDidChange(f=>this._beginUpdateDecorationsSoon())),this._codeEditorService=a,this._contextKeyService=this._register(o.createScoped(e)),this._instantiationService=r.createChild(new zg([Et,this._contextKeyService])),this._contextKeyService.createKey("isInDiffEditor",!0),this._themeService=l,this._notificationService=c,this._id=++UY,this._state=0,this._updatingDiffProgress=null,this._domElement=e,t=t||{},this._options=pE(t,{enableSplitViewResizing:!0,splitViewDefaultRatio:.5,renderSideBySide:!0,renderMarginRevertIcon:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"advanced",accessibilityVerbose:!1,experimental:{showEmptyDecorations:!1,showMoves:!1},hideUnchangedRegions:{enabled:!1,contextLineCount:0,minimumLineCount:0,revealLineCount:0},isInEmbeddedEditor:!1,onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:0,useInlineViewWhenSpaceIsLimited:!1}),this.isEmbeddedDiffEditorKey=Se.isEmbeddedDiffEditor.bindTo(this._contextKeyService),this.isEmbeddedDiffEditorKey.set(typeof t.isInEmbeddedEditor<"u"?t.isInEmbeddedEditor:!1),this._updateDecorationsRunner=this._register(new Sn(()=>this._updateDecorations(),0)),this._containerDomElement=document.createElement("div"),this._containerDomElement.className=Oi._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide),this._containerDomElement.style.position="relative",this._containerDomElement.style.height="100%",this._domElement.appendChild(this._containerDomElement),this._overviewViewportDomElement=tt(document.createElement("div")),this._overviewViewportDomElement.setClassName("diffViewport"),this._overviewViewportDomElement.setPosition("absolute"),this._overviewDomElement=document.createElement("div"),this._overviewDomElement.className="diffOverview",this._overviewDomElement.style.position="absolute",this._overviewDomElement.appendChild(this._overviewViewportDomElement.domNode),this._register(Ci(this._overviewDomElement,_e.POINTER_DOWN,f=>{this._modifiedEditor.delegateVerticalScrollbarPointerDown(f)})),this._register(ee(this._overviewDomElement,_e.MOUSE_WHEEL,f=>{this._modifiedEditor.delegateScrollFromMouseWheelEvent(f)},{passive:!1})),this._options.renderOverviewRuler&&this._containerDomElement.appendChild(this._overviewDomElement),this._originalDomNode=document.createElement("div"),this._originalDomNode.className="editor original",this._originalDomNode.style.position="absolute",this._originalDomNode.style.height="100%",this._containerDomElement.appendChild(this._originalDomNode),this._modifiedDomNode=document.createElement("div"),this._modifiedDomNode.className="editor modified",this._modifiedDomNode.style.position="absolute",this._modifiedDomNode.style.height="100%",this._containerDomElement.appendChild(this._modifiedDomNode),this._beginUpdateDecorationsTimeout=-1,this._currentlyChangingViewZones=!1,this._diffComputationToken=0,this._originalEditorState=new uE(d,s),this._modifiedEditorState=new uE(d,s),this._isVisible=!0,this._isHandlingScrollEvent=!1,this._elementSizeObserver=this._register(new qS(this._containerDomElement,t.dimension)),this._register(this._elementSizeObserver.onDidChange(()=>this._onDidContainerSizeChanged())),t.automaticLayout&&this._elementSizeObserver.startObserving(),this._diffComputationResult=null,this._originalEditor=this._createLeftHandSideEditor(t,i.originalEditor||{}),this._modifiedEditor=this._createRightHandSideEditor(t,i.modifiedEditor||{}),this._originalOverviewRuler=null,this._modifiedOverviewRuler=null,this._reviewPane=r.createInstance(Ka,this),this._containerDomElement.appendChild(this._reviewPane.domNode.domNode),this._containerDomElement.appendChild(this._reviewPane.shadow.domNode),this._containerDomElement.appendChild(this._reviewPane.actionBarContainer.domNode),this._options.renderSideBySide?this._setStrategy(new $r(this._createDataSource(),this._options.enableSplitViewResizing,this._options.splitViewDefaultRatio)):this._setStrategy(new gE(this._createDataSource(),this._options.enableSplitViewResizing)),this._register(l.onDidColorThemeChange(f=>{this._strategy&&this._strategy.applyColors(f)&&this._updateDecorationsRunner.schedule(),this._containerDomElement.className=Oi._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)}));const h=uc.getDiffEditorContributions();for(const f of h)try{this._register(r.createInstance(f.ctor,this))}catch(g){$t(g)}this._codeEditorService.addDiffEditor(this)}_setState(e){this._state!==e&&(this._state=e,this._updatingDiffProgress&&(this._updatingDiffProgress.done(),this._updatingDiffProgress=null),this._state===1&&(this._updatingDiffProgress=this._editorProgressService.show(!0,1e3)))}accessibleDiffViewerNext(){this._reviewPane.next()}accessibleDiffViewerPrev(){this._reviewPane.prev()}static _getClassName(e,t){let i="monaco-diff-editor monaco-editor-background ";return t&&(i+="side-by-side "),i+=b0(e.type),i}_disposeOverviewRulers(){this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose(),this._originalOverviewRuler=null),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose(),this._modifiedOverviewRuler=null)}_createOverviewRulers(){this._options.renderOverviewRuler&&(Jh(!this._originalOverviewRuler&&!this._modifiedOverviewRuler),this._originalEditor.hasModel()&&(this._originalOverviewRuler=this._originalEditor.createOverviewRuler("original diffOverviewRuler"),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this._modifiedEditor.createOverviewRuler("modified diffOverviewRuler"),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers())}_createLeftHandSideEditor(e,t){const i=this._createInnerEditor(this._instantiationService,this._originalDomNode,this._adjustOptionsForLeftHandSide(e),t);this._register(i.onDidScrollChange(o=>{this._isHandlingScrollEvent||!o.scrollTopChanged&&!o.scrollLeftChanged&&!o.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._modifiedEditor.setScrollPosition({scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(i.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(i.onDidChangeConfiguration(o=>{i.getModel()&&(o.hasChanged(49)&&this._updateDecorationsRunner.schedule(),o.hasChanged(143)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(i.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(i.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()}));const s=this._contextKeyService.createKey("isInDiffLeftEditor",i.hasWidgetFocus());return this._register(i.onDidFocusEditorWidget(()=>s.set(!0))),this._register(i.onDidBlurEditorWidget(()=>s.set(!1))),this._register(i.onDidContentSizeChange(o=>{const r=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+Oi.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:r,contentHeightChanged:o.contentHeightChanged,contentWidthChanged:o.contentWidthChanged})})),i}_createRightHandSideEditor(e,t){const i=this._createInnerEditor(this._instantiationService,this._modifiedDomNode,this._adjustOptionsForRightHandSide(e),t);this._register(i.onDidScrollChange(o=>{this._isHandlingScrollEvent||!o.scrollTopChanged&&!o.scrollLeftChanged&&!o.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._originalEditor.setScrollPosition({scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(i.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(i.onDidChangeConfiguration(o=>{i.getModel()&&(o.hasChanged(49)&&this._updateDecorationsRunner.schedule(),o.hasChanged(143)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(i.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(i.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()})),this._register(i.onDidChangeModelOptions(o=>{o.tabSize&&this._updateDecorationsRunner.schedule()}));const s=this._contextKeyService.createKey("isInDiffRightEditor",i.hasWidgetFocus());return this._register(i.onDidFocusEditorWidget(()=>s.set(!0))),this._register(i.onDidBlurEditorWidget(()=>s.set(!1))),this._register(i.onDidContentSizeChange(o=>{const r=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+Oi.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:r,contentHeightChanged:o.contentHeightChanged,contentWidthChanged:o.contentWidthChanged})})),this._register(i.onMouseDown(o=>{var r,a;if(!o.event.rightButton&&o.target.position&&(!((r=o.target.element)===null||r===void 0)&&r.className.includes("arrow-revert-change"))){const l=o.target.position.lineNumber,c=o.target,d=(a=this._diffComputationResult)===null||a===void 0?void 0:a.changes.find(u=>(c==null?void 0:c.detail.afterLineNumber)===u.modifiedStartLineNumber||u.modifiedEndLineNumber>0&&u.modifiedStartLineNumber===l);d&&this.revertChange(d),o.event.stopPropagation(),this._updateDecorations();return}})),i}revertChange(e){const t=this._modifiedEditor,i=this._originalEditor.getModel(),s=this._modifiedEditor.getModel();if(!i||!s||!t)return;const o=e.originalEndLineNumber>0?new $(e.originalStartLineNumber,1,e.originalEndLineNumber,i.getLineMaxColumn(e.originalEndLineNumber)):null,r=o?i.getValueInRange(o):null,a=e.modifiedEndLineNumber>0?new $(e.modifiedStartLineNumber,1,e.modifiedEndLineNumber,s.getLineMaxColumn(e.modifiedEndLineNumber)):null,l=s.getEOL();if(e.originalEndLineNumber===0&&a){let c=a;e.modifiedStartLineNumber>1?c=a.setStartPosition(e.modifiedStartLineNumber-1,s.getLineMaxColumn(e.modifiedStartLineNumber-1)):e.modifiedEndLineNumber<s.getLineCount()&&(c=a.setEndPosition(e.modifiedEndLineNumber+1,1)),t.executeEdits("diffEditor",[{range:c,text:""}])}else if(e.modifiedEndLineNumber===0&&r!==null){const c=e.modifiedStartLineNumber<s.getLineCount()?new Y(e.modifiedStartLineNumber+1,1):new Y(e.modifiedStartLineNumber,s.getLineMaxColumn(e.modifiedStartLineNumber));t.executeEdits("diffEditor",[{range:$.fromPositions(c,c),text:e.modifiedStartLineNumber<s.getLineCount()?r+l:l+r}])}else a&&r!==null&&t.executeEdits("diffEditor",[{range:a,text:r}])}_createInnerEditor(e,t,i,s){return e.createInstance(Bu,t,i,s)}dispose(){this._codeEditorService.removeDiffEditor(this),this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._options.renderOverviewRuler&&this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this._originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this._modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),super.dispose()}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return A_.IDiffEditor}getLineChanges(){return this._diffComputationResult?this._diffComputationResult.changes:null}getOriginalEditor(){return this._originalEditor}getModifiedEditor(){return this._modifiedEditor}updateOptions(e){const t=pE(e,this._options),i=YY(this._options,t);this._options=t,this.isEmbeddedDiffEditorKey.set(typeof e.isInEmbeddedEditor<"u"?e.isInEmbeddedEditor:!1);const s=i.ignoreTrimWhitespace||i.renderIndicators||i.renderMarginRevertIcon,o=this._isVisible&&(i.maxComputationTime||i.maxFileSize);this._documentDiffProvider.setOptions(t),s?this._beginUpdateDecorations():o&&this._beginUpdateDecorationsSoon(),this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(e)),this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(e)),this._strategy.setEnableSplitViewResizing(this._options.enableSplitViewResizing,this._options.splitViewDefaultRatio),i.renderSideBySide&&(this._options.renderSideBySide?this._setStrategy(new $r(this._createDataSource(),this._options.enableSplitViewResizing,this._options.splitViewDefaultRatio)):this._setStrategy(new gE(this._createDataSource(),this._options.enableSplitViewResizing)),this._containerDomElement.className=Oi._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)),i.renderOverviewRuler&&(this._options.renderOverviewRuler?this._containerDomElement.appendChild(this._overviewDomElement):this._containerDomElement.removeChild(this._overviewDomElement))}getModel(){return{original:this._originalEditor.getModel(),modified:this._modifiedEditor.getModel()}}createViewModel(e){return{model:e,waitForDiff(){return zY(this,void 0,void 0,function*(){})}}}setModel(e){if(e&&"model"in e&&(e=e.model),e&&(!e.original||!e.modified))throw new Error(e.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this._disposeOverviewRulers(),this._originalEditor.setModel(e?e.original:null),this._modifiedEditor.setModel(e?e.modified:null),this._updateDecorationsRunner.cancel(),e&&(this._originalEditor.setScrollTop(0),this._modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,this._setState(0),e&&(this._createOverviewRulers(),this._beginUpdateDecorations()),this._layoutOverviewViewport(),this._onDidChangeModel.fire(),this._diffNavigator=this._register(this._instantiationService.createInstance(Jm,this,{alwaysRevealFirst:!1,findResultLoop:this.getModifiedEditor().getOption(40).loop}))}getContainerDomNode(){return this._domElement}getVisibleColumnFromPosition(e){return this._modifiedEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._modifiedEditor.getPosition()}setPosition(e,t="api"){this._modifiedEditor.setPosition(e,t)}revealLine(e,t=0){this._modifiedEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._modifiedEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._modifiedEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._modifiedEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._modifiedEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._modifiedEditor.revealPositionNearTop(e,t)}getSelection(){return this._modifiedEditor.getSelection()}getSelections(){return this._modifiedEditor.getSelections()}setSelection(e,t="api"){this._modifiedEditor.setSelection(e,t)}setSelections(e,t="api"){this._modifiedEditor.setSelections(e,t)}revealLines(e,t,i=0){this._modifiedEditor.revealLines(e,t,i)}revealLinesInCenter(e,t,i=0){this._modifiedEditor.revealLinesInCenter(e,t,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._modifiedEditor.revealLinesInCenterIfOutsideViewport(e,t,i)}revealLinesNearTop(e,t,i=0){this._modifiedEditor.revealLinesNearTop(e,t,i)}revealRange(e,t=0,i=!1,s=!0){this._modifiedEditor.revealRange(e,t,i,s)}revealRangeInCenter(e,t=0){this._modifiedEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._modifiedEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._modifiedEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._modifiedEditor.getSupportedActions()}focus(){this._modifiedEditor.focus()}trigger(e,t,i){this._modifiedEditor.trigger(e,t,i)}createDecorationsCollection(e){return this._modifiedEditor.createDecorationsCollection(e)}changeDecorations(e){return this._modifiedEditor.changeDecorations(e)}saveViewState(){const e=this._originalEditor.saveViewState(),t=this._modifiedEditor.saveViewState();return{original:e,modified:t}}restoreViewState(e){if(e&&e.original&&e.modified){const t=e;this._originalEditor.restoreViewState(t.original),this._modifiedEditor.restoreViewState(t.modified)}}layout(e){this._elementSizeObserver.observe(e)}hasTextFocus(){return this._originalEditor.hasTextFocus()||this._modifiedEditor.hasTextFocus()}_onDidContainerSizeChanged(){this._doLayout()}_getReviewHeight(){return this._reviewPane.isVisible()?this._elementSizeObserver.getHeight():0}_layoutOverviewRulers(){if(!this._options.renderOverviewRuler||!this._originalOverviewRuler||!this._modifiedOverviewRuler)return;const e=this._elementSizeObserver.getHeight(),t=this._getReviewHeight(),i=Oi.ENTIRE_DIFF_OVERVIEW_WIDTH-2*Oi.ONE_OVERVIEW_WIDTH;this._modifiedEditor.getLayoutInfo()&&(this._originalOverviewRuler.setLayout({top:0,width:Oi.ONE_OVERVIEW_WIDTH,right:i+Oi.ONE_OVERVIEW_WIDTH,height:e-t}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:Oi.ONE_OVERVIEW_WIDTH,height:e-t}))}_onViewZonesChanged(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()}_beginUpdateDecorationsSoon(){this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout(()=>this._beginUpdateDecorations(),Oi.UPDATE_DIFF_DECORATIONS_DELAY)}static _equals(e,t){return!e&&!t?!0:!e||!t?!1:e.toString()===t.toString()}_beginUpdateDecorations(){this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1);const e=this._originalEditor.getModel(),t=this._modifiedEditor.getModel();if(!e||!t)return;this._diffComputationToken++;const i=this._diffComputationToken,s=this._options.maxFileSize*1024*1024,o=r=>{const a=r.getValueLength();return s===0||a<=s};if(!o(e)||!o(t)){(!Oi._equals(e.uri,this._lastOriginalWarning)||!Oi._equals(t.uri,this._lastModifiedWarning))&&(this._lastOriginalWarning=e.uri,this._lastModifiedWarning=t.uri,this._notificationService.warn(m("diff.tooLarge","Cannot compare files because one file is too large.")));return}this._setState(1),this._documentDiffProvider.computeDiff(e,t,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace,maxComputationTimeMs:this._options.maxComputationTime,computeMoves:!1},Bs.None).then(r=>{i===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult={identical:r.identical,quitEarly:r.quitEarly,changes2:r.changes,changes:r.changes.map(a=>{let l,c,d,u,h=a.innerChanges;return a.originalRange.isEmpty?(l=a.originalRange.startLineNumber-1,c=0,h=void 0):(l=a.originalRange.startLineNumber,c=a.originalRange.endLineNumberExclusive-1),a.modifiedRange.isEmpty?(d=a.modifiedRange.startLineNumber-1,u=0,h=void 0):(d=a.modifiedRange.startLineNumber,u=a.modifiedRange.endLineNumberExclusive-1),{originalStartLineNumber:l,originalEndLineNumber:c,modifiedStartLineNumber:d,modifiedEndLineNumber:u,charChanges:h==null?void 0:h.map(f=>({originalStartLineNumber:f.originalRange.startLineNumber,originalStartColumn:f.originalRange.startColumn,originalEndLineNumber:f.originalRange.endLineNumber,originalEndColumn:f.originalRange.endColumn,modifiedStartLineNumber:f.modifiedRange.startLineNumber,modifiedStartColumn:f.modifiedRange.startColumn,modifiedEndLineNumber:f.modifiedRange.endLineNumber,modifiedEndColumn:f.modifiedRange.endColumn}))}})},this._updateDecorationsRunner.schedule(),this._onDidUpdateDiff.fire())},r=>{i===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=null,this._updateDecorationsRunner.schedule())})}_cleanViewZonesAndDecorations(){this._originalEditorState.clean(this._originalEditor),this._modifiedEditorState.clean(this._modifiedEditor)}_updateDecorations(){if(!this._originalEditor.getModel()||!this._modifiedEditor.getModel())return;const e=this._diffComputationResult?this._diffComputationResult.changes:[],t=this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces()),i=this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces()),s=this._options.renderMarginRevertIcon&&!this._modifiedEditor.getOption(89),o=this._strategy.getEditorsDiffDecorations(e,this._options.ignoreTrimWhitespace,this._options.renderIndicators,s,t,i);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this._originalEditor,this._originalOverviewRuler,o.original,!1),this._modifiedEditorState.apply(this._modifiedEditor,this._modifiedOverviewRuler,o.modified,!0)}finally{this._currentlyChangingViewZones=!1}}_adjustOptionsForSubEditor(e){const t=Object.assign({},e);return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar=Object.assign({},t.scrollbar||{}),t.scrollbar.vertical="visible",t.folding=!1,t.codeLens=this._options.diffCodeLens,t.fixedOverflowWidgets=!0,t.minimap=Object.assign({},t.minimap||{}),t.minimap.enabled=!1,t}_adjustOptionsForLeftHandSide(e){const t=this._adjustOptionsForSubEditor(e);return this._options.renderSideBySide?t.wordWrapOverride1=this._options.diffWordWrap:(t.wordWrapOverride1="off",t.wordWrapOverride2="off",t.stickyScroll={enabled:!1}),e.originalAriaLabel&&(t.ariaLabel=e.originalAriaLabel),this._updateAriaLabel(t),t.readOnly=!this._options.originalEditable,t.dropIntoEditor={enabled:!t.readOnly},t.extraEditorClassName="original-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}_updateAriaLabel(e){var t;let i=(t=e.ariaLabel)!==null&&t!==void 0?t:"";this._options.accessibilityVerbose?i+=hE:i&&(i=i.replaceAll(hE,"")),e.ariaLabel=i}_adjustOptionsForRightHandSide(e){const t=this._adjustOptionsForSubEditor(e);return e.modifiedAriaLabel&&(t.ariaLabel=e.modifiedAriaLabel),this._updateAriaLabel(t),t.wordWrapOverride1=this._options.diffWordWrap,t.revealHorizontalRightPadding=bl.revealHorizontalRightPadding.defaultValue+Oi.ENTIRE_DIFF_OVERVIEW_WIDTH,t.scrollbar.verticalHasArrows=!1,t.extraEditorClassName="modified-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}doLayout(){this._elementSizeObserver.observe(),this._doLayout()}_doLayout(){const e=this._elementSizeObserver.getWidth(),t=this._elementSizeObserver.getHeight(),i=this._getReviewHeight(),s=this._strategy.layout();this._originalDomNode.style.width=s+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=e-s-Oi.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._modifiedDomNode.style.left=s+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.height=t-i+"px",this._overviewDomElement.style.width=Oi.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=e-Oi.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.setWidth(Oi.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this._originalEditor.layout({width:s,height:t-i}),this._modifiedEditor.layout({width:e-s-(this._options.renderOverviewRuler?Oi.ENTIRE_DIFF_OVERVIEW_WIDTH:0),height:t-i}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(t-i,e,i),this._layoutOverviewViewport()}_layoutOverviewViewport(){const e=this._computeOverviewViewport();e?(this._overviewViewportDomElement.setTop(e.top),this._overviewViewportDomElement.setHeight(e.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))}_computeOverviewViewport(){const e=this._modifiedEditor.getLayoutInfo();if(!e)return null;const t=this._modifiedEditor.getScrollTop(),i=this._modifiedEditor.getScrollHeight(),s=Math.max(0,e.height),o=Math.max(0,s-2*0),r=i>0?o/i:0,a=Math.max(0,Math.floor(e.height*r)),l=Math.floor(t*r);return{height:a,top:l}}_createDataSource(){return{getWidth:()=>this._elementSizeObserver.getWidth(),getHeight:()=>this._elementSizeObserver.getHeight()-this._getReviewHeight(),getOptions:()=>({renderOverviewRuler:this._options.renderOverviewRuler}),getContainerDomNode:()=>this._containerDomElement,relayoutEditors:()=>{this._doLayout()},getOriginalEditor:()=>this._originalEditor,getModifiedEditor:()=>this._modifiedEditor}}_setStrategy(e){var t;(t=this._strategy)===null||t===void 0||t.dispose(),this._strategy=e,this._boundarySashes&&e.setBoundarySashes(this._boundarySashes),e.applyColors(this._themeService.getColorTheme()),this._diffComputationResult&&this._updateDecorations(),this._doLayout()}};_l.ONE_OVERVIEW_WIDTH=15;_l.ENTIRE_DIFF_OVERVIEW_WIDTH=30;_l.UPDATE_DIFF_DECORATIONS_DELAY=200;_l=Oi=$Y([fa(3,Kg),fa(4,Et),fa(5,ai),fa(6,oi),fa(7,ro),fa(8,zs),fa(9,Ll),fa(10,Zg)],_l);class AA extends oe{constructor(e){super(),this._dataSource=e,this._insertColor=null,this._removeColor=null}applyColors(e){const t=e.getColor(t3)||(e.getColor(J4)||h0).transparent(2),i=e.getColor(i3)||(e.getColor(e3)||f0).transparent(2),s=!t.equals(this._insertColor)||!i.equals(this._removeColor);return this._insertColor=t,this._removeColor=i,s}getEditorsDiffDecorations(e,t,i,s,o,r){r=r.sort((d,u)=>d.afterLineNumber-u.afterLineNumber),o=o.sort((d,u)=>d.afterLineNumber-u.afterLineNumber);const a=this._getViewZones(e,o,r,i),l=this._getOriginalEditorDecorations(a,e,t,i),c=this._getModifiedEditorDecorations(a,e,t,i,s);return{original:{decorations:l.decorations,overviewZones:l.overviewZones,zones:a.original},modified:{decorations:c.decorations,overviewZones:c.overviewZones,zones:a.modified}}}setBoundarySashes(e){}}class fE{constructor(e){this._source=e,this._index=-1,this.current=null,this.advance()}advance(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null}}class ic{constructor(e,t,i,s,o){this._lineChanges=e,this._originalForeignVZ=t,this._modifiedForeignVZ=i,this._originalEditor=s,this._modifiedEditor=o}static _getViewLineCount(e,t,i){const s=e.getModel(),o=e._getViewModel();if(s&&o){const r=ng(s,o,t,i);return r.endLineNumber-r.startLineNumber+1}return i-t+1}getViewZones(){const e=this._originalEditor.getOption(65),t=this._modifiedEditor.getOption(65),i=this._originalEditor.getOption(143).wrappingColumn!==-1,s=this._modifiedEditor.getOption(143).wrappingColumn!==-1,o=i||s,r=this._originalEditor.getModel(),a=this._originalEditor._getViewModel().coordinatesConverter,l=this._modifiedEditor._getViewModel().coordinatesConverter,c={original:[],modified:[]};let d=0,u=0,h=0,f=0,g=0,p=0;const _=(k,L)=>k.afterLineNumber-L.afterLineNumber,v=(k,L)=>{if(L.domNode===null&&k.length>0){const x=k[k.length-1];if(x.afterLineNumber===L.afterLineNumber&&x.domNode===null){x.heightInLines+=L.heightInLines;return}}k.push(L)},b=new fE(this._modifiedForeignVZ),w=new fE(this._originalForeignVZ);let C=1,S=1;for(let k=0,L=this._lineChanges.length;k<=L;k++){const x=k<L?this._lineChanges[k]:null;x!==null?(h=x.originalStartLineNumber+(x.originalEndLineNumber>0?-1:0),f=x.modifiedStartLineNumber+(x.modifiedEndLineNumber>0?-1:0),u=x.originalEndLineNumber>0?ic._getViewLineCount(this._originalEditor,x.originalStartLineNumber,x.originalEndLineNumber):0,d=x.modifiedEndLineNumber>0?ic._getViewLineCount(this._modifiedEditor,x.modifiedStartLineNumber,x.modifiedEndLineNumber):0,g=Math.max(x.originalStartLineNumber,x.originalEndLineNumber),p=Math.max(x.modifiedStartLineNumber,x.modifiedEndLineNumber)):(h+=1e7+u,f+=1e7+d,g=h,p=f);let I=[],A=[];if(o){let R;x?x.originalEndLineNumber>0?R=x.originalStartLineNumber-C:R=x.modifiedStartLineNumber-S:R=r.getLineCount()-C+1;for(let X=0;X<R;X++){const ie=C+X,ae=S+X,ue=a.getModelLineViewLineCount(ie),me=l.getModelLineViewLineCount(ae);ue<me?I.push({afterLineNumber:ie,heightInLines:me-ue,domNode:null,marginDomNode:null}):ue>me&&A.push({afterLineNumber:ae,heightInLines:ue-me,domNode:null,marginDomNode:null})}x&&(C=(x.originalEndLineNumber>0?x.originalEndLineNumber:x.originalStartLineNumber)+1,S=(x.modifiedEndLineNumber>0?x.modifiedEndLineNumber:x.modifiedStartLineNumber)+1)}for(;b.current&&b.current.afterLineNumber<=p;){let R;b.current.afterLineNumber<=f?R=h-f+b.current.afterLineNumber:R=g;let X=null;x&&x.modifiedStartLineNumber<=b.current.afterLineNumber&&b.current.afterLineNumber<=x.modifiedEndLineNumber&&(X=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),I.push({afterLineNumber:R,heightInLines:b.current.height/t,domNode:null,marginDomNode:X}),b.advance()}for(;w.current&&w.current.afterLineNumber<=g;){let R;w.current.afterLineNumber<=h?R=f-h+w.current.afterLineNumber:R=p,A.push({afterLineNumber:R,heightInLines:w.current.height/e,domNode:null}),w.advance()}if(x!==null&&P0(x)){const R=this._produceOriginalFromDiff(x,u,d);R&&I.push(R)}if(x!==null&&O0(x)){const R=this._produceModifiedFromDiff(x,u,d);R&&A.push(R)}let T=0,O=0;for(I=I.sort(_),A=A.sort(_);T<I.length&&O<A.length;){const R=I[T],X=A[O],ie=R.afterLineNumber-h,ae=X.afterLineNumber-f;ie<ae?(v(c.original,R),T++):ae<ie?(v(c.modified,X),O++):R.shouldNotShrink?(v(c.original,R),T++):X.shouldNotShrink?(v(c.modified,X),O++):R.heightInLines>=X.heightInLines?(R.heightInLines-=X.heightInLines,O++):(X.heightInLines-=R.heightInLines,T++)}for(;T<I.length;)v(c.original,I[T]),T++;for(;O<A.length;)v(c.modified,A[O]),O++}return{original:ic._ensureDomNodes(c.original),modified:ic._ensureDomNodes(c.modified)}}static _ensureDomNodes(e){return e.map(t=>(t.domNode||(t.domNode=PA()),t))}}function Mr(n,e,t,i,s){return{range:new $(n,e,t,i),options:s}}const pn={arrowRevertChange:Ft.register({description:"diff-editor-arrow-revert-change",glyphMarginHoverMessage:new i1(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown(m("revertChangeHoverMessage","Click to revert change")),glyphMarginClassName:"arrow-revert-change "+je.asClassName(we.arrowRight),zIndex:10001}),charDelete:Ft.register({description:"diff-editor-char-delete",className:"char-delete"}),charDeleteWholeLine:Ft.register({description:"diff-editor-char-delete-whole-line",className:"char-delete",isWholeLine:!0}),charInsert:Ft.register({description:"diff-editor-char-insert",className:"char-insert"}),charInsertWholeLine:Ft.register({description:"diff-editor-char-insert-whole-line",className:"char-insert",isWholeLine:!0}),lineInsert:Ft.register({description:"diff-editor-line-insert",className:"line-insert",marginClassName:"gutter-insert",isWholeLine:!0}),lineInsertWithSign:Ft.register({description:"diff-editor-line-insert-with-sign",className:"line-insert",linesDecorationsClassName:"insert-sign "+je.asClassName(qY),marginClassName:"gutter-insert",isWholeLine:!0}),lineDelete:Ft.register({description:"diff-editor-line-delete",className:"line-delete",marginClassName:"gutter-delete",isWholeLine:!0}),lineDeleteWithSign:Ft.register({description:"diff-editor-line-delete-with-sign",className:"line-delete",linesDecorationsClassName:"delete-sign "+je.asClassName(TA),marginClassName:"gutter-delete",isWholeLine:!0}),lineDeleteMargin:Ft.register({description:"diff-editor-line-delete-margin",marginClassName:"gutter-delete"})};class $r extends AA{constructor(e,t,i){super(e),this._disableSash=t===!1,this._defaultRatio=i,this._sashRatio=null,this._sashPosition=null,this._startSashPosition=null,this._sash=this._register(new cs(this._dataSource.getContainerDomNode(),this,{orientation:0})),this._disableSash&&(this._sash.state=0),this._sash.onDidStart(()=>this._onSashDragStart()),this._sash.onDidChange(s=>this._onSashDrag(s)),this._sash.onDidEnd(()=>this._onSashDragEnd()),this._sash.onDidReset(()=>this._onSashReset())}setEnableSplitViewResizing(e,t){this._defaultRatio=t;const i=e===!1;this._disableSash!==i&&(this._disableSash=i,this._sash.state=this._disableSash?0:3)}layout(e=this._sashRatio||this._defaultRatio){const i=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?_l.ENTIRE_DIFF_OVERVIEW_WIDTH:0);let s=Math.floor((e||this._defaultRatio)*i);const o=Math.floor(this._defaultRatio*i);return s=this._disableSash?o:s||o,i>$r.MINIMUM_EDITOR_WIDTH*2?(s<$r.MINIMUM_EDITOR_WIDTH&&(s=$r.MINIMUM_EDITOR_WIDTH),s>i-$r.MINIMUM_EDITOR_WIDTH&&(s=i-$r.MINIMUM_EDITOR_WIDTH)):s=o,this._sashPosition!==s&&(this._sashPosition=s),this._sash.layout(),this._sashPosition}_onSashDragStart(){this._startSashPosition=this._sashPosition}_onSashDrag(e){const i=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?_l.ENTIRE_DIFF_OVERVIEW_WIDTH:0),s=this.layout((this._startSashPosition+(e.currentX-e.startX))/i);this._sashRatio=s/i,this._dataSource.relayoutEditors()}_onSashDragEnd(){this._sash.layout()}_onSashReset(){this._sashRatio=this._defaultRatio,this._dataSource.relayoutEditors(),this._sash.layout()}getVerticalSashTop(e){return 0}getVerticalSashLeft(e){return this._sashPosition}getVerticalSashHeight(e){return this._dataSource.getHeight()}setBoundarySashes(e){this._sash.orthogonalEndSash=e.bottom}_getViewZones(e,t,i){const s=this._dataSource.getOriginalEditor(),o=this._dataSource.getModifiedEditor();return new jY(e,t,i,s,o).getViewZones()}_getOriginalEditorDecorations(e,t,i,s){const o=this._dataSource.getOriginalEditor(),r=String(this._removeColor),a={decorations:[],overviewZones:[]},l=o.getModel(),c=o._getViewModel();for(const d of t)if(O0(d)){a.decorations.push({range:new $(d.originalStartLineNumber,1,d.originalEndLineNumber,1073741824),options:s?pn.lineDeleteWithSign:pn.lineDelete}),(!P0(d)||!d.charChanges)&&a.decorations.push(Mr(d.originalStartLineNumber,1,d.originalEndLineNumber,1073741824,pn.charDeleteWholeLine));const u=ng(l,c,d.originalStartLineNumber,d.originalEndLineNumber);if(a.overviewZones.push(new Pu(u.startLineNumber,u.endLineNumber,0,r)),d.charChanges){for(const h of d.charChanges)if(RA(h))if(i)for(let f=h.originalStartLineNumber;f<=h.originalEndLineNumber;f++){let g,p;f===h.originalStartLineNumber?g=h.originalStartColumn:g=l.getLineFirstNonWhitespaceColumn(f),f===h.originalEndLineNumber?p=h.originalEndColumn:p=l.getLineLastNonWhitespaceColumn(f),a.decorations.push(Mr(f,g,f,p,pn.charDelete))}else a.decorations.push(Mr(h.originalStartLineNumber,h.originalStartColumn,h.originalEndLineNumber,h.originalEndColumn,pn.charDelete))}}return a}_getModifiedEditorDecorations(e,t,i,s,o){const r=this._dataSource.getModifiedEditor(),a=String(this._insertColor),l={decorations:[],overviewZones:[]},c=r.getModel(),d=r._getViewModel();for(const u of t){if(o)if(u.modifiedEndLineNumber>0)l.decorations.push({range:new $(u.modifiedStartLineNumber,1,u.modifiedStartLineNumber,1),options:pn.arrowRevertChange});else{const h=e.modified.find(f=>f.afterLineNumber===u.modifiedStartLineNumber);h&&(h.marginDomNode=ZY())}if(P0(u)){l.decorations.push({range:new $(u.modifiedStartLineNumber,1,u.modifiedEndLineNumber,1073741824),options:s?pn.lineInsertWithSign:pn.lineInsert}),(!O0(u)||!u.charChanges)&&l.decorations.push(Mr(u.modifiedStartLineNumber,1,u.modifiedEndLineNumber,1073741824,pn.charInsertWholeLine));const h=ng(c,d,u.modifiedStartLineNumber,u.modifiedEndLineNumber);if(l.overviewZones.push(new Pu(h.startLineNumber,h.endLineNumber,0,a)),u.charChanges){for(const f of u.charChanges)if(MA(f))if(i)for(let g=f.modifiedStartLineNumber;g<=f.modifiedEndLineNumber;g++){let p,_;g===f.modifiedStartLineNumber?p=f.modifiedStartColumn:p=c.getLineFirstNonWhitespaceColumn(g),g===f.modifiedEndLineNumber?_=f.modifiedEndColumn:_=c.getLineLastNonWhitespaceColumn(g),l.decorations.push(Mr(g,p,g,_,pn.charInsert))}else l.decorations.push(Mr(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn,pn.charInsert))}}}return l}}$r.MINIMUM_EDITOR_WIDTH=100;class jY extends ic{constructor(e,t,i,s,o){super(e,t,i,s,o)}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){return null}_produceOriginalFromDiff(e,t,i){return i>t?{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:i-t,domNode:null}:null}_produceModifiedFromDiff(e,t,i){return t>i?{afterLineNumber:Math.max(e.modifiedStartLineNumber,e.modifiedEndLineNumber),heightInLines:t-i,domNode:null}:null}}class gE extends AA{constructor(e,t){super(e),this._decorationsLeft=e.getOriginalEditor().getLayoutInfo().decorationsLeft,this._register(e.getOriginalEditor().onDidLayoutChange(i=>{this._decorationsLeft!==i.decorationsLeft&&(this._decorationsLeft=i.decorationsLeft,e.relayoutEditors())}))}setEnableSplitViewResizing(e){}_getViewZones(e,t,i,s){const o=this._dataSource.getOriginalEditor(),r=this._dataSource.getModifiedEditor();return new KY(e,t,i,o,r,s).getViewZones()}_getOriginalEditorDecorations(e,t,i,s){const o=String(this._removeColor),r={decorations:[],overviewZones:[]},a=this._dataSource.getOriginalEditor(),l=a.getModel(),c=a._getViewModel();let d=0;for(const u of t)if(O0(u)){for(r.decorations.push({range:new $(u.originalStartLineNumber,1,u.originalEndLineNumber,1073741824),options:pn.lineDeleteMargin});d<e.modified.length;){const g=e.modified[d];if(g.diff&&g.diff.originalStartLineNumber>=u.originalStartLineNumber)break;d++}let h=0;if(d<e.modified.length){const g=e.modified[d];g.diff&&g.diff.originalStartLineNumber===u.originalStartLineNumber&&g.diff.originalEndLineNumber===u.originalEndLineNumber&&g.diff.modifiedStartLineNumber===u.modifiedStartLineNumber&&g.diff.modifiedEndLineNumber===u.modifiedEndLineNumber&&(h=g.heightInLines)}const f=ng(l,c,u.originalStartLineNumber,u.originalEndLineNumber);r.overviewZones.push(new Pu(f.startLineNumber,f.endLineNumber,h,o))}return r}_getModifiedEditorDecorations(e,t,i,s,o){const r=this._dataSource.getModifiedEditor(),a=String(this._insertColor),l={decorations:[],overviewZones:[]},c=r.getModel(),d=r._getViewModel();for(const u of t)if(P0(u)){l.decorations.push({range:new $(u.modifiedStartLineNumber,1,u.modifiedEndLineNumber,1073741824),options:s?pn.lineInsertWithSign:pn.lineInsert});const h=ng(c,d,u.modifiedStartLineNumber,u.modifiedEndLineNumber);if(l.overviewZones.push(new Pu(h.startLineNumber,h.endLineNumber,0,a)),u.charChanges){for(const f of u.charChanges)if(MA(f))if(i)for(let g=f.modifiedStartLineNumber;g<=f.modifiedEndLineNumber;g++){let p,_;g===f.modifiedStartLineNumber?p=f.modifiedStartColumn:p=c.getLineFirstNonWhitespaceColumn(g),g===f.modifiedEndLineNumber?_=f.modifiedEndColumn:_=c.getLineLastNonWhitespaceColumn(g),l.decorations.push(Mr(g,p,g,_,pn.charInsert))}else l.decorations.push(Mr(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn,pn.charInsert))}else l.decorations.push(Mr(u.modifiedStartLineNumber,1,u.modifiedEndLineNumber,1073741824,pn.charInsertWholeLine))}return l}layout(){return Math.max(5,this._decorationsLeft)}}class KY extends ic{constructor(e,t,i,s,o,r){super(e,t,i,s,o),this._originalModel=s.getModel(),this._renderIndicators=r,this._pendingLineChange=[],this._pendingViewZones=[],this._lineBreaksComputer=this._modifiedEditor._getViewModel().createLineBreaksComputer()}getViewZones(){const e=super.getViewZones();return this._finalize(e),e}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){const e=document.createElement("div");return e.className="inline-added-margin-view-zone",e}_produceOriginalFromDiff(e,t,i){const s=document.createElement("div");return s.className="inline-added-margin-view-zone",{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:i,domNode:document.createElement("div"),marginDomNode:s}}_produceModifiedFromDiff(e,t,i){const s=document.createElement("div");s.className=`view-lines line-delete ${fc}`;const o=document.createElement("div");o.className="inline-deleted-margin-view-zone";const r={shouldNotShrink:!0,afterLineNumber:e.modifiedEndLineNumber===0?e.modifiedStartLineNumber:e.modifiedStartLineNumber-1,heightInLines:t,minWidthInPx:0,domNode:s,marginDomNode:o,diff:{originalStartLineNumber:e.originalStartLineNumber,originalEndLineNumber:e.originalEndLineNumber,modifiedStartLineNumber:e.modifiedStartLineNumber,modifiedEndLineNumber:e.modifiedEndLineNumber,originalModel:this._originalModel,viewLineCounts:null}};for(let a=e.originalStartLineNumber;a<=e.originalEndLineNumber;a++)this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(a),null,null);return this._pendingLineChange.push(e),this._pendingViewZones.push(r),r}_finalize(e){const t=this._modifiedEditor.getOptions(),i=this._modifiedEditor.getModel().getOptions().tabSize,s=t.get(49),o=t.get(32),r=s.typicalHalfwidthCharacterWidth,a=t.get(102),l=this._originalModel.mightContainNonBasicASCII(),c=this._originalModel.mightContainRTL(),d=t.get(65),h=t.get(142).decorationsWidth,f=t.get(115),g=t.get(97),p=t.get(92),_=t.get(50),v=this._lineBreaksComputer.finalize();let b=0;for(let w=0;w<this._pendingLineChange.length;w++){const C=this._pendingLineChange[w],S=this._pendingViewZones[w],k=S.domNode;$i(k,s);const L=S.marginDomNode;$i(L,s);const x=[];if(C.charChanges)for(const ae of C.charChanges)RA(ae)&&x.push(new Jd(new $(ae.originalStartLineNumber,ae.originalStartColumn,ae.originalEndLineNumber,ae.originalEndColumn),"char-delete",0));const I=x.length>0,A=new Ng(1e4);let T=0,O=0,R=null;for(let ae=C.originalStartLineNumber;ae<=C.originalEndLineNumber;ae++){const ue=ae-C.originalStartLineNumber,me=this._originalModel.tokenization.getLineTokens(ae),de=me.getLineContent(),Ae=v[b++],ye=ps.filter(x,ae,1,de.length+1);if(Ae){let be=0;for(const Bt of Ae.breakOffsets){const Ri=me.sliceAndInflate(be,Bt,0),Mt=de.substring(be,Bt);T=Math.max(T,this._renderOriginalLine(O++,Mt,Ri,ps.extractWrapped(ye,be,Bt),I,l,c,s,o,d,h,f,g,p,_,i,A,L)),be=Bt}for(R||(R=[]);R.length<ue;)R[R.length]=1;R[ue]=Ae.breakOffsets.length,S.heightInLines+=Ae.breakOffsets.length-1;const le=document.createElement("div");le.className="gutter-delete",e.original.push({afterLineNumber:ae,afterColumn:0,heightInLines:Ae.breakOffsets.length-1,domNode:PA(),marginDomNode:le})}else T=Math.max(T,this._renderOriginalLine(O++,de,me,ye,I,l,c,s,o,d,h,f,g,p,_,i,A,L))}T+=a;const X=A.build(),ie=RC?RC.createHTML(X):X;if(k.innerHTML=ie,S.minWidthInPx=T*r,R){const ae=C.originalEndLineNumber-C.originalStartLineNumber;for(;R.length<=ae;)R[R.length]=1}S.diff.viewLineCounts=R}e.original.sort((w,C)=>w.afterLineNumber-C.afterLineNumber)}_renderOriginalLine(e,t,i,s,o,r,a,l,c,d,u,h,f,g,p,_,v,b){v.appendString('<div class="view-line'),o||v.appendString(" char-delete"),v.appendString('" style="top:'),v.appendString(String(e*d)),v.appendString('px;width:1000000px;">');const w=hn.isBasicASCII(t,r),C=hn.containsRTL(t,w,a),S=W_(new yl(l.isMonospace&&!c,l.canUseHalfwidthRightwardsArrow,t,!1,w,C,0,i,s,_,0,l.spaceWidth,l.middotWidth,l.wsmiddotWidth,h,f,g,p!==Kn.OFF,null),v);if(v.appendString("</div>"),this._renderIndicators){const k=document.createElement("div");k.className=`delete-sign ${je.asClassName(TA)}`,k.setAttribute("style",`position:absolute;top:${e*d}px;width:${u}px;height:${d}px;right:0;`),b.appendChild(k)}return S.characterMapping.getHorizontalOffset(S.characterMapping.length)}}function GY(n,e){return Gt(n,e,["off","on","inherit"])}function P0(n){return n.modifiedEndLineNumber>0}function O0(n){return n.originalEndLineNumber>0}function MA(n){return n.modifiedStartLineNumber===n.modifiedEndLineNumber?n.modifiedEndColumn-n.modifiedStartColumn>0:n.modifiedEndLineNumber-n.modifiedStartLineNumber>0}function RA(n){return n.originalStartLineNumber===n.originalEndLineNumber?n.originalEndColumn-n.originalStartColumn>0:n.originalEndLineNumber-n.originalStartLineNumber>0}function PA(){const n=document.createElement("div");return n.className="diagonal-fill",n}function ZY(){const n=document.createElement("div");return n.className="arrow-revert-change "+je.asClassName(we.arrowRight),Be("div",{},n)}function ng(n,e,t,i){const s=n.getLineCount();return t=Math.min(s,Math.max(1,t)),i=Math.min(s,Math.max(1,i)),e.coordinatesConverter.convertModelRangeToViewRange(new $(t,n.getLineMinColumn(t),i,n.getLineMaxColumn(i)))}function pE(n,e){return{enableSplitViewResizing:ve(n.enableSplitViewResizing,e.enableSplitViewResizing),splitViewDefaultRatio:hT(n.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:ve(n.renderSideBySide,e.renderSideBySide),renderMarginRevertIcon:ve(n.renderMarginRevertIcon,e.renderMarginRevertIcon),maxComputationTime:Nr(n.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:Nr(n.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:ve(n.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:ve(n.renderIndicators,e.renderIndicators),originalEditable:ve(n.originalEditable,e.originalEditable),diffCodeLens:ve(n.diffCodeLens,e.diffCodeLens),renderOverviewRuler:ve(n.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:GY(n.diffWordWrap,e.diffWordWrap),diffAlgorithm:Gt(n.diffAlgorithm,e.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:ve(n.accessibilityVerbose,e.accessibilityVerbose),hideUnchangedRegions:{enabled:!1,contextLineCount:0,minimumLineCount:0,revealLineCount:0},experimental:{showEmptyDecorations:!1,showMoves:!1},isInEmbeddedEditor:ve(n.isInEmbeddedEditor,e.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:0,useInlineViewWhenSpaceIsLimited:!1}}function YY(n,e){return{enableSplitViewResizing:n.enableSplitViewResizing!==e.enableSplitViewResizing,renderSideBySide:n.renderSideBySide!==e.renderSideBySide,renderMarginRevertIcon:n.renderMarginRevertIcon!==e.renderMarginRevertIcon,maxComputationTime:n.maxComputationTime!==e.maxComputationTime,maxFileSize:n.maxFileSize!==e.maxFileSize,ignoreTrimWhitespace:n.ignoreTrimWhitespace!==e.ignoreTrimWhitespace,renderIndicators:n.renderIndicators!==e.renderIndicators,originalEditable:n.originalEditable!==e.originalEditable,diffCodeLens:n.diffCodeLens!==e.diffCodeLens,renderOverviewRuler:n.renderOverviewRuler!==e.renderOverviewRuler,diffWordWrap:n.diffWordWrap!==e.diffWordWrap,diffAlgorithm:n.diffAlgorithm!==e.diffAlgorithm,accessibilityVerbose:n.accessibilityVerbose!==e.accessibilityVerbose}}sa((n,e)=>{const t=n.getColor(V$);e.addRule(`
	.monaco-editor .diagonal-fill {
		background-image: linear-gradient(
			-45deg,
			${t} 12.5%,
			#0000 12.5%, #0000 50%,
			${t} 50%, ${t} 62.5%,
			#0000 62.5%, #0000 100%
		);
		background-size: 8px 8px;
	}
	`)});var XY=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},QY=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},JY=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};let PC=class extends oe{constructor(e){super(),this._themeService=e,this._onWillCreateCodeEditor=this._register(new q),this._onCodeEditorAdd=this._register(new q),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new q),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onWillCreateDiffEditor=this._register(new q),this._onDiffEditorAdd=this._register(new q),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new q),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new Zn,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}willCreateCodeEditor(){this._onWillCreateCodeEditor.fire()}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}willCreateDiffEditor(){this._onWillCreateDiffEditor.fire()}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}removeDiffEditor(e){delete this._diffEditors[e.getId()]&&this._onDiffEditorRemove.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const i of t){if(i.hasTextFocus())return i;i.hasWidgetFocus()&&(e=i)}return e}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(i=>i.removeDecorationsByType(e))))}setModelProperty(e,t,i){const s=e.toString();let o;this._modelProperties.has(s)?o=this._modelProperties.get(s):(o=new Map,this._modelProperties.set(s,o)),o.set(t,i)}getModelProperty(e,t){const i=e.toString();if(this._modelProperties.has(i))return this._modelProperties.get(i).get(t)}openCodeEditor(e,t,i){return JY(this,void 0,void 0,function*(){for(const s of this._codeEditorOpenHandlers){const o=yield s(e,t,i);if(o!==null)return o}return null})}registerCodeEditorOpenHandler(e){const t=this._codeEditorOpenHandlers.unshift(e);return st(t)}};PC=XY([QY(0,ro)],PC);var eX=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},mE=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},tX=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};let F0=class extends PC{constructor(e,t){super(t),this.onCodeEditorAdd(()=>this._checkContextKey()),this.onCodeEditorRemove(()=>this._checkContextKey()),this._editorIsOpen=e.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this.registerCodeEditorOpenHandler((i,s,o)=>tX(this,void 0,void 0,function*(){return s?this.doOpenEditor(s,i):null}))}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const o=t.resource.scheme;if(o===Je.http||o===Je.https)return W4(t.resource.toString()),e}return null}const s=t.options?t.options.selection:null;if(s)if(typeof s.endLineNumber=="number"&&typeof s.endColumn=="number")e.setSelection(s),e.revealRangeInCenter(s,1);else{const o={lineNumber:s.startLineNumber,column:s.startColumn};e.setPosition(o),e.revealPositionInCenter(o,1)}return e}findModel(e,t){const i=e.getModel();return i&&i.uri.toString()!==t.toString()?null:i}};F0=eX([mE(0,Et),mE(1,ro)],F0);vt(oi,F0,0);const ih=ct("layoutService");var OA=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},FA=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let B0=class{get dimension(){return this._dimension||(this._dimension=M4(window.document.body)),this._dimension}get hasContainer(){return!1}get container(){throw new Error("ILayoutService.container is not available in the standalone editor!")}focus(){var e;(e=this._codeEditorService.getFocusedCodeEditor())===null||e===void 0||e.focus()}constructor(e){this._codeEditorService=e,this.onDidLayout=ke.None,this.offset={top:0,quickPickTop:0}}};B0=OA([FA(0,oi)],B0);let OC=class extends B0{get hasContainer(){return!1}get container(){return this._container}constructor(e,t){super(t),this._container=e}};OC=OA([FA(1,oi)],OC);vt(ih,B0,1);const BA=ct("dialogService");var iX=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},_E=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},Up=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};function qp(n){return n.scheme===Je.file?n.fsPath:n.path}let VA=0;class jp{constructor(e,t,i,s,o,r,a){this.id=++VA,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=i,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=s,this.groupOrder=o,this.sourceId=r,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class bE{constructor(e,t){this.resourceLabel=e,this.reason=t}}class vE{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,s]of this.elements)(s.reason===0?e:t).push(s.resourceLabel);const i=[];return e.length>0&&i.push(m({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&i.push(m({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),i.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class nX{constructor(e,t,i,s,o,r,a){this.id=++VA,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=i,this.groupId=s,this.groupOrder=o,this.sourceId=r,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,i){this.removedResources||(this.removedResources=new vE),this.removedResources.has(t)||this.removedResources.set(t,new bE(e,i))}setValid(e,t,i){i?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new vE),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new bE(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class WA{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){const e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const i of this._past)t(i.actual)&&this._setElementValidFlag(i,e);for(const i of this._future)t(i.actual)&&this._setElementValidFlag(i,e)}pushElement(e){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let i=0,s=this._past.length;i<s;i++)t.push(this._past[i].id);for(let i=this._future.length-1;i>=0;i--)t.push(this._future[i].id);return new Y3(e,t)}restoreSnapshot(e){const t=e.elements.length;let i=!0,s=0,o=-1;for(let a=0,l=this._past.length;a<l;a++,s++){const c=this._past[a];i&&(s>=t||c.id!==e.elements[s])&&(i=!1,o=0),!i&&c.type===1&&c.removeResource(this.resourceLabel,this.strResource,0)}let r=-1;for(let a=this._future.length-1;a>=0;a--,s++){const l=this._future[a];i&&(s>=t||l.id!==e.elements[s])&&(i=!1,r=a),!i&&l.type===1&&l.removeResource(this.resourceLabel,this.strResource,0)}o!==-1&&(this._past=this._past.slice(0,o)),r!==-1&&(this._future=this._future.slice(r+1)),this.versionId++}getElements(){const e=[],t=[];for(const i of this._past)e.push(i.actual);for(const i of this._future)t.push(i.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let i=this._past.length-1;i>=0;i--)if(this._past[i]===e){t.has(this.strResource)?this._past[i]=t.get(this.strResource):this._past.splice(i,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let i=this._future.length-1;i>=0;i--)if(this._future[i]===e){t.has(this.strResource)?this._future[i]=t.get(this.strResource):this._future.splice(i,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class Zb{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,i=this.editStacks.length;t<i;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const HA=new WA("","");HA.locked=!0;let FC=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);const t=[];for(const i of this._editStacks)t.push(i[1].toString());console.log(t.join(`
`))}pushElement(e,t=Fu.None,i=Jo.None){if(e.type===0){const s=qp(e.resource),o=this.getUriComparisonKey(e.resource);this._pushElement(new jp(e,s,o,t.id,t.nextOrder(),i.id,i.nextOrder()))}else{const s=new Set,o=[],r=[];for(const a of e.resources){const l=qp(a),c=this.getUriComparisonKey(a);s.has(c)||(s.add(c),o.push(l),r.push(c))}o.length===1?this._pushElement(new jp(e,o[0],r[0],t.id,t.nextOrder(),i.id,i.nextOrder())):this._pushElement(new nX(e,o,r,t.id,t.nextOrder(),i.id,i.nextOrder()))}}_pushElement(e){for(let t=0,i=e.strResources.length;t<i;t++){const s=e.resourceLabels[t],o=e.strResources[t];let r;this._editStacks.has(o)?r=this._editStacks.get(o):(r=new WA(s,o),this._editStacks.set(o,r)),r.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const i=this._editStacks.get(t);if(i.hasFutureElements())return null;const s=i.getClosestPastElement();return s?s.actual:null}return null}_splitPastWorkspaceElement(e,t){const i=e.actual.split(),s=new Map;for(const o of i){const r=qp(o.resource),a=this.getUriComparisonKey(o.resource),l=new jp(o,r,a,0,0,0,0);s.set(l.strResource,l)}for(const o of e.strResources){if(t&&t.has(o))continue;this._editStacks.get(o).splitPastWorkspaceElement(e,s)}}_splitFutureWorkspaceElement(e,t){const i=e.actual.split(),s=new Map;for(const o of i){const r=qp(o.resource),a=this.getUriComparisonKey(o.resource),l=new jp(o,r,a,0,0,0,0);s.set(l.strResource,l)}for(const o of e.strResources){if(t&&t.has(o))continue;this._editStacks.get(o).splitFutureWorkspaceElement(e,s)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,i){const s=this.getUriComparisonKey(e);this._editStacks.has(s)&&this._editStacks.get(s).setElementsValidFlag(t,i)}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new Y3(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const i=this._editStacks.get(t);i.restoreSnapshot(e),!i.hasPastElements()&&!i.hasFutureElements()&&(i.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[s,o]of this._editStacks){const r=o.getClosestPastElement();r&&r.sourceId===e&&(!t||r.sourceOrder>t.sourceOrder)&&(t=r,i=s)}return[t,i]}canUndo(e){if(e instanceof Jo){const[,i]=this._findClosestUndoElementWithSource(e.id);return!!i}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){$t(e);for(const i of t.strResources)this.removeElements(i);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,i,s,o){const r=this._acquireLocks(i);let a;try{a=t()}catch(l){return r(),s.dispose(),this._onError(l,e)}return a?a.then(()=>(r(),s.dispose(),o()),l=>(r(),s.dispose(),this._onError(l,e))):(r(),s.dispose(),o())}_invokeWorkspacePrepare(e){return Up(this,void 0,void 0,function*(){if(typeof e.actual.prepareUndoRedo>"u")return oe.None;const t=e.actual.prepareUndoRedo();return typeof t>"u"?oe.None:t})}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo>"u")return t(oe.None);const i=e.actual.prepareUndoRedo();return i?VF(i)?t(i):i.then(s=>t(s)):t(oe.None)}_getAffectedEditStacks(e){const t=[];for(const i of e.strResources)t.push(this._editStacks.get(i)||HA);return new Zb(t)}_tryToSplitAndUndo(e,t,i,s){if(t.canSplit())return this._splitPastWorkspaceElement(t,i),this._notificationService.warn(s),new Kp(this._undo(e,0,!0));for(const o of t.strResources)this.removeElements(o);return this._notificationService.warn(s),new Kp}_checkWorkspaceUndo(e,t,i,s){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,m({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(s&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,m({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const o=[];for(const a of i.editStacks)a.getClosestPastElement()!==t&&o.push(a.resourceLabel);if(o.length>0)return this._tryToSplitAndUndo(e,t,null,m({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,o.join(", ")));const r=[];for(const a of i.editStacks)a.locked&&r.push(a.resourceLabel);return r.length>0?this._tryToSplitAndUndo(e,t,null,m({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,r.join(", "))):i.isValid()?null:this._tryToSplitAndUndo(e,t,null,m({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,i){const s=this._getAffectedEditStacks(t),o=this._checkWorkspaceUndo(e,t,s,!1);return o?o.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,s,i)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const i=t.getClosestPastElement();if(i){if(i===e){const s=t.getSecondClosestPastElement();if(s&&s.groupId===e.groupId)return!0}if(i.groupId===e.groupId)return!0}}return!1}_confirmAndExecuteWorkspaceUndo(e,t,i,s){return Up(this,void 0,void 0,function*(){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){let a;(function(d){d[d.All=0]="All",d[d.This=1]="This",d[d.Cancel=2]="Cancel"})(a||(a={}));const{result:l}=yield this._dialogService.prompt({type:wi.Info,message:m("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),buttons:[{label:m({key:"ok",comment:["{0} denotes a number that is > 1, && denotes a mnemonic"]},"&&Undo in {0} Files",i.editStacks.length),run:()=>a.All},{label:m({key:"nok",comment:["&& denotes a mnemonic"]},"Undo this &&File"),run:()=>a.This}],cancelButton:{run:()=>a.Cancel}});if(l===a.Cancel)return;if(l===a.This)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const c=this._checkWorkspaceUndo(e,t,i,!1);if(c)return c.returnValue;s=!0}let o;try{o=yield this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const r=this._checkWorkspaceUndo(e,t,i,!0);if(r)return o.dispose(),r.returnValue;for(const a of i.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),i,o,()=>this._continueUndoInGroup(t.groupId,s))})}_resourceUndo(e,t,i){if(!t.isValid){e.flushAllElements();return}if(e.locked){const s=m({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(s);return}return this._invokeResourcePrepare(t,s=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new Zb([e]),s,()=>this._continueUndoInGroup(t.groupId,i))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[s,o]of this._editStacks){const r=o.getClosestPastElement();r&&r.groupId===e&&(!t||r.groupOrder>t.groupOrder)&&(t=r,i=s)}return[t,i]}_continueUndoInGroup(e,t){if(!e)return;const[,i]=this._findClosestUndoElementInGroup(e);if(i)return this._undo(i,0,t)}undo(e){if(e instanceof Jo){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,i){if(!this._editStacks.has(e))return;const s=this._editStacks.get(e),o=s.getClosestPastElement();if(!o)return;if(o.groupId){const[a,l]=this._findClosestUndoElementInGroup(o.groupId);if(o!==a&&l)return this._undo(l,t,i)}if((o.sourceId!==t||o.confirmBeforeUndo)&&!i)return this._confirmAndContinueUndo(e,t,o);try{return o.type===1?this._workspaceUndo(e,o,i):this._resourceUndo(s,o,i)}finally{}}_confirmAndContinueUndo(e,t,i){return Up(this,void 0,void 0,function*(){if((yield this._dialogService.confirm({message:m("confirmDifferentSource","Would you like to undo '{0}'?",i.label),primaryButton:m({key:"confirmDifferentSource.yes",comment:["&& denotes a mnemonic"]},"&&Yes"),cancelButton:m("confirmDifferentSource.no","No")})).confirmed)return this._undo(e,t,!0)})}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[s,o]of this._editStacks){const r=o.getClosestFutureElement();r&&r.sourceId===e&&(!t||r.sourceOrder<t.sourceOrder)&&(t=r,i=s)}return[t,i]}canRedo(e){if(e instanceof Jo){const[,i]=this._findClosestRedoElementWithSource(e.id);return!!i}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,i,s){if(t.canSplit())return this._splitFutureWorkspaceElement(t,i),this._notificationService.warn(s),new Kp(this._redo(e));for(const o of t.strResources)this.removeElements(o);return this._notificationService.warn(s),new Kp}_checkWorkspaceRedo(e,t,i,s){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,m({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(s&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,m({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const o=[];for(const a of i.editStacks)a.getClosestFutureElement()!==t&&o.push(a.resourceLabel);if(o.length>0)return this._tryToSplitAndRedo(e,t,null,m({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,o.join(", ")));const r=[];for(const a of i.editStacks)a.locked&&r.push(a.resourceLabel);return r.length>0?this._tryToSplitAndRedo(e,t,null,m({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,r.join(", "))):i.isValid()?null:this._tryToSplitAndRedo(e,t,null,m({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const i=this._getAffectedEditStacks(t),s=this._checkWorkspaceRedo(e,t,i,!1);return s?s.returnValue:this._executeWorkspaceRedo(e,t,i)}_executeWorkspaceRedo(e,t,i){return Up(this,void 0,void 0,function*(){let s;try{s=yield this._invokeWorkspacePrepare(t)}catch(r){return this._onError(r,t)}const o=this._checkWorkspaceRedo(e,t,i,!0);if(o)return s.dispose(),o.returnValue;for(const r of i.editStacks)r.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),i,s,()=>this._continueRedoInGroup(t.groupId))})}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const i=m({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(i);return}return this._invokeResourcePrepare(t,i=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new Zb([e]),i,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[s,o]of this._editStacks){const r=o.getClosestFutureElement();r&&r.groupId===e&&(!t||r.groupOrder<t.groupOrder)&&(t=r,i=s)}return[t,i]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof Jo){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),i=t.getClosestFutureElement();if(i){if(i.groupId){const[s,o]=this._findClosestRedoElementInGroup(i.groupId);if(i!==s&&o)return this._redo(o)}try{return i.type===1?this._workspaceRedo(e,i):this._resourceRedo(t,i)}finally{}}}};FC=iX([_E(0,BA),_E(1,zs)],FC);class Kp{constructor(e){this.returnValue=e}}vt(hL,FC,1);const $A=ct("environmentService"),IL=ct("openerService");function NL(n,e){return nt.isUri(n)?Cd(n.scheme,e):bS(n,e+":")}function wE(n,...e){return e.some(t=>NL(n,t))}function sX(n){let e;const t=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(n.fragment);return t&&(e={startLineNumber:parseInt(t[1]),startColumn:t[2]?parseInt(t[2]):1,endLineNumber:t[4]?parseInt(t[4]):void 0,endColumn:t[4]?t[5]?parseInt(t[5]):1:void 0},n=n.with({fragment:""})),{selection:e,uri:n}}var oX=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},CE=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};const rX=ct("ILanguageFeatureDebounceService");var V0;(function(n){const e=new WeakMap;let t=0;function i(s){let o=e.get(s);return o===void 0&&(o=++t,e.set(s,o)),o}n.of=i})(V0||(V0={}));class aX{constructor(e){this._default=e}get(e){return this._default}update(e,t){return this._default}default(){return this._default}}class lX{constructor(e,t,i,s,o,r){this._logService=e,this._name=t,this._registry=i,this._default=s,this._min=o,this._max=r,this._cache=new CL(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((t,i)=>TS(V0.of(i),t),0)}get(e){const t=this._key(e),i=this._cache.get(t);return i?ds(i.value,this._min,this._max):this.default()}update(e,t){const i=this._key(e);let s=this._cache.get(i);s||(s=new nY(6),this._cache.set(i,s));const o=ds(s.update(t),this._min,this._max);return NL(e.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${o}ms`),o}_overall(){const e=new wA;for(const[,t]of this._cache)e.update(t.value);return e.value}default(){const e=this._overall()|0||this._default;return ds(e,this._min,this._max)}}let BC=class{constructor(e,t){this._logService=e,this._data=new Map,this._isDev=t.isExtensionDevelopment||!t.isBuilt}for(e,t,i){var s,o,r;const a=(s=i==null?void 0:i.min)!==null&&s!==void 0?s:50,l=(o=i==null?void 0:i.max)!==null&&o!==void 0?o:Math.pow(a,2),c=(r=i==null?void 0:i.key)!==null&&r!==void 0?r:void 0,d=`${V0.of(e)},${a}${c?","+c:""}`;let u=this._data.get(d);return u||(this._isDev?u=new lX(this._logService,t,e,this._overallAverage()|0||a*1.5,a,l):(this._logService.debug(`[DEBOUNCE: ${t}] is disabled in developed mode`),u=new aX(a*1.5)),this._data.set(d,u)),u}_overallAverage(){const e=new wA;for(const t of this._data.values())e.update(t.default());return e.value}};BC=oX([CE(0,Cl),CE(1,$A)],BC);vt(rX,BC,1);var cX=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Yb=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let VC=class{constructor(e,t,i,s){this._legend=e,this._themeService=t,this._languageService=i,this._logService=s,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new Rr}getMetadata(e,t,i){const s=this._languageService.languageIdCodec.encodeLanguageId(i),o=this._hashTable.get(e,t,s);let r;if(o)r=o.metadata,this._logService.getLevel()===Ki.Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${e} / ${t}: foreground ${qn.getForeground(r)}, fontStyle ${qn.getFontStyle(r).toString(2)}`);else{let a=this._legend.tokenTypes[e];const l=[];if(a){let c=t;for(let u=0;c>0&&u<this._legend.tokenModifiers.length;u++)c&1&&l.push(this._legend.tokenModifiers[u]),c=c>>1;c>0&&this._logService.getLevel()===Ki.Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${t.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),l.push("not-in-legend"));const d=this._themeService.getColorTheme().getTokenStyleMetadata(a,l,i);if(typeof d>"u")r=2147483647;else{if(r=0,typeof d.italic<"u"){const u=(d.italic?1:0)<<11;r|=u|1}if(typeof d.bold<"u"){const u=(d.bold?2:0)<<11;r|=u|2}if(typeof d.underline<"u"){const u=(d.underline?4:0)<<11;r|=u|4}if(typeof d.strikethrough<"u"){const u=(d.strikethrough?8:0)<<11;r|=u|8}if(d.foreground){const u=d.foreground<<15;r|=u|16}r===0&&(r=2147483647)}}else this._logService.getLevel()===Ki.Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${e} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),r=2147483647,a="not-in-legend";this._hashTable.add(e,t,s,r),this._logService.getLevel()===Ki.Trace&&this._logService.trace(`SemanticTokensProviderStyling ${e} (${a}) / ${t} (${l.join(" ")}): foreground ${qn.getForeground(r)}, fontStyle ${qn.getFontStyle(r).toString(2)}`)}return r}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,console.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}warnInvalidLengthSemanticTokens(e,t){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,console.warn(`Semantic token with invalid length detected at lineNumber ${e}, column ${t}`))}warnInvalidEditStart(e,t,i,s,o){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,console.warn(`Invalid semantic tokens edit detected (previousResultId: ${e}, resultId: ${t}) at edit #${i}: The provided start offset ${s} is outside the previous data (length ${o}).`))}};VC=cX([Yb(1,ro),Yb(2,Mi),Yb(3,Cl)],VC);class dX{constructor(e,t,i,s){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=i,this.metadata=s,this.next=null}}class Rr{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=Rr._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Rr._SIZES.length?2/3*this._currentLength:0),this._elements=[],Rr._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let i=0;i<t;i++)e[i]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,i){return this._hash2(this._hash2(e,t),i)%this._currentLength}get(e,t,i){const s=this._hashFunc(e,t,i);let o=this._elements[s];for(;o;){if(o.tokenTypeIndex===e&&o.tokenModifierSet===t&&o.languageId===i)return o;o=o.next}return null}add(e,t,i,s){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const o=this._elements;this._currentLengthIndex++,this._currentLength=Rr._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Rr._SIZES.length?2/3*this._currentLength:0),this._elements=[],Rr._nullOutEntries(this._elements,this._currentLength);for(const r of o){let a=r;for(;a;){const l=a.next;a.next=null,this._add(a),a=l}}}this._add(new dX(e,t,i,s))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}}Rr._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];const uX=ct("semanticTokensStylingService");var hX=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Xb=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let WC=class extends oe{constructor(e,t,i){super(),this._themeService=e,this._logService=t,this._languageService=i,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}getStyling(e){return this._caches.has(e)||this._caches.set(e,new VC(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}};WC=hX([Xb(0,ro),Xb(1,Cl),Xb(2,Mi)],WC);vt(uX,WC,1);var yE=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const Gp="**",SE="/",Im="[/\\\\]",Nm="[^/\\\\]",fX=/\//g;function LE(n,e){switch(n){case 0:return"";case 1:return`${Nm}*?`;default:return`(?:${Im}|${Nm}+${Im}${e?`|${Im}${Nm}+`:""})*?`}}function xE(n,e){if(!n)return[];const t=[];let i=!1,s=!1,o="";for(const r of n){switch(r){case e:if(!i&&!s){t.push(o),o="";continue}break;case"{":i=!0;break;case"}":i=!1;break;case"[":s=!0;break;case"]":s=!1;break}o+=r}return o&&t.push(o),t}function zA(n){if(!n)return"";let e="";const t=xE(n,SE);if(t.every(i=>i===Gp))e=".*";else{let i=!1;t.forEach((s,o)=>{if(s===Gp){if(i)return;e+=LE(2,o===t.length-1)}else{let r=!1,a="",l=!1,c="";for(const d of s){if(d!=="}"&&r){a+=d;continue}if(l&&(d!=="]"||!c)){let u;d==="-"?u=d:(d==="^"||d==="!")&&!c?u="^":d===SE?u="":u=ta(d),c+=u;continue}switch(d){case"{":r=!0;continue;case"[":l=!0;continue;case"}":{const h=`(?:${xE(a,",").map(f=>zA(f)).join("|")})`;e+=h,r=!1,a="";break}case"]":{e+="["+c+"]",l=!1,c="";break}case"?":e+=Nm;continue;case"*":e+=LE(1);continue;default:e+=ta(d)}}o<t.length-1&&(t[o+1]!==Gp||o+2<t.length)&&(e+=Im)}i=s===Gp})}return e}const gX=/^\*\*\/\*\.[\w\.-]+$/,pX=/^\*\*\/([\w\.-]+)\/?$/,mX=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,_X=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,bX=/^\*\*((\/[\w\.-]+)+)\/?$/,vX=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,DE=new CL(1e4),kE=function(){return!1},cr=function(){return null};function TL(n,e){if(!n)return cr;let t;typeof n!="string"?t=n.pattern:t=n,t=t.trim();const i=`${t}_${!!e.trimForExclusions}`;let s=DE.get(i);if(s)return EE(s,n);let o;return gX.test(t)?s=wX(t.substr(4),t):(o=pX.exec(Qb(t,e)))?s=CX(o[1],t):(e.trimForExclusions?_X:mX).test(t)?s=yX(t,e):(o=bX.exec(Qb(t,e)))?s=IE(o[1].substr(1),t,!0):(o=vX.exec(Qb(t,e)))?s=IE(o[1],t,!1):s=SX(t),DE.set(i,s),EE(s,n)}function EE(n,e){if(typeof e=="string")return n;const t=function(i,s){return uC(i,e.base,!Cn)?n(S_(i.substr(e.base.length),Qa),s):null};return t.allBasenames=n.allBasenames,t.allPaths=n.allPaths,t.basenames=n.basenames,t.patterns=n.patterns,t}function Qb(n,e){return e.trimForExclusions&&n.endsWith("/**")?n.substr(0,n.length-2):n}function wX(n,e){return function(t,i){return typeof t=="string"&&t.endsWith(n)?e:null}}function CX(n,e){const t=`/${n}`,i=`\\${n}`,s=function(r,a){return typeof r!="string"?null:a?a===n?e:null:r===n||r.endsWith(t)||r.endsWith(i)?e:null},o=[n];return s.basenames=o,s.patterns=[e],s.allBasenames=o,s}function yX(n,e){const t=qA(n.slice(1,-1).split(",").map(a=>TL(a,e)).filter(a=>a!==cr),n),i=t.length;if(!i)return cr;if(i===1)return t[0];const s=function(a,l){for(let c=0,d=t.length;c<d;c++)if(t[c](a,l))return n;return null},o=t.find(a=>!!a.allBasenames);o&&(s.allBasenames=o.allBasenames);const r=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return r.length&&(s.allPaths=r),s}function IE(n,e,t){const i=Qa===fi.sep,s=i?n:n.replace(fX,Qa),o=Qa+s,r=fi.sep+n;let a;return t?a=function(l,c){return typeof l=="string"&&(l===s||l.endsWith(o)||!i&&(l===n||l.endsWith(r)))?e:null}:a=function(l,c){return typeof l=="string"&&(l===s||!i&&l===n)?e:null},a.allPaths=[(t?"*/":"./")+n],a}function SX(n){try{const e=new RegExp(`^${zA(n)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?n:null}}catch{return cr}}function LX(n,e,t){return!n||typeof e!="string"?!1:UA(n)(e,void 0,t)}function UA(n,e={}){if(!n)return kE;if(typeof n=="string"||xX(n)){const t=TL(n,e);if(t===cr)return kE;const i=function(s,o){return!!t(s,o)};return t.allBasenames&&(i.allBasenames=t.allBasenames),t.allPaths&&(i.allPaths=t.allPaths),i}return DX(n,e)}function xX(n){const e=n;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}function DX(n,e){const t=qA(Object.getOwnPropertyNames(n).map(a=>kX(a,n[a],e)).filter(a=>a!==cr)),i=t.length;if(!i)return cr;if(!t.some(a=>!!a.requiresSiblings)){if(i===1)return t[0];const a=function(d,u){let h;for(let f=0,g=t.length;f<g;f++){const p=t[f](d,u);if(typeof p=="string")return p;Rw(p)&&(h||(h=[]),h.push(p))}return h?(()=>yE(this,void 0,void 0,function*(){for(const f of h){const g=yield f;if(typeof g=="string")return g}return null}))():null},l=t.find(d=>!!d.allBasenames);l&&(a.allBasenames=l.allBasenames);const c=t.reduce((d,u)=>u.allPaths?d.concat(u.allPaths):d,[]);return c.length&&(a.allPaths=c),a}const s=function(a,l,c){let d,u;for(let h=0,f=t.length;h<f;h++){const g=t[h];g.requiresSiblings&&c&&(l||(l=CT(a)),d||(d=l.substr(0,l.length-l6(a).length)));const p=g(a,l,d,c);if(typeof p=="string")return p;Rw(p)&&(u||(u=[]),u.push(p))}return u?(()=>yE(this,void 0,void 0,function*(){for(const h of u){const f=yield h;if(typeof f=="string")return f}return null}))():null},o=t.find(a=>!!a.allBasenames);o&&(s.allBasenames=o.allBasenames);const r=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return r.length&&(s.allPaths=r),s}function kX(n,e,t){if(e===!1)return cr;const i=TL(n,t);if(i===cr)return cr;if(typeof e=="boolean")return i;if(e){const s=e.when;if(typeof s=="string"){const o=(r,a,l,c)=>{if(!c||!i(r,a))return null;const d=s.replace("$(basename)",()=>l),u=c(d);return Rw(u)?u.then(h=>h?n:null):u?n:null};return o.requiresSiblings=!0,o}}return i}function qA(n,e){const t=n.filter(a=>!!a.basenames);if(t.length<2)return n;const i=t.reduce((a,l)=>{const c=l.basenames;return c?a.concat(c):a},[]);let s;if(e){s=[];for(let a=0,l=i.length;a<l;a++)s.push(e)}else s=t.reduce((a,l)=>{const c=l.patterns;return c?a.concat(c):a},[]);const o=function(a,l){if(typeof a!="string")return null;if(!l){let d;for(d=a.length;d>0;d--){const u=a.charCodeAt(d-1);if(u===47||u===92)break}l=a.substr(d)}const c=i.indexOf(l);return c!==-1?s[c]:null};o.basenames=i,o.patterns=s,o.allBasenames=i;const r=n.filter(a=>!a.basenames);return r.push(o),r}function jA(n,e,t,i,s,o){if(Array.isArray(n)){let r=0;for(const a of n){const l=jA(a,e,t,i,s,o);if(l===10)return l;l>r&&(r=l)}return r}else{if(typeof n=="string")return i?n==="*"?5:n===t?10:0:0;if(n){const{language:r,pattern:a,scheme:l,hasAccessToAllModels:c,notebookType:d}=n;if(!i&&!c)return 0;d&&s&&(e=s);let u=0;if(l)if(l===e.scheme)u=10;else if(l==="*")u=5;else return 0;if(r)if(r===t)u=10;else if(r==="*")u=Math.max(u,5);else return 0;if(d)if(d===o)u=10;else if(d==="*"&&o!==void 0)u=Math.max(u,5);else return 0;if(a){let h;if(typeof a=="string"?h=a:h=Object.assign(Object.assign({},a),{base:wT(a.base)}),h===e.fsPath||LX(h,e.fsPath))u=10;else return 0}return u}else return 0}}function KA(n){return typeof n=="string"?!1:Array.isArray(n)?n.every(KA):!!n.exclusive}class NE{constructor(e,t,i,s){this.uri=e,this.languageId=t,this.notebookUri=i,this.notebookType=s}equals(e){var t,i;return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&((t=this.notebookUri)===null||t===void 0?void 0:t.toString())===((i=e.notebookUri)===null||i===void 0?void 0:i.toString())}}class Kt{constructor(e){this._notebookInfoResolver=e,this._clock=0,this._entries=[],this._onDidChange=new q,this.onDidChange=this._onDidChange.event}register(e,t){let i={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(i),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),st(()=>{if(i){const s=this._entries.indexOf(i);s>=0&&(this._entries.splice(s,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),i=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e);const t=[];for(const i of this._entries)i._score>0&&t.push(i.provider);return t}ordered(e){const t=[];return this._orderedForEach(e,i=>t.push(i.provider)),t}orderedGroups(e){const t=[];let i,s;return this._orderedForEach(e,o=>{i&&s===o._score?i.push(o.provider):(s=o._score,i=[o.provider],t.push(i))}),t}_orderedForEach(e,t){this._updateScores(e);for(const i of this._entries)i._score>0&&t(i)}_updateScores(e){var t,i;const s=(t=this._notebookInfoResolver)===null||t===void 0?void 0:t.call(this,e.uri),o=s?new NE(e.uri,e.getLanguageId(),s.uri,s.type):new NE(e.uri,e.getLanguageId(),void 0,void 0);if(!(!((i=this._lastCandidate)===null||i===void 0)&&i.equals(o))){this._lastCandidate=o;for(const r of this._entries)if(r._score=jA(r.selector,o.uri,o.languageId,hB(e),o.notebookUri,o.notebookType),KA(r.selector)&&r._score>0){for(const a of this._entries)a._score=0;r._score=1e3;break}this._entries.sort(Kt._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:qh(e.selector)&&!qh(t.selector)?1:!qh(e.selector)&&qh(t.selector)?-1:e._time<t._time?1:e._time>t._time?-1:0}}function qh(n){return typeof n=="string"?!1:Array.isArray(n)?n.some(qh):!!n.isBuiltin}class EX{constructor(){this.referenceProvider=new Kt(this._score.bind(this)),this.renameProvider=new Kt(this._score.bind(this)),this.codeActionProvider=new Kt(this._score.bind(this)),this.definitionProvider=new Kt(this._score.bind(this)),this.typeDefinitionProvider=new Kt(this._score.bind(this)),this.declarationProvider=new Kt(this._score.bind(this)),this.implementationProvider=new Kt(this._score.bind(this)),this.documentSymbolProvider=new Kt(this._score.bind(this)),this.inlayHintsProvider=new Kt(this._score.bind(this)),this.colorProvider=new Kt(this._score.bind(this)),this.codeLensProvider=new Kt(this._score.bind(this)),this.documentFormattingEditProvider=new Kt(this._score.bind(this)),this.documentRangeFormattingEditProvider=new Kt(this._score.bind(this)),this.onTypeFormattingEditProvider=new Kt(this._score.bind(this)),this.signatureHelpProvider=new Kt(this._score.bind(this)),this.hoverProvider=new Kt(this._score.bind(this)),this.documentHighlightProvider=new Kt(this._score.bind(this)),this.selectionRangeProvider=new Kt(this._score.bind(this)),this.foldingRangeProvider=new Kt(this._score.bind(this)),this.linkProvider=new Kt(this._score.bind(this)),this.inlineCompletionsProvider=new Kt(this._score.bind(this)),this.completionProvider=new Kt(this._score.bind(this)),this.linkedEditingRangeProvider=new Kt(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new Kt(this._score.bind(this)),this.documentSemanticTokensProvider=new Kt(this._score.bind(this)),this.documentOnDropEditProvider=new Kt(this._score.bind(this)),this.documentPasteEditProvider=new Kt(this._score.bind(this))}_score(e){var t;return(t=this._notebookTypeResolver)===null||t===void 0?void 0:t.call(this,e)}}vt(At,EX,1);const IX=ct("IWorkspaceEditService");class AL{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(bc.is(t))return bc.lift(t);if(lu.is(t))return lu.lift(t);throw new Error("Unsupported edit")})}}class bc extends AL{static is(e){return e instanceof bc?!0:Gn(e)&&nt.isUri(e.resource)&&Gn(e.textEdit)}static lift(e){return e instanceof bc?e:new bc(e.resource,e.textEdit,e.versionId,e.metadata)}constructor(e,t,i=void 0,s){super(s),this.resource=e,this.textEdit=t,this.versionId=i}}class lu extends AL{static is(e){return e instanceof lu?!0:Gn(e)&&(!!e.newResource||!!e.oldResource)}static lift(e){return e instanceof lu?e:new lu(e.oldResource,e.newResource,e.options,e.metadata)}constructor(e,t,i={},s){super(s),this.oldResource=e,this.newResource=t,this.options=i}}const an={enableSplitViewResizing:!0,splitViewDefaultRatio:.5,renderSideBySide:!0,renderMarginRevertIcon:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"advanced",accessibilityVerbose:!1,experimental:{showMoves:!1,showEmptyDecorations:!0},hideUnchangedRegions:{enabled:!1,contextLineCount:3,minimumLineCount:3,revealLineCount:20},isInEmbeddedEditor:!1,onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:900,useInlineViewWhenSpaceIsLimited:!0},NX=Object.freeze({id:"editor",order:5,type:"object",title:m("editorConfigurationTitle","Editor"),scope:5}),W0=Object.assign(Object.assign({},NX),{properties:{"editor.tabSize":{type:"number",default:Xi.tabSize,minimum:1,markdownDescription:m("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:"string",enum:["tabSize"]},{type:"number",minimum:1}],default:"tabSize",markdownDescription:m("indentSize",'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:"boolean",default:Xi.insertSpaces,markdownDescription:m("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:"boolean",default:Xi.detectIndentation,markdownDescription:m("detectIndentation","Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.","`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:"boolean",default:Xi.trimAutoWhitespace,description:m("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:Xi.largeFileOptimizations,description:m("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{type:"boolean",default:!0,description:m("wordBasedSuggestions","Controls whether completions should be computed based on words in the document.")},"editor.wordBasedSuggestionsMode":{enum:["currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[m("wordBasedSuggestionsMode.currentDocument","Only suggest words from the active document."),m("wordBasedSuggestionsMode.matchingDocuments","Suggest words from all open documents of the same language."),m("wordBasedSuggestionsMode.allDocuments","Suggest words from all open documents.")],description:m("wordBasedSuggestionsMode","Controls from which documents word based completions are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[m("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),m("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),m("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:m("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:m("stablePeek","Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:m("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.experimental.asyncTokenization":{type:"boolean",default:!1,description:m("editor.experimental.asyncTokenization","Controls whether the tokenization should happen asynchronously on a web worker."),tags:["experimental"]},"editor.experimental.asyncTokenizationLogging":{type:"boolean",default:!1,description:m("editor.experimental.asyncTokenizationLogging","Controls whether async tokenization should be logged. For debugging only.")},"editor.experimental.asyncTokenizationVerification":{type:"boolean",default:!1,description:m("editor.experimental.asyncTokenizationVerification","Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only."),tags:["experimental"]},"editor.language.brackets":{type:["array","null"],default:null,description:m("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:m("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:m("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:m("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:m("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:m("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:an.maxComputationTime,description:m("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:an.maxFileSize,description:m("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:an.renderSideBySide,description:m("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderSideBySideInlineBreakpoint":{type:"number",default:an.renderSideBySideInlineBreakpoint,description:m("renderSideBySideInlineBreakpoint","If the diff editor width is smaller than this value, the inline view is used.")},"diffEditor.useInlineViewWhenSpaceIsLimited":{type:"boolean",default:an.useInlineViewWhenSpaceIsLimited,description:m("useInlineViewWhenSpaceIsLimited","If enabled and the editor width is too small, the inline view is used.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:an.renderMarginRevertIcon,description:m("renderMarginRevertIcon","When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:an.ignoreTrimWhitespace,description:m("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:an.renderIndicators,description:m("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:an.diffCodeLens,description:m("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:an.diffWordWrap,markdownEnumDescriptions:[m("wordWrap.off","Lines will never wrap."),m("wordWrap.on","Lines will wrap at the viewport width."),m("wordWrap.inherit","Lines will wrap according to the {0} setting.","`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:an.diffAlgorithm,markdownEnumDescriptions:[m("diffAlgorithm.legacy","Uses the legacy diffing algorithm."),m("diffAlgorithm.advanced","Uses the advanced diffing algorithm.")],tags:["experimental"]},"diffEditor.hideUnchangedRegions.enabled":{type:"boolean",default:an.hideUnchangedRegions.enabled,markdownDescription:m("hideUnchangedRegions.enabled","Controls whether the diff editor shows unchanged regions. Only works when {0} is set.","`#diffEditor.experimental.useVersion2#`")},"diffEditor.hideUnchangedRegions.revealLineCount":{type:"integer",default:an.hideUnchangedRegions.revealLineCount,markdownDescription:m("hideUnchangedRegions.revealLineCount","Controls how many lines are used for unchanged regions. Only works when {0} is set.","`#diffEditor.experimental.useVersion2#`"),minimum:1},"diffEditor.hideUnchangedRegions.minimumLineCount":{type:"integer",default:an.hideUnchangedRegions.minimumLineCount,markdownDescription:m("hideUnchangedRegions.minimumLineCount","Controls how many lines are used as a minimum for unchanged regions. Only works when {0} is set.","`#diffEditor.experimental.useVersion2#`"),minimum:1},"diffEditor.hideUnchangedRegions.contextLineCount":{type:"integer",default:an.hideUnchangedRegions.contextLineCount,markdownDescription:m("hideUnchangedRegions.contextLineCount","Controls how many lines are used as context when comparing unchanged regions. Only works when {0} is set.","`#diffEditor.experimental.useVersion2#`"),minimum:1},"diffEditor.experimental.showMoves":{type:"boolean",default:an.experimental.showMoves,markdownDescription:m("showMoves","Controls whether the diff editor should show detected code moves. Only works when {0} is set.","`#diffEditor.experimental.useVersion2#`")},"diffEditor.experimental.useVersion2":{type:"boolean",default:!0,description:m("useVersion2","Controls whether the diff editor uses the new or the old implementation."),tags:["experimental"]},"diffEditor.experimental.showEmptyDecorations":{type:"boolean",default:an.experimental.showEmptyDecorations,description:m("showEmptyDecorations","Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.")}}});function TX(n){return typeof n.type<"u"||typeof n.anyOf<"u"}for(const n of vd){const e=n.schema;if(typeof e<"u")if(TX(e))W0.properties[`editor.${n.name}`]=e;else for(const t in e)Object.hasOwnProperty.call(e,t)&&(W0.properties[t]=e[t])}let Zp=null;function GA(){return Zp===null&&(Zp=Object.create(null),Object.keys(W0.properties).forEach(n=>{Zp[n]=!0})),Zp}function AX(n){return GA()[`editor.${n}`]||!1}function MX(n){return GA()[`diffEditor.${n}`]||!1}const RX=zi.as($c.Configuration);RX.registerConfiguration(W0);class PX{static insert(e,t){return{range:new $(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}function Jb(n){return Object.isFrozen(n)?n:A7(n)}class Yi{constructor(e={},t=[],i=[],s){this._contents=e,this._keys=t,this._overrides=i,this.raw=s,this.overrideConfigurations=new Map}get rawConfiguration(){var e;if(!this._rawConfiguration)if(!((e=this.raw)===null||e===void 0)&&e.length){const t=this.raw.map(i=>{if(i instanceof Yi)return i;const s=new OX("");return s.parseRaw(i),s.configurationModel});this._rawConfiguration=t.reduce((i,s)=>s===i?s:i.merge(s),t[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this._contents}get overrides(){return this._overrides}get keys(){return this._keys}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?SD(this.contents,e):this.contents}inspect(e,t){const i=this.rawConfiguration.getValue(e),s=t?this.rawConfiguration.getOverrideValue(e,t):void 0,o=t?this.rawConfiguration.override(t).getValue(e):i;return{value:i,override:s,merged:o}}getOverrideValue(e,t){const i=this.getContentsForOverrideIdentifer(t);return i?e?SD(i,e):i:void 0}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){var t,i;const s=Da(this.contents),o=Da(this.overrides),r=[...this.keys],a=!((t=this.raw)===null||t===void 0)&&t.length?[...this.raw]:[this];for(const l of e)if(a.push(...!((i=l.raw)===null||i===void 0)&&i.length?l.raw:[l]),!l.isEmpty()){this.mergeContents(s,l.contents);for(const c of l.overrides){const[d]=o.filter(u=>An(u.identifiers,c.identifiers));d?(this.mergeContents(d.contents,c.contents),d.keys.push(...c.keys),d.keys=Cc(d.keys)):o.push(Da(c))}for(const c of l.keys)r.indexOf(c)===-1&&r.push(c)}return new Yi(s,r,o,a.every(l=>l instanceof Yi)?void 0:a)}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;const i={};for(const s of Cc([...Object.keys(this.contents),...Object.keys(t)])){let o=this.contents[s];const r=t[s];r&&(typeof o=="object"&&typeof r=="object"?(o=Da(o),this.mergeContents(o,r)):o=r),i[s]=o}return new Yi(i,this.keys,this.overrides)}mergeContents(e,t){for(const i of Object.keys(t)){if(i in e&&Gn(e[i])&&Gn(t[i])){this.mergeContents(e[i],t[i]);continue}e[i]=Da(t[i])}}getContentsForOverrideIdentifer(e){let t=null,i=null;const s=o=>{o&&(i?this.mergeContents(i,o):i=Da(o))};for(const o of this.overrides)o.identifiers.length===1&&o.identifiers[0]===e?t=o.contents:o.identifiers.includes(e)&&s(o.contents);return s(t),i}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(e,t){this.updateValue(e,t,!0)}setValue(e,t){this.updateValue(e,t,!1)}removeValue(e){const t=this.keys.indexOf(e);t!==-1&&(this.keys.splice(t,1),IB(this.contents,e),dl.test(e)&&this.overrides.splice(this.overrides.findIndex(i=>An(i.identifiers,i0(e))),1))}updateValue(e,t,i){zT(this.contents,e,t,s=>console.error(s)),i=i||this.keys.indexOf(e)===-1,i&&this.keys.push(e),dl.test(e)&&this.overrides.push({identifiers:i0(e),keys:Object.keys(this.contents[e]),contents:Tw(this.contents[e],s=>console.error(s))})}}class OX{constructor(e){this._name=e,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[]}get configurationModel(){return this._configurationModel||new Yi}parseRaw(e,t){this._raw=e;const{contents:i,keys:s,overrides:o,restricted:r,hasExcludedProperties:a}=this.doParseRaw(e,t);this._configurationModel=new Yi(i,s,o,a?[e]:void 0),this._restrictedConfigurations=r||[]}doParseRaw(e,t){const i=zi.as($c.Configuration).getConfigurationProperties(),s=this.filter(e,i,!0,t);e=s.raw;const o=Tw(e,l=>console.error(`Conflict in settings file ${this._name}: ${l}`)),r=Object.keys(e),a=this.toOverrides(e,l=>console.error(`Conflict in settings file ${this._name}: ${l}`));return{contents:o,keys:r,overrides:a,restricted:s.restricted,hasExcludedProperties:s.hasExcludedProperties}}filter(e,t,i,s){var o,r,a;let l=!1;if(!(s!=null&&s.scopes)&&!(s!=null&&s.skipRestricted)&&!(!((o=s==null?void 0:s.exclude)===null||o===void 0)&&o.length))return{raw:e,restricted:[],hasExcludedProperties:l};const c={},d=[];for(const u in e)if(dl.test(u)&&i){const h=this.filter(e[u],t,!1,s);c[u]=h.raw,l=l||h.hasExcludedProperties,d.push(...h.restricted)}else{const h=t[u],f=h?typeof h.scope<"u"?h.scope:3:void 0;h!=null&&h.restricted&&d.push(u),!(!((r=s.exclude)===null||r===void 0)&&r.includes(u))&&(!((a=s.include)===null||a===void 0)&&a.includes(u)||(f===void 0||s.scopes===void 0||s.scopes.includes(f))&&!(s.skipRestricted&&(h!=null&&h.restricted)))?c[u]=e[u]:l=!0}return{raw:c,restricted:d,hasExcludedProperties:l}}toOverrides(e,t){const i=[];for(const s of Object.keys(e))if(dl.test(s)){const o={};for(const r in e[s])o[r]=e[s][r];i.push({identifiers:i0(s),keys:Object.keys(o),contents:Tw(o,t)})}return i}}class FX{constructor(e,t,i,s,o,r,a,l,c,d,u,h,f){this.key=e,this.overrides=t,this._value=i,this.overrideIdentifiers=s,this.defaultConfiguration=o,this.policyConfiguration=r,this.applicationConfiguration=a,this.userConfiguration=l,this.localUserConfiguration=c,this.remoteUserConfiguration=d,this.workspaceConfiguration=u,this.folderConfigurationModel=h,this.memoryConfigurationModel=f}inspect(e,t,i){const s=e.inspect(t,i);return{get value(){return Jb(s.value)},get override(){return Jb(s.override)},get merged(){return Jb(s.merged)}}}get userInspectValue(){return this._userInspectValue||(this._userInspectValue=this.inspect(this.userConfiguration,this.key,this.overrides.overrideIdentifier)),this._userInspectValue}get user(){return this.userInspectValue.value!==void 0||this.userInspectValue.override!==void 0?{value:this.userInspectValue.value,override:this.userInspectValue.override}:void 0}}class n1{constructor(e,t,i,s,o=new Yi,r=new Yi,a=new vn,l=new Yi,c=new vn){this._defaultConfiguration=e,this._policyConfiguration=t,this._applicationConfiguration=i,this._localUserConfiguration=s,this._remoteUserConfiguration=o,this._workspaceConfiguration=r,this._folderConfigurations=a,this._memoryConfiguration=l,this._memoryConfigurationByResource=c,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new vn,this._userConfiguration=null}getValue(e,t,i){return this.getConsolidatedConfigurationModel(e,t,i).getValue(e)}updateValue(e,t,i={}){let s;i.resource?(s=this._memoryConfigurationByResource.get(i.resource),s||(s=new Yi,this._memoryConfigurationByResource.set(i.resource,s))):s=this._memoryConfiguration,t===void 0?s.removeValue(e):s.setValue(e,t),i.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,i){const s=this.getConsolidatedConfigurationModel(e,t,i),o=this.getFolderConfigurationModelForResource(t.resource,i),r=t.resource?this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration:this._memoryConfiguration,a=new Set;for(const l of s.overrides)for(const c of l.identifiers)s.getOverrideValue(e,c)!==void 0&&a.add(c);return new FX(e,t,s.getValue(e),a.size?[...a]:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,i?this._workspaceConfiguration:void 0,o||void 0,r)}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration)),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidatedConfigurationModel(e,t,i){let s=this.getConsolidatedConfigurationModelForResource(t,i);return t.overrideIdentifier&&(s=s.override(t.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(e)!==void 0&&(s=s.merge(this._policyConfiguration)),s}getConsolidatedConfigurationModelForResource({resource:e},t){let i=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const s=t.getFolder(e);s&&(i=this.getFolderConsolidatedConfiguration(s.uri)||i);const o=this._memoryConfigurationByResource.get(e);o&&(i=i.merge(o))}return i}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const i=this.getWorkspaceConsolidatedConfiguration(),s=this._folderConfigurations.get(e);s?(t=i.merge(s),this._foldersConsolidatedConfigurations.set(e,t)):t=i}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const i=t.getFolder(e);if(i)return this._folderConfigurations.get(i.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:i,overrides:s,keys:o}=this._folderConfigurations.get(t);return e.push([t,{contents:i,overrides:s,keys:o}]),e},[])}}static parse(e){const t=this.parseConfigurationModel(e.defaults),i=this.parseConfigurationModel(e.policy),s=this.parseConfigurationModel(e.application),o=this.parseConfigurationModel(e.user),r=this.parseConfigurationModel(e.workspace),a=e.folders.reduce((l,c)=>(l.set(nt.revive(c[0]),this.parseConfigurationModel(c[1])),l),new vn);return new n1(t,i,s,o,new Yi,r,a,new Yi,new vn)}static parseConfigurationModel(e){return new Yi(e.contents,e.keys,e.overrides)}}class BX{constructor(e,t,i,s){this.change=e,this.previous=t,this.currentConfiguraiton=i,this.currentWorkspace=s,this._marker=`
`,this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=".".charCodeAt(0),this.affectedKeys=new Set,this._previousConfiguration=void 0;for(const o of e.keys)this.affectedKeys.add(o);for(const[,o]of e.overrides)for(const r of o)this.affectedKeys.add(r);this._affectsConfigStr=this._marker;for(const o of this.affectedKeys)this._affectsConfigStr+=o+this._marker}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=n1.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(e,t){var i;const s=this._marker+e,o=this._affectsConfigStr.indexOf(s);if(o<0)return!1;const r=o+s.length;if(r>=this._affectsConfigStr.length)return!1;const a=this._affectsConfigStr.charCodeAt(r);if(a!==this._markerCode1&&a!==this._markerCode2)return!1;if(t){const l=this.previousConfiguration?this.previousConfiguration.getValue(e,t,(i=this.previous)===null||i===void 0?void 0:i.workspace):void 0,c=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!bs(l,c)}return!0}}const H0={kind:0},VX={kind:1};function WX(n,e,t){return{kind:2,commandId:n,commandArgs:e,isBubble:t}}class _f{constructor(e,t,i){var s;this._log=i,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(const o of e){const r=o.command;r&&r.charAt(0)!=="-"&&this._defaultBoundCommands.set(r,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=_f.handleRemovals([].concat(e).concat(t));for(let o=0,r=this._keybindings.length;o<r;o++){const a=this._keybindings[o];if(a.chords.length===0)continue;const l=(s=a.when)===null||s===void 0?void 0:s.substituteConstants();l&&l.type===0||this._addKeyPress(a.chords[0],a)}}static _isTargetedForRemoval(e,t,i){if(t){for(let s=0;s<t.length;s++)if(t[s]!==e.chords[s])return!1}return!(i&&i.type!==1&&(!e.when||!oB(i,e.when)))}static handleRemovals(e){const t=new Map;for(let s=0,o=e.length;s<o;s++){const r=e[s];if(r.command&&r.command.charAt(0)==="-"){const a=r.command.substring(1);t.has(a)?t.get(a).push(r):t.set(a,[r])}}if(t.size===0)return e;const i=[];for(let s=0,o=e.length;s<o;s++){const r=e[s];if(!r.command||r.command.length===0){i.push(r);continue}if(r.command.charAt(0)==="-")continue;const a=t.get(r.command);if(!a||!r.isDefault){i.push(r);continue}let l=!1;for(const c of a){const d=c.when;if(this._isTargetedForRemoval(r,c.chords,d)){l=!0;break}}if(!l){i.push(r);continue}}return i}_addKeyPress(e,t){const i=this._map.get(e);if(typeof i>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let s=i.length-1;s>=0;s--){const o=i[s];if(o.command===t.command)continue;let r=!0;for(let a=1;a<o.chords.length&&a<t.chords.length;a++)if(o.chords[a]!==t.chords[a]){r=!1;break}r&&_f.whenIsEntirelyIncluded(o.when,t.when)&&this._removeFromLookupMap(o)}i.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;const t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let i=0,s=t.length;i<s;i++)if(t[i]===e){t.splice(i,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:Nw(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const i=this._lookupMap.get(e);if(typeof i>"u"||i.length===0)return null;if(i.length===1)return i[0];for(let s=i.length-1;s>=0;s--){const o=i[s];if(t.contextMatchesRules(o.when))return o}return i[i.length-1]}resolve(e,t,i){const s=[...t,i];this._log(`| Resolving ${s}`);const o=this._map.get(s[0]);if(o===void 0)return this._log("\\ No keybinding entries."),H0;let r=null;if(s.length<2)r=o;else{r=[];for(let l=0,c=o.length;l<c;l++){const d=o[l];if(s.length>d.chords.length)continue;let u=!0;for(let h=1;h<s.length;h++)if(d.chords[h]!==s[h]){u=!1;break}u&&r.push(d)}}const a=this._findCommand(e,r);return a?s.length<a.chords.length?(this._log(`\\ From ${r.length} keybinding entries, awaiting ${a.chords.length-s.length} more chord(s), when: ${TE(a.when)}, source: ${AE(a)}.`),VX):(this._log(`\\ From ${r.length} keybinding entries, matched ${a.command}, when: ${TE(a.when)}, source: ${AE(a)}.`),WX(a.command,a.commandArgs,a.bubble)):(this._log(`\\ From ${r.length} keybinding entries, no when clauses matched the context.`),H0)}_findCommand(e,t){for(let i=t.length-1;i>=0;i--){const s=t[i];if(_f._contextMatchesRules(e,s.when))return s}return null}static _contextMatchesRules(e,t){return t?t.evaluate(e):!0}}function TE(n){return n?`${n.serialize()}`:"no when condition"}function AE(n){return n.extensionId?n.isBuiltinExtension?`built-in extension ${n.extensionId}`:`user extension ${n.extensionId}`:n.isDefault?"built-in":"user"}const HX=/^(cursor|delete|undo|redo|tab|editor\.action\.clipboard)/;class $X extends oe{get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:ke.None}get inChordMode(){return this._currentChords.length>0}constructor(e,t,i,s,o){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=i,this._notificationService=s,this._logService=o,this._onDidUpdateKeybindings=this._register(new q),this._currentChords=[],this._currentChordChecker=new Tg,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=Fd.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new zc,this._logging=!1}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const i=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(i)return i.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){this._log("/ Soft dispatching keyboard event");const i=this.resolveKeyboardEvent(e);if(i.hasMultipleChords())return console.warn("keyboard event should not be mapped to multiple chords"),H0;const[s]=i.getDispatchChords();if(s===null)return this._log("\\ Keyboard event cannot be dispatched"),H0;const o=this._contextKeyService.getContext(t),r=this._currentChords.map(({keypress:a})=>a);return this._getResolver().resolve(o,r,s)}_scheduleLeaveChordMode(){const e=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-e>5e3&&this._leaveChordMode()},500)}_expectAnotherChord(e,t){switch(this._currentChords.push({keypress:e,label:t}),this._currentChords.length){case 0:throw dS("impossible");case 1:this._currentChordStatusMessage=this._notificationService.status(m("first.chord","({0}) was pressed. Waiting for second key of chord...",t));break;default:{const i=this._currentChords.map(({label:s})=>s).join(", ");this._currentChordStatusMessage=this._notificationService.status(m("next.chord","({0}) was pressed. Waiting for next key of chord...",i))}}this._scheduleLeaveChordMode(),of.enabled&&of.disable()}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChords=[],of.enable()}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const i=this.resolveKeyboardEvent(e),[s]=i.getSingleModifierDispatchChords();if(s)return this._ignoreSingleModifiers.has(s)?(this._log(`+ Ignoring single modifier ${s} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=Fd.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=Fd.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${s}.`),this._currentSingleModifier=s,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):s===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${s} ${s}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(i,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${s}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[o]=i.getChords();return this._ignoreSingleModifiers=new Fd(o),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,i=!1){var s;let o=!1;if(e.hasMultipleChords())return console.warn("Unexpected keyboard event mapped to multiple chords"),!1;let r=null,a=null;if(i){const[u]=e.getSingleModifierDispatchChords();r=u,a=u?[u]:[]}else[r]=e.getDispatchChords(),a=this._currentChords.map(({keypress:u})=>u);if(r===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),o;const l=this._contextKeyService.getContext(t),c=e.getLabel(),d=this._getResolver().resolve(l,a,r);switch(d.kind){case 0:{if(this._logService.trace("KeybindingService#dispatch",c,"[ No matching keybinding ]"),this.inChordMode){const u=this._currentChords.map(({label:h})=>h).join(", ");this._log(`+ Leaving multi-chord mode: Nothing bound to "${u}, ${c}".`),this._notificationService.status(m("missing.chord","The key combination ({0}, {1}) is not a command.",u,c),{hideAfter:10*1e3}),this._leaveChordMode(),o=!0}return o}case 1:return this._logService.trace("KeybindingService#dispatch",c,"[ Several keybindings match - more chords needed ]"),o=!0,this._expectAnotherChord(r,c),this._log(this._currentChords.length===1?"+ Entering multi-chord mode...":"+ Continuing multi-chord mode..."),o;case 2:{if(this._logService.trace("KeybindingService#dispatch",c,`[ Will dispatch command ${d.commandId} ]`),d.commandId===null||d.commandId===""){if(this.inChordMode){const u=this._currentChords.map(({label:h})=>h).join(", ");this._log(`+ Leaving chord mode: Nothing bound to "${u}, ${c}".`),this._notificationService.status(m("missing.chord","The key combination ({0}, {1}) is not a command.",u,c),{hideAfter:10*1e3}),this._leaveChordMode(),o=!0}}else this.inChordMode&&this._leaveChordMode(),d.isBubble||(o=!0),this._log(`+ Invoking command ${d.commandId}.`),typeof d.commandArgs>"u"?this._commandService.executeCommand(d.commandId).then(void 0,u=>this._notificationService.warn(u)):this._commandService.executeCommand(d.commandId,d.commandArgs).then(void 0,u=>this._notificationService.warn(u)),HX.test(d.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:d.commandId,from:"keybinding",detail:(s=e.getUserSettingsLabel())!==null&&s!==void 0?s:void 0});return o}}}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}}class Fd{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}}Fd.EMPTY=new Fd(null);class ME{constructor(e,t,i,s,o,r,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.chords=e?HC(e.getDispatchChords()):[],e&&this.chords.length===0&&(this.chords=HC(e.getSingleModifierDispatchChords())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=i,this.when=s,this.isDefault=o,this.extensionId=r,this.isBuiltinExtension=a}}function HC(n){const e=[];for(let t=0,i=n.length;t<i;t++){const s=n[t];if(!s)return[];e.push(s)}return e}class s1{constructor(e,t,i=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=i}toLabel(e,t,i){if(t.length===0)return null;const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=i(a);if(l===null)return null;s[o]=jX(a,l,this.modifierLabels[e])}return s.join(" ")}}const ML=new s1({ctrlKey:"⌃",shiftKey:"⇧",altKey:"⌥",metaKey:"⌘",separator:""},{ctrlKey:m({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:m({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:m({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:m({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:m({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:m({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:m({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:m({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),zX=new s1({ctrlKey:m({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:m({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:m({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:m({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:m({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:m({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:m({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:m({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:m({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:m({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:m({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:m({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),UX=new s1({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),qX=new s1({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function jX(n,e,t){if(e===null)return"";const i=[];return n.ctrlKey&&i.push(t.ctrlKey),n.shiftKey&&i.push(t.shiftKey),n.altKey&&i.push(t.altKey),n.metaKey&&i.push(t.metaKey),e!==""&&i.push(e),i.join(t.separator)}class KX extends zW{constructor(e,t){if(super(),t.length===0)throw C_("chords");this._os=e,this._chords=t}getLabel(){return ML.toLabel(this._os,this._chords,e=>this._getLabel(e))}getAriaLabel(){return zX.toLabel(this._os,this._chords,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._chords.length>1||this._chords[0].isDuplicateModifierCase()?null:UX.toLabel(this._os,this._chords,e=>this._getElectronAccelerator(e))}getUserSettingsLabel(){return qX.toLabel(this._os,this._chords,e=>this._getUserSettingsLabel(e))}hasMultipleChords(){return this._chords.length>1}getChords(){return this._chords.map(e=>this._getChord(e))}_getChord(e){return new $W(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchChords(){return this._chords.map(e=>this._getChordDispatch(e))}getSingleModifierDispatchChords(){return this._chords.map(e=>this._getSingleModifierChordDispatch(e))}}class sg extends KX{constructor(e,t){super(t,e)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"←";case 16:return"↑";case 17:return"→";case 18:return"↓"}return Pr.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":Pr.toString(e.keyCode)}_getElectronAccelerator(e){return Pr.toElectronAccelerator(e.keyCode)}_getUserSettingsLabel(e){if(e.isDuplicateModifierCase())return"";const t=Pr.toUserSettingsUS(e.keyCode);return t&&t.toLowerCase()}_getChordDispatch(e){return sg.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=Pr.toString(e.keyCode),t}_getSingleModifierChordDispatch(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const t=pS[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 88;case 52:return 86;case 53:return 92;case 54:return 94;case 55:return 93;case 56:return 0;case 57:return 85;case 58:return 95;case 59:return 91;case 60:return 87;case 61:return 89;case 62:return 90;case 106:return 97}return 0}static _toKeyCodeChord(e){if(!e)return null;if(e instanceof xc)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new xc(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveKeybinding(e,t){const i=HC(e.chords.map(s=>this._toKeyCodeChord(s)));return i.length>0?[new sg(i,t)]:[]}}const GX=ct("labelService");class ZX{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),i=this._value.charCodeAt(this._pos);return t-i}value(){return this._value[this._pos]}}class YX{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?_S(e,this._value,0,e.length,this._from,this._to):Eg(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class XX{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){const i=this._value.charCodeAt(t);if(!(i===47||this._splitOnBackslash&&i===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?_S(e,this._value,0,e.length,this._from,this._to):Eg(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class QX{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new XX(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return fD(e,this._value.scheme);if(this._states[this._stateIdx]===2)return fD(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return Lw(e,this._value.query);if(this._states[this._stateIdx]===5)return Lw(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class Yp{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e,t;return(t=(e=this.left)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}get heightRight(){var e,t;return(t=(e=this.right)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}}class bf{static forUris(e=()=>!1,t=()=>!1){return new bf(new QX(e,t))}static forStrings(){return new bf(new ZX)}static forConfigKeys(){return new bf(new YX)}constructor(e){this._iter=e}clear(){this._root=void 0}set(e,t){const i=this._iter.reset(e);let s;this._root||(this._root=new Yp,this._root.segment=i.value());const o=[];for(s=this._root;;){const a=i.cmp(s.segment);if(a>0)s.left||(s.left=new Yp,s.left.segment=i.value()),o.push([-1,s]),s=s.left;else if(a<0)s.right||(s.right=new Yp,s.right.segment=i.value()),o.push([1,s]),s=s.right;else if(i.hasNext())i.next(),s.mid||(s.mid=new Yp,s.mid.segment=i.value()),o.push([0,s]),s=s.mid;else break}const r=s.value;s.value=t,s.key=e;for(let a=o.length-1;a>=0;a--){const l=o[a][1];l.updateHeight();const c=l.balanceFactor();if(c<-1||c>1){const d=o[a][0],u=o[a+1][0];if(d===1&&u===1)o[a][1]=l.rotateLeft();else if(d===-1&&u===-1)o[a][1]=l.rotateRight();else if(d===1&&u===-1)l.right=o[a+1][1]=o[a+1][1].rotateRight(),o[a][1]=l.rotateLeft();else if(d===-1&&u===1)l.left=o[a+1][1]=o[a+1][1].rotateLeft(),o[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(o[a-1][0]){case-1:o[a-1][1].left=o[a][1];break;case 1:o[a-1][1].right=o[a][1];break;case 0:o[a-1][1].mid=o[a][1];break}else this._root=o[0][1]}}return r}get(e){var t;return(t=this._getNode(e))===null||t===void 0?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let i=this._root;for(;i;){const s=t.cmp(i.segment);if(s>0)i=i.left;else if(s<0)i=i.right;else if(t.hasNext())t.next(),i=i.mid;else break}return i}has(e){const t=this._getNode(e);return!((t==null?void 0:t.value)===void 0&&(t==null?void 0:t.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){var i;const s=this._iter.reset(e),o=[];let r=this._root;for(;r;){const a=s.cmp(r.segment);if(a>0)o.push([-1,r]),r=r.left;else if(a<0)o.push([1,r]),r=r.right;else if(s.hasNext())s.next(),o.push([0,r]),r=r.mid;else break}if(r){if(t?(r.left=void 0,r.mid=void 0,r.right=void 0,r.height=1):(r.key=void 0,r.value=void 0),!r.mid&&!r.value)if(r.left&&r.right){const a=this._min(r.right);if(a.key){const{key:l,value:c,segment:d}=a;this._delete(a.key,!1),r.key=l,r.value=c,r.segment=d}}else{const a=(i=r.left)!==null&&i!==void 0?i:r.right;if(o.length>0){const[l,c]=o[o.length-1];switch(l){case-1:c.left=a;break;case 0:c.mid=a;break;case 1:c.right=a;break}}else this._root=a}for(let a=o.length-1;a>=0;a--){const l=o[a][1];l.updateHeight();const c=l.balanceFactor();if(c>1?(l.right.balanceFactor()>=0||(l.right=l.right.rotateRight()),o[a][1]=l.rotateLeft()):c<-1&&(l.left.balanceFactor()<=0||(l.left=l.left.rotateLeft()),o[a][1]=l.rotateRight()),a>0)switch(o[a-1][0]){case-1:o[a-1][1].left=o[a][1];break;case 1:o[a-1][1].right=o[a][1];break;case 0:o[a-1][1].mid=o[a][1];break}else this._root=o[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let i=this._root,s;for(;i;){const o=t.cmp(i.segment);if(o>0)i=i.left;else if(o<0)i=i.right;else if(t.hasNext())t.next(),s=i.value||s,i=i.mid;else break}return i&&i.value||s}findSuperstr(e){return this._findSuperstrOrElement(e,!1)}_findSuperstrOrElement(e,t){const i=this._iter.reset(e);let s=this._root;for(;s;){const o=i.cmp(s.segment);if(o>0)s=s.left;else if(o<0)s=s.right;else if(i.hasNext())i.next(),s=s.mid;else return s.mid?this._entries(s.mid):t?s.value:void 0}}forEach(e){for(const[t,i]of this)e(i,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){const t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value&&t.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}}const JX=ct("contextService");class eQ{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}const tQ="code-workspace";m("codeWorkspace","Code Workspace");const iQ="4064f6ec-cb38-4ad0-af64-ee6467e63c82";var RE;(function(n){n.inspectTokensAction=m("inspectTokens","Developer: Inspect Tokens")})(RE||(RE={}));var PE;(function(n){n.gotoLineActionLabel=m("gotoLineActionLabel","Go to Line/Column...")})(PE||(PE={}));var OE;(function(n){n.helpQuickAccessActionLabel=m("helpQuickAccess","Show all Quick Access Providers")})(OE||(OE={}));var FE;(function(n){n.quickCommandActionLabel=m("quickCommandActionLabel","Command Palette"),n.quickCommandHelp=m("quickCommandActionHelp","Show And Run Commands")})(FE||(FE={}));var BE;(function(n){n.quickOutlineActionLabel=m("quickOutlineActionLabel","Go to Symbol..."),n.quickOutlineByCategoryActionLabel=m("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(BE||(BE={}));var $0;(function(n){n.editorViewAccessibleLabel=m("editorViewAccessibleLabel","Editor content"),n.accessibilityHelpMessage=m("accessibilityHelpMessage","Press Alt+F1 for Accessibility Options.")})($0||($0={}));var VE;(function(n){n.toggleHighContrast=m("toggleHighContrast","Toggle High Contrast Theme")})(VE||(VE={}));var $C;(function(n){n.bulkEditServiceSummary=m("bulkEditServiceSummary","Made {0} edits in {1} files")})($C||($C={}));const nQ=ct("workspaceTrustManagementService");function sQ(n){const e=n;return!!e&&typeof e.x=="number"&&typeof e.y=="number"}var Ga;(function(n){n[n.AVOID=0]="AVOID",n[n.ALIGN=1]="ALIGN"})(Ga||(Ga={}));function Bd(n,e,t){const i=t.mode===Ga.ALIGN?t.offset:t.offset+t.size,s=t.mode===Ga.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=n-i?i:e<=s?s-e:Math.max(n-e,0):e<=s?s-e:e<=n-i?i:0}class Vu extends oe{constructor(e,t){super(),this.container=null,this.delegate=null,this.toDisposeOnClean=oe.None,this.toDisposeOnSetContainer=oe.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=Be(".context-view"),this.useFixedPosition=!1,this.useShadowDOM=!1,S2(this.view),this.setContainer(e,t),this._register(st(()=>this.setContainer(null,1)))}setContainer(e,t){var i;if(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,(i=this.shadowRootHostElement)===null||i===void 0||i.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),e){if(this.container=e,this.useFixedPosition=t!==1,this.useShadowDOM=t===3,this.useShadowDOM){this.shadowRootHostElement=Be(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const o=document.createElement("style");o.textContent=oQ,this.shadowRoot.appendChild(o),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(Be("slot"))}else this.container.appendChild(this.view);const s=new Fe;Vu.BUBBLE_UP_EVENTS.forEach(o=>{s.add(Ci(this.container,o,r=>{this.onDOMEvent(r,!1)}))}),Vu.BUBBLE_DOWN_EVENTS.forEach(o=>{s.add(Ci(this.container,o,r=>{this.onDOMEvent(r,!0)},!0))}),this.toDisposeOnSetContainer=s}}show(e){var t,i;this.isVisible()&&this.hide(),Vs(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex="2575",this.view.style.position=this.useFixedPosition?"fixed":"absolute",V4(this.view),this.toDisposeOnClean=e.render(this.view)||oe.None,this.delegate=e,this.doLayout(),(i=(t=this.delegate).focus)===null||i===void 0||i.call(t)}getViewElement(){return this.view}layout(){if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(ll&&C4.pointerEvents)){this.hide();return}this.delegate.layout&&this.delegate.layout(),this.doLayout()}}doLayout(){if(!this.isVisible())return;const e=this.delegate.getAnchor();let t;if(O4(e)){const u=ms(e),h=SH(e);t={top:u.top*h,left:u.left*h,width:u.width*h,height:u.height*h}}else sQ(e)?t={top:e.y,left:e.x,width:e.width||1,height:e.height||2}:t={top:e.posy,left:e.posx,width:2,height:2};const i=HS(this.view),s=Kw(this.view),o=this.delegate.anchorPosition||0,r=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let l,c;if(a===0){const u={offset:t.top-window.pageYOffset,size:t.height,position:o===0?0:1},h={offset:t.left,size:t.width,position:r===0?0:1,mode:Ga.ALIGN};l=Bd(window.innerHeight,s,u)+window.pageYOffset,Zi.intersects({start:l,end:l+s},{start:u.offset,end:u.offset+u.size})&&(h.mode=Ga.AVOID),c=Bd(window.innerWidth,i,h)}else{const u={offset:t.left,size:t.width,position:r===0?0:1},h={offset:t.top,size:t.height,position:o===0?0:1,mode:Ga.ALIGN};c=Bd(window.innerWidth,i,u),Zi.intersects({start:c,end:c+i},{start:u.offset,end:u.offset+u.size})&&(h.mode=Ga.AVOID),l=Bd(window.innerHeight,s,h)+window.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(o===0?"bottom":"top"),this.view.classList.add(r===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const d=ms(this.container);this.view.style.top=`${l-(this.useFixedPosition?ms(this.view).top:d.top)}px`,this.view.style.left=`${c-(this.useFixedPosition?ms(this.view).left:d.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t!=null&&t.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),S2(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,document.activeElement):t&&!un(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}Vu.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"];Vu.BUBBLE_DOWN_EVENTS=["click"];const oQ=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;var rQ=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},aQ=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let zC=class extends oe{constructor(e){super(),this.layoutService=e,this.currentViewDisposable=oe.None,this.container=e.hasContainer?e.container:null,this.contextView=this._register(new Vu(this.container,1)),this.layout(),this._register(e.onDidLayout(()=>this.layout()))}setContainer(e,t){this.contextView.setContainer(e,t||1)}showContextView(e,t,i){t?(t!==this.container||this.shadowRoot!==i)&&(this.container=t,this.setContainer(t,i?3:2)):this.layoutService.hasContainer&&this.container!==this.layoutService.container&&(this.container=this.layoutService.container,this.setContainer(this.container,1)),this.shadowRoot=i,this.contextView.show(e);const s=st(()=>{this.currentViewDisposable===s&&this.hideContextView()});return this.currentViewDisposable=s,s}getContextViewElement(){return this.contextView.getViewElement()}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e)}};zC=rQ([aQ(0,ih)],zC);let Wu=[],RL=[],ZA=[];function Xp(n,e=!1){lQ(n,!1,e)}function lQ(n,e,t){const i=cQ(n,e);Wu.push(i),i.userConfigured?ZA.push(i):RL.push(i),t&&!i.userConfigured&&Wu.forEach(s=>{s.mime===i.mime||s.userConfigured||(i.extension&&s.extension===i.extension&&console.warn(`Overwriting extension <<${i.extension}>> to now point to mime <<${i.mime}>>`),i.filename&&s.filename===i.filename&&console.warn(`Overwriting filename <<${i.filename}>> to now point to mime <<${i.mime}>>`),i.filepattern&&s.filepattern===i.filepattern&&console.warn(`Overwriting filepattern <<${i.filepattern}>> to now point to mime <<${i.mime}>>`),i.firstline&&s.firstline===i.firstline&&console.warn(`Overwriting firstline <<${i.firstline}>> to now point to mime <<${i.mime}>>`))})}function cQ(n,e){return{id:n.id,mime:n.mime,filename:n.filename,extension:n.extension,filepattern:n.filepattern,firstline:n.firstline,userConfigured:e,filenameLowercase:n.filename?n.filename.toLowerCase():void 0,extensionLowercase:n.extension?n.extension.toLowerCase():void 0,filepatternLowercase:n.filepattern?UA(n.filepattern.toLowerCase()):void 0,filepatternOnPath:n.filepattern?n.filepattern.indexOf(fi.sep)>=0:!1}}function dQ(){Wu=Wu.filter(n=>n.userConfigured),RL=[]}function uQ(n,e){return hQ(n,e).map(t=>t.id)}function hQ(n,e){let t;if(n)switch(n.scheme){case Je.file:t=n.fsPath;break;case Je.data:{t=D0.parseMetaData(n).get(D0.META_DATA_LABEL);break}case Je.vscodeNotebookCell:t=void 0;break;default:t=n.path}if(!t)return[{id:"unknown",mime:Fr.unknown}];t=t.toLowerCase();const i=CT(t),s=WE(t,i,ZA);if(s)return[s,{id:No,mime:Fr.text}];const o=WE(t,i,RL);if(o)return[o,{id:No,mime:Fr.text}];if(e){const r=fQ(e);if(r)return[r,{id:No,mime:Fr.text}]}return[{id:"unknown",mime:Fr.unknown}]}function WE(n,e,t){var i;let s,o,r;for(let a=t.length-1;a>=0;a--){const l=t[a];if(e===l.filenameLowercase){s=l;break}if(l.filepattern&&(!o||l.filepattern.length>o.filepattern.length)){const c=l.filepatternOnPath?n:e;!((i=l.filepatternLowercase)===null||i===void 0)&&i.call(l,c)&&(o=l)}l.extension&&(!r||l.extension.length>r.extension.length)&&e.endsWith(l.extensionLowercase)&&(r=l)}if(s)return s;if(o)return o;if(r)return r}function fQ(n){if(LS(n)&&(n=n.substr(1)),n.length>0)for(let e=Wu.length-1;e>=0;e--){const t=Wu[e];if(!t.firstline)continue;const i=n.match(t.firstline);if(i&&i.length>0)return t}}const Qp=Object.prototype.hasOwnProperty,HE="vs.editor.nullLanguage";class gQ{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(HE,0),this._register(No,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||HE}}class og extends oe{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new q),this.onDidChange=this._onDidChange.event,og.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new gQ,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(Lu.onDidChangeLanguages(i=>{this._initializeFromRegistry()})))}dispose(){og.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},dQ();const e=[].concat(Lu.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{const i=this._languages[t];i.name&&(this._nameMap[i.name]=i.identifier),i.aliases.forEach(s=>{this._lowercaseNameMap[s.toLowerCase()]=i.identifier}),i.mimetypes.forEach(s=>{this._mimeTypesMap[s]=i.identifier})}),zi.as($c.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let i;Qp.call(this._languages,t)?i=this._languages[t]:(this.languageIdCodec.register(t),i={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[t]=i),this._mergeLanguage(i,e)}_mergeLanguage(e,t){const i=t.id;let s=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),s=t.mimetypes[0]),s||(s=`text/x-${i}`,e.mimetypes.push(s)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(const a of t.extensions)Xp({id:i,mime:s,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(const a of t.filenames)Xp({id:i,mime:s,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(const a of t.filenamePatterns)Xp({id:i,mime:s,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{const l=new RegExp(a);D6(l)||Xp({id:i,mime:s,firstline:l},this._warnOnOverwrite)}catch(l){console.warn(`[${t.id}]: Invalid regular expression \`${a}\`: `,l)}}e.aliases.push(i);let o=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?o=[null]:o=t.aliases),o!==null)for(const a of o)!a||a.length===0||e.aliases.push(a);const r=o!==null&&o.length>0;if(!(r&&o[0]===null)){const a=(r?o[0]:null)||i;(r||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return e?Qp.call(this._languages,e):!1}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(e){const t=e.toLowerCase();return Qp.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&Qp.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){return!e&&!t?[]:uQ(e,t)}}og.instanceCount=0;class rg extends oe{constructor(e=!1){super(),this._onDidRequestBasicLanguageFeatures=this._register(new q),this.onDidRequestBasicLanguageFeatures=this._onDidRequestBasicLanguageFeatures.event,this._onDidRequestRichLanguageFeatures=this._register(new q),this.onDidRequestRichLanguageFeatures=this._onDidRequestRichLanguageFeatures.event,this._onDidChange=this._register(new q({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,this._requestedBasicLanguages=new Set,this._requestedRichLanguages=new Set,rg.instanceCount++,this._registry=this._register(new og(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){rg.instanceCount--,super.dispose()}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){const i=this._registry.guessLanguageIdByFilepathOrFirstLine(e,t);return YN(i,null)}createById(e){return new $E(this.onDidChange,()=>this._createAndGetLanguageIdentifier(e))}createByFilepathOrFirstLine(e,t){return new $E(this.onDidChange,()=>{const i=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(i)})}_createAndGetLanguageIdentifier(e){return(!e||!this.isRegisteredLanguageId(e))&&(e=No),e}requestBasicLanguageFeatures(e){this._requestedBasicLanguages.has(e)||(this._requestedBasicLanguages.add(e),this._onDidRequestBasicLanguageFeatures.fire(e))}requestRichLanguageFeatures(e){this._requestedRichLanguages.has(e)||(this._requestedRichLanguages.add(e),this.requestBasicLanguageFeatures(e),hi.getOrCreate(e),this._onDidRequestRichLanguageFeatures.fire(e))}}rg.instanceCount=0;class $E{constructor(e,t){this._onDidChangeLanguages=e,this._selector=t,this._listener=null,this._emitter=null,this.languageId=this._selector()}_dispose(){this._listener&&(this._listener.dispose(),this._listener=null),this._emitter&&(this._emitter.dispose(),this._emitter=null)}get onDidChange(){return this._listener||(this._listener=this._onDidChangeLanguages(()=>this._evaluate())),this._emitter||(this._emitter=new q({onDidRemoveLastListener:()=>{this._dispose()}})),this._emitter.event}_evaluate(){var e;const t=this._selector();t!==this.languageId&&(this.languageId=t,(e=this._emitter)===null||e===void 0||e.fire(this.languageId))}}class pQ extends Eu{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new q),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=De(e,Be(".monaco-dropdown")),this._label=De(this._element,Be(".dropdown-label"));let i=t.labelRenderer;i||(i=o=>(o.textContent=t.label||"",null));for(const o of[_e.CLICK,_e.MOUSE_DOWN,It.Tap])this._register(ee(this.element,o,r=>qe.stop(r,!0)));for(const o of[_e.MOUSE_DOWN,It.Tap])this._register(ee(this._label,o,r=>{r instanceof MouseEvent&&(r.detail>1||r.button!==0)||(this.visible?this.hide():this.show())}));this._register(ee(this._label,_e.KEY_UP,o=>{const r=new Wt(o);(r.equals(3)||r.equals(10))&&(qe.stop(o,!0),this.visible?this.hide():this.show())}));const s=i(this._label);s&&this._register(s),this._register(Ot.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class mQ extends pQ{constructor(e,t){super(e,t),this._options=t,this._actions=[],this.actions=t.actions||[]}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(e,t)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e,t):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this._options.menuClassName||"",onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class YA extends wo{constructor(e,t,i,s=Object.create(null)){super(null,e,s),this.actionItem=null,this._onDidChangeVisibility=this._register(new q),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.menuActionsOrProvider=t,this.contextMenuProvider=i,this.options=s,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=o=>{this.element=De(o,Be("a.action-label"));let r=[];return typeof this.options.classNames=="string"?r=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(r=this.options.classNames),r.find(a=>a==="icon")||r.push("codicon"),this.element.classList.add(...r),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this.element.title=this._action.label||"",this.element.ariaLabel=this._action.label||"",null},i=Array.isArray(this.menuActionsOrProvider),s={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:i?this.menuActionsOrProvider:void 0,actionProvider:i?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new mQ(e,s)),this._register(this.dropdownMenu.onDidChangeVisibility(o=>{var r;(r=this.element)===null||r===void 0||r.setAttribute("aria-expanded",`${o}`),this._onDidChangeVisibility.fire(o)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const o=this;this.dropdownMenu.menuOptions=Object.assign(Object.assign({},this.dropdownMenu.menuOptions),{get anchorAlignment(){return o.options.anchorAlignmentProvider()}})}this.updateTooltip(),this.updateEnabled()}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label),e??void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}show(){var e;(e=this.dropdownMenu)===null||e===void 0||e.show()}updateEnabled(){var e,t;const i=!this.action.enabled;(e=this.actionItem)===null||e===void 0||e.classList.toggle("disabled",i),(t=this.element)===null||t===void 0||t.classList.toggle("disabled",i)}}function _Q(n){return n?n.condition!==void 0:!1}var jh=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})},vf;(function(n){n[n.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",n[n.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(vf||(vf={}));var Vd;(function(n){n[n.None=0]="None",n[n.Initialized=1]="Initialized",n[n.Closed=2]="Closed"})(Vd||(Vd={}));class cu extends oe{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new If),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=Vd.None,this.cache=new Map,this.flushDelayer=new e4(cu.DEFAULT_FLUSH_DELAY),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,i;this._onDidChangeStorage.pause();try{(t=e.changed)===null||t===void 0||t.forEach((s,o)=>this.acceptExternal(o,s)),(i=e.deleted)===null||i===void 0||i.forEach(s=>this.acceptExternal(s,void 0))}finally{this._onDidChangeStorage.resume()}}acceptExternal(e,t){if(this.state===Vd.Closed)return;let i=!1;hs(t)?i=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),i=!0),i&&this._onDidChangeStorage.fire({key:e,external:!0})}get(e,t){const i=this.cache.get(e);return hs(i)?t:i}getBoolean(e,t){const i=this.get(e);return hs(i)?t:i==="true"}getNumber(e,t){const i=this.get(e);return hs(i)?t:parseInt(i,10)}set(e,t,i=!1){return jh(this,void 0,void 0,function*(){if(this.state===Vd.Closed)return;if(hs(t))return this.delete(e,i);const s=Gn(t)||Array.isArray(t)?FZ(t):String(t);if(this.cache.get(e)!==s)return this.cache.set(e,s),this.pendingInserts.set(e,s),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire({key:e,external:i}),this.doFlush()})}delete(e,t=!1){return jh(this,void 0,void 0,function*(){if(!(this.state===Vd.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire({key:e,external:t}),this.doFlush()})}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}flushPending(){return jh(this,void 0,void 0,function*(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var t;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(t=this.whenFlushedCallbacks.pop())===null||t===void 0||t()})})}doFlush(e){return jh(this,void 0,void 0,function*(){return this.flushDelayer.trigger(()=>this.flushPending(),e)})}dispose(){this.flushDelayer.dispose(),super.dispose()}}cu.DEFAULT_FLUSH_DELAY=100;class ev{constructor(){this.onDidChangeItemsExternal=ke.None,this.items=new Map}updateItems(e){var t,i;return jh(this,void 0,void 0,function*(){(t=e.insert)===null||t===void 0||t.forEach((s,o)=>this.items.set(o,s)),(i=e.delete)===null||i===void 0||i.forEach(s=>this.items.delete(s))})}}const Tm="__$__targetStorageMarker",o1=ct("storageService");var zE;(function(n){n[n.NONE=0]="NONE",n[n.SHUTDOWN=1]="SHUTDOWN"})(zE||(zE={}));function bQ(n){const e=n.get(Tm);if(e)try{return JSON.parse(e)}catch{}return Object.create(null)}class r1 extends oe{constructor(e={flushInterval:r1.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new If),this._onDidChangeTarget=this._register(new If),this._onWillSaveState=this._register(new q),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}onDidChangeValue(e,t,i){return ke.filter(this._onDidChangeValue.event,s=>s.scope===e&&(t===void 0||s.key===t),i)}emitDidChangeValue(e,t){const{key:i,external:s}=t;if(i===Tm){switch(e){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:i,target:this.getKeyTargets(e)[i],external:s})}get(e,t,i){var s;return(s=this.getStorage(t))===null||s===void 0?void 0:s.get(e,i)}getBoolean(e,t,i){var s;return(s=this.getStorage(t))===null||s===void 0?void 0:s.getBoolean(e,i)}getNumber(e,t,i){var s;return(s=this.getStorage(t))===null||s===void 0?void 0:s.getNumber(e,i)}store(e,t,i,s,o=!1){if(hs(t)){this.remove(e,i,o);return}this.withPausedEmitters(()=>{var r;this.updateKeyTarget(e,i,s),(r=this.getStorage(i))===null||r===void 0||r.set(e,t,o)})}remove(e,t,i=!1){this.withPausedEmitters(()=>{var s;this.updateKeyTarget(e,t,void 0),(s=this.getStorage(t))===null||s===void 0||s.delete(e,i)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,i,s=!1){var o,r;const a=this.getKeyTargets(t);typeof i=="number"?a[e]!==i&&(a[e]=i,(o=this.getStorage(t))===null||o===void 0||o.set(Tm,JSON.stringify(a),s)):typeof a[e]=="number"&&(delete a[e],(r=this.getStorage(t))===null||r===void 0||r.set(Tm,JSON.stringify(a),s))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(e){switch(e){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){const t=this.getStorage(e);return t?bQ(t):Object.create(null)}}r1.DEFAULT_FLUSH_INTERVAL=60*1e3;class vQ extends r1{constructor(){super(),this.applicationStorage=this._register(new cu(new ev,{hint:vf.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new cu(new ev,{hint:vf.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new cu(new ev,{hint:vf.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.profileStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e))),this._register(this.applicationStorage.onDidChangeStorage(e=>this.emitDidChangeValue(-1,e)))}getStorage(e){switch(e){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}}function wQ(n,e){const t=Object.assign({},e);for(const i in n){const s=n[i];t[i]=s!==void 0?pe(s):void 0}return t}const CQ={keybindingLabelBackground:pe(R$),keybindingLabelForeground:pe(P$),keybindingLabelBorder:pe(O$),keybindingLabelBottomBorder:pe(F$),keybindingLabelShadow:pe(Wa)},yQ={buttonForeground:pe(Mh),buttonSeparator:pe(y$),buttonBackground:pe(Rh),buttonHoverBackground:pe(S$),buttonSecondaryForeground:pe(x$),buttonSecondaryBackground:pe(eC),buttonSecondaryHoverBackground:pe(D$),buttonBorder:pe(L$)},SQ={progressBarBackground:pe(I$)},XA={inputActiveOptionBorder:pe(c$),inputActiveOptionForeground:pe(u$),inputActiveOptionBackground:pe(d$)};pe(nz),pe(oz),pe(sz);pe(Li),pe(jr),pe(Wa),pe(dt),pe(wz),pe(Cz),pe(yz),pe(s$);const QA={inputBackground:pe(r$),inputForeground:pe(a$),inputBorder:pe(l$),inputValidationInfoBorder:pe(g$),inputValidationInfoBackground:pe(h$),inputValidationInfoForeground:pe(f$),inputValidationWarningBorder:pe(_$),inputValidationWarningBackground:pe(p$),inputValidationWarningForeground:pe(m$),inputValidationErrorBorder:pe(w$),inputValidationErrorBackground:pe(b$),inputValidationErrorForeground:pe(v$)},LQ={listFilterWidgetBackground:pe(Y$),listFilterWidgetOutline:pe(X$),listFilterWidgetNoMatchesOutline:pe(Q$),listFilterWidgetShadow:pe(J$),inputBoxStyles:QA,toggleStyles:XA},xQ={badgeBackground:pe(Cm),badgeForeground:pe(k$),badgeBorder:pe(dt)};pe(gz),pe(fz),pe(O2),pe(O2),pe(pz);const nh={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:pe(W$),listFocusForeground:pe(H$),listFocusOutline:pe($$),listActiveSelectionBackground:pe(Kr),listActiveSelectionForeground:pe(or),listActiveSelectionIconForeground:pe(Vh),listFocusAndSelectionOutline:pe(z$),listFocusAndSelectionBackground:pe(Kr),listFocusAndSelectionForeground:pe(or),listInactiveSelectionBackground:pe(U$),listInactiveSelectionIconForeground:pe(j$),listInactiveSelectionForeground:pe(q$),listInactiveFocusBackground:pe(K$),listInactiveFocusOutline:pe(G$),listHoverBackground:pe(n3),listHoverForeground:pe(s3),listDropBackground:pe(Z$),listSelectionOutline:pe(ri),listHoverOutline:pe(ri),treeIndentGuidesStroke:pe(Wh),treeInactiveIndentGuidesStroke:pe(ez),tableColumnsBorder:pe(tz),tableOddRowsBackgroundColor:pe(iz)};function Yg(n){return wQ(n,nh)}const DQ={selectBackground:pe(sr),selectListBackground:pe(C$),selectForeground:pe(Ur),decoratorRightForeground:pe(Y4),selectBorder:pe(Dd),focusBorder:pe(Ns),listFocusBackground:pe(iC),listInactiveSelectionIconForeground:pe(o3),listFocusForeground:pe(tC),listFocusOutline:i$(ri,J.transparent.toString()),listHoverBackground:pe(n3),listHoverForeground:pe(s3),listHoverOutline:pe(ri),selectListBorder:pe(Bh),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0},kQ={shadowColor:pe(Wa),borderColor:pe(rz),foregroundColor:pe(az),backgroundColor:pe(lz),selectionForegroundColor:pe(cz),selectionBackgroundColor:pe(dz),selectionBorderColor:pe(uz),separatorColor:pe(hz),scrollbarShadow:pe(E$),scrollbarSliderBackground:pe(Ph),scrollbarSliderHoverBackground:pe(Oh),scrollbarSliderActiveBackground:pe(Fh)};var a1=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},In=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},JA=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};function EQ(n,e,t,i){const s=n.getActions(e),o=Va.getInstance(),r=o.keyStatus.altKey||(is||Cn)&&o.keyStatus.shiftKey;IQ(s,t,r,i?a=>a===i:a=>a==="navigation")}function IQ(n,e,t,i=r=>r==="navigation",s=()=>!1,o=!1){let r,a;Array.isArray(e)?(r=e,a=e):(r=e.primary,a=e.secondary);const l=new Set;for(const[c,d]of n){let u;i(c)?(u=r,u.length>0&&o&&u.push(new ts)):(u=a,u.length>0&&u.push(new ts));for(let h of d){t&&(h=h instanceof Hf&&h.alt?h.alt:h);const f=u.push(h);h instanceof $S&&l.add({group:c,action:h,index:f-1})}}for(const{group:c,action:d,index:u}of l){const h=i(c)?r:a,f=d.actions;f.length<=1&&s(d,c,h.length)&&h.splice(u,1,...f)}}let z0=class extends EL{constructor(e,t,i,s,o,r,a,l){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t==null?void 0:t.draggable,keybinding:t==null?void 0:t.keybinding,hoverDelegate:t==null?void 0:t.hoverDelegate}),this._keybindingService=i,this._notificationService=s,this._contextKeyService=o,this._themeService=r,this._contextMenuService=a,this._accessibilityService=l,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new bu),this._altKey=Va.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}onClick(e){return JA(this,void 0,void 0,function*(){e.preventDefault(),e.stopPropagation();try{yield this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}})}render(e){if(super.render(e),e.classList.add("menu-entry"),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){let t=!1;const i=()=>{var s;const o=!!(!((s=this._menuItemAction.alt)===null||s===void 0)&&s.enabled)&&(!this._accessibilityService.isMotionReduced()||t)&&(this._altKey.keyStatus.altKey||this._altKey.keyStatus.shiftKey&&t);o!==this._wantsAltCommand&&(this._wantsAltCommand=o,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._register(this._altKey.event(i)),this._register(ee(e,"mouseleave",s=>{t=!1,i()})),this._register(ee(e,"mouseenter",s=>{t=!0,i()})),i()}}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){var e;const t=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),i=t&&t.getLabel(),s=this._commandAction.tooltip||this._commandAction.label;let o=i?m("titleAndKb","{0} ({1})",s,i):s;if(!this._wantsAltCommand&&(!((e=this._menuItemAction.alt)===null||e===void 0)&&e.enabled)){const r=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,a=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),l=a&&a.getLabel(),c=l?m("titleAndKb","{0} ({1})",r,l):r;o=m("titleAndKbAndAlt",`{0}
[{1}] {2}`,o,ML.modifierLabels[Xs].altKey,c)}return o}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){this._itemClassDispose.value=void 0;const{element:t,label:i}=this;if(!t||!i)return;const s=this._commandAction.checked&&_Q(e.toggled)&&e.toggled.icon?e.toggled.icon:e.icon;if(s)if(je.isThemeIcon(s)){const o=je.asClassNameArray(s);i.classList.add(...o),this._itemClassDispose.value=st(()=>{i.classList.remove(...o)})}else i.style.backgroundImage=X_(this._themeService.getColorTheme().type)?fl(s.dark):fl(s.light),i.classList.add("icon"),this._itemClassDispose.value=lr(st(()=>{i.style.backgroundImage="",i.classList.remove("icon")}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}};z0=a1([In(2,$s),In(3,zs),In(4,Et),In(5,ro),In(6,Ll),In(7,Hc)],z0);let UE=class extends YA{constructor(e,t,i,s,o){var r,a,l;const c=Object.assign(Object.assign({},t),{menuAsChild:(r=t==null?void 0:t.menuAsChild)!==null&&r!==void 0?r:!1,classNames:(a=t==null?void 0:t.classNames)!==null&&a!==void 0?a:je.isThemeIcon(e.item.icon)?je.asClassName(e.item.icon):void 0,keybindingProvider:(l=t==null?void 0:t.keybindingProvider)!==null&&l!==void 0?l:d=>i.lookupKeybinding(d.id)});super(e,{getActions:()=>e.actions},s,c),this._keybindingService=i,this._contextMenuService=s,this._themeService=o}render(e){super.render(e),rc(this.element),e.classList.add("menu-entry");const t=this._action,{icon:i}=t.item;if(i&&!je.isThemeIcon(i)){this.element.classList.add("icon");const s=()=>{this.element&&(this.element.style.backgroundImage=X_(this._themeService.getColorTheme().type)?fl(i.dark):fl(i.light))};s(),this._register(this._themeService.onDidColorThemeChange(()=>{s()}))}}};UE=a1([In(2,$s),In(3,Ll),In(4,ro)],UE);let qE=class extends wo{constructor(e,t,i,s,o,r,a,l){var c,d,u;super(null,e),this._keybindingService=i,this._notificationService=s,this._contextMenuService=o,this._menuService=r,this._instaService=a,this._storageService=l,this._container=null,this._options=t,this._storageKey=`${e.item.submenu.id}_lastActionId`;let h;const f=t!=null&&t.persistLastActionId?l.get(this._storageKey,1):void 0;f&&(h=e.actions.find(p=>f===p.id)),h||(h=e.actions[0]),this._defaultAction=this._instaService.createInstance(z0,h,{keybinding:this._getDefaultActionKeybindingLabel(h)});const g=Object.assign(Object.assign({keybindingProvider:p=>this._keybindingService.lookupKeybinding(p.id)},t),{menuAsChild:(c=t==null?void 0:t.menuAsChild)!==null&&c!==void 0?c:!0,classNames:(d=t==null?void 0:t.classNames)!==null&&d!==void 0?d:["codicon","codicon-chevron-down"],actionRunner:(u=t==null?void 0:t.actionRunner)!==null&&u!==void 0?u:new Eu});this._dropdown=new YA(e,e.actions,this._contextMenuService,g),this._dropdown.actionRunner.onDidRun(p=>{p.action instanceof Hf&&this.update(p.action)})}update(e){var t;!((t=this._options)===null||t===void 0)&&t.persistLastActionId&&this._storageService.store(this._storageKey,e.id,1,1),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(z0,e,{keybinding:this._getDefaultActionKeybindingLabel(e)}),this._defaultAction.actionRunner=new class extends Eu{runAction(i,s){return JA(this,void 0,void 0,function*(){yield i.run(void 0)})}},this._container&&this._defaultAction.render(F4(this._container,Be(".action-container")))}_getDefaultActionKeybindingLabel(e){var t;let i;if(!((t=this._options)===null||t===void 0)&&t.renderKeybindingWithDefaultActionLabel){const s=this._keybindingService.lookupKeybinding(e.id);s&&(i=`(${s.getLabel()})`)}return i}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=Be(".action-container");this._defaultAction.render(De(this._container,t)),this._register(ee(t,_e.KEY_DOWN,s=>{const o=new Wt(s);o.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),o.stopPropagation())}));const i=Be(".dropdown-action-container");this._dropdown.render(De(this._container,i)),this._register(ee(i,_e.KEY_DOWN,s=>{var o;const r=new Wt(s);r.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(o=this._defaultAction.element)===null||o===void 0||o.focus(),r.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};qE=a1([In(2,$s),In(3,zs),In(4,Ll),In(5,U_),In(6,ai),In(7,o1)],qE);let jE=class extends EY{constructor(e,t){super(null,e,e.actions.map(i=>({text:i.id===ts.ID?"─────────":i.label,isDisabled:!i.enabled})),0,t,DQ,{ariaLabel:e.tooltip,optionsAsChildren:!0}),this.select(Math.max(0,e.actions.findIndex(i=>i.checked)))}render(e){super.render(e),e.style.borderColor=pe(Dd)}runAction(e,t){const i=this.action.actions[t];i&&this.actionRunner.run(i)}};jE=a1([In(1,Gg)],jE);const UC=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,tv=/(&amp;)?(&amp;)([^\s&])/g;var U0;(function(n){n[n.Right=0]="Right",n[n.Left=1]="Left"})(U0||(U0={}));class du extends ml{constructor(e,t,i,s){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const o=document.createElement("div");o.classList.add("monaco-menu"),o.setAttribute("role","presentation"),super(o,{orientation:1,actionViewItemProvider:l=>this.doGetActionViewItem(l,i,r),context:i.context,actionRunner:i.actionRunner,ariaLabel:i.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...gt||Cn?[10]:[]],keyDown:!0}}),this.menuStyles=s,this.menuElement=o,this.actionsList.tabIndex=0,this.menuDisposables=this._register(new Fe),this.initializeOrUpdateStyleSheet(e,s),this._register(Ot.addTarget(o)),ee(o,_e.KEY_DOWN,l=>{new Wt(l).equals(2)&&l.preventDefault()}),i.enableMnemonics&&this.menuDisposables.add(ee(o,_e.KEY_DOWN,l=>{const c=l.key.toLocaleLowerCase();if(this.mnemonics.has(c)){qe.stop(l,!0);const d=this.mnemonics.get(c);if(d.length===1&&(d[0]instanceof KE&&d[0].container&&this.focusItemByElement(d[0].container),d[0].onClick(l)),d.length>1){const u=d.shift();u&&u.container&&(this.focusItemByElement(u.container),d.push(u)),this.mnemonics.set(c,d)}}})),Cn&&this._register(ee(o,_e.KEY_DOWN,l=>{const c=new Wt(l);c.equals(14)||c.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),qe.stop(l,!0)):(c.equals(13)||c.equals(12))&&(this.focusedItem=0,this.focusPrevious(),qe.stop(l,!0))})),this._register(ee(this.domNode,_e.MOUSE_OUT,l=>{const c=l.relatedTarget;un(c,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),l.stopPropagation())})),this._register(ee(this.actionsList,_e.MOUSE_OVER,l=>{let c=l.target;if(!(!c||!un(c,this.actionsList)||c===this.actionsList)){for(;c.parentElement!==this.actionsList&&c.parentElement!==null;)c=c.parentElement;if(c.classList.contains("action-item")){const d=this.focusedItem;this.setFocusedItem(c),d!==this.focusedItem&&this.updateFocus()}}})),this._register(Ot.addTarget(this.actionsList)),this._register(ee(this.actionsList,It.Tap,l=>{let c=l.initialTarget;if(!(!c||!un(c,this.actionsList)||c===this.actionsList)){for(;c.parentElement!==this.actionsList&&c.parentElement!==null;)c=c.parentElement;if(c.classList.contains("action-item")){const d=this.focusedItem;this.setFocusedItem(c),d!==this.focusedItem&&this.updateFocus()}}}));const r={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new QS(o,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const a=this.scrollableElement.getDomNode();a.style.position="",this.styleScrollElement(a,s),this._register(ee(o,It.Change,l=>{qe.stop(l,!0);const c=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:c-l.translationY})})),this._register(ee(a,_e.MOUSE_UP,l=>{l.preventDefault()})),o.style.maxHeight=`${Math.max(10,window.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter(l=>{var c;return!((c=i.submenuIds)===null||c===void 0)&&c.has(l.id)?(console.warn(`Found submenu cycle: ${l.id}`),!1):!0}),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(l=>!(l instanceof GE)).forEach((l,c,d)=>{l.updatePositionInSet(c+1,d.length)})}initializeOrUpdateStyleSheet(e,t){this.styleSheet||(Gw(e)?this.styleSheet=so(e):(du.globalStyleSheet||(du.globalStyleSheet=so()),this.styleSheet=du.globalStyleSheet)),this.styleSheet.textContent=TQ(t,Gw(e))}styleScrollElement(e,t){var i,s;const o=(i=t.foregroundColor)!==null&&i!==void 0?i:"",r=(s=t.backgroundColor)!==null&&s!==void 0?s:"",a=t.borderColor?`1px solid ${t.borderColor}`:"",l="5px",c=t.shadowColor?`0 2px 8px ${t.shadowColor}`:"";e.style.outline=a,e.style.borderRadius=l,e.style.color=o,e.style.backgroundColor=r,e.style.boxShadow=c}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){const i=this.actionsList.children[t];if(e===i){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,i){if(e instanceof ts)return new GE(t.context,e,{icon:!0},this.menuStyles);if(e instanceof $S){const s=new KE(e,e.actions,i,Object.assign(Object.assign({},t),{submenuIds:new Set([...t.submenuIds||[],e.id])}),this.menuStyles);if(t.enableMnemonics){const o=s.getMnemonic();if(o&&s.isEnabled()){let r=[];this.mnemonics.has(o)&&(r=this.mnemonics.get(o)),r.push(s),this.mnemonics.set(o,r)}}return s}else{const s={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const r=t.getKeyBinding(e);if(r){const a=r.getLabel();a&&(s.keybinding=a)}}const o=new e5(t.context,e,s,this.menuStyles);if(t.enableMnemonics){const r=o.getMnemonic();if(r&&o.isEnabled()){let a=[];this.mnemonics.has(r)&&(a=this.mnemonics.get(r)),a.push(o),this.mnemonics.set(r,a)}}return o}}}class e5 extends wo{constructor(e,t,i,s){if(i.isMenu=!0,super(t,t,i),this.menuStyle=s,this.options=i,this.options.icon=i.icon!==void 0?i.icon:!1,this.options.label=i.label!==void 0?i.label:!0,this.cssClass="",this.options.label&&i.enableMnemonics){const o=this.action.label;if(o){const r=UC.exec(o);r&&(this.mnemonic=(r[1]?r[1]:r[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new Sn(()=>{this.element&&(this._register(ee(this.element,_e.MOUSE_UP,o=>{if(qe.stop(o,!0),io){if(new Lo(o).rightButton)return;this.onClick(o)}else setTimeout(()=>{this.onClick(o)},0)})),this._register(ee(this.element,_e.CONTEXT_MENU,o=>{qe.stop(o,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=De(this.element,Be("a.action-menu-item")),this._action.id===ts.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=De(this.item,Be("span.menu-item-check"+je.asCSSSelector(we.menuSelection))),this.check.setAttribute("role","none"),this.label=De(this.item,Be("span.action-label")),this.options.label&&this.options.keybinding&&(De(this.item,Be("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())}blur(){super.blur(),this.applyStyle()}focus(){var e;super.focus(),(e=this.item)===null||e===void 0||e.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){var e;if(this.label&&this.options.label){Vs(this.label);let t=gA(this.action.label);if(t){const i=NQ(t);this.options.enableMnemonics||(t=i),this.label.setAttribute("aria-label",i.replace(/&&/g,"&"));const s=UC.exec(t);if(s){t=Sw(t),tv.lastIndex=0;let o=tv.exec(t);for(;o&&o[1];)o=tv.exec(t);const r=a=>a.replace(/&amp;&amp;/g,"&amp;");o?this.label.append(S_(r(t.substr(0,o.index))," "),Be("u",{"aria-hidden":"true"},o[3]),L6(r(t.substr(o.index+o[0].length))," ")):this.label.innerText=r(t).trim(),(e=this.item)===null||e===void 0||e.setAttribute("aria-keyshortcuts",(s[1]?s[1]:s[3]).toLocaleLowerCase())}else this.label.innerText=t.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.action.enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.action.checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,i=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,s=e&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",o=e&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=t??"",this.item.style.backgroundColor=i??"",this.item.style.outline=s,this.item.style.outlineOffset=o),this.check&&(this.check.style.color=t??"")}}class KE extends e5{constructor(e,t,i,s,o){super(e,e,s,o),this.submenuActions=t,this.parentData=i,this.submenuOptions=s,this.mysubmenu=null,this.submenuDisposables=this._register(new Fe),this.mouseOver=!1,this.expandDirection=s&&s.expandDirection!==void 0?s.expandDirection:U0.Right,this.showScheduler=new Sn(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new Sn(()=>{this.element&&!un(nl(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=De(this.item,Be("span.submenu-indicator"+je.asCSSSelector(we.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(ee(this.element,_e.KEY_UP,t=>{const i=new Wt(t);(i.equals(17)||i.equals(3))&&(qe.stop(t,!0),this.createSubmenu(!0))})),this._register(ee(this.element,_e.KEY_DOWN,t=>{const i=new Wt(t);nl()===this.item&&(i.equals(17)||i.equals(3))&&qe.stop(t,!0)})),this._register(ee(this.element,_e.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(ee(this.element,_e.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(ee(this.element,_e.FOCUS_OUT,t=>{this.element&&!un(nl(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))})))}updateEnabled(){}onClick(e){qe.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,i,s){const o={top:0,left:0};return o.left=Bd(e.width,t.width,{position:s===U0.Right?0:1,offset:i.left,size:i.width}),o.left>=i.left&&o.left<i.left+i.width&&(i.left+10+t.width<=e.width&&(o.left=i.left+10),i.top+=10,i.height=0),o.top=Bd(e.height,t.height,{position:0,offset:i.top,size:0}),o.top+t.height===i.top&&o.top+i.height+t.height<=e.height&&(o.top+=i.height),o}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=De(this.element,Be("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=getComputedStyle(this.parentData.parent.domNode),i=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new du(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new z_],this.submenuOptions,this.menuStyle);const s=this.element.getBoundingClientRect(),o={top:s.top-i,left:s.left,height:s.height+2*i,width:s.width},r=this.submenuContainer.getBoundingClientRect(),{top:a,left:l}=this.calculateSubmenuMenuLayout(new Ds(window.innerWidth,window.innerHeight),Ds.lift(r),o,this.expandDirection);this.submenuContainer.style.left=`${l-r.left}px`,this.submenuContainer.style.top=`${a-r.top}px`,this.submenuDisposables.add(ee(this.submenuContainer,_e.KEY_UP,c=>{new Wt(c).equals(15)&&(qe.stop(c,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(ee(this.submenuContainer,_e.KEY_DOWN,c=>{new Wt(c).equals(15)&&qe.stop(c,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&((t=this.item)===null||t===void 0||t.setAttribute("aria-expanded",e))}applyStyle(){super.applyStyle();const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t??"")}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class GE extends EL{constructor(e,t,i,s){super(e,t,i),this.menuStyles=s}render(e){super.render(e),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?`${this.menuStyles.separatorColor}`:"")}}function NQ(n){const e=UC,t=e.exec(n);if(!t)return n;const i=!t[1];return n.replace(e,i?"$2$3":"").trim()}function ZE(n){const e=xT()[n.id];return`.codicon-${n.id}:before { content: '\\${e.toString(16)}'; }`}function TQ(n,e){let t=`
.monaco-menu {
	font-size: 13px;
	border-radius: 5px;
	min-width: 160px;
}

${ZE(we.menuSelection)}
${ZE(we.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar.animated .action-item.active {
	transform: scale(1.272019649, 1.272019649); /* 1.272019649 = √φ */
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	color: var(--vscode-disabledForeground);
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid var(--vscode-menu-separatorBackground);
	padding-top: 1px;
	padding: 30px;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
	margin: 0 4px;
	border-radius: 4px;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {
	opacity: unset;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	width: 100%;
	height: 0px !important;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.hc-black .context-view.monaco-menu-container,
.hc-light .context-view.monaco-menu-container,
:host-context(.hc-black) .context-view.monaco-menu-container,
:host-context(.hc-light) .context-view.monaco-menu-container {
	box-shadow: none;
}

.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,
.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: 4px 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	margin: 5px 0 !important;
	padding: 0;
	border-radius: 0;
}

.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}`;if(e){t+=`
			/* Arrows */
			.monaco-scrollable-element > .scrollbar > .scra {
				cursor: pointer;
				font-size: 11px !important;
			}

			.monaco-scrollable-element > .visible {
				opacity: 1;

				/* Background rule added for IE9 - to allow clicks on dom node */
				background:rgba(0,0,0,0);

				transition: opacity 100ms linear;
			}
			.monaco-scrollable-element > .invisible {
				opacity: 0;
				pointer-events: none;
			}
			.monaco-scrollable-element > .invisible.fade {
				transition: opacity 800ms linear;
			}

			/* Scrollable Content Inset Shadow */
			.monaco-scrollable-element > .shadow {
				position: absolute;
				display: none;
			}
			.monaco-scrollable-element > .shadow.top {
				display: block;
				top: 0;
				left: 3px;
				height: 3px;
				width: 100%;
			}
			.monaco-scrollable-element > .shadow.left {
				display: block;
				top: 3px;
				left: 0;
				height: 100%;
				width: 3px;
			}
			.monaco-scrollable-element > .shadow.top-left-corner {
				display: block;
				top: 0;
				left: 0;
				height: 3px;
				width: 3px;
			}
		`;const i=n.scrollbarShadow;i&&(t+=`
				.monaco-scrollable-element > .shadow.top {
					box-shadow: ${i} 0 6px 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.left {
					box-shadow: ${i} 6px 0 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.top.left {
					box-shadow: ${i} 6px 6px 6px -6px inset;
				}
			`);const s=n.scrollbarSliderBackground;s&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider {
					background: ${s};
				}
			`);const o=n.scrollbarSliderHoverBackground;o&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider:hover {
					background: ${o};
				}
			`);const r=n.scrollbarSliderActiveBackground;r&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider.active {
					background: ${r};
				}
			`)}return t}class AQ{constructor(e,t,i,s){this.contextViewService=e,this.telemetryService=t,this.notificationService=i,this.keybindingService=s,this.focusToReturn=null,this.lastContainer=null,this.block=null,this.blockDisposable=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=document.activeElement;let i;const s=O4(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:o=>{var r;this.lastContainer=o;const a=e.getMenuClassName?e.getMenuClassName():"";a&&(o.className+=" "+a),this.options.blockMouse&&(this.block=o.appendChild(Be(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",(r=this.blockDisposable)===null||r===void 0||r.dispose(),this.blockDisposable=ee(this.block,_e.MOUSE_DOWN,d=>d.stopPropagation()));const l=new Fe,c=e.actionRunner||new Eu;return c.onWillRun(d=>this.onActionRun(d,!e.skipTelemetry),this,l),c.onDidRun(this.onDidActionRun,this,l),i=new du(o,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:c,getKeyBinding:e.getKeyBinding?e.getKeyBinding:d=>this.keybindingService.lookupKeybinding(d.id)},kQ),i.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,l),i.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,l),l.add(ee(window,_e.BLUR,()=>this.contextViewService.hideContextView(!0))),l.add(ee(window,_e.MOUSE_DOWN,d=>{if(d.defaultPrevented)return;const u=new Lo(d);let h=u.target;if(!u.rightButton){for(;h;){if(h===o)return;h=h.parentElement}this.contextViewService.hideContextView(!0)}})),lr(l,i)},focus:()=>{i==null||i.focus(!!e.autoSelectFirstItem)},onHide:o=>{var r,a,l;(r=e.onHide)===null||r===void 0||r.call(e,!!o),this.block&&(this.block.remove(),this.block=null),(a=this.blockDisposable)===null||a===void 0||a.dispose(),this.blockDisposable=null,this.lastContainer&&(nl()===this.lastContainer||un(nl(),this.lastContainer))&&((l=this.focusToReturn)===null||l===void 0||l.focus()),this.lastContainer=null}},s,!!s)}onActionRun(e,t){t&&this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1)}onDidActionRun(e){e.error&&!Sg(e.error)&&this.notificationService.error(e.error)}}var MQ=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},hd=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let qC=class extends oe{get contextMenuHandler(){return this._contextMenuHandler||(this._contextMenuHandler=new AQ(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService)),this._contextMenuHandler}constructor(e,t,i,s,o,r){super(),this.telemetryService=e,this.notificationService=t,this.contextViewService=i,this.keybindingService=s,this.menuService=o,this.contextKeyService=r,this._contextMenuHandler=void 0,this._onDidShowContextMenu=this._store.add(new q),this._onDidHideContextMenu=this._store.add(new q)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){e=jC.transform(e,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu(Object.assign(Object.assign({},e),{onHide:t=>{var i;(i=e.onHide)===null||i===void 0||i.call(e,t),this._onDidHideContextMenu.fire()}})),Va.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};qC=MQ([hd(0,Pg),hd(1,zs),hd(2,Gg),hd(3,$s),hd(4,U_),hd(5,Et)],qC);var jC;(function(n){function e(i){return i&&i.menuId instanceof M}function t(i,s,o){if(!e(i))return i;const{menuId:r,menuActionOptions:a,contextKeyService:l}=i;return Object.assign(Object.assign({},i),{getActions:()=>{const c=[];if(r){const d=s.createMenu(r,l??o);EQ(d,a,c),d.dispose()}return i.getActions?ts.join(i.getActions(),c):c}})}n.transform=t})(jC||(jC={}));var q0;(function(n){n[n.API=0]="API",n[n.USER=1]="USER"})(q0||(q0={}));var PL=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},j0=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},Xl=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};let KC=class{constructor(e){this._commandService=e}open(e,t){return Xl(this,void 0,void 0,function*(){if(!NL(e,Je.command))return!1;if(!(t!=null&&t.allowCommands)||(typeof e=="string"&&(e=nt.parse(e)),Array.isArray(t.allowCommands)&&!t.allowCommands.includes(e.path)))return!0;let i=[];try{i=IC(decodeURIComponent(e.query))}catch{try{i=IC(e.query)}catch{}}return Array.isArray(i)||(i=[i]),yield this._commandService.executeCommand(e.path,...i),!0})}};KC=PL([j0(0,oo)],KC);let GC=class{constructor(e){this._editorService=e}open(e,t){return Xl(this,void 0,void 0,function*(){typeof e=="string"&&(e=nt.parse(e));const{selection:i,uri:s}=sX(e);return e=s,e.scheme===Je.file&&(e=Vj(e)),yield this._editorService.openCodeEditor({resource:e,options:Object.assign({selection:i,source:t!=null&&t.fromUserGesture?q0.USER:q0.API},t==null?void 0:t.editorOptions)},this._editorService.getFocusedCodeEditor(),t==null?void 0:t.openToSide),!0})}};GC=PL([j0(0,oi)],GC);let ZC=class{constructor(e,t){this._openers=new Zn,this._validators=new Zn,this._resolvers=new Zn,this._resolvedUriTargets=new vn(i=>i.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new Zn,this._defaultExternalOpener={openExternal:i=>Xl(this,void 0,void 0,function*(){return wE(i,Je.http,Je.https)?W4(i):window.location.href=i,!0})},this._openers.push({open:(i,s)=>Xl(this,void 0,void 0,function*(){return s!=null&&s.openExternal||wE(i,Je.mailto,Je.http,Je.https,Je.vsls)?(yield this._doOpenExternal(i,s),!0):!1})}),this._openers.push(new KC(t)),this._openers.push(new GC(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}open(e,t){var i;return Xl(this,void 0,void 0,function*(){const s=typeof e=="string"?nt.parse(e):e,o=(i=this._resolvedUriTargets.get(s))!==null&&i!==void 0?i:e;for(const r of this._validators)if(!(yield r.shouldOpen(o,t)))return!1;for(const r of this._openers)if(yield r.open(e,t))return!0;return!1})}resolveExternalUri(e,t){return Xl(this,void 0,void 0,function*(){for(const i of this._resolvers)try{const s=yield i.resolveExternalUri(e,t);if(s)return this._resolvedUriTargets.has(s.resolved)||this._resolvedUriTargets.set(s.resolved,e),s}catch{}throw new Error("Could not resolve external URI: "+e.toString())})}_doOpenExternal(e,t){return Xl(this,void 0,void 0,function*(){const i=typeof e=="string"?nt.parse(e):e;let s;try{s=(yield this.resolveExternalUri(i,t)).resolved}catch{s=i}let o;if(typeof e=="string"&&i.toString()===s.toString()?o=e:o=encodeURI(s.toString(!0)),t!=null&&t.allowContributedOpeners){const r=typeof(t==null?void 0:t.allowContributedOpeners)=="string"?t==null?void 0:t.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(yield a.openExternal(o,{sourceUri:i,preferredOpenerId:r},Bs.None))return!0}return this._defaultExternalOpener.openExternal(o,{sourceUri:i},Bs.None)})}dispose(){this._validators.clear()}};ZC=PL([j0(0,oi),j0(1,oo)],ZC);var ks;(function(n){n[n.Hint=1]="Hint",n[n.Info=2]="Info",n[n.Warning=4]="Warning",n[n.Error=8]="Error"})(ks||(ks={}));(function(n){function e(r,a){return a-r}n.compare=e;const t=Object.create(null);t[n.Error]=m("sev.error","Error"),t[n.Warning]=m("sev.warning","Warning"),t[n.Info]=m("sev.info","Info");function i(r){return t[r]||""}n.toString=i;function s(r){switch(r){case wi.Error:return n.Error;case wi.Warning:return n.Warning;case wi.Info:return n.Info;case wi.Ignore:return n.Hint}}n.fromSeverity=s;function o(r){switch(r){case n.Error:return wi.Error;case n.Warning:return wi.Warning;case n.Info:return wi.Info;case n.Hint:return wi.Ignore}}n.toSeverity=o})(ks||(ks={}));var YE;(function(n){const e="";function t(s){return i(s,!0)}n.makeKey=t;function i(s,o){const r=[e];return s.source?r.push(s.source.replace("¦","\\¦")):r.push(e),s.code?typeof s.code=="string"?r.push(s.code.replace("¦","\\¦")):r.push(s.code.value.replace("¦","\\¦")):r.push(e),s.severity!==void 0&&s.severity!==null?r.push(ks.toString(s.severity)):r.push(e),s.message&&o?r.push(s.message.replace("¦","\\¦")):r.push(e),s.startLineNumber!==void 0&&s.startLineNumber!==null?r.push(s.startLineNumber.toString()):r.push(e),s.startColumn!==void 0&&s.startColumn!==null?r.push(s.startColumn.toString()):r.push(e),s.endLineNumber!==void 0&&s.endLineNumber!==null?r.push(s.endLineNumber.toString()):r.push(e),s.endColumn!==void 0&&s.endColumn!==null?r.push(s.endColumn.toString()):r.push(e),r.push(e),r.join("¦")}n.makeKeyOptionalMessage=i})(YE||(YE={}));const Xc=ct("markerService");var RQ=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},XE=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};class PQ extends oe{constructor(e){super(),this.model=e,this._markersData=new Map,this._register(st(()=>{this.model.deltaDecorations([...this._markersData.keys()],[]),this._markersData.clear()}))}update(e,t){const i=[...this._markersData.keys()];this._markersData.clear();const s=this.model.deltaDecorations(i,t);for(let o=0;o<s.length;o++)this._markersData.set(s[o],e[o]);return i.length!==0||s.length!==0}getMarker(e){return this._markersData.get(e.id)}}let YC=class extends oe{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new q),this._markerDecorations=new vn,e.getModels().forEach(i=>this._onModelAdded(i)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const i=this._markerDecorations.get(e);return i&&i.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{const i=this._markerDecorations.get(t);i&&this._updateDecorations(i)})}_onModelAdded(e){const t=new PQ(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){var t;const i=this._markerDecorations.get(e.uri);i&&(i.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===Je.inMemory||e.uri.scheme===Je.internal||e.uri.scheme===Je.vscode)&&((t=this._markerService)===null||t===void 0||t.read({resource:e.uri}).map(s=>s.owner).forEach(s=>this._markerService.remove(s,[e.uri])))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500}),i=t.map(s=>({range:this._createDecorationRange(e.model,s),options:this._createDecorationOption(s)}));e.update(t,i)&&this._onDidChangeMarker.fire(e.model)}_createDecorationRange(e,t){let i=$.lift(t);if(t.severity===ks.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(i=i.setEndPosition(i.startLineNumber,i.startColumn+2)),i=e.validateRange(i),i.isEmpty()){const s=e.getLineLastNonWhitespaceColumn(i.startLineNumber)||e.getLineMaxColumn(i.startLineNumber);if(s===1||i.endColumn>=s)return i;const o=e.getWordAtPosition(i.getStartPosition());o&&(i=new $(i.startLineNumber,o.startColumn,i.endLineNumber,o.endColumn))}else if(t.endColumn===Number.MAX_VALUE&&t.startColumn===1&&i.startLineNumber===i.endLineNumber){const s=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);s<i.endColumn&&(i=new $(i.startLineNumber,s,i.endLineNumber,i.endColumn),t.startColumn=s)}return i}_createDecorationOption(e){let t,i,s,o,r;switch(e.severity){case ks.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",s=0;break;case ks.Warning:t="squiggly-warning",i=vh(EU),s=20,r={color:vh(_z),position:cc.Inline};break;case ks.Info:t="squiggly-info",i=vh(IU),s=10;break;case ks.Error:default:t="squiggly-error",i=vh(kU),s=30,r={color:vh(mz),position:cc.Inline};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(o="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(o="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:i,position:e0.Right},minimap:r,zIndex:s,inlineClassName:o}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}};YC=RQ([XE(0,ys),XE(1,Xc)],YC);var OQ=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Dh=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},pd;function Fl(n){return n.toString()}function QE(n){const e=new V_,t=n.createSnapshot();let i;for(;i=t.read();)e.update(i);return e.digest()}class FQ{constructor(e,t,i){this.model=e,this._modelEventListeners=new Fe,this.model=e,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(s=>i(e,s)))}dispose(){this._modelEventListeners.dispose()}}const BQ=Cn||gt?1:2;class VQ{constructor(e,t,i,s,o,r,a,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=i,this.sharesUndoRedoStack=s,this.heapSize=o,this.sha1=r,this.versionId=a,this.alternativeVersionId=l}}let K0=pd=class extends oe{constructor(e,t,i,s,o){super(),this._configurationService=e,this._resourcePropertiesService=t,this._undoRedoService=i,this._languageService=s,this._languageConfigurationService=o,this._onModelAdded=this._register(new q),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new q),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new q),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._register(this._configurationService.onDidChangeConfiguration(r=>this._updateModelOptions(r))),this._updateModelOptions(void 0)}static _readModelOptions(e,t){var i;let s=Xi.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){const f=parseInt(e.editor.tabSize,10);isNaN(f)||(s=f),s<1&&(s=1)}let o="tabSize";if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){const f=parseInt(e.editor.indentSize,10);isNaN(f)||(o=Math.max(f,1))}let r=Xi.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(r=e.editor.insertSpaces==="false"?!1:!!e.editor.insertSpaces);let a=BQ;const l=e.eol;l===`\r
`?a=2:l===`
`&&(a=1);let c=Xi.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(c=e.editor.trimAutoWhitespace==="false"?!1:!!e.editor.trimAutoWhitespace);let d=Xi.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(d=e.editor.detectIndentation==="false"?!1:!!e.editor.detectIndentation);let u=Xi.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(u=e.editor.largeFileOptimizations==="false"?!1:!!e.editor.largeFileOptimizations);let h=Xi.bracketPairColorizationOptions;return!((i=e.editor)===null||i===void 0)&&i.bracketPairColorization&&typeof e.editor.bracketPairColorization=="object"&&(h={enabled:!!e.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!e.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:t,tabSize:s,indentSize:o,insertSpaces:r,detectIndentation:d,defaultEOL:a,trimAutoWhitespace:c,largeFileOptimizations:u,bracketPairColorizationOptions:h}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const i=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return i&&typeof i=="string"&&i!=="auto"?i:Xs===3||Xs===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,i){const s=typeof e=="string"?e:e.languageId;let o=this._modelCreationOptionsByLanguageAndResource[s+t];if(!o){const r=this._configurationService.getValue("editor",{overrideIdentifier:s,resource:t}),a=this._getEOL(t,s);o=pd._readModelOptions({editor:r,eol:a},i),this._modelCreationOptionsByLanguageAndResource[s+t]=o}return o}_updateModelOptions(e){const t=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const i=Object.keys(this._models);for(let s=0,o=i.length;s<o;s++){const r=i[s],a=this._models[r],l=a.model.getLanguageId(),c=a.model.uri;if(e&&!e.affectsConfiguration("editor",{overrideIdentifier:l,resource:c})&&!e.affectsConfiguration("files.eol",{overrideIdentifier:l,resource:c}))continue;const d=t[l+c],u=this.getCreationOptions(l,c,a.model.isForSimpleWidget);pd._setModelOptionsForModel(a.model,u,d)}}static _setModelOptionsForModel(e,t,i){i&&i.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(i&&i.detectIndentation===t.detectIndentation&&i.insertSpaces===t.insertSpaces&&i.tabSize===t.tabSize&&i.indentSize===t.indentSize&&i.trimAutoWhitespace===t.trimAutoWhitespace&&bs(i.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(Fl(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(Fl(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(Fl(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(i=>{i.sharesUndoRedoStack||t.push(i)}),t.sort((i,s)=>i.time-s.time);t.length>0&&this._disposedModelsHeapSize>e;){const i=t.shift();this._removeDisposedModel(i.uri),i.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(i.initialUndoRedoSnapshot)}}}_createModelData(e,t,i,s){const o=this.getCreationOptions(t,i,s),r=new Nc(e,t,o,i,this._undoRedoService,this._languageService,this._languageConfigurationService);if(i&&this._disposedModels.has(Fl(i))){const c=this._removeDisposedModel(i),d=this._undoRedoService.getElements(i),u=QE(r)===c.sha1;if(u||c.sharesUndoRedoStack){for(const h of d.past)Ar(h)&&h.matchesResource(i)&&h.setModel(r);for(const h of d.future)Ar(h)&&h.matchesResource(i)&&h.setModel(r);this._undoRedoService.setElementsValidFlag(i,!0,h=>Ar(h)&&h.matchesResource(i)),u&&(r._overwriteVersionId(c.versionId),r._overwriteAlternativeVersionId(c.alternativeVersionId),r._overwriteInitialUndoRedoSnapshot(c.initialUndoRedoSnapshot))}else c.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(c.initialUndoRedoSnapshot)}const a=Fl(r.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const l=new FQ(r,c=>this._onWillDispose(c),(c,d)=>this._onDidChangeLanguage(c,d));return this._models[a]=l,l}createModel(e,t,i,s=!1){let o;return t?o=this._createModelData(e,t,i,s):o=this._createModelData(e,No,i,s),this._onModelAdded.fire(o.model),o.model}getModels(){const e=[],t=Object.keys(this._models);for(let i=0,s=t.length;i<s;i++){const o=t[i];e.push(this._models[o].model)}return e}getModel(e){const t=Fl(e),i=this._models[t];return i?i.model:null}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===Je.file||e.scheme===Je.vscodeRemote||e.scheme===Je.vscodeUserData||e.scheme===Je.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const t=Fl(e.uri),i=this._models[t],s=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let o=!1,r=0;if(s||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const l=this._undoRedoService.getElements(e.uri);if(l.past.length>0||l.future.length>0){for(const c of l.past)Ar(c)&&c.matchesResource(e.uri)&&(o=!0,r+=c.heapSize(e.uri),c.setModel(e.uri));for(const c of l.future)Ar(c)&&c.matchesResource(e.uri)&&(o=!0,r+=c.heapSize(e.uri),c.setModel(e.uri))}}const a=pd.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK;if(o)if(!s&&r>a){const l=i.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}else this._ensureDisposedModelsHeapSize(a-r),this._undoRedoService.setElementsValidFlag(e.uri,!1,l=>Ar(l)&&l.matchesResource(e.uri)),this._insertDisposedModel(new VQ(e.uri,i.model.getInitialUndoRedoSnapshot(),Date.now(),s,r,QE(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!s){const l=i.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}delete this._models[t],i.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const i=t.oldLanguage,s=e.getLanguageId(),o=this.getCreationOptions(i,e.uri,e.isForSimpleWidget),r=this.getCreationOptions(s,e.uri,e.isForSimpleWidget);pd._setModelOptionsForModel(e,r,o),this._onModelModeChanged.fire({model:e,oldLanguageId:i})}};K0.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024;K0=pd=OQ([Dh(0,mi),Dh(1,d4),Dh(2,hL),Dh(3,Mi),Dh(4,mr)],K0);class WQ{get templateId(){return this.renderer.templateId}constructor(e,t){this.renderer=e,this.modelProvider=t}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:oe.None}}renderElement(e,t,i,s){var o;if((o=i.disposable)===null||o===void 0||o.dispose(),!i.data)return;const r=this.modelProvider();if(r.isResolved(e))return this.renderer.renderElement(r.get(e),e,i.data,s);const a=new vl,l=r.resolve(e,a.token);i.disposable={dispose:()=>a.cancel()},this.renderer.renderPlaceholder(e,i.data),l.then(c=>this.renderer.renderElement(c,e,i.data,s))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class HQ{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}function $Q(n,e){return Object.assign(Object.assign({},e),{accessibilityProvider:e.accessibilityProvider&&new HQ(n,e.accessibilityProvider)})}class zQ{constructor(e,t,i,s,o={}){const r=()=>this.model,a=s.map(l=>new WQ(l,r));this.list=new br(e,t,i,a,$Q(r,o))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get widget(){return this.list}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return ke.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:i})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:i}))}get onPointer(){return ke.map(this.list.onPointer,({element:e,index:t,browserEvent:i})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:i}))}get onDidChangeSelection(){return ke.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:i})=>({elements:e.map(s=>this._model.get(s)),indexes:t,browserEvent:i}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,gn(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}const UQ={separatorBorder:J.transparent};class t5{set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){var i,s;e!==this.visible&&(e?(this.size=ds(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e),(s=(i=this.view).setVisible)===null||s===void 0||s.call(i,e))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){var e;return(e=this.view.proportionalLayout)!==null&&e!==void 0?e:!0}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}constructor(e,t,i,s){this.container=e,this.view=t,this.disposable=s,this._cachedVisibleSize=void 0,typeof i=="number"?(this._size=i,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=i.cachedVisibleSize)}layout(e,t){this.layoutContainer(e),this.view.layout(this.size,e,t)}dispose(){this.disposable.dispose()}}class qQ extends t5{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class jQ extends t5{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var Ir;(function(n){n[n.Idle=0]="Idle",n[n.Busy=1]="Busy"})(Ir||(Ir={}));var JE;(function(n){n.Distribute={type:"distribute"};function e(s){return{type:"split",index:s}}n.Split=e;function t(s){return{type:"auto",index:s}}n.Auto=t;function i(s){return{type:"invisible",cachedVisibleSize:s}}n.Invisible=i})(JE||(JE={}));class KQ extends oe{get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e,t={}){var i,s,o,r,a;super(),this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=Ir.Idle,this._onDidSashChange=this._register(new q),this._onDidSashReset=this._register(new q),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=(i=t.orientation)!==null&&i!==void 0?i:0,this.inverseAltBehavior=(s=t.inverseAltBehavior)!==null&&s!==void 0?s:!1,this.proportionalLayout=(o=t.proportionalLayout)!==null&&o!==void 0?o:!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=De(this.el,Be(".sash-container")),this.viewContainer=Be(".split-view-container"),this.scrollable=this._register(new Bg({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:Ws})),this.scrollableElement=this._register(new XS(this.viewContainer,{vertical:this.orientation===0?(r=t.scrollbarVisibility)!==null&&r!==void 0?r:1:2,horizontal:this.orientation===1?(a=t.scrollbarVisibility)!==null&&a!==void 0?a:1:2},this.scrollable));const l=this._register(new Qe(this.viewContainer,"scroll")).event;this._register(l(c=>{const d=this.scrollableElement.getScrollPosition(),u=Math.abs(this.viewContainer.scrollLeft-d.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,h=Math.abs(this.viewContainer.scrollTop-d.scrollTop)<=1?void 0:this.viewContainer.scrollTop;(u!==void 0||h!==void 0)&&this.scrollableElement.setScrollPosition({scrollLeft:u,scrollTop:h})})),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(c=>{c.scrollTopChanged&&(this.viewContainer.scrollTop=c.scrollTop),c.scrollLeftChanged&&(this.viewContainer.scrollLeft=c.scrollLeft)})),De(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||UQ),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((c,d)=>{const u=Io(c.visible)||c.visible?c.size:{type:"invisible",cachedVisibleSize:c.size},h=c.view;this.doAddView(h,u,d,!0)}),this.contentSize=this.viewItems.reduce((c,d)=>c+d.size,0),this.saveProportions())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,i=this.viewItems.length,s){this.doAddView(e,t,i,s)}layout(e,t){const i=Math.max(this.size,this.contentSize);if(this.size=e,this.layoutContext=t,this.proportions){let s=0;for(let o=0;o<this.viewItems.length;o++){const r=this.viewItems[o],a=this.proportions[o];typeof a=="number"?s+=a:e-=r.size}for(let o=0;o<this.viewItems.length;o++){const r=this.viewItems[o],a=this.proportions[o];typeof a=="number"&&(r.size=ds(Math.round(a*e/s),r.minimumSize,r.maximumSize))}}else{const s=gn(this.viewItems.length),o=s.filter(a=>this.viewItems[a].priority===1),r=s.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-i,void 0,o,r)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(e=>e.proportionalLayout?e.size/this.contentSize:void 0))}onSashStart({sash:e,start:t,alt:i}){for(const a of this.viewItems)a.enabled=!1;const s=this.sashItems.findIndex(a=>a.sash===e),o=lr(ee(document.body,"keydown",a=>r(this.sashDragState.current,a.altKey)),ee(document.body,"keyup",()=>r(this.sashDragState.current,!1))),r=(a,l)=>{const c=this.viewItems.map(g=>g.size);let d=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(s===this.sashItems.length-1){const p=this.viewItems[s];d=(p.minimumSize-p.size)/2,u=(p.maximumSize-p.size)/2}else{const p=this.viewItems[s+1];d=(p.size-p.maximumSize)/2,u=(p.size-p.minimumSize)/2}let h,f;if(!l){const g=gn(s,-1),p=gn(s+1,this.viewItems.length),_=g.reduce((x,I)=>x+(this.viewItems[I].minimumSize-c[I]),0),v=g.reduce((x,I)=>x+(this.viewItems[I].viewMaximumSize-c[I]),0),b=p.length===0?Number.POSITIVE_INFINITY:p.reduce((x,I)=>x+(c[I]-this.viewItems[I].minimumSize),0),w=p.length===0?Number.NEGATIVE_INFINITY:p.reduce((x,I)=>x+(c[I]-this.viewItems[I].viewMaximumSize),0),C=Math.max(_,w),S=Math.min(b,v),k=this.findFirstSnapIndex(g),L=this.findFirstSnapIndex(p);if(typeof k=="number"){const x=this.viewItems[k],I=Math.floor(x.viewMinimumSize/2);h={index:k,limitDelta:x.visible?C-I:C+I,size:x.size}}if(typeof L=="number"){const x=this.viewItems[L],I=Math.floor(x.viewMinimumSize/2);f={index:L,limitDelta:x.visible?S+I:S-I,size:x.size}}}this.sashDragState={start:a,current:a,index:s,sizes:c,minDelta:d,maxDelta:u,alt:l,snapBefore:h,snapAfter:f,disposable:o}};r(t,i)}onSashChange({current:e}){const{index:t,start:i,sizes:s,alt:o,minDelta:r,maxDelta:a,snapBefore:l,snapAfter:c}=this.sashDragState;this.sashDragState.current=e;const d=e-i,u=this.resize(t,d,s,void 0,void 0,r,a,l,c);if(o){const h=t===this.sashItems.length-1,f=this.viewItems.map(w=>w.size),g=h?t:t+1,p=this.viewItems[g],_=p.size-p.maximumSize,v=p.size-p.minimumSize,b=h?t-1:t+1;this.resize(b,-u,f,void 0,void 0,_,v)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const i=this.viewItems.indexOf(e);i<0||i>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=ds(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&i>0?(this.resize(i-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([i],void 0)))}resizeView(e,t){if(this.state!==Ir.Idle)throw new Error("Cant modify splitview");if(this.state=Ir.Busy,e<0||e>=this.viewItems.length)return;const i=gn(this.viewItems.length).filter(a=>a!==e),s=[...i.filter(a=>this.viewItems[a].priority===1),e],o=i.filter(a=>this.viewItems[a].priority===2),r=this.viewItems[e];t=Math.round(t),t=ds(t,r.minimumSize,Math.min(r.maximumSize,this.size)),r.size=t,this.relayout(s,o),this.state=Ir.Idle}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const i=Math.floor(t/e.length);for(const a of e)a.size=ds(i,a.minimumSize,a.maximumSize);const s=gn(this.viewItems.length),o=s.filter(a=>this.viewItems[a].priority===1),r=s.filter(a=>this.viewItems[a].priority===2);this.relayout(o,r)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,i=this.viewItems.length,s){if(this.state!==Ir.Idle)throw new Error("Cant modify splitview");this.state=Ir.Busy;const o=Be(".split-view-view");i===this.viewItems.length?this.viewContainer.appendChild(o):this.viewContainer.insertBefore(o,this.viewContainer.children.item(i));const r=e.onDidChange(h=>this.onViewChange(d,h)),a=st(()=>this.viewContainer.removeChild(o)),l=lr(r,a);let c;typeof t=="number"?c=t:(t.type==="auto"&&(this.areViewsDistributed()?t={type:"distribute"}:t={type:"split",index:t.index}),t.type==="split"?c=this.getViewSize(t.index)/2:t.type==="invisible"?c={cachedVisibleSize:t.cachedVisibleSize}:c=e.minimumSize);const d=this.orientation===0?new qQ(o,e,c,l):new jQ(o,e,c,l);if(this.viewItems.splice(i,0,d),this.viewItems.length>1){const h={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},f=this.orientation===0?new cs(this.sashContainer,{getHorizontalSashTop:x=>this.getSashPosition(x),getHorizontalSashWidth:this.getSashOrthogonalSize},Object.assign(Object.assign({},h),{orientation:1})):new cs(this.sashContainer,{getVerticalSashLeft:x=>this.getSashPosition(x),getVerticalSashHeight:this.getSashOrthogonalSize},Object.assign(Object.assign({},h),{orientation:0})),g=this.orientation===0?x=>({sash:f,start:x.startY,current:x.currentY,alt:x.altKey}):x=>({sash:f,start:x.startX,current:x.currentX,alt:x.altKey}),_=ke.map(f.onDidStart,g)(this.onSashStart,this),b=ke.map(f.onDidChange,g)(this.onSashChange,this),C=ke.map(f.onDidEnd,()=>this.sashItems.findIndex(x=>x.sash===f))(this.onSashEnd,this),S=f.onDidReset(()=>{const x=this.sashItems.findIndex(R=>R.sash===f),I=gn(x,-1),A=gn(x+1,this.viewItems.length),T=this.findFirstSnapIndex(I),O=this.findFirstSnapIndex(A);typeof T=="number"&&!this.viewItems[T].visible||typeof O=="number"&&!this.viewItems[O].visible||this._onDidSashReset.fire(x)}),k=lr(_,b,C,S,f),L={sash:f,disposable:k};this.sashItems.splice(i-1,0,L)}o.appendChild(e.element);let u;typeof t!="number"&&t.type==="split"&&(u=[t.index]),s||this.relayout([i],u),this.state=Ir.Idle,!s&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}relayout(e,t){const i=this.viewItems.reduce((s,o)=>s+o.size,0);this.resize(this.viewItems.length-1,this.size-i,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,i=this.viewItems.map(d=>d.size),s,o,r=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,c){if(e<0||e>=this.viewItems.length)return 0;const d=gn(e,-1),u=gn(e+1,this.viewItems.length);if(o)for(const L of o)V1(d,L),V1(u,L);if(s)for(const L of s)dp(d,L),dp(u,L);const h=d.map(L=>this.viewItems[L]),f=d.map(L=>i[L]),g=u.map(L=>this.viewItems[L]),p=u.map(L=>i[L]),_=d.reduce((L,x)=>L+(this.viewItems[x].minimumSize-i[x]),0),v=d.reduce((L,x)=>L+(this.viewItems[x].maximumSize-i[x]),0),b=u.length===0?Number.POSITIVE_INFINITY:u.reduce((L,x)=>L+(i[x]-this.viewItems[x].minimumSize),0),w=u.length===0?Number.NEGATIVE_INFINITY:u.reduce((L,x)=>L+(i[x]-this.viewItems[x].maximumSize),0),C=Math.max(_,w,r),S=Math.min(b,v,a);let k=!1;if(l){const L=this.viewItems[l.index],x=t>=l.limitDelta;k=x!==L.visible,L.setVisible(x,l.size)}if(!k&&c){const L=this.viewItems[c.index],x=t<c.limitDelta;k=x!==L.visible,L.setVisible(x,c.size)}if(k)return this.resize(e,t,i,s,o,r,a);t=ds(t,C,S);for(let L=0,x=t;L<h.length;L++){const I=h[L],A=ds(f[L]+x,I.minimumSize,I.maximumSize),T=A-f[L];x-=T,I.size=A}for(let L=0,x=t;L<g.length;L++){const I=g[L],A=ds(p[L]-x,I.minimumSize,I.maximumSize),T=A-p[L];x+=T,I.size=A}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,l)=>a+l.size,0);let i=this.size-t;const s=gn(this.viewItems.length-1,-1),o=s.filter(a=>this.viewItems[a].priority===1),r=s.filter(a=>this.viewItems[a].priority===2);for(const a of r)V1(s,a);for(const a of o)dp(s,a);typeof e=="number"&&dp(s,e);for(let a=0;i!==0&&a<s.length;a++){const l=this.viewItems[s[a]],c=ds(l.size+i,l.minimumSize,l.maximumSize),d=c-l.size;i-=d,l.size=c}}layoutViews(){this.contentSize=this.viewItems.reduce((t,i)=>t+i.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this.contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this.contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;const i=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),s=[...this.viewItems].reverse();e=!1;const o=s.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;const r=s.map(l=>e=l.maximumSize-l.size>0||e).reverse();let a=0;for(let l=0;l<this.sashItems.length;l++){const{sash:c}=this.sashItems[l],d=this.viewItems[l];a+=d.size;const u=!(t[l]&&r[l+1]),h=!(i[l]&&o[l+1]);if(u&&h){const f=gn(l,-1),g=gn(l+1,this.viewItems.length),p=this.findFirstSnapIndex(f),_=this.findFirstSnapIndex(g),v=typeof p=="number"&&!this.viewItems[p].visible,b=typeof _=="number"&&!this.viewItems[_].visible;v&&o[l]&&(a>0||this.startSnappingEnabled)?c.state=1:b&&t[l]&&(a<this.contentSize||this.endSnappingEnabled)?c.state=2:c.state=0}else u&&!h?c.state=1:!u&&h?c.state=2:c.state=3}}getSashPosition(e){let t=0;for(let i=0;i<this.sashItems.length;i++)if(t+=this.viewItems[i].size,this.sashItems[i].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const i=this.viewItems[t];if(i.visible&&i.snap)return t}for(const t of e){const i=this.viewItems[t];if(i.visible&&i.maximumSize-i.minimumSize>0)return;if(!i.visible&&i.snap)return t}}areViewsDistributed(){let e,t;for(const i of this.viewItems)if(e=e===void 0?i.size:Math.min(e,i.size),t=t===void 0?i.size:Math.max(t,i.size),t-e>2)return!1;return!0}dispose(){var e;(e=this.sashDragState)===null||e===void 0||e.disposable.dispose(),ci(this.viewItems),this.viewItems=[],this.sashItems.forEach(t=>t.disposable.dispose()),this.sashItems=[],super.dispose()}}class Xg{constructor(e,t,i){this.columns=e,this.getColumnSize=i,this.templateId=Xg.TemplateId,this.renderedTemplates=new Set;const s=new Map(t.map(o=>[o.templateId,o]));this.renderers=[];for(const o of e){const r=s.get(o.templateId);if(!r)throw new Error(`Table cell renderer for template id ${o.templateId} not found.`);this.renderers.push(r)}}renderTemplate(e){const t=De(e,Be(".monaco-table-tr")),i=[],s=[];for(let r=0;r<this.columns.length;r++){const a=this.renderers[r],l=De(t,Be(".monaco-table-td",{"data-col-index":r}));l.style.width=`${this.getColumnSize(r)}px`,i.push(l),s.push(a.renderTemplate(l))}const o={container:e,cellContainers:i,cellTemplateData:s};return this.renderedTemplates.add(o),o}renderElement(e,t,i,s){for(let o=0;o<this.columns.length;o++){const a=this.columns[o].project(e);this.renderers[o].renderElement(a,t,i.cellTemplateData[o],s)}}disposeElement(e,t,i,s){for(let o=0;o<this.columns.length;o++){const r=this.renderers[o];if(r.disposeElement){const l=this.columns[o].project(e);r.disposeElement(l,t,i.cellTemplateData[o],s)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);Vs(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:i}of this.renderedTemplates)i[e].style.width=`${t}px`}}Xg.TemplateId="row";function GQ(n){return{getHeight(e){return n.getHeight(e)},getTemplateId(){return Xg.TemplateId}}}class ZQ{get minimumSize(){var e;return(e=this.column.minimumWidth)!==null&&e!==void 0?e:120}get maximumSize(){var e;return(e=this.column.maximumWidth)!==null&&e!==void 0?e:Number.POSITIVE_INFINITY}get onDidChange(){var e;return(e=this.column.onDidChangeWidthConstraints)!==null&&e!==void 0?e:ke.None}constructor(e,t){this.column=e,this.index=t,this._onDidLayout=new q,this.onDidLayout=this._onDidLayout.event,this.element=Be(".monaco-table-th",{"data-col-index":t,title:e.tooltip},e.label)}layout(e){this._onDidLayout.fire([this.index,e])}}class l1{get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onDidScroll(){return this.list.onDidScroll}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollHeight(){return this.list.scrollHeight}get renderHeight(){return this.list.renderHeight}get onDidDispose(){return this.list.onDidDispose}constructor(e,t,i,s,o,r){this.virtualDelegate=i,this.domId=`table_id_${++l1.InstanceCount}`,this.disposables=new Fe,this.cachedWidth=0,this.cachedHeight=0,this.domNode=De(t,Be(`.monaco-table.${this.domId}`));const a=s.map((d,u)=>new ZQ(d,u)),l={size:a.reduce((d,u)=>d+u.column.weight,0),views:a.map(d=>({size:d.column.weight,view:d}))};this.splitview=this.disposables.add(new KQ(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l})),this.splitview.el.style.height=`${i.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${i.headerRowHeight}px`;const c=new Xg(s,o,d=>this.splitview.getViewSize(d));this.list=this.disposables.add(new br(e,this.domNode,GQ(i),[c],r)),ke.any(...a.map(d=>d.onDidLayout))(([d,u])=>c.layoutColumn(d,u),null,this.disposables),this.splitview.onDidSashReset(d=>{const u=s.reduce((f,g)=>f+g.weight,0),h=s[d].weight/u*this.cachedWidth;this.splitview.resizeView(d,h)},null,this.disposables),this.styleElement=so(this.domNode),this.style(bY)}updateOptions(e){this.list.updateOptions(e)}splice(e,t,i=[]){this.list.splice(e,t,i)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}}l1.InstanceCount=0;class c1 extends qc{constructor(e){super(),this._onChange=this._register(new q),this.onChange=this._onChange.event,this._onKeyDown=this._register(new q),this.onKeyDown=this._onKeyDown.event,this._opts=e,this._checked=this._opts.isChecked;const t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...je.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this.domNode.title=this._opts.title,this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,i=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),i.preventDefault())}),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,i=>{if(i.keyCode===10||i.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),i.preventDefault(),i.stopPropagation();return}this._onKeyDown.fire(i)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 2+2+2+16}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}const YQ=m("caseDescription","Match Case"),XQ=m("wordsDescription","Match Whole Word"),QQ=m("regexDescription","Use Regular Expression");class JQ extends c1{constructor(e){super({icon:we.caseSensitive,title:YQ+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class eJ extends c1{constructor(e){super({icon:we.wholeWord,title:XQ+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class tJ extends c1{constructor(e){super({icon:we.regex,title:QQ+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class iJ{constructor(e,t=0,i=e.length,s=t-1){this.items=e,this.start=t,this.end=i,this.index=s}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class nJ{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._navigator.next()}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return this._navigator.current()===null}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new iJ(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}}const kh=Be;let sJ=class extends qc{constructor(e,t,i){var s;super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new q),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new q),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=i,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=(s=this.options.tooltip)!==null&&s!==void 0?s:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=De(e,kh(".monaco-inputbox.idle"));const o=this.options.flexibleHeight?"textarea":"input",r=De(this.element,kh(".ibwrapper"));if(this.input=De(r,kh(o+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=De(r,kh("div.mirror")),this.mirror.innerText=" ",this.scrollableElement=new Qz(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),De(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(c=>this.input.scrollTop=c.scrollTop));const a=this._register(new Qe(document,"selectionchange")),l=ke.filter(a.event,()=>{const c=document.getSelection();return(c==null?void 0:c.anchorNode)===r});this._register(l(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this._register(this.ignoreGesture(this.input)),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new ml(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.input.title=e}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:Kw(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return document.activeElement===this.input}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,i=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:i})}showMessage(e,t){if(this.state==="open"&&bs(this.message,e))return;this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const i=this.stylesForType(this.message.type);this.element.style.border=`1px solid ${dc(i.border,"transparent")}`,this.message.content&&(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e==null?void 0:e.type}stylesForType(e){const t=this.options.inputBoxStyles;switch(e){case 1:return{border:t.inputValidationInfoBorder,background:t.inputValidationInfoBackground,foreground:t.inputValidationInfoForeground};case 2:return{border:t.inputValidationWarningBorder,background:t.inputValidationWarningBackground,foreground:t.inputValidationWarningForeground};default:return{border:t.inputValidationErrorBorder,background:t.inputValidationErrorBackground,foreground:t.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e;const t=()=>e.style.width=HS(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:s=>{var o,r;if(!this.message)return null;e=De(s,kh(".monaco-inputbox-container")),t();const a={inline:!0,className:"monaco-inputbox-message"},l=this.message.formatContent?AZ(this.message.content,a):TZ(this.message.content,a);l.classList.add(this.classForType(this.message.type));const c=this.stylesForType(this.message.type);return l.style.backgroundColor=(o=c.background)!==null&&o!==void 0?o:"",l.style.color=(r=c.foreground)!==null&&r!==void 0?r:"",l.style.border=c.border?`1px solid ${c.border}`:"",De(e,l),null},onHide:()=>{this.state="closed"},layout:t});let i;this.message.type===3?i=m("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?i=m("alertWarningMessage","Warning: {0}",this.message.content):i=m("alertInfoMessage","Info: {0}",this.message.content),H4(i),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,i=e.charCodeAt(e.length-1)===10?" ":"";(e+i).replace(/\u000c/g,"")?this.mirror.textContent=e+i:this.mirror.innerText=" ",this.layout()}applyStyles(){var e,t,i;const s=this.options.inputBoxStyles,o=(e=s.inputBackground)!==null&&e!==void 0?e:"",r=(t=s.inputForeground)!==null&&t!==void 0?t:"",a=(i=s.inputBorder)!==null&&i!==void 0?i:"";this.element.style.backgroundColor=o,this.element.style.color=r,this.input.style.backgroundColor="inherit",this.input.style.color=r,this.element.style.border=`1px solid ${dc(a,"transparent")}`}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=Kw(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,i=t.selectionStart,s=t.selectionEnd,o=t.value;i!==null&&s!==null&&(this.value=o.substr(0,i)+e+o.substr(s),t.setSelectionRange(i+1,i+1),this.layout())}dispose(){var e;this._hideMessage(),this.message=null,(e=this.actionbar)===null||e===void 0||e.dispose(),super.dispose()}};class oJ extends sJ{constructor(e,t,i){const s=m({key:"history.inputbox.hint",comment:["Text will be prefixed with ⇅ plus a single space, then used as a hint where input field keeps history"]},"for history"),o=` or ⇅ ${s}`,r=` (⇅ ${s})`;super(e,t,i),this._onDidFocus=this._register(new q),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new q),this.onDidBlur=this._onDidBlur.event,this.history=new nJ(i.history,100);const a=()=>{if(i.showHistoryHint&&i.showHistoryHint()&&!this.placeholder.endsWith(o)&&!this.placeholder.endsWith(r)&&this.history.getHistory().length){const l=this.placeholder.endsWith(")")?o:r,c=this.placeholder+l;i.showPlaceholderOnFocus&&document.activeElement!==this.input?this.placeholder=c:this.setPlaceHolder(c)}};this.observer=new MutationObserver((l,c)=>{l.forEach(d=>{d.target.textContent||a()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>a()),this.onblur(this.input,()=>{const l=c=>{if(this.placeholder.endsWith(c)){const d=this.placeholder.slice(0,this.placeholder.length-c.length);return i.showPlaceholderOnFocus?this.placeholder=d:this.setPlaceHolder(d),!0}else return!1};l(r)||l(o)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(e){this.value&&(e||this.value!==this.getCurrentValue())&&this.history.add(this.value)}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),this.value=e??"",Xw(this.value?this.value:m("clearedInput","Cleared Input"))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,Xw(this.value))}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}}const rJ=m("defaultLabel","input");class aJ extends qc{constructor(e,t,i){super(),this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalTogglesDisposables=new Fe,this.additionalToggles=[],this._onDidOptionChange=this._register(new q),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new q),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new q),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new q),this._onKeyUp=this._register(new q),this._onCaseSensitiveKeyDown=this._register(new q),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new q),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.placeholder=i.placeholder||"",this.validation=i.validation,this.label=i.label||rJ,this.showCommonFindToggles=!!i.showCommonFindToggles;const s=i.appendCaseSensitiveLabel||"",o=i.appendWholeWordsLabel||"",r=i.appendRegexLabel||"",a=i.history||[],l=!!i.flexibleHeight,c=!!i.flexibleWidth,d=i.flexibleMaxHeight;if(this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new oJ(this.domNode,t,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},history:a,showHistoryHint:i.showHistoryHint,flexibleHeight:l,flexibleWidth:c,flexibleMaxHeight:d,inputBoxStyles:i.inputBoxStyles})),this.showCommonFindToggles){this.regex=this._register(new tJ(Object.assign({appendTitle:r,isChecked:!1},i.toggleStyles))),this._register(this.regex.onChange(h=>{this._onDidOptionChange.fire(h),!h&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(h=>{this._onRegexKeyDown.fire(h)})),this.wholeWords=this._register(new eJ(Object.assign({appendTitle:o,isChecked:!1},i.toggleStyles))),this._register(this.wholeWords.onChange(h=>{this._onDidOptionChange.fire(h),!h&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new JQ(Object.assign({appendTitle:s,isChecked:!1},i.toggleStyles))),this._register(this.caseSensitive.onChange(h=>{this._onDidOptionChange.fire(h),!h&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(h=>{this._onCaseSensitiveKeyDown.fire(h)}));const u=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,h=>{if(h.equals(15)||h.equals(17)||h.equals(9)){const f=u.indexOf(document.activeElement);if(f>=0){let g=-1;h.equals(17)?g=(f+1)%u.length:h.equals(15)&&(f===0?g=u.length-1:g=f-1),h.equals(9)?(u[f].blur(),this.inputBox.focus()):g>=0&&u[g].focus(),qe.stop(h,!0)}}})}this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(i==null?void 0:i.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),e==null||e.appendChild(this.domNode),this._register(ee(this.inputBox.inputElement,"compositionstart",u=>{this.imeSessionInProgress=!0})),this._register(ee(this.inputBox.inputElement,"compositionend",u=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,u=>this._onKeyDown.fire(u)),this.onkeyup(this.inputBox.inputElement,u=>this._onKeyUp.fire(u)),this.oninput(this.inputBox.inputElement,u=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,u=>this._onMouseDown.fire(u))}get onDidChange(){return this.inputBox.onDidChange}layout(e){this.inputBox.layout(),this.updateInputBoxPadding(e.collapsedFindWidget)}enable(){var e,t,i;this.domNode.classList.remove("disabled"),this.inputBox.enable(),(e=this.regex)===null||e===void 0||e.enable(),(t=this.wholeWords)===null||t===void 0||t.enable(),(i=this.caseSensitive)===null||i===void 0||i.enable();for(const s of this.additionalToggles)s.enable()}disable(){var e,t,i;this.domNode.classList.add("disabled"),this.inputBox.disable(),(e=this.regex)===null||e===void 0||e.disable(),(t=this.wholeWords)===null||t===void 0||t.disable(),(i=this.caseSensitive)===null||i===void 0||i.disable();for(const s of this.additionalToggles)s.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}setAdditionalToggles(e){for(const t of this.additionalToggles)t.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.dispose(),this.additionalTogglesDisposables=new Fe;for(const t of e??[])this.additionalTogglesDisposables.add(t),this.controls.appendChild(t.domNode),this.additionalTogglesDisposables.add(t.onChange(i=>{this._onDidOptionChange.fire(i),!i&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(t);this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}updateInputBoxPadding(e=!1){var t,i,s,o,r,a;e?this.inputBox.paddingRight=0:this.inputBox.paddingRight=((i=(t=this.caseSensitive)===null||t===void 0?void 0:t.width())!==null&&i!==void 0?i:0)+((o=(s=this.wholeWords)===null||s===void 0?void 0:s.width())!==null&&o!==void 0?o:0)+((a=(r=this.regex)===null||r===void 0?void 0:r.width())!==null&&a!==void 0?a:0)+this.additionalToggles.reduce((l,c)=>l+c.width(),0)}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){var e,t;return(t=(e=this.caseSensitive)===null||e===void 0?void 0:e.checked)!==null&&t!==void 0?t:!1}setCaseSensitive(e){this.caseSensitive&&(this.caseSensitive.checked=e)}getWholeWords(){var e,t;return(t=(e=this.wholeWords)===null||e===void 0?void 0:e.checked)!==null&&t!==void 0?t:!1}setWholeWords(e){this.wholeWords&&(this.wholeWords.checked=e)}getRegex(){var e,t;return(t=(e=this.regex)===null||e===void 0?void 0:e.checked)!==null&&t!==void 0?t:!1}setRegex(e){this.regex&&(this.regex.checked=e,this.validate())}focusOnCaseSensitive(){var e;(e=this.caseSensitive)===null||e===void 0||e.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}}var $o;(function(n){n[n.Expanded=0]="Expanded",n[n.Collapsed=1]="Collapsed",n[n.PreserveOrExpanded=2]="PreserveOrExpanded",n[n.PreserveOrCollapsed=3]="PreserveOrCollapsed"})($o||($o={}));var nc;(function(n){n[n.Unknown=0]="Unknown",n[n.Twistie=1]="Twistie",n[n.Element=2]="Element",n[n.Filter=3]="Filter"})(nc||(nc={}));class fs extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class OL{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}function FL(n){return typeof n=="object"&&"visibility"in n&&"data"in n}function ag(n){switch(n){case!0:return 1;case!1:return 0;default:return n}}function iv(n){return typeof n.collapsible=="boolean"}class lJ{constructor(e,t,i,s={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new fS,this._onDidChangeCollapseState=new q,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new q,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new q,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new F_(QT),this.collapseByDefault=typeof s.collapseByDefault>"u"?!1:s.collapseByDefault,this.filter=s.filter,this.autoExpandSingleChildren=typeof s.autoExpandSingleChildren>"u"?!1:s.autoExpandSingleChildren,this.root={parent:void 0,element:i,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,i=lt.empty(),s={}){if(e.length===0)throw new fs(this.user,"Invalid tree location");s.diffIdentityProvider?this.spliceSmart(s.diffIdentityProvider,e,t,i,s):this.spliceSimple(e,t,i,s)}spliceSmart(e,t,i,s,o,r){var a;s===void 0&&(s=lt.empty()),r===void 0&&(r=(a=o.diffDepth)!==null&&a!==void 0?a:0);const{parentNode:l}=this.getParentNodeWithListIndex(t);if(!l.lastDiffIds)return this.spliceSimple(t,i,s,o);const c=[...s],d=t[t.length-1],u=new Br({getElements:()=>l.lastDiffIds},{getElements:()=>[...l.children.slice(0,d),...c,...l.children.slice(d+i)].map(_=>e.getId(_.element).toString())}).ComputeDiff(!1);if(u.quitEarly)return l.lastDiffIds=void 0,this.spliceSimple(t,i,c,o);const h=t.slice(0,-1),f=(_,v,b)=>{if(r>0)for(let w=0;w<b;w++)_--,v--,this.spliceSmart(e,[...h,_,0],Number.MAX_SAFE_INTEGER,c[v].children,o,r-1)};let g=Math.min(l.children.length,d+i),p=c.length;for(const _ of u.changes.sort((v,b)=>b.originalStart-v.originalStart))f(g,p,g-(_.originalStart+_.originalLength)),g=_.originalStart,p=_.modifiedStart-d,this.spliceSimple([...h,g],_.originalLength,lt.slice(c,p,p+_.modifiedLength),o);f(g,p,g)}spliceSimple(e,t,i=lt.empty(),{onDidCreateNode:s,onDidDeleteNode:o,diffIdentityProvider:r}){const{parentNode:a,listIndex:l,revealed:c,visible:d}=this.getParentNodeWithListIndex(e),u=[],h=lt.map(i,L=>this.createTreeNode(L,a,a.visible?1:0,c,u,s)),f=e[e.length-1],g=a.children.length>0;let p=0;for(let L=f;L>=0&&L<a.children.length;L--){const x=a.children[L];if(x.visible){p=x.visibleChildIndex;break}}const _=[];let v=0,b=0;for(const L of h)_.push(L),b+=L.renderNodeCount,L.visible&&(L.visibleChildIndex=p+v++);const w=Yx(a.children,f,t,_);r?a.lastDiffIds?Yx(a.lastDiffIds,f,t,_.map(L=>r.getId(L.element).toString())):a.lastDiffIds=a.children.map(L=>r.getId(L.element).toString()):a.lastDiffIds=void 0;let C=0;for(const L of w)L.visible&&C++;if(C!==0)for(let L=f+_.length;L<a.children.length;L++){const x=a.children[L];x.visible&&(x.visibleChildIndex-=C)}if(a.visibleChildrenCount+=v-C,c&&d){const L=w.reduce((x,I)=>x+(I.visible?I.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,b-L),this.list.splice(l,L,u)}if(w.length>0&&o){const L=x=>{o(x),x.children.forEach(L)};w.forEach(L)}this._onDidSplice.fire({insertedNodes:_,deletedNodes:w});const S=a.children.length>0;g!==S&&this.setCollapsible(e.slice(0,-1),S);let k=a;for(;k;){if(k.visibility===2){this.refilterDelayer.trigger(()=>this.refilter());break}k=k.parent}}rerender(e){if(e.length===0)throw new fs(this.user,"Invalid tree location");const{node:t,listIndex:i,revealed:s}=this.getTreeNodeWithListIndex(e);t.visible&&s&&this.list.splice(i,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:i,revealed:s}=this.getTreeNodeWithListIndex(e);return i&&s?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const i=this.getTreeNode(e);typeof t>"u"&&(t=!i.collapsible);const s={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,s))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,i){const s=this.getTreeNode(e);typeof t>"u"&&(t=!s.collapsed);const o={collapsed:t,recursive:i||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,o))}_setCollapseState(e,t){const{node:i,listIndex:s,revealed:o}=this.getTreeNodeWithListIndex(e),r=this._setListNodeCollapseState(i,s,o,t);if(i!==this.root&&this.autoExpandSingleChildren&&r&&!iv(t)&&i.collapsible&&!i.collapsed&&!t.recursive){let a=-1;for(let l=0;l<i.children.length;l++)if(i.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return r}_setListNodeCollapseState(e,t,i,s){const o=this._setNodeCollapseState(e,s,!1);if(!i||!e.visible||!o)return o;const r=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=r-(t===-1?0:1);return this.list.splice(t+1,l,a.slice(1)),o}_setNodeCollapseState(e,t,i){let s;if(e===this.root?s=!1:(iv(t)?(s=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(s=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):s=!1,s&&this._onDidChangeCollapseState.fire({node:e,deep:i})),!iv(t)&&t.recursive)for(const o of e.children)s=this._setNodeCollapseState(o,t,!0)||s;return s}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t),this.refilterDelayer.cancel()}createTreeNode(e,t,i,s,o,r){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,i);a.visibility=l,s&&o.push(a);const c=e.children||lt.empty(),d=s&&l!==0&&!a.collapsed;let u=0,h=1;for(const f of c){const g=this.createTreeNode(f,a,l,d,o,r);a.children.push(g),h+=g.renderNodeCount,g.visible&&(g.visibleChildIndex=u++)}return a.collapsible=a.collapsible||a.children.length>0,a.visibleChildrenCount=u,a.visible=l===2?u>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=h):(a.renderNodeCount=0,s&&o.pop()),r==null||r(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterCollapseChange(e,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const i of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(i,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterFilterChange(e,t,i,s=!0){let o;if(e!==this.root){if(o=this._filterNode(e,t),o===0)return e.visible=!1,e.renderNodeCount=0,!1;s&&i.push(e)}const r=i.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||o!==0){let l=0;for(const c of e.children)a=this._updateNodeAfterFilterChange(c,o,i,s&&!e.collapsed)||a,c.visible&&(c.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=o===2?a:o===1,e.visibility=o),e.visible?e.collapsed||(e.renderNodeCount+=i.length-r):(e.renderNodeCount=0,s&&i.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const i=this.filter?this.filter.filter(e.element,t):1;return typeof i=="boolean"?(e.filterData=void 0,i?1:0):FL(i)?(e.filterData=i.data,ag(i.visibility)):(e.filterData=void 0,ag(i))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[i,...s]=e;return i<0||i>t.children.length?!1:this.hasTreeNode(s,t.children[i])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[i,...s]=e;if(i<0||i>t.children.length)throw new fs(this.user,"Invalid tree location");return this.getTreeNode(s,t.children[i])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:i,revealed:s,visible:o}=this.getParentNodeWithListIndex(e),r=e[e.length-1];if(r<0||r>t.children.length)throw new fs(this.user,"Invalid tree location");const a=t.children[r];return{node:a,listIndex:i,revealed:s,visible:o&&a.visible}}getParentNodeWithListIndex(e,t=this.root,i=0,s=!0,o=!0){const[r,...a]=e;if(r<0||r>t.children.length)throw new fs(this.user,"Invalid tree location");for(let l=0;l<r;l++)i+=t.children[l].renderNodeCount;return s=s&&!t.collapsed,o=o&&t.visible,a.length===0?{parentNode:t,listIndex:i,revealed:s,visible:o}:this.getParentNodeWithListIndex(a,t.children[r],i+1,s,o)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let i=e;for(;i.parent;)t.push(i.parent.children.indexOf(i)),i=i.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:g7(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}}globalThis&&globalThis.__awaiter;class cJ extends qg{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function nv(n){return n instanceof qg?new cJ(n):n}class dJ{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=oe.None}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(i=>i.element),t)}onDragStart(e,t){var i,s;(s=(i=this.dnd).onDragStart)===null||s===void 0||s.call(i,nv(e),t)}onDragOver(e,t,i,s,o=!0){const r=this.dnd.onDragOver(nv(e),t&&t.element,i,s),a=this.autoExpandNode!==t;if(a&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return r;if(a&&typeof r!="boolean"&&r.autoExpand&&(this.autoExpandDisposable=Pw(()=>{const h=this.modelProvider(),f=h.getNodeLocation(t);h.isCollapsed(f)&&h.setCollapsed(f,!1),this.autoExpandNode=void 0},500)),typeof r=="boolean"||!r.accept||typeof r.bubble>"u"||r.feedback){if(!o){const h=typeof r=="boolean"?r:r.accept,f=typeof r=="boolean"?void 0:r.effect;return{accept:h,effect:f,feedback:[i]}}return r}if(r.bubble===1){const h=this.modelProvider(),f=h.getNodeLocation(t),g=h.getParentNodeLocation(f),p=h.getNode(g),_=g&&h.getListIndex(g);return this.onDragOver(e,p,_,s,!1)}const l=this.modelProvider(),c=l.getNodeLocation(t),d=l.getListIndex(c),u=l.getListRenderCount(c);return Object.assign(Object.assign({},r),{feedback:gn(d,d+u)})}drop(e,t,i,s){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(nv(e),t&&t.element,i,s)}onDragEnd(e){var t,i;(i=(t=this.dnd).onDragEnd)===null||i===void 0||i.call(t,e)}}function uJ(n,e){return e&&Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new dJ(n,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))}},accessibilityProvider:e.accessibilityProvider&&Object.assign(Object.assign({},e.accessibilityProvider),{getSetSize(t){const i=n(),s=i.getNodeLocation(t),o=i.getParentNodeLocation(s);return i.getNode(o).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))}),keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}})})}class BL{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){var i,s;(s=(i=this.delegate).setDynamicHeight)===null||s===void 0||s.call(i,e.element,t)}}var lg;(function(n){n.None="none",n.OnHover="onHover",n.Always="always"})(lg||(lg={}));class hJ{get elements(){return this._elements}constructor(e,t=[]){this._elements=t,this.disposables=new Fe,this.onDidChange=ke.forEach(e,i=>this._elements=i,this.disposables)}dispose(){this.disposables.dispose()}}class cg{constructor(e,t,i,s,o,r={}){var a;this.renderer=e,this.modelProvider=t,this.activeNodes=s,this.renderedIndentGuides=o,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=cg.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.activeIndentNodes=new Set,this.indentGuidesDisposable=oe.None,this.disposables=new Fe,this.templateId=e.templateId,this.updateOptions(r),ke.map(i,l=>l.node)(this.onDidChangeNodeTwistieState,this,this.disposables),(a=e.onDidChangeTwistieState)===null||a===void 0||a.call(e,this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"){const t=ds(e.indent,0,40);if(t!==this.indent){this.indent=t;for(const[i,s]of this.renderedNodes)this.renderTreeElement(i,s)}}if(typeof e.renderIndentGuides<"u"){const t=e.renderIndentGuides!==lg.None;if(t!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=t;for(const[i,s]of this.renderedNodes)this._renderIndentGuides(i,s);if(this.indentGuidesDisposable.dispose(),t){const i=new Fe;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,i),this.indentGuidesDisposable=i,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=De(e,Be(".monaco-tl-row")),i=De(t,Be(".monaco-tl-indent")),s=De(t,Be(".monaco-tl-twistie")),o=De(t,Be(".monaco-tl-contents")),r=this.renderer.renderTemplate(o);return{container:e,indent:i,twistie:s,indentGuidesDisposable:oe.None,templateData:r}}renderElement(e,t,i,s){this.renderedNodes.set(e,i),this.renderedElements.set(e.element,e),this.renderTreeElement(e,i),this.renderer.renderElement(e,t,i.templateData,s)}disposeElement(e,t,i,s){var o,r;i.indentGuidesDisposable.dispose(),(r=(o=this.renderer).disposeElement)===null||r===void 0||r.call(o,e,t,i.templateData,s),typeof s=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(e,t))}renderTreeElement(e,t){const i=cg.DefaultIndent+(e.depth-1)*this.indent;t.twistie.style.paddingLeft=`${i}px`,t.indent.style.width=`${i+this.indent-16}px`,e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded"),t.twistie.classList.remove(...je.asClassNameArray(we.treeItemExpanded));let s=!1;this.renderer.renderTwistie&&(s=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(s||t.twistie.classList.add(...je.asClassNameArray(we.treeItemExpanded)),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),this._renderIndentGuides(e,t)}_renderIndentGuides(e,t){if(Vs(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const i=new Fe,s=this.modelProvider();for(;;){const o=s.getNodeLocation(e),r=s.getParentNodeLocation(o);if(!r)break;const a=s.getNode(r),l=Be(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(a)&&l.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(l):t.indent.insertBefore(l,t.indent.firstElementChild),this.renderedIndentGuides.add(a,l),i.add(st(()=>this.renderedIndentGuides.delete(a,l))),e=a}t.indentGuidesDisposable=i}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,i=this.modelProvider();e.forEach(s=>{const o=i.getNodeLocation(s);try{const r=i.getParentNodeLocation(o);s.collapsible&&s.children.length>0&&!s.collapsed?t.add(s):r&&t.add(i.getNode(r))}catch{}}),this.activeIndentNodes.forEach(s=>{t.has(s)||this.renderedIndentGuides.forEach(s,o=>o.classList.remove("active"))}),t.forEach(s=>{this.activeIndentNodes.has(s)||this.renderedIndentGuides.forEach(s,o=>o.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),ci(this.disposables)}}cg.DefaultIndent=8;class fJ{get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}constructor(e,t,i){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=i,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new Fe,e.onWillRefilter(this.reset,this,this.disposables)}filter(e,t){let i=1;if(this._filter){const r=this._filter.filter(e,t);if(typeof r=="boolean"?i=r?1:0:FL(r)?i=ag(r.visibility):i=r,i===0)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:au.Default,visibility:i};const s=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),o=Array.isArray(s)?s:[s];for(const r of o){const a=r&&r.toString();if(typeof a>"u")return{data:au.Default,visibility:i};let l;if(this.tree.findMatchType===Tc.Contiguous){const c=a.toLowerCase().indexOf(this._lowercasePattern);if(c>-1){l=[Number.MAX_SAFE_INTEGER,0];for(let d=this._lowercasePattern.length;d>0;d--)l.push(c+d-1)}}else l=fA(this._pattern,this._lowercasePattern,0,a,a.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(l)return this._matchCount++,o.length===1?{data:l,visibility:i}:{data:{label:a,score:l},visibility:i}}return this.tree.findMode===rr.Filter?typeof this.tree.options.defaultFindVisibility=="number"?this.tree.options.defaultFindVisibility:this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility(e):2:{data:au.Default,visibility:i}}reset(){this._totalCount=0,this._matchCount=0}dispose(){ci(this.disposables)}}var rr;(function(n){n[n.Highlight=0]="Highlight",n[n.Filter=1]="Filter"})(rr||(rr={}));var Tc;(function(n){n[n.Fuzzy=0]="Fuzzy",n[n.Contiguous=1]="Contiguous"})(Tc||(Tc={}));class gJ{get pattern(){return this._pattern}get mode(){return this._mode}set mode(e){e!==this._mode&&(this._mode=e,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e))}get matchType(){return this._matchType}set matchType(e){e!==this._matchType&&(this._matchType=e,this.widget&&(this.widget.matchType=this._matchType),this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(e))}constructor(e,t,i,s,o,r={}){var a,l;this.tree=e,this.view=i,this.filter=s,this.contextViewProvider=o,this.options=r,this._pattern="",this.width=0,this._onDidChangeMode=new q,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangeMatchType=new q,this.onDidChangeMatchType=this._onDidChangeMatchType.event,this._onDidChangePattern=new q,this._onDidChangeOpenState=new q,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new Fe,this.disposables=new Fe,this._mode=(a=e.options.defaultFindMode)!==null&&a!==void 0?a:rr.Highlight,this._matchType=(l=e.options.defaultFindMatchType)!==null&&l!==void 0?l:Tc.Fuzzy,t.onDidSplice(this.onDidSpliceModel,this,this.disposables)}updateOptions(e={}){e.defaultFindMode!==void 0&&(this.mode=e.defaultFindMode),e.defaultFindMatchType!==void 0&&(this.matchType=e.defaultFindMatchType)}onDidSpliceModel(){!this.widget||this.pattern.length===0||(this.tree.refilter(),this.render())}render(){var e,t,i,s;const o=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&o?!((e=this.tree.options.showNotFoundMessage)!==null&&e!==void 0)||e?(t=this.widget)===null||t===void 0||t.showMessage({type:2,content:m("not found","No elements found.")}):(i=this.widget)===null||i===void 0||i.showMessage({type:2}):(s=this.widget)===null||s===void 0||s.clearMessage()}shouldAllowFocus(e){return!this.widget||!this.pattern||this._mode===rr.Filter||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!au.isDefault(e.filterData)}layout(e){var t;this.width=e,(t=this.widget)===null||t===void 0||t.layout(e)}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}}function eI(n){let e=nc.Unknown;return pb(n.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=nc.Twistie:pb(n.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?e=nc.Element:pb(n.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(e=nc.Filter),{browserEvent:n.browserEvent,element:n.element?n.element.element:null,target:e}}function Am(n,e){e(n),n.children.forEach(t=>Am(t,e))}class sv{get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new q,this.onDidChange=this._onDidChange.event}set(e,t){!(t!=null&&t.__forceEvent)&&An(this.nodes,e)||this._set(e,!1,t)}_set(e,t,i){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const s=this;this._onDidChange.fire({get elements(){return s.get()},browserEvent:i})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const l=this.createNodeSet(),c=d=>l.delete(d);t.forEach(d=>Am(d,c)),this.set([...l.values()]);return}const i=new Set,s=l=>i.add(this.identityProvider.getId(l.element).toString());t.forEach(l=>Am(l,s));const o=new Map,r=l=>o.set(this.identityProvider.getId(l.element).toString(),l);e.forEach(l=>Am(l,r));const a=[];for(const l of this.nodes){const c=this.identityProvider.getId(l.element).toString();if(!i.has(c))a.push(l);else{const u=o.get(c);u&&u.visible&&a.push(u)}}if(this.nodes.length>0&&a.length===0){const l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class pJ extends xA{constructor(e,t){super(e),this.tree=t}onViewPointer(e){if(CA(e.browserEvent.target)||ol(e.browserEvent.target)||Pd(e.browserEvent.target)||e.browserEvent.isHandledByList)return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const i=e.browserEvent.target,s=i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&e.browserEvent.offsetX<16;let o=!1;if(typeof this.tree.expandOnlyOnTwistieClick=="function"?o=this.tree.expandOnlyOnTwistieClick(t.element):o=!!this.tree.expandOnlyOnTwistieClick,o&&!s&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e);if(t.collapsible){const r=this.tree.getNodeLocation(t),a=e.browserEvent.altKey;if(this.tree.setFocus([r]),this.tree.toggleCollapsed(r,a),o&&s){e.browserEvent.isHandledByList=!0;return}}super.onViewPointer(e)}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||e.browserEvent.isHandledByList||super.onDoubleClick(e)}}class mJ extends br{constructor(e,t,i,s,o,r,a,l){super(e,t,i,s,l),this.focusTrait=o,this.selectionTrait=r,this.anchorTrait=a}createMouseController(e){return new pJ(this,e.tree)}splice(e,t,i=[]){if(super.splice(e,t,i),i.length===0)return;const s=[],o=[];let r;i.forEach((a,l)=>{this.focusTrait.has(a)&&s.push(e+l),this.selectionTrait.has(a)&&o.push(e+l),this.anchorTrait.has(a)&&(r=e+l)}),s.length>0&&super.setFocus(Cc([...super.getFocus(),...s])),o.length>0&&super.setSelection(Cc([...super.getSelection(),...o])),typeof r=="number"&&super.setAnchor(r)}setFocus(e,t,i=!1){super.setFocus(e,t),i||this.focusTrait.set(e.map(s=>this.element(s)),t)}setSelection(e,t,i=!1){super.setSelection(e,t),i||this.selectionTrait.set(e.map(s=>this.element(s)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class i5{get onDidScroll(){return this.view.onDidScroll}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return ke.filter(ke.map(this.view.onMouseDblClick,eI),e=>e.target!==nc.Filter)}get onPointer(){return ke.map(this.view.onPointer,eI)}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return ke.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get findMode(){var e,t;return(t=(e=this.findController)===null||e===void 0?void 0:e.mode)!==null&&t!==void 0?t:rr.Highlight}set findMode(e){this.findController&&(this.findController.mode=e)}get findMatchType(){var e,t;return(t=(e=this.findController)===null||e===void 0?void 0:e.matchType)!==null&&t!==void 0?t:Tc.Fuzzy}set findMatchType(e){this.findController&&(this.findController.matchType=e)}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}constructor(e,t,i,s,o={}){var r;this._user=e,this._options=o,this.eventBufferer=new fS,this.onDidChangeFindOpenState=ke.None,this.disposables=new Fe,this._onWillRefilter=new q,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new q;const a=new BL(i),l=new nD,c=new nD,d=this.disposables.add(new hJ(c.event)),u=new r4;this.renderers=s.map(g=>new cg(g,()=>this.model,l.event,d,u,o));for(const g of this.renderers)this.disposables.add(g);let h;o.keyboardNavigationLabelProvider&&(h=new fJ(this,o.keyboardNavigationLabelProvider,o.filter),o=Object.assign(Object.assign({},o),{filter:h}),this.disposables.add(h)),this.focus=new sv(()=>this.view.getFocusedElements()[0],o.identityProvider),this.selection=new sv(()=>this.view.getSelectedElements()[0],o.identityProvider),this.anchor=new sv(()=>this.view.getAnchorElement(),o.identityProvider),this.view=new mJ(e,t,a,this.renderers,this.focus,this.selection,this.anchor,Object.assign(Object.assign({},uJ(()=>this.model,o)),{tree:this})),this.model=this.createModel(e,this.view,o),l.input=this.model.onDidChangeCollapseState;const f=ke.forEach(this.model.onDidSplice,g=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(g),this.selection.onDidModelSplice(g)})},this.disposables);if(f(()=>null,null,this.disposables),c.input=ke.chain(ke.any(f,this.focus.onDidChange,this.selection.onDidChange)).debounce(()=>null,0).map(()=>{const g=new Set;for(const p of this.focus.getNodes())g.add(p);for(const p of this.selection.getNodes())g.add(p);return[...g.values()]}).event,o.keyboardSupport!==!1){const g=ke.chain(this.view.onKeyDown).filter(p=>!ol(p.target)).map(p=>new Wt(p));g.filter(p=>p.keyCode===15).on(this.onLeftArrow,this,this.disposables),g.filter(p=>p.keyCode===17).on(this.onRightArrow,this,this.disposables),g.filter(p=>p.keyCode===10).on(this.onSpace,this,this.disposables)}if((!((r=o.findWidgetEnabled)!==null&&r!==void 0)||r)&&o.keyboardNavigationLabelProvider&&o.contextViewProvider){const g=this.options.findWidgetStyles?{styles:this.options.findWidgetStyles}:void 0;this.findController=new gJ(this,this.model,this.view,h,o.contextViewProvider,g),this.focusNavigationFilter=p=>this.findController.shouldAllowFocus(p),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindMode=ke.None,this.onDidChangeFindMatchType=ke.None;this.styleElement=so(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===lg.Always)}updateOptions(e={}){var t;this._options=Object.assign(Object.assign({},this._options),e);for(const i of this.renderers)i.updateOptions(e);this.view.updateOptions(this._options),(t=this.findController)===null||t===void 0||t.updateOptions(e),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===lg.Always)}get options(){return this._options}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}domFocus(){this.view.domFocus()}layout(e,t){var i;this.view.layout(e,t),Ku(t)&&((i=this.findController)===null||i===void 0||i.layout(t))}style(e){const t=`.${this.view.domId}`,i=[];e.treeIndentGuidesStroke&&(i.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeInactiveIndentGuidesStroke}; }`),i.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`)),this.styleElement.textContent=i.join(`
`),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}getNodeLocation(e){return this.model.getNodeLocation(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}toggleCollapsed(e,t=!1){return this.model.setCollapsed(e,void 0,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){const i=e.map(o=>this.model.getNode(o));this.selection.set(i,t);const s=e.map(o=>this.model.getListIndex(o)).filter(o=>o>-1);this.view.setSelection(s,t,!0)}getSelection(){return this.selection.get()}setFocus(e,t){const i=e.map(o=>this.model.getNode(o));this.focus.set(i,t);const s=e.map(o=>this.model.getListIndex(o)).filter(o=>o>-1);this.view.setFocus(s,t,!0)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const i=this.model.getListIndex(e);i!==-1&&this.view.reveal(i,t)}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],s=this.model.getNodeLocation(i);if(!this.model.setCollapsed(s,!0)){const r=this.model.getParentNodeLocation(s);if(!r)return;const a=this.model.getListIndex(r);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],s=this.model.getNodeLocation(i);if(!this.model.setCollapsed(s,!1)){if(!i.children.some(l=>l.visible))return;const[r]=this.view.getFocus(),a=r+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],s=this.model.getNodeLocation(i),o=e.browserEvent.altKey;this.model.setCollapsed(s,void 0,o)}dispose(){ci(this.disposables),this.view.dispose()}}class VL{constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new lJ(e,t,null,i),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,i.sorter&&(this.sorter={compare(s,o){return i.sorter.compare(s.element,o.element)}}),this.identityProvider=i.identityProvider}setChildren(e,t=lt.empty(),i={}){const s=this.getElementLocation(e);this._setChildren(s,this.preserveCollapseState(t),i)}_setChildren(e,t=lt.empty(),i){const s=new Set,o=new Set,r=l=>{var c;if(l.element===null)return;const d=l;if(s.add(d.element),this.nodes.set(d.element,d),this.identityProvider){const u=this.identityProvider.getId(d.element).toString();o.add(u),this.nodesByIdentity.set(u,d)}(c=i.onDidCreateNode)===null||c===void 0||c.call(i,d)},a=l=>{var c;if(l.element===null)return;const d=l;if(s.has(d.element)||this.nodes.delete(d.element),this.identityProvider){const u=this.identityProvider.getId(d.element).toString();o.has(u)||this.nodesByIdentity.delete(u)}(c=i.onDidDeleteNode)===null||c===void 0||c.call(i,d)};this.model.splice([...e,0],Number.MAX_VALUE,t,Object.assign(Object.assign({},i),{onDidCreateNode:r,onDidDeleteNode:a}))}preserveCollapseState(e=lt.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),lt.map(e,t=>{let i=this.nodes.get(t.element);if(!i&&this.identityProvider){const r=this.identityProvider.getId(t.element).toString();i=this.nodesByIdentity.get(r)}if(!i){let r;return typeof t.collapsed>"u"?r=void 0:t.collapsed===$o.Collapsed||t.collapsed===$o.PreserveOrCollapsed?r=!0:t.collapsed===$o.Expanded||t.collapsed===$o.PreserveOrExpanded?r=!1:r=!!t.collapsed,Object.assign(Object.assign({},t),{children:this.preserveCollapseState(t.children),collapsed:r})}const s=typeof t.collapsible=="boolean"?t.collapsible:i.collapsible;let o;return typeof t.collapsed>"u"||t.collapsed===$o.PreserveOrCollapsed||t.collapsed===$o.PreserveOrExpanded?o=i.collapsed:t.collapsed===$o.Collapsed?o=!0:t.collapsed===$o.Expanded?o=!1:o=!!t.collapsed,Object.assign(Object.assign({},t),{collapsible:s,collapsed:o,children:this.preserveCollapseState(t.children)})})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(e=null){const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getElementLocation(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const s=this.getElementLocation(e);return this.model.setCollapsed(s,t,i)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new fs(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new fs(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new fs(this.user,`Tree element not found: ${e}`);const i=this.model.getNodeLocation(t),s=this.model.getParentNodeLocation(i);return this.model.getNode(s).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new fs(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}function Mm(n){const e=[n.element],t=n.incompressible||!1;return{element:{elements:e,incompressible:t},children:lt.map(lt.from(n.children),Mm),collapsible:n.collapsible,collapsed:n.collapsed}}function Rm(n){const e=[n.element],t=n.incompressible||!1;let i,s;for(;[s,i]=lt.consume(lt.from(n.children),2),!(s.length!==1||s[0].incompressible);)n=s[0],e.push(n.element);return{element:{elements:e,incompressible:t},children:lt.map(lt.concat(s,i),Rm),collapsible:n.collapsible,collapsed:n.collapsed}}function XC(n,e=0){let t;return e<n.element.elements.length-1?t=[XC(n,e+1)]:t=lt.map(lt.from(n.children),i=>XC(i,0)),e===0&&n.element.incompressible?{element:n.element.elements[e],children:t,incompressible:!0,collapsible:n.collapsible,collapsed:n.collapsed}:{element:n.element.elements[e],children:t,collapsible:n.collapsible,collapsed:n.collapsed}}function tI(n){return XC(n,0)}function n5(n,e,t){return n.element===e?Object.assign(Object.assign({},n),{children:t}):Object.assign(Object.assign({},n),{children:lt.map(lt.from(n.children),i=>n5(i,e,t))})}const _J=n=>({getId(e){return e.elements.map(t=>n.getId(t).toString()).join("\0")}});class bJ{get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new VL(e,t,i),this.enabled=typeof i.compressionEnabled>"u"?!0:i.compressionEnabled,this.identityProvider=i.identityProvider}setChildren(e,t=lt.empty(),i){const s=i.diffIdentityProvider&&_J(i.diffIdentityProvider);if(e===null){const g=lt.map(t,this.enabled?Rm:Mm);this._setChildren(null,g,{diffIdentityProvider:s,diffDepth:1/0});return}const o=this.nodes.get(e);if(!o)throw new fs(this.user,"Unknown compressed tree node");const r=this.model.getNode(o),a=this.model.getParentNodeLocation(o),l=this.model.getNode(a),c=tI(r),d=n5(c,e,t),u=(this.enabled?Rm:Mm)(d),h=i.diffIdentityProvider?(g,p)=>i.diffIdentityProvider.getId(g)===i.diffIdentityProvider.getId(p):void 0;if(An(u.element.elements,r.element.elements,h)){this._setChildren(o,u.children||lt.empty(),{diffIdentityProvider:s,diffDepth:1});return}const f=l.children.map(g=>g===r?u:g);this._setChildren(l.element,f,{diffIdentityProvider:s,diffDepth:r.depth-l.depth})}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const i=this.model.getNode().children,s=lt.map(i,tI),o=lt.map(s,e?Rm:Mm);this._setChildren(null,o,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,i){const s=new Set,o=a=>{for(const l of a.element.elements)s.add(l),this.nodes.set(l,a.element)},r=a=>{for(const l of a.element.elements)s.has(l)||this.nodes.delete(l)};this.model.setChildren(e,t,Object.assign(Object.assign({},i),{onDidCreateNode:o,onDidDeleteNode:r}))}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),i=this.model.getParentNodeLocation(t);return i===null?null:i.elements[i.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getCompressedNode(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const s=this.getCompressedNode(e);return this.model.setCollapsed(s,t,i)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new fs(this.user,`Tree element not found: ${e}`);return t}}const vJ=n=>n[n.length-1];class WL{get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new WL(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e,t){this.unwrapper=e,this.node=t}}function wJ(n,e){return{splice(t,i,s){e.splice(t,i,s.map(o=>n.map(o)))},updateElementHeight(t,i){e.updateElementHeight(t,i)}}}function CJ(n,e){return Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(n(t))}},sorter:e.sorter&&{compare(t,i){return e.sorter.compare(t.elements[0],i.elements[0])}},filter:e.filter&&{filter(t,i){return e.filter.filter(n(t),i)}}})}class yJ{get onDidSplice(){return ke.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(i=>this.nodeMapper.map(i)),deletedNodes:t.map(i=>this.nodeMapper.map(i))}))}get onDidChangeCollapseState(){return ke.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return ke.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}constructor(e,t,i={}){this.rootRef=null,this.elementMapper=i.elementMapper||vJ;const s=o=>this.elementMapper(o.elements);this.nodeMapper=new OL(o=>new WL(s,o)),this.model=new bJ(e,wJ(this.nodeMapper,t),CJ(s,i))}setChildren(e,t=lt.empty(),i={}){this.model.setChildren(e,t,i)}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,i){return this.model.setCollapsed(e,t,i)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var SJ=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o};class HL extends i5{get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}constructor(e,t,i,s,o={}){super(e,t,i,s,o),this.user=e}setChildren(e,t=lt.empty(),i){this.model.setChildren(e,t,i)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,i){return new VL(e,t,i)}}class s5{get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}constructor(e,t){this._compressedTreeNodeProvider=e,this.renderer=t,this.templateId=t.templateId,t.onDidChangeTwistieState&&(this.onDidChangeTwistieState=t.onDidChangeTwistieState)}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,i,s){const o=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element);o.element.elements.length===1?(i.compressedTreeNode=void 0,this.renderer.renderElement(e,t,i.data,s)):(i.compressedTreeNode=o,this.renderer.renderCompressedElements(o,t,i.data,s))}disposeElement(e,t,i,s){var o,r,a,l;i.compressedTreeNode?(r=(o=this.renderer).disposeCompressedElements)===null||r===void 0||r.call(o,i.compressedTreeNode,t,i.data,s):(l=(a=this.renderer).disposeElement)===null||l===void 0||l.call(a,e,t,i.data,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}}SJ([li],s5.prototype,"compressedTreeNodeProvider",null);function LJ(n,e){return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let i;try{i=n().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return i.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(i.element.elements)}}})}class o5 extends HL{constructor(e,t,i,s,o={}){const r=()=>this,a=s.map(l=>new s5(r,l));super(e,t,i,a,LJ(r,o))}setChildren(e,t=lt.empty(),i){this.model.setChildren(e,t,i)}createModel(e,t,i){return new yJ(e,t,i)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}var ga=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};function ov(n){return Object.assign(Object.assign({},n),{children:[],refreshPromise:void 0,stale:!0,slow:!1,collapsedByDefault:void 0})}function QC(n,e){return e.parent?e.parent===n?!0:QC(n,e.parent):!1}function xJ(n,e){return n===e||QC(n,e)||QC(e,n)}class $L{get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new $L(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class DJ{constructor(e,t,i){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,s){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,s)}renderTwistie(e,t){return e.slow?(t.classList.add(...je.asClassNameArray(we.treeItemLoading)),!0):(t.classList.remove(...je.asClassNameArray(we.treeItemLoading)),!1)}disposeElement(e,t,i,s){var o,r;(r=(o=this.renderer).disposeElement)===null||r===void 0||r.call(o,this.nodeMapper.map(e),t,i.templateData,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function iI(n){return{browserEvent:n.browserEvent,elements:n.elements.map(e=>e.element)}}function nI(n){return{browserEvent:n.browserEvent,element:n.element&&n.element.element,target:n.target}}class kJ extends qg{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function rv(n){return n instanceof qg?new kJ(n):n}class EJ{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(i=>i.element),t)}onDragStart(e,t){var i,s;(s=(i=this.dnd).onDragStart)===null||s===void 0||s.call(i,rv(e),t)}onDragOver(e,t,i,s,o=!0){return this.dnd.onDragOver(rv(e),t&&t.element,i,s)}drop(e,t,i,s){this.dnd.drop(rv(e),t&&t.element,i,s)}onDragEnd(e){var t,i;(i=(t=this.dnd).onDragEnd)===null||i===void 0||i.call(t,e)}}function r5(n){return n&&Object.assign(Object.assign({},n),{collapseByDefault:!0,identityProvider:n.identityProvider&&{getId(e){return n.identityProvider.getId(e.element)}},dnd:n.dnd&&new EJ(n.dnd),multipleSelectionController:n.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return n.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))},isSelectionRangeChangeEvent(e){return n.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))}},accessibilityProvider:n.accessibilityProvider&&Object.assign(Object.assign({},n.accessibilityProvider),{getPosInSet:void 0,getSetSize:void 0,getRole:n.accessibilityProvider.getRole?e=>n.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:n.accessibilityProvider.isChecked?e=>{var t;return!!(!((t=n.accessibilityProvider)===null||t===void 0)&&t.isChecked(e.element))}:void 0,getAriaLabel(e){return n.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return n.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:n.accessibilityProvider.getWidgetRole?()=>n.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:n.accessibilityProvider.getAriaLevel&&(e=>n.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:n.accessibilityProvider.getActiveDescendantId&&(e=>n.accessibilityProvider.getActiveDescendantId(e.element))}),filter:n.filter&&{filter(e,t){return n.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:n.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},n.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(e){return n.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}}),sorter:void 0,expandOnlyOnTwistieClick:typeof n.expandOnlyOnTwistieClick>"u"?void 0:typeof n.expandOnlyOnTwistieClick!="function"?n.expandOnlyOnTwistieClick:e=>n.expandOnlyOnTwistieClick(e.element),defaultFindVisibility:e=>e.hasChildren&&e.stale?1:typeof n.defaultFindVisibility=="number"?n.defaultFindVisibility:typeof n.defaultFindVisibility>"u"?2:n.defaultFindVisibility(e.element)})}function JC(n,e){e(n),n.children.forEach(t=>JC(t,e))}class a5{get onDidScroll(){return this.tree.onDidScroll}get onDidChangeFocus(){return ke.map(this.tree.onDidChangeFocus,iI)}get onDidChangeSelection(){return ke.map(this.tree.onDidChangeSelection,iI)}get onMouseDblClick(){return ke.map(this.tree.onMouseDblClick,nI)}get onPointer(){return ke.map(this.tree.onPointer,nI)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidDispose(){return this.tree.onDidDispose}constructor(e,t,i,s,o,r={}){this.user=e,this.dataSource=o,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new q,this._onDidChangeNodeSlowState=new q,this.nodeMapper=new OL(a=>new $L(a)),this.disposables=new Fe,this.identityProvider=r.identityProvider,this.autoExpandSingleChildren=typeof r.autoExpandSingleChildren>"u"?!1:r.autoExpandSingleChildren,this.sorter=r.sorter,this.collapseByDefault=r.collapseByDefault,this.tree=this.createTree(e,t,i,s,r),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.root=ov({element:void 0,parent:null,hasChildren:!0}),this.identityProvider&&(this.root=Object.assign(Object.assign({},this.root),{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}createTree(e,t,i,s,o){const r=new BL(i),a=s.map(c=>new DJ(c,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=r5(o)||{};return new HL(e,t,r,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}get scrollHeight(){return this.tree.scrollHeight}get renderHeight(){return this.tree.renderHeight}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}setInput(e,t){return ga(this,void 0,void 0,function*(){this.refreshPromises.forEach(s=>s.cancel()),this.refreshPromises.clear(),this.root.element=e;const i=t&&{viewState:t,focus:[],selection:[]};yield this._updateChildren(e,!0,!1,i),i&&(this.tree.setFocus(i.focus),this.tree.setSelection(i.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)})}_updateChildren(e=this.root.element,t=!0,i=!1,s,o){return ga(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new fs(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield ke.toPromise(this._onDidRender.event));const r=this.getDataNode(e);if(yield this.refreshAndRenderNode(r,t,s,o),i)try{this.tree.rerender(r)}catch{}})}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}getNode(e=this.root.element){const t=this.getDataNode(e),i=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(i)}collapse(e,t=!1){const i=this.getDataNode(e);return this.tree.collapse(i===this.root?null:i,t)}expand(e,t=!1){return ga(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new fs(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield ke.toPromise(this._onDidRender.event));const i=this.getDataNode(e);if(this.tree.hasElement(i)&&!this.tree.isCollapsible(i)||(i.refreshPromise&&(yield this.root.refreshPromise,yield ke.toPromise(this._onDidRender.event)),i!==this.root&&!i.refreshPromise&&!this.tree.isCollapsed(i)))return!1;const s=this.tree.expand(i===this.root?null:i,t);return i.refreshPromise&&(yield this.root.refreshPromise,yield ke.toPromise(this._onDidRender.event)),s})}setSelection(e,t){const i=e.map(s=>this.getDataNode(s));this.tree.setSelection(i,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const i=e.map(s=>this.getDataNode(s));this.tree.setFocus(i,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){const t=this.getDataNode(e),i=this.tree.getFirstElementChild(t===this.root?null:t);return i&&i.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new fs(this.user,`Data tree node not found: ${e}`);return t}refreshAndRenderNode(e,t,i,s){return ga(this,void 0,void 0,function*(){yield this.refreshNode(e,t,i),this.render(e,i,s)})}refreshNode(e,t,i){return ga(this,void 0,void 0,function*(){let s;if(this.subTreeRefreshPromises.forEach((o,r)=>{!s&&xJ(r,e)&&(s=o.then(()=>this.refreshNode(e,t,i)))}),s)return s;if(e!==this.root&&this.tree.getNode(e).collapsed){e.hasChildren=!!this.dataSource.hasChildren(e.element),e.stale=!0;return}return this.doRefreshSubTree(e,t,i)})}doRefreshSubTree(e,t,i){return ga(this,void 0,void 0,function*(){let s;e.refreshPromise=new Promise(o=>s=o),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const o=yield this.doRefreshNode(e,t,i);e.stale=!1,yield Ow.settled(o.map(r=>this.doRefreshSubTree(r,t,i)))}finally{s()}})}doRefreshNode(e,t,i){return ga(this,void 0,void 0,function*(){e.hasChildren=!!this.dataSource.hasChildren(e.element);let s;if(!e.hasChildren)s=Promise.resolve(lt.empty());else{const o=this.doGetChildren(e);if(Xx(o))s=Promise.resolve(o);else{const r=Pf(800);r.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},a=>null),s=o.finally(()=>r.cancel())}}try{const o=yield s;return this.setChildren(e,o,t,i)}catch(o){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),Sg(o))return[];throw o}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}})}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;const i=this.dataSource.getChildren(e.element);return Xx(i)?this.processChildren(i):(t=JT(()=>ga(this,void 0,void 0,function*(){return this.processChildren(yield i)})),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch($t))}setChildren(e,t,i,s){const o=[...t];if(e.children.length===0&&o.length===0)return[];const r=new Map,a=new Map;for(const d of e.children)if(r.set(d.element,d),this.identityProvider){const u=this.tree.isCollapsed(d);a.set(d.id,{node:d,collapsed:u})}const l=[],c=o.map(d=>{const u=!!this.dataSource.hasChildren(d);if(!this.identityProvider){const p=ov({element:d,parent:e,hasChildren:u});return u&&this.collapseByDefault&&!this.collapseByDefault(d)&&(p.collapsedByDefault=!1,l.push(p)),p}const h=this.identityProvider.getId(d).toString(),f=a.get(h);if(f){const p=f.node;return r.delete(p.element),this.nodes.delete(p.element),this.nodes.set(d,p),p.element=d,p.hasChildren=u,i?f.collapsed?(p.children.forEach(_=>JC(_,v=>this.nodes.delete(v.element))),p.children.splice(0,p.children.length),p.stale=!0):l.push(p):u&&this.collapseByDefault&&!this.collapseByDefault(d)&&(p.collapsedByDefault=!1,l.push(p)),p}const g=ov({element:d,parent:e,id:h,hasChildren:u});return s&&s.viewState.focus&&s.viewState.focus.indexOf(h)>-1&&s.focus.push(g),s&&s.viewState.selection&&s.viewState.selection.indexOf(h)>-1&&s.selection.push(g),s&&s.viewState.expanded&&s.viewState.expanded.indexOf(h)>-1?l.push(g):u&&this.collapseByDefault&&!this.collapseByDefault(d)&&(g.collapsedByDefault=!1,l.push(g)),g});for(const d of r.values())JC(d,u=>this.nodes.delete(u.element));for(const d of c)this.nodes.set(d.element,d);return e.children.splice(0,e.children.length,...c),e!==this.root&&this.autoExpandSingleChildren&&c.length===1&&l.length===0&&(c[0].collapsedByDefault=!1,l.push(c[0])),l}render(e,t,i){const s=e.children.map(r=>this.asTreeElement(r,t)),o=i&&Object.assign(Object.assign({},i),{diffIdentityProvider:i.diffIdentityProvider&&{getId(r){return i.diffIdentityProvider.getId(r.element)}}});this.tree.setChildren(e===this.root?null:e,s,o),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let i;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?i=!1:i=e.collapsedByDefault,e.collapsedByDefault=void 0,{element:e,children:e.hasChildren?lt.map(e.children,s=>this.asTreeElement(s,t)):[],collapsible:e.hasChildren,collapsed:i}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose()}}class zL{get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new zL(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class IJ{constructor(e,t,i,s){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=i,this.onDidChangeTwistieState=s,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,s){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,s)}renderCompressedElements(e,t,i,s){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,i.templateData,s)}renderTwistie(e,t){return e.slow?(t.classList.add(...je.asClassNameArray(we.treeItemLoading)),!0):(t.classList.remove(...je.asClassNameArray(we.treeItemLoading)),!1)}disposeElement(e,t,i,s){var o,r;(r=(o=this.renderer).disposeElement)===null||r===void 0||r.call(o,this.nodeMapper.map(e),t,i.templateData,s)}disposeCompressedElements(e,t,i,s){var o,r;(r=(o=this.renderer).disposeCompressedElements)===null||r===void 0||r.call(o,this.compressibleNodeMapperProvider().map(e),t,i.templateData,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=ci(this.disposables)}}function NJ(n){const e=n&&r5(n);return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getCompressedNodeKeyboardNavigationLabel(t){return n.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(i=>i.element))}})})}class TJ extends a5{constructor(e,t,i,s,o,r,a={}){super(e,t,i,o,r,a),this.compressionDelegate=s,this.compressibleNodeMapper=new OL(l=>new zL(l)),this.filter=a.filter}createTree(e,t,i,s,o){const r=new BL(i),a=s.map(c=>new IJ(c,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=NJ(o)||{};return new o5(e,t,r,a,l)}asTreeElement(e,t){return Object.assign({incompressible:this.compressionDelegate.isIncompressible(e.element)},super.asTreeElement(e,t))}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t){if(!this.identityProvider)return super.render(e,t);const i=h=>this.identityProvider.getId(h).toString(),s=h=>{const f=new Set;for(const g of h){const p=this.tree.getCompressedTreeNode(g===this.root?null:g);if(p.element)for(const _ of p.element.elements)f.add(i(_.element))}return f},o=s(this.tree.getSelection()),r=s(this.tree.getFocus());super.render(e,t);const a=this.getSelection();let l=!1;const c=this.getFocus();let d=!1;const u=h=>{const f=h.element;if(f)for(let g=0;g<f.elements.length;g++){const p=i(f.elements[g].element),_=f.elements[f.elements.length-1].element;o.has(p)&&a.indexOf(_)===-1&&(a.push(_),l=!0),r.has(p)&&c.indexOf(_)===-1&&(c.push(_),d=!0)}h.children.forEach(u)};u(this.tree.getCompressedTreeNode(e===this.root?null:e)),l&&this.setSelection(a),d&&this.setFocus(c)}processChildren(e){return this.filter&&(e=lt.filter(e,t=>{const i=this.filter.filter(t,1),s=AJ(i);if(s===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return s===1})),super.processChildren(e)}}function AJ(n){return typeof n=="boolean"?n?1:0:FL(n)?ag(n.visibility):ag(n)}class MJ extends i5{constructor(e,t,i,s,o,r={}){super(e,t,i,s,r),this.user=e,this.dataSource=o,this.identityProvider=r.identityProvider}createModel(e,t,i){return new VL(e,t,i)}}new Ie("isMac",gt,m("isMac","Whether the operating system is macOS"));new Ie("isLinux",Cn,m("isLinux","Whether the operating system is Linux"));new Ie("isWindows",is,m("isWindows","Whether the operating system is Windows"));new Ie("isWeb",Gu,m("isWeb","Whether the platform is a web browser"));new Ie("isMacNative",gt&&!Gu,m("isMacNative","Whether the operating system is macOS on a non-browser platform"));new Ie("isIOS",ll,m("isIOS","Whether the operating system is iOS"));new Ie("isMobile",H7,m("isMobile","Whether the platform is a mobile web browser"));new Ie("isDevelopment",!1,!0);new Ie("productQualityType","",m("productQualityType","Quality type of VS Code"));const l5="inputFocus";new Ie(l5,!1,m("inputFocus","Whether keyboard focus is inside an input box"));var ra=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Tt=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};const vr=ct("listService");class RJ{get lastFocusedList(){return this._lastFocusedWidget}constructor(){this.disposables=new Fe,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}setLastFocusedList(e){var t,i;e!==this._lastFocusedWidget&&((t=this._lastFocusedWidget)===null||t===void 0||t.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,(i=this._lastFocusedWidget)===null||i===void 0||i.getHTMLElement().classList.add("last-focused"))}register(e,t){if(this._hasCreatedStyleController||(this._hasCreatedStyleController=!0,new DA(so(),"").style(nh)),this.lists.some(s=>s.widget===e))throw new Error("Cannot register the same widget multiple times");const i={widget:e,extraContextKeys:t};return this.lists.push(i),e.getHTMLElement()===document.activeElement&&this.setLastFocusedList(e),lr(e.onDidFocus(()=>this.setLastFocusedList(e)),st(()=>this.lists.splice(this.lists.indexOf(i),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(s=>s!==i),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}}const dg=new Ie("listScrollAtBoundary","none");Ct.or(dg.isEqualTo("top"),dg.isEqualTo("both"));Ct.or(dg.isEqualTo("bottom"),dg.isEqualTo("both"));const c5=new Ie("listFocus",!0),d1=new Ie("listSupportsMultiselect",!0);Ct.and(c5,Ct.not(l5));const UL=new Ie("listHasSelectionOrFocus",!1),qL=new Ie("listDoubleSelection",!1),jL=new Ie("listMultiSelection",!1),u1=new Ie("listSelectionNavigation",!1),PJ=new Ie("listSupportsFind",!0),OJ=new Ie("treeElementCanCollapse",!1),FJ=new Ie("treeElementHasParent",!1),BJ=new Ie("treeElementCanExpand",!1),VJ=new Ie("treeElementHasChild",!1),WJ=new Ie("treeFindOpen",!1),d5="listTypeNavigationMode",u5="listAutomaticKeyboardNavigation";function h1(n,e){const t=n.createScoped(e.getHTMLElement());return c5.bindTo(t),t}function f1(n,e){const t=dg.bindTo(n),i=()=>{const s=e.scrollTop===0,o=e.scrollHeight-e.renderHeight-e.scrollTop<1;s&&o?t.set("both"):s?t.set("top"):o?t.set("bottom"):t.set("none")};return i(),e.onDidScroll(i)}const Qc="workbench.list.multiSelectModifier",Pm="workbench.list.openMode",Os="workbench.list.horizontalScrolling",KL="workbench.list.defaultFindMode",GL="workbench.list.typeNavigationMode",G0="workbench.list.keyboardNavigation",Ro="workbench.list.scrollByPage",ZL="workbench.list.defaultFindMatchType",ug="workbench.tree.indent",Z0="workbench.tree.renderIndentGuides",Po="workbench.list.smoothScrolling",fr="workbench.list.mouseWheelScrollSensitivity",gr="workbench.list.fastScrollSensitivity",Y0="workbench.tree.expandMode";function pr(n){return n.getValue(Qc)==="alt"}class HJ extends oe{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=pr(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(Qc)&&(this.useAltAsMultipleSelectionModifier=pr(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:SA(e)}isSelectionRangeChangeEvent(e){return LA(e)}}function g1(n,e){var t;const i=n.get(mi),s=n.get($s),o=new Fe;return[Object.assign(Object.assign({},e),{keyboardNavigationDelegate:{mightProducePrintableCharacter(a){return s.mightProducePrintableCharacter(a)}},smoothScrolling:!!i.getValue(Po),mouseWheelScrollSensitivity:i.getValue(fr),fastScrollSensitivity:i.getValue(gr),multipleSelectionController:(t=e.multipleSelectionController)!==null&&t!==void 0?t:o.add(new HJ(i)),keyboardNavigationEventFilter:UJ(s),scrollByPage:!!i.getValue(Ro)}),o]}let ey=class extends br{constructor(e,t,i,s,o,r,a,l,c){const d=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!l.getValue(Os),[u,h]=c.invokeFunction(g1,o);super(e,t,i,s,Object.assign(Object.assign({keyboardSupport:!1},u),{horizontalScrolling:d})),this.disposables.add(h),this.contextKeyService=h1(r,this),this.disposables.add(f1(this.contextKeyService,this)),this.listSupportsMultiSelect=d1.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),u1.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this.listHasSelectionOrFocus=UL.bindTo(this.contextKeyService),this.listDoubleSelection=qL.bindTo(this.contextKeyService),this.listMultiSelection=jL.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=pr(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const g=this.getSelection(),p=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(g.length>0||p.length>0),this.listMultiSelection.set(g.length>1),this.listDoubleSelection.set(g.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const g=this.getSelection(),p=this.getFocus();this.listHasSelectionOrFocus.set(g.length>0||p.length>0)})),this.disposables.add(l.onDidChangeConfiguration(g=>{g.affectsConfiguration(Qc)&&(this._useAltAsMultipleSelectionModifier=pr(l));let p={};if(g.affectsConfiguration(Os)&&this.horizontalScrolling===void 0){const _=!!l.getValue(Os);p=Object.assign(Object.assign({},p),{horizontalScrolling:_})}if(g.affectsConfiguration(Ro)){const _=!!l.getValue(Ro);p=Object.assign(Object.assign({},p),{scrollByPage:_})}if(g.affectsConfiguration(Po)){const _=!!l.getValue(Po);p=Object.assign(Object.assign({},p),{smoothScrolling:_})}if(g.affectsConfiguration(fr)){const _=l.getValue(fr);p=Object.assign(Object.assign({},p),{mouseWheelScrollSensitivity:_})}if(g.affectsConfiguration(gr)){const _=l.getValue(gr);p=Object.assign(Object.assign({},p),{fastScrollSensitivity:_})}Object.keys(p).length>0&&this.updateOptions(p)})),this.navigator=new h5(this,Object.assign({configurationService:l},o)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?Yg(e):nh)}};ey=ra([Tt(5,Et),Tt(6,vr),Tt(7,mi),Tt(8,ai)],ey);let sI=class extends zQ{constructor(e,t,i,s,o,r,a,l,c){const d=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!l.getValue(Os),[u,h]=c.invokeFunction(g1,o);super(e,t,i,s,Object.assign(Object.assign({keyboardSupport:!1},u),{horizontalScrolling:d})),this.disposables=new Fe,this.disposables.add(h),this.contextKeyService=h1(r,this),this.disposables.add(f1(this.contextKeyService,this.widget)),this.horizontalScrolling=o.horizontalScrolling,this.listSupportsMultiSelect=d1.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),u1.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this._useAltAsMultipleSelectionModifier=pr(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(o.overrideStyles),this.disposables.add(l.onDidChangeConfiguration(g=>{g.affectsConfiguration(Qc)&&(this._useAltAsMultipleSelectionModifier=pr(l));let p={};if(g.affectsConfiguration(Os)&&this.horizontalScrolling===void 0){const _=!!l.getValue(Os);p=Object.assign(Object.assign({},p),{horizontalScrolling:_})}if(g.affectsConfiguration(Ro)){const _=!!l.getValue(Ro);p=Object.assign(Object.assign({},p),{scrollByPage:_})}if(g.affectsConfiguration(Po)){const _=!!l.getValue(Po);p=Object.assign(Object.assign({},p),{smoothScrolling:_})}if(g.affectsConfiguration(fr)){const _=l.getValue(fr);p=Object.assign(Object.assign({},p),{mouseWheelScrollSensitivity:_})}if(g.affectsConfiguration(gr)){const _=l.getValue(gr);p=Object.assign(Object.assign({},p),{fastScrollSensitivity:_})}Object.keys(p).length>0&&this.updateOptions(p)})),this.navigator=new h5(this,Object.assign({configurationService:l},o)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?Yg(e):nh)}dispose(){this.disposables.dispose(),super.dispose()}};sI=ra([Tt(5,Et),Tt(6,vr),Tt(7,mi),Tt(8,ai)],sI);let oI=class extends l1{constructor(e,t,i,s,o,r,a,l,c,d){const u=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:!!c.getValue(Os),[h,f]=d.invokeFunction(g1,r);super(e,t,i,s,o,Object.assign(Object.assign({keyboardSupport:!1},h),{horizontalScrolling:u})),this.disposables.add(f),this.contextKeyService=h1(a,this),this.disposables.add(f1(this.contextKeyService,this)),this.listSupportsMultiSelect=d1.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),u1.bindTo(this.contextKeyService).set(!!r.selectionNavigation),this.listHasSelectionOrFocus=UL.bindTo(this.contextKeyService),this.listDoubleSelection=qL.bindTo(this.contextKeyService),this.listMultiSelection=jL.bindTo(this.contextKeyService),this.horizontalScrolling=r.horizontalScrolling,this._useAltAsMultipleSelectionModifier=pr(c),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),this.updateStyles(r.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const p=this.getSelection(),_=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(p.length>0||_.length>0),this.listMultiSelection.set(p.length>1),this.listDoubleSelection.set(p.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const p=this.getSelection(),_=this.getFocus();this.listHasSelectionOrFocus.set(p.length>0||_.length>0)})),this.disposables.add(c.onDidChangeConfiguration(p=>{p.affectsConfiguration(Qc)&&(this._useAltAsMultipleSelectionModifier=pr(c));let _={};if(p.affectsConfiguration(Os)&&this.horizontalScrolling===void 0){const v=!!c.getValue(Os);_=Object.assign(Object.assign({},_),{horizontalScrolling:v})}if(p.affectsConfiguration(Ro)){const v=!!c.getValue(Ro);_=Object.assign(Object.assign({},_),{scrollByPage:v})}if(p.affectsConfiguration(Po)){const v=!!c.getValue(Po);_=Object.assign(Object.assign({},_),{smoothScrolling:v})}if(p.affectsConfiguration(fr)){const v=c.getValue(fr);_=Object.assign(Object.assign({},_),{mouseWheelScrollSensitivity:v})}if(p.affectsConfiguration(gr)){const v=c.getValue(gr);_=Object.assign(Object.assign({},_),{fastScrollSensitivity:v})}Object.keys(_).length>0&&this.updateOptions(_)})),this.navigator=new $J(this,Object.assign({configurationService:c},r)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?Yg(e):nh)}dispose(){this.disposables.dispose(),super.dispose()}};oI=ra([Tt(6,Et),Tt(7,vr),Tt(8,mi),Tt(9,ai)],oI);class YL extends oe{constructor(e,t){var i;super(),this.widget=e,this._onDidOpen=this._register(new q),this.onDidOpen=this._onDidOpen.event,this._register(ke.filter(this.widget.onDidChangeSelection,s=>s.browserEvent instanceof KeyboardEvent)(s=>this.onSelectionFromKeyboard(s))),this._register(this.widget.onPointer(s=>this.onPointer(s.element,s.browserEvent))),this._register(this.widget.onMouseDblClick(s=>this.onMouseDblClick(s.element,s.browserEvent))),typeof(t==null?void 0:t.openOnSingleClick)!="boolean"&&(t!=null&&t.configurationService)?(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(Pm))!=="doubleClick",this._register(t==null?void 0:t.configurationService.onDidChangeConfiguration(s=>{s.affectsConfiguration(Pm)&&(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(Pm))!=="doubleClick")}))):this.openOnSingleClick=(i=t==null?void 0:t.openOnSingleClick)!==null&&i!==void 0?i:!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,i=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,s=typeof t.pinned=="boolean"?t.pinned:!i,o=!1;this._open(this.getSelectedElement(),i,s,o,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const s=t.button===1,o=!0,r=s,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,o,r,a,t)}onMouseDblClick(e,t){if(!t)return;const i=t.target;if(i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&t.offsetX<16)return;const o=!1,r=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,o,r,a,t)}_open(e,t,i,s,o){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:i,revealIfVisible:!0},sideBySide:s,element:e,browserEvent:o})}}class h5 extends YL{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class $J extends YL{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class zJ extends YL{constructor(e,t){super(e,t)}getSelectedElement(){var e;return(e=this.widget.getSelection()[0])!==null&&e!==void 0?e:void 0}}function UJ(n){let e=!1;return t=>{if(t.toKeyCodeChord().isModifierKey())return!1;if(e)return e=!1,!1;const i=n.softDispatch(t,t.target);return i.kind===1?(e=!0,!1):(e=!1,i.kind===0)}}let rI=class extends HL{constructor(e,t,i,s,o,r,a,l,c){const{options:d,getTypeNavigationMode:u,disposable:h}=r.invokeFunction(Qg,o);super(e,t,i,s,d),this.disposables.add(h),this.internals=new Ac(this,o,u,o.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};rI=ra([Tt(5,ai),Tt(6,Et),Tt(7,vr),Tt(8,mi)],rI);let aI=class extends o5{constructor(e,t,i,s,o,r,a,l,c){const{options:d,getTypeNavigationMode:u,disposable:h}=r.invokeFunction(Qg,o);super(e,t,i,s,d),this.disposables.add(h),this.internals=new Ac(this,o,u,o.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};aI=ra([Tt(5,ai),Tt(6,Et),Tt(7,vr),Tt(8,mi)],aI);let lI=class extends MJ{constructor(e,t,i,s,o,r,a,l,c,d){const{options:u,getTypeNavigationMode:h,disposable:f}=a.invokeFunction(Qg,r);super(e,t,i,s,o,u),this.disposables.add(f),this.internals=new Ac(this,r,h,r.overrideStyles,l,c,d),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles!==void 0&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};lI=ra([Tt(6,ai),Tt(7,Et),Tt(8,vr),Tt(9,mi)],lI);let cI=class extends a5{get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,i,s,o,r,a,l,c,d){const{options:u,getTypeNavigationMode:h,disposable:f}=a.invokeFunction(Qg,r);super(e,t,i,s,o,u),this.disposables.add(f),this.internals=new Ac(this,r,h,r.overrideStyles,l,c,d),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};cI=ra([Tt(6,ai),Tt(7,Et),Tt(8,vr),Tt(9,mi)],cI);let dI=class extends TJ{constructor(e,t,i,s,o,r,a,l,c,d,u){const{options:h,getTypeNavigationMode:f,disposable:g}=l.invokeFunction(Qg,a);super(e,t,i,s,o,r,h),this.disposables.add(g),this.internals=new Ac(this,a,f,a.overrideStyles,c,d,u),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};dI=ra([Tt(7,ai),Tt(8,Et),Tt(9,vr),Tt(10,mi)],dI);function f5(n){const e=n.getValue(KL);if(e==="highlight")return rr.Highlight;if(e==="filter")return rr.Filter;const t=n.getValue(G0);if(t==="simple"||t==="highlight")return rr.Highlight;if(t==="filter")return rr.Filter}function g5(n){const e=n.getValue(ZL);if(e==="fuzzy")return Tc.Fuzzy;if(e==="contiguous")return Tc.Contiguous}function Qg(n,e){var t;const i=n.get(mi),s=n.get(Gg),o=n.get(Et),r=n.get(ai),a=()=>{const f=o.getContextKeyValue(d5);if(f==="automatic")return tr.Automatic;if(f==="trigger"||o.getContextKeyValue(u5)===!1)return tr.Trigger;const p=i.getValue(GL);if(p==="automatic")return tr.Automatic;if(p==="trigger")return tr.Trigger},l=e.horizontalScrolling!==void 0?e.horizontalScrolling:!!i.getValue(Os),[c,d]=r.invokeFunction(g1,e),u=e.paddingBottom,h=e.renderIndentGuides!==void 0?e.renderIndentGuides:i.getValue(Z0);return{getTypeNavigationMode:a,disposable:d,options:Object.assign(Object.assign({keyboardSupport:!1},c),{indent:typeof i.getValue(ug)=="number"?i.getValue(ug):void 0,renderIndentGuides:h,smoothScrolling:!!i.getValue(Po),defaultFindMode:f5(i),defaultFindMatchType:g5(i),horizontalScrolling:l,scrollByPage:!!i.getValue(Ro),paddingBottom:u,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:(t=e.expandOnlyOnTwistieClick)!==null&&t!==void 0?t:i.getValue(Y0)==="doubleClick",contextViewProvider:s,findWidgetStyles:LQ})}}let Ac=class{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,i,s,o,r,a){var l;this.tree=e,this.disposables=[],this.contextKeyService=h1(o,e),this.disposables.push(f1(this.contextKeyService,e)),this.listSupportsMultiSelect=d1.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),u1.bindTo(this.contextKeyService).set(!!t.selectionNavigation),this.listSupportFindWidget=PJ.bindTo(this.contextKeyService),this.listSupportFindWidget.set((l=t.findWidgetEnabled)!==null&&l!==void 0?l:!0),this.hasSelectionOrFocus=UL.bindTo(this.contextKeyService),this.hasDoubleSelection=qL.bindTo(this.contextKeyService),this.hasMultiSelection=jL.bindTo(this.contextKeyService),this.treeElementCanCollapse=OJ.bindTo(this.contextKeyService),this.treeElementHasParent=FJ.bindTo(this.contextKeyService),this.treeElementCanExpand=BJ.bindTo(this.contextKeyService),this.treeElementHasChild=VJ.bindTo(this.contextKeyService),this.treeFindOpen=WJ.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=pr(a),this.updateStyleOverrides(s);const d=()=>{const h=e.getFocus()[0];if(!h)return;const f=e.getNode(h);this.treeElementCanCollapse.set(f.collapsible&&!f.collapsed),this.treeElementHasParent.set(!!e.getParentElement(h)),this.treeElementCanExpand.set(f.collapsible&&f.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(h))},u=new Set;u.add(d5),u.add(u5),this.disposables.push(this.contextKeyService,r.register(e),e.onDidChangeSelection(()=>{const h=e.getSelection(),f=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(h.length>0||f.length>0),this.hasMultiSelection.set(h.length>1),this.hasDoubleSelection.set(h.length===2)})}),e.onDidChangeFocus(()=>{const h=e.getSelection(),f=e.getFocus();this.hasSelectionOrFocus.set(h.length>0||f.length>0),d()}),e.onDidChangeCollapseState(d),e.onDidChangeModel(d),e.onDidChangeFindOpenState(h=>this.treeFindOpen.set(h)),a.onDidChangeConfiguration(h=>{let f={};if(h.affectsConfiguration(Qc)&&(this._useAltAsMultipleSelectionModifier=pr(a)),h.affectsConfiguration(ug)){const g=a.getValue(ug);f=Object.assign(Object.assign({},f),{indent:g})}if(h.affectsConfiguration(Z0)&&t.renderIndentGuides===void 0){const g=a.getValue(Z0);f=Object.assign(Object.assign({},f),{renderIndentGuides:g})}if(h.affectsConfiguration(Po)){const g=!!a.getValue(Po);f=Object.assign(Object.assign({},f),{smoothScrolling:g})}if(h.affectsConfiguration(KL)||h.affectsConfiguration(G0)){const g=f5(a);f=Object.assign(Object.assign({},f),{defaultFindMode:g})}if(h.affectsConfiguration(GL)||h.affectsConfiguration(G0)){const g=i();f=Object.assign(Object.assign({},f),{typeNavigationMode:g})}if(h.affectsConfiguration(ZL)){const g=g5(a);f=Object.assign(Object.assign({},f),{defaultFindMatchType:g})}if(h.affectsConfiguration(Os)&&t.horizontalScrolling===void 0){const g=!!a.getValue(Os);f=Object.assign(Object.assign({},f),{horizontalScrolling:g})}if(h.affectsConfiguration(Ro)){const g=!!a.getValue(Ro);f=Object.assign(Object.assign({},f),{scrollByPage:g})}if(h.affectsConfiguration(Y0)&&t.expandOnlyOnTwistieClick===void 0&&(f=Object.assign(Object.assign({},f),{expandOnlyOnTwistieClick:a.getValue(Y0)==="doubleClick"})),h.affectsConfiguration(fr)){const g=a.getValue(fr);f=Object.assign(Object.assign({},f),{mouseWheelScrollSensitivity:g})}if(h.affectsConfiguration(gr)){const g=a.getValue(gr);f=Object.assign(Object.assign({},f),{fastScrollSensitivity:g})}Object.keys(f).length>0&&e.updateOptions(f)}),this.contextKeyService.onDidChangeContext(h=>{h.affectsSome(u)&&e.updateOptions({typeNavigationMode:i()})})),this.navigator=new zJ(e,Object.assign({configurationService:a},t)),this.disposables.push(this.navigator)}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){this.tree.style(e?Yg(e):nh)}dispose(){this.disposables=ci(this.disposables)}};Ac=ra([Tt(4,Et),Tt(5,vr),Tt(6,mi)],Ac);const qJ=zi.as($c.Configuration);qJ.registerConfiguration({id:"workbench",order:7,title:m("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[Qc]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[m("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),m("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:m({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[Pm]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:m({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[Os]:{type:"boolean",default:!1,description:m("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[Ro]:{type:"boolean",default:!1,description:m("list.scrollByPage","Controls whether clicks in the scrollbar scroll page by page.")},[ug]:{type:"number",default:8,minimum:4,maximum:40,description:m("tree indent setting","Controls tree indentation in pixels.")},[Z0]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:m("render tree indent guides","Controls whether the tree should render indent guides.")},[Po]:{type:"boolean",default:!1,description:m("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[fr]:{type:"number",default:1,markdownDescription:m("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[gr]:{type:"number",default:5,markdownDescription:m("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[KL]:{type:"string",enum:["highlight","filter"],enumDescriptions:[m("defaultFindModeSettingKey.highlight","Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),m("defaultFindModeSettingKey.filter","Filter elements when searching.")],default:"highlight",description:m("defaultFindModeSettingKey","Controls the default find mode for lists and trees in the workbench.")},[G0]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[m("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),m("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),m("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:m("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:m("keyboardNavigationSettingKeyDeprecated","Please use 'workbench.list.defaultFindMode' and	'workbench.list.typeNavigationMode' instead.")},[ZL]:{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[m("defaultFindMatchTypeSettingKey.fuzzy","Use fuzzy matching when searching."),m("defaultFindMatchTypeSettingKey.contiguous","Use contiguous matching when searching.")],default:"fuzzy",description:m("defaultFindMatchTypeSettingKey","Controls the type of matching used when searching lists and trees in the workbench.")},[Y0]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:m("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[GL]:{type:"string",enum:["automatic","trigger"],default:"automatic",description:m("typeNavigationMode","Controls the how type navigation works in lists and trees in the workbench. When set to 'trigger', type navigation begins once the 'list.triggerTypeNavigation' command is run.")}}});var ty;(function(n){n[n.PRESERVE=0]="PRESERVE",n[n.LAST=1]="LAST"})(ty||(ty={}));const p5={Quickaccess:"workbench.contributions.quickaccess"};class jJ{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,i)=>i.prefix.length-t.prefix.length),st(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return b7([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(i=>e.startsWith(i.prefix))||void 0||this.defaultProvider}}zi.add(p5.Quickaccess,new jJ);const KJ={ctrlCmd:!1,alt:!1};var hg;(function(n){n[n.Blur=1]="Blur",n[n.Gesture=2]="Gesture",n[n.Other=3]="Other"})(hg||(hg={}));var Uo;(function(n){n[n.NONE=0]="NONE",n[n.FIRST=1]="FIRST",n[n.SECOND=2]="SECOND",n[n.LAST=3]="LAST"})(Uo||(Uo={}));const m5=ct("quickInputService");var GJ=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},uI=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let iy=class extends oe{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=zi.as(p5.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,i){var s;const[o,r]=this.getOrInstantiateProvider(e),a=this.visibleQuickAccess,l=a==null?void 0:a.descriptor;if(a&&r&&l===r){e!==r.prefix&&!(i!=null&&i.preserveValue)&&(a.picker.value=e),this.adjustValueSelection(a.picker,r,i);return}if(r&&!(i!=null&&i.preserveValue)){let f;if(a&&l&&l!==r){const g=a.value.substr(l.prefix.length);g&&(f=`${r.prefix}${g}`)}if(!f){const g=o==null?void 0:o.defaultFilterValue;g===ty.LAST?f=this.lastAcceptedPickerValues.get(r):typeof g=="string"&&(f=`${r.prefix}${g}`)}typeof f=="string"&&(e=f)}const c=new Fe,d=c.add(this.quickInputService.createQuickPick());d.value=e,this.adjustValueSelection(d,r,i),d.placeholder=r==null?void 0:r.placeholder,d.quickNavigate=i==null?void 0:i.quickNavigateConfiguration,d.hideInput=!!d.quickNavigate&&!a,(typeof(i==null?void 0:i.itemActivation)=="number"||i!=null&&i.quickNavigateConfiguration)&&(d.itemActivation=(s=i==null?void 0:i.itemActivation)!==null&&s!==void 0?s:Uo.SECOND),d.contextKey=r==null?void 0:r.contextKey,d.filterValue=f=>f.substring(r?r.prefix.length:0);let u;t&&(u=new t4,c.add(Sc(d.onWillAccept)(f=>{f.veto(),d.hide()}))),c.add(this.registerPickerListeners(d,o,r,e,i==null?void 0:i.providerOptions));const h=c.add(new vl);if(o&&c.add(o.provide(d,h.token,i==null?void 0:i.providerOptions)),Sc(d.onDidHide)(()=>{d.selectedItems.length===0&&h.cancel(),c.dispose(),u==null||u.complete(d.selectedItems.slice(0))}),d.show(),t)return u==null?void 0:u.p}adjustValueSelection(e,t,i){var s;let o;i!=null&&i.preserveValue?o=[e.value.length,e.value.length]:o=[(s=t==null?void 0:t.prefix.length)!==null&&s!==void 0?s:0,e.value.length],e.valueSelection=o}registerPickerListeners(e,t,i,s,o){const r=new Fe,a=this.visibleQuickAccess={picker:e,descriptor:i,value:s};return r.add(st(()=>{a===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),r.add(e.onDidChangeValue(l=>{const[c]=this.getOrInstantiateProvider(l);c!==t?this.show(l,{preserveValue:!0,providerOptions:o}):a.value=l})),i&&r.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(i,e.value)})),r}getOrInstantiateProvider(e){const t=this.registry.getQuickAccessProvider(e);if(!t)return[void 0,void 0];let i=this.mapProviderToDescriptor.get(t);return i||(i=this.instantiationService.createInstance(t.ctor),this.mapProviderToDescriptor.set(t,i)),[i,t]}};iy=GJ([uI(0,m5),uI(1,ai)],iy);J.white.toString(),J.white.toString();class hI extends oe{get onDidClick(){return this._onDidClick.event}constructor(e,t){super(),this._label="",this._onDidClick=this._register(new q),this.options=t,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.classList.toggle("secondary",!!t.secondary);const i=t.secondary?t.buttonSecondaryBackground:t.buttonBackground,s=t.secondary?t.buttonSecondaryForeground:t.buttonForeground;this._element.style.color=s||"",this._element.style.backgroundColor=i||"",t.supportShortLabel&&(this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),e.appendChild(this._element),this._register(Ot.addTarget(this._element)),[_e.CLICK,It.Tap].forEach(o=>{this._register(ee(this._element,o,r=>{if(!this.enabled){qe.stop(r);return}this._onDidClick.fire(r)}))}),this._register(ee(this._element,_e.KEY_DOWN,o=>{const r=new Wt(o);let a=!1;this.enabled&&(r.equals(3)||r.equals(10))?(this._onDidClick.fire(o),a=!0):r.equals(9)&&(this._element.blur(),a=!0),a&&qe.stop(r,!0)})),this._register(ee(this._element,_e.MOUSE_OVER,o=>{this._element.classList.contains("disabled")||this.updateBackground(!0)})),this._register(ee(this._element,_e.MOUSE_OUT,o=>{this.updateBackground(!1)})),this.focusTracker=this._register(H_(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.updateBackground(!0)})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.updateBackground(!1)}))}dispose(){super.dispose(),this._element.remove()}getContentElements(e){const t=[];for(let i of _c(e))if(typeof i=="string"){if(i=i.trim(),i==="")continue;const s=document.createElement("span");s.textContent=i,t.push(s)}else t.push(i);return t}updateBackground(e){let t;this.options.secondary?t=e?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:t=e?this.options.buttonHoverBackground:this.options.buttonBackground,t&&(this._element.style.backgroundColor=t)}get element(){return this._element}set label(e){var t;if(this._label===e||Em(this._label)&&Em(e)&&DZ(this._label,e))return;this._element.classList.add("monaco-text-button");const i=this.options.supportShortLabel?this._labelElement:this._element;if(Em(e)){const s=vA(e,{inline:!0});s.dispose();const o=(t=s.element.querySelector("p"))===null||t===void 0?void 0:t.innerHTML;if(o){const r=D4(o,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});i.innerHTML=r}else Mn(i)}else this.options.supportIcons?Mn(i,...this.getContentElements(e)):i.textContent=e;typeof this.options.title=="string"?this._element.title=this.options.title:this.options.title&&(this._element.title=HZ(e)),this._label=e}get label(){return this._label}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}}class fI{constructor(e,t,i){this.options=t,this.styles=i,this.count=0,this.element=De(e,Be(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){var e,t;this.element.textContent=yw(this.countFormat,this.count),this.element.title=yw(this.titleFormat,this.count),this.element.style.backgroundColor=(e=this.styles.badgeBackground)!==null&&e!==void 0?e:"",this.element.style.color=(t=this.styles.badgeForeground)!==null&&t!==void 0?t:"",this.styles.badgeBorder&&(this.element.style.border=`1px solid ${this.styles.badgeBorder}`)}}const gI="done",pI="active",av="infinite",lv="infinite-long-running",mI="discrete";class p1 extends oe{constructor(e,t){super(),this.workedVal=0,this.showDelayedScheduler=this._register(new Sn(()=>V4(this.element),0)),this.longRunningScheduler=this._register(new Sn(()=>this.infiniteLongRunning(),p1.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e,t)}create(e,t){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=(t==null?void 0:t.progressBarBackground)||"#0E70C0",this.element.appendChild(this.bit)}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(pI,av,lv,mI),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel()}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(gI),this.element.classList.contains(av)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(mI,gI,lv),this.element.classList.add(pI,av),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(lv)}getContainer(){return this.element}}p1.LONG_RUNNING_INFINITE_THRESHOLD=1e4;const ZJ=Be;class YJ extends oe{constructor(e,t,i){super(),this.parent=e,this.onKeyDown=o=>ee(this.findInput.inputBox.inputElement,_e.KEY_DOWN,r=>{o(new Wt(r))}),this.onMouseDown=o=>ee(this.findInput.inputBox.inputElement,_e.MOUSE_DOWN,r=>{o(new Lo(r))}),this.onDidChange=o=>this.findInput.onDidChange(o),this.container=De(this.parent,ZJ(".quick-input-box")),this.findInput=this._register(new aJ(this.container,void 0,{label:"",inputBoxStyles:t,toggleStyles:i}));const s=this.findInput.inputBox.inputElement;s.role="combobox",s.ariaHasPopup="menu",s.ariaAutoComplete="list",s.ariaExpanded="true"}get value(){return this.findInput.getValue()}set value(e){this.findInput.setValue(e)}select(e=null){this.findInput.inputBox.select(e)}isSelectionAtEnd(){return this.findInput.inputBox.isSelectionAtEnd()}get placeholder(){return this.findInput.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.findInput.inputBox.setPlaceHolder(e)}get password(){return this.findInput.inputBox.inputElement.type==="password"}set password(e){this.findInput.inputBox.inputElement.type=e?"password":"text"}set enabled(e){this.findInput.inputBox.inputElement.toggleAttribute("readonly",!e)}set toggles(e){this.findInput.setAdditionalToggles(e)}setAttribute(e,t){this.findInput.inputBox.inputElement.setAttribute(e,t)}showDecoration(e){e===wi.Ignore?this.findInput.clearMessage():this.findInput.showMessage({type:e===wi.Info?1:e===wi.Warning?2:3,content:""})}stylesForType(e){return this.findInput.inputBox.stylesForType(e===wi.Info?1:e===wi.Warning?2:3)}setFocus(){this.findInput.focus()}layout(){this.findInput.inputBox.layout()}}class vc{constructor(e,t){var i;this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=(i=t==null?void 0:t.supportIcons)!==null&&i!==void 0?i:!1,this.domNode=De(e,Be("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,t=[],i="",s){e||(e=""),s&&(e=vc.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===i&&bs(this.highlights,t))&&(this.text=e,this.title=i,this.highlights=t,this.render())}render(){const e=[];let t=0;for(const i of this.highlights){if(i.end===i.start)continue;if(t<i.start){const r=this.text.substring(t,i.start);this.supportIcons?e.push(..._c(r)):e.push(r),t=i.start}const s=this.text.substring(t,i.end),o=Be("span.highlight",void 0,...this.supportIcons?_c(s):[s]);i.extraClasses&&o.classList.add(...i.extraClasses),e.push(o),t=i.end}if(t<this.text.length){const i=this.text.substring(t);this.supportIcons?e.push(..._c(i)):e.push(i)}Mn(this.domNode,...e),this.title?this.domNode.title=this.title:this.domNode.removeAttribute("title"),this.didEverRender=!0}static escapeNewLines(e,t){let i=0,s=0;return e.replace(/\r\n|\r|\n/g,(o,r)=>{s=o===`\r
`?-1:0,r+=i;for(const a of t)a.end<=r||(a.start>=r&&(a.start+=s),a.end>=r&&(a.end+=s));return i+=s,"⏎"})}}class cv{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set className(e){this.disposed||e===this._className||(this._className=e,this._element.className=e)}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class _I extends oe{constructor(e,t){super(),this.customHovers=new Map,this.creationOptions=t,this.domNode=this._register(new cv(De(e,Be(".monaco-icon-label")))),this.labelContainer=De(this.domNode.element,Be(".monaco-icon-label-container"));const i=De(this.labelContainer,Be("span.monaco-icon-name-container"));t!=null&&t.supportHighlights||t!=null&&t.supportIcons?this.nameNode=new JJ(i,!!t.supportIcons):this.nameNode=new XJ(i),this.hoverDelegate=t==null?void 0:t.hoverDelegate}get element(){return this.domNode.element}setLabel(e,t,i){const s=["monaco-icon-label"],o=["monaco-icon-label-container"];let r="";if(i&&(i.extraClasses&&s.push(...i.extraClasses),i.italic&&s.push("italic"),i.strikethrough&&s.push("strikethrough"),i.disabledCommand&&o.push("disabled"),i.title&&(r+=i.title)),this.domNode.className=s.join(" "),this.domNode.element.setAttribute("aria-label",r),this.labelContainer.className=o.join(" "),this.setupHover(i!=null&&i.descriptionTitle?this.labelContainer:this.element,i==null?void 0:i.title),this.nameNode.setLabel(e,i),t||this.descriptionNode){const a=this.getOrCreateDescriptionNode();a instanceof vc?(a.set(t||"",i?i.descriptionMatches:void 0,void 0,i==null?void 0:i.labelEscapeNewLines),this.setupHover(a.element,i==null?void 0:i.descriptionTitle)):(a.textContent=t&&(i!=null&&i.labelEscapeNewLines)?vc.escapeNewLines(t,[]):t||"",this.setupHover(a.element,(i==null?void 0:i.descriptionTitle)||""),a.empty=!t)}}setupHover(e,t){const i=this.customHovers.get(e);if(i&&(i.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(!this.hoverDelegate)IZ(e,t);else{const s=mA(this.hoverDelegate,e,t);s&&this.customHovers.set(e,s)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}getOrCreateDescriptionNode(){var e;if(!this.descriptionNode){const t=this._register(new cv(De(this.labelContainer,Be("span.monaco-icon-description-container"))));!((e=this.creationOptions)===null||e===void 0)&&e.supportDescriptionHighlights?this.descriptionNode=new vc(De(t.element,Be("span.label-description")),{supportIcons:!!this.creationOptions.supportIcons}):this.descriptionNode=this._register(new cv(De(t.element,Be("span.label-description"))))}return this.descriptionNode}}class XJ{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&bs(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=De(this.container,Be("a.label-name",{id:t==null?void 0:t.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let i=0;i<e.length;i++){const s=e[i],o=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${i}`;De(this.container,Be("a.label-name",{id:o,"data-icon-label-count":e.length,"data-icon-label-index":i,role:"treeitem"},s)),i<e.length-1&&De(this.container,Be("span.label-separator",void 0,(t==null?void 0:t.separator)||"/"))}}}}function QJ(n,e,t){if(!t)return;let i=0;return n.map(s=>{const o={start:i,end:i+s.length},r=t.map(a=>Zi.intersect(o,a)).filter(a=>!Zi.isEmpty(a)).map(({start:a,end:l})=>({start:a-i,end:l-i}));return i=o.end+e.length,r})}class JJ{constructor(e,t){this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&bs(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=new vc(De(this.container,Be("a.label-name",{id:t==null?void 0:t.domId})),{supportIcons:this.supportIcons})),this.singleLabel.set(e,t==null?void 0:t.matches,void 0,t==null?void 0:t.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const i=(t==null?void 0:t.separator)||"/",s=QJ(e,i,t==null?void 0:t.matches);for(let o=0;o<e.length;o++){const r=e[o],a=s?s[o]:void 0,l=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${o}`,c=Be("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":o,role:"treeitem"});new vc(De(this.container,c),{supportIcons:this.supportIcons}).set(r,a,void 0,t==null?void 0:t.labelEscapeNewLines),o<e.length-1&&De(c,Be("span.label-separator",void 0,i))}}}}const Jp=Be;class XL{constructor(e,t,i){this.os=t,this.keyElements=new Set,this.options=i||Object.create(null);const s=this.options.keybindingLabelForeground;this.domNode=De(e,Jp(".monaco-keybinding")),s&&(this.domNode.style.color=s),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&XL.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){var e;if(this.clear(),this.keybinding){const t=this.keybinding.getChords();t[0]&&this.renderChord(this.domNode,t[0],this.matches?this.matches.firstPart:null);for(let s=1;s<t.length;s++)De(this.domNode,Jp("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,t[s],this.matches?this.matches.chordPart:null);const i=(e=this.options.disableTitle)!==null&&e!==void 0&&e?void 0:this.keybinding.getAriaLabel()||void 0;i!==void 0?this.domNode.title=i:this.domNode.removeAttribute("title")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){Vs(this.domNode),this.keyElements.clear()}renderChord(e,t,i){const s=ML.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,s.ctrlKey,!!(i!=null&&i.ctrlKey),s.separator),t.shiftKey&&this.renderKey(e,s.shiftKey,!!(i!=null&&i.shiftKey),s.separator),t.altKey&&this.renderKey(e,s.altKey,!!(i!=null&&i.altKey),s.separator),t.metaKey&&this.renderKey(e,s.metaKey,!!(i!=null&&i.metaKey),s.separator);const o=t.keyLabel;o&&this.renderKey(e,o,!!(i!=null&&i.keyCode),"")}renderKey(e,t,i,s){De(e,this.createKeyElement(t,i?".highlight":"")),s&&De(e,Jp("span.monaco-keybinding-key-separator",void 0,s))}renderUnbound(e){De(e,this.createKeyElement(m("unbound","Unbound")))}createKeyElement(e,t=""){const i=Jp("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(i),this.options.keybindingLabelBackground&&(i.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(i.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(i.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(i.style.boxShadow=`inset 0 -1px 0 ${this.options.keybindingLabelShadow}`),i}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&bs(e.firstPart,t.firstPart)&&bs(e.chordPart,t.chordPart)}}const bI=new Dg(()=>{const n=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:n,collatorIsNumeric:n.resolvedOptions().numeric}});function eee(n,e,t=!1){const i=n||"",s=e||"",o=bI.value.collator.compare(i,s);return bI.value.collatorIsNumeric&&o===0&&i!==s?i<s?-1:1:o}function tee(n,e,t){const i=n.toLowerCase(),s=e.toLowerCase(),o=iee(n,e,t);if(o)return o;const r=i.endsWith(t),a=s.endsWith(t);if(r!==a)return r?-1:1;const l=eee(i,s);return l!==0?l:i.localeCompare(s)}function iee(n,e,t){const i=n.toLowerCase(),s=e.toLowerCase(),o=i.startsWith(t),r=s.startsWith(t);if(o!==r)return o?-1:1;if(o&&r){if(i.length<s.length)return-1;if(i.length>s.length)return 1}return 0}var nee=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o};class _5{constructor(e){this.nodes=e}toString(){return this.nodes.map(e=>typeof e=="string"?e:e.label).join("")}}nee([li],_5.prototype,"toString",null);const see=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi;function oee(n){const e=[];let t=0,i;for(;i=see.exec(n);){i.index-t>0&&e.push(n.substring(t,i.index));const[,s,o,,r]=i;r?e.push({label:s,href:o,title:r}):e.push({label:s,href:o}),t=i.index+i[0].length}return t<n.length&&e.push(n.substring(t)),new _5(e)}const dv={},ree=new bA("quick-input-button-icon-");function ny(n){if(!n)return;let e;const t=n.dark.toString();return dv[t]?e=dv[t]:(e=ree.nextId(),y2(`.${e}, .hc-light .${e}`,`background-image: ${fl(n.light||n.dark)}`),y2(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${fl(n.dark)}`),dv[t]=e),e}function aee(n,e,t){Mn(e);const i=oee(n);let s=0;for(const o of i.nodes)if(typeof o=="string")e.append(..._c(o));else{let r=o.title;!r&&o.href.startsWith("command:")?r=m("executeCommand","Click to execute command '{0}'",o.href.substring(8)):r||(r=o.href);const a=Be("a",{href:o.href,title:r,tabIndex:s++},o.label);a.style.textDecoration="underline";const l=f=>{DH(f)&&qe.stop(f,!0),t.callback(o.href)},c=t.disposables.add(new Qe(a,_e.CLICK)).event,d=t.disposables.add(new Qe(a,_e.KEY_DOWN)).event,u=t.disposables.add(ke.chain(d)).filter(f=>{const g=new Wt(f);return g.equals(10)||g.equals(3)}).event;t.disposables.add(Ot.addTarget(a));const h=t.disposables.add(new Qe(a,It.Tap)).event;ke.any(c,h,u)(l,null,t.disposables),e.appendChild(a)}}var b5=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},vI=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const go=Be;class lee{constructor(e,t,i,s,o,r,a){var l,c,d;this._checked=!1,this._hidden=!1,this.hasCheckbox=s,this.index=i,this.fireButtonTriggered=o,this.fireSeparatorButtonTriggered=r,this._onChecked=a,this.onChecked=s?ke.map(ke.filter(this._onChecked.event,u=>u.listElement===this),u=>u.checked):ke.None,e.type==="separator"?this._separator=e:(this.item=e,t&&t.type==="separator"&&!t.buttons&&(this._separator=t),this.saneDescription=this.item.description,this.saneDetail=this.item.detail,this._labelHighlights=(l=this.item.highlights)===null||l===void 0?void 0:l.label,this._descriptionHighlights=(c=this.item.highlights)===null||c===void 0?void 0:c.description,this._detailHighlights=(d=this.item.highlights)===null||d===void 0?void 0:d.detail,this.saneTooltip=this.item.tooltip),this._init=new Dg(()=>{var u;const h=(u=e.label)!==null&&u!==void 0?u:"",f=Uh(h).text.trim(),g=e.ariaLabel||[h,this.saneDescription,this.saneDetail].map(p=>xZ(p)).filter(p=>!!p).join(", ");return{saneLabel:h,saneSortLabel:f,saneAriaLabel:g}})}get saneLabel(){return this._init.value.saneLabel}get saneSortLabel(){return this._init.value.saneSortLabel}get saneAriaLabel(){return this._init.value.saneAriaLabel}get element(){return this._element}set element(e){this._element=e}get hidden(){return this._hidden}set hidden(e){this._hidden=e}get checked(){return this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire({listElement:this,checked:e}))}get separator(){return this._separator}set separator(e){this._separator=e}get labelHighlights(){return this._labelHighlights}set labelHighlights(e){this._labelHighlights=e}get descriptionHighlights(){return this._descriptionHighlights}set descriptionHighlights(e){this._descriptionHighlights=e}get detailHighlights(){return this._detailHighlights}set detailHighlights(e){this._detailHighlights=e}}class Jg{constructor(e){this.themeService=e}get templateId(){return Jg.ID}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=[],t.toDisposeTemplate=[],t.entry=De(e,go(".quick-input-list-entry"));const i=De(t.entry,go("label.quick-input-list-label"));t.toDisposeTemplate.push(Ci(i,_e.CLICK,c=>{t.checkbox.offsetParent||c.preventDefault()})),t.checkbox=De(i,go("input.quick-input-list-checkbox")),t.checkbox.type="checkbox",t.toDisposeTemplate.push(Ci(t.checkbox,_e.CHANGE,c=>{t.element.checked=t.checkbox.checked}));const s=De(i,go(".quick-input-list-rows")),o=De(s,go(".quick-input-list-row")),r=De(s,go(".quick-input-list-row"));t.label=new _I(o,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0}),t.icon=F4(t.label.element,go(".quick-input-list-icon"));const a=De(o,go(".quick-input-list-entry-keybinding"));t.keybinding=new XL(a,Xs);const l=De(r,go(".quick-input-list-label-meta"));return t.detail=new _I(l,{supportHighlights:!0,supportIcons:!0}),t.separator=De(t.entry,go(".quick-input-list-separator")),t.actionBar=new ml(t.entry),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.push(t.actionBar),t}renderElement(e,t,i){var s,o,r,a;i.element=e,e.element=(s=i.entry)!==null&&s!==void 0?s:void 0;const l=e.item?e.item:e.separator;i.checkbox.checked=e.checked,i.toDisposeElement.push(e.onChecked(g=>i.checkbox.checked=g));const{labelHighlights:c,descriptionHighlights:d,detailHighlights:u}=e;if(!((o=e.item)===null||o===void 0)&&o.iconPath){const g=X_(this.themeService.getColorTheme().type)?e.item.iconPath.dark:(r=e.item.iconPath.light)!==null&&r!==void 0?r:e.item.iconPath.dark,p=nt.revive(g);i.icon.className="quick-input-list-icon",i.icon.style.backgroundImage=fl(p)}else i.icon.style.backgroundImage="",i.icon.className=!((a=e.item)===null||a===void 0)&&a.iconClass?`quick-input-list-icon ${e.item.iconClass}`:"";const h={matches:c||[],descriptionTitle:e.saneDescription,descriptionMatches:d||[],labelEscapeNewLines:!0};l.type!=="separator"?(h.extraClasses=l.iconClasses,h.italic=l.italic,h.strikethrough=l.strikethrough,i.entry.classList.remove("quick-input-list-separator-as-item")):i.entry.classList.add("quick-input-list-separator-as-item"),i.label.setLabel(e.saneLabel,e.saneDescription,h),i.keybinding.set(l.type==="separator"?void 0:l.keybinding),e.saneDetail?(i.detail.element.style.display="",i.detail.setLabel(e.saneDetail,void 0,{matches:u,title:e.saneDetail,labelEscapeNewLines:!0})):i.detail.element.style.display="none",e.item&&e.separator&&e.separator.label?(i.separator.textContent=e.separator.label,i.separator.style.display=""):i.separator.style.display="none",i.entry.classList.toggle("quick-input-list-separator-border",!!e.separator);const f=l.buttons;f&&f.length?(i.actionBar.push(f.map((g,p)=>{let _=g.iconClass||(g.iconPath?ny(g.iconPath):void 0);return g.alwaysVisible&&(_=_?`${_} always-visible`:"always-visible"),{id:`id-${p}`,class:_,enabled:!0,label:"",tooltip:g.tooltip||"",run:()=>{l.type!=="separator"?e.fireButtonTriggered({button:g,item:l}):e.fireSeparatorButtonTriggered({button:g,separator:l})}}}),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions")}disposeElement(e,t,i){i.toDisposeElement=ci(i.toDisposeElement),i.actionBar.clear()}disposeTemplate(e){e.toDisposeElement=ci(e.toDisposeElement),e.toDisposeTemplate=ci(e.toDisposeTemplate)}}Jg.ID="listelement";class cee{getHeight(e){return e.item?e.saneDetail?44:22:24}getTemplateId(e){return Jg.ID}}var Ii;(function(n){n[n.First=1]="First",n[n.Second=2]="Second",n[n.Last=3]="Last",n[n.Next=4]="Next",n[n.Previous=5]="Previous",n[n.NextPage=6]="NextPage",n[n.PreviousPage=7]="PreviousPage"})(Ii||(Ii={}));class QL{constructor(e,t,i,s){this.parent=e,this.options=i,this.inputElements=[],this.elements=[],this.elementsToIndexes=new Map,this.matchOnDescription=!1,this.matchOnDetail=!1,this.matchOnLabel=!0,this.matchOnLabelMode="fuzzy",this.sortByLabel=!0,this._onChangedAllVisibleChecked=new q,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new q,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new q,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new q,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new q,this.onButtonTriggered=this._onButtonTriggered.event,this._onSeparatorButtonTriggered=new q,this.onSeparatorButtonTriggered=this._onSeparatorButtonTriggered.event,this._onKeyDown=new q,this.onKeyDown=this._onKeyDown.event,this._onLeave=new q,this.onLeave=this._onLeave.event,this._listElementChecked=new q,this._fireCheckedEvents=!0,this.elementDisposables=[],this.disposables=[],this.id=t,this.container=De(this.parent,go(".quick-input-list"));const o=new cee,r=new hee;if(this.list=i.createList("QuickInput",this.container,o,[new Jg(s)],{identityProvider:{getId:a=>{var l,c,d,u,h,f,g,p;return(p=(f=(u=(c=(l=a.item)===null||l===void 0?void 0:l.id)!==null&&c!==void 0?c:(d=a.item)===null||d===void 0?void 0:d.label)!==null&&u!==void 0?u:(h=a.separator)===null||h===void 0?void 0:h.id)!==null&&f!==void 0?f:(g=a.separator)===null||g===void 0?void 0:g.label)!==null&&p!==void 0?p:""}},setRowLineHeight:!1,multipleSelectionSupport:!1,horizontalScrolling:!1,accessibilityProvider:r}),this.list.getHTMLElement().id=t,this.disposables.push(this.list),this.disposables.push(this.list.onKeyDown(a=>{const l=new Wt(a);switch(l.keyCode){case 10:this.toggleCheckbox();break;case 31:(gt?a.metaKey:a.ctrlKey)&&this.list.setFocus(gn(this.list.length));break;case 16:{const c=this.list.getFocus();c.length===1&&c[0]===0&&this._onLeave.fire();break}case 18:{const c=this.list.getFocus();c.length===1&&c[0]===this.list.length-1&&this._onLeave.fire();break}}this._onKeyDown.fire(l)})),this.disposables.push(this.list.onMouseDown(a=>{a.browserEvent.button!==2&&a.browserEvent.preventDefault()})),this.disposables.push(ee(this.container,_e.CLICK,a=>{(a.x||a.y)&&this._onLeave.fire()})),this.disposables.push(this.list.onMouseMiddleClick(a=>{this._onLeave.fire()})),this.disposables.push(this.list.onContextMenu(a=>{typeof a.index=="number"&&(a.browserEvent.preventDefault(),this.list.setSelection([a.index]))})),i.hoverDelegate){const a=new e4(i.hoverDelegate.delay);this.disposables.push(this.list.onMouseOver(l=>vI(this,void 0,void 0,function*(){var c;if(l.browserEvent.target instanceof HTMLAnchorElement){a.cancel();return}if(!(!(l.browserEvent.relatedTarget instanceof HTMLAnchorElement)&&un(l.browserEvent.relatedTarget,(c=l.element)===null||c===void 0?void 0:c.element)))try{yield a.trigger(()=>vI(this,void 0,void 0,function*(){l.element&&this.showHover(l.element)}))}catch(d){if(!Sg(d))throw d}}))),this.disposables.push(this.list.onMouseOut(l=>{var c;un(l.browserEvent.relatedTarget,(c=l.element)===null||c===void 0?void 0:c.element)||a.cancel()})),this.disposables.push(a)}this.disposables.push(this._listElementChecked.event(a=>this.fireCheckedEvents())),this.disposables.push(this._onChangedAllVisibleChecked,this._onChangedCheckedCount,this._onChangedVisibleCount,this._onChangedCheckedElements,this._onButtonTriggered,this._onSeparatorButtonTriggered,this._onLeave,this._onKeyDown)}get onDidChangeFocus(){return ke.map(this.list.onDidChangeFocus,e=>e.elements.map(t=>t.item))}get onDidChangeSelection(){return ke.map(this.list.onDidChangeSelection,e=>({items:e.elements.map(t=>t.item),event:e.browserEvent}))}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get ariaLabel(){return this.list.getHTMLElement().ariaLabel}set ariaLabel(e){this.list.getHTMLElement().ariaLabel=e}getAllVisibleChecked(){return this.allVisibleChecked(this.elements,!1)}allVisibleChecked(e,t=!0){for(let i=0,s=e.length;i<s;i++){const o=e[i];if(!o.hidden)if(o.checked)t=!0;else return!1}return t}getCheckedCount(){let e=0;const t=this.elements;for(let i=0,s=t.length;i<s;i++)t[i].checked&&e++;return e}getVisibleCount(){let e=0;const t=this.elements;for(let i=0,s=t.length;i<s;i++)t[i].hidden||e++;return e}setAllVisibleChecked(e){try{this._fireCheckedEvents=!1,this.elements.forEach(t=>{t.hidden||(t.checked=e)})}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}setElements(e){this.elementDisposables=ci(this.elementDisposables);const t=r=>this.fireButtonTriggered(r),i=r=>this.fireSeparatorButtonTriggered(r);this.inputElements=e;const s=new Map,o=this.parent.classList.contains("show-checkboxes");this.elements=e.reduce((r,a,l)=>{var c;const d=l>0?e[l-1]:void 0;if(a.type==="separator"&&!a.buttons)return r;const u=new lee(a,d,l,o,t,i,this._listElementChecked),h=r.length;return r.push(u),s.set((c=u.item)!==null&&c!==void 0?c:u.separator,h),r},[]),this.elementsToIndexes=s,this.list.splice(0,this.list.length),this.list.splice(0,this.list.length,this.elements),this._onChangedVisibleCount.fire(this.elements.length)}getFocusedElements(){return this.list.getFocusedElements().map(e=>e.item)}setFocusedElements(e){if(this.list.setFocus(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t))),e.length>0){const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}}getActiveDescendant(){return this.list.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){this.list.setSelection(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t)))}getCheckedElements(){return this.elements.filter(e=>e.checked).map(e=>e.item).filter(e=>!!e)}setCheckedElements(e){try{this._fireCheckedEvents=!1;const t=new Set;for(const i of e)t.add(i);for(const i of this.elements)i.checked=t.has(i.item)}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}set enabled(e){this.list.getHTMLElement().style.pointerEvents=e?"":"none"}focus(e){if(!this.list.length)return;switch(e===Ii.Second&&this.list.length<2&&(e=Ii.First),e){case Ii.First:this.list.scrollTop=0,this.list.focusFirst(void 0,i=>!!i.item);break;case Ii.Second:this.list.scrollTop=0,this.list.focusNth(1,void 0,i=>!!i.item);break;case Ii.Last:this.list.scrollTop=this.list.scrollHeight,this.list.focusLast(void 0,i=>!!i.item);break;case Ii.Next:{this.list.focusNext(void 0,!0,void 0,s=>!!s.item);const i=this.list.getFocus()[0];i!==0&&!this.elements[i-1].item&&this.list.firstVisibleIndex>i-1&&this.list.reveal(i-1);break}case Ii.Previous:{this.list.focusPrevious(void 0,!0,void 0,s=>!!s.item);const i=this.list.getFocus()[0];i!==0&&!this.elements[i-1].item&&this.list.firstVisibleIndex>i-1&&this.list.reveal(i-1);break}case Ii.NextPage:this.list.focusNextPage(void 0,i=>!!i.item);break;case Ii.PreviousPage:this.list.focusPreviousPage(void 0,i=>!!i.item);break}const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}clearFocus(){this.list.setFocus([])}domFocus(){this.list.domFocus()}showHover(e){var t,i,s;this.options.hoverDelegate!==void 0&&(this._lastHover&&!this._lastHover.isDisposed&&((i=(t=this.options.hoverDelegate).onDidHideHover)===null||i===void 0||i.call(t),(s=this._lastHover)===null||s===void 0||s.dispose()),!(!e.element||!e.saneTooltip)&&(this._lastHover=this.options.hoverDelegate.showHover({content:e.saneTooltip,target:e.element,linkHandler:o=>{this.options.linkOpenerDelegate(o)},showPointer:!0,container:this.container,hoverPosition:1},!1)))}layout(e){this.list.getHTMLElement().style.maxHeight=e?`${Math.floor(e/44)*44+6}px`:"",this.list.layout()}filter(e){if(!(this.sortByLabel||this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))return this.list.layout(),!1;const t=e;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this.elements.forEach(s=>{s.labelHighlights=void 0,s.descriptionHighlights=void 0,s.detailHighlights=void 0,s.hidden=!1;const o=s.index&&this.inputElements[s.index-1];s.item&&(s.separator=o&&o.type==="separator"&&!o.buttons?o:void 0)});else{let s;this.elements.forEach(o=>{var r,a,l,c;let d;this.matchOnLabelMode==="fuzzy"?d=this.matchOnLabel&&(r=Hb(e,Uh(o.saneLabel)))!==null&&r!==void 0?r:void 0:d=this.matchOnLabel&&(a=dee(t,Uh(o.saneLabel)))!==null&&a!==void 0?a:void 0;const u=this.matchOnDescription&&(l=Hb(e,Uh(o.saneDescription||"")))!==null&&l!==void 0?l:void 0,h=this.matchOnDetail&&(c=Hb(e,Uh(o.saneDetail||"")))!==null&&c!==void 0?c:void 0;if(d||u||h?(o.labelHighlights=d,o.descriptionHighlights=u,o.detailHighlights=h,o.hidden=!1):(o.labelHighlights=void 0,o.descriptionHighlights=void 0,o.detailHighlights=void 0,o.hidden=o.item?!o.item.alwaysShow:!0),o.item?o.separator=void 0:o.separator&&(o.hidden=!0),!this.sortByLabel){const f=o.index&&this.inputElements[o.index-1];s=f&&f.type==="separator"?f:s,s&&!o.hidden&&(o.separator=s,s=void 0)}})}const i=this.elements.filter(s=>!s.hidden);if(this.sortByLabel&&e){const s=e.toLowerCase();i.sort((o,r)=>uee(o,r,s))}return this.elementsToIndexes=i.reduce((s,o,r)=>{var a;return s.set((a=o.item)!==null&&a!==void 0?a:o.separator,r),s},new Map),this.list.splice(0,this.list.length,i),this.list.setFocus([]),this.list.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(i.length),!0}toggleCheckbox(){try{this._fireCheckedEvents=!1;const e=this.list.getFocusedElements(),t=this.allVisibleChecked(e);for(const i of e)i.checked=!t}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}display(e){this.container.style.display=e?"":"none"}isDisplayed(){return this.container.style.display!=="none"}dispose(){this.elementDisposables=ci(this.elementDisposables),this.disposables=ci(this.disposables)}fireCheckedEvents(){this._fireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(e){this._onButtonTriggered.fire(e)}fireSeparatorButtonTriggered(e){this._onSeparatorButtonTriggered.fire(e)}style(e){this.list.style(e)}toggleHover(){const e=this.list.getFocusedElements()[0];if(!(e!=null&&e.saneTooltip))return;if(this._lastHover&&!this._lastHover.isDisposed){this._lastHover.dispose();return}const t=this.list.getFocusedElements()[0];if(!t)return;this.showHover(t);const i=new Fe;i.add(this.list.onDidChangeFocus(s=>{s.indexes.length&&this.showHover(s.elements[0])})),this._lastHover&&i.add(this._lastHover),this._toggleHover=i,this.elementDisposables.push(this._toggleHover)}}b5([li],QL.prototype,"onDidChangeFocus",null);b5([li],QL.prototype,"onDidChangeSelection",null);function dee(n,e){const{text:t,iconOffsets:i}=e;if(!i||i.length===0)return wI(n,t);const s=S_(t," "),o=t.length-s.length,r=wI(n,s);if(r)for(const a of r){const l=i[a.start+o]+o;a.start+=l,a.end+=l}return r}function wI(n,e){const t=e.toLowerCase().indexOf(n.toLowerCase());return t!==-1?[{start:t,end:t+n.length}]:null}function uee(n,e,t){const i=n.labelHighlights||[],s=e.labelHighlights||[];return i.length&&!s.length?-1:!i.length&&s.length?1:i.length===0&&s.length===0?0:tee(n.saneSortLabel,e.saneSortLabel,t)}class hee{getWidgetAriaLabel(){return m("quickInput","Quick Input")}getAriaLabel(e){var t;return!((t=e.separator)===null||t===void 0)&&t.label?`${e.saneAriaLabel}, ${e.separator.label}`:e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(e){return e.hasCheckbox?"checkbox":"option"}isChecked(e){if(e.hasCheckbox)return{value:e.checked,onDidChange:e.onChecked}}}var CI=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const sy={iconClass:je.asClassName(we.quickInputBack),tooltip:m("quickInput.back","Back"),handle:-1};class ep extends oe{constructor(e){super(),this.ui=e,this._widgetUpdated=!1,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.buttonsUpdated=!1,this._toggles=[],this.togglesUpdated=!1,this.noValidationMessage=ep.noPromptMessage,this._severity=wi.Ignore,this.onDidTriggerButtonEmitter=this._register(new q),this.onDidHideEmitter=this._register(new q),this.onDisposeEmitter=this._register(new q),this.visibleDisposables=this._register(new Fe),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!ll;this._ignoreFocusOut=e&&!ll,t&&this.update()}get buttons(){return this._buttons}set buttons(e){this._buttons=e,this.buttonsUpdated=!0,this.update()}get toggles(){return this._toggles}set toggles(e){this._toggles=e??[],this.togglesUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.toggles.length&&(this.togglesUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=hg.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}update(){var e,t;if(!this.visible)return;const i=this.getTitle();i&&this.ui.title.textContent!==i?this.ui.title.textContent=i:!i&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText=" ");const s=this.getDescription();if(this.ui.description1.textContent!==s&&(this.ui.description1.textContent=s),this.ui.description2.textContent!==s&&(this.ui.description2.textContent=s),this._widgetUpdated&&(this._widgetUpdated=!1,this._widget?Mn(this.ui.widget,this._widget):Mn(this.ui.widget)),this.busy&&!this.busyDelay&&(this.busyDelay=new zc,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const r=this.buttons.filter(l=>l===sy);this.ui.leftActionBar.push(r.map((l,c)=>{const d=new ws(`id-${c}`,"",l.iconClass||ny(l.iconPath),!0,()=>CI(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(l)}));return d.tooltip=l.tooltip||"",d}),{icon:!0,label:!1}),this.ui.rightActionBar.clear();const a=this.buttons.filter(l=>l!==sy);this.ui.rightActionBar.push(a.map((l,c)=>{const d=new ws(`id-${c}`,"",l.iconClass||ny(l.iconPath),!0,()=>CI(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(l)}));return d.tooltip=l.tooltip||"",d}),{icon:!0,label:!1})}if(this.togglesUpdated){this.togglesUpdated=!1;const r=(t=(e=this.toggles)===null||e===void 0?void 0:e.filter(a=>a instanceof c1))!==null&&t!==void 0?t:[];this.ui.inputBox.toggles=r}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const o=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==o&&(this._lastValidationMessage=o,Mn(this.ui.message),aee(o,this.ui.message,{callback:r=>{this.ui.linkOpenerDelegate(r)},disposables:this.visibleDisposables})),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?m("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==wi.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}ep.noPromptMessage=m("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");class fg extends ep{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new q),this.onWillAcceptEmitter=this._register(new q),this.onDidAcceptEmitter=this._register(new q),this.onDidCustomEmitter=this._register(new q),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._autoFocusOnList=!0,this._keepScrollPosition=!1,this._itemActivation=Uo.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new q),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new q),this.onDidTriggerItemButtonEmitter=this._register(new q),this.onDidTriggerSeparatorButtonEmitter=this._register(new q),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event,this.onDidTriggerSeparatorButton=this.onDidTriggerSeparatorButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,t){this._value!==e&&(this._value=e,t||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get autoFocusOnList(){return this._autoFocusOnList}set autoFocusOnList(e){this._autoFocusOnList=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?KJ:this.ui.keyMods}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.autoFocusOnList&&(this.canSelectMany||this.ui.list.focus(Ii.First))}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{this.doSetValue(e,!0)})),this.visibleDisposables.add(this.ui.inputBox.onMouseDown(e=>{this.autoFocusOnList||this.ui.list.clearFocus()})),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown(e=>{switch(e.keyCode){case 18:this.ui.list.focus(Ii.Next),this.canSelectMany&&this.ui.list.domFocus(),qe.stop(e,!0);break;case 16:this.ui.list.getFocusedElements().length?this.ui.list.focus(Ii.Previous):this.ui.list.focus(Ii.Last),this.canSelectMany&&this.ui.list.domFocus(),qe.stop(e,!0);break;case 12:this.ui.list.focus(Ii.NextPage),this.canSelectMany&&this.ui.list.domFocus(),qe.stop(e,!0);break;case 11:this.ui.list.focus(Ii.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),qe.stop(e,!0);break;case 17:if(!this._canAcceptInBackground||!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(Ii.First),qe.stop(e,!0));break;case 13:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(Ii.Last),qe.stop(e,!0));break}})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this.ui.list.onDidChangeFocus(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&An(e,this._activeItems,(t,i)=>t===i)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&An(e,this._selectedItems,(i,s)=>i===s)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(t instanceof MouseEvent&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{this.canSelectMany&&(this.selectedItemsToConfirm!==this._selectedItems&&An(e,this._selectedItems,(t,i)=>t===i)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e)))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered(e=>this.onDidTriggerSeparatorButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return ee(this.ui.container,_e.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new Wt(e),i=t.keyCode;this._quickNavigate.keybindings.some(r=>{const a=r.getChords();return a.length>1?!1:a[0].shiftKey&&i===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a[0].altKey&&i===6||a[0].ctrlKey&&i===5||a[0].metaKey&&i===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this.description,i={title:!!this.title||!!this.step||!!this.buttons.length,description:t,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||t,visibleCount:!0,count:this.canSelectMany&&!this._hideCountBadge,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(i),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let s=this.ariaLabel;if(!s&&i.inputBox&&(s=this.placeholder||fg.DEFAULT_ARIA_LABEL,this.title&&(s+=` - ${this.title}`)),this.ui.list.ariaLabel!==s&&(this.ui.list.ariaLabel=s??null),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated)switch(this.itemsUpdated=!1,this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case Uo.NONE:this._itemActivation=Uo.FIRST;break;case Uo.SECOND:this.ui.list.focus(Ii.Second),this._itemActivation=Uo.FIRST;break;case Uo.LAST:this.ui.list.focus(Ii.Last),this._itemActivation=Uo.FIRST;break;default:this.trySelectFirst();break}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",i.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(Ii.First)),this.keepScrollPosition&&(this.scrollTop=e)}}fg.DEFAULT_ARIA_LABEL=m("quickInputBox.ariaLabel","Type to narrow down results.");class fee extends ep{constructor(){super(...arguments),this._value="",this.valueSelectionUpdated=!0,this._password=!1,this.onDidValueChangeEmitter=this._register(new q),this.onDidAcceptEmitter=this._register(new q),this.onDidChangeValue=this.onDidValueChangeEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event}get value(){return this._value}set value(e){this._value=e||"",this.update()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get password(){return this._password}set password(e){this._password=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{e!==this.value&&(this._value=e,this.onDidValueChangeEmitter.fire(e))})),this.visibleDisposables.add(this.ui.onDidAccept(()=>this.onDidAcceptEmitter.fire())),this.valueSelectionUpdated=!0),super.show()}update(){if(!this.visible)return;this.ui.container.classList.remove("hidden-input");const e={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0,progressBar:!0};this.ui.setVisibilities(e),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||""),this.ui.inputBox.password!==this.password&&(this.ui.inputBox.password=this.password)}}const Vn=Be;class m1 extends oe{constructor(e,t){super(),this.options=e,this.themeService=t,this.enabled=!0,this.onDidAcceptEmitter=this._register(new q),this.onDidCustomEmitter=this._register(new q),this.onDidTriggerButtonEmitter=this._register(new q),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new q),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new q),this.onHide=this.onHideEmitter.event,this.idPrefix=e.idPrefix,this.parentElement=e.container,this.styles=e.styles,this.registerKeyModsListeners()}registerKeyModsListeners(){const e=t=>{this.keyMods.ctrlCmd=t.ctrlKey||t.metaKey,this.keyMods.alt=t.altKey};this._register(ee(window,_e.KEY_DOWN,e,!0)),this._register(ee(window,_e.KEY_UP,e,!0)),this._register(ee(window,_e.MOUSE_DOWN,e,!0))}getUI(){if(this.ui)return this.ui;const e=De(this.parentElement,Vn(".quick-input-widget.show-file-icons"));e.tabIndex=-1,e.style.display="none";const t=so(e),i=De(e,Vn(".quick-input-titlebar")),s=this.options.hoverDelegate?{hoverDelegate:this.options.hoverDelegate}:void 0,o=this._register(new ml(i,s));o.domNode.classList.add("quick-input-left-action-bar");const r=De(i,Vn(".quick-input-title")),a=this._register(new ml(i,s));a.domNode.classList.add("quick-input-right-action-bar");const l=De(e,Vn(".quick-input-header")),c=De(l,Vn("input.quick-input-check-all"));c.type="checkbox",c.setAttribute("aria-label",m("quickInput.checkAll","Toggle all checkboxes")),this._register(Ci(c,_e.CHANGE,R=>{const X=c.checked;T.setAllVisibleChecked(X)})),this._register(ee(c,_e.CLICK,R=>{(R.x||R.y)&&f.setFocus()}));const d=De(l,Vn(".quick-input-description")),u=De(l,Vn(".quick-input-and-message")),h=De(u,Vn(".quick-input-filter")),f=this._register(new YJ(h,this.styles.inputBox,this.styles.toggle));f.setAttribute("aria-describedby",`${this.idPrefix}message`);const g=De(h,Vn(".quick-input-visible-count"));g.setAttribute("aria-live","polite"),g.setAttribute("aria-atomic","true");const p=new fI(g,{countFormat:m({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")},this.styles.countBadge),_=De(h,Vn(".quick-input-count"));_.setAttribute("aria-live","polite");const v=new fI(_,{countFormat:m({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")},this.styles.countBadge),b=De(l,Vn(".quick-input-action")),w=new hI(b,this.styles.button);w.label=m("ok","OK"),this._register(w.onDidClick(R=>{this.onDidAcceptEmitter.fire()}));const C=De(l,Vn(".quick-input-action")),S=new hI(C,this.styles.button);S.label=m("custom","Custom"),this._register(S.onDidClick(R=>{this.onDidCustomEmitter.fire()}));const k=De(u,Vn(`#${this.idPrefix}message.quick-input-message`)),L=new p1(e,this.styles.progressBar);L.getContainer().classList.add("quick-input-progress");const x=De(e,Vn(".quick-input-html-widget"));x.tabIndex=-1;const I=De(e,Vn(".quick-input-description")),A=this.idPrefix+"list",T=this._register(new QL(e,A,this.options,this.themeService));f.setAttribute("aria-controls",A),this._register(T.onDidChangeFocus(()=>{var R;f.setAttribute("aria-activedescendant",(R=T.getActiveDescendant())!==null&&R!==void 0?R:"")})),this._register(T.onChangedAllVisibleChecked(R=>{c.checked=R})),this._register(T.onChangedVisibleCount(R=>{p.setCount(R)})),this._register(T.onChangedCheckedCount(R=>{v.setCount(R)})),this._register(T.onLeave(()=>{setTimeout(()=>{f.setFocus(),this.controller instanceof fg&&this.controller.canSelectMany&&T.clearFocus()},0)}));const O=H_(e);return this._register(O),this._register(ee(e,_e.FOCUS,R=>{un(R.relatedTarget,e)||(this.previousFocusElement=R.relatedTarget instanceof HTMLElement?R.relatedTarget:void 0)},!0)),this._register(O.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(hg.Blur),this.previousFocusElement=void 0})),this._register(ee(e,_e.FOCUS,R=>{f.setFocus()})),this._register(Ci(e,_e.KEY_DOWN,R=>{if(!un(R.target,x))switch(R.keyCode){case 3:qe.stop(R,!0),this.enabled&&this.onDidAcceptEmitter.fire();break;case 9:qe.stop(R,!0),this.hide(hg.Gesture);break;case 2:if(!R.altKey&&!R.ctrlKey&&!R.metaKey){const X=[".quick-input-list .monaco-action-bar .always-visible",".quick-input-list-entry:hover .monaco-action-bar",".monaco-list-row.focused .monaco-action-bar"];if(e.classList.contains("show-checkboxes")?X.push("input"):X.push("input[type=text]"),this.getUI().list.isDisplayed()&&X.push(".monaco-list"),this.getUI().message&&X.push(".quick-input-message a"),this.getUI().widget){if(un(R.target,this.getUI().widget))break;X.push(".quick-input-html-widget")}const ie=e.querySelectorAll(X.join(", "));R.shiftKey&&R.target===ie[0]?(qe.stop(R,!0),T.clearFocus()):!R.shiftKey&&un(R.target,ie[ie.length-1])&&(qe.stop(R,!0),ie[0].focus())}break;case 10:R.ctrlKey&&(qe.stop(R,!0),this.getUI().list.toggleHover());break}})),this.ui={container:e,styleSheet:t,leftActionBar:o,titleBar:i,title:r,description1:I,description2:d,widget:x,rightActionBar:a,checkAll:c,inputContainer:u,filterContainer:h,inputBox:f,visibleCountContainer:g,visibleCount:p,countContainer:_,count:v,okContainer:b,ok:w,message:k,customButtonContainer:C,customButton:S,list:T,progressBar:L,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:R=>this.show(R),hide:()=>this.hide(),setVisibilities:R=>this.setVisibilities(R),setEnabled:R=>this.setEnabled(R),setContextKey:R=>this.options.setContextKey(R),linkOpenerDelegate:R=>this.options.linkOpenerDelegate(R)},this.updateStyles(),this.ui}pick(e,t={},i=Bs.None){return new Promise((s,o)=>{let r=d=>{var u;r=s,(u=t.onKeyMods)===null||u===void 0||u.call(t,a.keyMods),s(d)};if(i.isCancellationRequested){r(void 0);return}const a=this.createQuickPick();let l;const c=[a,a.onDidAccept(()=>{if(a.canSelectMany)r(a.selectedItems.slice()),a.hide();else{const d=a.activeItems[0];d&&(r(d),a.hide())}}),a.onDidChangeActive(d=>{const u=d[0];u&&t.onDidFocus&&t.onDidFocus(u)}),a.onDidChangeSelection(d=>{if(!a.canSelectMany){const u=d[0];u&&(r(u),a.hide())}}),a.onDidTriggerItemButton(d=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton(Object.assign(Object.assign({},d),{removeItem:()=>{const u=a.items.indexOf(d.item);if(u!==-1){const h=a.items.slice(),f=h.splice(u,1),g=a.activeItems.filter(_=>_!==f[0]),p=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=h,g&&(a.activeItems=g),a.keepScrollPosition=p}}}))),a.onDidTriggerSeparatorButton(d=>{var u;return(u=t.onDidTriggerSeparatorButton)===null||u===void 0?void 0:u.call(t,d)}),a.onDidChangeValue(d=>{l&&!d&&(a.activeItems.length!==1||a.activeItems[0]!==l)&&(a.activeItems=[l])}),i.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{ci(c),r(void 0)})];a.title=t.title,a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.autoFocusOnList=t.autoFocusOnList===void 0||t.autoFocusOnList,a.quickNavigate=t.quickNavigate,a.hideInput=!!t.hideInput,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([d,u])=>{l=u,a.busy=!1,a.items=d,a.canSelectMany&&(a.selectedItems=d.filter(h=>h.type!=="separator"&&h.picked)),l&&(a.activeItems=[l])}),a.show(),Promise.resolve(e).then(void 0,d=>{o(d),a.hide()})})}createQuickPick(){const e=this.getUI();return new fg(e)}createInputBox(){const e=this.getUI();return new fee(e)}show(e){const t=this.getUI();this.onShowEmitter.fire();const i=this.controller;this.controller=e,i==null||i.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",Mn(t.widget),t.rightActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(wi.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),Mn(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,t.inputBox.toggles=void 0;const s=this.options.backKeybindingLabel();sy.tooltip=s?m("quickInput.backWithKeybinding","Back ({0})",s):m("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus()}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.inputContainer.style.display=e.inputBox?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.display(!!e.list),t.container.classList.toggle("show-checkboxes",!!e.checkBox),t.container.classList.toggle("hidden-input",!e.inputBox&&!e.description),this.updateLayout()}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.action.enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.action.enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().inputBox.enabled=e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var t,i,s;const o=this.controller;if(!o)return;const r=!un(document.activeElement,(i=(t=this.ui)===null||t===void 0?void 0:t.container)!==null&&i!==void 0?i:null);if(this.controller=null,this.onHideEmitter.fire(),this.getUI().container.style.display="none",!r){let a=this.previousFocusElement;for(;a&&!a.offsetParent;)a=(s=a.parentElement)!==null&&s!==void 0?s:void 0;a!=null&&a.offsetParent?(a.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}o.didHide(e)}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui&&this.isDisplayed()){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,m1.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:i,widgetBorder:s,widgetShadow:o}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e??"",this.ui.container.style.backgroundColor=t??"",this.ui.container.style.color=i??"",this.ui.container.style.border=s?`1px solid ${s}`:"",this.ui.container.style.boxShadow=o?`0 0 8px 2px ${o}`:"",this.ui.list.style(this.styles.list);const r=[];this.styles.pickerGroup.pickerGroupBorder&&r.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.pickerGroup.pickerGroupBorder}; }`),this.styles.pickerGroup.pickerGroupForeground&&r.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`),this.styles.pickerGroup.pickerGroupForeground&&r.push(".quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }"),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(r.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&r.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&r.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&r.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&r.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&r.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),r.push("}"));const a=r.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}isDisplayed(){return this.ui&&this.ui.container.style.display!=="none"}}m1.MAX_WIDTH=600;var gee=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},em=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let oy=class extends dU{get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get hasController(){return!!this._controller}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(iy))),this._quickAccess}constructor(e,t,i,s){super(i),this.instantiationService=e,this.contextKeyService=t,this.layoutService=s,this._onShow=this._register(new q),this._onHide=this._register(new q),this.contexts=new Map}createController(e=this.layoutService,t){const i={idPrefix:"quickInput_",container:e.container,ignoreFocusOut:()=>!1,backKeybindingLabel:()=>{},setContextKey:o=>this.setContextKey(o),linkOpenerDelegate:o=>{this.instantiationService.invokeFunction(r=>{r.get(IL).open(o,{allowCommands:!0,fromUserGesture:!0})})},returnFocus:()=>e.focus(),createList:(o,r,a,l,c)=>this.instantiationService.createInstance(ey,o,r,a,l,c),styles:this.computeStyles()},s=this._register(new m1(Object.assign(Object.assign({},i),t),this.themeService));return s.layout(e.dimension,e.offset.quickPickTop),this._register(e.onDidLayout(o=>s.layout(o,e.offset.quickPickTop))),this._register(s.onShow(()=>{this.resetContextKeys(),this._onShow.fire()})),this._register(s.onHide(()=>{this.resetContextKeys(),this._onHide.fire()})),s}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new Ie(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t==null||t.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t={},i=Bs.None){return this.controller.pick(e,t,i)}createQuickPick(){return this.controller.createQuickPick()}createInputBox(){return this.controller.createInputBox()}updateStyles(){this.hasController&&this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:{quickInputBackground:pe(A2),quickInputForeground:pe(T$),quickInputTitleBackground:pe(A$),widgetBorder:pe(o$),widgetShadow:pe(Wa)},inputBox:QA,toggle:XA,countBadge:xQ,button:yQ,progressBar:SQ,keybindingLabel:CQ,list:Yg({listBackground:A2,listFocusBackground:iC,listFocusForeground:tC,listInactiveFocusForeground:tC,listInactiveSelectionIconForeground:o3,listInactiveFocusBackground:iC,listFocusOutline:ri,listInactiveFocusOutline:ri}),pickerGroup:{pickerGroupBorder:pe(M$),pickerGroupForeground:pe(Y4)}}}};oy=gee([em(0,ai),em(1,Et),em(2,ro),em(3,ih)],oy);var v5=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Wd=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let ry=class extends oy{constructor(e,t,i,s,o){super(t,i,s,new OC(e.getContainerDomNode(),o)),this.host=void 0;const r=Hu.get(e);if(r){const a=r.widget;this.host={_serviceBrand:void 0,get hasContainer(){return!0},get container(){return a.getDomNode()},get dimension(){return e.getLayoutInfo()},get onDidLayout(){return e.onDidLayoutChange},focus:()=>e.focus(),offset:{top:0,quickPickTop:0}}}else this.host=void 0}createController(){return super.createController(this.host)}};ry=v5([Wd(1,ai),Wd(2,Et),Wd(3,ro),Wd(4,oi)],ry);let ay=class{get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const i=t=this.instantiationService.createInstance(ry,e);this.mapEditorToService.set(e,t),Sc(e.onDidDispose)(()=>{i.dispose(),this.mapEditorToService.delete(e)})}return t}get quickAccess(){return this.activeService.quickAccess}constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}pick(e,t={},i=Bs.None){return this.activeService.pick(e,t,i)}createQuickPick(){return this.activeService.createQuickPick()}createInputBox(){return this.activeService.createInputBox()}};ay=v5([Wd(0,ai),Wd(1,oi)],ay);class Hu{static get(e){return e.getContribution(Hu.ID)}constructor(e){this.editor=e,this.widget=new _1(this.editor)}dispose(){this.widget.dispose()}}Hu.ID="editor.controller.quickInput";class _1{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return _1.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}}_1.ID="editor.contrib.quickInputWidget";j4(Hu.ID,Hu,4);class pee{constructor(e,t,i,s,o){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=i,this.foreground=s,this.background=o}}function mee(n){if(!n||!Array.isArray(n))return[];const e=[];let t=0;for(let i=0,s=n.length;i<s;i++){const o=n[i];let r=-1;if(typeof o.fontStyle=="string"){r=0;const c=o.fontStyle.split(" ");for(let d=0,u=c.length;d<u;d++)switch(c[d]){case"italic":r=r|1;break;case"bold":r=r|2;break;case"underline":r=r|4;break;case"strikethrough":r=r|8;break}}let a=null;typeof o.foreground=="string"&&(a=o.foreground);let l=null;typeof o.background=="string"&&(l=o.background),e[t++]=new pee(o.token||"",i,r,a,l)}return e}function _ee(n,e){n.sort((d,u)=>{const h=yee(d.token,u.token);return h!==0?h:d.index-u.index});let t=0,i="000000",s="ffffff";for(;n.length>=1&&n[0].token==="";){const d=n.shift();d.fontStyle!==-1&&(t=d.fontStyle),d.foreground!==null&&(i=d.foreground),d.background!==null&&(s=d.background)}const o=new vee;for(const d of e)o.getId(d);const r=o.getId(i),a=o.getId(s),l=new JL(t,r,a),c=new ex(l);for(let d=0,u=n.length;d<u;d++){const h=n[d];c.insert(h.token,h.fontStyle,o.getId(h.foreground),o.getId(h.background))}return new w5(o,c)}const bee=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class vee{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(bee);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let i=this._color2id.get(e);return i||(i=++this._lastColorId,this._color2id.set(e,i),this._id2color[i]=J.fromHex("#"+e),i)}getColorMap(){return this._id2color.slice(0)}}class w5{static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(mee(e),t)}static createFromParsedTokenTheme(e,t){return _ee(e,t)}constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let i=this._cache.get(t);if(typeof i>"u"){const s=this._match(t),o=Cee(t);i=(s.metadata|o<<8)>>>0,this._cache.set(t,i)}return(i|e<<0)>>>0}}const wee=/\b(comment|string|regex|regexp)\b/;function Cee(n){const e=n.match(wee);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}function yee(n,e){return n<e?-1:n>e?1:0}class JL{constructor(e,t,i){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=i,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}clone(){return new JL(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,i){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),i!==0&&(this._background=i),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}}class ex{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;const t=e.indexOf(".");let i,s;t===-1?(i=e,s=""):(i=e.substring(0,t),s=e.substring(t+1));const o=this._children.get(i);return typeof o<"u"?o.match(s):this._mainRule}insert(e,t,i,s){if(e===""){this._mainRule.acceptOverwrite(t,i,s);return}const o=e.indexOf(".");let r,a;o===-1?(r=e,a=""):(r=e.substring(0,o),a=e.substring(o+1));let l=this._children.get(r);typeof l>"u"&&(l=new ex(this._mainRule.clone()),this._children.set(r,l)),l.insert(a,t,i,s)}}function See(n){const e=[];for(let t=1,i=n.length;t<i;t++){const s=n[t];e[t]=`.mtk${t} { color: ${s}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.push(".mtks { text-decoration: line-through; }"),e.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),e.join(`
`)}const Lee={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Qi]:"#FFFFFE",[G_]:"#000000",[X4]:"#E5EBF1",[Vg]:"#D3D3D3",[Wg]:"#939393",[Q4]:"#ADD6FF4D"}},xee={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Qi]:"#1E1E1E",[G_]:"#D4D4D4",[X4]:"#3A3D41",[Vg]:"#404040",[Wg]:"#707070",[Q4]:"#ADD6FF26"}},Dee={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Qi]:"#000000",[G_]:"#FFFFFF",[Vg]:"#FFFFFF",[Wg]:"#FFFFFF"}},kee={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Qi]:"#FFFFFF",[G_]:"#292929",[Vg]:"#292929",[Wg]:"#292929"}};function Eee(n){const e=new q,t=EA();return t.onDidChange(()=>e.fire()),n==null||n.onDidProductIconThemeChange(()=>e.fire()),{onDidChange:e.event,getCSS(){const i=n?n.getProductIconTheme():new C5,s={},o=a=>{const l=i.getIcon(a);if(!l)return;const c=l.font;return c?(s[c.id]=c.definition,`.codicon-${a.id}:before { content: '${l.fontCharacter}'; font-family: ${x2(c.id)}; }`):`.codicon-${a.id}:before { content: '${l.fontCharacter}'; }`},r=[];for(const a of t.getIcons()){const l=o(a);l&&r.push(l)}for(const a in s){const l=s[a],c=l.weight?`font-weight: ${l.weight};`:"",d=l.style?`font-style: ${l.style};`:"",u=l.src.map(h=>`${fl(h.location)} format('${h.format}')`).join(", ");r.push(`@font-face { src: ${u}; font-family: ${x2(a)};${c}${d} font-display: block; }`)}return r.join(`
`)}}}class C5{getIcon(e){const t=EA();let i=e.defaults;for(;je.isThemeIcon(i);){const s=t.getIcon(i.id);if(!s)return;i=s.defaults}return i}}const Pa="vs",wf="vs-dark",uu="hc-black",hu="hc-light",y5=zi.as(Z4.ColorContribution),Iee=zi.as(p3.ThemingContribution);class S5{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;const i=t.base;e.length>0?(Om(e)?this.id=e:this.id=i+" "+e,this.themeName=e):(this.id=i,this.themeName=i),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(const t in this.themeData.colors)e.set(t,J.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){const t=ly(this.themeData.base);for(const i in t.colors)e.has(i)||e.set(i,J.fromHex(t.colors[i]))}this.colors=e}return this.colors}getColor(e,t){const i=this.getColors().get(e);if(i)return i;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=y5.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return this.getColors().has(e)}get type(){switch(this.base){case Pa:return As.LIGHT;case uu:return As.HIGH_CONTRAST_DARK;case hu:return As.HIGH_CONTRAST_LIGHT;default:return As.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){const o=ly(this.themeData.base);e=o.rules,o.encodedTokensColors&&(t=o.encodedTokensColors)}const i=this.themeData.colors["editor.foreground"],s=this.themeData.colors["editor.background"];if(i||s){const o={token:""};i&&(o.foreground=i),s&&(o.background=s),e.push(o)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=w5.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,i){const o=this.tokenTheme._match([e].concat(t).join(".")).metadata,r=qn.getForeground(o),a=qn.getFontStyle(o);return{foreground:r,italic:!!(a&1),bold:!!(a&2),underline:!!(a&4),strikethrough:!!(a&8)}}}function Om(n){return n===Pa||n===wf||n===uu||n===hu}function ly(n){switch(n){case Pa:return Lee;case wf:return xee;case uu:return Dee;case hu:return kee}}function tm(n){const e=ly(n);return new S5(n,e)}class Nee extends oe{constructor(){super(),this._onColorThemeChange=this._register(new q),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new q),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new C5,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(Pa,tm(Pa)),this._knownThemes.set(wf,tm(wf)),this._knownThemes.set(uu,tm(uu)),this._knownThemes.set(hu,tm(hu));const e=Eee(this);this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(Pa),this._onOSSchemeChanged(),e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()}),AT("(forced-colors: active)",()=>{this._onOSSchemeChanged()})}registerEditorContainer(e){return Gw(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=so(void 0,e=>{e.className="monaco-colors",e.textContent=this._allCSS}),this._styleElements.push(this._globalStyleElement)),oe.None}_registerShadowDomContainer(e){const t=so(e,i=>{i.className="monaco-colors",i.textContent=this._allCSS});return this._styleElements.push(t),{dispose:()=>{for(let i=0;i<this._styleElements.length;i++)if(this._styleElements[i]===t){this._styleElements.splice(i,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!Om(t.base)&&!Om(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new S5(e,t)),Om(e)&&this._knownThemes.forEach(i=>{i.base===e&&i.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get(Pa),this._updateActualTheme(t)}_updateActualTheme(e){!e||this._theme===e||(this._theme=e,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){const e=window.matchMedia("(forced-colors: active)").matches;if(e!==tu(this._theme.type)){let t;X_(this._theme.type)?t=e?uu:wf:t=e?hu:Pa,this._updateActualTheme(this._knownThemes.get(t))}}}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._onOSSchemeChanged()}_updateThemeOrColorMap(){const e=[],t={},i={addRule:r=>{t[r]||(e.push(r),t[r]=!0)}};Iee.getThemingParticipants().forEach(r=>r(this._theme,i,this._environment));const s=[];for(const r of y5.getColors()){const a=this._theme.getColor(r.id,!0);a&&s.push(`${jS(r.id)}: ${a.toString()};`)}i.addRule(`.monaco-editor, .monaco-diff-editor { ${s.join(`
`)} }`);const o=this._colorMapOverride||this._theme.tokenTheme.getColorMap();i.addRule(See(o)),this._themeCSS=e.join(`
`),this._updateCSS(),hi.setColorMap(o),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}}const js=ct("themeService");var Tee=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},uv=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let cy=class extends oe{constructor(e,t,i){super(),this._contextKeyService=e,this._layoutService=t,this._configurationService=i,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new q,this._onDidChangeReducedMotion=new q,this._accessibilityModeEnabledContext=rB.bindTo(this._contextKeyService);const s=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(r=>{r.affectsConfiguration("editor.accessibilitySupport")&&(s(),this._onDidChangeScreenReaderOptimized.fire()),r.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())})),s(),this._register(this.onDidChangeScreenReaderOptimized(()=>s()));const o=window.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=o.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this.initReducedMotionListeners(o)}initReducedMotionListeners(e){if(!this._layoutService.hasContainer)return;this._register(ee(e,"change",()=>{this._systemMotionReduced=e.matches,this._configMotionReduced==="auto"&&this._onDidChangeReducedMotion.fire()}));const t=()=>{const i=this.isMotionReduced();this._layoutService.container.classList.toggle("reduce-motion",i),this._layoutService.container.classList.toggle("enable-motion",!i)};t(),this._register(this.onDidChangeReducedMotion(()=>t()))}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){const e=this._configMotionReduced;return e==="on"||e==="auto"&&this._systemMotionReduced}getAccessibilitySupport(){return this._accessibilitySupport}};cy=Tee([uv(0,Et),uv(1,ih),uv(2,mi)],cy);var b1=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Mc=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},md,Ca;let dy=class{constructor(e,t){this._commandService=e,this._hiddenStates=new X0(t)}createMenu(e,t,i){return new hy(e,this._hiddenStates,Object.assign({emitEventsForSubmenuChanges:!1,eventDebounceDelay:50},i),this._commandService,t)}resetHiddenStates(e){this._hiddenStates.reset(e)}};dy=b1([Mc(0,oo),Mc(1,o1)],dy);let X0=md=class{constructor(e){this._storageService=e,this._disposables=new Fe,this._onDidChange=new q,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1,this._hiddenByDefaultCache=new Map;try{const t=e.get(md._key,0,"{}");this._data=JSON.parse(t)}catch{this._data=Object.create(null)}this._disposables.add(e.onDidChangeValue(0,md._key,this._disposables)(()=>{if(!this._ignoreChangeEvent)try{const t=e.get(md._key,0,"{}");this._data=JSON.parse(t)}catch(t){console.log("FAILED to read storage after UPDATE",t)}this._onDidChange.fire()}))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault(e,t){var i;return(i=this._hiddenByDefaultCache.get(`${e.id}/${t}`))!==null&&i!==void 0?i:!1}setDefaultState(e,t,i){this._hiddenByDefaultCache.set(`${e.id}/${t}`,i)}isHidden(e,t){var i,s;const o=this._isHiddenByDefault(e,t),r=(s=(i=this._data[e.id])===null||i===void 0?void 0:i.includes(t))!==null&&s!==void 0?s:!1;return o?!r:r}updateHidden(e,t,i){this._isHiddenByDefault(e,t)&&(i=!i);const o=this._data[e.id];if(i)o?o.indexOf(t)<0&&o.push(t):this._data[e.id]=[t];else if(o){const r=o.indexOf(t);r>=0&&p7(o,r),o.length===0&&delete this._data[e.id]}this._persist()}reset(e){if(e===void 0)this._data=Object.create(null),this._persist();else{for(const{id:t}of e)this._data[t]&&delete this._data[t];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;const e=JSON.stringify(this._data);this._storageService.store(md._key,e,0,0)}finally{this._ignoreChangeEvent=!1}}};X0._key="menu.hiddenCommands";X0=md=b1([Mc(0,o1)],X0);let uy=Ca=class{constructor(e,t,i,s,o){this._id=e,this._hiddenStates=t,this._collectContextKeysForSubmenus=i,this._commandService=s,this._contextKeyService=o,this._menuGroups=[],this._structureContextKeys=new Set,this._preconditionContextKeys=new Set,this._toggledContextKeys=new Set,this.refresh()}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){this._menuGroups.length=0,this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();const e=xo.getMenuItems(this._id);let t;e.sort(Ca._compareMenuItems);for(const i of e){const s=i.group||"";(!t||t[0]!==s)&&(t=[s,[]],this._menuGroups.push(t)),t[1].push(i),this._collectContextKeys(i)}}_collectContextKeys(e){if(Ca._fillInKbExprKeys(e.when,this._structureContextKeys),Ah(e)){if(e.command.precondition&&Ca._fillInKbExprKeys(e.command.precondition,this._preconditionContextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;Ca._fillInKbExprKeys(t,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&xo.getMenuItems(e.submenu).forEach(this._collectContextKeys,this)}createActionGroups(e){const t=[];for(const i of this._menuGroups){const[s,o]=i,r=[];for(const a of o)if(this._contextKeyService.contextMatchesRules(a.when)){const l=Ah(a);l&&this._hiddenStates.setDefaultState(this._id,a.command.id,!!a.isHiddenByDefault);const c=Aee(this._id,l?a.command:a,this._hiddenStates);if(l)r.push(new Hf(a.command,a.alt,e,c,this._contextKeyService,this._commandService));else{const d=new Ca(a.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._contextKeyService).createActionGroups(e),u=ts.join(...d.map(h=>h[1]));u.length>0&&r.push(new HH(a,c,u))}}r.length>0&&t.push([s,r])}return t}static _fillInKbExprKeys(e,t){if(e)for(const i of e.keys())t.add(i)}static _compareMenuItems(e,t){const i=e.group,s=t.group;if(i!==s){if(i){if(!s)return-1}else return 1;if(i==="navigation")return-1;if(s==="navigation")return 1;const a=i.localeCompare(s);if(a!==0)return a}const o=e.order||0,r=t.order||0;return o<r?-1:o>r?1:Ca._compareTitles(Ah(e)?e.command.title:e.title,Ah(t)?t.command.title:t.title)}static _compareTitles(e,t){const i=typeof e=="string"?e:e.original,s=typeof t=="string"?t:t.original;return i.localeCompare(s)}};uy=Ca=b1([Mc(3,oo),Mc(4,Et)],uy);let hy=class{constructor(e,t,i,s,o){this._disposables=new Fe,this._menuInfo=new uy(e,t,i.emitEventsForSubmenuChanges,s,o);const r=new Sn(()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})},i.eventDebounceDelay);this._disposables.add(r),this._disposables.add(xo.onDidChangeMenu(d=>{d.has(e)&&r.schedule()}));const a=this._disposables.add(new Fe),l=d=>{let u=!1,h=!1,f=!1;for(const g of d)if(u=u||g.isStructuralChange,h=h||g.isEnablementChange,f=f||g.isToggleChange,u&&h&&f)break;return{menu:this,isStructuralChange:u,isEnablementChange:h,isToggleChange:f}},c=()=>{a.add(o.onDidChangeContext(d=>{const u=d.affectsSome(this._menuInfo.structureContextKeys),h=d.affectsSome(this._menuInfo.preconditionContextKeys),f=d.affectsSome(this._menuInfo.toggledContextKeys);(u||h||f)&&this._onDidChange.fire({menu:this,isStructuralChange:u,isEnablementChange:h,isToggleChange:f})})),a.add(t.onDidChange(d=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})}))};this._onDidChange=new pT({onWillAddFirstListener:c,onDidRemoveLastListener:a.clear.bind(a),delay:i.eventDebounceDelay,merge:l}),this.onDidChange=this._onDidChange.event}getActions(e){return this._menuInfo.createActionGroups(e)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}};hy=b1([Mc(3,oo),Mc(4,Et)],hy);function Aee(n,e,t){const i=WH(e)?e.submenu.id:e.id,s=typeof e.title=="string"?e.title:e.title.value,o=E2({id:`hide/${n.id}/${i}`,label:m("hide.label","Hide '{0}'",s),run(){t.updateHidden(n,i,!0)}}),r=E2({id:`toggle/${n.id}/${i}`,label:s,get checked(){return!t.isHidden(n,i)},run(){t.updateHidden(n,i,!!this.checked)}});return{hide:o,toggle:r,get isHidden(){return!r.checked}}}var Mee=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},yI=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},Bl=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};let fy=class extends oe{constructor(e,t){super(),this.layoutService=e,this.logService=t,this.mapTextToType=new Map,this.findText="",this.resources=[],(ia||MT)&&this.installWebKitWriteTextWorkaround()}installWebKitWriteTextWorkaround(){const e=()=>{const t=new t4;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=t,navigator.clipboard.write([new ClipboardItem({"text/plain":t.p})]).catch(i=>Bl(this,void 0,void 0,function*(){(!(i instanceof Error)||i.name!=="NotAllowedError"||!t.isRejected)&&this.logService.error(i)}))};this.layoutService.hasContainer&&(this._register(ee(this.layoutService.container,"click",e)),this._register(ee(this.layoutService.container,"keydown",e)))}writeText(e,t){return Bl(this,void 0,void 0,function*(){if(t){this.mapTextToType.set(t,e);return}if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(e);try{return yield navigator.clipboard.writeText(e)}catch(o){console.error(o)}const i=document.activeElement,s=document.body.appendChild(Be("textarea",{"aria-hidden":!0}));s.style.height="1px",s.style.width="1px",s.style.position="absolute",s.value=e,s.focus(),s.select(),document.execCommand("copy"),i instanceof HTMLElement&&i.focus(),document.body.removeChild(s)})}readText(e){return Bl(this,void 0,void 0,function*(){if(e)return this.mapTextToType.get(e)||"";try{return yield navigator.clipboard.readText()}catch(t){return console.error(t),""}})}readFindText(){return Bl(this,void 0,void 0,function*(){return this.findText})}writeFindText(e){return Bl(this,void 0,void 0,function*(){this.findText=e})}writeResources(e){return Bl(this,void 0,void 0,function*(){this.resources=e})}readResources(){return Bl(this,void 0,void 0,function*(){return this.resources})}};fy=Mee([yI(0,ih),yI(1,Cl)],fy);var Ree=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Pee=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};const Cf="data-keybinding-context";class tx{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}get value(){return Object.assign({},this._value)}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}}class $u extends tx{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}}$u.INSTANCE=new $u;class gg extends tx{constructor(e,t,i){super(e,null),this._configurationService=t,this._values=bf.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(s=>{if(s.source===7){const o=Array.from(this._values,([r])=>r);this._values.clear(),i.fire(new LI(o))}else{const o=[];for(const r of s.affectedKeys){const a=`config.${r}`,l=this._values.findSuperstr(a);l!==void 0&&(o.push(...lt.map(l,([c])=>c)),this._values.deleteSuperstr(a)),this._values.has(a)&&(o.push(a),this._values.delete(a))}i.fire(new LI(o))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(gg._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(gg._keyPrefix.length),i=this._configurationService.getValue(t);let s;switch(typeof i){case"number":case"boolean":case"string":s=i;break;default:Array.isArray(i)?s=JSON.stringify(i):s=i}return this._values.set(e,s),s}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}}gg._keyPrefix="config.";class Oee{constructor(e,t,i){this._service=e,this._key=t,this._defaultValue=i,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class SI{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}allKeysContainedIn(e){return this.affectsSome(e)}}class LI{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}allKeysContainedIn(e){return this.keys.every(t=>e.has(t))}}class Fee{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}allKeysContainedIn(e){return this.events.every(t=>t.allKeysContainedIn(e))}}function Bee(n,e){return n.allKeysContainedIn(new Set(Object.keys(e)))}class L5{constructor(e){this._onDidChangeContext=new If({merge:t=>new Fee(t)}),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new Oee(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new Vee(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return e?e.evaluate(t):!0}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const i=this.getContextValuesContainer(this._myContextId);i&&i.setValue(e,t)&&this._onDidChangeContext.fire(new SI(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new SI(e))}getContext(e){return this._isDisposed?$u.INSTANCE:this.getContextValuesContainer(Wee(e))}}let gy=class extends L5{constructor(e){super(0),this._contexts=new Map,this._toDispose=new Fe,this._lastContextId=0;const t=new gg(this._myContextId,e,this._onDidChangeContext);this._contexts.set(this._myContextId,t),this._toDispose.add(t)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._toDispose.dispose()}getContextValuesContainer(e){return this._isDisposed?$u.INSTANCE:this._contexts.get(e)||$u.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");const t=++this._lastContextId;return this._contexts.set(t,new tx(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};gy=Ree([Pee(0,mi)],gy);class Vee extends L5{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=new bu,this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(Cf)){let i="";this._domNode.classList&&(i=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${i?": "+i:""}`)}this._domNode.setAttribute(Cf,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(e=>{const i=this._parent.getContextValuesContainer(this._myContextId).value;Bee(e,i)||this._onDidChangeContext.fire(e)})}dispose(){this._isDisposed||(this._onDidChangeContext.dispose(),this._parent.disposeContext(this._myContextId),this._parentChangeListener.dispose(),this._domNode.removeAttribute(Cf),this._isDisposed=!0)}getContextValuesContainer(e){return this._isDisposed?$u.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}function Wee(n){for(;n;){if(n.hasAttribute(Cf)){const e=n.getAttribute(Cf);return e?parseInt(e,10):NaN}n=n.parentElement}return 0}function Hee(n,e,t){n.get(Et).createKey(String(e),$ee(t))}function $ee(n){return tT(n,e=>{if(typeof e=="object"&&e.$mid===1)return nt.revive(e).toString();if(e instanceof nt)return e.toString()})}nn.registerCommand("_setContext",Hee);nn.registerCommand({id:"getContextKeyInfo",handler(){return[...Ie.all()].sort((n,e)=>n.key.localeCompare(e.key))},description:{description:m("getContextKeyInfo","A command that returns information about context keys"),args:[]}});nn.registerCommand("_generateContextKeyInfo",function(){const n=[],e=new Set;for(const t of Ie.all())e.has(t.key)||(e.add(t.key),n.push(t));n.sort((t,i)=>t.key.localeCompare(i.key)),console.log(JSON.stringify(n,void 0,2))});let zee=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}};class xI{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(const t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const i=this.lookupOrInsertNode(e),s=this.lookupOrInsertNode(t);i.outgoing.set(s.key,s),s.incoming.set(i.key,i)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const i of this._nodes.values())i.outgoing.delete(t),i.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let i=this._nodes.get(t);return i||(i=new zee(t,e),this._nodes.set(t,i)),i}isEmpty(){return this._nodes.size===0}toString(){const e=[];for(const[t,i]of this._nodes)e.push(`${t}
	(-> incoming)[${[...i.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...i.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this._nodes){const i=new Set([e]),s=this._findCycle(t,i);if(s)return s}}_findCycle(e,t){for(const[i,s]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);const o=this._findCycle(s,t);if(o)return o;t.delete(i)}}}const Uee=!1;class DI extends Error{constructor(e){var t;super("cyclic dependency between services"),this.message=(t=e.findCycleSlow())!==null&&t!==void 0?t:`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}class Q0{constructor(e=new zg,t=!1,i,s=Uee){var o;this._services=e,this._strict=t,this._parent=i,this._enableTracing=s,this._activeInstantiations=new Set,this._services.set(ai,this),this._globalGraph=s?(o=i==null?void 0:i._globalGraph)!==null&&o!==void 0?o:new xI(r=>r):void 0}createChild(e){return new Q0(e,this._strict,this,this._enableTracing)}invokeFunction(e,...t){const i=En.traceInvocation(this._enableTracing,e);let s=!1;try{return e({get:r=>{if(s)throw dS("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(r,i);if(!a)throw new Error(`[invokeFunction] unknown service '${r}'`);return a}},...t)}finally{s=!0,i.stop()}}createInstance(e,...t){let i,s;return e instanceof jo?(i=En.traceCreation(this._enableTracing,e.ctor),s=this._createInstance(e.ctor,e.staticArguments.concat(t),i)):(i=En.traceCreation(this._enableTracing,e),s=this._createInstance(e,t,i)),i.stop(),s}_createInstance(e,t=[],i){const s=So.getServiceDependencies(e).sort((a,l)=>a.index-l.index),o=[];for(const a of s){const l=this._getOrCreateServiceInstance(a.id,i);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),o.push(l)}const r=s.length>0?s[0].index:t.length;if(t.length!==r){console.trace(`[createInstance] First service dependency of ${e.name} at position ${r+1} conflicts with ${t.length} static arguments`);const a=r-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,r)}return Reflect.construct(e,t.concat(o))}_setServiceInstance(e,t){if(this._services.get(e)instanceof jo)this._services.set(e,t);else if(this._parent)this._parent._setServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));const i=this._getServiceInstanceOrDescriptor(e);return i instanceof jo?this._safeCreateAndCacheServiceInstance(e,i,t.branch(e,!0)):(t.branch(e,!1),i)}_safeCreateAndCacheServiceInstance(e,t,i){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,i)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,i){var s;const o=new xI(l=>l.id.toString());let r=0;const a=[{id:e,desc:t,_trace:i}];for(;a.length;){const l=a.pop();if(o.lookupOrInsertNode(l),r++>1e3)throw new DI(o);for(const c of So.getServiceDependencies(l.desc.ctor)){const d=this._getServiceInstanceOrDescriptor(c.id);if(d||this._throwIfStrict(`[createInstance] ${e} depends on ${c.id} which is NOT registered.`,!0),(s=this._globalGraph)===null||s===void 0||s.insertEdge(String(l.id),String(c.id)),d instanceof jo){const u={id:c.id,desc:d,_trace:l._trace.branch(c.id,!0)};o.insertEdge(l,u),a.push(u)}}}for(;;){const l=o.roots();if(l.length===0){if(!o.isEmpty())throw new DI(o);break}for(const{data:c}of l){if(this._getServiceInstanceOrDescriptor(c.id)instanceof jo){const u=this._createServiceInstanceWithOwner(c.id,c.desc.ctor,c.desc.staticArguments,c.desc.supportsDelayedInstantiation,c._trace);this._setServiceInstance(c.id,u)}o.removeNode(c)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,i=[],s,o){if(this._services.get(e)instanceof jo)return this._createServiceInstance(e,t,i,s,o);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,i,s,o);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t,i=[],s,o){if(s){const r=new Q0(void 0,this._strict,this,this._enableTracing);r._globalGraphImplicitDependency=String(e);const a=new Map,l=new JB(()=>{const c=r._createInstance(t,i,o);for(const[d,u]of a){const h=c[d];if(typeof h=="function")for(const f of u)h.apply(c,f)}return a.clear(),c});return new Proxy(Object.create(null),{get(c,d){if(!l.isInitialized&&typeof d=="string"&&(d.startsWith("onDid")||d.startsWith("onWill"))){let f=a.get(d);return f||(f=new Zn,a.set(d,f)),(p,_,v)=>{const b=f.push([p,_,v]);return st(b)}}if(d in c)return c[d];const u=l.value;let h=u[d];return typeof h!="function"||(h=h.bind(u),c[d]=h),h},set(c,d,u){return l.value[d]=u,!0},getPrototypeOf(c){return t.prototype}})}else return this._createInstance(t,i,o)}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}}class En{static traceInvocation(e,t){return e?new En(2,t.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):En._None}static traceCreation(e,t){return e?new En(1,t.name):En._None}constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}branch(e,t){const i=new En(3,e.toString());return this._dep.push([e,t,i]),i}stop(){const e=Date.now()-this._start;En._totals+=e;let t=!1;function i(o,r){const a=[],l=new Array(o+1).join("	");for(const[c,d,u]of r._dep)if(d&&u){t=!0,a.push(`${l}CREATES -> ${c}`);const h=i(o+1,u);h&&a.push(h)}else a.push(`${l}uses -> ${c}`);return a.join(`
`)}const s=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${i(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${En._totals.toFixed(2)}ms)`];(e>2||t)&&En.all.add(s.join(`
`))}}En.all=new Set;En._None=new class extends En{constructor(){super(0,null)}stop(){}branch(){return this}};En._totals=0;const qee=new Set([Je.inMemory,Je.vscodeSourceControl,Je.walkThrough,Je.walkThroughSnippet]);class jee{constructor(){this._byResource=new vn,this._byOwner=new Map}set(e,t,i){let s=this._byResource.get(e);s||(s=new Map,this._byResource.set(e,s)),s.set(t,i);let o=this._byOwner.get(t);o||(o=new vn,this._byOwner.set(t,o)),o.set(e,i)}get(e,t){const i=this._byResource.get(e);return i==null?void 0:i.get(t)}delete(e,t){let i=!1,s=!1;const o=this._byResource.get(e);o&&(i=o.delete(t));const r=this._byOwner.get(t);if(r&&(s=r.delete(e)),i!==s)throw new Error("illegal state");return i&&s}values(e){var t,i,s,o;return typeof e=="string"?(i=(t=this._byOwner.get(e))===null||t===void 0?void 0:t.values())!==null&&i!==void 0?i:lt.empty():nt.isUri(e)?(o=(s=this._byResource.get(e))===null||s===void 0?void 0:s.values())!==null&&o!==void 0?o:lt.empty():lt.map(lt.concat(...this._byOwner.values()),r=>r[1])}}class Kee{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new vn,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const i=this._data.get(t);i&&this._substract(i);const s=this._resourceStats(t);this._add(s),this._data.set(t,s)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(qee.has(e.scheme))return t;for(const{severity:i}of this._service.read({resource:e}))i===ks.Error?t.errors+=1:i===ks.Warning?t.warnings+=1:i===ks.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class Ea{constructor(){this._onMarkerChanged=new pT({delay:0,merge:Ea._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new jee,this._stats=new Kee(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const i of t||[])this.changeOne(e,i,[])}changeOne(e,t,i){if(v7(i))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const s=[];for(const o of i){const r=Ea._toMarker(e,t,o);r&&s.push(r)}this._data.set(t,e,s),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,i){let{code:s,severity:o,message:r,source:a,startLineNumber:l,startColumn:c,endLineNumber:d,endColumn:u,relatedInformation:h,tags:f}=i;if(r)return l=l>0?l:1,c=c>0?c:1,d=d>=l?d:l,u=u>0?u:c,{resource:t,owner:e,code:s,severity:o,message:r,source:a,startLineNumber:l,startColumn:c,endLineNumber:d,endColumn:u,relatedInformation:h,tags:f}}changeAll(e,t){const i=[],s=this._data.values(e);if(s)for(const o of s){const r=lt.first(o);r&&(i.push(r.resource),this._data.delete(r.resource,e))}if(__(t)){const o=new vn;for(const{resource:r,marker:a}of t){const l=Ea._toMarker(e,r,a);if(!l)continue;const c=o.get(r);c?c.push(l):(o.set(r,[l]),i.push(r))}for(const[r,a]of o)this._data.set(r,e,a)}i.length>0&&this._onMarkerChanged.fire(i)}read(e=Object.create(null)){let{owner:t,resource:i,severities:s,take:o}=e;if((!o||o<0)&&(o=-1),t&&i){const r=this._data.get(i,t);if(r){const a=[];for(const l of r)if(Ea._accept(l,s)){const c=a.push(l);if(o>0&&c===o)break}return a}else return[]}else if(!t&&!i){const r=[];for(const a of this._data.values())for(const l of a)if(Ea._accept(l,s)){const c=r.push(l);if(o>0&&c===o)return r}return r}else{const r=this._data.values(i??t),a=[];for(const l of r)for(const c of l)if(Ea._accept(c,s)){const d=a.push(c);if(o>0&&d===o)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new vn;for(const i of e)for(const s of i)t.set(s,!0);return Array.from(t.keys())}}class Gee extends oe{constructor(){super(...arguments),this._configurationModel=new Yi}get configurationModel(){return this._configurationModel}reload(){return this.resetConfigurationModel(),this.configurationModel}getConfigurationDefaultOverrides(){return{}}resetConfigurationModel(){this._configurationModel=new Yi;const e=zi.as($c.Configuration).getConfigurationProperties();this.updateConfigurationModel(Object.keys(e),e)}updateConfigurationModel(e,t){const i=this.getConfigurationDefaultOverrides();for(const s of e){const o=i[s],r=t[s];o!==void 0?this._configurationModel.addValue(s,o):r?this._configurationModel.addValue(s,r.default):this._configurationModel.removeValue(s)}}}class Zee extends oe{constructor(e,t=[]){super(),this.logger=new cW([e,...t]),this._register(e.onDidChangeLogLevel(i=>this.setLevel(i)))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(e){this.logger.setLevel(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}warn(e,...t){this.logger.warn(e,...t)}error(e,...t){this.logger.error(e,...t)}}const Yee=[];function Xee(){return Yee.slice(0)}var xl=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Wi=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},fu=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class Qee{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new q}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}let py=class{constructor(e){this.modelService=e}createModelReference(e){const t=this.modelService.getModel(e);return t?Promise.resolve(new WF(new Qee(t))):Promise.reject(new Error("Model not found"))}};py=xl([Wi(0,ys)],py);class v1{show(){return v1.NULL_PROGRESS_RUNNER}showWhile(e,t){return fu(this,void 0,void 0,function*(){yield e})}}v1.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};class Jee{withProgress(e,t,i){return t({report:()=>{}})}}class ete{constructor(){this.isExtensionDevelopment=!1,this.isBuilt=!1}}class tte{confirm(e){return fu(this,void 0,void 0,function*(){return{confirmed:this.doConfirm(e.message,e.detail),checkboxChecked:!1}})}doConfirm(e,t){let i=e;return t&&(i=i+`

`+t),window.confirm(i)}prompt(e){var t,i;return fu(this,void 0,void 0,function*(){let s;if(this.doConfirm(e.message,e.detail)){const r=[...(t=e.buttons)!==null&&t!==void 0?t:[]];e.cancelButton&&typeof e.cancelButton!="string"&&typeof e.cancelButton!="boolean"&&r.push(e.cancelButton),s=yield(i=r[0])===null||i===void 0?void 0:i.run({checkboxChecked:!1})}return{result:s}})}error(e,t){return fu(this,void 0,void 0,function*(){yield this.prompt({type:wi.Error,message:e,detail:t})})}}class pg{info(e){return this.notify({severity:wi.Info,message:e})}warn(e){return this.notify({severity:wi.Warning,message:e})}error(e){return this.notify({severity:wi.Error,message:e})}notify(e){switch(e.severity){case wi.Error:console.error(e.message);break;case wi.Warning:console.warn(e.message);break;default:console.log(e.message);break}return pg.NO_OP}prompt(e,t,i,s){return pg.NO_OP}status(e,t){return oe.None}}pg.NO_OP=new IG;let my=class{constructor(e){this._onWillExecuteCommand=new q,this._onDidExecuteCommand=new q,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const i=nn.getCommand(e);if(!i)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const s=this._instantiationService.invokeFunction.apply(this._instantiationService,[i.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(s)}catch(s){return Promise.reject(s)}}};my=xl([Wi(0,ai)],my);let zu=class extends $X{constructor(e,t,i,s,o,r){super(e,t,i,s,o),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];const a=f=>{const g=new Fe;g.add(ee(f,_e.KEY_DOWN,p=>{const _=new Wt(p);this._dispatch(_,_.target)&&(_.preventDefault(),_.stopPropagation())})),g.add(ee(f,_e.KEY_UP,p=>{const _=new Wt(p);this._singleModifierDispatch(_,_.target)&&_.preventDefault()})),this._domNodeListeners.push(new ite(f,g))},l=f=>{for(let g=0;g<this._domNodeListeners.length;g++){const p=this._domNodeListeners[g];p.domNode===f&&(this._domNodeListeners.splice(g,1),p.dispose())}},c=f=>{f.getOption(60)||a(f.getContainerDomNode())},d=f=>{f.getOption(60)||l(f.getContainerDomNode())};this._register(r.onCodeEditorAdd(c)),this._register(r.onCodeEditorRemove(d)),r.listCodeEditors().forEach(c);const u=f=>{a(f.getContainerDomNode())},h=f=>{l(f.getContainerDomNode())};this._register(r.onDiffEditorAdd(u)),this._register(r.onDiffEditorRemove(h)),r.listDiffEditors().forEach(u)}addDynamicKeybinding(e,t,i,s){return lr(nn.registerCommand(e,i),this.addDynamicKeybindings([{keybinding:t,command:e,when:s}]))}addDynamicKeybindings(e){const t=e.map(i=>{var s;return{keybinding:Uw(i.keybinding,Xs),command:(s=i.command)!==null&&s!==void 0?s:null,commandArgs:i.commandArgs,when:i.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}});return this._dynamicKeybindings=this._dynamicKeybindings.concat(t),this.updateResolver(),st(()=>{for(let i=0;i<this._dynamicKeybindings.length;i++)if(this._dynamicKeybindings[i]===t[0]){this._dynamicKeybindings.splice(i,t.length),this.updateResolver();return}})}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(Iu.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new _f(e,t,i=>this._log(i))}return this._cachedResolver}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(e,t){const i=[];let s=0;for(const o of e){const r=o.when||void 0,a=o.keybinding;if(!a)i[s++]=new ME(void 0,o.command,o.commandArgs,r,t,null,!1);else{const l=sg.resolveKeybinding(a,Xs);for(const c of l)i[s++]=new ME(c,o.command,o.commandArgs,r,t,null,!1)}}return i}resolveKeyboardEvent(e){const t=new xc(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new sg([t],Xs)}};zu=xl([Wi(0,Et),Wi(1,oo),Wi(2,Pg),Wi(3,zs),Wi(4,Cl),Wi(5,oi)],zu);class ite extends oe{constructor(e,t){super(),this.domNode=e,this._register(t)}}function kI(n){return n&&typeof n=="object"&&(!n.overrideIdentifier||typeof n.overrideIdentifier=="string")&&(!n.resource||n.resource instanceof nt)}class x5{constructor(){this._onDidChangeConfiguration=new q,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;const e=new Gee;this._configuration=new n1(e.reload(),new Yi,new Yi,new Yi),e.dispose()}getValue(e,t){const i=typeof e=="string"?e:void 0,s=kI(e)?e:kI(t)?t:{};return this._configuration.getValue(i,s,void 0)}updateValues(e){const t={data:this._configuration.toData()},i=[];for(const s of e){const[o,r]=s;this.getValue(o)!==r&&(this._configuration.updateValue(o,r),i.push(o))}if(i.length>0){const s=new BX({keys:i,overrides:[]},t,this._configuration);s.source=8,s.sourceConfig=null,this._onDidChangeConfiguration.fire(s)}return Promise.resolve()}updateValue(e,t,i,s){return this.updateValues([[e,t]])}inspect(e,t={}){return this._configuration.inspect(e,t,void 0)}}let _y=class{constructor(e,t,i){this.configurationService=e,this.modelService=t,this.languageService=i,this._onDidChangeConfiguration=new q,this.configurationService.onDidChangeConfiguration(s=>{this._onDidChangeConfiguration.fire({affectedKeys:s.affectedKeys,affectsConfiguration:(o,r)=>s.affectsConfiguration(r)})})}getValue(e,t,i){const s=Y.isIPosition(t)?t:null,o=s?typeof i=="string"?i:void 0:typeof t=="string"?t:void 0,r=e?this.getLanguage(e,s):void 0;return typeof o>"u"?this.configurationService.getValue({resource:e,overrideIdentifier:r}):this.configurationService.getValue(o,{resource:e,overrideIdentifier:r})}getLanguage(e,t){const i=this.modelService.getModel(e);return i?t?i.getLanguageIdAtPosition(t.lineNumber,t.column):i.getLanguageId():this.languageService.guessLanguageIdByFilepathOrFirstLine(e)}};_y=xl([Wi(0,mi),Wi(1,ys),Wi(2,Mi)],_y);let by=class{constructor(e){this.configurationService=e}getEOL(e,t){const i=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return i&&typeof i=="string"&&i!=="auto"?i:Cn||gt?`
`:`\r
`}};by=xl([Wi(0,mi)],by);class nte{publicLog2(){}}class mg{constructor(){const e=nt.from({scheme:mg.SCHEME,authority:"model",path:"/"});this.workspace={id:iQ,folders:[new eQ({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}getWorkspaceFolder(e){return e&&e.scheme===mg.SCHEME?this.workspace.folders[0]:null}}mg.SCHEME="inmemory";function Uu(n,e,t){if(!e||!(n instanceof x5))return;const i=[];Object.keys(e).forEach(s=>{AX(s)&&i.push([`editor.${s}`,e[s]]),t&&MX(s)&&i.push([`diffEditor.${s}`,e[s]])}),i.length>0&&n.updateValues(i)}let vy=class{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}apply(e,t){return fu(this,void 0,void 0,function*(){const i=Array.isArray(e)?e:AL.convert(e),s=new Map;for(const a of i){if(!(a instanceof bc))throw new Error("bad edit - only text edits are supported");const l=this._modelService.getModel(a.resource);if(!l)throw new Error("bad edit - model not found");if(typeof a.versionId=="number"&&l.getVersionId()!==a.versionId)throw new Error("bad state - model changed in the meantime");let c=s.get(l);c||(c=[],s.set(l,c)),c.push(PX.replaceMove($.lift(a.textEdit.range),a.textEdit.text))}let o=0,r=0;for(const[a,l]of s)a.pushStackElement(),a.pushEditOperations([],l,()=>[]),a.pushStackElement(),r+=1,o+=l.length;return{ariaSummary:yw($C.bulkEditServiceSummary,o,r),isApplied:o>0}})}};vy=xl([Wi(0,ys)],vy);class ste{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}getUriBasenameLabel(e){return rL(e)}}let wy=class extends zC{constructor(e,t){super(e),this._codeEditorService=t}showContextView(e,t,i){if(!t){const s=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();s&&(t=s.getContainerDomNode())}return super.showContextView(e,t,i)}};wy=xl([Wi(0,ih),Wi(1,oi)],wy);class ote{constructor(){this._neverEmitter=new q,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}}class rte extends rg{constructor(){super()}}class ate extends Zee{constructor(){super(new lW)}}let Cy=class extends qC{constructor(e,t,i,s,o,r){super(e,t,i,s,o,r),this.configure({blockMouse:!1})}};Cy=xl([Wi(0,Pg),Wi(1,zs),Wi(2,Gg),Wi(3,$s),Wi(4,U_),Wi(5,Et)],Cy);class lte{playAudioCue(e,t){return fu(this,void 0,void 0,function*(){})}}vt(mi,x5,0);vt(c4,_y,0);vt(d4,by,0);vt(JX,mg,0);vt(GX,ste,0);vt(Pg,nte,0);vt(BA,tte,0);vt($A,ete,0);vt(zs,pg,0);vt(Xc,Ea,0);vt(Mi,rte,0);vt(js,Nee,0);vt(Cl,ate,0);vt(ys,K0,0);vt($4,YC,0);vt(Et,gy,0);vt(HY,Jee,0);vt(Zg,v1,0);vt(o1,vQ,0);vt(jg,Hw,0);vt(IX,vy,0);vt(nQ,ote,0);vt($_,py,0);vt(Hc,cy,0);vt(vr,RJ,0);vt(oo,my,0);vt($s,zu,0);vt(m5,ay,0);vt(Gg,wy,0);vt(IL,ZC,0);vt(Kg,fy,0);vt(Ll,Cy,0);vt(U_,dy,0);vt(Xu,lte,0);var Ne;(function(n){const e=new zg;for(const[l,c]of LD())e.set(l,c);const t=new Q0(e,!0);e.set(ai,t);function i(l){s||r({});const c=e.get(l);if(!c)throw new Error("Missing service "+l);return c instanceof jo?t.invokeFunction(d=>d.get(l)):c}n.get=i;let s=!1;const o=new q;function r(l){if(s)return t;s=!0;for(const[d,u]of LD())e.get(d)||e.set(d,u);for(const d in l)if(l.hasOwnProperty(d)){const u=ct(d);e.get(u)instanceof jo&&e.set(u,l[d])}const c=Xee();for(const d of c)try{t.createInstance(d)}catch(u){$t(u)}return o.fire(),t}n.initialize=r;function a(l){if(s)return l();const c=new Fe,d=c.add(o.event(()=>{d.dispose(),c.add(l())}));return c}n.withServices=a})(Ne||(Ne={}));let cte;function Qr(){return cte}let D5;function dte(n){D5=n}class k5{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e){return D5(t=>e(this.read(t),t),()=>{const t=sh(e);if(t!==void 0)return t;const s=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(e.toString());return s?`${this.debugName}.${s[2]}`:`${this.debugName} (mapped)`})}}class tp extends k5{constructor(){super(...arguments),this.observers=new Set}addObserver(e){const t=this.observers.size;this.observers.add(e),t===0&&this.onFirstObserverAdded()}removeObserver(e){this.observers.delete(e)&&this.observers.size===0&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}}function wn(n,e){const t=new E5(n,e);try{n(t)}finally{t.finish()}}function ute(n,e,t){n?e(n):wn(e,t)}class E5{constructor(e,t){var i;this._fn=e,this._getDebugName=t,this.updatingObservers=[],(i=Qr())===null||i===void 0||i.handleBeginTransaction(this)}getDebugName(){return this._getDebugName?this._getDebugName():sh(this._fn)}updateObserver(e,t){this.updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){var e;const t=this.updatingObservers;this.updatingObservers=null;for(const{observer:i,observable:s}of t)i.endUpdate(s);(e=Qr())===null||e===void 0||e.handleEndTransaction()}}function sh(n){const e=n.toString(),i=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e),s=i?i[1]:void 0;return s==null?void 0:s.trim()}function Zt(n,e){return new I5(n,e)}class I5 extends tp{constructor(e,t){super(),this.debugName=e,this._value=t}get(){return this._value}set(e,t,i){var s;if(this._value===e)return;let o;t||(t=o=new E5(()=>{},()=>`Setting ${this.debugName}`));try{const r=this._value;this._setValue(e),(s=Qr())===null||s===void 0||s.handleObservableChanged(this,{oldValue:r,newValue:e,change:i,didChange:!0,hadValue:!0});for(const a of this.observers)t.updateObserver(a,this),a.handleChange(this,i)}finally{o&&o.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}function hte(n,e){return new fte(n,e)}class fte extends I5{_setValue(e){this._value!==e&&(this._value&&this._value.dispose(),this._value=e)}dispose(){var e;(e=this._value)===null||e===void 0||e.dispose()}}const N5=(n,e)=>n===e;function _t(n,e){return new T5(e,n,void 0,void 0,void 0,N5)}function _g(n,e){const t=new Fe;return new T5(n,i=>(t.clear(),e(i,t)),void 0,void 0,()=>t.dispose(),N5)}dte(_t);class T5 extends tp{get debugName(){return this._debugName?typeof this._debugName=="function"?this._debugName():this._debugName:sh(this._computeFn)||"(anonymous)"}constructor(e,t,i,s,o=void 0,r){var a,l;super(),this._debugName=e,this._computeFn=t,this.createChangeSummary=i,this._handleChange=s,this._handleLastObserverRemoved=o,this._equalityComparator=r,this.state=0,this.value=void 0,this.updateCount=0,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=void 0,this.changeSummary=(a=this.createChangeSummary)===null||a===void 0?void 0:a.call(this),(l=Qr())===null||l===void 0||l.handleDerivedCreated(this)}onLastObserverRemoved(){var e;this.state=0,this.value=void 0;for(const t of this.dependencies)t.removeObserver(this);this.dependencies.clear(),(e=this._handleLastObserverRemoved)===null||e===void 0||e.call(this)}get(){var e;if(this.observers.size===0){const t=this._computeFn(this,(e=this.createChangeSummary)===null||e===void 0?void 0:e.call(this));return this.onLastObserverRemoved(),t}else{do{if(this.state===1){for(const t of this.dependencies)if(t.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){var e,t;if(this.state===3)return;const i=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=i;const s=this.state!==0,o=this.value;this.state=3;const r=this.changeSummary;this.changeSummary=(e=this.createChangeSummary)===null||e===void 0?void 0:e.call(this);try{this.value=this._computeFn(this,r)}finally{for(const l of this.dependenciesToBeRemoved)l.removeObserver(this);this.dependenciesToBeRemoved.clear()}const a=s&&!this._equalityComparator(o,this.value);if((t=Qr())===null||t===void 0||t.handleDerivedRecomputed(this,{oldValue:o,newValue:this.value,change:void 0,didChange:a,hadValue:s}),a)for(const l of this.observers)l.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){this.updateCount++;const t=this.updateCount===1;if(this.state===3&&(this.state=1,!t))for(const i of this.observers)i.handlePossibleChange(this);if(t)for(const i of this.observers)i.beginUpdate(this)}endUpdate(e){if(this.updateCount--,this.updateCount===0){const t=[...this.observers];for(const i of t)i.endUpdate(this)}if(this.updateCount<0)throw new Ai}handlePossibleChange(e){if(this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){this.state=1;for(const t of this.observers)t.handlePossibleChange(this)}}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){const i=this._handleChange?this._handleChange({changedObservable:e,change:t,didChange:o=>o===e},this.changeSummary):!0,s=this.state===3;if(i&&(this.state===1||s)&&(this.state=2,s))for(const o of this.observers)o.handlePossibleChange(this)}}readObservable(e){e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}addObserver(e){const t=!this.observers.has(e)&&this.updateCount>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this.updateCount>0;super.removeObserver(e),t&&e.endUpdate(this)}}function A5(n,e){return new C1(n.debugName,e,void 0,void 0)}function pi(n){return new C1(void 0,n,void 0,void 0)}function w1(n,e){return new C1(n.debugName,e,n.createEmptyChangeSummary,n.handleChange)}function us(n){const e=new Fe,t=A5({debugName:()=>sh(n)||"(anonymous)"},i=>{e.clear(),n(i,e)});return st(()=>{t.dispose(),e.dispose()})}class C1{get debugName(){if(typeof this._debugName=="string")return this._debugName;if(typeof this._debugName=="function"){const t=this._debugName();if(t!==void 0)return t}const e=sh(this._runFn);return e!==void 0?e:"(anonymous)"}constructor(e,t,i,s){var o,r;this._debugName=e,this._runFn=t,this.createChangeSummary=i,this._handleChange=s,this.state=2,this.updateCount=0,this.disposed=!1,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=(o=this.createChangeSummary)===null||o===void 0?void 0:o.call(this),(r=Qr())===null||r===void 0||r.handleAutorunCreated(this),this._runIfNeeded()}dispose(){this.disposed=!0;for(const e of this.dependencies)e.removeObserver(this);this.dependencies.clear()}_runIfNeeded(){var e,t,i;if(this.state===3)return;const s=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=s,this.state=3;try{if(!this.disposed){(e=Qr())===null||e===void 0||e.handleAutorunTriggered(this);const o=this.changeSummary;this.changeSummary=(t=this.createChangeSummary)===null||t===void 0?void 0:t.call(this),this._runFn(this,o)}}finally{(i=Qr())===null||i===void 0||i.handleAutorunFinished(this);for(const o of this.dependenciesToBeRemoved)o.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.state===3&&(this.state=1),this.updateCount++}endUpdate(){if(this.updateCount===1)do{if(this.state===1){this.state=3;for(const e of this.dependencies)if(e.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3);this.updateCount--,Af(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(this.state=1)}handleChange(e,t){this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(!this._handleChange||this._handleChange({changedObservable:e,change:t,didChange:s=>s===e},this.changeSummary))&&(this.state=2)}readObservable(e){if(this.disposed)return e.get();e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}}(function(n){n.Observer=C1})(pi||(pi={}));function EI(n){return new gte(n)}class gte extends k5{constructor(e){super(),this.value=e}get debugName(){return this.toString()}get(){return this.value}addObserver(e){}removeObserver(e){}toString(){return`Const: ${this.value}`}}function pte(n,e){return new Promise(t=>{let i=!1,s=!1;const o=pi(r=>{const a=n.read(r);e(a)&&(i?o.dispose():s=!0,t(a))});i=!0,s&&o.dispose()})}function Xn(n,e){return new M5(n,e)}class M5 extends tp{constructor(e,t){super(),this.event=e,this._getValue=t,this.hasValue=!1,this.handleEvent=i=>{var s;const o=this._getValue(i),r=!this.hasValue||this.value!==o;(s=Qr())===null||s===void 0||s.handleFromEventObservableTriggered(this,{oldValue:this.value,newValue:o,change:void 0,didChange:r,hadValue:this.hasValue}),r&&(this.value=o,this.hasValue&&wn(a=>{for(const l of this.observers)a.updateObserver(l,this),l.handleChange(this,void 0)},()=>{const a=this.getDebugName();return"Event fired"+(a?`: ${a}`:"")}),this.hasValue=!0)}}getDebugName(){return sh(this._getValue)}get debugName(){const e=this.getDebugName();return"From Event"+(e?`: ${e}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}}(function(n){n.Observer=M5})(Xn||(Xn={}));function Es(n,e){return new mte(n,e)}class mte extends tp{constructor(e,t){super(),this.debugName=e,this.event=t,this.handleEvent=()=>{wn(i=>{for(const s of this.observers)i.updateObserver(s,this),s.handleChange(this,void 0)},()=>this.debugName)}}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0}get(){}}function _te(n){return new bte(n)}class bte extends tp{constructor(e){super(),this.debugName=e}trigger(e,t){if(!e){wn(i=>{this.trigger(i,t)},()=>`Trigger signal ${this.debugName}`);return}for(const i of this.observers)e.updateObserver(i,this),i.handleChange(this,t)}get(){}}function J0(n,e){const t=new vte(e??!1);return n.addObserver(t),e&&n.reportChanges(),st(()=>{n.removeObserver(t)})}class vte{constructor(e){this.forceRecompute=e,this.counter=0}beginUpdate(e){this.counter++}endUpdate(e){this.counter--,this.counter===0&&this.forceRecompute&&e.reportChanges()}handlePossibleChange(e){}handleChange(e,t){}}function wte(n,e,t,i){if(n.length===0)return e;if(e.length===0)return n;const s=[];let o=0,r=0;for(;o<n.length&&r<e.length;){const a=n[o],l=e[r],c=t(a),d=t(l);c<d?(s.push(a),o++):c>d?(s.push(l),r++):(s.push(i(a,l)),o++,r++)}for(;o<n.length;)s.push(n[o]),o++;for(;r<e.length;)s.push(e[r]),r++;return s}function e_(n,e){const t=new Fe,i=n.createDecorationsCollection();return t.add(A5({debugName:`Apply decorations from ${e.debugName}`},s=>{const o=e.read(s);i.set(o)})),t.add({dispose:()=>{i.clear()}}),t}function im(n,e){return n.appendChild(e),st(()=>{n.removeChild(e)})}class Cte extends oe{get width(){return this._width}get height(){return this._height}constructor(e,t){super(),this.elementSizeObserver=this._register(new qS(e,t)),this._width=Zt("width",this.elementSizeObserver.getWidth()),this._height=Zt("height",this.elementSizeObserver.getHeight()),this._register(this.elementSizeObserver.onDidChange(i=>wn(s=>{this._width.set(this.elementSizeObserver.getWidth(),s),this._height.set(this.elementSizeObserver.getHeight(),s)})))}observe(e){this.elementSizeObserver.observe(e)}setAutomaticLayout(e){e?this.elementSizeObserver.startObserving():this.elementSizeObserver.stopObserving()}}function II(n,e){let t=n.get(),i=t,s=t;const o=Zt("animatedValue",t);let r=-1;const a=300;let l;e.add(w1({createEmptyChangeSummary:()=>({animate:!1}),handleChange:(d,u)=>(d.didChange(n)&&(u.animate=u.animate||d.change),!0)},(d,u)=>{l!==void 0&&(cancelAnimationFrame(l),l=void 0),i=s,t=n.read(d),r=Date.now()-(u.animate?0:a),c()}));function c(){const d=Date.now()-r;s=Math.floor(yte(d,i,t-i,a)),d<a?l=requestAnimationFrame(c):s=t,o.set(s,void 0)}return o}function yte(n,e,t,i){return n===i?e+t:t*(-Math.pow(2,-10*n/i)+1)+e}class R5 extends oe{constructor(e,t,i){super(),this._register(new y1(e,i)),this._register(rl(i,{height:t.actualHeight,top:t.actualTop}))}}class t_{get afterLineNumber(){return this._afterLineNumber.get()}constructor(e,t){this._afterLineNumber=e,this.heightInPx=t,this.domNode=document.createElement("div"),this._actualTop=Zt("actualTop",void 0),this._actualHeight=Zt("actualHeight",void 0),this.actualTop=this._actualTop,this.actualHeight=this._actualHeight,this.showInHiddenAreas=!0,this.onChange=this._afterLineNumber,this.onDomNodeTop=i=>{this._actualTop.set(i,void 0)},this.onComputedHeight=i=>{this._actualHeight.set(i,void 0)}}}class y1{constructor(e,t){this._editor=e,this._domElement=t,this._overlayWidgetId=`managedOverlayWidget-${y1._counter++}`,this._overlayWidget={getId:()=>this._overlayWidgetId,getDomNode:()=>this._domElement,getPosition:()=>null},this._editor.addOverlayWidget(this._overlayWidget)}dispose(){this._editor.removeOverlayWidget(this._overlayWidget)}}y1._counter=0;function rl(n,e){return pi(t=>{for(let[i,s]of Object.entries(e))s&&typeof s=="object"&&"read"in s&&(s=s.read(t)),typeof s=="number"&&(s=`${s}px`),i=i.replace(/[A-Z]/g,o=>"-"+o.toLowerCase()),n.style[i]=s})}function Hl(n,e){return Ste([n],e),n}function Ste(n,e){const t=globalThis.$hotReload_deprecateExports;if(!t)return;Es("reload",s=>{function o(r,a){return[...Object.values(r)].some(l=>n.includes(l))?(s(void 0),!0):!1}return t.add(o),{dispose(){t.delete(o)}}}).read(e)}function i_(n,e,t){const i=new Fe,s=[];return i.add(pi(o=>{const r=e.read(o),a=new Map,l=new Map;t&&t(!0),n.changeViewZones(c=>{for(const d of s)c.removeZone(d);s.length=0;for(const d of r){const u=c.addZone(d);s.push(u),a.set(d,u)}}),t&&t(!1),i.add(w1({createEmptyChangeSummary(){return[]},handleChange(c,d){const u=l.get(c.changedObservable);return u!==void 0&&d.push(u),!0}},(c,d)=>{for(const u of r)u.onChange&&(l.set(u.onChange,a.get(u)),u.onChange.read(c));t&&t(!0),n.changeViewZones(u=>{for(const h of d)u.layoutZone(h)}),t&&t(!1)}))})),i.add({dispose(){t&&t(!0),n.changeViewZones(o=>{for(const r of s)o.removeZone(r)}),t&&t(!1)}}),i}var ix=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},nx=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},Lte=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const xte=qs("diff-review-insert",we.add,m("accessibleDiffViewerInsertIcon","Icon for 'Insert' in accessible diff viewer.")),Dte=qs("diff-review-remove",we.remove,m("accessibleDiffViewerRemoveIcon","Icon for 'Remove' in accessible diff viewer.")),kte=qs("diff-review-close",we.close,m("accessibleDiffViewerCloseIcon","Icon for 'Close' in accessible diff viewer."));let yy=class extends oe{constructor(e,t,i,s,o,r,a,l,c){super(),this._parentNode=e,this._visible=t,this._setVisible=i,this._canClose=s,this._width=o,this._height=r,this._diffs=a,this._editors=l,this._instantiationService=c,this.model=_g("model",(d,u)=>{const h=this._visible.read(d);if(this._parentNode.style.visibility=h?"visible":"hidden",!h)return null;const f=u.add(this._instantiationService.createInstance(Sy,this._diffs,this._editors,this._setVisible,this._canClose)),g=u.add(this._instantiationService.createInstance(Ly,this._parentNode,f,this._width,this._height,this._editors));return{model:f,view:g}}),this._register(J0(this.model,!0))}next(){wn(e=>{const t=this._visible.get();this._setVisible(!0,e),t&&this.model.get().model.nextGroup(e)})}prev(){wn(e=>{this._setVisible(!0,e),this.model.get().model.previousGroup(e)})}close(){wn(e=>{this._setVisible(!1,e)})}};yy=ix([nx(8,ai)],yy);let Sy=class extends oe{constructor(e,t,i,s,o){super(),this._diffs=e,this._editors=t,this._setVisible=i,this.canClose=s,this._audioCueService=o,this._groups=Zt("groups",[]),this._currentGroupIdx=Zt("currentGroupIdx",0),this._currentElementIdx=Zt("currentElementIdx",0),this.groups=this._groups,this.currentGroup=this._currentGroupIdx.map((r,a)=>this._groups.read(a)[r]),this.currentGroupIndex=this._currentGroupIdx,this.currentElement=this._currentElementIdx.map((r,a)=>{var l;return(l=this.currentGroup.read(a))===null||l===void 0?void 0:l.lines[r]}),this._register(pi(r=>{const a=this._diffs.read(r);if(!a){this._groups.set([],void 0);return}const l=Ete(a,this._editors.original.getModel().getLineCount(),this._editors.modified.getModel().getLineCount());wn(c=>{const d=this._editors.modified.getPosition();if(d){const u=l.findIndex(h=>(d==null?void 0:d.lineNumber)<h.range.modified.endLineNumberExclusive);u!==-1&&this._currentGroupIdx.set(u,c)}this._groups.set(l,c)})})),this._register(pi(r=>{const a=this.currentElement.read(r);(a==null?void 0:a.type)===bn.Deleted?this._audioCueService.playAudioCue(Ke.diffLineDeleted,{source:"accessibleDiffViewer.currentElementChanged"}):(a==null?void 0:a.type)===bn.Added&&this._audioCueService.playAudioCue(Ke.diffLineInserted,{source:"accessibleDiffViewer.currentElementChanged"})})),this._register(pi(r=>{var a;const l=this.currentElement.read(r);if(l&&l.type!==bn.Header){const c=(a=l.modifiedLineNumber)!==null&&a!==void 0?a:l.diff.modifiedRange.startLineNumber;this._editors.modified.setSelection($.fromPositions(new Y(c,1)))}}))}_goToGroupDelta(e,t){const i=this.groups.get();!i||i.length<=1||ute(t,s=>{this._currentGroupIdx.set(et.ofLength(i.length).clipCyclic(this._currentGroupIdx.get()+e),s),this._currentElementIdx.set(0,s)})}nextGroup(e){this._goToGroupDelta(1,e)}previousGroup(e){this._goToGroupDelta(-1,e)}_goToLineDelta(e){const t=this.currentGroup.get();!t||t.lines.length<=1||wn(i=>{this._currentElementIdx.set(et.ofLength(t.lines.length).clip(this._currentElementIdx.get()+e),i)})}goToNextLine(){this._goToLineDelta(1)}goToPreviousLine(){this._goToLineDelta(-1)}goToLine(e){const t=this.currentGroup.get();if(!t)return;const i=t.lines.indexOf(e);i!==-1&&wn(s=>{this._currentElementIdx.set(i,s)})}revealCurrentElementInEditor(){this._setVisible(!1,void 0);const e=this.currentElement.get();e&&(e.type===bn.Deleted?(this._editors.original.setSelection($.fromPositions(new Y(e.originalLineNumber,1))),this._editors.original.revealLine(e.originalLineNumber),this._editors.original.focus()):(e.type!==bn.Header&&(this._editors.modified.setSelection($.fromPositions(new Y(e.modifiedLineNumber,1))),this._editors.modified.revealLine(e.modifiedLineNumber)),this._editors.modified.focus()))}close(){this._setVisible(!1,void 0),this._editors.modified.focus()}};Sy=ix([nx(4,Xu)],Sy);const Eh=3;function Ete(n,e,t){const i=[];for(const s of Pte(n,(o,r)=>r.modifiedRange.startLineNumber-o.modifiedRange.endLineNumberExclusive<2*Eh)){const o=[];o.push(new Nte);const r=new it(Math.max(1,s[0].originalRange.startLineNumber-Eh),Math.min(s[s.length-1].originalRange.endLineNumberExclusive+Eh,e+1)),a=new it(Math.max(1,s[0].modifiedRange.startLineNumber-Eh),Math.min(s[s.length-1].modifiedRange.endLineNumberExclusive+Eh,t+1));Rte(s,(d,u)=>{const h=new it(d?d.originalRange.endLineNumberExclusive:r.startLineNumber,u?u.originalRange.startLineNumber:r.endLineNumberExclusive),f=new it(d?d.modifiedRange.endLineNumberExclusive:a.startLineNumber,u?u.modifiedRange.startLineNumber:a.endLineNumberExclusive);h.forEach(g=>{o.push(new Mte(g,f.startLineNumber+(g-h.startLineNumber)))}),u&&(u.originalRange.forEach(g=>{o.push(new Tte(u,g))}),u.modifiedRange.forEach(g=>{o.push(new Ate(u,g))}))});const l=s[0].modifiedRange.join(s[s.length-1].modifiedRange),c=s[0].originalRange.join(s[s.length-1].originalRange);i.push(new Ite(new hl(l,c),o))}return i}var bn;(function(n){n[n.Header=0]="Header",n[n.Unchanged=1]="Unchanged",n[n.Deleted=2]="Deleted",n[n.Added=3]="Added"})(bn||(bn={}));class Ite{constructor(e,t){this.range=e,this.lines=t}}class Nte{constructor(){this.type=bn.Header}}class Tte{constructor(e,t){this.diff=e,this.originalLineNumber=t,this.type=bn.Deleted,this.modifiedLineNumber=void 0}}class Ate{constructor(e,t){this.diff=e,this.modifiedLineNumber=t,this.type=bn.Added,this.originalLineNumber=void 0}}class Mte{constructor(e,t){this.originalLineNumber=e,this.modifiedLineNumber=t,this.type=bn.Unchanged}}let Ly=class extends oe{constructor(e,t,i,s,o,r){super(),this._element=e,this._model=t,this._width=i,this._height=s,this._editors=o,this._languageService=r,this.domNode=this._element,this.domNode.className="diff-review monaco-editor-background";const a=document.createElement("div");a.className="diff-review-actions",this._actionBar=this._register(new ml(a)),this._register(pi(l=>{this._actionBar.clear(),this._model.canClose.read(l)&&this._actionBar.push(new ws("diffreview.close",m("label.close","Close"),"close-diff-review "+je.asClassName(kte),!0,()=>Lte(this,void 0,void 0,function*(){return t.close()})),{label:!1,icon:!0})})),this._content=document.createElement("div"),this._content.className="diff-review-content",this._content.setAttribute("role","code"),this._scrollbar=this._register(new QS(this._content,{})),Mn(this.domNode,this._scrollbar.getDomNode(),a),this._register(st(()=>{Mn(this.domNode)})),this._register(rl(this.domNode,{width:this._width,height:this._height})),this._register(rl(this._content,{width:this._width,height:this._height})),this._register(us((l,c)=>{this._model.currentGroup.read(l),this._render(c)})),this._register(Ci(this.domNode,"keydown",l=>{(l.equals(18)||l.equals(2066)||l.equals(530))&&(l.preventDefault(),this._model.goToNextLine()),(l.equals(16)||l.equals(2064)||l.equals(528))&&(l.preventDefault(),this._model.goToPreviousLine()),(l.equals(9)||l.equals(2057)||l.equals(521)||l.equals(1033))&&(l.preventDefault(),this._model.close()),(l.equals(10)||l.equals(3))&&(l.preventDefault(),this._model.revealCurrentElementInEditor())}))}_render(e){const t=this._editors.original.getOptions(),i=this._editors.modified.getOptions(),s=document.createElement("div");s.className="diff-review-table",s.setAttribute("role","list"),s.setAttribute("aria-label",m("ariaLabel","Accessible Diff Viewer. Use arrow up and down to navigate.")),$i(s,i.get(49)),Mn(this._content,s);const o=this._editors.original.getModel(),r=this._editors.modified.getModel();if(!o||!r)return;const a=o.getOptions(),l=r.getOptions(),c=i.get(65),d=this._model.currentGroup.get();for(const u of(d==null?void 0:d.lines)||[]){if(!d)break;let h;if(u.type===bn.Header){const g=document.createElement("div");g.className="diff-review-row",g.setAttribute("role","listitem");const p=d.range,_=this._model.currentGroupIndex.get(),v=this._model.groups.get().length,b=k=>k===0?m("no_lines_changed","no lines changed"):k===1?m("one_line_changed","1 line changed"):m("more_lines_changed","{0} lines changed",k),w=b(p.original.length),C=b(p.modified.length);g.setAttribute("aria-label",m({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",_+1,v,p.original.startLineNumber,w,p.modified.startLineNumber,C));const S=document.createElement("div");S.className="diff-review-cell diff-review-summary",S.appendChild(document.createTextNode(`${_+1}/${v}: @@ -${p.original.startLineNumber},${p.original.length} +${p.modified.startLineNumber},${p.modified.length} @@`)),g.appendChild(S),h=g}else h=this._createRow(u,c,this._width.get(),t,o,a,i,r,l);s.appendChild(h);const f=_t(g=>this._model.currentElement.read(g)===u);e.add(pi(g=>{const p=f.read(g);h.tabIndex=p?0:-1,p&&h.focus()})),e.add(ee(h,"focus",()=>{this._model.goToLine(u)}))}this._scrollbar.scanDomNode()}_createRow(e,t,i,s,o,r,a,l,c){const d=s.get(142),u=d.glyphMarginWidth+d.lineNumbersWidth,h=a.get(142),f=10+h.glyphMarginWidth+h.lineNumbersWidth;let g="diff-review-row",p="";const _="diff-review-spacer";let v=null;switch(e.type){case bn.Added:g="diff-review-row line-insert",p=" char-insert",v=xte;break;case bn.Deleted:g="diff-review-row line-delete",p=" char-delete",v=Dte;break}const b=document.createElement("div");b.style.minWidth=i+"px",b.className=g,b.setAttribute("role","listitem"),b.ariaLevel="";const w=document.createElement("div");w.className="diff-review-cell",w.style.height=`${t}px`,b.appendChild(w);const C=document.createElement("span");C.style.width=u+"px",C.style.minWidth=u+"px",C.className="diff-review-line-number"+p,e.originalLineNumber!==void 0?C.appendChild(document.createTextNode(String(e.originalLineNumber))):C.innerText=" ",w.appendChild(C);const S=document.createElement("span");S.style.width=f+"px",S.style.minWidth=f+"px",S.style.paddingRight="10px",S.className="diff-review-line-number"+p,e.modifiedLineNumber!==void 0?S.appendChild(document.createTextNode(String(e.modifiedLineNumber))):S.innerText=" ",w.appendChild(S);const k=document.createElement("span");if(k.className=_,v){const I=document.createElement("span");I.className=je.asClassName(v),I.innerText="  ",k.appendChild(I)}else k.innerText="  ";w.appendChild(k);let L;if(e.modifiedLineNumber!==void 0){let I=this._getLineHtml(l,a,c.tabSize,e.modifiedLineNumber,this._languageService.languageIdCodec);Ka._ttPolicy&&(I=Ka._ttPolicy.createHTML(I)),w.insertAdjacentHTML("beforeend",I),L=l.getLineContent(e.modifiedLineNumber)}else{let I=this._getLineHtml(o,s,r.tabSize,e.originalLineNumber,this._languageService.languageIdCodec);Ka._ttPolicy&&(I=Ka._ttPolicy.createHTML(I)),w.insertAdjacentHTML("beforeend",I),L=o.getLineContent(e.originalLineNumber)}L.length===0&&(L=m("blankLine","blank"));let x="";switch(e.type){case bn.Unchanged:e.originalLineNumber===e.modifiedLineNumber?x=m({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",L,e.originalLineNumber):x=m("equalLine","{0} original line {1} modified line {2}",L,e.originalLineNumber,e.modifiedLineNumber);break;case bn.Added:x=m("insertLine","+ {0} modified line {1}",L,e.modifiedLineNumber);break;case bn.Deleted:x=m("deleteLine","- {0} original line {1}",L,e.originalLineNumber);break}return b.setAttribute("aria-label",x),b}_getLineHtml(e,t,i,s,o){const r=e.getLineContent(s),a=t.get(49),l=Hi.createEmpty(r,o),c=hn.isBasicASCII(r,e.mightContainNonBasicASCII()),d=hn.containsRTL(r,c,e.mightContainRTL());return Rg(new yl(a.isMonospace&&!t.get(32),a.canUseHalfwidthRightwardsArrow,r,!1,c,d,0,l,[],i,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(115),t.get(97),t.get(92),t.get(50)!==Kn.OFF,null)).html}};Ly=ix([nx(5,Mi)],Ly);function Rte(n,e){let t;for(const i of n)e(t,i),t=i;e(t,void 0)}function*Pte(n,e){let t,i;for(const s of n)i!==void 0&&e(i,s)?t.push(s):(t&&(yield t),t=[s]),i=s;t&&(yield t)}const Ote=qs("diff-insert",we.add,m("diffInsertIcon","Line decoration for inserts in the diff editor.")),P5=qs("diff-remove",we.remove,m("diffRemoveIcon","Line decoration for removals in the diff editor.")),NI=Ft.register({className:"line-insert",description:"line-insert",isWholeLine:!0,linesDecorationsClassName:"insert-sign "+je.asClassName(Ote),marginClassName:"gutter-insert"}),TI=Ft.register({className:"line-delete",description:"line-delete",isWholeLine:!0,linesDecorationsClassName:"delete-sign "+je.asClassName(P5),marginClassName:"gutter-delete"}),AI=Ft.register({className:"line-insert",description:"line-insert",isWholeLine:!0,marginClassName:"gutter-insert"}),MI=Ft.register({className:"line-delete",description:"line-delete",isWholeLine:!0,marginClassName:"gutter-delete"}),RI=Ft.register({className:"char-insert",description:"char-insert",shouldFillLineOnLineBreak:!0}),Fte=Ft.register({className:"char-insert",description:"char-insert",isWholeLine:!0}),Bte=Ft.register({className:"char-insert diff-range-empty",description:"char-insert diff-range-empty"}),xy=Ft.register({className:"char-delete",description:"char-delete",shouldFillLineOnLineBreak:!0}),Vte=Ft.register({className:"char-delete",description:"char-delete",isWholeLine:!0}),Wte=Ft.register({className:"char-delete diff-range-empty",description:"char-delete diff-range-empty"}),Hte=Ft.register({description:"diff-editor-arrow-revert-change",glyphMarginHoverMessage:new i1(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown(m("revertChangeHoverMessage","Click to revert change")),glyphMarginClassName:"arrow-revert-change "+je.asClassName(we.arrowRight),zIndex:10001});class al extends oe{constructor(e,t,i,s,o){super(),this._rootElement=e,this._diffModel=t,this._originalEditorLayoutInfo=i,this._modifiedEditorLayoutInfo=s,this._editors=o,this._originalScrollTop=Xn(this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=Xn(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._viewZonesChanged=Es("onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this.width=Zt("width",0),this._modifiedViewZonesChangedSignal=Es("modified.onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this._originalViewZonesChangedSignal=Es("original.onDidChangeViewZones",this._editors.original.onDidChangeViewZones),this._state=_g("state",(h,f)=>{var g;this._element.replaceChildren();const p=this._diffModel.read(h),_=(g=p==null?void 0:p.diff.read(h))===null||g===void 0?void 0:g.movedTexts;if(!_||_.length===0){this.width.set(0,void 0);return}this._viewZonesChanged.read(h);const v=this._originalEditorLayoutInfo.read(h),b=this._modifiedEditorLayoutInfo.read(h);if(!v||!b){this.width.set(0,void 0);return}this._modifiedViewZonesChangedSignal.read(h),this._originalViewZonesChangedSignal.read(h);const w=_.map(A=>{function T(Ae,ye){const be=ye.getTopForLineNumber(Ae.startLineNumber,!0),le=ye.getTopForLineNumber(Ae.endLineNumberExclusive,!0);return(be+le)/2}const O=T(A.lineRangeMapping.original,this._editors.original),R=this._originalScrollTop.read(h),X=T(A.lineRangeMapping.modified,this._editors.modified),ie=this._modifiedScrollTop.read(h),ae=O-R,ue=X-ie,me=Math.min(O,X),de=Math.max(O,X);return{range:new et(me,de),from:ae,to:ue,fromWithoutScroll:O,toWithoutScroll:X,move:A}});w.sort(y7(Eo(A=>A.fromWithoutScroll>A.toWithoutScroll,S7),Eo(A=>A.fromWithoutScroll>A.toWithoutScroll?A.fromWithoutScroll:-A.toWithoutScroll,Oa)));const C=sx.compute(w.map(A=>A.range)),S=10,k=v.verticalScrollbarWidth,L=(C.getTrackCount()-1)*10+S*2,x=k+L+(b.contentLeft-al.movedCodeBlockPadding);let I=0;for(const A of w){const T=C.getTrack(I),O=k+S+T*10,R=15,X=15,ie=x,ae=b.glyphMarginWidth+b.lineNumbersWidth,ue=18,me=document.createElementNS("http://www.w3.org/2000/svg","rect");me.classList.add("arrow-rectangle"),me.setAttribute("x",`${ie-ae}`),me.setAttribute("y",`${A.to-ue/2}`),me.setAttribute("width",`${ae}`),me.setAttribute("height",`${ue}`),this._element.appendChild(me);const de=document.createElementNS("http://www.w3.org/2000/svg","g"),Ae=document.createElementNS("http://www.w3.org/2000/svg","path");Ae.setAttribute("d",`M 0 ${A.from} L ${O} ${A.from} L ${O} ${A.to} L ${ie-X} ${A.to}`),Ae.setAttribute("fill","none"),de.appendChild(Ae);const ye=document.createElementNS("http://www.w3.org/2000/svg","polygon");ye.classList.add("arrow"),f.add(pi(be=>{Ae.classList.toggle("currentMove",A.move===p.activeMovedText.read(be)),ye.classList.toggle("currentMove",A.move===p.activeMovedText.read(be))})),ye.setAttribute("points",`${ie-X},${A.to-R/2} ${ie},${A.to} ${ie-X},${A.to+R/2}`),de.appendChild(ye),this._element.appendChild(de),I++}this.width.set(L,void 0)}),this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("class","moved-blocks-lines"),this._rootElement.appendChild(this._element),this._register(st(()=>this._element.remove())),this._register(pi(h=>{const f=this._originalEditorLayoutInfo.read(h),g=this._modifiedEditorLayoutInfo.read(h);!f||!g||(this._element.style.left=`${f.width-f.verticalScrollbarWidth}px`,this._element.style.height=`${f.height}px`,this._element.style.width=`${f.verticalScrollbarWidth+f.contentLeft-al.movedCodeBlockPadding+this.width.read(h)}px`)})),this._register(J0(this._state,!0));const r=_t(h=>{const f=this._diffModel.read(h),g=f==null?void 0:f.diff.read(h);return g?g.movedTexts.map(p=>({move:p,original:new t_(EI(p.lineRangeMapping.original.startLineNumber-1),18),modified:new t_(EI(p.lineRangeMapping.modified.startLineNumber-1),18)})):[]});this._register(i_(this._editors.original,r.map(h=>h.map(f=>f.original)))),this._register(i_(this._editors.modified,r.map(h=>h.map(f=>f.modified)))),this._register(us((h,f)=>{const g=r.read(h);for(const p of g)f.add(new PI(this._editors.original,p.original,p.move,"original",this._diffModel.get())),f.add(new PI(this._editors.modified,p.modified,p.move,"modified",this._diffModel.get()))}));const a=Xn(this._editors.original.onDidChangeCursorPosition,()=>this._editors.original.getPosition()),l=Xn(this._editors.modified.onDidChangeCursorPosition,()=>this._editors.modified.getPosition()),c=Es("original.onDidFocusEditorWidget",h=>this._editors.original.onDidFocusEditorWidget(()=>setTimeout(()=>h(void 0),0))),d=Es("modified.onDidFocusEditorWidget",h=>this._editors.modified.onDidFocusEditorWidget(()=>setTimeout(()=>h(void 0),0)));let u="modified";this._register(w1({createEmptyChangeSummary:()=>{},handleChange:(h,f)=>(h.didChange(c)&&(u="original"),h.didChange(d)&&(u="modified"),!0)},h=>{c.read(h),d.read(h);const f=this._diffModel.read(h);if(!f)return;const g=f.diff.read(h);let p;if(g&&u==="original"){const _=a.read(h);_&&(p=g.movedTexts.find(v=>v.lineRangeMapping.original.contains(_.lineNumber)))}if(g&&u==="modified"){const _=l.read(h);_&&(p=g.movedTexts.find(v=>v.lineRangeMapping.modified.contains(_.lineNumber)))}p!==f.movedTextToCompare.get()&&f.movedTextToCompare.set(void 0,void 0),f.setActiveMovedText(p)}))}}al.movedCodeBlockPadding=4;class sx{static compute(e){const t=[],i=[];for(const s of e){let o=t.findIndex(r=>!r.intersectsStrict(s));o===-1&&(t.length>=6?o=k7(t,Eo(a=>a.intersectWithRangeLength(s),Oa)):(o=t.length,t.push(new RS))),t[o].addRange(s),i.push(o)}return new sx(t.length,i)}constructor(e,t){this._trackCount=e,this.trackPerLineIdx=t}getTrack(e){return this.trackPerLineIdx[e]}getTrackCount(){return this._trackCount}}class PI extends R5{constructor(e,t,i,s,o){const r=dn("div.diff-hidden-lines-widget");super(e,t,r.root),this._editor=e,this._move=i,this._kind=s,this._diffModel=o,this._nodes=dn("div.diff-moved-code-block",{style:{marginRight:"4px"}},[dn("div.text-content@textContent"),dn("div.action-bar@actionBar")]),r.root.appendChild(this._nodes.root);const a=Xn(this._editor.onDidLayoutChange,()=>this._editor.getLayoutInfo());this._register(rl(this._nodes.root,{paddingRight:a.map(h=>h.verticalScrollbarWidth)}));let l;i.changes.length>0?l=this._kind==="original"?m("codeMovedToWithChanges","Code moved with changes to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive):m("codeMovedFromWithChanges","Code moved with changes from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive):l=this._kind==="original"?m("codeMovedTo","Code moved to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive):m("codeMovedFrom","Code moved from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive);const c=this._register(new ml(this._nodes.actionBar,{highlightToggledItems:!0})),d=new ws("",l,"",!1);c.push(d,{icon:!1,label:!0});const u=new ws("","Compare",je.asClassName(we.compareChanges),!0,()=>{this._editor.focus(),this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get()===i?void 0:this._move,void 0)});this._register(pi(h=>{const f=this._diffModel.movedTextToCompare.read(h)===i;u.checked=f})),c.push(u,{icon:!1,label:!0})}}class $te extends oe{constructor(e,t,i){super(),this._editors=e,this._diffModel=t,this._options=i,this._decorations=_t(s=>{var o;const r=(o=this._diffModel.read(s))===null||o===void 0?void 0:o.diff.read(s);if(!r)return null;const a=this._diffModel.read(s).movedTextToCompare.read(s),l=this._options.renderIndicators.read(s),c=this._options.showEmptyDecorations.read(s),d=[],u=[];if(!a)for(const f of r.mappings){if(f.lineRangeMapping.originalRange.isEmpty||d.push({range:f.lineRangeMapping.originalRange.toInclusiveRange(),options:l?TI:MI}),f.lineRangeMapping.modifiedRange.isEmpty||u.push({range:f.lineRangeMapping.modifiedRange.toInclusiveRange(),options:l?NI:AI}),f.lineRangeMapping.modifiedRange.isEmpty||f.lineRangeMapping.originalRange.isEmpty)f.lineRangeMapping.originalRange.isEmpty||d.push({range:f.lineRangeMapping.originalRange.toInclusiveRange(),options:Vte}),f.lineRangeMapping.modifiedRange.isEmpty||u.push({range:f.lineRangeMapping.modifiedRange.toInclusiveRange(),options:Fte});else for(const g of f.lineRangeMapping.innerChanges||[])f.lineRangeMapping.originalRange.contains(g.originalRange.startLineNumber)&&d.push({range:g.originalRange,options:g.originalRange.isEmpty()&&c?Wte:xy}),f.lineRangeMapping.modifiedRange.contains(g.modifiedRange.startLineNumber)&&u.push({range:g.modifiedRange,options:g.modifiedRange.isEmpty()&&c?Bte:RI});!f.lineRangeMapping.modifiedRange.isEmpty&&this._options.shouldRenderRevertArrows.read(s)&&!a&&u.push({range:$.fromPositions(new Y(f.lineRangeMapping.modifiedRange.startLineNumber,1)),options:Hte})}if(a)for(const f of a.changes){const g=f.originalRange.toInclusiveRange();g&&d.push({range:g,options:l?TI:MI});const p=f.modifiedRange.toInclusiveRange();p&&u.push({range:p,options:l?NI:AI});for(const _ of f.innerChanges||[])d.push({range:_.originalRange,options:xy}),u.push({range:_.modifiedRange,options:RI})}const h=this._diffModel.read(s).activeMovedText.read(s);for(const f of r.movedTexts)d.push({range:f.lineRangeMapping.original.toInclusiveRange(),options:{description:"moved",blockClassName:"movedOriginal"+(f===h?" currentMove":""),blockPadding:[al.movedCodeBlockPadding,0,al.movedCodeBlockPadding,al.movedCodeBlockPadding]}}),u.push({range:f.lineRangeMapping.modified.toInclusiveRange(),options:{description:"moved",blockClassName:"movedModified"+(f===h?" currentMove":""),blockPadding:[4,0,4,4]}});return{originalDecorations:d,modifiedDecorations:u}}),this._register(e_(this._editors.original,this._decorations.map(s=>(s==null?void 0:s.originalDecorations)||[]))),this._register(e_(this._editors.modified,this._decorations.map(s=>(s==null?void 0:s.modifiedDecorations)||[])))}}class zte extends oe{constructor(e,t,i){super(),this._options=e,this._domNode=t,this._dimensions=i,this._sashRatio=Zt("sashRatio",void 0),this.sashLeft=_t(s=>{var o;const r=(o=this._sashRatio.read(s))!==null&&o!==void 0?o:this._options.splitViewDefaultRatio.read(s);return this._computeSashLeft(r,s)}),this._sash=this._register(new cs(this._domNode,{getVerticalSashTop:s=>0,getVerticalSashLeft:s=>this.sashLeft.get(),getVerticalSashHeight:s=>this._dimensions.height.get()},{orientation:0})),this._startSashPosition=void 0,this._register(this._sash.onDidStart(()=>{this._startSashPosition=this.sashLeft.get()})),this._register(this._sash.onDidChange(s=>{const o=this._dimensions.width.get(),r=this._computeSashLeft((this._startSashPosition+(s.currentX-s.startX))/o,void 0);this._sashRatio.set(r/o,void 0)})),this._register(this._sash.onDidEnd(()=>this._sash.layout())),this._register(this._sash.onDidReset(()=>this._sashRatio.set(void 0,void 0))),this._register(pi(s=>{const o=this._options.enableSplitViewResizing.read(s);this._sash.state=o?3:0,this.sashLeft.read(s),this._sash.layout()}))}setBoundarySashes(e){this._sash.orthogonalEndSash=e.bottom}_computeSashLeft(e,t){const i=this._dimensions.width.read(t),s=Math.floor(this._options.splitViewDefaultRatio.read(t)*i),o=this._options.enableSplitViewResizing.read(t)?Math.floor(e*i):s,r=100;return i<=r*2?s:o<r?r:o>i-r?i-r:o}}var OI=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class Ute extends oe{setActiveMovedText(e){this._activeMovedText.set(e,void 0)}constructor(e,t,i){super(),this.model=e,this._options=t,this._isDiffUpToDate=Zt("isDiffUpToDate",!1),this.isDiffUpToDate=this._isDiffUpToDate,this._diff=Zt("diff",void 0),this.diff=this._diff,this._unchangedRegions=Zt("unchangedRegion",{regions:[],originalDecorationIds:[],modifiedDecorationIds:[]}),this.unchangedRegions=_t(l=>this._options.hideUnchangedRegions.read(l)?this._unchangedRegions.read(l).regions:(wn(c=>{for(const d of this._unchangedRegions.get().regions)d.collapseAll(c)}),[])),this.movedTextToCompare=Zt("movedTextToCompare",void 0),this._activeMovedText=Zt("activeMovedText",void 0),this._hoveredMovedText=Zt("hoveredMovedText",void 0),this.activeMovedText=_t(l=>{var c,d;return(d=(c=this.movedTextToCompare.read(l))!==null&&c!==void 0?c:this._hoveredMovedText.read(l))!==null&&d!==void 0?d:this._activeMovedText.read(l)}),this._cancellationTokenSource=new vl,this._register(st(()=>this._cancellationTokenSource.cancel()));const s=_te("contentChangedSignal"),o=this._register(new Sn(()=>s.trigger(void 0),200)),r=(l,c,d)=>{const u=n_.fromDiffs(l.changes,e.original.getLineCount(),e.modified.getLineCount(),this._options.hideUnchangedRegionsminimumLineCount.read(d),this._options.hideUnchangedRegionsContextLineCount.read(d)),h=this._unchangedRegions.get(),f=h.originalDecorationIds.map(v=>e.original.getDecorationRange(v)).filter(v=>!!v).map(v=>it.fromRange(v)),g=h.modifiedDecorationIds.map(v=>e.modified.getDecorationRange(v)).filter(v=>!!v).map(v=>it.fromRange(v)),p=e.original.deltaDecorations(h.originalDecorationIds,u.map(v=>({range:v.originalRange.toInclusiveRange(),options:{description:"unchanged"}}))),_=e.modified.deltaDecorations(h.modifiedDecorationIds,u.map(v=>({range:v.modifiedRange.toInclusiveRange(),options:{description:"unchanged"}})));for(const v of u)for(let b=0;b<h.regions.length;b++)if(v.originalRange.intersectsStrict(f[b])&&v.modifiedRange.intersectsStrict(g[b])){v.setHiddenModifiedRange(h.regions[b].getHiddenModifiedRange(void 0),c);break}this._unchangedRegions.set({regions:u,originalDecorationIds:p,modifiedDecorationIds:_},c)};this._register(e.modified.onDidChangeContent(l=>{if(this._diff.get()){const d=Zr.fromModelContentChanges(l.changes);this._lastDiff,e.original,e.modified}o.schedule()})),this._register(e.original.onDidChangeContent(l=>{if(this._diff.get()){const d=Zr.fromModelContentChanges(l.changes);this._lastDiff,e.original,e.modified}o.schedule()}));const a=Es("documentDiffProviderOptionChanged",i.onDidChange);this._register(us((l,c)=>OI(this,void 0,void 0,function*(){var d,u;this._options.hideUnchangedRegionsminimumLineCount.read(l),this._options.hideUnchangedRegionsContextLineCount.read(l),o.cancel(),s.read(l),a.read(l),Hl(a4,l),this._isDiffUpToDate.set(!1,void 0);let h=[];c.add(e.original.onDidChangeContent(p=>{const _=Zr.fromModelContentChanges(p.changes);h=x0(h,_)}));let f=[];c.add(e.modified.onDidChangeContent(p=>{const _=Zr.fromModelContentChanges(p.changes);f=x0(f,_)}));let g=yield i.computeDiff(e.original,e.modified,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace.read(l),maxComputationTimeMs:this._options.maxComputationTimeMs.read(l),computeMoves:this._options.showMoves.read(l)},this._cancellationTokenSource.token);this._cancellationTokenSource.token.isCancellationRequested||(g=(d=(e.original,e.modified,void 0))!==null&&d!==void 0?d:g,g=(u=(e.original,e.modified,void 0))!==null&&u!==void 0?u:g,wn(p=>{r(g,p),this._lastDiff=g;const _=ox.fromDiffResult(g);this._diff.set(_,p),this._isDiffUpToDate.set(!0,p);const v=this.movedTextToCompare.get();this.movedTextToCompare.set(v?this._lastDiff.moves.find(b=>b.lineRangeMapping.modified.intersect(v.lineRangeMapping.modified)):void 0,p)}))})))}ensureModifiedLineIsVisible(e,t){var i;if(((i=this.diff.get())===null||i===void 0?void 0:i.mappings.length)===0)return;const s=this._unchangedRegions.get().regions;for(const o of s)if(o.getHiddenModifiedRange(void 0).contains(e)){o.showModifiedLine(e,t);return}}ensureOriginalLineIsVisible(e,t){var i;if(((i=this.diff.get())===null||i===void 0?void 0:i.mappings.length)===0)return;const s=this._unchangedRegions.get().regions;for(const o of s)if(o.getHiddenOriginalRange(void 0).contains(e)){o.showOriginalLine(e,t);return}}waitForDiff(){return OI(this,void 0,void 0,function*(){yield pte(this.isDiffUpToDate,e=>e)})}serializeState(){return{collapsedRegions:this._unchangedRegions.get().regions.map(t=>({range:t.getHiddenModifiedRange(void 0).serialize()}))}}restoreSerializedState(e){const t=e.collapsedRegions.map(s=>it.deserialize(s.range)),i=this._unchangedRegions.get();wn(s=>{for(const o of i.regions)for(const r of t)if(o.modifiedRange.intersect(r)){o.setHiddenModifiedRange(r,s);break}})}}class ox{static fromDiffResult(e){return new ox(e.changes.map(t=>new O5(t)),e.moves||[],e.identical,e.quitEarly)}constructor(e,t,i,s){this.mappings=e,this.movedTexts=t,this.identical=i,this.quitEarly=s}}class O5{constructor(e){this.lineRangeMapping=e}}class n_{static fromDiffs(e,t,i,s,o){const r=vs.inverse(e,t,i),a=[];for(const l of r){let c=l.originalRange.startLineNumber,d=l.modifiedRange.startLineNumber,u=l.originalRange.length;const h=c===1&&d===1,f=c+u===t+1&&d+u===i+1;(h||f)&&u>=o+s?(h&&!f&&(u-=o),f&&!h&&(c+=o,d+=o,u-=o),a.push(new n_(c,d,u,0,0))):u>=o*2+s&&(c+=o,d+=o,u-=o*2,a.push(new n_(c,d,u,0,0)))}return a}get originalRange(){return it.ofLength(this.originalLineNumber,this.lineCount)}get modifiedRange(){return it.ofLength(this.modifiedLineNumber,this.lineCount)}constructor(e,t,i,s,o){this.originalLineNumber=e,this.modifiedLineNumber=t,this.lineCount=i,this._visibleLineCountTop=Zt("visibleLineCountTop",0),this.visibleLineCountTop=this._visibleLineCountTop,this._visibleLineCountBottom=Zt("visibleLineCountBottom",0),this.visibleLineCountBottom=this._visibleLineCountBottom,this._shouldHideControls=_t(r=>this.visibleLineCountTop.read(r)+this.visibleLineCountBottom.read(r)===this.lineCount&&!this.isDragged.read(r)),this.isDragged=Zt("isDragged",!1),this._visibleLineCountTop.set(s,void 0),this._visibleLineCountBottom.set(o,void 0)}shouldHideControls(e){return this._shouldHideControls.read(e)}getHiddenOriginalRange(e){return it.ofLength(this.originalLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}getHiddenModifiedRange(e){return it.ofLength(this.modifiedLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}setHiddenModifiedRange(e,t){const i=e.startLineNumber-this.modifiedLineNumber,s=this.modifiedLineNumber+this.lineCount-e.endLineNumberExclusive;this.setState(i,s,t)}getMaxVisibleLineCountTop(){return this.lineCount-this._visibleLineCountBottom.get()}getMaxVisibleLineCountBottom(){return this.lineCount-this._visibleLineCountTop.get()}showMoreAbove(e=10,t){const i=this.getMaxVisibleLineCountTop();this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+e,i),t)}showMoreBelow(e=10,t){const i=this.lineCount-this._visibleLineCountTop.get();this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+e,i),t)}showAll(e){this._visibleLineCountBottom.set(this.lineCount-this._visibleLineCountTop.get(),e)}showModifiedLine(e,t){const i=e+1-(this.modifiedLineNumber+this._visibleLineCountTop.get()),s=this.modifiedLineNumber-this._visibleLineCountBottom.get()+this.lineCount-e;i<s?this._visibleLineCountTop.set(this._visibleLineCountTop.get()+i,t):this._visibleLineCountBottom.set(this._visibleLineCountBottom.get()+s,t)}showOriginalLine(e,t){const i=e-this.originalLineNumber,s=this.originalLineNumber+this.lineCount-e;i<s?this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+s-i,this.getMaxVisibleLineCountTop()),t):this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+i-s,this.getMaxVisibleLineCountBottom()),t)}collapseAll(e){this._visibleLineCountTop.set(0,e),this._visibleLineCountBottom.set(0,e)}setState(e,t,i){e=Math.max(Math.min(e,this.lineCount),0),t=Math.max(Math.min(t,this.lineCount-e),0),this._visibleLineCountTop.set(e,i),this._visibleLineCountBottom.set(t,i)}}var hv=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class qte extends oe{get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}constructor(e,t,i,s,o,r,a,l,c){super(),this._getViewZoneId=e,this._marginDomNode=t,this._modifiedEditor=i,this._diff=s,this._editor=o,this._viewLineCounts=r,this._originalTextModel=a,this._contextMenuService=l,this._clipboardService=c,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=je.asClassName(we.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";const d=this._modifiedEditor.getOption(65);this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${d}px`,this._diffActions.style.lineHeight=`${d}px`,this._marginDomNode.appendChild(this._diffActions);let u=0;const h=i.getOption(125)&&!ll,f=(g,p)=>{var _;this._contextMenuService.showContextMenu({domForShadowRoot:h&&(_=i.getDomNode())!==null&&_!==void 0?_:void 0,getAnchor:()=>({x:g,y:p}),getActions:()=>{const v=[],b=s.modifiedRange.isEmpty;return v.push(new ws("diff.clipboard.copyDeletedContent",b?s.originalRange.length>1?m("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):m("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):s.originalRange.length>1?m("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):m("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,()=>hv(this,void 0,void 0,function*(){const C=this._originalTextModel.getValueInRange(s.originalRange.toExclusiveRange());yield this._clipboardService.writeText(C)}))),s.originalRange.length>1&&v.push(new ws("diff.clipboard.copyDeletedLineContent",b?m("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",s.originalRange.startLineNumber+u):m("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",s.originalRange.startLineNumber+u),void 0,!0,()=>hv(this,void 0,void 0,function*(){let C=this._originalTextModel.getLineContent(s.originalRange.startLineNumber+u);C===""&&(C=this._originalTextModel.getEndOfLineSequence()===0?`
`:`\r
`),yield this._clipboardService.writeText(C)}))),i.getOption(89)||v.push(new ws("diff.inline.revertChange",m("diff.inline.revertChange.label","Revert this change"),void 0,!0,()=>hv(this,void 0,void 0,function*(){this._editor.revert(this._diff)}))),v},autoSelectFirstItem:!0})};this._register(Ci(this._diffActions,"mousedown",g=>{const{top:p,height:_}=ms(this._diffActions),v=Math.floor(d/3);g.preventDefault(),f(g.posx,p+_+v)})),this._register(i.onMouseMove(g=>{(g.target.type===8||g.target.type===5)&&g.target.detail.viewZoneId===this._getViewZoneId()?(u=this._updateLightBulbPosition(this._marginDomNode,g.event.browserEvent.y,d),this.visibility=!0):this.visibility=!1})),this._register(i.onMouseDown(g=>{g.event.rightButton&&(g.target.type===8||g.target.type===5)&&g.target.detail.viewZoneId===this._getViewZoneId()&&(g.event.preventDefault(),u=this._updateLightBulbPosition(this._marginDomNode,g.event.browserEvent.y,d),f(g.event.posx,g.event.posy+d))}))}_updateLightBulbPosition(e,t,i){const{top:s}=ms(e),o=t-s,r=Math.floor(o/i),a=r*i;if(this._diffActions.style.top=`${a}px`,this._viewLineCounts){let l=0;for(let c=0;c<this._viewLineCounts.length;c++)if(l+=this._viewLineCounts[c],r<l)return c}return r}}const FI=RC;function jte(n,e,t,i){$i(i,e.fontInfo);const s=t.length>0,o=new Ng(1e4);let r=0,a=0;const l=[];for(let h=0;h<n.lineTokens.length;h++){const f=h+1,g=n.lineTokens[h],p=n.lineBreakData[h],_=ps.filter(t,f,1,Number.MAX_SAFE_INTEGER);if(p){let v=0;for(const b of p.breakOffsets){const w=g.sliceAndInflate(v,b,0);r=Math.max(r,BI(a,w,ps.extractWrapped(_,v,b),s,n.mightContainNonBasicASCII,n.mightContainRTL,e,o)),a++,v=b}l.push(p.breakOffsets.length)}else l.push(1),r=Math.max(r,BI(a,g,_,s,n.mightContainNonBasicASCII,n.mightContainRTL,e,o)),a++}r+=e.scrollBeyondLastColumn;const c=o.build(),d=FI?FI.createHTML(c):c;i.innerHTML=d;const u=r*e.typicalHalfwidthCharacterWidth;return{heightInLines:a,minWidthInPx:u,viewLineCounts:l}}class Kte{constructor(e,t,i,s){this.lineTokens=e,this.lineBreakData=t,this.mightContainNonBasicASCII=i,this.mightContainRTL=s}}class rx{static fromEditor(e){var t;const i=e.getOptions(),s=i.get(49),o=i.get(142);return new rx(((t=e.getModel())===null||t===void 0?void 0:t.getOptions().tabSize)||0,s,i.get(32),s.typicalHalfwidthCharacterWidth,i.get(102),i.get(65),o.decorationsWidth,i.get(115),i.get(97),i.get(92),i.get(50))}constructor(e,t,i,s,o,r,a,l,c,d,u){this.tabSize=e,this.fontInfo=t,this.disableMonospaceOptimizations=i,this.typicalHalfwidthCharacterWidth=s,this.scrollBeyondLastColumn=o,this.lineHeight=r,this.lineDecorationsWidth=a,this.stopRenderingLineAfter=l,this.renderWhitespace=c,this.renderControlCharacters=d,this.fontLigatures=u}}function BI(n,e,t,i,s,o,r,a){a.appendString('<div class="view-line'),i||a.appendString(" char-delete"),a.appendString('" style="top:'),a.appendString(String(n*r.lineHeight)),a.appendString('px;width:1000000px;">');const l=e.getLineContent(),c=hn.isBasicASCII(l,s),d=hn.containsRTL(l,c,o),u=W_(new yl(r.fontInfo.isMonospace&&!r.disableMonospaceOptimizations,r.fontInfo.canUseHalfwidthRightwardsArrow,l,!1,c,d,0,e,t,r.tabSize,0,r.fontInfo.spaceWidth,r.fontInfo.middotWidth,r.fontInfo.wsmiddotWidth,r.stopRenderingLineAfter,r.renderWhitespace,r.renderControlCharacters,r.fontLigatures!==Kn.OFF,null),a);return a.appendString("</div>"),u.characterMapping.getHorizontalOffset(u.characterMapping.length)}var Gte=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},VI=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let Dy=class extends oe{constructor(e,t,i,s,o,r,a){super(),this._editors=e,this._diffModel=t,this._options=i,this._diffEditorWidget=s,this._canIgnoreViewZoneUpdateEvent=o,this._clipboardService=r,this._contextMenuService=a,this._originalTopPadding=Zt("originalTopPadding",0),this._originalScrollOffset=Zt("originalScrollOffset",0),this._originalScrollOffsetAnimated=II(this._originalScrollOffset,this._store),this._modifiedTopPadding=Zt("modifiedTopPadding",0),this._modifiedScrollOffset=Zt("modifiedScrollOffset",0),this._modifiedScrollOffsetAnimated=II(this._modifiedScrollOffset,this._store);let l=!1;const c=Zt("state",0),d=this._register(new Sn(()=>{c.set(c.get()+1,void 0)},0));this._register(this._editors.original.onDidChangeViewZones(C=>{!l&&!this._canIgnoreViewZoneUpdateEvent()&&d.schedule()})),this._register(this._editors.modified.onDidChangeViewZones(C=>{!l&&!this._canIgnoreViewZoneUpdateEvent()&&d.schedule()})),this._register(this._editors.original.onDidChangeConfiguration(C=>{(C.hasChanged(143)||C.hasChanged(65))&&d.schedule()})),this._register(this._editors.modified.onDidChangeConfiguration(C=>{(C.hasChanged(143)||C.hasChanged(65))&&d.schedule()}));const u=this._diffModel.map(C=>C?Xn(C.model.original.onDidChangeTokens,()=>C.model.original.tokenization.backgroundTokenizationState===2):void 0).map((C,S)=>C==null?void 0:C.read(S)),h=new Set,f=new Set,g=_t(C=>{const S=this._diffModel.read(C),k=S==null?void 0:S.diff.read(C);if(!S||!k)return null;c.read(C);const x=this._options.renderSideBySide.read(C);return WI(this._editors.original,this._editors.modified,k.mappings,h,f,x)}),p=_t(C=>{var S;const k=(S=this._diffModel.read(C))===null||S===void 0?void 0:S.movedTextToCompare.read(C);if(!k)return null;c.read(C);const L=k.changes.map(x=>new O5(x));return WI(this._editors.original,this._editors.modified,L,h,f,!0)});function _(){const C=document.createElement("div");return C.className="diagonal-fill",C}const v=this._register(new Fe),b=_t(C=>{var S,k,L,x,I,A,T,O;v.clear();const R=g.read(C)||[],X=[],ie=[],ae=this._modifiedTopPadding.read(C);ae>0&&ie.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:ae,showInHiddenAreas:!0});const ue=this._originalTopPadding.read(C);ue>0&&X.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:ue,showInHiddenAreas:!0});const me=this._options.renderSideBySide.read(C),de=me||(S=this._editors.modified._getViewModel())===null||S===void 0?void 0:S.createLineBreaksComputer();if(de){for(const ut of R)if(ut.diff)for(let _i=ut.originalRange.startLineNumber;_i<ut.originalRange.endLineNumberExclusive;_i++)de==null||de.addRequest(this._editors.original.getModel().getLineContent(_i),null,null)}const Ae=(k=de==null?void 0:de.finalize())!==null&&k!==void 0?k:[];let ye=0;const be=this._editors.modified.getOption(65),le=(L=this._diffModel.read(C))===null||L===void 0?void 0:L.movedTextToCompare.read(C),Bt=(I=(x=this._editors.original.getModel())===null||x===void 0?void 0:x.mightContainNonBasicASCII())!==null&&I!==void 0?I:!1,Ri=(T=(A=this._editors.original.getModel())===null||A===void 0?void 0:A.mightContainRTL())!==null&&T!==void 0?T:!1,Mt=rx.fromEditor(this._editors.modified);for(const ut of R)if(ut.diff&&!me){if(!ut.originalRange.isEmpty){u.read(C);const qt=document.createElement("div");qt.classList.add("view-lines","line-delete","monaco-mouse-cursor-text");const Ve=new Kte(ut.originalRange.mapToLineArray(ce=>this._editors.original.getModel().tokenization.getLineTokens(ce)),ut.originalRange.mapToLineArray(ce=>Ae[ye++]),Bt,Ri),On=[];for(const ce of ut.diff.innerChanges||[])On.push(new Jd(ce.originalRange.delta(-(ut.diff.originalRange.startLineNumber-1)),xy.className,0));const U=jte(Ve,Mt,On,qt),G=document.createElement("div");if(G.className="inline-deleted-margin-view-zone",$i(G,Mt.fontInfo),this._options.renderIndicators.read(C))for(let ce=0;ce<U.heightInLines;ce++){const fe=document.createElement("div");fe.className=`delete-sign ${je.asClassName(P5)}`,fe.setAttribute("style",`position:absolute;top:${ce*be}px;width:${Mt.lineDecorationsWidth}px;height:${be}px;right:0;`),G.appendChild(fe)}let re;v.add(new qte(()=>I7(re),G,this._editors.modified,ut.diff,this._diffEditorWidget,U.viewLineCounts,this._editors.original.getModel(),this._contextMenuService,this._clipboardService));for(let ce=0;ce<U.viewLineCounts.length;ce++){const fe=U.viewLineCounts[ce];fe>1&&X.push({afterLineNumber:ut.originalRange.startLineNumber+ce,domNode:_(),heightInPx:(fe-1)*be,showInHiddenAreas:!0})}ie.push({afterLineNumber:ut.modifiedRange.startLineNumber-1,domNode:qt,heightInPx:U.heightInLines*be,minWidthInPx:U.minWidthInPx,marginDomNode:G,setZoneId(ce){re=ce},showInHiddenAreas:!0})}const _i=document.createElement("div");_i.className="gutter-delete",X.push({afterLineNumber:ut.originalRange.endLineNumberExclusive-1,domNode:_(),heightInPx:ut.modifiedHeightInPx,marginDomNode:_i,showInHiddenAreas:!0})}else{const _i=ut.modifiedHeightInPx-ut.originalHeightInPx;if(_i>0){if(le!=null&&le.lineRangeMapping.original.delta(-1).deltaLength(2).contains(ut.originalRange.endLineNumberExclusive-1))continue;X.push({afterLineNumber:ut.originalRange.endLineNumberExclusive-1,domNode:_(),heightInPx:_i,showInHiddenAreas:!0})}else{let qt=function(){const On=document.createElement("div");return On.className="arrow-revert-change "+je.asClassName(we.arrowRight),Be("div",{},On)};var fn=qt;if(le!=null&&le.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(ut.modifiedRange.endLineNumberExclusive-1))continue;let Ve;ut.diff&&ut.diff.modifiedRange.isEmpty&&this._options.shouldRenderRevertArrows.read(C)&&(Ve=qt()),ie.push({afterLineNumber:ut.modifiedRange.endLineNumberExclusive-1,domNode:_(),heightInPx:-_i,marginDomNode:Ve,showInHiddenAreas:!0})}}for(const ut of(O=p.read(C))!==null&&O!==void 0?O:[]){if(!(le!=null&&le.lineRangeMapping.original.intersect(ut.originalRange))||!(le!=null&&le.lineRangeMapping.modified.intersect(ut.modifiedRange)))continue;const _i=ut.modifiedHeightInPx-ut.originalHeightInPx;_i>0?X.push({afterLineNumber:ut.originalRange.endLineNumberExclusive-1,domNode:_(),heightInPx:_i,showInHiddenAreas:!0}):ie.push({afterLineNumber:ut.modifiedRange.endLineNumberExclusive-1,domNode:_(),heightInPx:-_i,showInHiddenAreas:!0})}return{orig:X,mod:ie}});this._register(us(C=>{const S=tg.capture(this._editors.modified),k=b.read(C);l=!0,this._editors.original.changeViewZones(L=>{for(const x of h)L.removeZone(x);h.clear();for(const x of k.orig){const I=L.addZone(x);x.setZoneId&&x.setZoneId(I),h.add(I)}}),this._editors.modified.changeViewZones(L=>{for(const x of f)L.removeZone(x);f.clear();for(const x of k.mod){const I=L.addZone(x);x.setZoneId&&x.setZoneId(I),f.add(I)}}),l=!1,S.restore(this._editors.modified)})),this._register(st(()=>{this._editors.original.changeViewZones(C=>{for(const S of h)C.removeZone(S);h.clear()}),this._editors.modified.changeViewZones(C=>{for(const S of f)C.removeZone(S);f.clear()})}));let w=!1;this._register(this._editors.original.onDidScrollChange(C=>{C.scrollLeftChanged&&!w&&(w=!0,this._editors.modified.setScrollLeft(C.scrollLeft),w=!1)})),this._register(this._editors.modified.onDidScrollChange(C=>{C.scrollLeftChanged&&!w&&(w=!0,this._editors.original.setScrollLeft(C.scrollLeft),w=!1)})),this._originalScrollTop=Xn(this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=Xn(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._register(pi(C=>{const S=this._originalScrollTop.read(C)-(this._originalScrollOffsetAnimated.get()-this._modifiedScrollOffsetAnimated.read(C))-(this._originalTopPadding.get()-this._modifiedTopPadding.read(C));S!==this._editors.modified.getScrollTop()&&this._editors.modified.setScrollTop(S,1)})),this._register(pi(C=>{const S=this._modifiedScrollTop.read(C)-(this._modifiedScrollOffsetAnimated.get()-this._originalScrollOffsetAnimated.read(C))-(this._modifiedTopPadding.get()-this._originalTopPadding.read(C));S!==this._editors.original.getScrollTop()&&this._editors.original.setScrollTop(S,1)})),this._register(pi(C=>{var S;const k=(S=this._diffModel.read(C))===null||S===void 0?void 0:S.movedTextToCompare.read(C);let L=0;if(k){const x=this._editors.original.getTopForLineNumber(k.lineRangeMapping.original.startLineNumber,!0)-this._originalTopPadding.get();L=this._editors.modified.getTopForLineNumber(k.lineRangeMapping.modified.startLineNumber,!0)-this._modifiedTopPadding.get()-x}L>0?(this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(L,void 0)):L<0?(this._modifiedTopPadding.set(-L,void 0),this._originalTopPadding.set(0,void 0)):setTimeout(()=>{this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(0,void 0)},400),this._editors.modified.hasTextFocus()?this._originalScrollOffset.set(this._modifiedScrollOffset.get()-L,void 0,!0):this._modifiedScrollOffset.set(this._originalScrollOffset.get()+L,void 0,!0)}))}};Dy=Gte([VI(5,Kg),VI(6,Ll)],Dy);function WI(n,e,t,i,s,o){const r=new ea(HI(n,i)),a=new ea(HI(e,s)),l=n.getOption(65),c=e.getOption(65),d=[];let u=0,h=0;function f(p,_){for(;;){let v=r.peek(),b=a.peek();if(v&&v.lineNumber>=p&&(v=void 0),b&&b.lineNumber>=_&&(b=void 0),!v&&!b)break;const w=v?v.lineNumber-u:Number.MAX_VALUE,C=b?b.lineNumber-h:Number.MAX_VALUE;w<C?(r.dequeue(),b={lineNumber:v.lineNumber-u+h,heightInPx:0}):w>C?(a.dequeue(),v={lineNumber:b.lineNumber-h+u,heightInPx:0}):(r.dequeue(),a.dequeue()),d.push({originalRange:it.ofLength(v.lineNumber,1),modifiedRange:it.ofLength(b.lineNumber,1),originalHeightInPx:l+v.heightInPx,modifiedHeightInPx:c+b.heightInPx,diff:void 0})}}for(const p of t){let C=function(S,k){var L,x,I,A;if(S<w||k<b)return;if(v)v=!1;else if(S===w||k===b)return;const T=new it(w,S),O=new it(b,k);if(T.isEmpty&&O.isEmpty)return;const R=(x=(L=r.takeWhile(ie=>ie.lineNumber<S))===null||L===void 0?void 0:L.reduce((ie,ae)=>ie+ae.heightInPx,0))!==null&&x!==void 0?x:0,X=(A=(I=a.takeWhile(ie=>ie.lineNumber<k))===null||I===void 0?void 0:I.reduce((ie,ae)=>ie+ae.heightInPx,0))!==null&&A!==void 0?A:0;d.push({originalRange:T,modifiedRange:O,originalHeightInPx:T.length*l+R,modifiedHeightInPx:O.length*c+X,diff:p.lineRangeMapping}),w=S,b=k};var g=C;const _=p.lineRangeMapping;f(_.originalRange.startLineNumber,_.modifiedRange.startLineNumber);let v=!0,b=_.modifiedRange.startLineNumber,w=_.originalRange.startLineNumber;if(o)for(const S of _.innerChanges||[])S.originalRange.startColumn>1&&S.modifiedRange.startColumn>1&&C(S.originalRange.startLineNumber,S.modifiedRange.startLineNumber),S.originalRange.endColumn<n.getModel().getLineMaxColumn(S.originalRange.endLineNumber)&&C(S.originalRange.endLineNumber,S.modifiedRange.endLineNumber);C(_.originalRange.endLineNumberExclusive,_.modifiedRange.endLineNumberExclusive),u=_.originalRange.endLineNumberExclusive,h=_.modifiedRange.endLineNumberExclusive}return f(Number.MAX_VALUE,Number.MAX_VALUE),d}function HI(n,e){const t=[],i=[],s=n.getOption(143).wrappingColumn!==-1,o=n._getViewModel().coordinatesConverter,r=n.getOption(65);if(s)for(let l=1;l<=n.getModel().getLineCount();l++){const c=o.getModelLineViewLineCount(l);c>1&&i.push({lineNumber:l,heightInPx:r*(c-1)})}for(const l of n.getWhitespaces()){if(e.has(l.id))continue;const c=l.afterLineNumber===0?0:o.convertViewPositionToModelPosition(new Y(l.afterLineNumber,1)).lineNumber;t.push({lineNumber:c,heightInPx:l.height})}return wte(t,i,l=>l.lineNumber,(l,c)=>({lineNumber:l.lineNumber,heightInPx:l.heightInPx+c.heightInPx}))}var Zte=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Yte=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},mo;let Jr=mo=class extends oe{constructor(e,t,i,s,o,r,a,l){super(),this._editors=e,this._rootElement=t,this._diffModel=i,this._rootWidth=s,this._rootHeight=o,this._modifiedEditorLayoutInfo=r,this._options=a,this._themeService=l;const c=Xn(this._themeService.onDidColorThemeChange,()=>this._themeService.getColorTheme()),d=_t(f=>{const g=c.read(f),p=g.getColor(t3)||(g.getColor(J4)||h0).transparent(2),_=g.getColor(i3)||(g.getColor(e3)||f0).transparent(2);return{insertColor:p,removeColor:_}}),u=Xn(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),h=Xn(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollHeight());this._register(us((f,g)=>{if(!this._options.renderOverviewRuler.read(f))return;const p=tt(document.createElement("div"));p.setClassName("diffViewport"),p.setPosition("absolute");const _=dn("div.diffOverview",{style:{position:"absolute",top:"0px",width:mo.ENTIRE_DIFF_OVERVIEW_WIDTH+"px"}}).root;g.add(im(_,p.domNode)),g.add(Ci(_,_e.POINTER_DOWN,v=>{this._editors.modified.delegateVerticalScrollbarPointerDown(v)})),g.add(ee(_,_e.MOUSE_WHEEL,v=>{this._editors.modified.delegateScrollFromMouseWheelEvent(v)},{passive:!1})),g.add(im(this._rootElement,_)),g.add(us((v,b)=>{const w=this._diffModel.read(v),C=this._editors.original.createOverviewRuler("original diffOverviewRuler");C&&(b.add(C),b.add(im(_,C.getDomNode())));const S=this._editors.modified.createOverviewRuler("modified diffOverviewRuler");if(S&&(b.add(S),b.add(im(_,S.getDomNode()))),!C||!S)return;const k=Es("viewZoneChanged",this._editors.original.onDidChangeViewZones),L=Es("viewZoneChanged",this._editors.modified.onDidChangeViewZones),x=Es("hiddenRangesChanged",this._editors.original.onDidChangeHiddenAreas),I=Es("hiddenRangesChanged",this._editors.modified.onDidChangeHiddenAreas);b.add(pi(A=>{var T;k.read(A),L.read(A),x.read(A),I.read(A);const O=d.read(A),R=(T=w==null?void 0:w.diff.read(A))===null||T===void 0?void 0:T.mappings;function X(ue,me,de){const Ae=de._getViewModel();return Ae?ue.filter(ye=>ye.length>0).map(ye=>{const be=Ae.coordinatesConverter.convertModelPositionToViewPosition(new Y(ye.startLineNumber,1)),le=Ae.coordinatesConverter.convertModelPositionToViewPosition(new Y(ye.endLineNumberExclusive,1)),Bt=le.lineNumber-be.lineNumber;return new Pu(be.lineNumber,le.lineNumber,Bt,me.toString())}):[]}const ie=X((R||[]).map(ue=>ue.lineRangeMapping.originalRange),O.removeColor,this._editors.original),ae=X((R||[]).map(ue=>ue.lineRangeMapping.modifiedRange),O.insertColor,this._editors.modified);C==null||C.setZones(ie),S==null||S.setZones(ae)})),b.add(pi(A=>{const T=this._rootHeight.read(A),O=this._rootWidth.read(A),R=this._modifiedEditorLayoutInfo.read(A);if(R){const X=mo.ENTIRE_DIFF_OVERVIEW_WIDTH-2*mo.ONE_OVERVIEW_WIDTH;C.setLayout({top:0,height:T,right:X+mo.ONE_OVERVIEW_WIDTH,width:mo.ONE_OVERVIEW_WIDTH}),S.setLayout({top:0,height:T,right:0,width:mo.ONE_OVERVIEW_WIDTH});const ie=u.read(A),ae=h.read(A),ue=this._editors.modified.getOption(101),me=new Ru(ue.verticalHasArrows?ue.arrowSize:0,ue.verticalScrollbarSize,0,R.height,ae,ie);p.setTop(me.getSliderPosition()),p.setHeight(me.getSliderSize())}else p.setTop(0),p.setHeight(0);_.style.height=T+"px",_.style.left=O-mo.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",p.setWidth(mo.ENTIRE_DIFF_OVERVIEW_WIDTH)}))}))}))}};Jr.ONE_OVERVIEW_WIDTH=15;Jr.ENTIRE_DIFF_OVERVIEW_WIDTH=mo.ONE_OVERVIEW_WIDTH*2;Jr=mo=Zte([Yte(7,ro)],Jr);class Hd{remove(){var e;(e=this.parent)===null||e===void 0||e.children.delete(this.id)}static findId(e,t){let i;typeof e=="string"?i=`${t.id}/${e}`:(i=`${t.id}/${e.name}`,t.children.get(i)!==void 0&&(i=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let s=i;for(let o=0;t.children.get(s)!==void 0;o++)s=`${i}_${o}`;return s}static empty(e){return e.children.size===0}}class $I extends Hd{constructor(e,t,i){super(),this.id=e,this.parent=t,this.symbol=i,this.children=new Map}}class Xte extends Hd{constructor(e,t,i,s){super(),this.id=e,this.parent=t,this.label=i,this.order=s,this.children=new Map}}class Ia extends Hd{static create(e,t,i){const s=new vl(i),o=new Ia(t.uri),r=e.ordered(t),a=r.map((c,d)=>{var u;const h=Hd.findId(`provider_${d}`,o),f=new Xte(h,o,(u=c.displayName)!==null&&u!==void 0?u:"Unknown Outline Provider",d);return Promise.resolve(c.provideDocumentSymbols(t,s.token)).then(g=>{for(const p of g||[])Ia._makeOutlineElement(p,f);return f},g=>(w_(g),f)).then(g=>{Hd.empty(g)?g.remove():o._groups.set(h,g)})}),l=e.onDidChange(()=>{const c=e.ordered(t);An(c,r)||s.cancel()});return Promise.all(a).then(()=>s.token.isCancellationRequested&&!i.isCancellationRequested?Ia.create(e,t,i):o._compact()).finally(()=>{l.dispose()})}static _makeOutlineElement(e,t){const i=Hd.findId(e,t),s=new $I(i,t,e);if(e.children)for(const o of e.children)Ia._makeOutlineElement(o,s);t.children.set(s.id,s)}constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}_compact(){let e=0;for(const[t,i]of this._groups)i.children.size===0?this._groups.delete(t):e+=1;if(e!==1)this.children=this._groups;else{const t=lt.first(this._groups.values());for(const[,i]of t.children)i.parent=this,this.children.set(i.id,i)}return this}getTopLevelSymbols(){const e=[];for(const t of this.children.values())t instanceof $I?e.push(t.symbol):e.push(...lt.map(t.children.values(),i=>i.symbol));return e.sort((t,i)=>$.compareRangesUsingStarts(t.range,i.range))}asListOfDocumentSymbols(){const e=this.getTopLevelSymbols(),t=[];return Ia._flattenDocumentSymbols(t,e,""),t.sort((i,s)=>Y.compare($.getStartPosition(i.range),$.getStartPosition(s.range))||Y.compare($.getEndPosition(s.range),$.getEndPosition(i.range)))}static _flattenDocumentSymbols(e,t,i){for(const s of t)e.push({kind:s.kind,tags:s.tags,name:s.name,detail:s.detail,containerName:s.containerName||i,range:s.range,selectionRange:s.selectionRange,children:void 0}),s.children&&Ia._flattenDocumentSymbols(e,s.children,s.name)}}var F5=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},B5=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}},Qte=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};let ky=class extends oe{get isUpdatingViewZones(){return this._isUpdatingViewZones}constructor(e,t,i,s){super(),this._editors=e,this._diffModel=t,this._options=i,this._languageFeaturesService=s,this._isUpdatingViewZones=!1,this._modifiedModel=Xn(this._editors.modified.onDidChangeModel,()=>this._editors.modified.getModel()),this._modifiedOutlineSource=_g("modified outline source",(c,d)=>{const u=this._modifiedModel.read(c);if(u)return d.add(new Ey(this._languageFeaturesService,u))}),this._register(this._editors.original.onDidChangeCursorPosition(c=>{if(c.reason===3){const d=this._diffModel.get();wn(u=>{for(const h of this._editors.original.getSelections()||[])d==null||d.ensureOriginalLineIsVisible(h.getStartPosition().lineNumber,u),d==null||d.ensureOriginalLineIsVisible(h.getEndPosition().lineNumber,u)})}})),this._register(this._editors.modified.onDidChangeCursorPosition(c=>{if(c.reason===3){const d=this._diffModel.get();wn(u=>{for(const h of this._editors.modified.getSelections()||[])d==null||d.ensureModifiedLineIsVisible(h.getStartPosition().lineNumber,u),d==null||d.ensureModifiedLineIsVisible(h.getEndPosition().lineNumber,u)})}}));const o=this._diffModel.map((c,d)=>{var u,h;return((u=c==null?void 0:c.diff.read(d))===null||u===void 0?void 0:u.mappings.length)===0?[]:(h=c==null?void 0:c.unchangedRegions.read(d))!==null&&h!==void 0?h:[]}),r=_g("view zones",(c,d)=>{const u=[],h=[],f=this._options.renderSideBySide.read(c),g=this._modifiedOutlineSource.read(c);if(!g)return{origViewZones:u,modViewZones:h};const p=o.read(c);for(const _ of p)if(!_.shouldHideControls(c)){{const v=_t(w=>_.getHiddenOriginalRange(w).startLineNumber-1),b=new t_(v,24);u.push(b),d.add(new zI(this._editors.original,b,_,_.originalRange,!f,g,w=>this._diffModel.get().ensureModifiedLineIsVisible(w,void 0),this._options))}{const v=_t(w=>_.getHiddenModifiedRange(w).startLineNumber-1),b=new t_(v,24);h.push(b),d.add(new zI(this._editors.modified,b,_,_.modifiedRange,!1,g,w=>this._diffModel.get().ensureModifiedLineIsVisible(w,void 0),this._options))}}return{origViewZones:u,modViewZones:h}}),a={description:"unchanged lines",className:"diff-unchanged-lines",isWholeLine:!0},l={description:"Fold Unchanged",glyphMarginHoverMessage:new i1(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown(m("foldUnchanged","Fold Unchanged Region")),glyphMarginClassName:"fold-unchanged "+je.asClassName(we.fold),zIndex:10001};this._register(e_(this._editors.original,_t(c=>{const d=o.read(c),u=d.map(h=>({range:h.originalRange.toInclusiveRange(),options:a}));for(const h of d)h.shouldHideControls(c)&&u.push({range:$.fromPositions(new Y(h.originalLineNumber,1)),options:l});return u}))),this._register(e_(this._editors.modified,_t(c=>{const d=o.read(c),u=d.map(h=>({range:h.modifiedRange.toInclusiveRange(),options:a}));for(const h of d)h.shouldHideControls(c)&&u.push({range:it.ofLength(h.modifiedLineNumber,1).toInclusiveRange(),options:l});return u}))),this._register(i_(this._editors.original,r.map(c=>c.origViewZones),c=>this._isUpdatingViewZones=c)),this._register(i_(this._editors.modified,r.map(c=>c.modViewZones),c=>this._isUpdatingViewZones=c)),this._register(pi(c=>{const d=o.read(c);this._editors.original.setHiddenAreas(d.map(u=>u.getHiddenOriginalRange(c).toInclusiveRange()).filter(Hm)),this._editors.modified.setHiddenAreas(d.map(u=>u.getHiddenModifiedRange(c).toInclusiveRange()).filter(Hm))})),this._register(this._editors.modified.onMouseUp(c=>{var d;if(!c.event.rightButton&&c.target.position&&(!((d=c.target.element)===null||d===void 0)&&d.className.includes("fold-unchanged"))){const u=c.target.position.lineNumber,h=this._diffModel.get();if(!h)return;const f=h.unchangedRegions.get().find(g=>g.modifiedRange.includes(u));if(!f)return;f.collapseAll(void 0),c.event.stopPropagation(),c.event.preventDefault()}})),this._register(this._editors.original.onMouseUp(c=>{var d;if(!c.event.rightButton&&c.target.position&&(!((d=c.target.element)===null||d===void 0)&&d.className.includes("fold-unchanged"))){const u=c.target.position.lineNumber,h=this._diffModel.get();if(!h)return;const f=h.unchangedRegions.get().find(g=>g.originalRange.includes(u));if(!f)return;f.collapseAll(void 0),c.event.stopPropagation(),c.event.preventDefault()}}))}};ky=F5([B5(3,At)],ky);class Jte extends vl{dispose(){super.dispose(!0)}}let Ey=class extends oe{constructor(e,t){super(),this._languageFeaturesService=e,this._textModel=t,this._currentModel=Zt("current model",void 0);const i=Es("documentSymbolProvider.onDidChange",this._languageFeaturesService.documentSymbolProvider.onDidChange),s=Es("_textModel.onDidChangeContent",ke.debounce(o=>this._textModel.onDidChangeContent(o),()=>{},100));this._register(us((o,r)=>Qte(this,void 0,void 0,function*(){i.read(o),s.read(o);const a=r.add(new Jte),l=yield Ia.create(this._languageFeaturesService.documentSymbolProvider,this._textModel,a.token);r.isDisposed||this._currentModel.set(l,void 0)})))}getBreadcrumbItems(e,t){const i=this._currentModel.read(t);if(!i)return[];const s=i.asListOfDocumentSymbols().filter(o=>e.contains(o.range.startLineNumber)&&!e.contains(o.range.endLineNumber));return s.sort(QN(Eo(o=>o.range.endLineNumber-o.range.startLineNumber,Oa))),s.map(o=>({name:o.name,kind:o.kind,startLineNumber:o.range.startLineNumber}))}};Ey=F5([B5(0,At)],Ey);class zI extends R5{constructor(e,t,i,s,o,r,a,l){const c=dn("div.diff-hidden-lines-widget");super(e,t,c.root),this._editor=e,this._unchangedRegion=i,this._unchangedRegionRange=s,this.hide=o,this._modifiedOutlineSource=r,this._revealModifiedHiddenLine=a,this._options=l,this._nodes=dn("div.diff-hidden-lines",[dn("div.top@top",{title:m("diff.hiddenLines.top","Click or drag to show more above")}),dn("div.center@content",{style:{display:"flex"}},[dn("div@first",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0"}},[Be("a",{title:m("showAll","Show all"),role:"button",onclick:()=>{this.showAll()}},..._c("$(unfold)"))]),dn("div@others",{style:{display:"flex",justifyContent:"center",alignItems:"center"}})]),dn("div.bottom@bottom",{title:m("diff.bottom","Click or drag to show more below"),role:"button"})]),c.root.appendChild(this._nodes.root);const d=Xn(this._editor.onDidLayoutChange,()=>this._editor.getLayoutInfo());this.hide?Mn(this._nodes.first):this._register(rl(this._nodes.first,{width:d.map(h=>h.contentLeft)}));const u=this._editor;this._register(ee(this._nodes.top,"mousedown",h=>{if(h.button!==0)return;this._nodes.top.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),h.preventDefault();const f=h.clientY;let g=!1;const p=this._unchangedRegion.visibleLineCountTop.get();this._unchangedRegion.isDragged.set(!0,void 0);const _=ee(window,"mousemove",b=>{const C=b.clientY-f;g=g||Math.abs(C)>2;const S=Math.round(C/u.getOption(65)),k=Math.max(0,Math.min(p+S,this._unchangedRegion.getMaxVisibleLineCountTop()));this._unchangedRegion.visibleLineCountTop.set(k,void 0)}),v=ee(window,"mouseup",b=>{g||this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0),this._nodes.top.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),this._unchangedRegion.isDragged.set(!1,void 0),_.dispose(),v.dispose()})})),this._register(ee(this._nodes.bottom,"mousedown",h=>{if(h.button!==0)return;this._nodes.bottom.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),h.preventDefault();const f=h.clientY;let g=!1;const p=this._unchangedRegion.visibleLineCountBottom.get();this._unchangedRegion.isDragged.set(!0,void 0);const _=ee(window,"mousemove",b=>{const C=b.clientY-f;g=g||Math.abs(C)>2;const S=Math.round(C/u.getOption(65)),k=Math.max(0,Math.min(p-S,this._unchangedRegion.getMaxVisibleLineCountBottom())),L=u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.visibleLineCountBottom.set(k,void 0);const x=u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);u.setScrollTop(u.getScrollTop()+(x-L))}),v=ee(window,"mouseup",b=>{if(this._unchangedRegion.isDragged.set(!1,void 0),!g){const w=u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0);const C=u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);u.setScrollTop(u.getScrollTop()+(C-w))}this._nodes.bottom.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),_.dispose(),v.dispose()})})),this._register(pi(h=>{const f=[];if(!this.hide){const g=i.getHiddenModifiedRange(h).length,p=m("hiddenLines","{0} hidden lines",g),_=Be("span",{title:m("diff.hiddenLines.expandAll","Double click to unfold")},p);_.addEventListener("dblclick",w=>{w.button===0&&(w.preventDefault(),this.showAll())}),f.push(_);const v=this._unchangedRegion.getHiddenModifiedRange(h),b=this._modifiedOutlineSource.getBreadcrumbItems(v,h);if(b.length>0){f.push(Be("span",void 0,"  |  "));for(let w=0;w<b.length;w++){const C=b[w],S=Ov.toIcon(C.kind),k=dn("div.breadcrumb-item",{style:{display:"flex",alignItems:"center"}},[EC(S)," ",C.name,...w===b.length-1?[]:[EC(we.chevronRight)]]).root;f.push(k),k.onclick=()=>{this._revealModifiedHiddenLine(C.startLineNumber)}}}}Mn(this._nodes.others,...f)}))}showAll(){this._unchangedRegion.showAll(void 0)}}F("diffEditor.move.border",{dark:"#8b8b8b9c",light:"#8b8b8b9c",hcDark:"#8b8b8b9c",hcLight:"#8b8b8b9c"},m("diffEditor.move.border","The border color for text that got moved in the diff editor."));F("diffEditor.moveActive.border",{dark:"#FFA500",light:"#FFA500",hcDark:"#FFA500",hcLight:"#FFA500"},m("diffEditor.moveActive.border","The active border color for text that got moved in the diff editor."));class S1 extends oe{constructor(){super(...arguments),this._id=++S1.idCounter,this._onDidDispose=this._register(new q),this.onDidDispose=this._onDidDispose.event}getId(){return this.getEditorType()+":v2:"+this._id}getVisibleColumnFromPosition(e){return this._targetEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._targetEditor.getPosition()}setPosition(e,t="api"){this._targetEditor.setPosition(e,t)}revealLine(e,t=0){this._targetEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._targetEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._targetEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._targetEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._targetEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._targetEditor.revealPositionNearTop(e,t)}getSelection(){return this._targetEditor.getSelection()}getSelections(){return this._targetEditor.getSelections()}setSelection(e,t="api"){this._targetEditor.setSelection(e,t)}setSelections(e,t="api"){this._targetEditor.setSelections(e,t)}revealLines(e,t,i=0){this._targetEditor.revealLines(e,t,i)}revealLinesInCenter(e,t,i=0){this._targetEditor.revealLinesInCenter(e,t,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._targetEditor.revealLinesInCenterIfOutsideViewport(e,t,i)}revealLinesNearTop(e,t,i=0){this._targetEditor.revealLinesNearTop(e,t,i)}revealRange(e,t=0,i=!1,s=!0){this._targetEditor.revealRange(e,t,i,s)}revealRangeInCenter(e,t=0){this._targetEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._targetEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._targetEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._targetEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._targetEditor.getSupportedActions()}focus(){this._targetEditor.focus()}trigger(e,t,i){this._targetEditor.trigger(e,t,i)}createDecorationsCollection(e){return this._targetEditor.createDecorationsCollection(e)}changeDecorations(e){return this._targetEditor.changeDecorations(e)}}S1.idCounter=0;var eie=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},UI=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let Iy=class extends oe{constructor(e,t,i,s,o,r,a){super(),this.originalEditorElement=e,this.modifiedEditorElement=t,this._options=i,this._createInnerEditor=o,this._instantiationService=r,this._keybindingService=a,this._onDidContentSizeChange=this._register(new q),this.original=this._register(this._createLeftHandSideEditor(i.editorOptions.get(),s.originalEditor||{})),this.modified=this._register(this._createRightHandSideEditor(i.editorOptions.get(),s.modifiedEditor||{})),this._register(w1({createEmptyChangeSummary:()=>({}),handleChange:(l,c)=>(l.didChange(i.editorOptions)&&Object.assign(c,l.change.changedOptions),!0)},(l,c)=>{i.editorOptions.read(l),this._options.renderSideBySide.read(l),this.modified.updateOptions(this._adjustOptionsForRightHandSide(l,c)),this.original.updateOptions(this._adjustOptionsForLeftHandSide(l,c))}))}_createLeftHandSideEditor(e,t){const i=this._adjustOptionsForLeftHandSide(void 0,e),s=this._constructInnerEditor(this._instantiationService,this.originalEditorElement,i,t);return s.setContextValue("isInDiffLeftEditor",!0),s}_createRightHandSideEditor(e,t){const i=this._adjustOptionsForRightHandSide(void 0,e),s=this._constructInnerEditor(this._instantiationService,this.modifiedEditorElement,i,t);return s.setContextValue("isInDiffRightEditor",!0),s}_constructInnerEditor(e,t,i,s){const o=this._createInnerEditor(e,t,i,s);return this._register(o.onDidContentSizeChange(r=>{const a=this.original.getContentWidth()+this.modified.getContentWidth()+Jr.ENTIRE_DIFF_OVERVIEW_WIDTH,l=Math.max(this.modified.getContentHeight(),this.original.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:l,contentWidth:a,contentHeightChanged:r.contentHeightChanged,contentWidthChanged:r.contentWidthChanged})})),o}_adjustOptionsForLeftHandSide(e,t){const i=this._adjustOptionsForSubEditor(t);return this._options.renderSideBySide.get()?(i.unicodeHighlight=this._options.editorOptions.get().unicodeHighlight||{},i.wordWrapOverride1=this._options.diffWordWrap.get()):(i.wordWrapOverride1="off",i.wordWrapOverride2="off",i.stickyScroll={enabled:!1},i.unicodeHighlight={nonBasicASCII:!1,ambiguousCharacters:!1,invisibleCharacters:!1}),t.originalAriaLabel&&(i.ariaLabel=t.originalAriaLabel),i.ariaLabel=this._updateAriaLabel(i.ariaLabel),i.readOnly=!this._options.originalEditable.get(),i.dropIntoEditor={enabled:!i.readOnly},i.extraEditorClassName="original-in-monaco-diff-editor",i}_adjustOptionsForRightHandSide(e,t){const i=this._adjustOptionsForSubEditor(t);return t.modifiedAriaLabel&&(i.ariaLabel=t.modifiedAriaLabel),i.ariaLabel=this._updateAriaLabel(i.ariaLabel),i.wordWrapOverride1=this._options.diffWordWrap.get(),i.revealHorizontalRightPadding=bl.revealHorizontalRightPadding.defaultValue+Jr.ENTIRE_DIFF_OVERVIEW_WIDTH,i.scrollbar.verticalHasArrows=!1,i.extraEditorClassName="modified-in-monaco-diff-editor",i}_adjustOptionsForSubEditor(e){const t=Object.assign(Object.assign({},e),{dimension:{height:0,width:0}});return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar=Object.assign({},t.scrollbar||{}),t.scrollbar.vertical="visible",t.folding=!1,t.codeLens=this._options.diffCodeLens.get(),t.fixedOverflowWidgets=!0,t.minimap=Object.assign({},t.minimap||{}),t.minimap.enabled=!1,this._options.hideUnchangedRegions.get()?t.stickyScroll={enabled:!1}:t.stickyScroll=this._options.editorOptions.get().stickyScroll,t}_updateAriaLabel(e){var t;e||(e="");const i=m("diff-aria-navigation-tip"," use {0} to open the accessibility help.",(t=this._keybindingService.lookupKeybinding("editor.action.accessibilityHelp"))===null||t===void 0?void 0:t.getAriaLabel());return this._options.accessibilityVerbose.get()?e+i:e?e.replaceAll(i,""):""}};Iy=eie([UI(5,ai),UI(6,$s)],Iy);class tie{get editorOptions(){return this._options}constructor(e,t){this.diffEditorWidth=t,this.couldShowInlineViewBecauseOfSize=_t(s=>this._options.read(s).renderSideBySide&&this.diffEditorWidth.read(s)<=this._options.read(s).renderSideBySideInlineBreakpoint),this.renderOverviewRuler=_t(s=>this._options.read(s).renderOverviewRuler),this.renderSideBySide=_t(s=>this._options.read(s).renderSideBySide&&!(this._options.read(s).useInlineViewWhenSpaceIsLimited&&this.couldShowInlineViewBecauseOfSize.read(s))),this.readOnly=_t(s=>this._options.read(s).readOnly),this.shouldRenderRevertArrows=_t(s=>!(!this._options.read(s).renderMarginRevertIcon||!this.renderSideBySide.read(s)||this.readOnly.read(s))),this.renderIndicators=_t(s=>this._options.read(s).renderIndicators),this.enableSplitViewResizing=_t(s=>this._options.read(s).enableSplitViewResizing),this.splitViewDefaultRatio=_t(s=>this._options.read(s).splitViewDefaultRatio),this.ignoreTrimWhitespace=_t(s=>this._options.read(s).ignoreTrimWhitespace),this.maxComputationTimeMs=_t(s=>this._options.read(s).maxComputationTime),this.showMoves=_t(s=>this._options.read(s).experimental.showMoves&&this.renderSideBySide.read(s)),this.isInEmbeddedEditor=_t(s=>this._options.read(s).isInEmbeddedEditor),this.diffWordWrap=_t(s=>this._options.read(s).diffWordWrap),this.originalEditable=_t(s=>this._options.read(s).originalEditable),this.diffCodeLens=_t(s=>this._options.read(s).diffCodeLens),this.accessibilityVerbose=_t(s=>this._options.read(s).accessibilityVerbose),this.diffAlgorithm=_t(s=>this._options.read(s).diffAlgorithm),this.showEmptyDecorations=_t(s=>this._options.read(s).experimental.showEmptyDecorations),this.onlyShowAccessibleDiffViewer=_t(s=>this._options.read(s).onlyShowAccessibleDiffViewer),this.hideUnchangedRegions=_t(s=>this._options.read(s).hideUnchangedRegions.enabled),this.hideUnchangedRegionsRevealLineCount=_t(s=>this._options.read(s).hideUnchangedRegions.revealLineCount),this.hideUnchangedRegionsContextLineCount=_t(s=>this._options.read(s).hideUnchangedRegions.contextLineCount),this.hideUnchangedRegionsminimumLineCount=_t(s=>this._options.read(s).hideUnchangedRegions.minimumLineCount);const i=Object.assign(Object.assign({},e),qI(e,an));this._options=Zt("options",i)}updateOptions(e){const t=qI(e,this._options.get()),i=Object.assign(Object.assign(Object.assign({},this._options.get()),e),t);this._options.set(i,void 0,{changedOptions:e})}}function qI(n,e){var t,i,s,o,r,a,l,c;return{enableSplitViewResizing:ve(n.enableSplitViewResizing,e.enableSplitViewResizing),splitViewDefaultRatio:hT(n.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:ve(n.renderSideBySide,e.renderSideBySide),renderMarginRevertIcon:ve(n.renderMarginRevertIcon,e.renderMarginRevertIcon),maxComputationTime:Nr(n.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:Nr(n.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:ve(n.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:ve(n.renderIndicators,e.renderIndicators),originalEditable:ve(n.originalEditable,e.originalEditable),diffCodeLens:ve(n.diffCodeLens,e.diffCodeLens),renderOverviewRuler:ve(n.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:Gt(n.diffWordWrap,e.diffWordWrap,["off","on","inherit"]),diffAlgorithm:Gt(n.diffAlgorithm,e.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:ve(n.accessibilityVerbose,e.accessibilityVerbose),experimental:{showMoves:ve((t=n.experimental)===null||t===void 0?void 0:t.showMoves,e.experimental.showMoves),showEmptyDecorations:ve((i=n.experimental)===null||i===void 0?void 0:i.showEmptyDecorations,e.experimental.showEmptyDecorations)},hideUnchangedRegions:{enabled:ve((o=(s=n.hideUnchangedRegions)===null||s===void 0?void 0:s.enabled)!==null&&o!==void 0?o:(r=n.experimental)===null||r===void 0?void 0:r.collapseUnchangedRegions,e.hideUnchangedRegions.enabled),contextLineCount:Nr((a=n.hideUnchangedRegions)===null||a===void 0?void 0:a.contextLineCount,e.hideUnchangedRegions.contextLineCount,0,1073741824),minimumLineCount:Nr((l=n.hideUnchangedRegions)===null||l===void 0?void 0:l.minimumLineCount,e.hideUnchangedRegions.minimumLineCount,0,1073741824),revealLineCount:Nr((c=n.hideUnchangedRegions)===null||c===void 0?void 0:c.revealLineCount,e.hideUnchangedRegions.revealLineCount,0,1073741824)},isInEmbeddedEditor:ve(n.isInEmbeddedEditor,e.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:ve(n.onlyShowAccessibleDiffViewer,e.onlyShowAccessibleDiffViewer),renderSideBySideInlineBreakpoint:Nr(n.renderSideBySideInlineBreakpoint,e.renderSideBySideInlineBreakpoint,0,1073741824),useInlineViewWhenSpaceIsLimited:ve(n.useInlineViewWhenSpaceIsLimited,e.useInlineViewWhenSpaceIsLimited)}}var iie=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Ih=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let Ny=class extends S1{constructor(e,t,i,s,o,r,a,l){var c;super(),this._domElement=e,this._parentContextKeyService=s,this._parentInstantiationService=o,this._audioCueService=a,this._editorProgressService=l,this.elements=dn("div.monaco-diff-editor.side-by-side",{style:{position:"relative",height:"100%"}},[dn("div.noModificationsOverlay@overlay",{style:{position:"absolute",height:"100%",visibility:"hidden"}},[Be("span",{},"No Changes")]),dn("div.editor.original@original",{style:{position:"absolute",height:"100%"}}),dn("div.editor.modified@modified",{style:{position:"absolute",height:"100%"}}),dn("div.accessibleDiffViewer@accessibleDiffViewer",{style:{position:"absolute",height:"100%"}})]),this._diffModel=this._register(hte("diffModel",void 0)),this.onDidChangeModel=ke.fromObservableLight(this._diffModel),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._domElement)),this._instantiationService=this._parentInstantiationService.createChild(new zg([Et,this._contextKeyService])),this._boundarySashes=Zt("boundarySashes",void 0),this._accessibleDiffViewerShouldBeVisible=Zt("accessibleDiffViewerShouldBeVisible",!1),this._accessibleDiffViewerVisible=_t(p=>this._options.onlyShowAccessibleDiffViewer.read(p)?!0:this._accessibleDiffViewerShouldBeVisible.read(p)),this.movedBlocksLinesPart=Zt("MovedBlocksLinesPart",void 0),this._layoutInfo=_t(p=>{var _,v,b;const w=this._rootSizeObserver.width.read(p),C=this._rootSizeObserver.height.read(p),S=(_=this._sash.read(p))===null||_===void 0?void 0:_.sashLeft.read(p),k=S??Math.max(5,this._editors.original.getLayoutInfo().decorationsLeft),L=w-k-(this._options.renderOverviewRuler.read(p)?Jr.ENTIRE_DIFF_OVERVIEW_WIDTH:0),x=(b=(v=this.movedBlocksLinesPart.read(p))===null||v===void 0?void 0:v.width.read(p))!==null&&b!==void 0?b:0,I=k-x;return this.elements.original.style.width=I+"px",this.elements.original.style.left="0px",this.elements.modified.style.width=L+"px",this.elements.modified.style.left=k+"px",this._editors.original.layout({width:I,height:C}),this._editors.modified.layout({width:L,height:C}),{modifiedEditor:this._editors.modified.getLayoutInfo(),originalEditor:this._editors.original.getLayoutInfo()}}),this._diffValue=this._diffModel.map((p,_)=>p==null?void 0:p.diff.read(_)),this.onDidUpdateDiff=ke.fromObservableLight(this._diffValue),r.willCreateDiffEditor(),this._contextKeyService.createKey("isInDiffEditor",!0),this._contextKeyService.createKey("diffEditorVersion",2),this._domElement.appendChild(this.elements.root),this._register(st(()=>this._domElement.removeChild(this.elements.root))),this._rootSizeObserver=this._register(new Cte(this.elements.root,t.dimension)),this._rootSizeObserver.setAutomaticLayout((c=t.automaticLayout)!==null&&c!==void 0?c:!1),this._options=new tie(t,this._rootSizeObserver.width),this._contextKeyService.createKey(Se.isEmbeddedDiffEditor.key,!1);const d=Se.isEmbeddedDiffEditor.bindTo(this._contextKeyService);this._register(pi(p=>{d.set(this._options.isInEmbeddedEditor.read(p))}));const u=Se.comparingMovedCode.bindTo(this._contextKeyService);this._register(pi(p=>{var _;u.set(!!(!((_=this._diffModel.read(p))===null||_===void 0)&&_.movedTextToCompare.read(p)))}));const h=Se.diffEditorRenderSideBySideInlineBreakpointReached.bindTo(this._contextKeyService);this._register(pi(p=>{h.set(this._options.couldShowInlineViewBecauseOfSize.read(p))})),this._editors=this._register(this._instantiationService.createInstance(Iy,this.elements.original,this.elements.modified,this._options,i,(p,_,v,b)=>this._createInnerEditor(p,_,v,b))),this._sash=_g("sash",(p,_)=>{const v=this._options.renderSideBySide.read(p);if(this.elements.root.classList.toggle("side-by-side",v),!v)return;const b=_.add(new zte(this._options,this.elements.root,{height:this._rootSizeObserver.height,width:this._rootSizeObserver.width.map((w,C)=>w-(this._options.renderOverviewRuler.read(C)?Jr.ENTIRE_DIFF_OVERVIEW_WIDTH:0))}));return _.add(pi(w=>{const C=this._boundarySashes.read(w);C&&b.setBoundarySashes(C)})),b}),this._register(J0(this._sash,!0)),this._register(us((p,_)=>{this.unchangedRangesFeature=_.add(this._instantiationService.createInstance(Hl(ky,p),this._editors,this._diffModel,this._options))})),this._register(us((p,_)=>{_.add(new(Hl($te,p))(this._editors,this._diffModel,this._options))})),this._register(us((p,_)=>{_.add(this._instantiationService.createInstance(Hl(Dy,p),this._editors,this._diffModel,this._options,this,()=>this.unchangedRangesFeature.isUpdatingViewZones))})),this._register(us((p,_)=>{_.add(this._instantiationService.createInstance(Hl(Jr,p),this._editors,this.elements.root,this._diffModel,this._rootSizeObserver.width,this._rootSizeObserver.height,this._layoutInfo.map(v=>v.modifiedEditor),this._options))})),this._register(us((p,_)=>{this._accessibleDiffViewer=_.add(this._register(this._instantiationService.createInstance(Hl(yy,p),this.elements.accessibleDiffViewer,this._accessibleDiffViewerVisible,(v,b)=>this._accessibleDiffViewerShouldBeVisible.set(v,b),this._options.onlyShowAccessibleDiffViewer.map(v=>!v),this._rootSizeObserver.width,this._rootSizeObserver.height,this._diffModel.map((v,b)=>{var w;return(w=v==null?void 0:v.diff.read(b))===null||w===void 0?void 0:w.mappings.map(C=>C.lineRangeMapping)}),this._editors)))}));const f=this._accessibleDiffViewerVisible.map(p=>p?"hidden":"visible");this._register(rl(this.elements.modified,{visibility:f})),this._register(rl(this.elements.original,{visibility:f})),this._createDiffEditorContributions(),r.addDiffEditor(this),this._register(J0(this._layoutInfo,!0)),this._register(us((p,_)=>{this.movedBlocksLinesPart.set(_.add(new(Hl(al,p))(this.elements.root,this._diffModel,this._layoutInfo.map(v=>v.originalEditor),this._layoutInfo.map(v=>v.modifiedEditor),this._editors)),void 0)})),this._register(rl(this.elements.overlay,{width:this._layoutInfo.map((p,_)=>p.originalEditor.width+(this._options.renderSideBySide.read(_)?0:p.modifiedEditor.width)),visibility:_t(p=>{var _,v;return this._options.hideUnchangedRegions.read(p)&&((v=(_=this._diffModel.read(p))===null||_===void 0?void 0:_.diff.read(p))===null||v===void 0?void 0:v.mappings.length)===0?"visible":"hidden"})})),this._register(this._editors.modified.onMouseDown(p=>{var _,v;if(!p.event.rightButton&&p.target.position&&(!((_=p.target.element)===null||_===void 0)&&_.className.includes("arrow-revert-change"))){const b=p.target.position.lineNumber,w=p.target,C=this._diffModel.get();if(!C)return;const S=(v=C.diff.get())===null||v===void 0?void 0:v.mappings;if(!S)return;const k=S.find(L=>(w==null?void 0:w.detail.afterLineNumber)===L.lineRangeMapping.modifiedRange.startLineNumber-1||L.lineRangeMapping.modifiedRange.startLineNumber===b);if(!k)return;this.revert(k.lineRangeMapping),p.event.stopPropagation()}})),this._register(ke.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition,p=>{var _,v;if((p==null?void 0:p.reason)===3){const b=(v=(_=this._diffModel.get())===null||_===void 0?void 0:_.diff.get())===null||v===void 0?void 0:v.mappings.find(w=>w.lineRangeMapping.modifiedRange.contains(p.position.lineNumber));b!=null&&b.lineRangeMapping.modifiedRange.isEmpty?this._audioCueService.playAudioCue(Ke.diffLineDeleted,{source:"diffEditor.cursorPositionChanged"}):b!=null&&b.lineRangeMapping.originalRange.isEmpty?this._audioCueService.playAudioCue(Ke.diffLineInserted,{source:"diffEditor.cursorPositionChanged"}):b&&this._audioCueService.playAudioCue(Ke.diffLineModified,{source:"diffEditor.cursorPositionChanged"})}}));const g=this._diffModel.map((p,_)=>p==null?void 0:p.isDiffUpToDate.read(_));this._register(us((p,_)=>{if(g.read(p)===!1){const v=this._editorProgressService.show(!0,1e3);_.add(st(()=>v.done()))}}))}_createInnerEditor(e,t,i,s){return e.createInstance(Bu,t,i,s)}_createDiffEditorContributions(){const e=uc.getDiffEditorContributions();for(const t of e)try{this._register(this._instantiationService.createInstance(t.ctor,this))}catch(i){$t(i)}}get _targetEditor(){return this._editors.modified}getEditorType(){return A_.IDiffEditor}layout(e){this._rootSizeObserver.observe(e)}hasTextFocus(){return this._editors.original.hasTextFocus()||this._editors.modified.hasTextFocus()}saveViewState(){var e;const t=this._editors.original.saveViewState(),i=this._editors.modified.saveViewState();return{original:t,modified:i,modelState:(e=this._diffModel.get())===null||e===void 0?void 0:e.serializeState()}}restoreViewState(e){var t;if(e&&e.original&&e.modified){const i=e;this._editors.original.restoreViewState(i.original),this._editors.modified.restoreViewState(i.modified),i.modelState&&((t=this._diffModel.get())===null||t===void 0||t.restoreSerializedState(i.modelState))}}createViewModel(e){return new Ute(e,this._options,this._instantiationService.createInstance(ig,{diffAlgorithm:this._options.diffAlgorithm.get()}))}getModel(){var e,t;return(t=(e=this._diffModel.get())===null||e===void 0?void 0:e.model)!==null&&t!==void 0?t:null}setModel(e){!e&&this._diffModel.get()&&this._accessibleDiffViewer.close();const t=e?"model"in e?e:this.createViewModel(e):void 0;this._editors.original.setModel(t?t.model.original:null),this._editors.modified.setModel(t?t.model.modified:null),wn(i=>{this._diffModel.set(t,i)})}updateOptions(e){this._options.updateOptions(e)}getContainerDomNode(){return this._domElement}getOriginalEditor(){return this._editors.original}getModifiedEditor(){return this._editors.modified}getLineChanges(){var e;const t=(e=this._diffModel.get())===null||e===void 0?void 0:e.diff.get();return t?nie(t):null}revert(e){var t;const i=(t=this._diffModel.get())===null||t===void 0?void 0:t.model;if(!i)return;const s=e.innerChanges?e.innerChanges.map(o=>({range:o.modifiedRange,text:i.original.getValueInRange(o.originalRange)})):[{range:e.modifiedRange.toExclusiveRange(),text:i.original.getValueInRange(e.originalRange.toExclusiveRange())}];this._editors.modified.executeEdits("diffEditor",s)}accessibleDiffViewerNext(){this._accessibleDiffViewer.next()}accessibleDiffViewerPrev(){this._accessibleDiffViewer.prev()}};Ny=iie([Ih(3,Et),Ih(4,ai),Ih(5,oi),Ih(6,Xu),Ih(7,Zg)],Ny);function nie(n){return n.mappings.map(e=>{const t=e.lineRangeMapping;let i,s,o,r,a=t.innerChanges;return t.originalRange.isEmpty?(i=t.originalRange.startLineNumber-1,s=0,a=void 0):(i=t.originalRange.startLineNumber,s=t.originalRange.endLineNumberExclusive-1),t.modifiedRange.isEmpty?(o=t.modifiedRange.startLineNumber-1,r=0,a=void 0):(o=t.modifiedRange.startLineNumber,r=t.modifiedRange.endLineNumberExclusive-1),{originalStartLineNumber:i,originalEndLineNumber:s,modifiedStartLineNumber:o,modifiedEndLineNumber:r,charChanges:a==null?void 0:a.map(l=>({originalStartLineNumber:l.originalRange.startLineNumber,originalStartColumn:l.originalRange.startColumn,originalEndLineNumber:l.originalRange.endLineNumber,originalEndColumn:l.originalRange.endColumn,modifiedStartLineNumber:l.modifiedRange.startLineNumber,modifiedStartColumn:l.modifiedRange.startColumn,modifiedEndLineNumber:l.modifiedRange.endLineNumber,modifiedEndColumn:l.modifiedRange.endColumn}))}})}var L1=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},bt=globalThis&&globalThis.__param||function(n,e){return function(t,i){e(t,i,n)}};let sie=0,jI=!1;function oie(n){if(!n){if(jI)return;jI=!0}PH(n||document.body)}let bg=class extends Bu{constructor(e,t,i,s,o,r,a,l,c,d,u,h){const f=Object.assign({},t);f.ariaLabel=f.ariaLabel||$0.editorViewAccessibleLabel,f.ariaLabel=f.ariaLabel+";"+$0.accessibilityHelpMessage,super(e,f,{},i,s,o,r,l,c,d,u,h),a instanceof zu?this._standaloneKeybindingService=a:this._standaloneKeybindingService=null,oie(f.ariaContainerElement)}addCommand(e,t,i){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;const s="DYNAMIC_"+ ++sie,o=Ct.deserialize(i);return this._standaloneKeybindingService.addDynamicKeybinding(s,e,t,o),s}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),oe.None;const t=e.id,i=e.label,s=Ct.and(Ct.equals("editorId",this.getId()),Ct.deserialize(e.precondition)),o=e.keybindings,r=Ct.and(s,Ct.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,c=(f,...g)=>Promise.resolve(e.run(this,...g)),d=new Fe,u=this.getId()+":"+t;if(d.add(nn.registerCommand(u,c)),a){const f={command:{id:u,title:i},when:s,group:a,order:l};d.add(xo.appendMenuItem(M.EditorContext,f))}if(Array.isArray(o))for(const f of o)d.add(this._standaloneKeybindingService.addDynamicKeybinding(u,f,c,r));const h=new R3(u,i,i,s,(...f)=>Promise.resolve(e.run(this,...f)),this._contextKeyService);return this._actions.set(t,h),d.add(st(()=>{this._actions.delete(t)})),d}_triggerCommand(e,t){if(this._codeEditorService instanceof F0)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};bg=L1([bt(2,ai),bt(3,oi),bt(4,oo),bt(5,Et),bt(6,$s),bt(7,ro),bt(8,zs),bt(9,Hc),bt(10,mr),bt(11,At)],bg);let Ty=class extends bg{constructor(e,t,i,s,o,r,a,l,c,d,u,h,f,g,p){const _=Object.assign({},t);Uu(d,_,!1);const v=l.registerEditorContainer(e);typeof _.theme=="string"&&l.setTheme(_.theme),typeof _.autoDetectHighContrast<"u"&&l.setAutoDetectHighContrast(!!_.autoDetectHighContrast);const b=_.model;delete _.model,super(e,_,i,s,o,r,a,l,c,u,g,p),this._configurationService=d,this._standaloneThemeService=l,this._register(v);let w;if(typeof b>"u"){const C=f.getLanguageIdByMimeType(_.language)||_.language||No;w=V5(h,f,_.value||"",C,void 0),this._ownsModel=!0}else w=b,this._ownsModel=!1;if(this._attachModel(w),w){const C={oldModelUrl:null,newModelUrl:w.uri};this._onDidChangeModel.fire(C)}}dispose(){super.dispose()}updateOptions(e){Uu(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};Ty=L1([bt(2,ai),bt(3,oi),bt(4,oo),bt(5,Et),bt(6,$s),bt(7,js),bt(8,zs),bt(9,mi),bt(10,Hc),bt(11,ys),bt(12,Mi),bt(13,mr),bt(14,At)],Ty);let Ay=class extends _l{constructor(e,t,i,s,o,r,a,l,c,d,u){const h=Object.assign({},t);Uu(l,h,!0);const f=r.registerEditorContainer(e);typeof h.theme=="string"&&r.setTheme(h.theme),typeof h.autoDetectHighContrast<"u"&&r.setAutoDetectHighContrast(!!h.autoDetectHighContrast),super(e,h,{},u,s,i,o,r,a,c,d),this._configurationService=l,this._standaloneThemeService=r,this._register(f)}dispose(){super.dispose()}updateOptions(e){Uu(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_createInnerEditor(e,t,i){return e.createInstance(bg,t,i)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,i){return this.getModifiedEditor().addCommand(e,t,i)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};Ay=L1([bt(2,ai),bt(3,Et),bt(4,oi),bt(5,js),bt(6,zs),bt(7,mi),bt(8,Ll),bt(9,Zg),bt(10,Kg)],Ay);let My=class extends Ny{constructor(e,t,i,s,o,r,a,l,c,d,u,h){const f=Object.assign({},t);Uu(l,f,!0);const g=r.registerEditorContainer(e);typeof f.theme=="string"&&r.setTheme(f.theme),typeof f.autoDetectHighContrast<"u"&&r.setAutoDetectHighContrast(!!f.autoDetectHighContrast),super(e,f,{},s,i,o,h,d),this._configurationService=l,this._standaloneThemeService=r,this._register(g)}dispose(){super.dispose()}updateOptions(e){Uu(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_createInnerEditor(e,t,i){return e.createInstance(bg,t,i)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,i){return this.getModifiedEditor().addCommand(e,t,i)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};My=L1([bt(2,ai),bt(3,Et),bt(4,oi),bt(5,js),bt(6,zs),bt(7,mi),bt(8,Ll),bt(9,Zg),bt(10,Kg),bt(11,Xu)],My);function V5(n,e,t,i,s){if(t=t||"",!i){const o=t.indexOf(`
`);let r=t;return o!==-1&&(r=t.substring(0,o)),KI(n,t,e.createByFilepathOrFirstLine(s||null,r),s)}return KI(n,t,e.createById(i),s)}function KI(n,e,t,i){return n.createModel(e,t,i)}var W5=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};function rie(n,e,t){return Ne.initialize(t||{}).createInstance(Ty,n,e)}function aie(n){return Ne.get(oi).onCodeEditorAdd(t=>{n(t)})}function lie(n){return Ne.get(oi).onDiffEditorAdd(t=>{n(t)})}function cie(){return Ne.get(oi).listCodeEditors()}function die(){return Ne.get(oi).listDiffEditors()}function uie(n,e,t){var i;const s=Ne.initialize(t||{});return!((i=e==null?void 0:e.experimental)===null||i===void 0)&&i.useVersion2?s.createInstance(My,n,e):s.createInstance(Ay,n,e)}function hie(n,e){return Ne.initialize({}).createInstance(Jm,n,e)}function fie(n){if(typeof n.id!="string"||typeof n.run!="function")throw new Error("Invalid command descriptor, `id` and `run` are required properties!");return nn.registerCommand(n.id,n.run)}function gie(n){if(typeof n.id!="string"||typeof n.label!="string"||typeof n.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");const e=Ct.deserialize(n.precondition),t=(s,...o)=>kc.runEditorCommand(s,o,e,(r,a,l)=>Promise.resolve(n.run(a,...l))),i=new Fe;if(i.add(nn.registerCommand(n.id,t)),n.contextMenuGroupId){const s={command:{id:n.id,title:n.label},when:e,group:n.contextMenuGroupId,order:n.contextMenuOrder||0};i.add(xo.appendMenuItem(M.EditorContext,s))}if(Array.isArray(n.keybindings)){const s=Ne.get($s);if(!(s instanceof zu))console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService");else{const o=Ct.and(e,Ct.deserialize(n.keybindingContext));i.add(s.addDynamicKeybindings(n.keybindings.map(r=>({keybinding:r,command:n.id,when:o}))))}}return i}function pie(n){return H5([n])}function H5(n){const e=Ne.get($s);return e instanceof zu?e.addDynamicKeybindings(n.map(t=>({keybinding:t.keybinding,command:t.command,commandArgs:t.commandArgs,when:Ct.deserialize(t.when)}))):(console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),oe.None)}function mie(n,e,t){const i=Ne.get(Mi),s=i.getLanguageIdByMimeType(e)||e;return V5(Ne.get(ys),i,n,s,t)}function _ie(n,e){const t=Ne.get(Mi),i=t.getLanguageIdByMimeType(e)||e||No;n.setLanguage(t.createById(i))}function bie(n,e,t){n&&Ne.get(Xc).changeOne(e,n.uri,t)}function vie(n){Ne.get(Xc).changeAll(n,[])}function wie(n){return Ne.get(Xc).read(n)}function Cie(n){return Ne.get(Xc).onMarkerChanged(n)}function yie(n){return Ne.get(ys).getModel(n)}function Sie(){return Ne.get(ys).getModels()}function Lie(n){return Ne.get(ys).onModelAdded(n)}function xie(n){return Ne.get(ys).onModelRemoved(n)}function Die(n){return Ne.get(ys).onModelLanguageChanged(t=>{n({model:t.model,oldLanguage:t.oldLanguageId})})}function kie(n){return pW(Ne.get(ys),Ne.get(mr),n)}function Eie(n,e){const t=Ne.get(Mi),i=Ne.get(js);return VS.colorizeElement(i,t,n,e).then(()=>{i.registerEditorContainer(n)})}function Iie(n,e,t){const i=Ne.get(Mi);return Ne.get(js).registerEditorContainer(document.body),VS.colorize(i,n,e,t)}function Nie(n,e,t=4){return Ne.get(js).registerEditorContainer(document.body),VS.colorizeModelLine(n,e,t)}function Tie(n){const e=hi.get(n);return e||{getInitialState:()=>n0,tokenize:(t,i,s)=>YT(n,s)}}function Aie(n,e){hi.getOrCreate(e);const t=Tie(e),i=kg(n),s=[];let o=t.getInitialState();for(let r=0,a=i.length;r<a;r++){const l=i[r],c=t.tokenize(l,!0,o);s[r]=c.tokens,o=c.endState}return s}function Mie(n,e){Ne.get(js).defineTheme(n,e)}function Rie(n){Ne.get(js).setTheme(n)}function Pie(){Iw.clearAllFontInfos()}function Oie(n,e){return nn.registerCommand({id:n,handler:e})}function Fie(n){return Ne.get(IL).registerOpener({open(t){return W5(this,void 0,void 0,function*(){return typeof t=="string"&&(t=nt.parse(t)),n.open(t)})}})}function Bie(n){return Ne.get(oi).registerCodeEditorOpenHandler((t,i,s)=>W5(this,void 0,void 0,function*(){var o;if(!i)return null;const r=(o=t.options)===null||o===void 0?void 0:o.selection;let a;return r&&typeof r.endLineNumber=="number"&&typeof r.endColumn=="number"?a=r:r&&(a={lineNumber:r.startLineNumber,column:r.startColumn}),(yield n.openCodeEditor(i,t.resource,a))?i:null}))}function Vie(){return{create:rie,getEditors:cie,getDiffEditors:die,onDidCreateEditor:aie,onDidCreateDiffEditor:lie,createDiffEditor:uie,createDiffNavigator:hie,addCommand:fie,addEditorAction:gie,addKeybindingRule:pie,addKeybindingRules:H5,createModel:mie,setModelLanguage:_ie,setModelMarkers:bie,getModelMarkers:wie,removeAllMarkers:vie,onDidChangeMarkers:Cie,getModels:Sie,getModel:yie,onDidCreateModel:Lie,onWillDisposeModel:xie,onDidChangeModelLanguage:Die,createWebWorker:kie,colorizeElement:Eie,colorize:Iie,colorizeModelLine:Nie,tokenize:Aie,defineTheme:Mie,setTheme:Rie,remeasureFonts:Pie,registerCommand:Oie,registerLinkOpener:Fie,registerEditorOpener:Bie,AccessibilitySupport:Fv,ContentWidgetPositionPreference:zv,CursorChangeReason:Uv,DefaultEndOfLine:qv,EditorAutoIndentStrategy:Kv,EditorOption:Gv,EndOfLinePreference:Zv,EndOfLineSequence:Yv,MinimapPosition:ow,MouseTargetType:rw,OverlayWidgetPositionPreference:aw,OverviewRulerLane:lw,GlyphMarginLane:Xv,RenderLineNumbersType:dw,RenderMinimap:uw,ScrollbarVisibility:fw,ScrollType:hw,TextEditorCursorBlinkingStyle:bw,TextEditorCursorStyle:vw,TrackedRangeStickiness:ww,WrappingIndent:Cw,InjectedTextCursorStops:Jv,PositionAffinity:cw,ConfigurationChangedEvent:dT,BareFontInfo:lc,FontInfo:Ew,TextModelResolvedOptions:gm,FindMatch:Rf,ApplyUpdateResult:Qh,LineRange:it,LineRangeMapping:vs,RangeMapping:ul,EditorZoom:Na,MovedText:Mg,SimpleLineRangeMapping:hl,EditorType:A_,EditorOptions:bl}}function Wie(n,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!n(t))return!1;return!0}function nm(n,e){return typeof n=="boolean"?n:e}function GI(n,e){return typeof n=="string"?n:e}function Hie(n){const e={};for(const t of n)e[t]=!0;return e}function ZI(n,e=!1){e&&(n=n.map(function(i){return i.toLowerCase()}));const t=Hie(n);return e?function(i){return t[i.toLowerCase()]!==void 0&&t.hasOwnProperty(i.toLowerCase())}:function(i){return t[i]!==void 0&&t.hasOwnProperty(i)}}function Ry(n,e){e=e.replace(/@@/g,"");let t=0,i;do i=!1,e=e.replace(/@(\w+)/g,function(o,r){i=!0;let a="";if(typeof n[r]=="string")a=n[r];else if(n[r]&&n[r]instanceof RegExp)a=n[r].source;else throw n[r]===void 0?Pt(n,"language definition does not contain attribute '"+r+"', used at: "+e):Pt(n,"attribute reference '"+r+"' must be a string, used at: "+e);return fd(a)?"":"(?:"+a+")"}),t++;while(i&&t<5);e=e.replace(/\x01/g,"@");const s=(n.ignoreCase?"i":"")+(n.unicode?"u":"");return new RegExp(e,s)}function $ie(n,e,t,i){if(i<0)return n;if(i<e.length)return e[i];if(i>=100){i=i-100;const s=t.split(".");if(s.unshift(t),i<s.length)return s[i]}return null}function zie(n,e,t,i){let s=-1,o=t,r=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);r&&(r[3]&&(s=parseInt(r[3]),r[2]&&(s=s+100)),o=r[4]);let a="~",l=o;!o||o.length===0?(a="!=",l=""):/^\w*$/.test(l)?a="==":(r=o.match(/^(@|!@|~|!~|==|!=)(.*)$/),r&&(a=r[1],l=r[2]));let c;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(l)){const d=ZI(l.split("|"),n.ignoreCase);c=function(u){return a==="~"?d(u):!d(u)}}else if(a==="@"||a==="!@"){const d=n[l];if(!d)throw Pt(n,"the @ match target '"+l+"' is not defined, in rule: "+e);if(!Wie(function(h){return typeof h=="string"},d))throw Pt(n,"the @ match target '"+l+"' must be an array of strings, in rule: "+e);const u=ZI(d,n.ignoreCase);c=function(h){return a==="@"?u(h):!u(h)}}else if(a==="~"||a==="!~")if(l.indexOf("$")<0){const d=Ry(n,"^"+l+"$");c=function(u){return a==="~"?d.test(u):!d.test(u)}}else c=function(d,u,h,f){return Ry(n,"^"+Ta(n,l,u,h,f)+"$").test(d)};else if(l.indexOf("$")<0){const d=il(n,l);c=function(u){return a==="=="?u===d:u!==d}}else{const d=il(n,l);c=function(u,h,f,g,p){const _=Ta(n,d,h,f,g);return a==="=="?u===_:u!==_}}return s===-1?{name:t,value:i,test:function(d,u,h,f){return c(d,d,u,h,f)}}:{name:t,value:i,test:function(d,u,h,f){const g=$ie(d,u,h,s);return c(g||"",d,u,h,f)}}}function Py(n,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw Pt(n,"a 'token' attribute must be of type string, in rule: "+e);{const i={token:t.token};if(t.token.indexOf("$")>=0&&(i.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")i.bracket=1;else if(t.bracket==="@close")i.bracket=-1;else throw Pt(n,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw Pt(n,"the next state must be a string value in rule: "+e);{let s=t.next;if(!/^(@pop|@push|@popall)$/.test(s)&&(s[0]==="@"&&(s=s.substr(1)),s.indexOf("$")<0&&!RW(n,Ta(n,s,"",[],""))))throw Pt(n,"the next state '"+t.next+"' is not defined in rule: "+e);i.next=s}}return typeof t.goBack=="number"&&(i.goBack=t.goBack),typeof t.switchTo=="string"&&(i.switchTo=t.switchTo),typeof t.log=="string"&&(i.log=t.log),typeof t.nextEmbedded=="string"&&(i.nextEmbedded=t.nextEmbedded,n.usesEmbedded=!0),i}}else if(Array.isArray(t)){const i=[];for(let s=0,o=t.length;s<o;s++)i[s]=Py(n,e,t[s]);return{group:i}}else if(t.cases){const i=[];for(const o in t.cases)if(t.cases.hasOwnProperty(o)){const r=Py(n,e,t.cases[o]);o==="@default"||o==="@"||o===""?i.push({test:void 0,value:r,name:o}):o==="@eos"?i.push({test:function(a,l,c,d){return d},value:r,name:o}):i.push(zie(n,e,o,r))}const s=n.defaultToken;return{test:function(o,r,a,l){for(const c of i)if(!c.test||c.test(o,r,a,l))return c.value;return s}}}else throw Pt(n,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}class Uie{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let i;if(typeof t=="string")i=t;else if(t instanceof RegExp)i=t.source;else throw Pt(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=i.length>0&&i[0]==="^",this.name=this.name+": "+i,this.regex=Ry(e,"^(?:"+(this.matchOnlyAtLineStart?i.substr(1):i)+")")}setAction(e,t){this.action=Py(e,this.name,t)}}function $5(n,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");const t={};t.languageId=n,t.includeLF=nm(e.includeLF,!1),t.noThrow=!1,t.maxStack=100,t.start=typeof e.start=="string"?e.start:null,t.ignoreCase=nm(e.ignoreCase,!1),t.unicode=nm(e.unicode,!1),t.tokenPostfix=GI(e.tokenPostfix,"."+t.languageId),t.defaultToken=GI(e.defaultToken,"source"),t.usesEmbedded=!1;const i=e;i.languageId=n,i.includeLF=t.includeLF,i.ignoreCase=t.ignoreCase,i.unicode=t.unicode,i.noThrow=t.noThrow,i.usesEmbedded=t.usesEmbedded,i.stateNames=e.tokenizer,i.defaultToken=t.defaultToken;function s(r,a,l){for(const c of l){let d=c.include;if(d){if(typeof d!="string")throw Pt(t,"an 'include' attribute must be a string at: "+r);if(d[0]==="@"&&(d=d.substr(1)),!e.tokenizer[d])throw Pt(t,"include target '"+d+"' is not defined at: "+r);s(r+"."+d,a,e.tokenizer[d])}else{const u=new Uie(r);if(Array.isArray(c)&&c.length>=1&&c.length<=3)if(u.setRegex(i,c[0]),c.length>=3)if(typeof c[1]=="string")u.setAction(i,{token:c[1],next:c[2]});else if(typeof c[1]=="object"){const h=c[1];h.next=c[2],u.setAction(i,h)}else throw Pt(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+r);else u.setAction(i,c[1]);else{if(!c.regex)throw Pt(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+r);c.name&&typeof c.name=="string"&&(u.name=c.name),c.matchOnlyAtStart&&(u.matchOnlyAtLineStart=nm(c.matchOnlyAtLineStart,!1)),u.setRegex(i,c.regex),u.setAction(i,c.action)}a.push(u)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw Pt(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(const r in e.tokenizer)if(e.tokenizer.hasOwnProperty(r)){t.start||(t.start=r);const a=e.tokenizer[r];t.tokenizer[r]=new Array,s("tokenizer."+r,t.tokenizer[r],a)}if(t.usesEmbedded=i.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw Pt(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];const o=[];for(const r of e.brackets){let a=r;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw Pt(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")o.push({token:a.token+t.tokenPostfix,open:il(t,a.open),close:il(t,a.close)});else throw Pt(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=o,t.noThrow=!0,t}var qie=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};function jie(n){Lu.registerLanguage(n)}function Kie(){let n=[];return n=n.concat(Lu.getLanguages()),n}function Gie(n){return Ne.get(Mi).languageIdCodec.encodeLanguageId(n)}function Zie(n,e){return Ne.withServices(()=>{const i=Ne.get(Mi).onDidRequestRichLanguageFeatures(s=>{s===n&&(i.dispose(),e())});return i})}function Yie(n,e){return Ne.withServices(()=>{const i=Ne.get(Mi).onDidRequestBasicLanguageFeatures(s=>{s===n&&(i.dispose(),e())});return i})}function Xie(n,e){if(!Ne.get(Mi).isRegisteredLanguageId(n))throw new Error(`Cannot set configuration for unknown language ${n}`);return Ne.get(mr).register(n,e,100)}class Qie{constructor(e,t){this._languageId=e,this._actual=t}dispose(){}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,i){if(typeof this._actual.tokenize=="function")return vg.adaptTokenize(this._languageId,this._actual,e,i);throw new Error("Not supported!")}tokenizeEncoded(e,t,i){const s=this._actual.tokenizeEncoded(e,i);return new y_(s.tokens,s.endState)}}class vg{constructor(e,t,i,s){this._languageId=e,this._actual=t,this._languageService=i,this._standaloneThemeService=s}dispose(){}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t){const i=[];let s=0;for(let o=0,r=e.length;o<r;o++){const a=e[o];let l=a.startIndex;o===0?l=0:l<s&&(l=s),i[o]=new Nf(l,a.scopes,t),s=l}return i}static adaptTokenize(e,t,i,s){const o=t.tokenize(i,s),r=vg._toClassicTokens(o.tokens,e);let a;return o.endState.equals(s)?a=s:a=o.endState,new mS(r,a)}tokenize(e,t,i){return vg.adaptTokenize(this._languageId,this._actual,e,i)}_toBinaryTokens(e,t){const i=e.encodeLanguageId(this._languageId),s=this._standaloneThemeService.getColorTheme().tokenTheme,o=[];let r=0,a=0;for(let c=0,d=t.length;c<d;c++){const u=t[c],h=s.match(i,u.scopes)|1024;if(r>0&&o[r-1]===h)continue;let f=u.startIndex;c===0?f=0:f<a&&(f=a),o[r++]=f,o[r++]=h,a=f}const l=new Uint32Array(r);for(let c=0;c<r;c++)l[c]=o[c];return l}tokenizeEncoded(e,t,i){const s=this._actual.tokenize(e,i),o=this._toBinaryTokens(this._languageService.languageIdCodec,s.tokens);let r;return s.endState.equals(i)?r=i:r=s.endState,new y_(o,r)}}function Jie(n){return typeof n.getInitialState=="function"}function ene(n){return"tokenizeEncoded"in n}function z5(n){return n&&typeof n.then=="function"}function tne(n){const e=Ne.get(js);if(n){const t=[null];for(let i=1,s=n.length;i<s;i++)t[i]=J.fromHex(n[i]);e.setColorMapOverride(t)}else e.setColorMapOverride(null)}function U5(n,e){return ene(e)?new Qie(n,e):new vg(n,e,Ne.get(Mi),Ne.get(js))}function ax(n,e){const t=new w6(()=>qie(this,void 0,void 0,function*(){const i=yield Promise.resolve(e.create());return i?Jie(i)?U5(n,i):new Bf(Ne.get(Mi),Ne.get(js),n,$5(n,i),Ne.get(mi)):null}));return hi.registerFactory(n,t)}function ine(n,e){if(!Ne.get(Mi).isRegisteredLanguageId(n))throw new Error(`Cannot set tokens provider for unknown language ${n}`);return z5(e)?ax(n,{create:()=>e}):hi.register(n,U5(n,e))}function nne(n,e){const t=i=>new Bf(Ne.get(Mi),Ne.get(js),n,$5(n,i),Ne.get(mi));return z5(e)?ax(n,{create:()=>e}):hi.register(n,t(e))}function sne(n,e){return Ne.get(At).referenceProvider.register(n,e)}function one(n,e){return Ne.get(At).renameProvider.register(n,e)}function rne(n,e){return Ne.get(At).signatureHelpProvider.register(n,e)}function ane(n,e){return Ne.get(At).hoverProvider.register(n,{provideHover:(i,s,o)=>{const r=i.getWordAtPosition(s);return Promise.resolve(e.provideHover(i,s,o)).then(a=>{if(a)return!a.range&&r&&(a.range=new $(s.lineNumber,r.startColumn,s.lineNumber,r.endColumn)),a.range||(a.range=new $(s.lineNumber,s.column,s.lineNumber,s.column)),a})}})}function lne(n,e){return Ne.get(At).documentSymbolProvider.register(n,e)}function cne(n,e){return Ne.get(At).documentHighlightProvider.register(n,e)}function dne(n,e){return Ne.get(At).linkedEditingRangeProvider.register(n,e)}function une(n,e){return Ne.get(At).definitionProvider.register(n,e)}function hne(n,e){return Ne.get(At).implementationProvider.register(n,e)}function fne(n,e){return Ne.get(At).typeDefinitionProvider.register(n,e)}function gne(n,e){return Ne.get(At).codeLensProvider.register(n,e)}function pne(n,e,t){return Ne.get(At).codeActionProvider.register(n,{providedCodeActionKinds:t==null?void 0:t.providedCodeActionKinds,documentation:t==null?void 0:t.documentation,provideCodeActions:(s,o,r,a)=>{const c=Ne.get(Xc).read({resource:s.uri}).filter(d=>$.areIntersectingOrTouching(d,o));return e.provideCodeActions(s,o,{markers:c,only:r.only,trigger:r.trigger},a)},resolveCodeAction:e.resolveCodeAction})}function mne(n,e){return Ne.get(At).documentFormattingEditProvider.register(n,e)}function _ne(n,e){return Ne.get(At).documentRangeFormattingEditProvider.register(n,e)}function bne(n,e){return Ne.get(At).onTypeFormattingEditProvider.register(n,e)}function vne(n,e){return Ne.get(At).linkProvider.register(n,e)}function wne(n,e){return Ne.get(At).completionProvider.register(n,e)}function Cne(n,e){return Ne.get(At).colorProvider.register(n,e)}function yne(n,e){return Ne.get(At).foldingRangeProvider.register(n,e)}function Sne(n,e){return Ne.get(At).declarationProvider.register(n,e)}function Lne(n,e){return Ne.get(At).selectionRangeProvider.register(n,e)}function xne(n,e){return Ne.get(At).documentSemanticTokensProvider.register(n,e)}function Dne(n,e){return Ne.get(At).documentRangeSemanticTokensProvider.register(n,e)}function kne(n,e){return Ne.get(At).inlineCompletionsProvider.register(n,e)}function Ene(n,e){return Ne.get(At).inlayHintsProvider.register(n,e)}function Ine(){return{register:jie,getLanguages:Kie,onLanguage:Zie,onLanguageEncountered:Yie,getEncodedLanguageId:Gie,setLanguageConfiguration:Xie,setColorMap:tne,registerTokensProviderFactory:ax,setTokensProvider:ine,setMonarchTokensProvider:nne,registerReferenceProvider:sne,registerRenameProvider:one,registerCompletionItemProvider:wne,registerSignatureHelpProvider:rne,registerHoverProvider:ane,registerDocumentSymbolProvider:lne,registerDocumentHighlightProvider:cne,registerLinkedEditingRangeProvider:dne,registerDefinitionProvider:une,registerImplementationProvider:hne,registerTypeDefinitionProvider:fne,registerCodeLensProvider:gne,registerCodeActionProvider:pne,registerDocumentFormattingEditProvider:mne,registerDocumentRangeFormattingEditProvider:_ne,registerOnTypeFormattingEditProvider:bne,registerLinkProvider:vne,registerColorProvider:Cne,registerFoldingRangeProvider:yne,registerDeclarationProvider:Sne,registerSelectionRangeProvider:Lne,registerDocumentSemanticTokensProvider:xne,registerDocumentRangeSemanticTokensProvider:Dne,registerInlineCompletionsProvider:kne,registerInlayHintsProvider:Ene,DocumentHighlightKind:jv,CompletionItemKind:Wv,CompletionItemTag:Hv,CompletionItemInsertTextRule:Vv,SymbolKind:mw,SymbolTag:_w,IndentAction:Qv,CompletionTriggerKind:$v,SignatureHelpTriggerKind:pw,InlayHintKind:ew,InlineCompletionTriggerKind:tw,CodeActionTriggerType:Bv,FoldingRangeKind:Js,SelectedSuggestionInfo:v6}}const q5=ct("IEditorCancelService"),j5=new Ie("cancellableOperation",!1,m("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));vt(q5,class{constructor(){this._tokens=new WeakMap}add(n,e){let t=this._tokens.get(n);t||(t=n.invokeWithinContext(s=>{const o=j5.bindTo(s.get(Et)),r=new Zn;return{key:o,tokens:r}}),this._tokens.set(n,t));let i;return t.key.set(!0),i=t.tokens.push(e),()=>{i&&(i(),t.key.set(!t.tokens.isEmpty()),i=void 0)}}cancel(n){const e=this._tokens.get(n);if(!e)return;const t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},1);He(new class extends kc{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:j5})}runEditorCommand(n,e){n.get(q5).cancel(e)}});class YI{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}class Nne{constructor(e){if(this._set=new Set,e)for(const t of e)this.add(t)}add(e){this._set.add(YI.toKey(e))}has(e){return this._set.has(YI.toKey(e))}}var oh=globalThis&&globalThis.__awaiter||function(n,e,t,i){function s(o){return o instanceof t?o:new t(function(r){r(o)})}return new(t||(t=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(u){r(u)}}function l(d){try{c(i.throw(d))}catch(u){r(u)}}function c(d){d.done?o(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};function Tne(n,e,t){const i=[],s=new Nne,o=n.ordered(t);for(const a of o)i.push(a),a.extensionId&&s.add(a.extensionId);const r=e.ordered(t);for(const a of r){if(a.extensionId){if(s.has(a.extensionId))continue;s.add(a.extensionId)}i.push({displayName:a.displayName,extensionId:a.extensionId,provideDocumentFormattingEdits(l,c,d){return a.provideDocumentRangeFormattingEdits(l,l.getFullModelRange(),c,d)}})}return i}class wg{static setFormatterSelector(e){return{dispose:wg._selectors.unshift(e)}}static select(e,t,i){return oh(this,void 0,void 0,function*(){if(e.length===0)return;const s=lt.first(wg._selectors);if(s)return yield s(e,t,i)})}}wg._selectors=new Zn;function Ane(n,e,t,i,s,o){return oh(this,void 0,void 0,function*(){const r=e.documentRangeFormattingEditProvider.ordered(t);for(const a of r){const l=yield Promise.resolve(a.provideDocumentRangeFormattingEdits(t,i,s,o)).catch(w_);if(__(l))return yield n.computeMoreMinimalEdits(t.uri,l)}})}function Mne(n,e,t,i,s){return oh(this,void 0,void 0,function*(){const o=Tne(e.documentFormattingEditProvider,e.documentRangeFormattingEditProvider,t);for(const r of o){const a=yield Promise.resolve(r.provideDocumentFormattingEdits(t,i,s)).catch(w_);if(__(a))return yield n.computeMoreMinimalEdits(t.uri,a)}})}function Rne(n,e,t,i,s,o,r){const a=e.onTypeFormattingEditProvider.ordered(t);return a.length===0||a[0].autoFormatTriggerCharacters.indexOf(s)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(t,i,s,o,r)).catch(w_).then(l=>n.computeMoreMinimalEdits(t.uri,l))}nn.registerCommand("_executeFormatRangeProvider",function(n,...e){return oh(this,void 0,void 0,function*(){const[t,i,s]=e;rc(nt.isUri(t)),rc($.isIRange(i));const o=n.get($_),r=n.get(jg),a=n.get(At),l=yield o.createModelReference(t);try{return Ane(r,a,l.object.textEditorModel,$.lift(i),s,Bs.None)}finally{l.dispose()}})});nn.registerCommand("_executeFormatDocumentProvider",function(n,...e){return oh(this,void 0,void 0,function*(){const[t,i]=e;rc(nt.isUri(t));const s=n.get($_),o=n.get(jg),r=n.get(At),a=yield s.createModelReference(t);try{return Mne(o,r,a.object.textEditorModel,i,Bs.None)}finally{a.dispose()}})});nn.registerCommand("_executeFormatOnTypeProvider",function(n,...e){return oh(this,void 0,void 0,function*(){const[t,i,s,o]=e;rc(nt.isUri(t)),rc(Y.isIPosition(i)),rc(typeof s=="string");const r=n.get($_),a=n.get(jg),l=n.get(At),c=yield r.createModelReference(t);try{return Rne(a,l,c.object.textEditorModel,Y.lift(i),s,o,Bs.None)}finally{c.dispose()}})});bl.wrappingIndent.defaultValue=0;bl.glyphMargin.defaultValue=!1;bl.autoIndent.defaultValue=3;bl.overviewRulerLanes.defaultValue=2;wg.setFormatterSelector((n,e,t)=>Promise.resolve(n[0]));const xn=DT();xn.editor=Vie();xn.languages=Ine();xn.CancellationTokenSource;xn.Emitter;xn.KeyCode;xn.KeyMod;xn.Position;xn.Range;xn.Selection;xn.SelectionDirection;xn.MarkerSeverity;xn.MarkerTag;xn.Uri;xn.Token;const XI=xn.editor,sm=xn.languages,fv=globalThis.MonacoEnvironment;(fv!=null&&fv.globalAPI||typeof define=="function"&&define.amd)&&(globalThis.monaco=xn);typeof globalThis.require<"u"&&typeof globalThis.require.config=="function"&&globalThis.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});const Pne={setup(){const n={defaultToken:"invalid",tokenPostfix:".ts",keywords:["abstract","as","break","case","catch","class","continue","const","constructor","debugger","declare","default","delete","do","else","enum","export","extends","false","finally","for","from","function","get","if","implements","import","in","infer","instanceof","interface","is","keyof","let","module","namespace","never","new","null","package","private","protected","public","readonly","require","global","return","set","static","super","switch","symbol","this","throw","true","try","type","typeof","unique","var","void","while","with","yield","async","await","of"],typeKeywords:["any","boolean","number","object","string","undefined"],operators:["<=",">=","==","!=","===","!==","=>","+","-","**","*","/","%","++","--","<<","</",">>",">>>","&","|","^","!","~","&&","||","??","?",":","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=","@"],symbols:/[=><!~?:&|+\-*\\^%]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,digits:/\d+(_+\d+)*/,octaldigits:/[0-7]+(_+[0-7]+)*/,binarydigits:/[0-1]+(_+[0-1]+)*/,hexdigits:/[[0-9a-fA-F]+(_+[0-9a-fA-F]+)*/,regexpctl:/[(){}[\]$^|\-*+?.]/,regexpesc:/\\(?:[bBdDfnrstvwWn0\\/]|@regexpctl|c[A-Z]|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4})/,tokenizer:{root:[[/[{}]/,"delimiter.bracket"],{include:"common"}],common:[[/[a-z_$][\w$]*/,{cases:{"@typeKeywords":"keyword","@keywords":"keyword","@default":"identifier"}}],[/[A-Z][\w$]*/,"type.identifier"],{include:"@whitespace"},[/\/(?=([^\\/]|\\.)+\/([gimsuy]*)(\s*)(\.|;|,|\)|\]|\}|$))/,{token:"regexp",bracket:"@open",next:"@regexp"}],[/[()[\]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/!(?=([^=]|$))/,"delimiter"],[/@symbols/,{cases:{"@operators":"delimiter","@default":""}}],[/(@digits)[eE]([-+]?(@digits))?/,"number.float"],[/(@digits)\.(@digits)([eE][-+]?(@digits))?/,"number.float"],[/0[xX](@hexdigits)n?/,"number.hex"],[/0[oO]?(@octaldigits)n?/,"number.octal"],[/0[bB](@binarydigits)n?/,"number.binary"],[/(@digits)n?/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/"/,"string","@string_double"],[/'/,"string","@string_single"],[/`/,"string","@string_backtick"]],whitespace:[[/[ \t\r\n]+/,""],[/\/\*\*(?!\/)/,"comment.doc","@jsdoc"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]],comment:[[/[^/*]+/,"comment"],[/\*\//,"comment","@pop"],[/[/*]/,"comment"]],jsdoc:[[/[^/*]+/,"comment.doc"],[/\*\//,"comment.doc","@pop"],[/[/*]/,"comment.doc"]],regexp:[[/(\{)(\d+(?:,\d*)?)(\})/,["regexp.escape.control","regexp.escape.control","regexp.escape.control"]],[/(\[)(\^?)(?=(?:[^\]\\/]|\\.)+)/,["regexp.escape.control",{token:"regexp.escape.control",next:"@regexrange"}]],[/(\()(\?:|\?=|\?!)/,["regexp.escape.control","regexp.escape.control"]],[/[()]/,"regexp.escape.control"],[/@regexpctl/,"regexp.escape.control"],[/[^\\/]/,"regexp"],[/@regexpesc/,"regexp.escape"],[/\\\./,"regexp.invalid"],[/(\/)([gimsuy]*)/,[{token:"regexp",bracket:"@close",next:"@pop"},"keyword.other"]]],regexrange:[[/-/,"regexp.escape.control"],[/\^/,"regexp.invalid"],[/@regexpesc/,"regexp.escape"],[/[^\]]/,"regexp"],[/\]/,{token:"regexp.escape.control",next:"@pop",bracket:"@close"}]],string_double:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],string_single:[[/[^\\']+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/'/,"string","@pop"]],string_backtick:[[/\$\{/,{token:"delimiter.bracket",next:"@bracketCounting"}],[/[^\\`$]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/`/,"string","@pop"]],bracketCounting:[[/\{/,"delimiter.bracket","@bracketCounting"],[/\}/,"delimiter.bracket","@pop"],{include:"common"}]}},e={defaultToken:"invalid",tokenPostfix:".js",keywords:["break","case","catch","class","continue","const","constructor","debugger","default","delete","do","else","export","extends","false","finally","for","from","function","get","if","import","in","instanceof","let","new","null","return","set","super","switch","symbol","this","throw","true","try","typeof","undefined","var","void","while","with","yield","async","await","of"],typeKeywords:[],operators:n.operators,symbols:n.symbols,escapes:n.escapes,digits:n.digits,octaldigits:n.octaldigits,binarydigits:n.binarydigits,hexdigits:n.hexdigits,regexpctl:n.regexpctl,regexpesc:n.regexpesc,tokenizer:n.tokenizer};sm.register({id:"javascript"}),sm.register({id:"js"}),sm.setMonarchTokensProvider("js",e),sm.setMonarchTokensProvider("javascript",e)},data(){return{content:this.code,sandboxProxies:new WeakMap,editor:null}},props:["code","editorIndex"],methods:{compile(){const n=this.$refs.output;n.value="Webworker travaille à l'exécution de votre code. Si rien n'est renvoyé, vérifiez le console.log du navigateur et voyez si vous n'avez pas fait une bêtise.";const e=XI.getModels()[this.editorIndex].getValue(),t=new Worker("worker.js");t.postMessage({code:e}),setTimeout(()=>{console.log("woker terminated after 5000 millisec"),t.terminate()},5e3),t.onmessage=function(i){i.data.status==="success"?(n.value=i.data.message,console.log("Code executed successfully")):i.data.status==="error"&&(n.value=i.data.message,console.error(i.data.message))}}},mounted(){const n=this.$refs.editor;this.editor=XI.create(n,{value:this.content,language:"javascript",automaticLayout:!0,fontSize:"18px",theme:"vs-dark"})}},One=n=>(eS("data-v-73c6f3f5"),n=n(),tS(),n),Fne={class:"flex-container"},Bne={style:{width:"60%",height:"100%"}},Vne={id:"editor",ref:"editor"},Wne={style:{width:"35%"}},Hne={ref:"output",readonly:""},$ne=One(()=>D("span",null,"Compile",-1)),zne=[$ne];function Une(n,e,t,i,s,o){return j(),K("div",Fne,[D("div",Bne,[D("div",Vne,null,512)]),D("div",Wne,[D("textarea",Hne,null,512),D("button",{style:{"vertical-align":"middle"},onClick:e[0]||(e[0]=r=>o.compile())},zne)])])}const Ze=se(Pne,[["render",Une],["__scopeId","data-v-73c6f3f5"]]),qne={class:"slide"},jne=D("div",{class:"heading"},"Data Types - Integers",-1),Kne={class:"content"},Gne=D("p",null,"Console.log affiche un message sur la console web",-1),Zne={__name:"SlidePresentation30",setup(n){return(e,t)=>(j(),K("div",qne,[jne,D("div",Kne,[Gne,W(Ze,{code:'console.log("Hello, World!");',editorIndex:"0"})])]))}},Yne={},Xne={class:"slide"},Qne=he(`<div class="heading">Data Types - Integers</div><div class="content"><p>Solution:</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008000;">//exemple simple</span>
                  <span style="color:#0000ff;">var</span> a = 39;
                  <span style="color:#0000ff;">var</span> b = 25;
                  <span style="color:#0000ff;">var</span> third = a;
                  a = b;  
                  b = third;  
                  console.log(<span style="color:#a31515;">&quot;variable a=&quot;</span> +a+ <span style="color:#a31515;">&quot; ,variable b=&quot;</span> +b);  

                  <span style="color:#008000;">//exemple plus complexe</span>
                  a = 45;
                  b = 105;
                  a=a+b;  
                  b=a-b;  
                  a=a-b;  
                  console.log(<span style="color:#a31515;">&quot;variable a=&quot;</span> +a+ <span style="color:#a31515;">&quot; ,variable b=&quot;</span> +b);   
                </pre></div></div>`,2),Jne=[Qne];function ese(n,e){return j(),K("div",Xne,Jne)}const tse=se(Yne,[["render",ese]]),ise={},nse={class:"slide"},sse=he(`<div class="heading">Data Types basic - Floating-Point</div><div class="content"><p> Les types de données à virgule flottante peuvent avoir un point décimal ; ils utilisent la syntaxe traditionnelle des nombres réels. Une valeur réelle est représentée par la partie intégrale du nombre, suivie d&#39;un point décimal et de la partie fractionnaire du nombre </p><p> Les littéraux à virgule flottante peuvent également être représentés à l&#39;aide de la notation exponentielle : un nombre réel suivi de la lettre e (ou E), suivi d&#39;un signe plus ou moins facultatif, suivi d&#39;un exposant entier. Cette notation représente le nombre réel multiplié par 10 à la puissance de l&#39;exposant </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008000;">//Notation simple</span>
                  3.14
                  2345.789
                  .333333333333333333
                  <span style="color:#008000;">//Notation scientifique/exponentielle</span>
                  6.02e23 <span style="color:#008000;">// 6.02 × 1023</span>
                  1.4738223E-32 <span style="color:#008000;">// 1.4738223 × 10-32</span>
                </pre></div></div>`,2),ose=[sse];function rse(n,e){return j(),K("div",nse,ose)}const ase=se(ise,[["render",rse]]),lse="/javascript/assets/arithmetic-238825cb.svg",cse={},dse={class:"slide"},use=he('<div class="heading">Opérateurs arithmétiques</div><div class="content"><p> Les opérateurs arithmétiques sont des opérateurs que vous reconnaîtrez dans l&#39;usage quotidien. </p><img src="'+lse+'" class="html-css-logo" style="left:70%;top:37%;height:50%;"><table class="tg"><thead><tr><th class="tg-0lax"><span style="font-weight:bold;">Opérateur</span></th><th class="tg-0lax"><span style="font-weight:bold;">Exemple</span></th><th class="tg-0lax"><span style="font-weight:bold;">Explications</span></th></tr></thead><tbody><tr><td class="tg-0lax">=<br></td><td class="tg-0lax">var salary = 2800;</td><td class="tg-0lax">Assignation/Affectation</td></tr><tr><td class="tg-0lax">+</td><td class="tg-0lax">var salary = salary + 2800</td><td class="tg-0lax">Addition/Concaténation</td></tr><tr><td class="tg-0lax">-</td><td class="tg-0lax">var salary = salary - 2800</td><td class="tg-0lax">Soustraction</td></tr><tr><td class="tg-0lax">*</td><td class="tg-0lax">var salary = salary * 2800</td><td class="tg-0lax">Multiplication</td></tr><tr><td class="tg-0lax">/</td><td class="tg-0lax">var salary = salary / 2800<br></td><td class="tg-0lax">Division<br></td></tr><tr><td class="tg-0lax">%</td><td class="tg-0lax">var salary = salary % 1000</td><td class="tg-0lax">Modulo, reste de la division entière</td></tr></tbody></table></div>',2),hse=[use];function fse(n,e){return j(),K("div",dse,hse)}const gse=se(cse,[["render",fse]]),pse="/javascript/assets/handRecieving-34758a5b.svg",mse="/javascript/assets/handGivingMoney-45322be1.svg",_se={},bse={class:"slide"},vse=he('<img src="'+pse+'" class="html-css-logo" style="left:1%;top:74%;"><img src="'+mse+'" class="html-css-logo" style="left:70%;top:74%;"><div class="heading">Opérateurs arithmétiques</div><div class="content grid center"><p class="sub-title"> Exercice: Calcule le salaire mensuel si ton salaire brut en tant que développeur est de 32000€ par an (réaliste dans la région de Toulouse après la formation). Le salaire net est d&#39;environ 75% du salaire annuel. </p></div>',4),wse=[vse];function Cse(n,e){return j(),K("div",bse,wse)}const yse=se(_se,[["render",Cse]]),Sse={class:"slide"},Lse=D("div",{class:"heading"},"Opérateurs arithmétiques",-1),xse={class:"content"},Dse=D("p",null,"Calcule le salaire mensuel",-1),kse={__name:"SlidePresentation35",setup(n){return(e,t)=>(j(),K("div",Sse,[Lse,D("div",xse,[Dse,W(Ze,{code:`var salaryBrut = 32000;
var salaryNet, salaryMonthlyNet;
//mettre le calcul ici
console.log("The netto year salary is " + salaryNet);
console.log("The netto monthly salary is " + salaryMonthlyNet);`,editorIndex:"1"})])]))}},Ese="/javascript/assets/mod-312ca01d.svg",Ise="/javascript/assets/clock-893b13a4.svg",Nse={name:"TimeMod",data:function(){return{isActive:!1,mins:0,hours:0,draggedElem:null,time:null}},mounted:function(){this.$nextTick(function(){this.time=this.$refs.time})},methods:{showTime:function(){const n=`${this.mins}`.padStart(2,"0");this.$refs.timestamp.textContent=`${this.hours}:${n}`},updateTime:function(n,e){let t=(Math.round(e/6)+60)%60;n==="hours"?(this.hours=Math.floor(t/5),this.hours===0&&(this.hours=12)):this.mins=t,this.showTime()},setHandPosition:function(n,e){n.style.transform=`rotateZ(${e}deg)`;const t=n.classList.contains("hour-hand");this.updateTime(t?"hours":"minutes",e)},onMouseMove:function(n){if(this.draggedElem){const e=this.draggedElem.parentElement.getBoundingClientRect(),i=n.pageX-e.left.toFixed()-this.draggedElem.parentElement.clientWidth/2,o=n.pageY-e.top.toFixed()-this.draggedElem.parentElement.clientHeight/2;let r=Math.atan2(o,i)*(180/Math.PI);r+=90,this.setHandPosition(this.draggedElem,r)}},onMouseDown:function(n){this.draggedElem=n.target,this.draggedElem.onmousemove=this.onMouseMove,this.time.onmousemove=this.onMouseMove},onMouseUp:function(n){n=n||window.event,n.preventDefault(),this.draggedElem&&(this.draggedElem.onmousemove=null,this.time.onmousemove=null,this.draggedElem=null)}}},Tse=n=>(eS("data-v-39c31f7e"),n=n(),tS(),n),Ase=Tse(()=>D("img",{class:"unselectable",src:Ise},null,-1)),Mse={ref:"timestamp",id:"timestamp"};function Rse(n,e,t,i,s,o){return j(),K(Un,null,[D("div",{id:"time",class:"time",onMouseup:e[4]||(e[4]=(...r)=>o.onMouseUp&&o.onMouseUp(...r)),ref:"time"},[Ase,D("div",{class:"hand hour-hand",onMousedown:e[0]||(e[0]=(...r)=>o.onMouseDown&&o.onMouseDown(...r)),onMouseup:e[1]||(e[1]=(...r)=>o.onMouseUp&&o.onMouseUp(...r))},null,32),D("div",{class:"hand minute-hand",onMousedown:e[2]||(e[2]=(...r)=>o.onMouseDown&&o.onMouseDown(...r)),onMouseup:e[3]||(e[3]=(...r)=>o.onMouseUp&&o.onMouseUp(...r))},null,32)],544),D("div",null,[D("h2",null,[Ht("The time is "),D("span",Mse,null,512)])])],64)}const Pse=se(Nse,[["render",Rse],["__scopeId","data-v-39c31f7e"]]),Ose={class:"slide"},Fse=D("div",{class:"heading"},"Opérateurs arithmétiques",-1),Bse={class:"content"},Vse=D("p",null," Exercice: Il est actuellement minuit. Quelle heure sera-t-il après 40 heures passées sur une horloge de 12 heures ? Utilisez l'opérateur modulo % pour calculer l'heure ",-1),Wse=D("img",{src:Ese,class:"html-css-logo",style:{left:"40%",top:"unset",height:"60%",width:"60%"}},null,-1),Hse={__name:"SlidePresentation36",setup(n){return(e,t)=>(j(),K("div",Ose,[Fse,D("div",Bse,[Vse,Wse,W(Pse)])]))}},$se={class:"slide"},zse=D("div",{class:"heading"},"Opérateurs arithmétiques",-1),Use={class:"content"},qse=D("p",null,"Calcule le temps",-1),jse={__name:"SlidePresentation37",setup(n){return(e,t)=>(j(),K("div",$se,[zse,D("div",Use,[qse,W(Ze,{code:`var hours = 40;
var clock = 12;
var time;
//mettre le calcul ici
console.log("it is "+time+" o'clock");`,editorIndex:"2"})])]))}},Kse={},Gse={class:"slide"},Zse=he(`<div class="heading">Opérateurs arithmétiques</div><div class="content"><p>Solution pour l&#39;exo modulo:</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#0000ff;">var</span> hours = 40;
                  <span style="color:#0000ff;">var</span> clock = 12;
                  <span style="color:#0000ff;">var</span> time = 40%12;
                  console.log(<span style="color:#a31515;">&quot;it is &quot;</span>+time+<span style="color:#a31515;">&quot; o&#39;clock&quot;</span>);
                </pre></div><p> Y a pas mieux que l&#39;exercice sur l&#39;horloge pour comprendre les modulos et les ensembles finis ordonnés </p></div>`,2),Yse=[Zse];function Xse(n,e){return j(),K("div",Gse,Yse)}const Qse=se(Kse,[["render",Xse]]),Jse={},eoe={class:"slide"},toe=he('<div class="heading">Data Types - Escape Sequences in String</div><div class="content"><p> Le caractère backslash (\\) a une fonction particulière dans les strings JavaScript. Combiné avec le caractère qui le suit, il représente un caractère qui n&#39;est pas autrement représentable dans le string. </p><div class="flex-container"><div><table class="tg"><thead><tr><th class="tg-0pky"><span style="font-weight:bold;">Sequence</span></th><th class="tg-0pky"><span style="font-weight:bold;">Caractère représenté</span></th></tr></thead><tbody><tr><td class="tg-0pky">\\0</td><td class="tg-0pky">Le caractère NUL (\\u0000)</td></tr><tr><td class="tg-0pky">\\b</td><td class="tg-0pky">Retour en arrière (\\u0008)</td></tr><tr><td class="tg-0pky">\\t</td><td class="tg-0pky">Horizontal tab (\\u0009)</td></tr><tr><td class="tg-0pky">\\n</td><td class="tg-0pky">Nouvelle ligne(\\u000A)</td></tr><tr><td class="tg-0pky">\\v</td><td class="tg-0pky">Onglet vertical(\\u000B)</td></tr><tr><td class="tg-0pky">\\f</td><td class="tg-0pky">Form feed (\\u000C)</td></tr></tbody></table></div><div><table class="tg"><thead><tr><th class="tg-0pky"><span style="font-weight:bold;">Sequence</span></th><th class="tg-0pky"><span style="font-weight:bold;">Caractère représenté</span></th></tr></thead><tbody><tr><td class="tg-0pky">\\r</td><td class="tg-0pky">Retour à la ligne (\\u000D)</td></tr><tr><td class="tg-0pky">\\&quot;</td><td class="tg-0pky">Guillemets doubles (\\u0022)</td></tr><tr><td class="tg-0pky">\\&#39;</td><td class="tg-0pky"> Apostrophe ou Guillemets simples (\\u0027 </td></tr><tr><td class="tg-0pky">\\\\</td><td class="tg-0pky">Backslash (\\u005C)</td></tr><tr><td class="tg-0pky">\\x XX</td><td class="tg-0pky"> Le caractère Latin-1 spécifié par les deux chiffres hexadécimaux XX </td></tr><tr><td class="tg-0pky">\\u XXXX</td><td class="tg-0pky"> Le caractère Unicode spécifié par les quatre chiffres hexadécimaux XXXX </td></tr></tbody></table></div></div></div>',2),ioe=[toe];function noe(n,e){return j(),K("div",eoe,ioe)}const soe=se(Jse,[["render",noe]]),gu="/javascript/assets/heart-d19b8a9a.svg",ooe={},roe={class:"slide"},aoe=he('<div class="heading">Data Types - Strings</div><div class="content"><img src="'+gu+'" class="html-css-logo" style="left:70%;top:73%;"><img src="'+gu+'" class="html-css-logo" style="left:50%;top:75%;"><img src="'+gu+`" class="html-css-logo" style="left:10%;top:74%;"><p> Exercice : Assignez la phrase de l&#39;exercice à une variable (var text) et imprimez-la avec console.log(text); </p><p> Phrase: <span style="color:#a31515;">&quot;j&#39;adore&quot; tellement Perl que je n&#39;arrive pas à y croire! Le meilleur langage de programmation au monde, je vous le jure ;)\\</span></p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;"><span style="color:#008000;">#Perl example:</span>
                @P=split<span style="color:#a31515;">//</span>,<span style="color:#a31515;">&quot;.URRUU\\c8R&quot;</span>;@d=split<span style="color:#a31515;">//</span>,<span style="color:#a31515;">&quot;\\nrekcah xinU / lreP rehtona tsuJ&quot;</span>;<span style="color:#0000ff;">sub </span>p{
                  @p{<span style="color:#a31515;">&quot;r$p&quot;</span>,<span style="color:#a31515;">&quot;u$p&quot;</span>}=(P,P);pipe<span style="color:#a31515;">&quot;r$p&quot;</span>,<span style="color:#a31515;">&quot;u$p&quot;</span>;++$p;($q*=2)+=$f=!fork;map{$P=$P[$f^ord
                  ($p{$_})&amp;6];$p{$_}=<span style="color:#a31515;">/ ^$P/ix</span>?$P:close$_}keys%p}p;p;p;p;p;map{$p{$_}=~<span style="color:#a31515;">/^[P.]/</span>&amp;&amp;
                  close$_}%p;wait <span style="color:#0000ff;">until</span>$?;map{<span style="color:#a31515;">/^r/</span>&amp;&amp;<span style="color:#a31515;">&lt;$_&gt;</span>}%p;$_=$d[$q];sleep rand(2)<span style="color:#0000ff;">if</span><span style="color:#a31515;">/\\S/</span>;<span style="color:#0000ff;">print</span>
                </pre></div><p> Perl a été conçu par Larry Wall qui a étudié la linguistique. MDR (la linguistique est l&#39;étude scientifique du langage) </p></div>`,2),loe=[aoe];function coe(n,e){return j(),K("div",roe,loe)}const doe=se(ooe,[["render",coe]]),uoe={},hoe={class:"slide"},foe=he('<div class="heading">Data Types - Strings</div><div class="content"><img src="'+gu+'" class="html-css-logo" style="left:70%;top:73%;"><img src="'+gu+'" class="html-css-logo" style="left:50%;top:75%;"><img src="'+gu+`" class="html-css-logo" style="left:10%;top:74%;"><p> Exercice : Assignez la phrase de l&#39;exercice à une variable (var text) et imprimez-la avec console.log(text); </p><p> Phrase: <span style="color:#a31515;">&quot;j&#39;adore&quot; tellement Perl que je n&#39;arrive pas à y croire! Le meilleur langage de programmation au monde, je vous le jure ;)\\</span></p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;"><span style="color:#008000;">#Perl example:</span>
                @P=split<span style="color:#a31515;">//</span>,<span style="color:#a31515;">&quot;.URRUU\\c8R&quot;</span>;@d=split<span style="color:#a31515;">//</span>,<span style="color:#a31515;">&quot;\\nrekcah xinU / lreP rehtona tsuJ&quot;</span>;<span style="color:#0000ff;">sub </span>p{
                  @p{<span style="color:#a31515;">&quot;r$p&quot;</span>,<span style="color:#a31515;">&quot;u$p&quot;</span>}=(P,P);pipe<span style="color:#a31515;">&quot;r$p&quot;</span>,<span style="color:#a31515;">&quot;u$p&quot;</span>;++$p;($q*=2)+=$f=!fork;map{$P=$P[$f^ord
                  ($p{$_})&amp;6];$p{$_}=<span style="color:#a31515;">/ ^$P/ix</span>?$P:close$_}keys%p}p;p;p;p;p;map{$p{$_}=~<span style="color:#a31515;">/^[P.]/</span>&amp;&amp;
                  close$_}%p;wait <span style="color:#0000ff;">until</span>$?;map{<span style="color:#a31515;">/^r/</span>&amp;&amp;<span style="color:#a31515;">&lt;$_&gt;</span>}%p;$_=$d[$q];sleep rand(2)<span style="color:#0000ff;">if</span><span style="color:#a31515;">/\\S/</span>;<span style="color:#0000ff;">print</span>
                </pre></div><p> Perl a été conçu par Larry Wall qui a étudié la linguistique. MDR (la linguistique est l&#39;étude scientifique du langage) </p></div>`,2),goe=[foe];function poe(n,e){return j(),K("div",hoe,goe)}const moe=se(uoe,[["render",poe]]),_oe={class:"slide"},boe=D("div",{class:"heading"},"Data Types - Strings",-1),voe={class:"content"},woe=D("p",null,"Échapper la chaîne de caractères",-1),Coe={__name:"SlidePresentation42",setup(n){return(e,t)=>(j(),K("div",_oe,[boe,D("div",voe,[woe,W(Ze,{code:`//jette actuellement une erreur 
//parce qu'il n'est pas échappé correctement.
//Vous devez le faire. Corrige le bug, champion !
var text = ""j'adore" tellement Perl que je n'arrive pas à y croire! Le meilleur langage de programmation au monde, je vous le jure ;)\\";
console.log(text);`,editorIndex:"3"})])]))}},yoe="/javascript/assets/chain-d93ba6a3.svg",Soe={},Loe={class:"slide"},xoe=he(`<div class="heading">Data Types - String - Concatenation</div><div class="content"><p> L&#39;une des fonctions intégrées de JavaScript est la possibilité de concaténer des chaînes de caractères. Si vous utilisez l&#39;opérateur + avec des nombres, il les additionne. Mais si vous utilisez cet opérateur sur des chaînes de caractères, il les joint en ajoutant la seconde à la première </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#0000ff;">var</span> msg = <span style="color:#a31515;">&quot;Hello, &quot;</span> + <span style="color:#a31515;">&quot;world&quot;</span>; <span style="color:#008000;">// Produces the string &quot;Hello, world&quot;</span>
                  <span style="color:#0000ff;">var</span> greeting = <span style="color:#a31515;">&quot;Welcome to my blog,&quot;</span> + <span style="color:#a31515;">&quot; &quot;</span> + name;
                </pre></div><img src="`+yoe+'" class="html-css-logo" style="left:20%;top:55%;width:60%;height:40%;"></div>',2),Doe=[xoe];function koe(n,e){return j(),K("div",Loe,Doe)}const Eoe=se(Soe,[["render",koe]]),Ioe={class:"slide"},Noe=D("div",{class:"heading"},"Data Types - Booleans",-1),Toe={class:"content"},Aoe=D("p",null,[Ht(" Une valeur booléenne représente la vérité ou la fausseté, on ou off, oui ou non. Il n'y a que deux valeurs possibles de ce type. Les mots réservés "),D("b",null,"true"),Ht(" et "),D("b",null,"false"),Ht(" évaluent ces deux valeurs ")],-1),Moe={__name:"SlidePresentation44",setup(n){return(e,t)=>(j(),K("div",Ioe,[Noe,D("div",Toe,[Aoe,W(jN)])]))}},Roe={class:"slide"},Poe=D("div",{class:"heading"},"Data Types - Booleans",-1),Ooe={class:"content"},Foe=D("p",null," Les valeurs suivantes se convertissent en, et donc fonctionnent comme, false. Toutes les autres valeurs sont converties en, et fonctionnent comme, true ",-1),Boe={__name:"SlidePresentation45",setup(n){return(e,t)=>(j(),K("div",Roe,[Poe,D("div",Ooe,[Foe,W(Ze,{code:`var undef = undefined;
var nichts = null;
var zero = 0;
var minusZero = -0;
var notANumber = NaN;
var emptyString = ""; // the empty string
var normalTrue = true;
var normalFalse = false;
console.log("undef in boolean is: " + Boolean(undef)); //casting to boolean
console.log("nichts in boolean is: " + Boolean(nichts));
console.log("zero in boolean is: " + Boolean(zero));
console.log("minusZero in boolean is: " + Boolean(minusZero));
console.log("notANumber in boolean is: " + Boolean(notANumber));
console.log("emptyString in boolean is: " + Boolean(emptyString));
console.log("normalTrue in boolean is: " + Boolean(normalTrue));
console.log("normalFalse in boolean is: " + Boolean(normalFalse));`,editorIndex:"4"})])]))}},Voe="/javascript/assets/nullUndefined-dba21671.svg",Woe={},Hoe={class:"slide"},$oe=he('<div class="heading">Data Types - null et undefined</div><div class="content"><div class="flex-container"><div><p><b>null</b> est un mot-clé du langage qui est évalué à une valeur spéciale, généralement utilisée pour indiquer <b>l&#39;absence d&#39;une valeur</b></p><p> JavaScript possède également une deuxième valeur qui indique l&#39;absence de valeur. La valeur <b>undefined</b> représente un type d&#39;absence plus profond. </p></div><div style="width:55%;"><img src="'+Voe+'" style="width:100%;height:100%;"></div></div></div>',2),zoe=[$oe];function Uoe(n,e){return j(),K("div",Hoe,zoe)}const qoe=se(Woe,[["render",Uoe]]),joe="/javascript/assets/arrayIndex-591bf704.svg",Koe="/javascript/assets/arrayboxes-714032ae.svg",Goe={},Zoe={class:"slide"},Yoe=he('<div class="heading">Arrays</div><div class="content"><div class="flex-container"><div style="width:78%;"><p> Un tableau (array) est une <b>collection ordonnée de valeurs</b>. Chaque valeur est appelée un élément, et chaque élément a une position numérique dans le tableau, appelée son index. Les tableaux JavaScript sont non typés : un élément de tableau peut être de <b>n&#39;importe quel type</b>, et différents éléments d&#39;un même tableau peuvent être de types différents. Les éléments d&#39;un tableau peuvent même être des objets ou d&#39;autres tableaux, ce qui permet de créer des structures de données complexes, telles que des tableaux d&#39;objets et des tableaux de tableaux. </p></div><div style="width:20%;"><img src="'+joe+'" style="width:100%;"></div></div><img src="'+Koe+'" class="html-css-logo" style="left:10%;top:58%;height:40%;width:40%;"></div>',2),Xoe=[Yoe];function Qoe(n,e){return j(),K("div",Zoe,Xoe)}const Joe=se(Goe,[["render",Qoe]]),ere={},tre={class:"slide"},ire=he(`<div class="heading">Creating Arrays</div><div class="content"><p> La façon la plus simple de créer un tableau est d&#39;utiliser un littéral de tableau, qui est simplement une liste d&#39;éléments de tableau séparés par des virgules entre crochets </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#0000ff;">var</span> empty = []; <span style="color:#008000;">// Un tableau sans éléments</span>
                  <span style="color:#0000ff;">var</span> primes = [2, 3, 5, 7, 11]; <span style="color:#008000;">// Un tableau avec 5 éléments numériques</span>
                  <span style="color:#0000ff;">var</span> misc = [ 1.1, <span style="color:#0000ff;">true</span>, <span style="color:#a31515;">&quot;a&quot;</span>, ]; <span style="color:#008000;">// 3 éléments de différents types + virgule de fin de ligne</span></pre></div><p> Les valeurs d&#39;un littéral de tableau ne doivent pas nécessairement être des constantes ; elles peuvent être des expressions arbitraires </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#0000ff;">var</span> base = 1024;
                  <span style="color:#0000ff;">var</span> table = [base, base+1, base+2, base+3];</pre></div><p> Si vous omettez une valeur d&#39;un littéral de tableau, l&#39;élément omis reçoit la valeur undefined </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#0000ff;">var</span> count = [1,,3]; <span style="color:#008000;">// An array with 3 elements, the middle one undefined.</span>
                  <span style="color:#0000ff;">var</span> undefs = [,,]; <span style="color:#008000;">// An array with 2 elements, both undefined.</span></pre></div></div>`,2),nre=[ire];function sre(n,e){return j(),K("div",tre,nre)}const ore=se(ere,[["render",sre]]),rre={},are={class:"slide"},lre=he('<div class="heading">Creating Arrays</div><div class="content"><p> Une autre façon de créer un tableau est d&#39;utiliser le <b>constructeur</b> Array(). Je vais expliquer ce qu&#39;est un <b>constructeur</b> un peu plus tard. Je n&#39;inclus cette méthode que par souci d&#39;exhaustivité. Vous pouvez invoquer ce <b>constructeur</b> de trois manières différentes </p><ul><li><p>Appelez-le sans arguments</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;"><span style="color:#0000ff;">var</span> a = <span style="color:#0000ff;">new</span> Array();</pre></div></li><li><p> L&#39;appeler avec un seul argument numérique, qui spécifie une longueur </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;"><span style="color:#0000ff;">var</span> a = <span style="color:#0000ff;">new</span> Array(10);</pre></div></li><li><p> Spécifier explicitement deux ou plusieurs éléments de tableau ou un seul élément non numérique pour le tableau </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;"><span style="color:#0000ff;">var</span> a = <span style="color:#0000ff;">new</span> Array(5, 4, 3, 2, 1, <span style="color:#a31515;">&quot;testing, testing&quot;</span>) ;</pre></div></li></ul></div>',2),cre=[lre];function dre(n,e){return j(),K("div",are,cre)}const ure=se(rre,[["render",dre]]),hre={},fre={class:"slide"},gre=he(`<div class="heading">Lecture et écriture des éléments d&#39;un Array</div><div class="content"><p> Vous accédez à un élément d&#39;un tableau en utilisant l&#39;opérateur <b>[ ]</b>. Une référence au tableau doit apparaître à gauche des crochets. Une expression arbitraire dont la valeur est un nombre <b>entier non négatif</b> doit se trouver à l&#39;intérieur des parenthèses. Vous pouvez utiliser cette syntaxe pour lire et écrire la valeur d&#39;un élément d&#39;un tableau. Ainsi, les instructions suivantes sont toutes <b>légales</b> en JavaScript : </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#0000ff;">var</span> a = [<span style="color:#a31515;">&quot;world&quot;</span>] ; <span style="color:#008000;">// Commence par un tableau à un élément</span>
                  <span style="color:#0000ff;">var</span> value = a[0] ; <span style="color:#008000;">// Lecture de l&#39;élément 0</span>
                  a[1] = 3.14 ; <span style="color:#008000;">// Écriture de l&#39;élément 1</span>
                  i = 2 ;
                  a[i] = 3 ; <span style="color:#008000;">// Écriture de l&#39;élément 2</span>
                  a[i + 1] = <span style="color:#a31515;">&quot;hello&quot;</span> ; <span style="color:#008000;">// Écriture de l&#39;élément 3</span>
                  a[a[i]] = a[0] ; <span style="color:#008000;">// Lecture des éléments 0 et 2, écriture de l&#39;élément 3</span>
                </pre></div></div>`,2),pre=[gre];function mre(n,e){return j(),K("div",fre,pre)}const _re=se(hre,[["render",mre]]),bre={class:"slide"},vre=D("div",{class:"heading"},"Arrays",-1),wre={class:"content"},Cre=D("p",null,[Ht(" Exercice : enregistrez 5 variables prédéfinies dans un tableau et donnez le contenu du tableau. Pour imprimer le contenu du tableau, utilisez "),D("b",null,"console.log"),Ht(" et concaténer les éléments du tableau avec le symbole "),D("b",null,"+"),Ht(". ")],-1),yre={__name:"SlidePresentation51",setup(n){return(e,t)=>(j(),K("div",bre,[vre,D("div",wre,[Cre,W(Ze,{code:`var hello = "Hello ";
var folks = "folks, ";
var now = "now ";
var you = "you ";
var know = "know";
var arrayExample = [] //le tableau créé ici, si vous voulez vous pouvez ajouter les éléments ici directement
var fullString; //concaténer les éléments du tableau ici
console.log("The array contains now " 
              + arrayExample.length //donne la taille du tableau
              + " elements and results in the following string when concatinated: " 
              + fullString);`,editorIndex:"5"})])]))}},Sre={},Lre={class:"slide"},xre=he(`<div class="heading">Array Length</div><div class="content"><p> Chaque tableau possède une propriété de longueur (<b>length</b>). La propriété length spécifie le nombre d&#39;éléments du tableau. Sa valeur est supérieure d&#39;une unité à l&#39;indice le plus élevé du tableau </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  [].length <span style="color:#008000;">// =&gt; 0 : le tableau n&#39;a pas d&#39;éléments</span>
                  [<span style="color:#a31515;">&#39;a&#39;</span>, <span style="color:#a31515;">&#39;b&#39;</span>, <span style="color:#a31515;">&#39;c&#39;</span>].length <span style="color:#008000;">// =&gt; 3 : l&#39;indice le plus élevé est 2, la longueur est 3</span>
                </pre></div><p> Si vous définissez la propriété <b>length</b> à un nombre entier non négatif <b>n</b> inférieur à sa valeur actuelle, tous les éléments du tableau dont l&#39;index est supérieur ou égal à <b>n</b> sont supprimés du tableau. </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                a = [1,2,3,4,5] ; <span style="color:#008000;">// On commence avec un tableau de 5 éléments.</span>
                a.length = 3 ; <span style="color:#008000;">// a est maintenant [1,2,3].</span>
                a.length = 0 ; <span style="color:#008000;">// Supprime tous les éléments. a est [].</span>
                a.length = 5 ; <span style="color:#008000;">// La longueur est de 5, mais il n&#39;y a pas d&#39;éléments, comme new Array(5).</span>
                </pre></div></div>`,2),Dre=[xre];function kre(n,e){return j(),K("div",Lre,Dre)}const Ere=se(Sre,[["render",kre]]),Ire={name:"LightSwitch",data:function(){return{extraItems:["Bacon","Butter","Cereal","Coffee","Creamer","Fruit","Mayo","Milk","Yogurt"],items:["Meat","Eggs","Juice","Vegetables"],theArrayUl:this.$refs.arrayui}},mounted:function(){this.$nextTick(function(){this.theArrayUl=this.$refs.arrayui})},methods:{pushListener:function(){const n=this.extraItems[Math.floor(Math.random()*this.extraItems.length)];this.items.push(n)},popListener:function(){this.items.pop()},reverseListener:function(){this.items.reverse()},sortListener:function(){this.items.sort()},shiftListener:function(){this.items.shift()},unshiftListener:function(){const n=this.extraItems[Math.floor(Math.random()*this.extraItems.length)];this.items.unshift(n)}}},Nre={class:"maincontent"},Tre={id:"arrayContainer"},Are={id:"theArrayUl"},Mre={id:"controls"};function Rre(n,e,t,i,s,o){return j(),K("div",Nre,[D("div",Tre,[D("ul",Are,[(j(!0),K(Un,null,rm(n.items,(r,a)=>(j(),K("li",{class:"listItem show",key:r.id},[Ht(ya(r)+" ",1),D("div",null,ya(a),1)]))),128))])]),D("div",Mre,[D("button",{id:"push",onClick:e[0]||(e[0]=(...r)=>o.pushListener&&o.pushListener(...r))},"push()"),D("button",{id:"pop",onClick:e[1]||(e[1]=(...r)=>o.popListener&&o.popListener(...r))},"pop()"),D("button",{id:"reverse",onClick:e[2]||(e[2]=(...r)=>o.reverseListener&&o.reverseListener(...r))},"reverse()"),D("button",{id:"sort",onClick:e[3]||(e[3]=(...r)=>o.sortListener&&o.sortListener(...r))},"sort()"),D("button",{id:"sort",onClick:e[4]||(e[4]=(...r)=>o.unshiftListener&&o.unshiftListener(...r))},"unshift()"),D("button",{id:"sort",onClick:e[5]||(e[5]=(...r)=>o.shiftListener&&o.shiftListener(...r))},"shift()")])])}const K5=se(Ire,[["render",Rre],["__scopeId","data-v-da864c2a"]]),Pre={class:"slide"},Ore=D("div",{class:"heading"},"Array Manipulation",-1),Fre={class:"content"},Bre=D("p",null,[Ht(" Il existe de nombreuses fonctions de tableau directement disponibles sur un type de tableau. "),D("b",null,"Je ne vais pas les détailler"),Ht(" car nous n'avons pas encore abordé les fonctions et cela pourrait prêter à confusion. Cependant, je veux donner un aperçu "),D("b",null,"rapide"),Ht(" de ce qui est possible avec les tableaux et montrer une courte liste de fonctions qui sont souvent utilisées pour manipuler les tableaux. ")],-1),Vre={__name:"SlidePresentation53",setup(n){return(e,t)=>(j(),K("div",Pre,[Ore,D("div",Fre,[Bre,W(K5)])]))}},Wre={},Hre={class:"slide"},$re=D("div",{class:"heading"},"Bloc syntax",-1),zre=D("div",{class:"content"},[D("p",null," Un bloc est un morceau de texte de programme Javascript qui est exécuté en tant qu'unité. "),D("p",null,"Toutes les instructions composées Javascript:"),D("div",{style:{background:"#ffffff",overflow:"auto",width:"auto",border:"solid gray","border-width":"0.1em 0.1em 0.1em 0.8em",padding:"0.2em 0.6em"}},[D("pre",{style:{margin:"0","line-height":"125%"}},`                  Ligne d'en-tête{
                          Bloc d'instructions imbriquées
                  }`)]),D("br"),D("p",null," Le bloc est délimité par une paire d'accolades { } et elles sont obligatoires. ")],-1),Ure=[$re,zre];function qre(n,e){return j(),K("div",Hre,Ure)}const jre=se(Wre,[["render",qre]]),Kre="/javascript/assets/function-5e0641ff.svg",Gre={},Zre={class:"slide"},Yre=he('<div class="heading">Functions</div><div class="content"><div class="flex-container"><div><ul><li> Une fonction est un bloc de code qui ne s&#39;exécute que lorsqu&#39;il est appelé. </li><br><li> Vous pouvez transmettre des données, appelées paramètres, à une fonction. </li><br><li>Une fonction peut renvoyer des données comme résultat.</li></ul></div><div style="width:60%;"><img src="'+Kre+'" style="width:100%;"></div></div></div>',2),Xre=[Yre];function Qre(n,e){return j(),K("div",Zre,Xre)}const Jre=se(Gre,[["render",Qre]]),eae={},tae={class:"slide"},iae=D("div",{class:"heading"},"Functions - Pourquoi utiliser des fonctions ?",-1),nae=D("div",{class:"content"},[D("p",null," Avant d'entrer dans les détails, il faut établir une image claire de ce que sont les fonctions "),D("ul",null,[D("li",null,[D("b",null,"Maximiser la réutilisation du code et minimiser la redondance")]),D("br"),D("li",null,[D("b",null,"Procedural decomposition"),Ht("(diviser les systèmes en parties) ")])]),D("img",{src:ZN,class:"html-css-logo",style:{left:"30%",top:"46%",width:"50%",height:"50%"}})],-1),sae=[iae,nae];function oae(n,e){return j(),K("div",tae,sae)}const rae=se(eae,[["render",oae]]),aae="/javascript/assets/functiondescriptionsimple-1a80dd5b.svg",lae={},cae={class:"slide"},dae=he(`<div class="heading">Functions - Définir une fonction</div><div class="content"><p> Une fonction est créée avec une expression qui commence par le mot clé <b>function</b></p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#000080;font-weight:bold;">function</span> nom(parameter1, parameter2, parameter3) {
                    <span style="color:#008800;font-style:italic;">// code à exécuter</span>
                  }</pre></div><img src="`+aae+'" class="html-css-logo" style="left:15%;top:30%;width:70%;height:70%;"></div>',2),uae=[dae];function hae(n,e){return j(),K("div",cae,uae)}const fae=se(lae,[["render",hae]]),gae="/javascript/assets/functiondescription-4d32501e.svg",pae={},mae={class:"slide"},_ae=he(`<div class="heading">Functions - Définir une fonction</div><div class="content"><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#000080;font-weight:bold;">const</span> nom = <span style="color:#000080;font-weight:bold;">function</span>(parameter1, parameter2, parameter3) {
                    <span style="color:#008800;font-style:italic;">// code à exécuter</span>
                  }</pre></div><img src="`+gae+'" class="html-css-logo" style="left:15%;top:30%;width:70%;height:70%;"></div>',2),bae=[_ae];function vae(n,e){return j(),K("div",mae,bae)}const wae=se(pae,[["render",vae]]),Cae={class:"slide"},yae=D("div",{class:"heading"},"Functions - function invocation",-1),Sae={class:"content"},Lae={__name:"SlidePresentation59",setup(n){return(e,t)=>(j(),K("div",Cae,[yae,D("div",Sae,[W(Ze,{code:`const square = function(x) {
  return x * x;
};

console.log(square(12)); //<-- function invocation
let result = square(4); //<--- une autre invocation de fonction
console.log(result)

function multiply(p1, p2) { //<-- déclaration de fonction classique
  return p1 * p2;   // La fonction renvoie le produit de p1 et p2
}

console.log(multiply(3,4))`,editorIndex:"6"})])]))}},xae="/javascript/assets/variable-living-space-7c6d3462.svg",Dae={},kae={class:"slide"},Eae=D("div",{class:"heading"},"Functions - Scopes",-1),Iae=D("div",{class:"content"},[D("br"),D("div",{class:"flex-container"},[D("div",null,[D("p",null,[Ht(" Lorsque vous utilisez un nom dans un programme, Javascript crée, modifie ou recherche le nom dans ce que l'on appelle un "),D("b",null,"espace de noms, c'est-à-dire un endroit où vivent les noms"),Ht(". ")])]),D("div",null,[D("img",{src:xae,style:{width:"100%"}})])])],-1),Nae=[Eae,Iae];function Tae(n,e){return j(),K("div",kae,Nae)}const Aae=se(Dae,[["render",Tae]]),Mae={},Rae={class:"slide"},Pae=he(`<div class="heading">Functions - Scopes</div><div class="content"><p> les variables peuvent être assignées à trois endroits différents, correspondant à trois scopes différentes </p><div class="flex-container"><div><p><b>Block scope</b></p></div><div style="width:80%;"><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                    {
                      <span style="color:#000080;font-weight:bold;">let</span> x = <span style="color:#0000FF;">2</span>;
                    }</pre></div></div></div><div class="flex-container"><div><p><b>Block scope</b></p></div><div style="width:80%;"><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                    <span style="color:#008800;font-style:italic;">// le code ici ne peut PAS utiliser le nom de la voiture</span>
                    <span style="color:#000080;font-weight:bold;">function</span> myFunction() {
                      <span style="color:#000080;font-weight:bold;">var</span> carName = <span style="color:#0000FF;">&quot;Volvo&quot;</span> ;
                      <span style="color:#008800;font-style:italic;">// le code ici peut utiliser carName</span>
                    }
                    <span style="color:#008800;font-style:italic;">// le code ici ne peut PAS utiliser carName</span></pre></div></div></div><div class="flex-container"><div><p><b>Global scope</b></p></div><div style="width:80%;"><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                      <span style="color:#000080;font-weight:bold;">let</span> carName = <span style="color:#0000FF;">&quot;Volvo&quot;</span> ;
                      <span style="color:#008800;font-style:italic;">// le code ici peut utiliser carName</span>
                      <span style="color:#000080;font-weight:bold;">function</span> myFunction() {
                      <span style="color:#008800;font-style:italic;">// le code ici peut également utiliser carName</span>
                      }</pre></div></div></div></div>`,2),Oae=[Pae];function Fae(n,e){return j(),K("div",Rae,Oae)}const Bae=se(Mae,[["render",Fae]]),Vae={class:"slide"},Wae=D("div",{class:"heading"},"Function - Exercise",-1),Hae={class:"content"},$ae=D("p",null,' Écrivez une fonction JavaScript pour imprimer le message "Hello World". ',-1),zae={__name:"SlidePresentation62",setup(n){return(e,t)=>(j(),K("div",Vae,[Wae,D("div",Hae,[$ae,W(Ze,{code:`//Écrivez une fonction JavaScript pour imprimer le message "Hello World".
function displayMessage() {
  //mettre le code ici
}

displayMessage(); //"Hello World"`,editorIndex:"7"})])]))}},Uae="/javascript/assets/arguments-df0dc6a6.svg",qae={},jae={class:"slide"},Kae=D("div",{class:"heading"},"Functions - Arguments",-1),Gae=D("div",{class:"content"},[D("div",{class:"flex-container"},[D("div",null,[D("p",null," Les diapositives suivantes poursuivent l'histoire des fonctions en étudiant les concepts du passage d'arguments en Python, c'est-à-dire la façon dont les objets sont envoyés aux fonctions en tant que données d'entrée. "),D("p",null,[Ht(" Comme nous le verrons, "),D("b",null,"les arguments"),Ht(" (aussi appelés paramètres) sont affectés à des "),D("b",null,"noms dans une fonction"),Ht(", mais ils ont plus à voir avec les références d'objets qu'avec les scopes de variables. ")])]),D("div",null,[D("img",{src:Uae,style:{width:"90%"}})])])],-1),Zae=[Kae,Gae];function Yae(n,e){return j(),K("div",jae,Zae)}const Xae=se(qae,[["render",Yae]]),Qae="/javascript/assets/argumentPassing-c94f0027.svg",Jae={},ele={class:"slide"},tle=he('<div class="heading">Functions - Argument-Passing Basics</div><div class="content"><div class="flex-container"><div style="width:60%;"><p><b>Les arguments sont transmis en assignant automatiquement des objets aux noms de variables locales. </b></p><p> Les arguments de fonction (références à des objets partagés envoyées par l&#39;appelant) ne sont qu&#39;un autre exemple d&#39;affectation Javascript à l&#39;œuvre. Les objets passés en tant qu&#39;arguments ne sont jamais copiés automatiquement. </p><p><b>C&#39;est un peu comme faire : var box = box2 = &quot;text&quot;</b></p></div><div><img src="'+Qae+'" style="width:85%;"></div></div></div>',2),ile=[tle];function nle(n,e){return j(),K("div",ele,ile)}const sle=se(Jae,[["render",nle]]),ole="/javascript/assets/argumentAssignment-97f50a63.svg",rle={},ale={class:"slide"},lle=he(`<div class="heading">Functions - Argument-Passing Basics</div><div class="content"><div class="flex-container"><div><p><b>L&#39;affectation des noms d&#39;arguments à l&#39;intérieur d&#39;une fonction n&#39;affecte pas l&#39;appelant.</b></p><br><p><b>C&#39;est un peu comme faire :</b></p><div style="background:#f0f0f0;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                      box <span style="color:#666666;">=</span> box2 <span style="color:#666666;">=</span> <span style="color:#4070a0;">&quot;text&quot;</span>
                      box2 <span style="color:#666666;">=</span> <span style="color:#4070a0;">&quot;nouveau texte&quot;</span></pre></div></div><div style="width:52%;"><img src="`+ole+'" style="width:100%;"></div></div></div>',2),cle=[lle];function dle(n,e){return j(),K("div",ale,cle)}const ule=se(rle,[["render",dle]]),hle="/javascript/assets/mutable-95b3f669.svg",fle={},gle={class:"slide"},ple=he(`<div class="heading">Functions - Argument-Passing Basics</div><div class="content"><div class="flex-container"><div style="width:64%;"><p><b>La modification de l&#39;argument d&#39;un objet mutable dans une fonction peut avoir un impact sur l&#39;appelant.</b></p><p><b>Exemple :</b></p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                      arr = [<span style="color:#009999;">1</span>,<span style="color:#009999;">2</span>,<span style="color:#009999;">3</span>,<span style="color:#009999;">4</span>];
                      <span style="color:#0000aa;">function</span> mutate(arr){
                        arr[<span style="color:#009999;">0</span>] = <span style="color:#009999;">100</span>
                      }
                      mutate(arr);
                      console.log(arr[<span style="color:#009999;">0</span>]);</pre></div></div><div style="width:52%;"><img src="`+hle+`" style="width:100%;"><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                      arr = [<span style="color:#009999;">1</span>,<span style="color:#009999;">2</span>,<span style="color:#009999;">3</span>,<span style="color:#009999;">4</span>];
                      <span style="color:#0000aa;">function</span> mutate(arr){
                        arr = [<span style="color:#009999;">100</span>,<span style="color:#009999;">200</span>,<span style="color:#009999;">300</span>,<span style="color:#009999;">400</span>]
                      }
                      mutate(arr);
                      console.log(arr[<span style="color:#009999;">0</span>]);</pre></div></div></div></div>`,2),mle=[ple];function _le(n,e){return j(),K("div",gle,mle)}const ble=se(fle,[["render",_le]]),vle={},wle={class:"slide"},Cle=he(`<div class="heading">Functions - Nombre d&#39;arguments</div><div class="content"><p> Si nous définissons une fonction qui prend un paramètre mais que nous l&#39;appelons avec trois, le langage ne se plaint pas </p><p>Cette fonction attend 1 argument, et reçoit 3 arguments :</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                <span style="color:#000080;font-weight:bold;">function</span> square(x) { <span style="color:#000080;font-weight:bold;">return</span> x * x; }
                console.log(square(<span style="color:#0000FF;">4</span>, <span style="color:#000080;font-weight:bold;">true</span>, <span style="color:#0000FF;">&quot;hedgehog&quot;</span>));</pre></div><br><p>Cette fonction attend 2 arguments, mais n&#39;en reçoit qu&#39;un seul:</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#000080;font-weight:bold;">function</span> multiply(x, y) { <span style="color:#000080;font-weight:bold;">return</span> x * y; }
                  console.log(multiply(<span style="color:#0000FF;">4</span>)); <span style="color:#008800;font-style:italic;">//le deuxième paramètre devient undefined</span></pre></div></div>`,2),yle=[Cle];function Sle(n,e){return j(),K("div",wle,yle)}const Lle=se(vle,[["render",Sle]]),xle="/javascript/assets/defaultParameter-d2053c53.svg",Dle={},kle={class:"slide"},Ele=he(`<div class="heading">Functions - Paramètre Valeur par défaut</div><div class="content"><p> Si nous appelons la fonction sans argument, elle utilise la valeur par défaut </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#000080;font-weight:bold;">function</span> multiply(x, y=<span style="color:#0000FF;">4</span>) { <span style="color:#000080;font-weight:bold;">return</span> x * y; } <span style="color:#008800;font-style:italic;">//Le deuxième paramètre est un paramètre par défaut</span>
                  console.log(multiply(<span style="color:#0000FF;">8</span>)); <span style="color:#008800;font-style:italic;">//result: 32</span></pre></div><br><img src="`+xle+'" style="width:35%;"></div>',2),Ile=[Ele];function Nle(n,e){return j(),K("div",kle,Ile)}const Tle=se(Dle,[["render",Nle]]),Ale="/javascript/assets/scale-8a4388e6.svg",Mle={},Rle={class:"slide"},Ple=he('<div class="heading">Opérateurs de comparaison</div><div class="content"><p> Les opérateurs de comparaison sont utilisés pour comparer deux valeurs et renvoyer un résultat booléen, que nous testerons et sur lequel nous agirons dans une déclaration et un programme plus larges </p><div class="flex-container"><div><table class="tg"><thead><tr><th class="tg-0lax"><span style="font-weight:bold;">Operator</span></th><th class="tg-0lax"><span style="font-weight:bold;">Nom</span></th><th class="tg-0lax"><span style="font-weight:bold;">Exemple</span></th></tr></thead><tbody><tr><td class="tg-0lax">==</td><td class="tg-0lax">Egale</td><td class="tg-0lax">x == y</td></tr><tr><td class="tg-0lax">==</td><td class="tg-0lax">valeur égale et type égal</td><td class="tg-0lax">x == y</td></tr><tr><td class="tg-0lax">!=</td><td class="tg-0lax">Non égal</td><td class="tg-0lax">x != y</td></tr><tr><td class="tg-0lax">&gt;</td><td class="tg-0lax">Supérieur à</td><td class="tg-0lax">x &gt; y<br></td></tr><tr><td class="tg-0lax">&lt;</td><td class="tg-0lax">Inférieur à</td><td class="tg-0lax">x &lt; y</td></tr><tr><td class="tg-0lax">&gt;=</td><td class="tg-0lax">Supérieur ou égal à</td><td class="tg-0lax">x &gt;= y</td></tr><tr><td class="tg-0lax">&lt;=</td><td class="tg-0lax">Inférieur ou égal à</td><td class="tg-0lax">x &lt;= y</td></tr></tbody></table></div><div><img src="'+Ale+'" style="width:70%;"></div></div></div>',2),Ole=[Ple];function Fle(n,e){return j(),K("div",Rle,Ole)}const Ble=se(Mle,[["render",Fle]]),Vle="/javascript/assets/scale1-2-3bbe6a6e.svg",Wle="/javascript/assets/scale20-1-0ff28334.svg",QI="/javascript/assets/scale20-20-fdcf1962.svg",Hle={},$le={class:"slide"},zle=he('<div class="heading">Opérateurs de comparaison</div><div class="content"><div class="flex-container"><div><table class="tg"><thead><tr><th class="tg-0lax"><span style="font-weight:bold;">Operator exemple</span></th><th class="tg-0lax"><span style="font-weight:bold;">Illustration</span></th><th class="tg-0lax"><span style="font-weight:bold;">Résultat</span></th></tr></thead><tbody><tr><td class="tg-0lax">1 &lt; 2</td><td class="tg-0lax"><img src="'+Vle+'" style="width:47%;"></td><td class="tg-0lax"><span style="color:rgb(2, 85, 27);"><b>True</b></span></td></tr><tr><td class="tg-0lax">2.0 &gt;= 1</td><td class="tg-0lax"><img src="'+Wle+'" style="width:47%;"></td><td class="tg-0lax"><span style="color:rgb(2, 85, 27);"><b>True</b></span></td></tr></tbody></table></div><div><table class="tg"><thead><tr><th class="tg-0lax"><span style="font-weight:bold;">Operator exemple</span></th><th class="tg-0lax"><span style="font-weight:bold;">Illustration</span></th><th class="tg-0lax"><span style="font-weight:bold;">Résultat</span></th></tr></thead><tbody><tr><td class="tg-0lax">2.0 == 2.0</td><td class="tg-0lax"><img src="'+QI+'" style="width:60%;"></td><td class="tg-0lax"><span style="color:rgb(2, 85, 27);"><b>True</b></span></td></tr><tr><td class="tg-0lax">2.0 != 2.0</td><td class="tg-0lax"><img src="'+QI+'" style="width:60%;"></td><td class="tg-0lax"><span style="color:red;"><b>False</b></span></td></tr></tbody></table></div></div></div>',2),Ule=[zle];function qle(n,e){return j(),K("div",$le,Ule)}const jle=se(Hle,[["render",qle]]),Kle={},Gle={class:"slide"},Zle=D("div",{class:"heading"},"Opérateurs de comparaison - Quiz",-1),Yle=D("div",{class:"content"},[D("iframe",{src:"https://docs.google.com/forms/d/e/1FAIpQLScP5xI3CL5xsW1NHLSrBd3M7fC7aBi0DheBGSPr0BVBTRDisw/viewform?embedded=true",width:"640",height:"100%",frameborder:"0",marginheight:"0",marginwidth:"0"},"Wird geladen…")],-1),Xle=[Zle,Yle];function Qle(n,e){return j(),K("div",Gle,Xle)}const Jle=se(Kle,[["render",Qle]]),ece="/javascript/assets/andornot-86e3a19b.svg",tce={},ice={class:"slide"},nce=he('<div class="heading">Opérateurs logiques</div><div class="content"><p> Il existe trois opérateurs d&#39;expression booléenne en javascript (Opérateurs logiques) </p><table class="tg" style="width:100%;height:50%;"><thead><tr><th class="tg-0lax"><span style="font-weight:bold;">Operator</span></th><th class="tg-0lax"><span style="font-weight:bold;">Description</span></th><th class="tg-0lax"><span style="font-weight:bold;">Exemple</span></th></tr></thead><tbody><tr><td class="tg-0lax">&amp;&amp;</td><td class="tg-0lax"> Retourne Vrai si les deux déclarations sont vraies </td><td class="tg-0lax">x &lt; 5 &amp;&amp; x &lt; 10</td></tr><tr><td class="tg-0lax">||</td><td class="tg-0lax"> Renvoie Vrai si l&#39;une des déclarations est vraie. </td><td class="tg-0lax">x &lt; 5 || x &lt; 4</td></tr><tr><td class="tg-0lax">!</td><td class="tg-0lax"> Inverse le résultat, renvoie Faux si le résultat est vrai. </td><td class="tg-0lax">!(x &lt; 5 &amp;&amp; x &lt; 10)</td></tr></tbody></table><img src="'+ece+'" style="width:58%;margin-top:1%;"></div>',2),sce=[nce];function oce(n,e){return j(),K("div",ice,sce)}const rce=se(tce,[["render",oce]]),ace={},lce={class:"slide"},cce=he(`<div class="heading">Opérateurs logiques - &amp;&amp;</div><div class="content"><p> Elle donne <b>True</b> si les <b>deux conditions</b> sont <b>True</b>. Et elle donne <b>False</b> si <b>l&#39;une ou l&#39;autre</b> des conditions a ou b est <b>False</b>. </p><table class="tg" style="width:100%;height:50%;"><thead><tr><th class="tg-0lax"><span style="font-weight:bold;">a</span></th><th class="tg-0lax"><span style="font-weight:bold;">b</span></th><th class="tg-0lax"><span style="font-weight:bold;">a &amp;&amp; b</span></th></tr></thead><tbody><tr><td class="tg-0lax" style="color:#008000;">True</td><td class="tg-0lax" style="color:#008000;">True</td><td class="tg-0lax" style="color:#008000;">True</td></tr><tr><td class="tg-0lax" style="color:#008000;">True</td><td class="tg-0lax" style="color:#800400;">False</td><td class="tg-0lax" style="color:#800400;">False</td></tr><tr><td class="tg-0lax" style="color:#800400;">False</td><td class="tg-0lax" style="color:#800400;">False</td><td class="tg-0lax" style="color:#800400;">False</td></tr><tr><td class="tg-0lax" style="color:#800400;">False</td><td class="tg-0lax" style="color:#008000;">True</td><td class="tg-0lax" style="color:#800400;">False</td></tr></tbody></table><br><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  console.log(<span style="color:#000080;font-weight:bold;">true</span> &amp;&amp; <span style="color:#000080;font-weight:bold;">true</span>) <span style="color:#008800;font-style:italic;">//True</span>
                  console.log(<span style="color:#000080;font-weight:bold;">true</span> &amp;&amp; <span style="color:#000080;font-weight:bold;">false</span>) <span style="color:#008800;font-style:italic;">//False</span>
                  console.log(<span style="color:#000080;font-weight:bold;">false</span> &amp;&amp; <span style="color:#000080;font-weight:bold;">false</span>) <span style="color:#008800;font-style:italic;">//False</span>
                  console.log(<span style="color:#000080;font-weight:bold;">false</span> &amp;&amp; <span style="color:#000080;font-weight:bold;">true</span>) <span style="color:#008800;font-style:italic;">//False</span></pre></div></div>`,2),dce=[cce];function uce(n,e){return j(),K("div",lce,dce)}const hce=se(ace,[["render",uce]]),fce="/javascript/assets/andGate-e52be862.svg",gce={},pce={class:"slide"},mce=D("div",{class:"heading"},"Logic Gates - AND",-1),_ce=D("div",{class:"content"},[D("iframe",{src:"https://logic.ly/embed/?document_path=/lessons/documents/and-gate.logicly",width:"70%",height:"100%",frameborder:"0",marginheight:"0",marginwidth:"0"},"Wird geladen…"),D("div",{style:{display:"inline-block","padding-left":"2%",width:"29%"}},[D("table",{class:"tg"},[D("thead",null,[D("tr",null,[D("th",{class:"tg-0lax"},[D("span",{style:{"font-weight":"bold"}},"A")]),D("th",{class:"tg-0lax"},[D("span",{style:{"font-weight":"bold"}},"B")]),D("th",{class:"tg-0lax"},[D("span",{style:{"font-weight":"bold"}},"RESULT")])])]),D("tbody",null,[D("tr",null,[D("td",{class:"tg-0lax"},"0"),D("td",{class:"tg-0lax"},"0"),D("td",{class:"tg-0lax"},"0")]),D("tr",null,[D("td",{class:"tg-0lax"},"0"),D("td",{class:"tg-0lax"},"1"),D("td",{class:"tg-0lax"},"0")]),D("tr",null,[D("td",{class:"tg-0lax"},"1"),D("td",{class:"tg-0lax"},"0"),D("td",{class:"tg-0lax"},"0")]),D("tr",null,[D("td",{class:"tg-0lax"},"1"),D("td",{class:"tg-0lax"},"1"),D("td",{class:"tg-0lax"},"1")])])]),D("img",{src:fce,style:{"padding-top":"10%",width:"45%"}})])],-1),bce=[mce,_ce];function vce(n,e){return j(),K("div",pce,bce)}const wce=se(gce,[["render",vce]]),Cce={},yce={class:"slide"},Sce=he(`<div class="heading">Opérateurs logiques - ||</div><div class="content"><p> Comme l&#39;opérateur <b>&amp;&amp;</b>, l&#39;opérateur <b>||</b> vérifie plusieurs conditions. Mais il renvoie <b>True</b> lorsque <b>l&#39;une ou l&#39;autre ou les deux conditions</b> individuelles sont vraies (True) : </p><table class="tg" style="width:100%;height:50%;"><thead><tr><th class="tg-0lax"><span style="font-weight:bold;">a</span></th><th class="tg-0lax"><span style="font-weight:bold;">b</span></th><th class="tg-0lax"><span style="font-weight:bold;">a || b</span></th></tr></thead><tbody><tr><td class="tg-0lax" style="color:#008000;">True</td><td class="tg-0lax" style="color:#008000;">True</td><td class="tg-0lax" style="color:#008000;">True</td></tr><tr><td class="tg-0lax" style="color:#008000;">True</td><td class="tg-0lax" style="color:#800400;">False</td><td class="tg-0lax" style="color:#008000;">True</td></tr><tr><td class="tg-0lax" style="color:#800400;">False</td><td class="tg-0lax" style="color:#800400;">False</td><td class="tg-0lax" style="color:#800400;">False</td></tr><tr><td class="tg-0lax" style="color:#800400;">False</td><td class="tg-0lax" style="color:#008000;">True</td><td class="tg-0lax" style="color:#008000;">True</td></tr></tbody></table><br><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  console.log(<span style="color:#000080;font-weight:bold;">true</span> || <span style="color:#000080;font-weight:bold;">true</span>) <span style="color:#008800;font-style:italic;">//True</span>
                  console.log(<span style="color:#000080;font-weight:bold;">true</span> || <span style="color:#000080;font-weight:bold;">false</span>) <span style="color:#008800;font-style:italic;">//True</span>
                  console.log(<span style="color:#000080;font-weight:bold;">false</span> || <span style="color:#000080;font-weight:bold;">false</span>) <span style="color:#008800;font-style:italic;">//False</span>
                  console.log(<span style="color:#000080;font-weight:bold;">false</span> || <span style="color:#000080;font-weight:bold;">true</span>) <span style="color:#008800;font-style:italic;">//True</span></pre></div></div>`,2),Lce=[Sce];function xce(n,e){return j(),K("div",yce,Lce)}const Dce=se(Cce,[["render",xce]]),kce="/javascript/assets/orGate-3d360db0.svg",Ece={},Ice={class:"slide"},Nce=D("div",{class:"heading"},"Logic Gates - OR",-1),Tce=D("div",{class:"content"},[D("iframe",{src:"https://logic.ly/embed/?document_path=/lessons/documents/or-gate.logicly",width:"70%",height:"100%",frameborder:"0",marginheight:"0",marginwidth:"0"},"Wird geladen…"),D("div",{style:{display:"inline-block","padding-left":"2%",width:"29%"}},[D("table",{class:"tg"},[D("thead",null,[D("tr",null,[D("th",{class:"tg-0lax"},[D("span",{style:{"font-weight":"bold"}},"A")]),D("th",{class:"tg-0lax"},[D("span",{style:{"font-weight":"bold"}},"B")]),D("th",{class:"tg-0lax"},[D("span",{style:{"font-weight":"bold"}},"RESULT")])])]),D("tbody",null,[D("tr",null,[D("td",{class:"tg-0lax"},"0"),D("td",{class:"tg-0lax"},"0"),D("td",{class:"tg-0lax"},"0")]),D("tr",null,[D("td",{class:"tg-0lax"},"0"),D("td",{class:"tg-0lax"},"1"),D("td",{class:"tg-0lax"},"1")]),D("tr",null,[D("td",{class:"tg-0lax"},"1"),D("td",{class:"tg-0lax"},"0"),D("td",{class:"tg-0lax"},"1")]),D("tr",null,[D("td",{class:"tg-0lax"},"1"),D("td",{class:"tg-0lax"},"1"),D("td",{class:"tg-0lax"},"1")])])]),D("img",{src:kce,style:{"padding-top":"10%",width:"45%"}})])],-1),Ace=[Nce,Tce];function Mce(n,e){return j(),K("div",Ice,Ace)}const Rce=se(Ece,[["render",Mce]]),Pce="/javascript/assets/uno-reverse-f46ab9e1.svg",Oce={},Fce={class:"slide"},Bce=he(`<div class="heading">Opérateurs logiques - !</div><div class="content"><p> L&#39;opérateur <b>not</b> s&#39;applique à une seule condition. Et il inverse le résultat de cette condition, <b>True</b> devient <b>False</b> et <b>False</b> devient <b>True</b>. </p><table class="tg" style="width:30%;height:50%;"><thead><tr><th class="tg-0lax"><span style="font-weight:bold;">a</span></th><th class="tg-0lax"><span style="font-weight:bold;">! a</span></th></tr></thead><tbody><tr><td class="tg-0lax" style="color:#008000;">True</td><td class="tg-0lax" style="color:#800400;">False</td></tr><tr><td class="tg-0lax" style="color:#800400;">False</td><td class="tg-0lax" style="color:#008000;">True</td></tr></tbody></table><br><div style="background:#ffffff;overflow:auto;width:30%;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  console.log(!<span style="color:#000080;font-weight:bold;">true</span>) <span style="color:#008800;font-style:italic;">//False</span>
                  console.log(!<span style="color:#000080;font-weight:bold;">false</span>) <span style="color:#008800;font-style:italic;">//True</span></pre></div><img src="`+Pce+'" class="html-css-logo" style="left:40%;top:30%;height:66%;width:unset;"></div>',2),Vce=[Bce];function Wce(n,e){return j(),K("div",Fce,Vce)}const Hce=se(Oce,[["render",Wce]]),$ce="/javascript/assets/notGate-35477b07.svg",zce={},Uce={class:"slide"},qce=D("div",{class:"heading"},"Logic Gates - NOT",-1),jce=D("div",{class:"content"},[D("iframe",{src:"https://logic.ly/embed/?document_path=/lessons/documents/not-gate.logicly",width:"70%",height:"100%",frameborder:"0",marginheight:"0",marginwidth:"0"},"Wird geladen…"),D("div",{style:{display:"inline-block","padding-left":"2%",width:"29%"}},[D("table",{class:"tg"},[D("thead",null,[D("tr",null,[D("th",{class:"tg-0lax"},[D("span",{style:{"font-weight":"bold"}},"A")]),D("th",{class:"tg-0lax"},[D("span",{style:{"font-weight":"bold"}},"RESULT")])])]),D("tbody",null,[D("tr",null,[D("td",{class:"tg-0lax"},"0"),D("td",{class:"tg-0lax"},"1")]),D("tr",null,[D("td",{class:"tg-0lax"},"1"),D("td",{class:"tg-0lax"},"0")])])]),D("img",{src:$ce,style:{"padding-top":"10%",width:"45%"}})])],-1),Kce=[qce,jce];function Gce(n,e){return j(),K("div",Uce,Kce)}const Zce=se(zce,[["render",Gce]]),Yce="/javascript/assets/dominance-3e588084.svg",Xce={},Qce={class:"slide"},Jce=he('<div class="heading">Prédominance des opérateurs logiques</div><div class="content"><p> Lorsque vous mélangez les opérateurs logiques dans une expression, Javascript les évalue dans l&#39;ordre qui est appelé la précédence des opérateurs. </p><p> L&#39;exemple suivant montre la préséance des opérateurs <b>!</b>, <b>&amp;&amp;</b>, et <b>||</b> : </p><table class="tg" style="width:30%;height:50%;"><thead><tr><th class="tg-0lax"><span style="font-weight:bold;">Operator</span></th><th class="tg-0lax"><span style="font-weight:bold;">Prédominance</span></th></tr></thead><tbody><tr><td class="tg-0lax">!</td><td class="tg-0lax">Haut</td></tr><tr><td class="tg-0lax">&amp;&amp;</td><td class="tg-0lax">Moyen</td></tr><tr><td class="tg-0lax">||</td><td class="tg-0lax">Faible</td></tr></tbody></table><img src="'+Yce+'" class="html-css-logo" style="left:36%;top:45%;height:unset;width:50%;"></div>',2),ede=[Jce];function tde(n,e){return j(),K("div",Qce,ede)}const ide=se(Xce,[["render",tde]]),nde={},sde={class:"slide"},ode=he(`<div class="heading">Prédominance des opérateurs logiques</div><div class="content"><table class="tg" style="height:50%;"><tbody><tr><td class="tg-0lax">a || b &amp;&amp; c</td><td class="tg-0lax">signifie</td><td class="tg-0lax">a || (b &amp;&amp; c)</td></tr><tr><td class="tg-0lax">a &amp;&amp; b || c &amp;&amp; d</td><td class="tg-0lax">signifie</td><td class="tg-0lax">(a &amp;&amp; b) || (c &amp;&amp; d)</td></tr><tr><td class="tg-0lax">a &amp;&amp; b &amp;&amp; c || d</td><td class="tg-0lax">signifie</td><td class="tg-0lax">((a &amp;&amp; b) &amp;&amp; c) || d</td></tr><tr><td class="tg-0lax">! a &amp;&amp; b || c</td><td class="tg-0lax">signifie</td><td class="tg-0lax">((! a) &amp;&amp; b) || c</td></tr></tbody></table><br><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#000080;font-weight:bold;">let</span> a = <span style="color:#000080;font-weight:bold;">true</span>;
                  <span style="color:#000080;font-weight:bold;">let</span> b = <span style="color:#000080;font-weight:bold;">false</span>;
                  <span style="color:#000080;font-weight:bold;">let</span> c = <span style="color:#000080;font-weight:bold;">true</span>;

                  console.log(a || b &amp;&amp; c) <span style="color:#008800;font-style:italic;">//True</span>
                  console.log(a || (b &amp;&amp; c)) <span style="color:#008800;font-style:italic;">//True (même instruction que ci-dessus)</span>
                  console.log(! a &amp;&amp; b || c) <span style="color:#008800;font-style:italic;">//True</span>
                  console.log(((! a) &amp;&amp; b) || c) <span style="color:#008800;font-style:italic;">//True (même instruction que ci-dessus)</span></pre></div></div>`,2),rde=[ode];function ade(n,e){return j(),K("div",sde,rde)}const lde=se(nde,[["render",ade]]),cde={},dde={class:"slide"},ude=D("div",{class:"heading"},"Opérateurs logiques - Quiz",-1),hde=D("div",{class:"content"},[D("iframe",{src:"https://docs.google.com/forms/d/e/1FAIpQLSfNF6SkqXJOZYB8bO8pOl9V3bAJG4Is5IY7pEk0DuBkCrCFjA/viewform?embedded=true",width:"640",height:"100%",frameborder:"0",marginheight:"0",marginwidth:"0"},"Wird geladen…")],-1),fde=[ude,hde];function gde(n,e){return j(),K("div",dde,fde)}const pde=se(cde,[["render",gde]]),mde="/javascript/assets/ifelse-5471b674.svg",_de={},bde={class:"slide"},vde=he('<div class="heading">if Tests</div><div class="content"><div class="flex-container"><div style="width:40%;"><p> Ce chapitre présente l&#39;instruction <b>if</b> de Javascript, qui est la principale instruction utilisée pour sélectionner des actions alternatives en fonction des résultats des tests. </p></div><div style="width:60%;"><img src="'+mde+'" style="width:100%;"></div></div></div>',2),wde=[vde];function Cde(n,e){return j(),K("div",bde,wde)}const yde=se(_de,[["render",Cde]]),Sde={},Lde={class:"slide"},xde=he(`<div class="heading">if Tests - Format général</div><div class="content"><p> Lorsque l&#39;instruction if s&#39;exécute, Javascript exécute le bloc de code associé au premier test dont l&#39;évaluation est vraie, ou le bloc else si tous les tests sont faux. La forme générale d&#39;une instruction if ressemble à ceci </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                    <span style="color:#008800;font-weight:bold;">if</span> (test1){ <span style="color:#10863d;"># if test</span>
                        statements1 <span style="color:#10863d;"># bloc associé</span>
                    }
                    <span style="color:#008800;font-weight:bold;">else if</span> (test2){ <span style="color:#10863d;"># Optionnel else if</span>
                        statements2
                    }
                    <span style="color:#008800;font-weight:bold;">else</span>{ <span style="color:#10863d;"># Optionnel else</span>
                        statements3
                    }</pre></div></div>`,2),Dde=[xde];function kde(n,e){return j(),K("div",Lde,Dde)}const Ede=se(Sde,[["render",kde]]),Ide={class:"slide"},Nde=D("div",{class:"heading"},"if Tests - Format général",-1),Tde={class:"content"},Ade={__name:"SlidePresentation84",setup(n){return(e,t)=>(j(),K("div",Ide,[Nde,D("div",Tde,[W(Ze,{code:`let direction = "Toulouse";
if (direction === "Toulouse"){
  console.log("aller à gauche");
}
else if (direction === "Chapiteau"){
  console.log("aller à droite");
}
else{
  console.log("ne bouge pas");
}
`,editorIndex:"8"})])]))}},Mde={class:"slide"},Rde=D("div",{class:"heading"},"if Tests - Exercice",-1),Pde={class:"content"},Ode=D("p",null,` Faites un message d'accueil "bonne journée" si l'heure est inférieure à 18:00 `,-1),Fde={__name:"SlidePresentation85",setup(n){return(e,t)=>(j(),K("div",Mde,[Rde,D("div",Pde,[Ode,W(Ze,{code:`let hour = 16;
let greeting;
if () {
  greeting = "bonne journée";
} 

console.log(greeting);`,editorIndex:"9"})])]))}},Bde={class:"slide"},Vde=D("div",{class:"heading"},"if Tests - Exercice",-1),Wde={class:"content"},Hde=D("p",null,` Maintenant, nous prolongeons l'exercice précédent et souhaitons "Bonne soirée" après 18:00. `,-1),$de={__name:"SlidePresentation86",setup(n){return(e,t)=>(j(),K("div",Bde,[Vde,D("div",Wde,[Hde,W(Ze,{code:`let hour = 18;
let greeting;
if (hour < 18) {
  greeting = "bonne journée";
}

console.log(greeting);`,editorIndex:"10"})])]))}},zde={class:"slide"},Ude=D("div",{class:"heading"},"if Tests - Exercice",-1),qde={class:"content"},jde=D("p",null,' Ok maintenant, la dernière étape est de souhaiter une "bonne matinée" avant 9:00. ',-1),Kde={__name:"SlidePresentation87",setup(n){return(e,t)=>(j(),K("div",zde,[Ude,D("div",qde,[jde,W(Ze,{code:`let hour = 18;
let greeting;
if (hour < 18) {
  greeting = "bonne journée";
}

console.log(greeting);`,editorIndex:"11"})])]))}},Gde={},Zde={class:"slide"},Yde=he(`<div class="heading">if Tests - Nested</div><div class="content"><p>Nous pouvons imbriquer les if tests bien sûr</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#000080;font-weight:bold;">if</span> (condition) {
                    <span style="color:#008800;font-style:italic;">// bloc de code à exécuter si la condition est vraie</span>
                    <span style="color:#000080;font-weight:bold;">if</span> (condition) {
                      <span style="color:#008800;font-style:italic;">// Bloc de code à exécuter si la condition est vraie.</span>
                    } 
                  } </pre></div></div>`,2),Xde=[Yde];function Qde(n,e){return j(),K("div",Zde,Xde)}const Jde=se(Gde,[["render",Qde]]),eue={class:"slide"},tue=D("div",{class:"heading"},"if Tests - Exercice",-1),iue={class:"content"},nue=D("p",null," Comme je viens d'Allemagne, nous disons autre chose selon l'heure de la journée. Développons notre exercice en vérifiant si nous sommes en Allemagne ou non. ",-1),sue={__name:"SlidePresentation89",setup(n){return(e,t)=>(j(),K("div",eue,[tue,D("div",iue,[nue,W(Ze,{code:`let hour = 22;
let pays = "Allemagne" //ou France
let greeting;
if (hour < 9) {
  if(pays === "Allemagne"){
    greeting = "Guten Morgen";
  }
  else{
    greeting = "bonne matinée";
  }
}
else if(hour < 18){
  if(pays === "Allemagne"){
    greeting = "Guten Tag";
  }
  else{
    greeting = "bonne journée";
  }
}
else{
  if(pays === "Allemagne"){
    greeting = "Guten Abend";
  }
  else{
    greeting = "bonne soirée";
  }
}

console.log(greeting);`,editorIndex:"12"})])]))}},oue={},rue={class:"slide"},aue=he(`<div class="heading">if/else Ternary Expression</div><div class="content"><p> Parfois, les éléments d&#39;une déclaration sont si simples qu&#39;il semble exagéré de les répartir sur plusieurs lignes. </p><p> Javascript nous offre un format d&#39;expression qui nous permet de faire des if/else dans une seule expression. </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">condition ? exprIfTrue : exprIfFalse</pre></div><p>Navigation exemple</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#000080;font-weight:bold;">let</span> direction = <span style="color:#0000FF;">&quot;Toulouse&quot;</span>;
                  <span style="color:#000080;font-weight:bold;">let</span> result = direction === <span style="color:#0000FF;">&quot;Toulouse&quot;</span> ? <span style="color:#0000FF;">&quot;aller à gauche&quot;</span> : <span style="color:#0000FF;">&quot;aller à droite&quot;</span>
                  console.log(result);</pre></div></div>`,2),lue=[aue];function cue(n,e){return j(),K("div",rue,lue)}const due=se(oue,[["render",cue]]),uue={class:"slide"},hue=D("div",{class:"heading"},"if/else Ternary Expression - Exercice",-1),fue={class:"content"},gue=D("p",null,[D("b",null,"Exercice : Pouvez-vous diminuer le nombre de ligne avec des tests ternary ?")],-1),pue={__name:"SlidePresentation91",setup(n){return(e,t)=>(j(),K("div",uue,[hue,D("div",fue,[gue,W(Ze,{code:`let hour = 22;
let pays = "Allemagne"; //ou France

let greeting;
if (hour < 9) {
  if(pays === "Allemagne"){
    greeting = "Guten Morgen";
  }
  else{
    greeting = "bonne matinée";
  }
}
else if(hour < 18){
  if(pays === "Allemagne"){
    greeting = "Guten Tag";
  }
  else{
    greeting = "bonne journée";
  }
}
else{
  if(pays === "Allemagne"){
    greeting = "Guten Abend";
  }
  else{
    greeting = "bonne soirée";
  }
}

console.log(greeting);`,editorIndex:"13"})])]))}},mue={class:"slide"},_ue=D("div",{class:"heading"},"if/else chained condition - Exercice",-1),bue={class:"content"},vue=D("p",null,[Ht(" Le coût d'entrée dans un parc pour enfants est de 10€ pour toute personne âgée de 4 à 12 ans. Les personnes plus âgées ne paient que 6€. Écrivez un "),D("b",null,"test if"),Ht(" utilisant "),D("b",null,"&&"),Ht(" qui vérifie la tranche d'âge et ajuste le prix en conséquence. ")],-1),wue={__name:"SlidePresentation92",setup(n){return(e,t)=>(j(),K("div",mue,[_ue,D("div",bue,[vue,W(Ze,{code:`let age = 8;
let price = 6;//€
//Placez la logique if ici en utilisant && pour enchaîner les tests.
console.log("Le prix d'entrée est de " + price);`,editorIndex:"14"})])]))}},Cue={},yue={class:"slide"},Sue=he(`<div class="heading">Switch</div><div class="content"><p> Utilisez l&#39;instruction switch pour sélectionner l&#39;un des nombreux blocs de code à exécuter </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#000080;font-weight:bold;">switch</span>(expression) {
                    <span style="color:#000080;font-weight:bold;">case</span> x:
                    <span style="color:#008800;font-style:italic;">// code block</span>
                    <span style="color:#000080;font-weight:bold;">break</span>;
                  <span style="color:#000080;font-weight:bold;">case</span> y:
                    <span style="color:#008800;font-style:italic;">// code block</span>
                    <span style="color:#000080;font-weight:bold;">break</span>;
                  <span style="color:#000080;font-weight:bold;">default</span>:
                    <span style="color:#008800;font-style:italic;">// code block</span>
                  }</pre></div></div>`,2),Lue=[Sue];function xue(n,e){return j(),K("div",yue,Lue)}const Due=se(Cue,[["render",xue]]),kue={class:"slide"},Eue=D("div",{class:"heading"},"Classic if/else",-1),Iue={class:"content"},Nue=D("p",null," Cet exemple utilise le numéro du jour de la semaine pour calculer le nom du jour de la semaine. ",-1),Tue={__name:"SlidePresentation94",setup(n){return(e,t)=>(j(),K("div",kue,[Eue,D("div",Iue,[Nue,W(Ze,{code:`let result;
let day = new Date().getDay();

if(day === 0){
  result = "Dimanche";
}
else if(day === 1){
  result = "Lundi";
}
else if(day === 2){
  result = "Mardi";
}
else if(day === 3){
  result = "Mercredi";
}
else if(day === 4){
  result = "Jeudi";
}
else if(day == 5){
  result = "Vendredi";
}
else if(day == 6){
  result = "Samedi";
}

console.log(result);`,editorIndex:"15"})])]))}},Aue={class:"slide"},Mue=D("div",{class:"heading"},"Switch",-1),Rue={class:"content"},Pue=D("p",null,"Cet exemple utilise le switch",-1),Oue={__name:"SlidePresentation95",setup(n){return(e,t)=>(j(),K("div",Aue,[Mue,D("div",Rue,[Pue,W(Ze,{code:`let day;
switch (new Date().getDay()) {
  case 0:
    day = "Dimanche";
    break;
  case 1:
    day = "Lundi";
    break;
  case 2:
     day = "Mardi";
    break;
  case 3:
    day = "Mercredi";
    break;
  case 4:
    day = "Jeudi";
    break;
  case 5:
    day = "Vendredi";
    break;
  case 6:
    day = "Samedi";
}

console.log(day);`,editorIndex:"16"})])]))}},Fue={},Bue={class:"slide"},Vue=D("div",{class:"heading"},"while et for Loops",-1),Wue=D("div",{class:"content"},[D("p",null," Je vais présenter les les deux principales constructions de boucles du langage - des énoncés qui répètent une action encore et encore "),D("iframe",{id:"loop",src:"loop.svg",width:"45.5%",height:"90%",frameborder:"0"})],-1),Hue=[Vue,Wue];function $ue(n,e){return j(),K("div",Bue,Hue)}const zue=se(Fue,[["render",$ue]]),Uue="/javascript/assets/kurtcobain-f262dd7e.svg",que={},jue={class:"slide"},Kue=he(`<div class="heading">while Loops</div><div class="content"><p> En termes simples, while exécute de manière répétée un bloc d&#39;instructions (normalement indentées) tant qu&#39;un test situé en haut de l&#39;instruction continue d&#39;être évalué à une valeur vraie. </p><div class="flex-container"><div style="width:20%;"><p><b>Format général</b></p></div><div style="width:80%;"><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                      <span style="color:#000080;font-weight:bold;">while</span> (test){<span style="color:#008800;font-style:italic;">//Test en boucle</span>
                        statements <span style="color:#008800;font-style:italic;">// Corps de la boucle </span>
                      }</pre></div></div></div><br><div class="flex-container"><div style="width:20%;"><p><b>Exemple</b></p></div><div style="width:80%;"><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                      <span style="color:#000080;font-weight:bold;">while</span>(<span style="color:#000080;font-weight:bold;">true</span>){
                        console.log(<span style="color:#0000FF;">&#39;Here we are now&#39;</span>)
                      }</pre></div></div></div><img src="`+Uue+'" class="html-css-logo" style="width:40%;left:50%;top:52%;height:unset;"></div>',2),Gue=[Kue];function Zue(n,e){return j(),K("div",jue,Gue)}const Yue=se(que,[["render",Zue]]),Xue={class:"slide"},Que=D("div",{class:"heading"},"while Loops",-1),Jue={class:"content"},ehe=D("p",null," Le code suivant compte à partir de la valeur de a jusqu'à, mais sans inclure, b. Nous verrons plus tard une façon plus simple de le faire avec une boucle for ",-1),the={__name:"SlidePresentation98",setup(n){return(e,t)=>(j(),K("div",Xue,[Que,D("div",Jue,[ehe,W(Ze,{code:`let a=0;
let b=10;

while (a < b){ // Une façon de coder les boucles de compteur
  console.log(a)
  a += 1 // Ou, a = a + 1
}`,editorIndex:"17"})])]))}},ihe={class:"slide"},nhe=D("div",{class:"heading"},"while Loops - exercise",-1),she={class:"content"},ohe=D("p",null," Comptez de 1 à 100 en utilisant une boucle while et affichez chaque étape sur la console avec console.log(). ",-1),rhe={__name:"SlidePresentation99",setup(n){return(e,t)=>(j(),K("div",ihe,[nhe,D("div",she,[ohe,W(Ze,{code:`let monlist = [10,20,30,40,50,60]
i = 0
// utiliser monlist.length pour obtenir la longueur de la liste`,editorIndex:"18"})])]))}},ahe={},lhe={class:"slide"},che=he(`<div class="heading">for Loops</div><div class="content"><p> La boucle for est un itérateur générique en Javascript : elle peut parcourir les éléments d&#39;une séquence ordonnée ou d&#39;un autre objet itérable. </p><br><p><b>Format général</b></p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#000080;font-weight:bold;">for</span> (key <span style="color:#000080;font-weight:bold;">in</span> object) {
                    <span style="color:#008800;font-style:italic;">// code block to be executed</span>
                  }</pre></div></div>`,2),dhe=[che];function uhe(n,e){return j(),K("div",lhe,dhe)}const hhe=se(ahe,[["render",uhe]]),fhe={class:"slide"},ghe=D("div",{class:"heading"},"for in Loops - exemple",-1),phe={class:"content"},mhe=D("p",null,"imprimer tous les éléments d'une liste en utilisant une boucle for",-1),_he={__name:"SlidePresentation101",setup(n){return(e,t)=>(j(),K("div",fhe,[ghe,D("div",phe,[mhe,W(Ze,{code:`let array = ["spam", "eggs", "ham"];
for (x in array){
  console.log(array[x]);  
}
`,editorIndex:"19"})])]))}},bhe={class:"slide"},vhe=D("div",{class:"heading"},"Array.forEach() Loops",-1),whe={class:"content"},Che=D("p",null," La méthode forEach() appelle une fonction une fois pour chaque élément du tableau. ",-1),yhe={__name:"SlidePresentation102",setup(n){return(e,t)=>(j(),K("div",bhe,[vhe,D("div",whe,[Che,W(Ze,{code:`const numbers = [45, 4, 9, 16, 25];

numbers.forEach(myFunction);

function myFunction(value, index, array) {
  console.log("value:" + value + ", index:" + index);
}
`,editorIndex:"20"})])]))}},She={class:"slide"},Lhe=D("div",{class:"heading"},"For Of Loop",-1),xhe={class:"content"},Dhe=D("div",{style:{background:"#ffffff",overflow:"auto",width:"auto",border:"solid gray","border-width":"0.1em 0.1em 0.1em 0.8em",padding:"0.2em 0.6em"}},[D("pre",{style:{margin:"0","line-height":"125%"}},[Ht("                  "),D("span",{style:{color:"#000080","font-weight":"bold"}},"for"),Ht(` (variable of iterable) {
                    `),D("span",{style:{color:"#008800","font-style":"italic"}},"// code block to be executed"),Ht(`
                  }`)])],-1),khe={__name:"SlidePresentation103",setup(n){return(e,t)=>(j(),K("div",She,[Lhe,D("div",xhe,[Dhe,W(Ze,{code:`const cars = ["BMW", "Volvo", "Mini"];

for (let x of cars) {
  console.log(x);
}
`,editorIndex:"21"})])]))}},Ehe={},Ihe={class:"slide"},Nhe=he(`<div class="heading">For Loop</div><div class="content"><p>L&#39;instruction for crée une boucle avec 3 expressions facultatives</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#000080;font-weight:bold;">for</span> (expression <span style="color:#0000FF;">1</span>; expression <span style="color:#0000FF;">2</span>; expression <span style="color:#0000FF;">3</span>) {
                    <span style="color:#008800;font-style:italic;">// code block to be executed</span>
                  }</pre></div><p><b>L&#39;expression 1</b> est exécutée (une fois) avant l&#39;exécution du bloc de code. </p><p><b>L&#39;expression 2</b> définit la condition d&#39;exécution du bloc de code. </p><p><b>L&#39;expression 3</b> est exécutée (à chaque fois) après l&#39;exécution du bloc de code. </p><div class="flex-container"><div><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                      <span style="color:#000080;font-weight:bold;">for</span> (<span style="color:#000080;font-weight:bold;">let</span> i = <span style="color:#0000FF;">0</span>; i &lt; <span style="color:#0000FF;">5</span>; i++) {
                        text += <span style="color:#0000FF;">&quot;Le numéro est &quot;</span> + i + <span style="color:#0000FF;">&quot;&lt;br&gt;&quot;</span>;
                      }</pre></div></div><div><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                      <span style="color:#000080;font-weight:bold;">for</span>(;;){ <span style="color:#008800;font-style:italic;">//tourne à l&#39;infini</span>
                        console.log(<span style="color:#0000FF;">&quot;in for loop&quot;</span>);
                      }</pre></div></div></div></div>`,2),The=[Nhe];function Ahe(n,e){return j(),K("div",Ihe,The)}const Mhe=se(Ehe,[["render",Ahe]]),Rhe={class:"slide"},Phe=D("div",{class:"heading"},"Loop",-1),Ohe={class:"content"},Fhe=D("p",null,` La plupart du temps, nous devons faire une boucle du début à la fin. Si nous n'avons pas besoin de quelque chose de sophistiqué, il suffit d'utiliser la boucle "for of". `,-1),Bhe={__name:"SlidePresentation105",setup(n){return(e,t)=>(j(),K("div",Rhe,[Phe,D("div",Ohe,[Fhe,W(Ze,{code:`let array = ["Paris", "Toulouse", "Lyon", "Moissac", "Montauban", "Albi", "Figeac", "Caussade", "München", "Stuttgart", "Nürnberg"];

for(let ville of array){
  console.log(ville); //eazy
}
`,editorIndex:"22"})])]))}},Vhe={},Whe={class:"slide"},Hhe=he(`<div class="heading">Loop - break, continue</div><div class="content"><p>L&#39;instruction break &quot;saute&quot; d&#39;une boucle.</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#000080;font-weight:bold;">for</span> (<span style="color:#000080;font-weight:bold;">let</span> i = <span style="color:#0000FF;">0</span>; i &lt; <span style="color:#0000FF;">10</span>; i++) {
                    <span style="color:#000080;font-weight:bold;">if</span> (i === <span style="color:#0000FF;">3</span>) {
                      <span style="color:#000080;font-weight:bold;">break</span>; 
                    }
                    console.log(i);
                  }</pre></div><br><p>L&#39;instruction continue &quot;saute&quot; une itération de la boucle.</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#000080;font-weight:bold;">for</span> (<span style="color:#000080;font-weight:bold;">let</span> i = <span style="color:#0000FF;">0</span>; i &lt; <span style="color:#0000FF;">10</span>; i++) {
                    <span style="color:#000080;font-weight:bold;">if</span> (i === <span style="color:#0000FF;">3</span>) { <span style="color:#000080;font-weight:bold;">continue</span>; }
                    console.log(i);
                  }</pre></div></div>`,2),$he=[Hhe];function zhe(n,e){return j(),K("div",Whe,$he)}const Uhe=se(Vhe,[["render",zhe]]),qhe={class:"slide"},jhe=D("div",{class:"heading"},"Loop - break, continue",-1),Khe={class:"content"},Ghe={__name:"SlidePresentation107",setup(n){return(e,t)=>(j(),K("div",qhe,[jhe,D("div",Khe,[W(Ze,{code:`for (let i = 0; i < 10; i++) {
  if(i === 8){
    break; //arrête la boucle
  }
  if (i % 2 === 0) {
    continue; //saute une itération
  }
  console.log(i);
}
`,editorIndex:"23"})])]))}},Zhe="/javascript/assets/ford-75b29f1c.svg",G5="/javascript/assets/Ford_Mustang-b2f55832.svg",Yhe={},Xhe={class:"slide"},Qhe=he(`<div class="heading">Objects</div><div class="content"><p> Le type de données fondamental de JavaScript est l&#39;objet. Un objet est une valeur composite : il regroupe plusieurs valeurs (valeurs primitives ou autres objets) et vous permet de stocker et de récupérer ces valeurs par nom. Un objet est une collection non ordonnée de propriétés, chacune ayant un nom et une valeur. Les noms de propriétés sont des chaînes de caractères, on peut donc dire que les objets font correspondre des chaînes de caractères à des valeurs. </p><p> Toute valeur en JavaScript qui n&#39;est <b>pas</b> un <b>string</b>, un <b>nombre</b>, <b>true</b>, <b>false</b>, <b>null</b> ou <b>undefined</b> est un objet </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#0000ff;">var</span> myCar = <span style="color:#0000ff;">new</span> Object();
                  myCar.make = <span style="color:#a31515;">&quot;Ford&quot;</span>;
                  myCar.model = <span style="color:#a31515;">&quot;Mustang&quot;</span>;
                  myCar.year = 1969;
                </pre></div><img src="`+Zhe+'" class="html-css-logo" style="left:60%;top:56%;"><img src="'+G5+'" class="html-css-logo" style="left:50%;top:75%;width:40%;"></div>',2),Jhe=[Qhe];function efe(n,e){return j(),K("div",Xhe,Jhe)}const tfe=se(Yhe,[["render",efe]]),ife={},nfe={class:"slide"},sfe=he('<div class="heading">Objects</div><div class="content"><p>Dans la vie réelle, une voiture est un <b>objet</b>.</p><p> Une voiture a des <b>propriétés</b> comme le poids et la couleur, et des <b>méthodes</b> comme le démarrage et l&#39;arrêt </p><p> Vous avez déjà appris que les variables JavaScript sont des conteneurs pour les valeurs de données. Ce code attribue une valeur simple (Mustang) à une variable nommée voiture. </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#0000ff;">var</span> voiture = <span style="color:#a31515;">&quot;Mustang&quot;</span>;</pre></div><p> Les objets sont aussi des variables. Mais les objets peuvent contenir plusieurs valeurs. Ce code attribue plusieurs valeurs (Mustang, 500, rouge) à une variable nommée voiture : </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#0000ff;">const</span> voiture= {type : <span style="color:#a31515;">&quot;Mustang&quot;</span>, modele : <span style="color:#a31515;">&quot;500&quot;</span>, couleur : <span style="color:#a31515;">&quot;rouge&quot;</span>} ; <span style="color:#008000;">//une autre façon de créer un objet.</span></pre></div><img src="'+G5+'" class="html-css-logo" style="left:50%;top:79%;"></div>',2),ofe=[sfe];function rfe(n,e){return j(),K("div",nfe,ofe)}const afe=se(ife,[["render",rfe]]),lfe={},cfe={class:"slide"},dfe=he(`<div class="heading">Object Literals</div><div class="content"><p> Le moyen le plus simple de créer un objet est d&#39;inclure un objet littéral dans votre code JavaScript. Un objet littéral est une liste de paires nom/valeur séparées par des virgules, entre accolades. </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#0000ff;">var</span> empty = {} ; <span style="color:#008000;">// Un objet sans propriétés</span>
                  <span style="color:#0000ff;">var</span> point = { x : 0, y : 0 } ; <span style="color:#008000;">// Deux propriétés</span>
                  <span style="color:#0000ff;">var</span> point2 = { x : point.x, y : point.y + 1 } ; <span style="color:#008000;">// Des valeurs plus complexes</span>
                  <span style="color:#0000ff;">var</span> book = {
                    <span style="color:#a31515;">&quot;titre principal&quot;</span> : <span style="color:#a31515;">&quot;JavaScript&quot;</span>, <span style="color:#008000;">// Les noms des propriétés incluent des espaces,</span>
                    <span style="color:#a31515;">&quot;sub-title&quot;</span> : <span style="color:#a31515;">&quot;The Definitive Guide&quot;</span>, <span style="color:#008000;">// et des traits d&#39;union, utilisez donc des chaînes de caractères.</span>
                    auteur : {<span style="color:#008000;">// La valeur de cette propriété est</span>
                      firstname : <span style="color:#a31515;">&quot;David&quot;</span>, <span style="color:#008000;">//elle-même un objet. Notez que</span>
                      surname : <span style="color:#a31515;">&quot;Flanagan&quot;</span>, <span style="color:#008000;">// ces noms de propriétés ne sont pas cités.</span>
                    },
                  };</pre></div></div>`,2),ufe=[dfe];function hfe(n,e){return j(),K("div",cfe,ufe)}const ffe=se(lfe,[["render",hfe]]),gfe={class:"slide"},pfe=D("div",{class:"heading"},"Object Literals",-1),mfe={class:"content"},_fe=D("p",null,[D("b",null,"Exercice"),Ht(" : Créez un objet de vous-même en utilisant des Object literals. Quels sont les attributs qu'il pourrait être intéressant de connaître à votre sujet ? Exemple : "),D("b",null,"prénom, nom de famille, sexe")],-1),bfe={__name:"SlidePresentation111",setup(n){return(e,t)=>(j(),K("div",gfe,[pfe,D("div",mfe,[_fe,W(Ze,{code:`let person = {
  firstName : "mettez votre prénom ici"
  //ajouter des champs supplémentaires à l'objet
}
console.log(person);
`,editorIndex:"24"})])]))}},vfe={class:"slide"},wfe=D("div",{class:"heading"},"Accès aux propriétés des objets",-1),Cfe={class:"content"},yfe=D("p",null,"Vous pouvez accéder aux propriétés des objets de deux manières",-1),Sfe={__name:"SlidePresentation112",setup(n){return(e,t)=>(j(),K("div",vfe,[wfe,D("div",Cfe,[yfe,W(Ze,{code:`const person = {
  firstName: "John",
  lastName: "Doe",
  age: 50,
  eyeColor: "blue"
};

console.log(person.firstName);
console.log(person["firstName"]);
`,editorIndex:"25"})])]))}},Lfe={class:"slide"},xfe=D("div",{class:"heading"},"Ajout de nouvelles propriétés",-1),Dfe={class:"content"},kfe=D("p",null," Vous pouvez ajouter de nouvelles propriétés à un objet existant en lui donnant simplement une valeur. ",-1),Efe={__name:"SlidePresentation113",setup(n){return(e,t)=>(j(),K("div",Lfe,[xfe,D("div",Dfe,[kfe,W(Ze,{code:`const person = {
  fname:"Kilian",
  lname:"Schropp",
  age: 28
};

person.nationality = "German"; 

console.log(person)
`,editorIndex:"26"})])]))}},Ife={class:"slide"},Nfe=D("div",{class:"heading"},"Suppression des propriétés",-1),Tfe={class:"content"},Afe=D("p",null,"Le mot clé delete supprime une propriété d'un objet",-1),Mfe={__name:"SlidePresentation114",setup(n){return(e,t)=>(j(),K("div",Ife,[Nfe,D("div",Tfe,[Afe,W(Ze,{code:`const person = {
  firstName: "Kilian",
  lastName: "Schropp",
  age: 28,
  eyeColor: "brown"
};

delete person.age;
//ou 
delete person["eyeColor"]

console.log(person)
`,editorIndex:"27"})])]))}},Rfe={class:"slide"},Pfe=D("div",{class:"heading"},"Objets imbriqués",-1),Ofe={class:"content"},Ffe=D("p",null,"Les valeurs d'un objet peuvent être un autre objet",-1),Bfe={__name:"SlidePresentation115",setup(n){return(e,t)=>(j(),K("div",Rfe,[Pfe,D("div",Ofe,[Ffe,W(Ze,{code:`person = {
  name:"Kilian",
  age:28,
  languages: {
    lan:"german",
    lan2:"english",
    lan3:"french"
  }
}

console.log(person)

//Vous pouvez accéder aux objets imbriqués en utilisant 
//la notation par points ou la notation par parenthèses

console.log(person.languages.lan);
//ou 
console.log(person.languages["lan"]);
//ou
console.log(person["languages"]["lan"]);
//ou 
let p1 = "languages";
let p2 = "lan";
console.log(person[p1][p2]);
`,editorIndex:"28"})])]))}},Vfe={},Wfe={class:"slide"},Hfe=he('<div class="heading">this - mot-clé</div><div class="content"><p class="sub-title"> En JavaScript, le mot-clé this fait référence à un objet. </p><ul><li>Dans une méthode objet, <b>this</b> fait référence à l&#39;objet.</li><li>Seul, <b>this</b> fait référence à l&#39;objet global.</li><li>Dans une fonction, <b>this</b> fait référence à l&#39;objet global.</li></ul><br><p> Il existe d&#39;autres règles pour <b>this</b>, mais pour l&#39;instant je ne veux pas entrer dans les détails. </p></div>',2),$fe=[Hfe];function zfe(n,e){return j(),K("div",Wfe,$fe)}const Ufe=se(Vfe,[["render",zfe]]),qfe={class:"slide"},jfe=D("div",{class:"heading"},"this - mot-clé",-1),Kfe={class:"content"},Gfe={__name:"SlidePresentation117",setup(n){return(e,t)=>(j(),K("div",qfe,[jfe,D("div",Kfe,[W(Ze,{code:`const person = {
  firstName: "Kilian",
  lastName : "Schropp",
  id       : 5566,
  fullName : function(firstName, lastName) {
    if(firstName == undefined || lastName == undefined){
        return this.firstName + " " + this.lastName;
    }
    return firstName + " " + lastName;
  }
};

console.log(person.fullName());
console.log(person.fullName("someone", "other"));
`,editorIndex:"29"})])]))}},Zfe={class:"slide"},Yfe=D("div",{class:"heading"},"Constructeurs d'objets",-1),Xfe={class:"content"},Qfe=D("p",null,` Parfois, nous avons besoin d'un "plan" pour créer plusieurs objets du même "type". La façon de créer un "type d'objet" est d'utiliser une fonction de construction d'objet. `,-1),Jfe={__name:"SlidePresentation118",setup(n){return(e,t)=>(j(),K("div",Zfe,[Yfe,D("div",Xfe,[Qfe,W(Ze,{code:`function Person(first, last, age, eye) {
  this.firstName = first;
  this.lastName = last;
  this.age = age;
  this.eyeColor = eye;
}

const myFather = new Person("Josef", "Schneider", 50, "blue");
const myMother = new Person("Maria", "Müller", 48, "green");

console.log(myFather)
console.log(myMother)
`,editorIndex:"30"})])]))}},ege="/javascript/assets/methods-7b178483.svg",tge={},ige={class:"slide"},nge=D("div",{class:"heading"},"Object methods",-1),sge=D("div",{class:"content"},[D("p",null," Les méthodes sont des actions qui peuvent être exécutées sur des objets. "),D("img",{src:ege,style:{width:"80%"}})],-1),oge=[nge,sge];function rge(n,e){return j(),K("div",ige,oge)}const age=se(tge,[["render",rge]]),lge={class:"slide"},cge=D("div",{class:"heading"},"Object methods",-1),dge={class:"content"},uge={__name:"SlidePresentation120",setup(n){return(e,t)=>(j(),K("div",lge,[cge,D("div",dge,[W(Ze,{code:`const person = {
  firstName: "John",
  lastName : "Doe",
  id       : 5566,
  fullName : function() {
    return this.firstName + " " + this.lastName;
  },
  age(){
    return 28; //Ça marche aussi bien
  }
};

console.log(person.firstName); //accès aux property
console.log(person.lastName); //accès aux property
console.log(person.fullName()); //appel de méthode
console.log(person.age());//appel de méthode
`,editorIndex:"31"})])]))}},hge={class:"slide"},fge=D("div",{class:"heading"},"Object methods - Getter et Setter",-1),gge={class:"content"},pge={__name:"SlidePresentation121",setup(n){return(e,t)=>(j(),K("div",hge,[fge,D("div",gge,[W(Ze,{code:`const person = {
  firstName: "John",
  lastName: "Doe",
  language: "en",
  age: 28,
  get fullName() { //mot-clé get avec nom de méthode
    return this.firstName + " " + this.lastName;
  },
  set currentAge(currentAge){
    this.age = currentAge;
  },
  get currentAge(){
    return this.age;
  }
};

console.log(person.fullName) //Remarquez que nous n'avons plus besoin de ( ).
person.currentAge = 30;
console.log(person.age); //Il est toujours possible d'accéder directement à la propriété
console.log(person.currentAge); //et par appel de méthode`,editorIndex:"32"})])]))}},mge={class:"slide"},_ge=D("div",{class:"heading"},"Ajout d'une méthode à un constructeur",-1),bge={class:"content"},vge=D("p",null,"Votre fonction constructeur peut également définir des méthodes",-1),wge={__name:"SlidePresentation122",setup(n){return(e,t)=>(j(),K("div",mge,[_ge,D("div",bge,[vge,W(Ze,{code:`function Person(first, last, age, eyecolor) {
  this.firstName = first;
  this.lastName = last;
  this.age = age;
  this.eyeColor = eyecolor;
  this.name = function() {
    return this.firstName + " " + this.lastName;
  };
}

let me = new Person("Kilian", "Schropp", 28, "brown");
console.log(me.name());`,editorIndex:"33"})])]))}},Cge={},yge={class:"slide"},Sge=he(`<div class="heading">Constructeurs JavaScript intégrés</div><div class="content"><p>Objets /constructeurs javascript intégrés</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">new</span> <span style="color:#007020;">String</span>()    <span style="color:#888888;">// A new String object</span>
                  <span style="color:#008800;font-weight:bold;">new</span> <span style="color:#007020;">Number</span>()    <span style="color:#888888;">// A new Number object</span>
                  <span style="color:#008800;font-weight:bold;">new</span> <span style="color:#007020;">Boolean</span>()   <span style="color:#888888;">// A new Boolean object</span>
                  <span style="color:#008800;font-weight:bold;">new</span> <span style="color:#007020;">Object</span>()    <span style="color:#888888;">// A new Object object</span>
                  <span style="color:#008800;font-weight:bold;">new</span> <span style="color:#007020;">Array</span>()     <span style="color:#888888;">// A new Array object</span>
                  <span style="color:#008800;font-weight:bold;">new</span> <span style="color:#007020;">RegExp</span>()    <span style="color:#888888;">// A new RegExp object</span>
                  <span style="color:#008800;font-weight:bold;">new</span> <span style="color:#007020;">Function</span>()  <span style="color:#888888;">// A new Function object</span>
                  <span style="color:#008800;font-weight:bold;">new</span> <span style="color:#007020;">Date</span>()      <span style="color:#888888;">// A new Date object </span></pre></div></div>`,2),Lge=[Sge];function xge(n,e){return j(),K("div",yge,Lge)}const Dge=se(Cge,[["render",xge]]),kge={},Ege={class:"slide"},Ige=he(`<div class="heading">Constructeurs JavaScript intégrés</div><div class="content"><p> JavaScript dispose de versions objet des types de données primitifs String, Number et Boolean. Mais il n&#39;y a (presque) aucune raison de créer des objets complexes. Les valeurs primitives sont beaucoup plus rapides : </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                Utiliser les littéraux de chaîne <span style="background-color:#fff0f0;">&quot;&quot;</span> au lieu de <span style="color:#008800;font-weight:bold;">new</span> <span style="color:#007020;">String</span>().

                Utilisez les littéraux de nombres <span style="color:#0000DD;font-weight:bold;">50</span> au lieu de <span style="color:#008800;font-weight:bold;">new</span> <span style="color:#007020;">Number</span>().

                Utiliser les littéraux booléens <span style="color:#008800;font-weight:bold;">true</span> <span style="color:#333333;">/</span> <span style="color:#008800;font-weight:bold;">false</span> au lieu de <span style="color:#008800;font-weight:bold;">new</span> <span style="color:#007020;">Boolean</span>().

                Utiliser les littéraux d&#39;objet {} au lieu de <span style="color:#008800;font-weight:bold;">new</span> <span style="color:#007020;">Object</span>().

                Utiliser les littéraux de tableau [] au lieu de <span style="color:#008800;font-weight:bold;">new</span> <span style="color:#007020;">Array</span>().

                Utiliser les littéraux de motif <span style="color:#333333;">/</span>()<span style="color:#333333;">/</span> au lieu de <span style="color:#008800;font-weight:bold;">new</span> <span style="color:#007020;">RegExp</span>().

                Utiliser les expressions de fonctions () {} au lieu de <span style="color:#008800;font-weight:bold;">new</span> <span style="color:#007020;">Function</span>().</pre></div></div>`,2),Nge=[Ige];function Tge(n,e){return j(),K("div",Ege,Nge)}const Age=se(kge,[["render",Tge]]),Mge={class:"slide"},Rge=D("div",{class:"heading"},"AutoBoxing",-1),Pge={class:"content"},Oge=D("p",null," Le boxing consiste à envelopper une valeur primitive dans un objet. Lorsque vous traitez un type primitif comme s'il s'agissait d'un objet, par exemple en faisant appel à la fonction toLowerCase, JavaScript englobe le type primitif dans l'objet correspondant. ",-1),Fge={__name:"SlidePresentation125",setup(n){return(e,t)=>(j(),K("div",Mge,[Rge,D("div",Pge,[Oge,W(Ze,{code:`const name = "KILIAN";
let objName = name.toLowerCase();
console.log("value: " + objName + ", type: " + typeof(objName));

//c'est la même chose que de faire
objName = new Object(name)
console.log("value: " + objName + ", type: " + typeof(objName));
objName = objName.toLowerCase();
const primitiveString = objName.valueOf();
console.log("value: " + primitiveString + ", type: " + typeof(primitiveString));

`,editorIndex:"34"})])]))}},Bge={},Vge={class:"slide"},Wge=D("div",{class:"heading"},"Clean Code",-1),Hge=D("div",{class:"content"},[D("p",{class:"sub-title"}," Principes d'ingénierie logicielle, de l'ouvrage de Robert C. Martin Clean Code, adapté pour JavaScript ")],-1),$ge=[Wge,Hge];function zge(n,e){return j(),K("div",Vge,$ge)}const Uge=se(Bge,[["render",zge]]),qge={},jge={class:"slide"},Kge=he(`<div class="heading">Clean Code - Noms de variables</div><div class="content"><p><b>Évitez les noms à une seule lettre</b></p><br><p>Mal:</p><div style="background:#ffc5c5;overflow:auto;width:auto;border:solid #4a0000;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;"><span style="color:#008800;font-weight:bold;">let</span> n <span style="color:#333333;">=</span> <span style="background-color:#fff0f0;">&#39;Kilian&#39;</span>;</pre></div><br><p>Bien:</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;"><span style="color:#008800;font-weight:bold;">let</span> nom <span style="color:#333333;">=</span> <span style="background-color:#fff0f0;">&#39;Kilian&#39;</span></pre></div><br><p>Une exception est bien sûr un compteur d&#39;index</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                <span style="color:#008800;font-weight:bold;">for</span> (<span style="color:#008800;font-weight:bold;">let</span> i <span style="color:#333333;">=</span> <span style="color:#0000DD;font-weight:bold;">0</span>; i <span style="color:#333333;">&lt;</span> cars.length; i<span style="color:#333333;">++</span>) {
                  console.log(i);
                } </pre></div></div>`,2),Gge=[Kge];function Zge(n,e){return j(),K("div",jge,Gge)}const Yge=se(qge,[["render",Zge]]),Xge={},Qge={class:"slide"},Jge=he('<div class="heading">Clean Code - Noms de variables</div><div class="content"><p><b>Utilisez des noms de variables significatifs et prononçables</b></p><br><p>Mal:</p><div style="background:#ffc5c5;overflow:auto;width:auto;border:solid #4a0000;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;"><span style="color:#008800;font-weight:bold;">const</span> yyyymmdstr <span style="color:#333333;">=</span> <span style="color:#008800;font-weight:bold;">new</span> <span style="color:#007020;">Date</span>().toISOString().slice(<span style="color:#0000DD;font-weight:bold;">0</span>, <span style="color:#0000DD;font-weight:bold;">10</span>);</pre></div><br><p>Bien:</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;"><span style="color:#008800;font-weight:bold;">const</span> dateActuelle <span style="color:#333333;">=</span> <span style="color:#008800;font-weight:bold;">new</span> <span style="color:#007020;">Date</span>().toISOString().slice(<span style="color:#0000DD;font-weight:bold;">0</span>, <span style="color:#0000DD;font-weight:bold;">10</span>);</pre></div></div>',2),epe=[Jge];function tpe(n,e){return j(),K("div",Qge,epe)}const ipe=se(Xge,[["render",tpe]]),npe={},spe={class:"slide"},ope=he('<div class="heading">Clean Code - Noms de variables</div><div class="content"><p><b>Évitez les acronymes, sauf s&#39;ils sont extrêmement connus.</b></p><br><p>Mal:</p><div style="background:#ffc5c5;overflow:auto;width:auto;border:solid #4a0000;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;"><span style="color:#008800;font-weight:bold;">let</span> fmt <span style="color:#333333;">=</span> <span style="background-color:#fff0f0;">&#39;YYYY-MM-DD&#39;</span>;</pre></div><br><p>Bien:</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;"><span style="color:#008800;font-weight:bold;">let</span> dateFormat <span style="color:#333333;">=</span> <span style="background-color:#fff0f0;">&#39;YYYY-MM-DD&#39;</span>;</pre></div></div>',2),rpe=[ope];function ape(n,e){return j(),K("div",spe,rpe)}const lpe=se(npe,[["render",ape]]),cpe="/javascript/assets/catOrCategory-32ad8b1a.svg",dpe={},upe={class:"slide"},hpe=he('<div class="heading">Clean Code - Noms de variables</div><div class="content"><p><b>Évitez les abréviations lors de la création de variables</b></p><br><p>Mal:</p><div style="background:#ffc5c5;overflow:auto;width:auto;border:solid #4a0000;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;"><span style="color:#008800;font-weight:bold;">let</span> cat <span style="color:#333333;">=</span> <span style="background-color:#fff0f0;">&#39;Niveau 5 category&#39;</span>; <span style="color:#888888;">//cat ou category??</span></pre></div><br><p>Bien:</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;"><span style="color:#008800;font-weight:bold;">let</span> category <span style="color:#333333;">=</span> <span style="background-color:#fff0f0;">&#39;Niveau 5 category&#39;</span>;</pre></div><img src="'+cpe+'" class="html-css-logo" style="left:60%;top:25%;height:60%;"></div>',2),fpe=[hpe];function gpe(n,e){return j(),K("div",upe,fpe)}const ppe=se(dpe,[["render",gpe]]),mpe="/javascript/assets/tocool-9435a56d.svg",_pe="/javascript/assets/ulate-b723f00d.svg",bpe="/javascript/assets/ademain-6b33e201.svg",vpe={},wpe={class:"slide"},Cpe=he('<div class="heading">Clean Code - Noms de variables</div><div class="content"><p><b>Évitez les chiffres dans les noms.</b></p><br><p>Mal:</p><div style="background:#ffc5c5;overflow:auto;width:auto;border:solid #4a0000;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;"><span style="color:#008800;font-weight:bold;">let</span> l84work <span style="color:#333333;">=</span> <span style="color:#008800;font-weight:bold;">true</span>;</pre></div><br><p>Bien:</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;"><span style="color:#008800;font-weight:bold;">let</span> lateForWork <span style="color:#333333;">=</span> <span style="color:#008800;font-weight:bold;">true</span>;</pre></div></div><img src="'+mpe+'" class="html-css-logo" style="left:55%;top:20%;height:30%;width:30%;"><img src="'+_pe+'" class="html-css-logo" style="left:40%;top:55%;height:30%;width:40%;"><img src="'+bpe+'" class="html-css-logo" style="left:65%;top:50%;height:25%;width:30%;">',5),ype=[Cpe];function Spe(n,e){return j(),K("div",wpe,ype)}const Lpe=se(vpe,[["render",Spe]]),xpe={class:"slide"},Dpe=D("div",{class:"heading"},"Clean Code - Noms de variables",-1),kpe={class:"content"},Epe=D("p",null,"Pouvez-vous donner de meilleurs noms à ces variables ?",-1),Ipe={__name:"SlidePresentation132",setup(n){return(e,t)=>(j(),K("div",xpe,[Dpe,D("div",kpe,[Epe,W(Ze,{code:`//pouvez-vous changer les noms des variables pour que ce que fait mon code soit plus clair ?
let p = "Kilian";
let n = "Schropp";
let f = p + " " + n;
console.log("Mon nom complet est " + f);`,editorIndex:"35"})])]))}},Npe={class:"slide"},Tpe=D("div",{class:"heading"},"Clean Code - Noms de variables",-1),Ape={class:"content"},Mpe=D("p",null,"Qu'est-ce que cela signifie, et pouvez-vous être plus clair ?",-1),Rpe={__name:"SlidePresentation133",setup(n){return(e,t)=>(j(),K("div",Npe,[Tpe,D("div",Ape,[Mpe,W(Ze,{code:`let dsl = "Pardon, je suis occupé.";
let r1 = "Je n'ai rien à faire";
let qQchAFaire= true;
if(qQchAFaire){
  console.log(dsl);
}
else{
  console.log(r1);
}`,editorIndex:"36"})])]))}},Ppe={},Ope={class:"slide"},Fpe=he(`<div class="heading">Clean Code - Noms de variables</div><div class="content"><p><b>Utilisez des noms interrogeables et explicatives</b></p><br><p>Mal:</p><div style="background:#ffc5c5;overflow:auto;width:auto;border:solid #4a0000;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#888888;">// Qu&#39;est-ce que c&#39;est que 86400000?</span>
                  setTimeout(misAFeu, <span style="color:#0000DD;font-weight:bold;">86400000</span>);</pre></div><br><p>Bien:</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#888888;">// Déclarez-les comme des constantes nommées capitalisées.</span>
                  <span style="color:#008800;font-weight:bold;">const</span> MILLISECONDES_PAR_JOUR <span style="color:#333333;">=</span> <span style="color:#0000DD;font-weight:bold;">86400000</span>;

                  setTimeout(misAFeu, MILLISECONDES_PAR_JOUR);</pre></div></div>`,2),Bpe=[Fpe];function Vpe(n,e){return j(),K("div",Ope,Bpe)}const Wpe=se(Ppe,[["render",Vpe]]),Hpe={class:"slide"},$pe=D("div",{class:"heading"},"Clean Code - Noms de variables",-1),zpe={class:"content"},Upe=D("p",null," Je veux calculer l'aire du cercle, mais j'ai l'impression que mon code n'est pas très clair. Pouvez-vous le modifier ? ",-1),qpe={__name:"SlidePresentation135",setup(n){return(e,t)=>(j(),K("div",Hpe,[$pe,D("div",zpe,[Upe,W(Ze,{code:`let r = 5
let a = 3.1415926535 * r * r;
console.log("L'aire du cercle est " + a);`,editorIndex:"37"})])]))}},jpe="/javascript/assets/mentalMap-63c25163.svg",Kpe={},Gpe={class:"slide"},Zpe=he(`<div class="heading">Clean Code - Noms de variables</div><div class="content"><p><b>Éviter la cartographie mentale</b></p><br><p>Mal:</p><div style="background:#ffc5c5;overflow:auto;width:auto;border:solid #4a0000;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">const</span> endroits <span style="color:#333333;">=</span> [<span style="background-color:#fff0f0;">&quot;Austin&quot;</span>, <span style="background-color:#fff0f0;">&quot;New York&quot;</span>, <span style="background-color:#fff0f0;">&quot;San Francisco&quot;</span>];
                  <span style="color:#008800;font-weight:bold;">for</span> (<span style="color:#008800;font-weight:bold;">let</span> e of endroits){
                    console.log(e); <span style="color:#888888;">//que signifie &quot;e&quot; ici</span>
                  }

                  <span style="color:#008800;font-weight:bold;">for</span> (<span style="color:#008800;font-weight:bold;">let</span> e <span style="color:#008800;font-weight:bold;">in</span> endroits){
                    console.log(e) <span style="color:#888888;">//et qu&#39;est-ce que &quot;e&quot; ici</span>
                  }</pre></div><img src="`+jpe+'" class="html-css-logo" style="left:55%;top:45%;height:50%;width:40%;"></div>',2),Ype=[Zpe];function Xpe(n,e){return j(),K("div",Gpe,Ype)}const Qpe=se(Kpe,[["render",Xpe]]),Jpe={},eme={class:"slide"},tme=he(`<div class="heading">Clean Code - Noms de variables</div><div class="content"><p><b>Éviter la cartographie mentale</b></p><p>Bien:</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">const</span> endroits <span style="color:#333333;">=</span> [<span style="background-color:#fff0f0;">&quot;Austin&quot;</span>, <span style="background-color:#fff0f0;">&quot;New York&quot;</span>, <span style="background-color:#fff0f0;">&quot;San Francisco&quot;</span>];
                  <span style="color:#008800;font-weight:bold;">for</span> (<span style="color:#008800;font-weight:bold;">let</span> endroit of endroits){
                    console.log(endroit); <span style="color:#888888;">//endroit est plus claire ce que la variable représente</span>
                  }

                  <span style="color:#008800;font-weight:bold;">for</span> (<span style="color:#008800;font-weight:bold;">let</span> index <span style="color:#008800;font-weight:bold;">in</span> endroits){
                    <span style="color:#888888;">//un simple &quot;i&quot; serait également acceptable car il est bien connu dans la communauté des développeurs.</span>
                    console.log(index)
                  }</pre></div></div>`,2),ime=[tme];function nme(n,e){return j(),K("div",eme,ime)}const sme=se(Jpe,[["render",nme]]),ome={class:"slide"},rme=D("div",{class:"heading"},"Clean Code - Noms de variables",-1),ame={class:"content"},lme=D("p",null,"Existe-t-il un meilleur nom de variable à la place de x ??",-1),cme={__name:"SlidePresentation138",setup(n){return(e,t)=>(j(),K("div",ome,[rme,D("div",ame,[lme,W(Ze,{code:`let livres = ["Caligula","Les Fleurs du mal", "L'Immoraliste", "Le Père Goriot"]
for(let x of livres)
{
  console.log("Le livre actuel est " + x );
}`,editorIndex:"38"})])]))}},dme={},ume={class:"slide"},hme=he(`<div class="heading">Clean Code - Noms de variables</div><div class="content"><p><b>Ne pas ajouter de contexte inutile</b></p><p>Mal:</p><div style="background:#ffc5c5;overflow:auto;width:auto;border:solid #4a0000;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">const</span> Voiture <span style="color:#333333;">=</span> {
                    marqueDeVoiture<span style="color:#333333;">:</span> <span style="background-color:#fff0f0;">&quot;Honda&quot;</span>,
                    modeleDeVoiture<span style="color:#333333;">:</span> <span style="background-color:#fff0f0;">&quot;Accord&quot;</span>,
                    couleurDeVoiture<span style="color:#333333;">:</span> <span style="background-color:#fff0f0;">&quot;Bleue&quot;</span>
                  };

                  <span style="color:#008800;font-weight:bold;">function</span> peindreLaVoiture(voiture) {
                    voiture.couleurDeVoiture <span style="color:#333333;">=</span> <span style="background-color:#fff0f0;">&quot;Rouge&quot;</span>;
                  }</pre></div></div>`,2),fme=[hme];function gme(n,e){return j(),K("div",ume,fme)}const pme=se(dme,[["render",gme]]),mme={},_me={class:"slide"},bme=he(`<div class="heading">Clean Code - Noms de variables</div><div class="content"><p><b>Ne pas ajouter de contexte inutile</b></p><p>Bien:</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">const</span> Voiture <span style="color:#333333;">=</span> {
                    marque<span style="color:#333333;">:</span> <span style="background-color:#fff0f0;">&quot;Honda&quot;</span>,
                    modele<span style="color:#333333;">:</span> <span style="background-color:#fff0f0;">&quot;Accord&quot;</span>,
                    couleur<span style="color:#333333;">:</span> <span style="background-color:#fff0f0;">&quot;Bleue&quot;</span>
                  };

                  <span style="color:#008800;font-weight:bold;">function</span> peindreLaVoiture(voiture) {
                    voiture.couleur <span style="color:#333333;">=</span> <span style="background-color:#fff0f0;">&quot;Rouge&quot;</span>;
                  }</pre></div></div>`,2),vme=[bme];function wme(n,e){return j(),K("div",_me,vme)}const Cme=se(mme,[["render",wme]]),yme={class:"slide"},Sme=D("div",{class:"heading"},"Clean Code - Noms de variables",-1),Lme={class:"content"},xme=D("p",null,"Puis-je raccourcir les noms d'attributs dans un objet ?",-1),Dme={__name:"SlidePresentation141",setup(n){return(e,t)=>(j(),K("div",yme,[Sme,D("div",Lme,[xme,W(Ze,{code:`function Person(first, last, age, eyecolor) {
  this.prenomDePerson = first;
  this.nomDePerson = last;
  this.ageDePerson = age;
  this.couleurYeuxDePerson = eyecolor;
  this.nomCompletDePerson = function() {
    return this.prenomDePerson + " " + this.nomDePerson;
  };
}

const me = new Person("Kilian", "Schropp", 28, "brown")
console.log(me.nomCompletDePerson());`,editorIndex:"39"})])]))}},Z5="/javascript/assets/peace-e644c214.svg",kme={},Eme={class:"slide"},Ime=he(`<div class="heading">Clean Code - Functions</div><div class="content"><p><b>Arguments de fonction (idéalement 2 ou moins)</b></p><p> Habituellement, si vous avez plus de deux arguments, votre fonction essaie de faire trop. Dans les cas où il n&#39;est pas, la plupart du temps un objet de niveau supérieur suffira en tant que argument. </p><p>Mal:</p><div style="background:#ffc5c5;overflow:auto;width:auto;border:solid #4a0000;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">let</span> titre <span style="color:#333333;">=</span> <span style="background-color:#fff0f0;">&quot;un titre&quot;</span>;
                  <span style="color:#008800;font-weight:bold;">let</span> corps <span style="color:#333333;">=</span> <span style="background-color:#fff0f0;">&quot;contenu du corps&quot;</span>;
                  <span style="color:#008800;font-weight:bold;">let</span> boutonTexte <span style="color:#333333;">=</span> <span style="background-color:#fff0f0;">&quot;Click here&quot;</span>;
                  <span style="color:#008800;font-weight:bold;">let</span> annulable <span style="color:#333333;">=</span> <span style="color:#008800;font-weight:bold;">true</span>;
                  <span style="color:#008800;font-weight:bold;">function</span> creerUnMenu(titre, corps, boutonTexte, annulable) {
                    <span style="color:#888888;">// ...</span>
                  }
                  creerUnMenu(titre,corps,boutonTexte,annulable);</pre></div><img src="`+Z5+'" class="html-css-logo" style="left:60%;top:45%;height:50%;width:40%;"></div>',2),Nme=[Ime];function Tme(n,e){return j(),K("div",Eme,Nme)}const Ame=se(kme,[["render",Tme]]),Mme={},Rme={class:"slide"},Pme=he(`<div class="heading">Clean Code - Functions</div><div class="content"><p><b>Arguments de fonction (idéalement 2 ou moins)</b></p><p> Habituellement, si vous avez plus de deux arguments, votre fonction essaie de faire trop. Dans les cas où il n&#39;est pas, la plupart du temps un objet de niveau supérieur suffira en tant que argument. </p><p>Bien:</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">let</span> menu <span style="color:#333333;">=</span> {
                    titre<span style="color:#333333;">:</span> <span style="background-color:#fff0f0;">&quot;un titre&quot;</span>,
                    corps<span style="color:#333333;">:</span> <span style="background-color:#fff0f0;">&quot;contenu du corps&quot;</span>,
                    boutonTexte<span style="color:#333333;">:</span> <span style="background-color:#fff0f0;">&quot;Click here&quot;</span>,
                    annulable<span style="color:#333333;">:</span> <span style="color:#008800;font-weight:bold;">true</span>
                  };

                  <span style="color:#008800;font-weight:bold;">function</span> creerUnMenu({ titre, corps, boutonTexte, annulable }) {
                    <span style="color:#888888;">// ...</span>
                  }
                  creerUnMenu(menu);</pre></div><img src="`+Z5+'" class="html-css-logo" style="left:60%;top:45%;height:50%;width:40%;"></div>',2),Ome=[Pme];function Fme(n,e){return j(),K("div",Rme,Ome)}const Bme=se(Mme,[["render",Fme]]),Vme={},Wme={class:"slide"},Hme=he(`<div class="heading">Clean Code - Functions</div><div class="content"><p><b>Les fonctions doivent faire une chose</b> (si possible)</p><p>Mal:</p><div style="overflow-y:scroll;height:85%;"><div style="background:#ffc5c5;overflow:auto;width:auto;border:solid #4a0000;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                    <span style="color:#008800;font-weight:bold;">var</span> array <span style="color:#333333;">=</span> [<span style="background-color:#fff0f0;">&quot;Manish&quot;</span>,<span style="background-color:#fff0f0;">&quot;Chandan&quot;</span>,<span style="background-color:#fff0f0;">&quot;Piyush&quot;</span>,<span style="background-color:#fff0f0;">&quot;Sunil&quot;</span>,<span style="background-color:#fff0f0;">&quot;Pankaj&quot;</span>,<span style="background-color:#fff0f0;">&quot;Piyush&quot;</span>,<span style="background-color:#fff0f0;">&quot;Pankaj&quot;</span>,<span style="background-color:#fff0f0;">&quot;Tiny&quot;</span>,<span style="background-color:#fff0f0;">&quot;Chandan&quot;</span>,<span style="background-color:#fff0f0;">&quot;Manish&quot;</span>];

                    <span style="color:#008800;font-weight:bold;">function</span> removeDuplicates(array){
                      <span style="color:#008800;font-weight:bold;">let</span> storage <span style="color:#333333;">=</span> [array[<span style="color:#0000DD;font-weight:bold;">0</span>]];
                      <span style="color:#008800;font-weight:bold;">for</span>(<span style="color:#008800;font-weight:bold;">let</span> i <span style="color:#333333;">=</span> <span style="color:#0000DD;font-weight:bold;">1</span>; i <span style="color:#333333;">&lt;</span> array.length; i<span style="color:#333333;">++</span>){
                        <span style="color:#008800;font-weight:bold;">let</span> contains <span style="color:#333333;">=</span> <span style="color:#008800;font-weight:bold;">false</span>;
                        <span style="color:#008800;font-weight:bold;">for</span>(<span style="color:#008800;font-weight:bold;">let</span> item of storage){
                          <span style="color:#008800;font-weight:bold;">if</span>(array[i] <span style="color:#333333;">===</span> item){
                            contains <span style="color:#333333;">=</span> <span style="color:#008800;font-weight:bold;">true</span>;
                          }
                        }
                        <span style="color:#008800;font-weight:bold;">if</span>(contains <span style="color:#333333;">===</span> <span style="color:#008800;font-weight:bold;">false</span>){
                          storage[storage.length] <span style="color:#333333;">=</span> array[i];
                        }
                      }
                      <span style="color:#008800;font-weight:bold;">return</span> storage;
                    }    

                    console.log(removeDuplicates(array));</pre></div></div></div>`,2),$me=[Hme];function zme(n,e){return j(),K("div",Wme,$me)}const Ume=se(Vme,[["render",zme]]),qme={},jme={class:"slide"},Kme=he(`<div class="heading">Clean Code - Functions</div><div class="content"><p><b>Les fonctions doivent faire une chose</b> (si possible)</p><p>Bien:</p><div style="overflow-y:scroll;height:85%;"><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                    <span style="color:#000080;font-weight:bold;">var</span> array = [<span style="color:#0000FF;">&quot;Manish&quot;</span>,<span style="color:#0000FF;">&quot;Chandan&quot;</span>,<span style="color:#0000FF;">&quot;Piyush&quot;</span>,<span style="color:#0000FF;">&quot;Sunil&quot;</span>,<span style="color:#0000FF;">&quot;Pankaj&quot;</span>,<span style="color:#0000FF;">&quot;Piyush&quot;</span>,<span style="color:#0000FF;">&quot;Pankaj&quot;</span>,<span style="color:#0000FF;">&quot;Tiny&quot;</span>,<span style="color:#0000FF;">&quot;Chandan&quot;</span>,<span style="color:#0000FF;">&quot;Manish&quot;</span>];

                    <span style="color:#000080;font-weight:bold;">function</span> removeDuplicates(array){
                      <span style="color:#000080;font-weight:bold;">let</span> storage = [array[<span style="color:#0000FF;">0</span>]];
                      <span style="color:#000080;font-weight:bold;">for</span>(<span style="color:#000080;font-weight:bold;">let</span> i = <span style="color:#0000FF;">1</span>; i &lt; array.length; i++){
                        <span style="color:#000080;font-weight:bold;">if</span>(contains(array[i], storage) === <span style="color:#000080;font-weight:bold;">false</span>){
                          storage[storage.length] = array[i];
                        }
                      }
                      <span style="color:#000080;font-weight:bold;">return</span> storage;
                    }    

                    <span style="color:#000080;font-weight:bold;">function</span> contains(elem, arr){
                      <span style="color:#000080;font-weight:bold;">for</span>(<span style="color:#000080;font-weight:bold;">let</span> item of arr){
                        <span style="color:#000080;font-weight:bold;">if</span>(elem === item){
                          <span style="color:#000080;font-weight:bold;">return</span> <span style="color:#000080;font-weight:bold;">true</span>;
                        }
                      }
                      <span style="color:#000080;font-weight:bold;">return</span> <span style="color:#000080;font-weight:bold;">false</span>;
                    }

                    console.log(removeDuplicates(array));</pre></div></div></div>`,2),Gme=[Kme];function Zme(n,e){return j(),K("div",jme,Gme)}const Yme=se(qme,[["render",Zme]]),Xme={},Qme={class:"slide"},Jme=he(`<div class="heading">Clean Code - Functions</div><div class="content"><p><b>Les noms de fonction doivent dire ce qu&#39;ils font</b></p><p>Mal:</p><div style="background:#ffc5c5;overflow:auto;width:auto;border:solid #4a0000;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">function</span> ajouterÀLaDate(date, mois) {
                    <span style="color:#008800;font-weight:bold;">return</span> newDate <span style="color:#333333;">=</span> <span style="color:#008800;font-weight:bold;">new</span> <span style="color:#007020;">Date</span>(date.setMonth(date.getMonth()<span style="color:#333333;">+</span>mois));
                  }

                  <span style="color:#008800;font-weight:bold;">const</span> date <span style="color:#333333;">=</span> <span style="color:#008800;font-weight:bold;">new</span> <span style="color:#007020;">Date</span>();

                  <span style="color:#888888;">// Il est difficile de dire à partir du nom de la fonction ce qui est ajouté</span>
                  ajouterÀLaDate(date, <span style="color:#0000DD;font-weight:bold;">1</span>);</pre></div></div>`,2),e0e=[Jme];function t0e(n,e){return j(),K("div",Qme,e0e)}const i0e=se(Xme,[["render",t0e]]),n0e={},s0e={class:"slide"},o0e=he(`<div class="heading">Clean Code - Functions</div><div class="content"><p><b>Les noms de fonction doivent dire ce qu&#39;ils font</b></p><p>Bien:</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">function</span> ajouterMoisADate(mois, date) {
                    <span style="color:#008800;font-weight:bold;">return</span> newDate <span style="color:#333333;">=</span> <span style="color:#008800;font-weight:bold;">new</span> <span style="color:#007020;">Date</span>(date.setMonth(date.getMonth()<span style="color:#333333;">+</span>mois));
                  }

                  <span style="color:#008800;font-weight:bold;">const</span> date <span style="color:#333333;">=</span> <span style="color:#008800;font-weight:bold;">new</span> <span style="color:#007020;">Date</span>();
                  ajouterMoisADate(<span style="color:#0000DD;font-weight:bold;">1</span>, date);</pre></div></div>`,2),r0e=[o0e];function a0e(n,e){return j(),K("div",s0e,r0e)}const l0e=se(n0e,[["render",a0e]]),c0e={},d0e={class:"slide"},u0e=he(`<div class="heading">Clean Code - Functions</div><div class="content"><p><b>Refactoriser le code dupliqué</b></p><p>Mal:</p><div style="overflow-y:scroll;height:85%;"><div style="background:#ffc5c5;overflow:auto;width:auto;border:solid #4a0000;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                    <span style="color:#008800;font-weight:bold;">function</span> afficherLaListeDesDéveloppeurs(developpeurs) {
                      <span style="color:#008800;font-weight:bold;">for</span>(<span style="color:#008800;font-weight:bold;">let</span> developpeur of developpeurs){
                        <span style="color:#008800;font-weight:bold;">const</span> salairePrevu <span style="color:#333333;">=</span> developpeur.calculerSalairePrévu();
                        <span style="color:#008800;font-weight:bold;">const</span> experience <span style="color:#333333;">=</span> developpeur.obtenirExpérience();
                        <span style="color:#008800;font-weight:bold;">const</span> lienGithub <span style="color:#333333;">=</span> developpeur.obtenirLienGithub();
                        <span style="color:#008800;font-weight:bold;">const</span> donnes <span style="color:#333333;">=</span> {
                          salairePrevu,
                          experience,
                          lienGithub
                        };
                        <span style="color:#008800;font-weight:bold;">return</span> donnes;
                      }
                    }

                    <span style="color:#008800;font-weight:bold;">function</span> afficherLaListeDesGestionnaires(gestionnaires) {
                      <span style="color:#008800;font-weight:bold;">for</span>(<span style="color:#008800;font-weight:bold;">let</span> gestionnaire of gestionnaires){
                        <span style="color:#008800;font-weight:bold;">const</span> salairePrevu <span style="color:#333333;">=</span> gestionnaire.calculerSalairePrévu();
                        <span style="color:#008800;font-weight:bold;">const</span> experience <span style="color:#333333;">=</span> gestionnaire.obtenirExpérience();
                        <span style="color:#008800;font-weight:bold;">const</span> portfolio  <span style="color:#333333;">=</span> gestionnaire.obtenireProjetsMBA();
                        <span style="color:#008800;font-weight:bold;">const</span> donnes <span style="color:#333333;">=</span> {
                          salairePrevu,
                          experience,
                          portfolio 
                        };
                        <span style="color:#008800;font-weight:bold;">return</span> donnes;
                      }
                    }</pre></div></div></div>`,2),h0e=[u0e];function f0e(n,e){return j(),K("div",d0e,h0e)}const g0e=se(c0e,[["render",f0e]]),p0e={},m0e={class:"slide"},_0e=he(`<div class="heading">Clean Code - Functions</div><div class="content"><p><b>Refactoriser le code dupliqué</b></p><p>Bien:</p><div style="overflow-y:scroll;height:85%;"><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                    <span style="color:#008800;font-weight:bold;">function</span> afficherLaListeDesEmployes(employes) {
                      <span style="color:#008800;font-weight:bold;">for</span>(<span style="color:#008800;font-weight:bold;">let</span> employe of employes){
                        <span style="color:#008800;font-weight:bold;">const</span> salairePrevu <span style="color:#333333;">=</span> employe.calculerSalairePrevu();
                        <span style="color:#008800;font-weight:bold;">const</span> experience <span style="color:#333333;">=</span> employe.obtenirExperience();
                        <span style="color:#008800;font-weight:bold;">const</span> donnes <span style="color:#333333;">=</span> {
                          salairePrevu,
                          experience
                        };

                        <span style="color:#008800;font-weight:bold;">switch</span> (employe.type) {
                          <span style="color:#008800;font-weight:bold;">case</span> <span style="background-color:#fff0f0;">&quot;gestionnaire&quot;</span><span style="color:#333333;">:</span>
                            donnes.portfolio <span style="color:#333333;">=</span> employe.obtenireProjetsMBA();
                            <span style="color:#008800;font-weight:bold;">break</span>;
                          <span style="color:#008800;font-weight:bold;">case</span> <span style="background-color:#fff0f0;">&quot;développeur&quot;</span><span style="color:#333333;">:</span>
                            donnes.lienGithub <span style="color:#333333;">=</span> employe.obtenirLienGithub();
                            <span style="color:#008800;font-weight:bold;">break</span>;
                        }

                        <span style="color:#008800;font-weight:bold;">return</span> donnes;
                      }
                    }</pre></div></div></div>`,2),b0e=[_0e];function v0e(n,e){return j(),K("div",m0e,b0e)}const w0e=se(p0e,[["render",v0e]]),C0e={},y0e={class:"slide"},S0e=he(`<div class="heading">Clean Code - Functions</div><div class="content"><p><b>Ne pas utiliser les drapeaux comme paramètres de fonction</b></p><p>Mal:</p><div style="background:#ffc5c5;overflow:auto;width:auto;border:solid #4a0000;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">function</span> créerUnFichier(nom, temp) {
                    <span style="color:#008800;font-weight:bold;">if</span> (temp) {
                      fs.create(\`.<span style="color:#333333;">/</span>temp<span style="color:#333333;">/</span>\${nom}\`);
                    } <span style="color:#008800;font-weight:bold;">else</span> {
                      fs.create(nom);
                    }
                  }</pre></div></div>`,2),L0e=[S0e];function x0e(n,e){return j(),K("div",y0e,L0e)}const D0e=se(C0e,[["render",x0e]]),k0e={},E0e={class:"slide"},I0e=he(`<div class="heading">Clean Code - Functions</div><div class="content"><p><b>Ne pas utiliser les drapeaux comme paramètres de fonction</b></p><p>Bien:</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">function</span> créerUnFichier(nom) {
                    fs.create(nom);
                  }

                  <span style="color:#008800;font-weight:bold;">function</span> créerUnFichierTemp(nom) {
                    créerUnFichier(\`.<span style="color:#333333;">/</span>temp<span style="color:#333333;">/</span>\${nom}\`);
                  }
                  </pre></div></div>`,2),N0e=[I0e];function T0e(n,e){return j(),K("div",E0e,N0e)}const A0e=se(k0e,[["render",T0e]]),M0e={class:"slide"},R0e=D("div",{class:"heading"},"Clean Code - Noms de variables",-1),P0e={class:"content"},O0e=D("p",null,"Puis-je retravailler le code pour qu'il fonctionne sans drapeau ?",-1),F0e={__name:"SlidePresentation152",setup(n){return(e,t)=>(j(),K("div",M0e,[R0e,D("div",P0e,[O0e,W(Ze,{code:`function multiplyOrSum(num1, num2, isMulitply){
  if (isMulitply){
    return num1 * num2;
  }
  else{
    return num1 + num2;
  }
}

console.log(multiplyOrSum(2,5,true));
console.log(multiplyOrSum(2,5,false));`,editorIndex:"40"})])]))}},B0e={},V0e={class:"slide"},W0e=he(`<div class="heading">Strings revisités</div><div class="content"><p> Puisque nous comprenons maintenant comment les objets fonctionnent, nous pouvons examiner certaines méthodes par défaut disponibles pour différents types. Le premier type que je veux montrer est strings. </p><p>Avant cela, un bref rappel de ce qu&#39;est un String :</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  let carName1 <span style="color:#333333;">=</span> <span style="background-color:#fff0f0;">&quot;Volvo XC60&quot;</span>;
                  let carName2 <span style="color:#333333;">=</span> <span style="background-color:#fff0f0;">&#39;Volvo XC60&#39;</span>;</pre></div></div>`,2),H0e=[W0e];function $0e(n,e){return j(),K("div",V0e,H0e)}const z0e=se(B0e,[["render",$0e]]),U0e={},q0e={class:"slide"},j0e=he(`<div class="heading">Strings revisités - includes()</div><div class="content"><p> La méthode includes() renvoie true si une chaîne contient une chaîne spécifiée. Sinon, elle renvoie false. </p><p><b>Syntax:</b></p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">string<span style="color:#333333;">.</span>includes(searchvalue, start)</pre></div><br><p>Vérifie si une chaîne de caractères comprend &quot;monde&quot;:</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">let</span> text <span style="color:#333333;">=</span> <span style="background-color:#fff0f0;">&quot;Bonjour le monde, bienvenue dans l&#39;univers.&quot;</span>;
                  <span style="color:#008800;font-weight:bold;">let</span> result <span style="color:#333333;">=</span> text.includes(<span style="background-color:#fff0f0;">&quot;monde&quot;</span>);</pre></div><br><p>Commencez à la position 12 :</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">let</span> text <span style="color:#333333;">=</span> <span style="background-color:#fff0f0;">&quot;Bonjour le monde, bienvenue dans l&#39;univers.&quot;</span>;
                  <span style="color:#008800;font-weight:bold;">let</span> result <span style="color:#333333;">=</span> text.includes(<span style="background-color:#fff0f0;">&quot;monde&quot;</span>, <span style="color:#0000DD;font-weight:bold;">12</span>);</pre></div></div>`,2),K0e=[j0e];function G0e(n,e){return j(),K("div",q0e,K0e)}const Z0e=se(U0e,[["render",G0e]]),Y0e={class:"slide"},X0e=D("div",{class:"heading"},"Strings revisités - includes()",-1),Q0e={class:"content"},J0e=D("p",null,' Je veux compter toutes les occurrences de "eau" dans ma liste de mots. Pouvez-vous finir ma fonction en utilisant la méthode includes() de String? ',-1),e_e={__name:"SlidePresentation155",setup(n){return(e,t)=>(j(),K("div",Y0e,[X0e,D("div",Q0e,[J0e,W(Ze,{code:`let mots = ["beau", "voiture", "abre", "cadeau", "formation", "beaucoup", "chapeau"]
let lettres = "eau";

function compterToutesLesOccurrences(mots, lettres){
  let compteur = 0;
  return compteur;
}


const result = compterToutesLesOccurrences();
console.log(result);`,editorIndex:"41"})])]))}},t_e={},i_e={class:"slide"},n_e=he(`<div class="heading">Strings revisités - length</div><div class="content"><p> La propriété length renvoie la longueur d&#39;une chaîne de caractères. La propriété length d&#39;une chaîne vide est 0. </p><p> C&#39;est la même chose qu&#39;avec un tableau car, en interne, une String est un tableau de caractères (lettres). </p><br><p>Exemple:</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                <span style="color:#008800;font-weight:bold;">let</span> text <span style="color:#333333;">=</span> <span style="background-color:#fff0f0;">&quot;Hello World!&quot;</span>;
                <span style="color:#008800;font-weight:bold;">let</span> length <span style="color:#333333;">=</span> text.length;
                <span style="color:#008800;font-weight:bold;">let</span> lettreH <span style="color:#333333;">=</span> text[<span style="color:#0000DD;font-weight:bold;">0</span>];
                console.log(length)
                console.log(lettreH)</pre></div></div>`,2),s_e=[n_e];function o_e(n,e){return j(),K("div",i_e,s_e)}const r_e=se(t_e,[["render",o_e]]),a_e={class:"slide"},l_e=D("div",{class:"heading"},"Strings revisités - length",-1),c_e={class:"content"},d_e=D("p",null," J'ai un tableau de plusieurs longs mots français. Je veux trouver le mot le plus long dans mon tableau en utilisant l'attribut length. ",-1),u_e={__name:"SlidePresentation157",setup(n){return(e,t)=>(j(),K("div",a_e,[l_e,D("div",c_e,[d_e,W(Ze,{code:`let mots = ["dichlorodiphényltrichloroéthane", "hexakosioihexekontahexaphobie" , "désinstitutionnalisation"];

function trouverMotPlusLong(mots){
  let motPlusLong = "";
  return motPlusLong;
}

console.log(trouverMotPlusLong(mots));`,editorIndex:"42"})])]))}},h_e={},f_e={class:"slide"},g_e=he(`<div class="heading">Strings revisités - split()</div><div class="content"><p> La méthode split() divise une chaîne de caractères en un tableau de sous-chaînes. </p><br><p>Syntax:</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">string.split(separator, limit)</pre></div><br><p>Exemple:</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">let</span> text <span style="color:#333333;">=</span> <span style="background-color:#fff0f0;">&quot;Comment ça va aujourd&#39;hui ?&quot;</span>;
                  <span style="color:#008800;font-weight:bold;">let</span> words <span style="color:#333333;">=</span> text.split(<span style="background-color:#fff0f0;">&quot; &quot;</span>);
                  <span style="color:#008800;font-weight:bold;">let</span> word <span style="color:#333333;">=</span> words[<span style="color:#0000DD;font-weight:bold;">1</span>];
                  console.log(word);
                  words <span style="color:#333333;">=</span> text.split(<span style="background-color:#fff0f0;">&quot; &quot;</span>, <span style="color:#0000DD;font-weight:bold;">3</span>);
                  console.log(words)</pre></div></div>`,2),p_e=[g_e];function m_e(n,e){return j(),K("div",f_e,p_e)}const __e=se(h_e,[["render",m_e]]),b_e={},v_e={class:"slide"},w_e=he(`<div class="heading">Strings revisités - toLowerCase() / toUpperCase()</div><div class="content"><p> La méthode <b>toLowerCase()</b> convertit une chaîne de caractères en lettres <b>minuscules</b>. La méthode <b>toUpperCase()</b> convertit une chaîne de caractères en lettres <b>majuscules</b>. </p><br><p>Exemple:</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">let</span> text <span style="color:#333333;">=</span> <span style="background-color:#fff0f0;">&quot;Hello World!&quot;</span>;
                  <span style="color:#008800;font-weight:bold;">let</span> result <span style="color:#333333;">=</span> text.toUpperCase(); 
                  console.log(result); <span style="color:#888888;">//HELLO WORLD!</span>
                  result <span style="color:#333333;">=</span> text.toLowerCase();
                  console.log(result); <span style="color:#888888;">//hello world!</span></pre></div></div>`,2),C_e=[w_e];function y_e(n,e){return j(),K("div",v_e,C_e)}const S_e=se(b_e,[["render",y_e]]),L_e={class:"slide"},x_e=D("div",{class:"heading"},"Strings revisités - toLowerCase() / toUpperCase()",-1),D_e={class:"content"},k_e=D("p",null," Nous utilisons souvent les fonctions toUpperCase() et toLowerCase() pour valider les entrées des utilisateurs. Comme la comparaison est sensible à la casse, il suffit de changer la saisie en majuscule ou en minuscule et de ne comparer que le contenu de la chaîne. ",-1),E_e={__name:"SlidePresentation160",setup(n){return(e,t)=>(j(),K("div",L_e,[x_e,D("div",D_e,[k_e,W(Ze,{code:`const input = "admin";

function processInput(data){
  const admin = "ADMIN";
    if(data.toUpperCase() === admin){
      console.log("Vous êtes administrateur");
    }
    else{
      console.log("Vous êtes " + user);
    }
}

processInput(input);
`,editorIndex:"43"})])]))}},I_e={},N_e={class:"slide"},T_e=D("div",{class:"heading"},"Strings revisités - function",-1),A_e=D("div",{class:"content"},[D("p",null," Il existe de nombreuses autres méthodes/functions disponibles sur Strings. Je ne les expliquerai pas toutes, parce que beaucoup de méthodes sont très spécialisées et que vous ne les utiliserez pas très souvent. "),D("p",null," Voici un lien qui présente une liste de toutes ces fonctions et les explique en détail. "),D("a",{href:"https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Global_Objects/String#propri%C3%A9t%C3%A9s_des_instances"},"Javascript - String")],-1),M_e=[T_e,A_e];function R_e(n,e){return j(),K("div",N_e,M_e)}const P_e=se(I_e,[["render",R_e]]),O_e={class:"slide"},F_e=D("div",{class:"heading"},"Array revisités",-1),B_e={class:"content"},V_e={__name:"SlidePresentation162",setup(n){return(e,t)=>(j(),K("div",O_e,[F_e,D("div",B_e,[W(K5)])]))}},W_e={},H_e={class:"slide"},$_e=he(`<div class="heading">Array revisités - push()</div><div class="content"><p> La méthode <b>push()</b> ajoute de nouveaux éléments à la fin d&#39;un tableau. </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">const</span> fruits <span style="color:#333333;">=</span> [<span style="background-color:#fff0f0;">&quot;Banana&quot;</span>, <span style="background-color:#fff0f0;">&quot;Orange&quot;</span>, <span style="background-color:#fff0f0;">&quot;Apple&quot;</span>, <span style="background-color:#fff0f0;">&quot;Mango&quot;</span>];
                  fruits.push(<span style="background-color:#fff0f0;">&quot;Kiwi&quot;</span>);
                  console.log(fruits);
                  fruits.push(<span style="background-color:#fff0f0;">&quot;Strawberry&quot;</span>, <span style="background-color:#fff0f0;">&quot;Lemon&quot;</span>); 
                  console.log(fruits);

                  <span style="color:#888888;">// est la même chose que</span>

                  fruits[fruits.length]  <span style="color:#333333;">=</span> <span style="background-color:#fff0f0;">&quot;Blueberry&quot;</span>;
                  <span style="color:#888888;">//sauf que je ne peux pas ajouter plusieurs éléments à la fois avec la notation de l&#39;index.</span>
                  console.log(fruits);</pre></div></div>`,2),z_e=[$_e];function U_e(n,e){return j(),K("div",H_e,z_e)}const q_e=se(W_e,[["render",U_e]]),j_e={class:"slide"},K_e=D("div",{class:"heading"},"Array revisités - push()",-1),G_e={class:"content"},Z_e=D("p",null,[Ht(` J'ai une liste de noms. Je veux créer une nouvelle liste avec les noms de la première liste qui commencent par la lettre "a". Utilisez les méthodes `),D("a",{href:"https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith"},"startsWith()"),Ht(" ou l'index d'une chaîne de caractères et la méthode push() du tableau. ")],-1),Y_e={__name:"SlidePresentation164",setup(n){return(e,t)=>(j(),K("div",j_e,[K_e,D("div",G_e,[Z_e,W(Ze,{code:`const noms = ["Anja", "anis","Magdalena","Barbara", "Anna", "Maria", "Veronika", "alexander", "Monika"];
const nomsCommençantParA = [];
for(let nom of noms){

}
console.log(nomsCommençantParA);
`,editorIndex:"44"})])]))}},X_e={},Q_e={class:"slide"},J_e=he(`<div class="heading">Array revisités - pop()</div><div class="content"><p>La méthode pop() supprime (pop) le dernier élément d&#39;un tableau.</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">const</span> fruits <span style="color:#333333;">=</span> [<span style="background-color:#fff0f0;">&quot;Banana&quot;</span>, <span style="background-color:#fff0f0;">&quot;Orange&quot;</span>, <span style="background-color:#fff0f0;">&quot;Apple&quot;</span>, <span style="background-color:#fff0f0;">&quot;Mango&quot;</span>];
                  fruits.pop(); 
                  console.log(fruits); <span style="color:#888888;">//[ &#39;Banana&#39;, &#39;Orange&#39;, &#39;Apple&#39; ]</span>
                  fruits.pop();
                  console.log(fruits); <span style="color:#888888;">//[ &#39;Banana&#39;, &#39;Orange&#39; ]</span></pre></div></div>`,2),e1e=[J_e];function t1e(n,e){return j(),K("div",Q_e,e1e)}const i1e=se(X_e,[["render",t1e]]),n1e={class:"slide"},s1e=D("div",{class:"heading"},"Array revisités - pop()",-1),o1e={class:"content"},r1e=D("p",null," Souvent, vous verrez que pop() est utilisé lorsqu'il existe une liste d'actions qui doivent être traitées et retirées de la liste lorsqu'elles sont effectuées. L'exemple suivant est une démonstration naïve de ce concept. ",-1),a1e={__name:"SlidePresentation166",setup(n){return(e,t)=>(j(),K("div",n1e,[s1e,D("div",o1e,[r1e,W(Ze,{code:`const tâchesÁfaire = ["faire des courses", "amener les enfants à l'école", "faire le petit déjeuner"];
while(tâchesÁfaire.length !== 0){
    let tâche = tâchesÁfaire.pop();
    console.log("Je viens de " + tâche + " et " +tâchesÁfaire.length+" tâche a faire");
}
console.log(tâchesÁfaire);`,editorIndex:"45"})])]))}},l1e={},c1e={class:"slide"},d1e=he(`<div class="heading">Array revisités - shift()</div><div class="content"><p> La méthode shift() supprime le premier élément d&#39;un tableau. C&#39;est donc comme le pop(), mais il commence au début du tableau. </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">const</span> fruits <span style="color:#333333;">=</span> [<span style="background-color:#fff0f0;">&quot;Banana&quot;</span>, <span style="background-color:#fff0f0;">&quot;Orange&quot;</span>, <span style="background-color:#fff0f0;">&quot;Apple&quot;</span>, <span style="background-color:#fff0f0;">&quot;Mango&quot;</span>];
                  fruits.shift(); 
                  console.log(fruits) <span style="color:#888888;">//[ &#39;Orange&#39;, &#39;Apple&#39;, &#39;Mango&#39; ]</span></pre></div></div>`,2),u1e=[d1e];function h1e(n,e){return j(),K("div",c1e,u1e)}const f1e=se(l1e,[["render",h1e]]),g1e={class:"slide"},p1e=D("div",{class:"heading"},"Array revisités - shift()",-1),m1e={class:"content"},_1e=D("p",null," Ainsi, puisque shift() est très similaire à pop() dans la mesure où shift() commence à supprimer un élément d'un tableau au début, nous pouvons maintenant écrire notre exemple de liste de tâches que j'ai montré plus tôt avec pop() en utilisant shift(). ",-1),b1e={__name:"SlidePresentation168",setup(n){return(e,t)=>(j(),K("div",g1e,[p1e,D("div",m1e,[_1e,W(Ze,{code:`const tâchesÁfaire = ["faire le petit déjeuner", "amener les enfants à l'école", "faire des courses"];`,editorIndex:"46"})])]))}},v1e={},w1e={class:"slide"},C1e=he(`<div class="heading">Array revisités - unshift()</div><div class="content"><p> La méthode unshift() ajoute de nouveaux éléments au début d&#39;un tableau. </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">const</span> fruits <span style="color:#333333;">=</span> [<span style="background-color:#fff0f0;">&quot;Banana&quot;</span>, <span style="background-color:#fff0f0;">&quot;Orange&quot;</span>, <span style="background-color:#fff0f0;">&quot;Apple&quot;</span>, <span style="background-color:#fff0f0;">&quot;Mango&quot;</span>];
                  fruits.unshift(<span style="background-color:#fff0f0;">&quot;Lemon&quot;</span>,<span style="background-color:#fff0f0;">&quot;Pineapple&quot;</span>);
                  console.log(fruits) <span style="color:#888888;">//[ &#39;Lemon&#39;, &#39;Pineapple&#39;, &#39;Banana&#39;, &#39;Orange&#39;, &#39;Apple&#39;, &#39;Mango&#39; ]</span></pre></div></div>`,2),y1e=[C1e];function S1e(n,e){return j(),K("div",w1e,y1e)}const L1e=se(v1e,[["render",S1e]]),Y5="/javascript/assets/eventqueue-270cec8c.svg",x1e={},D1e={class:"slide"},k1e=D("div",{class:"heading"}," Event Queue comme exemple - FIFO (First in first out) ",-1),E1e=D("div",{class:"content"},[D("p",null," Chaque fois que l'utilisateur interagit avec votre programme - clique sur un bouton, déroule un menu ou appuie sur une touche - le système d'exploitation génère un événement. "),D("img",{src:Y5,style:{width:"85%"}})],-1),I1e=[k1e,E1e];function N1e(n,e){return j(),K("div",D1e,I1e)}const T1e=se(x1e,[["render",N1e]]),A1e={},M1e={class:"slide"},R1e=D("div",{class:"heading"}," Event Queue comme exemple - FIFO (First in first out) ",-1),P1e=D("div",{class:"content"},[D("p",null," Chaque fois que l'utilisateur interagit avec votre programme - clique sur un bouton, déroule un menu ou appuie sur une touche - le système d'exploitation génère un événement. "),D("img",{src:Y5,style:{width:"85%"}})],-1),O1e=[R1e,P1e];function F1e(n,e){return j(),K("div",M1e,O1e)}const B1e=se(A1e,[["render",F1e]]),V1e={class:"slide"},W1e=D("div",{class:"heading"}," Event Queue comme exemple - FIFO (First in first out) ",-1),H1e={class:"content"},$1e={__name:"SlidePresentation172",setup(n){return(e,t)=>(j(),K("div",V1e,[W1e,D("div",H1e,[W(Ze,{code:`function Event(name, xCoordinate, yCoordinate){
    this.name = name;
    this.xCoordinate = xCoordinate;
    this.yCoordinate = yCoordinate;
}
const clickEvent = new Event("click", 213, 301);
const keypressEvent = new Event("keypress", 500, 612);
const mousemoveEvent = new Event("mousemove", 402, 102);

const events = [];
addEvent(clickEvent);
addEvent(keypressEvent);
addEvent(mousemoveEvent);

while(events.length !== 0){
    const event = events.pop();
    console.log("Event: " + event.name + " exécuté sur les coordonnées "+ event.xCoordinate 
    + ", "+ event.yCoordinate);
}
console.log(events);

function addEvent(event){
    events.unshift(event);
}`,editorIndex:"47"})])]))}},z1e={name:"LightSwitch",data:function(){return{isSortActive:!1,isFilterActive:!1,data:[{name:"Eloise",droitier:!0,age:21},{name:"Charlotte",droitier:!0,age:47},{name:"Josephine",droitier:!1,age:28},{name:"Remy",droitier:!1,age:16},{name:"Louis",droitier:!0,age:34}],storeData:[],sortOptions:[{name:"Nom",type:"A - Z"},{name:"Nom",type:"Z - A"},{name:"Age",type:"ASC"},{name:"Age",type:"DESC"}],filterOptions:["Droitier","Gaucher"]}},mounted:function(){this.$nextTick(function(){this.storeData=[...this.data]})},methods:{sortArr:function(n){n==="A - Z"?this.data.sort((e,t)=>e.name<t.name?-1:1):n==="Z - A"?this.data.sort((e,t)=>e.name>t.name?-1:1):n==="ASC"?this.data.sort((e,t)=>e.age-t.age):n==="DESC"&&this.data.sort((e,t)=>t.age-e.age)},filterArr:function(n){n==="Droitier"?this.data=this.storeData.filter(e=>e.droitier):n==="Gaucher"&&(this.data=this.storeData.filter(e=>!e.droitier))},reset:function(){this.data=[...this.storeData]}}},X5=n=>(eS("data-v-4d69105d"),n=n(),tS(),n),U1e={class:"navbar"},q1e={class:"dropdown"},j1e=X5(()=>D("button",{class:"dropbtn"},[Ht(" Sort "),D("i",{class:"fa fa-caret-down"})],-1)),K1e={class:"dropdown-content"},G1e=["onClick"],Z1e={class:"dropdown"},Y1e=X5(()=>D("button",{class:"dropbtn"},[Ht(" Filter "),D("i",{class:"fa fa-caret-down"})],-1)),X1e={class:"dropdown-content"},Q1e=["onClick"],J1e={id:"list"};function ebe(n,e,t,i,s,o){return j(),K(Un,null,[D("div",U1e,[D("div",q1e,[j1e,D("div",K1e,[(j(!0),K(Un,null,rm(n.sortOptions,r=>(j(),K("a",{href:"#",class:"sortOption",key:r.id,onClick:a=>o.sortArr(r.type)},[Ht(ya(r.name)+" ",1),D("span",null,ya(r.type),1)],8,G1e))),128))])]),D("div",Z1e,[Y1e,D("div",X1e,[(j(!0),K(Un,null,rm(n.filterOptions,r=>(j(),K("a",{href:"#",class:"filterOption",key:r.id,onClick:a=>o.filterArr(r)},ya(r),9,Q1e))),128))])]),D("a",{href:"#",class:"filterOption",onClick:e[0]||(e[0]=(...r)=>o.reset&&o.reset(...r))},"Reset")]),D("div",J1e,[(j(!0),K(Un,null,rm(n.data,r=>(j(),K("div",{class:"listItem show",key:r.id},[D("h2",null,ya(r.name),1),D("p",null,ya(r.droitier?"droitier":"gaucher"),1),D("p",null,ya(r.age),1)]))),128))])],64)}const Q5=se(z1e,[["render",ebe],["__scopeId","data-v-4d69105d"]]),tbe={class:"slide"},ibe=D("div",{class:"heading"},"Array revisités - sort()",-1),nbe={class:"content"},sbe=D("p",null,"La fonction sort() trie les éléments d'un tableau.",-1),obe={__name:"SlidePresentation173",setup(n){return(e,t)=>(j(),K("div",tbe,[ibe,D("div",nbe,[sbe,W(Q5)])]))}},rbe={},abe={class:"slide"},lbe=he(`<div class="heading">Array revisités - sort()</div><div class="content"><p>La fonction sort() trie les éléments d&#39;un tableau.</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">const</span> fruits <span style="color:#333333;">=</span> [<span style="background-color:#fff0f0;">&quot;Banana&quot;</span>, <span style="background-color:#fff0f0;">&quot;Orange&quot;</span>, <span style="background-color:#fff0f0;">&quot;Apple&quot;</span>, <span style="background-color:#fff0f0;">&quot;Mango&quot;</span>];
                  fruits.sort();
                  console.log(fruits); <span style="color:#888888;">//[ &#39;Apple&#39;, &#39;Banana&#39;, &#39;Mango&#39;, &#39;Orange&#39; ]</span></pre></div><br><p> Dans l&#39;exemple ci-dessus, le tableau est trié par ordre alphabétique. </p><p> Nous disposons toutefois d&#39;un moyen plus puissant de trier. Nous pouvons définir nous-mêmes la condition par laquelle elle est triée. Nous y regarderons de plus près une fois que je vous aurai montré comment fonctionnent les callbacks. </p></div>`,2),cbe=[lbe];function dbe(n,e){return j(),K("div",abe,cbe)}const ube=se(rbe,[["render",dbe]]),hbe={},fbe={class:"slide"},gbe=he(`<div class="heading">Array revisités - reverse()</div><div class="content"><p>La méthode reverse() inverse l&#39;ordre des éléments d&#39;un tableau.</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">const</span> fruits <span style="color:#333333;">=</span> [<span style="background-color:#fff0f0;">&quot;Banana&quot;</span>, <span style="background-color:#fff0f0;">&quot;Orange&quot;</span>, <span style="background-color:#fff0f0;">&quot;Apple&quot;</span>, <span style="background-color:#fff0f0;">&quot;Mango&quot;</span>];
                  fruits.reverse();
                  console.log(fruits) <span style="color:#888888;">//[ &#39;Mango&#39;, &#39;Apple&#39;, &#39;Orange&#39;, &#39;Banana&#39; ]</span></pre></div></div>`,2),pbe=[gbe];function mbe(n,e){return j(),K("div",fbe,pbe)}const _be=se(hbe,[["render",mbe]]),bbe={class:"slide"},vbe=D("div",{class:"heading"},"Array revisités - reverse()",-1),wbe={class:"content"},Cbe=D("p",null," En connaissant sort() et reverse(), pouvez-vous maintenant trier une liste de mots de Z à A ? ",-1),ybe={__name:"SlidePresentation176",setup(n){return(e,t)=>(j(),K("div",bbe,[vbe,D("div",wbe,[Cbe,W(Ze,{code:'const fruits = ["Banana", "Orange", "Apple", "Mango"];',editorIndex:"48"})])]))}},Sbe={},Lbe={class:"slide"},xbe=he(`<div class="heading">Array revisités - includes()</div><div class="content"><p> La méthode includes() renvoie un résultat positif si un tableau contient une valeur spécifiée. Elle renvoie false si la valeur n&#39;est pas trouvée. </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">const</span> fruits <span style="color:#333333;">=</span> [<span style="background-color:#fff0f0;">&quot;Banana&quot;</span>, <span style="background-color:#fff0f0;">&quot;Orange&quot;</span>, <span style="background-color:#fff0f0;">&quot;Apple&quot;</span>, <span style="background-color:#fff0f0;">&quot;Mango&quot;</span>];
                  <span style="color:#008800;font-weight:bold;">const</span> result <span style="color:#333333;">=</span> fruits.includes(<span style="background-color:#fff0f0;">&quot;Mango&quot;</span>);
                  console.log(result); <span style="color:#888888;">//true</span>
                  </pre></div><br><p>Commencez la recherche à la position 3 :</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">const</span> fruits <span style="color:#333333;">=</span> [<span style="background-color:#fff0f0;">&quot;Banana&quot;</span>, <span style="background-color:#fff0f0;">&quot;Orange&quot;</span>, <span style="background-color:#fff0f0;">&quot;Apple&quot;</span>, <span style="background-color:#fff0f0;">&quot;Mango&quot;</span>];
                  fruits.includes(<span style="background-color:#fff0f0;">&quot;Banana&quot;</span>, <span style="color:#0000DD;font-weight:bold;">3</span>);</pre></div></div>`,2),Dbe=[xbe];function kbe(n,e){return j(),K("div",Lbe,Dbe)}const Ebe=se(Sbe,[["render",kbe]]),Ibe={class:"slide"},Nbe=D("div",{class:"heading"},"Array revisités - includes()",-1),Tbe={class:"content"},Abe=D("p",null," Quelqu'un a écrit une fonction contains qui vérifie si un élément est dans un tableau. Peut-on modifier le code en utilisant la fonction intégrée includes() ? ",-1),Mbe={__name:"SlidePresentation178",setup(n){return(e,t)=>(j(),K("div",Ibe,[Nbe,D("div",Tbe,[Abe,W(Ze,{code:`function contains(arr, element) {
    for (var i = 0; i < arr.length; i++) {
        if (arr[i] === element) {
            return true;
        }
    }
    return false;
}
arr = [2, 5, 9, 6];
console.log(contains(arr, 5));`,editorIndex:"49"})])]))}},Rbe={},Pbe={class:"slide"},Obe=he(`<div class="heading">Array revisités - concat()</div><div class="content"><p> La méthode concat() concatène (joint) deux tableaux ou plus. Elle renvoie un nouveau tableau, contenant les tableaux joints et ne modifie pas les tableaux existants. </p><p>Exemple:</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                <span style="color:#008800;font-weight:bold;">const</span> arr1 <span style="color:#333333;">=</span> [<span style="background-color:#fff0f0;">&quot;Cecilie&quot;</span>, <span style="background-color:#fff0f0;">&quot;Lone&quot;</span>];
                <span style="color:#008800;font-weight:bold;">const</span> arr2 <span style="color:#333333;">=</span> [<span style="background-color:#fff0f0;">&quot;Emil&quot;</span>, <span style="background-color:#fff0f0;">&quot;Tobias&quot;</span>, <span style="background-color:#fff0f0;">&quot;Linus&quot;</span>];
                <span style="color:#008800;font-weight:bold;">const</span> children <span style="color:#333333;">=</span> arr1.concat(arr2);
                console.log(children) <span style="color:#888888;">//[ &#39;Cecilie&#39;, &#39;Lone&#39;, &#39;Emil&#39;, &#39;Tobias&#39;, &#39;Linus&#39; ]</span></pre></div></div>`,2),Fbe=[Obe];function Bbe(n,e){return j(),K("div",Pbe,Fbe)}const Vbe=se(Rbe,[["render",Bbe]]),Wbe={},Hbe={class:"slide"},$be=D("div",{class:"heading"},"Array revisités - function",-1),zbe=D("div",{class:"content"},[D("p",null," Il existe de nombreuses autres méthodes/functions disponibles sur des Arrays. Je ne les expliquerai pas toutes, parce que beaucoup de méthodes sont très spécialisées et que vous ne les utiliserez pas très souvent. "),D("p",null," Voici un lien qui présente une liste de toutes ces fonctions et les explique en détail. "),D("a",{href:"https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Global_Objects/Array#m%C3%A9thodes_des_instances"},"Javascript - Array")],-1),Ube=[$be,zbe];function qbe(n,e){return j(),K("div",Hbe,Ube)}const jbe=se(Wbe,[["render",qbe]]),Kbe="/javascript/assets/jesus-769db516.svg",Gbe={},Zbe={class:"slide"},Ybe=he(`<div class="heading">Date</div><div class="content"><p>Les objets date sont créés avec new Date().</p><p>Il existe quatre façons d&#39;instancier (créer) une date :</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">let</span> date <span style="color:#333333;">=</span> <span style="color:#008800;font-weight:bold;">new</span> <span style="color:#007020;">Date</span>();
                  console.log(date); <span style="color:#888888;">//2022-11-04T09:02:15.409Z</span></pre></div><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  date <span style="color:#333333;">=</span> <span style="color:#008800;font-weight:bold;">new</span> <span style="color:#007020;">Date</span>(<span style="color:#0000DD;font-weight:bold;">100000000000</span>); <span style="color:#888888;">//milliseconds</span>
                  console.log(date); <span style="color:#888888;">//1973-03-03T09:46:40.000Z</span></pre></div><p> Tout comme nous avons commencé à compter les années après la mort de Jésus, nous avons commencé à compter les millisecondes après le 1er janvier 1970 00:00:00 UTC. </p><p> L&#39;époque actuelle du 1er janvier 1970 00:00:00 UTC a été choisie arbitrairement par les ingénieurs d&#39;Unix parce qu&#39;elle était considérée comme une date pratique pour travailler. </p><img src="`+Kbe+'" class="html-css-logo" style="left:65%;top:75%;"></div>',2),Xbe=[Ybe];function Qbe(n,e){return j(),K("div",Zbe,Xbe)}const Jbe=se(Gbe,[["render",Qbe]]),eve={},tve={class:"slide"},ive=he(`<div class="heading">Date</div><div class="content"><p>Les objets date sont créés avec new Date().</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">const</span> date <span style="color:#333333;">=</span> <span style="color:#008800;font-weight:bold;">new</span> <span style="color:#007020;">Date</span>(<span style="background-color:#fff0f0;">&quot;2015-03-25&quot;</span>);
                  console.log(date); <span style="color:#888888;">//2015-03-25T00:00:00.000Z</span>
                  </pre></div><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#888888;">//new Date(année, mois, jour, heures, minutes, secondes, millisecondes);</span>
                  <span style="color:#008800;font-weight:bold;">const</span> date <span style="color:#333333;">=</span> <span style="color:#008800;font-weight:bold;">new</span> <span style="color:#007020;">Date</span>(<span style="color:#0000DD;font-weight:bold;">2018</span>, <span style="color:#0000DD;font-weight:bold;">11</span>, <span style="color:#0000DD;font-weight:bold;">24</span>, <span style="color:#0000DD;font-weight:bold;">10</span>, <span style="color:#0000DD;font-weight:bold;">33</span>, <span style="color:#0000DD;font-weight:bold;">30</span>, <span style="color:#0000DD;font-weight:bold;">0</span>);
                  console.log(date); <span style="color:#888888;">//2018-12-24T10:33:30.000Z</span></pre></div><br><p> Le mois de la classe Date est basé sur un zéro. Le mois de janvier est égal à 0. Donc, si vous transmettez un mois égal à 1, vous dites à la date qu&#39;elle est le mois de février. </p></div>`,2),nve=[ive];function sve(n,e){return j(),K("div",tve,nve)}const ove=se(eve,[["render",sve]]),rve={},ave={class:"slide"},lve=D("div",{class:"heading"},"Callback",-1),cve=D("div",{class:"content"},[D("p",null," Un callback est une fonction passée comme argument à une autre fonction. Cette technique permet à une fonction d'appeler une autre fonction "),D("iframe",{id:"phone",src:"phone.html",width:"60%",height:"100%",frameborder:"0"})],-1),dve=[lve,cve];function uve(n,e){return j(),K("div",ave,dve)}const hve=se(rve,[["render",uve]]),fve={},gve={class:"slide"},pve=he(`<div class="heading">Callback</div><div class="content"><p> Un callback est une fonction passée comme argument à une autre fonction. </p><p>Exemple:</p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">function</span> displayer(value) {
                    console.log(value)
                  }

                  <span style="color:#008800;font-weight:bold;">function</span> calculator(num1, num2, callbackFunc) {
                    <span style="color:#008800;font-weight:bold;">let</span> sum <span style="color:#333333;">=</span> num1 <span style="color:#333333;">+</span> num2;
                    callbackFunc(sum);
                  }

                  calculator(<span style="color:#0000DD;font-weight:bold;">5</span>, <span style="color:#0000DD;font-weight:bold;">5</span>, displayer);</pre></div></div>`,2),mve=[pve];function _ve(n,e){return j(),K("div",gve,mve)}const bve=se(fve,[["render",_ve]]),vve={},wve={class:"slide"},Cve=he(`<div class="heading">Callback - Array.forEach()</div><div class="content"><p> Rappelez-vous la fonction forEach() que j&#39;ai brièvement présentée et jamais vraiment expliquée. C&#39;est le moment ! </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">const</span> numbers <span style="color:#333333;">=</span> [<span style="color:#0000DD;font-weight:bold;">45</span>, <span style="color:#0000DD;font-weight:bold;">4</span>, <span style="color:#0000DD;font-weight:bold;">9</span>, <span style="color:#0000DD;font-weight:bold;">16</span>, <span style="color:#0000DD;font-weight:bold;">25</span>];
                  numbers.forEach(display);

                  <span style="color:#008800;font-weight:bold;">function</span> display(value, index, array) {
                    console.log(<span style="background-color:#fff0f0;">&quot;Value: &quot;</span> <span style="color:#333333;">+</span> value <span style="color:#333333;">+</span> <span style="background-color:#fff0f0;">&quot;, index: &quot;</span> <span style="color:#333333;">+</span> index)
                  }</pre></div><br><p> Comme nous n&#39;avons pas implémenté la méthode forEach(), nous pouvons jeter un coup d&#39;œil rapide dans la documentation <a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach#description">mdn</a> et voir comment elle se comporte. </p></div>`,2),yve=[Cve];function Sve(n,e){return j(),K("div",wve,yve)}const Lve=se(vve,[["render",Sve]]),xve={},Dve={class:"slide"},kve=he(`<div class="heading">Callback - Array.forEach()</div><div class="content"><p>Notez que la fonction avant prend 3 arguments :</p><ul><li>La valeur de l&#39;élément</li><li>L&#39;index de l&#39;élément</li><li>Le tableau lui-même</li></ul><br><p> Dans la méthode Array.forEach(), nous ne pouvons fournir qu&#39;un seul argument. </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">const</span> numbers <span style="color:#333333;">=</span> [<span style="color:#0000DD;font-weight:bold;">45</span>, <span style="color:#0000DD;font-weight:bold;">4</span>, <span style="color:#0000DD;font-weight:bold;">9</span>, <span style="color:#0000DD;font-weight:bold;">16</span>, <span style="color:#0000DD;font-weight:bold;">25</span>];
                  numbers.forEach(display);

                  <span style="color:#008800;font-weight:bold;">function</span> display(value) {
                    console.log(<span style="background-color:#fff0f0;">&quot;Value: &quot;</span> <span style="color:#333333;">+</span> value )
                  }</pre></div></div>`,2),Eve=[kve];function Ive(n,e){return j(),K("div",Dve,Eve)}const Nve=se(xve,[["render",Ive]]),Tve={class:"slide"},Ave=D("div",{class:"heading"},"Callback - Array.sort()",-1),Mve={class:"content"},Rve=D("p",null," Je vous ai montré une interface utilisateur de tri fantaisiste et j'ai expliqué que nous pouvions y parvenir avec la méthode sort(). Bien que ce soit vrai, ce n'était que la moitié de la vérité. ",-1),Pve={__name:"SlidePresentation187",setup(n){return(e,t)=>(j(),K("div",Tve,[Ave,D("div",Mve,[Rve,W(Q5)])]))}},Ove={},Fve={class:"slide"},Bve=he(`<div class="heading">Callback - Array.sort()</div><div class="content"><p> Un petit rappel : La méthode sort() trie un tableau par ordre alphabétique. </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">const</span> fruits <span style="color:#333333;">=</span> [<span style="background-color:#fff0f0;">&quot;Banana&quot;</span>, <span style="background-color:#fff0f0;">&quot;Orange&quot;</span>, <span style="background-color:#fff0f0;">&quot;Apple&quot;</span>, <span style="background-color:#fff0f0;">&quot;Mango&quot;</span>];
                  fruits.sort();
                  console.log(fruits) <span style="color:#888888;">//[ &#39;Apple&#39;, &#39;Banana&#39;, &#39;Mango&#39;, &#39;Orange&#39; ]</span>
                </pre></div><br><p> Par défaut, la fonction sort() trie les valeurs sous forme de chaînes de caractères. Si les nombres sont triés comme des chaînes de caractères, &quot;25&quot; est plus grand que &quot;100&quot;, car &quot;2&quot; est plus grand que &quot;1&quot;. </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">const</span> numbers <span style="color:#333333;">=</span> [<span style="color:#0000DD;font-weight:bold;">25</span>, <span style="color:#0000DD;font-weight:bold;">100</span>, <span style="color:#0000DD;font-weight:bold;">40</span>, <span style="color:#0000DD;font-weight:bold;">3</span>];
                  numbers.sort();
                  console.log(numbers) <span style="color:#888888;">//[ 100, 25, 3, 40 ] ?</span></pre></div></div>`,2),Vve=[Bve];function Wve(n,e){return j(),K("div",Fve,Vve)}const Hve=se(Ove,[["render",Wve]]),$ve={},zve={class:"slide"},Uve=he(`<div class="heading">Callback - Array.sort()</div><div class="content"><p> Belle fonction, Kilian! sort() ne peut même pas trier les chiffres ! Mais attendez, lisons la <a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Global_Objects/Array/sort#description">documentation</a></p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">const</span> numbers <span style="color:#333333;">=</span> [<span style="color:#0000DD;font-weight:bold;">40</span>, <span style="color:#0000DD;font-weight:bold;">100</span>, <span style="color:#0000DD;font-weight:bold;">1</span>, <span style="color:#0000DD;font-weight:bold;">5</span>, <span style="color:#0000DD;font-weight:bold;">25</span>, <span style="color:#0000DD;font-weight:bold;">10</span>];
                  numbers.sort(compare);

                  <span style="color:#008800;font-weight:bold;">function</span> compare(a,b){
                      <span style="color:#008800;font-weight:bold;">return</span> a - b
                  }

                  console.log(numbers); <span style="color:#888888;">//[ 1, 5, 10, 25, 40, 100 ]</span></pre></div><p> Nous devons simplement indiquer à la fonction sort() comment elle doit trier. La façon de faire est de fournir une fonction qui compare deux valeurs </p></div>`,2),qve=[Uve];function jve(n,e){return j(),K("div",zve,qve)}const Kve=se($ve,[["render",jve]]),Gve={},Zve={class:"slide"},Yve=he(`<div class="heading">Callback - Array.sort()</div><div class="content"><p>Mais pourquoi ça marche ?</p><p> Voici un algorithme de tri écrit à la main. Remarquez-vous des similitudes avec l&#39;exemple précédent ? </p><div style="overflow-y:scroll;height:85%;"><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                    <span style="color:#008800;font-weight:bold;">const</span> numbers <span style="color:#333333;">=</span> [<span style="color:#0000DD;font-weight:bold;">40</span>, <span style="color:#0000DD;font-weight:bold;">100</span>, <span style="color:#0000DD;font-weight:bold;">1</span>, <span style="color:#0000DD;font-weight:bold;">5</span>, <span style="color:#0000DD;font-weight:bold;">25</span>, <span style="color:#0000DD;font-weight:bold;">10</span>];
  
                    <span style="color:#008800;font-weight:bold;">function</span> compare(a,b){
                      <span style="color:#008800;font-weight:bold;">return</span> a <span style="color:#333333;">&gt;</span> b
                    }
  
                    <span style="color:#008800;font-weight:bold;">function</span> sortArray(array, callback) {
                      <span style="color:#008800;font-weight:bold;">var</span> temp <span style="color:#333333;">=</span> <span style="color:#0000DD;font-weight:bold;">0</span>;
                      <span style="color:#008800;font-weight:bold;">for</span> (<span style="color:#008800;font-weight:bold;">var</span> i <span style="color:#333333;">=</span> <span style="color:#0000DD;font-weight:bold;">0</span>; i <span style="color:#333333;">&lt;</span> array.length; i<span style="color:#333333;">++</span>) {
                        <span style="color:#008800;font-weight:bold;">for</span> (<span style="color:#008800;font-weight:bold;">var</span> j <span style="color:#333333;">=</span> i; j <span style="color:#333333;">&lt;</span> array.length; j<span style="color:#333333;">++</span>) {
                          <span style="color:#008800;font-weight:bold;">if</span> (callback(array[i],array[j])) {
                            temp <span style="color:#333333;">=</span> array[j];
                            array[j] <span style="color:#333333;">=</span> array[i];
                            array[i] <span style="color:#333333;">=</span> temp;
                          }
                        }
                      }
                      <span style="color:#008800;font-weight:bold;">return</span> array;
                    }
  
                    console.log(sortArray(numbers, compare))</pre></div></div></div>`,2),Xve=[Yve];function Qve(n,e){return j(),K("div",Zve,Xve)}const Jve=se(Gve,[["render",Qve]]),ewe={},twe={class:"slide"},iwe=he(`<div class="heading">Callback - Array.sort()</div><div class="content"><p> Si je veux trier par ordre alphabétique de Z à A, il suffit d&#39;écrire une fonction de comparaison qui compare les chaînes de caractères. Pour cela, j&#39;utilise la fonction intégrée <a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Global_Objects/String/localeCompare">localeCompare()</a>. </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">const</span> fruits <span style="color:#333333;">=</span> [<span style="background-color:#fff0f0;">&quot;Banana&quot;</span>, <span style="background-color:#fff0f0;">&quot;Apple&quot;</span>, <span style="background-color:#fff0f0;">&quot;Ananas&quot;</span>, <span style="background-color:#fff0f0;">&quot;Blueberry&quot;</span>, <span style="background-color:#fff0f0;">&quot;Mango&quot;</span>];

                  <span style="color:#008800;font-weight:bold;">function</span> compare(a,b){
                    <span style="color:#008800;font-weight:bold;">return</span> b.localeCompare(a);
                  }
                  fruits.sort(compare)
                  console.log(fruits)</pre></div></div>`,2),nwe=[iwe];function swe(n,e){return j(),K("div",twe,nwe)}const owe=se(ewe,[["render",swe]]),rwe={class:"slide"},awe=D("div",{class:"heading"},"Callback - Array.sort()",-1),lwe={class:"content"},cwe=D("p",null," J'ai maintenant un tableau d'objets personnes. Je veux pouvoir trier par prénom, nom et âge. Pouvez-vous implémenter les fonctions de comparaison et appeler la méthode sort() avec chacune d'entre elles ? ",-1),dwe={__name:"SlidePresentation192",setup(n){return(e,t)=>(j(),K("div",rwe,[awe,D("div",lwe,[cwe,W(Ze,{code:`function Person(prenom, nom, age )
{
  this.prenom = prenom;
  this.nom = nom;
  this.age = age;
}

const kilian = new Person("Kilian", "Schropp", 28);
const dupond = new Person("Alex", "Dupond", 41);
const berta = new Person("Berta", "Huber", 70);
const barbara = new Person("Barbara", "Müller", 55);

const personArray = [barbara, dupond, kilian, berta];

function compareNom(obj1,obj2){

}

function compareAge(obj1,obj2){
  
}

function comparePrenom(obj1,obj2){
  
}

console.log(personArray);`,editorIndex:"50"})])]))}},uwe={},hwe={class:"slide"},fwe=he(`<div class="heading">Callback - Array.filter()</div><div class="content"><p> La méthode filter() crée un nouveau tableau rempli d&#39;éléments qui passent un test fourni par une fonction. </p><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                  <span style="color:#008800;font-weight:bold;">const</span> ages <span style="color:#333333;">=</span> [<span style="color:#0000DD;font-weight:bold;">32</span>, <span style="color:#0000DD;font-weight:bold;">33</span>, <span style="color:#0000DD;font-weight:bold;">16</span>, <span style="color:#0000DD;font-weight:bold;">40</span>];
                  <span style="color:#008800;font-weight:bold;">const</span> result <span style="color:#333333;">=</span> ages.filter(checkAdult);

                  <span style="color:#008800;font-weight:bold;">function</span> checkAdult(age) {
                    <span style="color:#008800;font-weight:bold;">return</span> age <span style="color:#333333;">&gt;=</span> <span style="color:#0000DD;font-weight:bold;">18</span>;
                  }

                  console.log(result);</pre></div><p> Encore une fois, jetons un coup d&#39;œil à la <a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Global_Objects/Array/filter">documentation</a>. </p></div>`,2),gwe=[fwe];function pwe(n,e){return j(),K("div",hwe,gwe)}const mwe=se(uwe,[["render",pwe]]),_we={},bwe={class:"slide"},vwe=he(`<div class="heading">Callback - Array.filter()</div><div class="content"><p> Jetons un coup d&#39;œil à une fonction d&#39;exemple écrite à la main qui fait la même chose. Pouvez-vous trouver les similarités ? </p><div style="overflow-y:scroll;height:85%;"><div style="background:#ffffff;overflow:auto;width:auto;border:solid gray;border-width:0.1em 0.1em 0.1em 0.8em;padding:0.2em 0.6em;"><pre style="margin:0;line-height:125%;">                    <span style="color:#008800;font-weight:bold;">const</span> ages <span style="color:#333333;">=</span> [<span style="color:#0000DD;font-weight:bold;">32</span>, <span style="color:#0000DD;font-weight:bold;">33</span>, <span style="color:#0000DD;font-weight:bold;">16</span>, <span style="color:#0000DD;font-weight:bold;">40</span>];
  
                    <span style="color:#008800;font-weight:bold;">function</span> checkAdult(age, index, array) {
                      <span style="color:#008800;font-weight:bold;">return</span> age <span style="color:#333333;">&gt;=</span> <span style="color:#0000DD;font-weight:bold;">18</span>;
                    }
  
                    <span style="color:#008800;font-weight:bold;">function</span> filter(array, callback){
                      <span style="color:#008800;font-weight:bold;">let</span> storage <span style="color:#333333;">=</span> [array[<span style="color:#0000DD;font-weight:bold;">0</span>]];
                      <span style="color:#008800;font-weight:bold;">for</span>(<span style="color:#008800;font-weight:bold;">let</span> i <span style="color:#333333;">=</span> <span style="color:#0000DD;font-weight:bold;">1</span>; i <span style="color:#333333;">&lt;</span> array.length; i<span style="color:#333333;">++</span>){
                        <span style="color:#008800;font-weight:bold;">if</span>(callback(array[i])){
                          storage.push(array[i]);
                        }
                      }
                      <span style="color:#008800;font-weight:bold;">return</span> storage;
                    }    
                    console.log(filter(ages, checkAdult));</pre></div></div></div>`,2),wwe=[vwe];function Cwe(n,e){return j(),K("div",bwe,wwe)}const ywe=se(_we,[["render",Cwe]]),Swe={class:"slide"},Lwe=D("div",{class:"heading"},"Callback - Array.filter()",-1),xwe={class:"content"},Dwe=D("p",null," Encore une fois, j'ai mon tableau de personnes et je veux filtrer toutes les personnes qui ont moins de 30 ans. Pouvez-vous implémenter la callback fonction ? ",-1),kwe={__name:"SlidePresentation195",setup(n){return(e,t)=>(j(),K("div",Swe,[Lwe,D("div",xwe,[Dwe,W(Ze,{code:`function Person(prenom, nom, age )
{
  this.prenom = prenom;
  this.nom = nom;
  this.age = age;
}

const kilian = new Person("Kilian", "Schropp", 28);
const dupond = new Person("Alex", "Dupond", 41);
const berta = new Person("Berta", "Huber", 70);
const barbara = new Person("Barbara", "Müller", 55);

const personArray = [barbara, dupond, kilian, berta];

function checkAge(obj1,obj2){

}

console.log(personArray);`,editorIndex:"51"})])]))}},Ewe={class:"container"},Iwe=D("img",{src:qN,class:"logo"},null,-1),Nwe={id:"presentation-area"},Twe={class:"presentation"},Awe=he('<section class="counter"><input type="number" id="index" name="index" min="1" max="194" value="1" style="width:40%;"> of 194 </section><section class="navigation"><button id="full-screen" class="btn-screen show"><span><b>⛶</b></span></button><button id="small-screen" class="btn-screen"><span><b>✖</b></span></button><button id="left-btn" class="btn"><span>❮</span></button><button id="right-btn" class="btn"><span>❯</span></button></section>',2),Mwe=D("footer",null,[D("p",null,"Created by Kilian Schropp. ©C2LR 2023")],-1),Rwe={__name:"App",setup(n){return(e,t)=>(j(),K("body",null,[D("div",Ewe,[Iwe,D("div",Nwe,[D("section",Twe,[W(T8),W(B8),W(q8),W(X8),W(o9),W(f9),W(v9),W(D9),W(P9),W(q9),W(J9),W(oP),W(hP),W(wP),W(DP),W(AP),W(VP),W(KP),W(JP),W(oO),W(fO),W(CO),W(kO),W(MO),W(HO),W(GO),W(e7),W(r7),W(f7),W(Zne),W(tse),W(ase),W(gse),W(yse),W(kse),W(Hse),W(jse),W(Qse),W(soe),W(doe),W(moe),W(Coe),W(Eoe),W(Moe),W(Boe),W(qoe),W(Joe),W(ore),W(ure),W(_re),W(yre),W(Ere),W(Vre),W(jre),W(Jre),W(rae),W(fae),W(wae),W(Lae),W(Aae),W(Bae),W(zae),W(Xae),W(sle),W(ule),W(ble),W(Lle),W(Tle),W(Ble),W(jle),W(Jle),W(rce),W(hce),W(wce),W(Dce),W(Rce),W(Hce),W(Zce),W(ide),W(lde),W(pde),W(yde),W(Ede),W(Ade),W(Fde),W($de),W(Kde),W(Jde),W(sue),W(due),W(pue),W(wue),W(Due),W(Tue),W(Oue),W(zue),W(Yue),W(the),W(rhe),W(hhe),W(_he),W(yhe),W(khe),W(Mhe),W(Bhe),W(Uhe),W(Ghe),W(tfe),W(afe),W(ffe),W(bfe),W(Sfe),W(Efe),W(Mfe),W(Bfe),W(Ufe),W(Gfe),W(Jfe),W(age),W(uge),W(pge),W(wge),W(Dge),W(Age),W(Fge),W(Uge),W(Yge),W(ipe),W(lpe),W(ppe),W(Lpe),W(Ipe),W(Rpe),W(Wpe),W(qpe),W(Qpe),W(sme),W(cme),W(pme),W(Cme),W(Dme),W(Ame),W(Bme),W(Ume),W(Yme),W(i0e),W(l0e),W(g0e),W(w0e),W(D0e),W(A0e),W(F0e),W(z0e),W(Z0e),W(e_e),W(r_e),W(u_e),W(__e),W(S_e),W(E_e),W(P_e),W(V_e),W(q_e),W(Y_e),W(i1e),W(a1e),W(f1e),W(b1e),W(L1e),W(T1e),W(B1e),W($1e),W(obe),W(ube),W(_be),W(ybe),W(Ebe),W(Mbe),W(Vbe),W(jbe),W(Jbe),W(ove),W(hve),W(bve),W(Lve),W(Nve),W(Pve),W(Hve),W(Kve),W(Jve),W(owe),W(dwe),W(mwe),W(ywe),W(kwe)]),Awe])]),Mwe]))}};S8(Rwe).mount("#app");let lx=document.querySelectorAll(".slide"),gs=document.querySelector(".slide.show");var s_=document.querySelector("#index"),Oy=document.querySelector("#left-btn"),Fy=document.querySelector("#right-btn");let o_=document.querySelector("#presentation-area");var cx=document.querySelector("#full-screen"),dx=document.querySelector("#small-screen"),J5=0,x1=1,ux=0;D1();function D1(){Vwe(),ux=lx.length,$we(),Pwe(),Owe()}Oy.addEventListener("click",Fwe);Fy.addEventListener("click",Bwe);s_.addEventListener("change",zwe);cx.addEventListener("click",Wwe);dx.addEventListener("click",Hwe);function Pwe(){x1==1?Oy.classList.remove("show"):Oy.classList.add("show")}function Owe(){x1===ux?Fy.classList.remove("show"):Fy.classList.add("show")}function Fwe(){var n=gs;gs=gs.previousElementSibling,n.classList.remove("show"),gs.classList.add("show"),D1(),hx(gs)}function Bwe(){var n=gs;gs=gs.nextElementSibling,n.classList.remove("show"),gs.classList.add("show"),D1(),hx(gs)}function Vwe(){let n=0;lx.forEach(e=>{n++,e.classList.contains("show")&&(x1=n)})}function Wwe(){o_.classList.add("full-screen"),cx.classList.remove("show"),dx.classList.add("show");const n=window.getComputedStyle(o_),e=parseFloat(n.height);console.log(e),document.documentElement.style.setProperty("--editorheight",J5)}function Hwe(){o_.classList.remove("full-screen"),cx.classList.add("show"),dx.classList.remove("show");const n=window.getComputedStyle(o_);J5=parseFloat(n.height),document.documentElement.style.setProperty("--editorheight","310px")}function $we(){s_.value=x1,s_.innerText=` of ${ux}`}function zwe(){var n=gs;gs=lx[s_.value-1],n.classList.remove("show"),gs.classList.add("show"),D1(),hx(gs)}function hx(n){const e=n.getElementsByTagName("iframe")[0];if(e!=null){const t=e.parentElement;console.log(e.src),t!==void 0&&t.hasAttribute("data-link")&&e.src.includes("lightswitch")&&e.setAttribute("src",t.dataset.link)}}});export default Uwe();
